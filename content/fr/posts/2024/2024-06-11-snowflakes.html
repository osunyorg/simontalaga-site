---
title: >-
  Snowflakes
date: "2024-06-11T23:58:04+02:00"
url: "/actualites/2024-06-11-snowflakes/"
slug: "snowflakes"
hugo:
  permalink: "/actualites/2024-06-11-snowflakes/"
  file: "content/fr/posts/2024/2024-06-11-snowflakes.html"
  path: "snowflakes"
  slug: "snowflakes"

breadcrumbs:
  - title: >-
      Accueil
    path: "/"
  - title: >-
      Actualités
    path: "/actualites/"
  - title: >-
      Snowflakes

full_width: false
design:
  full_width: false
  toc:
    present: false
    offcanvas: false

authors:
  - "simon-talaga"
translationKey: communication-website-post-0fe0673c-7b29-43ea-b4a7-29a8f0327540



meta_description: >-
  
description: >-
  

summary: >-
  Test snowflakes

contents_reading_time:
  seconds: 0
  text: >-
    moins d'une minute
contents:
  - kind: block
    template: embed
    title: >-
      Code Snowflake
    ranks:
      self: 2
    data:
      code: >-
        <h1>Introduction</h1> <p>J’ai toujours été fasciné par la neige et toutes ses manifestations.
        
        Comme beaucoup d’enfants, je m’émerveillais devant les photographies au microscope de ses constituants « élémentaires », rencontrées ça et là dans mes manuels scolaires.
        
        Que chacun de ses flocons, naissant d’une « impureté » originaire (comme un grain de poussière dans l’atmosphère) puisse être aussi unique — sans jamais être parfait — s’habiller de formes aux multiples aspérités, tout en s’agglomérant aux autres en un manteau doux, uni et pur, en dessous duquel les paysages s’indifférencient avait à mes yeux quelque chose de profondément mystérieux.
        
        En réalité, la neige m’apparaissait comme le lieu d’une étrange union des opposés.</p> <p>J’aime l’impression paradoxale de chaleur qui s’en dégage, qu’exprime parfaitement le mot de « manteau », en dépit de son froid, cruel pour qui aurait à l’affronter par nécessité ou se laisserait saisir trop imprudemment par ses charmes secrets. Est-ce un hasard qu’elle protège réellement certaines plantes contre les frimats ?
        
        J’aime le doux son craquelé des pas que l’on y fait, même si, après la poudreuse, je n’aime pas en faire ! Qui serais-je pour oser abîmer cette noble unité à peine créée et comme suspendue, de mes semelles striées de tard-venu ?
        
        Je l’aimais d’autant plus qu’elle était rare : la région bordelaise, où j’ai grandi, est très peu encline à tout épisode neigeux durable. Il y règne un climat qui accentue son impermanence, et qui exhortait à être <em>là</em> quand elle décidait, capricieuse déjouant les prédictions météorologiques, à apparaître enfin.
        
        J’aime aussi, bien sûr, que l’on puisse la considérer comme une <em>matière</em> façonnable à notre fantaisie : elle n’impose à vrai dire guère d’autre résistance que notre propre capacité à mobiliser des mains bientôt gelées !
        
        Enfin, elle dévoile un équilibre exemplaire entre le <em>flux</em> et son opposée, la <em>stase</em>, dans une temporalité que notre conscience enfantine peut appréhender : nos montagnes — ou bonhommes — de neige, « immobiles » le matin, à moitié fondus le lendemain !
        
        Spéculer sur le temps durant lequel nos créations éphémères pourront se maintenir est même une activité millénaire ! Les <em>Notes de Chevet</em> de Sei Shonagon, écrites à l’époque Heian (794–1185) en offrent un exemple particulièrement réjouissant. Au §43, <em>Choses qui semblent éveiller la mélancolie</em>,
        
        le sort d’une montagne de neige, érigée ensemble par les nobles et les serviteurs du palais impérial de Kyoto, devint même l’objet principal des soucis de l’autrice durant plus d’un mois, au point qu’elle en perde le sommeil ! Avec une sollicitude obsessionnelle — qui amusa tout le palais — elle prit soin de la protéger contre tout accident risquant de précipiter sa fonte naturelle, et ainsi la perte d’un pari engagé avec l’Impératrice en personne !</p>    <div></div> <p><em>Flocon de Von Koch d’une profondeur de  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="1" aria-valuemax="5" aria-valuenow="0">0.00 </span> itérations.</em></p> <p>C’est en lisant récemment le petit livre du mathématicien <a href="http://perso.ens-lyon.fr/ghys/accueil/" rel="nofollow">Étienne Ghys</a>, <em>La petite histoire des flocons de neige</em> (2021), que l’idée de cet article m’est venue. Je sens ici la méfiance du lecteur : « va-t-il nous proposer une énième fois un algorithme récursif pour générer l’éternellement décevant <em>Flocon de Von Koch</em>, courbe fractale qui n’est un flocon, il faut bien le dire, que dans l’imagination de quelques mathématiciens un brin forceurs ? »
        
        Je vous rassure d’emblée : il sera ici question de quelque chose de bien plus intéressant ! A la toute fin de son livre, Étienne Ghys présente un vrai modèle mathématique de la <em>croissance</em> des flocons de neige (en deux dimensions), une méthode élaborée par <a href="https://www.sciencedirect.com/science/article/abs/pii/S0960077904003741" rel="nofollow">Clifford A. Reiter</a>.
        
        Cependant, la restitution malheureusement trop succinte — et incomplète — qu’il en donne ne permet pas de recréer fidèlement les rendus de ce chercheur.
        
        Ne pouvant m’arrêter sur cette frustration, j’ai donc lu l’article original, et je propose de vous dévoiler ici pas à pas l’algorithme aux moyens de petits exemples interactifs, auxquels je me réfèrerai par le nom de <em>sketchs</em>. C’est le nom particulier que prennent les programmes développés avec bibliothèque graphique <a href="https://processing.org/" rel="nofollow">Processing</a> dont je me suis ici servi de la déclinaison Javascript, <a href="https://p5js.org/" rel="nofollow">P5.js</a>, pour réaliser ces animations. Le <em>Flocon de Von Koch</em> tout juste mentionné est un bon alibi pour vous introduire ce dont il s’agit ! Cliquez sur le nombre souligné ci-contre, puis faites glisser votre souris (ou votre doigt) de droite à gauche pour modifier sa valeur. Observez le résultat.
        
        Ainsi introduit, j’espère que chaque lecteur pourra à son tour créer, s’il le désire, sa propre machine à flocons virtuels dans la lignée d’Ukichiro Nakaya, le premier scientifique à avoir réussi à recréer de vrais flocons en laboratoire, contribuant au passage formidablement à notre compréhension de ces derniers.</p>    <div></div> <p><em>Démonstration interactive de l’<a href="https://fr.wikipedia.org/wiki/Empilement_compact#Arrangement_compact_de_cercles_dans_un_plan" rel="nofollow">arrangement compact</a> de cercles mentionné par Kepler</em>. Ici, le cercle initial est entouré  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="1" aria-valuemax="7" aria-valuenow="0">0.00 </span> fois.</p> <h1>Connaissances mathématiques requises</h1> <ul>
        
        <li>Trigonométrie basique</li> <li>Vecteurs (addition, multiplication)</li>
        
        </ul> <h1>Le Cristal de glace</h1> <p>Les flocons de neiges présentent une symétrie d’<em>ordre 6</em>. Cela veut dire, tout simplement, que si nous les tournons d’un sixième de tour sur eux-mêmes, nous retrouvons la même figure.
        
        Cette régularité — qui participe bien sûr à leur beauté ! — est très intrigante, et fascina l’immense Johannes Kepler, qui écrivit même à leur propos un petit opuscule d’une vingtaine de pages, <em>Strena seu de Nive Sexangula</em> (1610), comme cadeau à un de ses amis pour la nouvelle année !
        
        Avec beaucoup de perspicacité, il relia ce phénomène à la structure des alvéoles des ruches d’abeilles dans le domaine de l’expérience, mais aussi au monde des idées géométriques : le cercle, cette figure parfaite, peut être entouré <em>exactement</em> de 6 cercles identiques, et tend à former un <em>hexagone</em> — figure <em>par excellence</em> d’une telle symétrie — si on entoure à leur tour ces derniers, et ainsi de suite indéfiniment.
        
        (<em>cf.</em> ci-contre) Se pourrait-il que les flocons soient composés d’un aggrégat de minuscules disques, se demandait-il alors ?</p> <p>Aujourd’hui, nous pouvons expliquer cette symétrie par la structure cristalline que prend la glace dans nos conditions « terrestres » standards (nommée glace I<sub>h</sub>) : les molécules d’eau s’y arrangent naturellement en treillis hexagonaux.</p> <p>Ne pouvant bien sûr reproduire aux moyens de l’informatique des phénomènes naturels aussi complexes et d’une telle échelle, nous nous contenterons de les <em>mimer</em>, et c’est sans doute là tout ce que cette technologie pourra jamais espérer faire, contrairement à ce que fantasment certains. Nous utiliserons en conséquence une petite idéalisation, une sorte de « raccourci » pour viser un résultat assez fidèle : une <em>grille hexagonale</em> sur laquelle croîtront nos flocons virtuels, nos <em>snowfakes</em> comme diraient les anglais !</p> <h1>Hexagones</h1> <p>Pour dessiner une telle grille, il faut avoir les idées claires sur la construction de sa cellule élémentaire !</p>    <div></div> <p><em>Construisez l’hexagone inscrit avec le slider :</em></p> <span id="equation-1"></span><label><input type="range" min="0" max="6.284185307179587" step="0.001"></label> <span id="equation-2"></span> <p>La taille verticale de l’hexagone est égale, comme nous le voyons, au <strong>double</strong> de la <strong>hauteur</strong> d’un des triangles équilatéraux formés.
        
        Par simple application du théorème de Pythagore, nous pouvons déduire sa valeur.</p> <input type="checkbox"> Afficher les détails du calcul <span id="equation-3"></span> <span id="equation-4"></span> <span id="equation-5"></span> <p>Si l’on implémente ces principes avec P5.js, cela donne en quelques lignes la fonction suivante.
        
        <code>currentAngle</code> représente la position actuelle sur cercle trigonométrique et <code>side</code> la taille d’un côté de l’hexagone, qui vaut autant que le rayon du cercle. Quant à <code>cx</code> et <code>cy</code>, il s’agit des coordonnées du centre du cercle, et par conséquent, du centre de l’hexagone qui s’y inscrit.</p> <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">hexagon</span><span class="token punctuation">(</span><span class="token parameter">cx<span class="token punctuation">,</span> cy<span class="token punctuation">,</span> side</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
          <span class="token keyword">let</span> currentAngle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        
          <span class="token function">beginShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
              <span class="token keyword">let</span> a <span class="token operator">=</span> cx <span class="token operator">+</span> side <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span>currentAngle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
              <span class="token keyword">let</span> b <span class="token operator">=</span> cy <span class="token operator">+</span> side <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span>currentAngle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
              <span class="token function">vertex</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
              currentAngle <span class="token operator">+=</span> <span class="token constant">TWO_PI</span> <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">;</span>
        
            <span class="token punctuation">}</span>
        
          <span class="token function">endShape</span><span class="token punctuation">(</span><span class="token constant">CLOSE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token punctuation">}</span></code></pre> <h1>Grille hexagonale</h1> <p>Maintenant que nous savons dessiner un hexagone simple, nous devons en recouvrir le plan tout entier pour former notre grille ! En termes mathématiques plus rigoureux, il s’agit de réaliser un <strong>pavage du plan</strong>.</p> <p>Pour ce faire, de nombreuses méthodes sont possibles. Je vous présente ici est celle qui m’est apparue comme la plus évidente, mais sentez-vous libre d’essayer votre propre solution ou d’en rechercher des plus optimisées.
        
        Pour les curieux, cet <a href="https://www.redblobgames.com/grids/hexagons/" rel="nofollow">article interactif</a> très détaillé d’Amit Patel (en anglais) sera une excellente ressource à cette fin.</p>    <div></div> <p>Il y a actuellement  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="4" aria-valuemax="60" aria-valuenow="0">0.00 </span> hexagones <em>complets</em> par ligne.</p> <p>Faites progresser l’algorithme de dessin de la grille : <label><input type="range" min="0" max="100" step="1"></label> 20%</p> <input type="checkbox"> Afficher les règles <input type="checkbox"> Afficher les hexagones <p>Lorsque vous affichez les règles :</p> <ul>
        
        <li><p>La ligne oblique <span style="color: red"><strong>————</strong></span> représente le décalage entre les centres des hexagones situés à une colonne d’intervalle. Son sens varie, et est codé dans la variable booléenne <code>sign</code> dans le code ci-dessous. Les angles qu’elle forme valent alternativement <span id="equation-6"></span> et <span id="equation-7"></span> radians.</p></li> <li><p>La ligne <span style="color: #ff9342"><strong>————</strong></span> est la taille <em>verticale</em> d’un seul hexagone (que nous appelons, dans ce contexte, une <em>tuile</em> du plan) et vaut, comme nous l’avons vu, <strong>deux hauteurs</strong> d’un des 6 triangles équilatéraux composant celui-ci. Nous utilisons cette mesure pour décaler la valeur <code>cy</code> à chaque fois que l’algorithme itère au sein d’une même colonne. Nous nous servons aussi de sa <strong>moitié</strong> pour décaler vers le bas les premières tuiles une colonne sur deux (quand <code>sign</code> vaut <code>false</code>) C’est le cas par exemple du tout premier hexagone en haut à gauche !</p></li> <li><p>La ligne <span style="color: #00ff00"><strong>————</strong></span>, enfin, vient former le côté adjacent d’un nouveau triangle rectangle, qui vaut la distance <em>horizontale</em> entre deux hexagones d’une même ligne. <span style="color: #00ff00"><strong>————</strong></span> = <span id="equation-8"></span>.
        
        Une fois implémenté, cela donne la fonction suivante :</p></li>
        
        </ul> <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">drawHexagonalGrid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
          <span class="token comment">// Position du centre de la tuile hexagonale</span>
        
          <span class="token keyword">let</span> cx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        
          <span class="token keyword">let</span> cy <span class="token operator">=</span> h<span class="token punctuation">;</span>
        
        
        
          <span class="token keyword">let</span> sign <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        
          <span class="token keyword">let</span> angle<span class="token punctuation">;</span>
        
        
        
          <span class="token comment">// Colonnes</span>
        
          <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tilesPerRow <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
            <span class="token comment">// Lignes</span>
        
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> tilesPerCols <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
              <span class="token function">hexagon</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> cy<span class="token punctuation">,</span> side<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
              cy <span class="token operator">+=</span> <span class="token number">2</span> <span class="token operator">*</span> h<span class="token punctuation">;</span>
        
            <span class="token punctuation">}</span>
        
        
        
            sign <span class="token operator">=</span> <span class="token operator">!</span>sign<span class="token punctuation">;</span> <span class="token comment">// Inversion du signe à chaque changement de colonne</span>
        
            angle <span class="token operator">=</span> sign <span class="token operator">?</span> <span class="token operator">-</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">6.0</span> <span class="token operator">:</span> <span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">6.0</span><span class="token punctuation">;</span> <span class="token comment">// Sélection de l'angle selon la valeur de sign</span>
        
        
        
            <span class="token comment">// Calcul de la position du prochain hexagone</span>
        
            cx <span class="token operator">+=</span> <span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> h <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
        
            cy <span class="token operator">=</span> sign <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> h <span class="token comment">// Nous revenons en haut de l'écran à la fin d'une colonne, mais avec quel décalage ? Cela dépend de sign.</span>
        
        <span class="token punctuation">}</span></code></pre> <h1>Algorithme du flocon</h1> <p>L’algorithme est assez simple, ce qui est remarquable au vu de la complexité de ses résultats!
        
        Dans la machine de Nakaya brièvement présentée, la diversité des flocons était atteinte grâce à la variation de seulement 2 paramètres : la <strong>température</strong> (toujours sous le seuil de congélation bien sûr !) et l’<strong>humidité</strong> (la quantité de vapeur d’eau en suspension dans l’air).
        
        Ici, seuls 2 paramètres sont également nécessaires, bien qu’ils n’aient pas d’analogues physiques vraiment clairs. Nous les appelerons <span id="equation-9">\gamma</span> (<em>gamma</em>) et <span id="equation-10">\beta</span> (<em>beta</em>), et leur rôle sera bientôt précisé.
        
        A chaque cellule hexagonale est associé un nombre réel, qui représente la <strong>quantité d’eau</strong> présente à cet endroit précis de la grille.
        
        Toutes les valeurs <span id="equation-11">\geqslant 1</span> sont immédiatement considérées comme <em>gelées</em>.</p> <h2>Déroulement</h2> <p>Chaque itération de l’algorithme se déroule en <strong>3</strong> étapes :</p> <ol><li>
        
        <strong>Distinction entre les cellules dites <em>réceptrices</em> et les <em>non-réceptrices</em>.</strong>
        
        Les <em>réceptrices</em> sont les cellules <strong>gelées</strong> ou celles qui ont une <strong>voisine immédiate qui est gelée</strong> (<em>cf.</em> ci-contre les méthodes pour identifier les coordonnées des cellules voisines). Cette étape est très importante, puisque toute cellule réceptrice capture de manière <strong>permanente</strong> l’eau qui y entre : sa valeur ne peut qu’augmenter au fil du temps. Bien que non gelées, on pourrait dire très informellement que l’eau des cellules voisines est sous une forme « quasi liquide » ou « quasi solide », puisqu’elle ne peut plus se diffuser dans les cellules environnantes. (<em>Important :</em> Il faut encore une fois souligner qu’il s’agit d’un modèle mathématique idéalisé, et qu’aucun de ses composants ne correspond <em>vraiment</em> à quelque chose de physiquement réel) Par négatif, toutes les autres cellules formeront le champ des cellules <strong>non-réceptrices</strong>. La valeur de toutes les cellules que ces deux champs excluent (les <em>non-réceptrices</em> pour le champ des <em>réceptrices</em> et inversement) sera mise à 0 au sein de ceux-ci.</li></ol> <p>Observez la grille ci-dessous. Vous pouvez la colorer pour mettre en évidence les <strong>cases gelées</strong> et leurs <strong>voisines</strong> formant ensemble le champ des cellules <em>réceptrices</em> (en haut à droite), les <strong>autres</strong> comptant dans le champ des <em>non-réceptrices</em> (en bas à droite). Sentez-vous libres de changer les valeurs. Le taux maximum d’humidité par case est de  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="2" aria-valuenow="0">0.00 </span></p>    <div></div> <input type="checkbox"> Afficher les couleurs  <p>C’est ici qu’interviendra le paramètre <span id="equation-12">\beta</span>. Dans l’algorithme final, tout sera plus simple que sur cette grille : <em>toutes les cases auront la même valeur initiale</em> à l’exception d’une <em>seule</em> cellule, la « graine de glace », dont la valeur sera à <span id="equation-13">1</span>. En effet, les vrais flocons se forment toujours à partir d’un élément perturbateur, un « trouble » venant initier le processus de congélation, comme un grain de poussière. Ceci est dû à un phénomène physique que l’on appelle la <em>surfusion</em>, une phase intermédiaire où l’eau peut se maintenir liquide en dessous de sa température de congélation. Les flocons artificiels de la machine d’Ukichiro Nakaya grandissaient quant à eux à partir d’un petit poil de lapin ! C’est ce que cette « graine » représentera. Mis à part celle-ci, La valeur de toutes les autres cases sera donc égale à <span id="equation-14">\beta</span>, le « taux d’humidité global » de notre « nuage virtuel ».</p> <ol start="2"><li>
        
        <strong>Modification de la quantité d’eau dans les deux champs isolément.</strong>
        
        Pour les <em>réceptrices</em> : On ajoute le paramètre <span id="equation-15">\gamma</span>, simple constante arbitaire, une quantité d’eau « gratuite » supplémentaire. (Reiter dit qu’elle rend compte très grossièrement du fait que de « l’eau est disponible en dehors du plan de croissance » du flocon).</li></ol> <p>Pour les <em>non-réceptrices</em> : On calcule leur <strong>diffusion</strong> dans les alentours immédiats : la valeur de chaque cellule vaudra la quantité d’eau totale que chacune de ses voisines lui aura transmise, moins celle qu’elle leur aura elle-même cédée. Cette valeur est obtenue grâce à une moyenne pondérée calculée sur chaque cellule du champ des <em>non-réceptrices</em>, dont les poids pourront varier en vue de complexifier l’algorithme. Néanmoins, un poids de <span id="equation-16"></span> pour la valeur de la cellule courante et de <span id="equation-17"></span> pour celles environnantes est la solution la plus simple. Le sketch ci-dessous illustre ce processus pour une cellule au choix. Comme pour le précédent, vous pouvez [action onClick:<code>randomGridBis++</code>]rafraîchir les valeurs[/action] et modifier le taux maximum d’humidité. Ici, il est à  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="2" aria-valuenow="0">0.00 </span>.</p>    <div></div>  <ol start="3"><li>
        
        <strong>Addition des deux champs modifiés.</strong>
        
        C’est la dernière étape. L’intérêt de la diffusion, comme nous l’avons vu, est surtout que la vapeur d’eau des cellules <em>non-réceptrices</em> déborde dans les cellules <em>réceptrices</em>. L’opération a déjà été faite : certaines des cellules du champ des <em>non-réceptrices</em> qui valaient <span id="equation-18">0</span>  auparavant (puisque situées dans l’autre champ) ont désormais une valeur non-nulle : c’est la quantité d’eau prête à y déborder. (Pointez une cellule grise en bordure d’une cellule non nulle dans le sketch précédent !) Une simple addition de la valeur des cellules des deux champs unes à unes complète l’itération de l’algorithme, et donne le nouvel état complet de la grille, qui contiendra potentiellement de nouvelles cellules gelées (si leur nouvelle valeur dépasse <span id="equation-19">1</span>  ) agglomérées au cristal !</li></ol> <h2>Confusion possible</h2> <p>Une petite précision finale s’impose : bien que ce que nous venons de voir pourra sembler à juste titre analogue à un <strong>automate cellulaire</strong>, il n’en s’agit pas d’un strictement parlant.</p> <p>Les automates cellulaires sont un type d’algorithme où un espace est divisé en de multiples cellules, unités de calcul toutes identiques possédant chacune un <em>état</em> (<em>par ex. :</em> blanc ou noir) variable et une <em>règle de transition</em> fixe (<em>par ex.</em> si trois voisines sont blanches, le nouvel état sera blanc, sinon noir).
        
        Un exemple paradigmatique est le <em>Jeu de la Vie</em> de John Conway, implémenté ci-contre. Dans notre cas, chaque tuile isolée ne possède pas en elle-même la totalité du calcul : il est nécessaire d’effectuer des opérations « de l’extérieur » sur la totalité des cellules à la fois, comme nous l’avons vu. Peut-être est-il possible, cependant, de factoriser tout le code de telle manière à ce qu’il rentre dans cette catégorie ?</p>    <div></div> <p><em>Jeu de la Vie, John Conway. Les règles sont les suivantes : Si une cellule a  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="8" aria-valuenow="0">0.00 </span> voisines vivantes, elle nait. Si elle a  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="8" aria-valuenow="0">0.00 </span> voisines vivantes, elle reste en vie, sinon, elle meurt</em></p> <button>Itérer !</button> <button>Reset</button> <h2>Démonstration</h2> <p>Avant toute chose, commencez par <em>dégeler le sketch</em> en cliquant sur le bouton ci-dessous. Étant gourmand en ressources computationnelles, il a été mis en pause jusqu’à présent pour votre confort de navigation.\
        
        Vous pourrez le remettre en pause cliquant à nouveau sur ce bouton si besoin.</p> <h3>Panneau de contrôle</h3> <h4>Couleurs</h4> <p>Pour obtenir un joli flocon, les chiffres de la grille ne doivent évidemment pas rester de simples chiffres ! Il faut associer à chacun une couleur, pour distinguer (1) La vapeur et ses différentes concentrations, et (2) La glace et son ancienneté.
        
        Nous aurons par conséquent besoin de <strong>4</strong> couleurs, et je vous laisse libres de les choisir à votre guise !</p> <ul>
        
        <li>   <span></span> La couleur de l'<b>atmosphère sèche</b>. <span style="color: red; font-style: bold;">R</span> :  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>, <span style="color: green; font-style: bold;">V</span> :  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>, <span style="color: blue; font-style: bold;">B</span>:  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>
        
        </li> <li>   <span></span> La couleur de l'<b>atmosphère saturée</b>. <span style="color: red; font-style: bold;">R</span> :  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>, <span style="color: green; font-style: bold;">V</span> :  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>, <span style="color: blue; font-style: bold;">B</span>:  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>
        
        </li> <li>   <span></span> La couleur de la <b>glace fraîche</b>. <span style="color: red; font-style: bold;">R</span> :  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>, <span style="color: green; font-style: bold;">V</span> :  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>, <span style="color: blue; font-style: bold;">B</span>:  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>
        
        </li> <li>   <span></span> La couleur de la <b>glace agée</b>. <span style="color: red; font-style: bold;">R</span> :  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>, <span style="color: green; font-style: bold;">V</span> :  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>, <span style="color: blue; font-style: bold;">B</span>:  <span class="dynamic svelte-38ydfs" role="spinbutton" tabindex="0" aria-valuemin="0" aria-valuemax="255" aria-valuenow="0">0.00 </span>
        
        </li>
        
        </ul> <h4>Paramètres</h4> <p>N’hésitez pas à <em>geler le sketch</em> avant de modifier ces paramètres si les performances sont mauvaises.</p> <span id="equation-20"></span> (<i>gamma</i>) : <label><input type="range" min="0" max="1" step="0.001"></label> 0.001 <br> <span id="equation-21"></span> (<i>beta</i>) : <label><input type="range" min="0" max="1" step="0.001"></label> 0.5 <br> <br> <input type="checkbox"> Marquer les tuiles <br> <p><strong>Nombre de tuiles par ligne :</strong> <label><input type="range" min="12" max="300" step="1"></label> 55 <br></p> <span style="font-size: 0.8em; font-style: italic;">(Attention ! Plus le nombre sera élevé, plus la page sera ralentie.)</span> <p><strong>Vitesse de croissance :</strong> <label><input type="range" min="1" max="200" step="1"></label> 5 <br></p> <span style="font-size: 0.8em; font-style: italic;">(Nombre de passes de l'algorithme sur la grille par clic sur le bouton « Itération ! »)</span>     <div></div> <button>Itération !</button> <button>Reset</button> <p>Pour conclure, vous observerez peut-être qu’étrangement, l’« unité des opposés » dont je parlais en introduction se retrouve aussi à l’échelle de la formation des cristaux ! En effet, Étienne Ghys note que deux processus inverses — voire contradictoires — semblent concourir à la formation du flocon :  <strong>(1)</strong> le <em>facettage</em> et <strong>(2)</strong> la formation de <em>dendrites</em>.</p> <ol>
        
        <li>
        
        <em>Plus</em> une case est entourée de voisines gelées, plus elle va geler rapidement. Cela tend à lisser le flocon.</li> <li>
        
        <em>Moins</em> une case est entourée de voisines gelées (et donc, plus elle est entourée de « vapeur d’eau »), plus elle va geler rapidement aussi ! Cela tend à faire poindre autour du flocon des sortes d’excroissances que l’on nomme des dendrites.
        
        Ces deux principes n’ont absolument pas été programmés par nos soins, mais émergent tous deux, naturellement, des règles de l’algorithme.</li>
        
        </ol>
        
        <script type="module">
        
        	function _mergeNamespaces(n, m) {
        
        	m.forEach(function (e) {
        
        		e && typeof e !== 'string' && !Array.isArray(e) && Object.keys(e).forEach(function (k) {
        
        			if (k !== 'default' && !(k in n)) {
        
        				var d = Object.getOwnPropertyDescriptor(e, k);
        
        				Object.defineProperty(n, k, d.get ? d : {
        
        					enumerable: true,
        
        					get: function () { return e[k]; }
        
        				});
        
        			}
        
        		});
        
        	});
        
        	return Object.freeze(n);
        
        }
        
        
        
        /** @returns {void} */
        
        function noop() {}
        
        
        
        const identity = (x) => x;
        
        
        
        /**
        
         * @template T
        
         * @template S
        
         * @param {T} tar
        
         * @param {S} src
        
         * @returns {T & S}
        
         */
        
        function assign(tar, src) {
        
        	// @ts-ignore
        
        	for (const k in src) tar[k] = src[k];
        
        	return /** @type {T & S} */ (tar);
        
        }
        
        
        
        function run(fn) {
        
        	return fn();
        
        }
        
        
        
        function blank_object() {
        
        	return Object.create(null);
        
        }
        
        
        
        /**
        
         * @param {Function[]} fns
        
         * @returns {void}
        
         */
        
        function run_all(fns) {
        
        	fns.forEach(run);
        
        }
        
        
        
        /**
        
         * @param {any} thing
        
         * @returns {thing is Function}
        
         */
        
        function is_function(thing) {
        
        	return typeof thing === 'function';
        
        }
        
        
        
        /** @returns {boolean} */
        
        function safe_not_equal(a, b) {
        
        	return a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';
        
        }
        
        
        
        /** @returns {boolean} */
        
        function is_empty(obj) {
        
        	return Object.keys(obj).length === 0;
        
        }
        
        
        
        function subscribe(store, ...callbacks) {
        
        	if (store == null) {
        
        		for (const callback of callbacks) {
        
        			callback(undefined);
        
        		}
        
        		return noop;
        
        	}
        
        	const unsub = store.subscribe(...callbacks);
        
        	return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;
        
        }
        
        
        
        /** @returns {void} */
        
        function component_subscribe(component, store, callback) {
        
        	component.$$.on_destroy.push(subscribe(store, callback));
        
        }
        
        
        
        function create_slot(definition, ctx, $$scope, fn) {
        
        	if (definition) {
        
        		const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);
        
        		return definition[0](slot_ctx);
        
        	}
        
        }
        
        
        
        function get_slot_context(definition, ctx, $$scope, fn) {
        
        	return definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;
        
        }
        
        
        
        function get_slot_changes(definition, $$scope, dirty, fn) {
        
        	if (definition[2] && fn) {
        
        		const lets = definition[2](fn(dirty));
        
        		if ($$scope.dirty === undefined) {
        
        			return lets;
        
        		}
        
        		if (typeof lets === 'object') {
        
        			const merged = [];
        
        			const len = Math.max($$scope.dirty.length, lets.length);
        
        			for (let i = 0; i < len; i += 1) {
        
        				merged[i] = $$scope.dirty[i] | lets[i];
        
        			}
        
        			return merged;
        
        		}
        
        		return $$scope.dirty | lets;
        
        	}
        
        	return $$scope.dirty;
        
        }
        
        
        
        /** @returns {void} */
        
        function update_slot_base(
        
        	slot,
        
        	slot_definition,
        
        	ctx,
        
        	$$scope,
        
        	slot_changes,
        
        	get_slot_context_fn
        
        ) {
        
        	if (slot_changes) {
        
        		const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);
        
        		slot.p(slot_context, slot_changes);
        
        	}
        
        }
        
        
        
        /** @returns {any[] | -1} */
        
        function get_all_dirty_from_scope($$scope) {
        
        	if ($$scope.ctx.length > 32) {
        
        		const dirty = [];
        
        		const length = $$scope.ctx.length / 32;
        
        		for (let i = 0; i < length; i++) {
        
        			dirty[i] = -1;
        
        		}
        
        		return dirty;
        
        	}
        
        	return -1;
        
        }
        
        
        
        /** @returns {{}} */
        
        function exclude_internal_props(props) {
        
        	const result = {};
        
        	for (const k in props) if (k[0] !== '$') result[k] = props[k];
        
        	return result;
        
        }
        
        
        
        /** @returns {{}} */
        
        function compute_rest_props(props, keys) {
        
        	const rest = {};
        
        	keys = new Set(keys);
        
        	for (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];
        
        	return rest;
        
        }
        
        
        
        function null_to_empty(value) {
        
        	return value == null ? '' : value;
        
        }
        
        
        
        const is_client = typeof window !== 'undefined';
        
        
        
        /** @type {() => number} */
        
        let now = is_client ? () => window.performance.now() : () => Date.now();
        
        
        
        let raf = is_client ? (cb) => requestAnimationFrame(cb) : noop;
        
        
        
        const tasks = new Set();
        
        
        
        /**
        
         * @param {number} now
        
         * @returns {void}
        
         */
        
        function run_tasks(now) {
        
        	tasks.forEach((task) => {
        
        		if (!task.c(now)) {
        
        			tasks.delete(task);
        
        			task.f();
        
        		}
        
        	});
        
        	if (tasks.size !== 0) raf(run_tasks);
        
        }
        
        
        
        /**
        
         * Creates a new task that runs on each raf frame
        
         * until it returns a falsy value or is aborted
        
         * @param {import('./private.js').TaskCallback} callback
        
         * @returns {import('./private.js').Task}
        
         */
        
        function loop(callback) {
        
        	/** @type {import('./private.js').TaskEntry} */
        
        	let task;
        
        	if (tasks.size === 0) raf(run_tasks);
        
        	return {
        
        		promise: new Promise((fulfill) => {
        
        			tasks.add((task = { c: callback, f: fulfill }));
        
        		}),
        
        		abort() {
        
        			tasks.delete(task);
        
        		}
        
        	};
        
        }
        
        
        
        // Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM
        
        // at the end of hydration without touching the remaining nodes.
        
        let is_hydrating = false;
        
        
        
        /**
        
         * @returns {void}
        
         */
        
        function start_hydrating() {
        
        	is_hydrating = true;
        
        }
        
        
        
        /**
        
         * @returns {void}
        
         */
        
        function end_hydrating() {
        
        	is_hydrating = false;
        
        }
        
        
        
        /**
        
         * @param {number} low
        
         * @param {number} high
        
         * @param {(index: number) => number} key
        
         * @param {number} value
        
         * @returns {number}
        
         */
        
        function upper_bound(low, high, key, value) {
        
        	// Return first index of value larger than input value in the range [low, high)
        
        	while (low < high) {
        
        		const mid = low + ((high - low) >> 1);
        
        		if (key(mid) <= value) {
        
        			low = mid + 1;
        
        		} else {
        
        			high = mid;
        
        		}
        
        	}
        
        	return low;
        
        }
        
        
        
        /**
        
         * @param {NodeEx} target
        
         * @returns {void}
        
         */
        
        function init_hydrate(target) {
        
        	if (target.hydrate_init) return;
        
        	target.hydrate_init = true;
        
        	// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>
        
        
        
        	let children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);
        
        	// If target is <head>, there may be children without claim_order
        
        	if (target.nodeName === 'HEAD') {
        
        		const my_children = [];
        
        		for (let i = 0; i < children.length; i++) {
        
        			const node = children[i];
        
        			if (node.claim_order !== undefined) {
        
        				my_children.push(node);
        
        			}
        
        		}
        
        		children = my_children;
        
        	}
        
        	/*
        
        	 * Reorder claimed children optimally.
        
        	 * We can reorder claimed children optimally by finding the longest subsequence of
        
        	 * nodes that are already claimed in order and only moving the rest. The longest
        
        	 * subsequence of nodes that are claimed in order can be found by
        
        	 * computing the longest increasing subsequence of .claim_order values.
        
        	 *
        
        	 * This algorithm is optimal in generating the least amount of reorder operations
        
        	 * possible.
        
        	 *
        
        	 * Proof:
        
        	 * We know that, given a set of reordering operations, the nodes that do not move
        
        	 * always form an increasing subsequence, since they do not move among each other
        
        	 * meaning that they must be already ordered among each other. Thus, the maximal
        
        	 * set of nodes that do not move form a longest increasing subsequence.
        
        	 */
        
        	// Compute longest increasing subsequence
        
        	// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j
        
        	const m = new Int32Array(children.length + 1);
        
        	// Predecessor indices + 1
        
        	const p = new Int32Array(children.length);
        
        	m[0] = -1;
        
        	let longest = 0;
        
        	for (let i = 0; i < children.length; i++) {
        
        		const current = children[i].claim_order;
        
        		// Find the largest subsequence length such that it ends in a value less than our current value
        
        		// upper_bound returns first greater value, so we subtract one
        
        		// with fast path for when we are on the current longest subsequence
        
        		const seq_len =
        
        			(longest > 0 && children[m[longest]].claim_order <= current
        
        				? longest + 1
        
        				: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;
        
        		p[i] = m[seq_len] + 1;
        
        		const new_len = seq_len + 1;
        
        		// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.
        
        		m[new_len] = i;
        
        		longest = Math.max(new_len, longest);
        
        	}
        
        	// The longest increasing subsequence of nodes (initially reversed)
        
        
        
        	/**
        
        	 * @type {NodeEx2[]}
        
        	 */
        
        	const lis = [];
        
        	// The rest of the nodes, nodes that will be moved
        
        
        
        	/**
        
        	 * @type {NodeEx2[]}
        
        	 */
        
        	const to_move = [];
        
        	let last = children.length - 1;
        
        	for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {
        
        		lis.push(children[cur - 1]);
        
        		for (; last >= cur; last--) {
        
        			to_move.push(children[last]);
        
        		}
        
        		last--;
        
        	}
        
        	for (; last >= 0; last--) {
        
        		to_move.push(children[last]);
        
        	}
        
        	lis.reverse();
        
        	// We sort the nodes being moved to guarantee that their insertion order matches the claim order
        
        	to_move.sort((a, b) => a.claim_order - b.claim_order);
        
        	// Finally, we move the nodes
        
        	for (let i = 0, j = 0; i < to_move.length; i++) {
        
        		while (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {
        
        			j++;
        
        		}
        
        		const anchor = j < lis.length ? lis[j] : null;
        
        		target.insertBefore(to_move[i], anchor);
        
        	}
        
        }
        
        
        
        /**
        
         * @param {Node} target
        
         * @param {Node} node
        
         * @returns {void}
        
         */
        
        function append(target, node) {
        
        	target.appendChild(node);
        
        }
        
        
        
        /**
        
         * @param {Node} node
        
         * @returns {ShadowRoot | Document}
        
         */
        
        function get_root_for_style(node) {
        
        	if (!node) return document;
        
        	const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;
        
        	if (root && /** @type {ShadowRoot} */ (root).host) {
        
        		return /** @type {ShadowRoot} */ (root);
        
        	}
        
        	return node.ownerDocument;
        
        }
        
        
        
        /**
        
         * @param {Node} node
        
         * @returns {CSSStyleSheet}
        
         */
        
        function append_empty_stylesheet(node) {
        
        	const style_element = element('style');
        
        	// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,
        
        	// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.
        
        	// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.
        
        	// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.
        
        	// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.
        
        	style_element.textContent = '/* empty */';
        
        	append_stylesheet(get_root_for_style(node), style_element);
        
        	return style_element.sheet;
        
        }
        
        
        
        /**
        
         * @param {ShadowRoot | Document} node
        
         * @param {HTMLStyleElement} style
        
         * @returns {CSSStyleSheet}
        
         */
        
        function append_stylesheet(node, style) {
        
        	append(/** @type {Document} */ (node).head || node, style);
        
        	return style.sheet;
        
        }
        
        
        
        /**
        
         * @param {NodeEx} target
        
         * @param {NodeEx} node
        
         * @returns {void}
        
         */
        
        function append_hydration(target, node) {
        
        	if (is_hydrating) {
        
        		init_hydrate(target);
        
        		if (
        
        			target.actual_end_child === undefined ||
        
        			(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)
        
        		) {
        
        			target.actual_end_child = target.firstChild;
        
        		}
        
        		// Skip nodes of undefined ordering
        
        		while (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {
        
        			target.actual_end_child = target.actual_end_child.nextSibling;
        
        		}
        
        		if (node !== target.actual_end_child) {
        
        			// We only insert if the ordering of this node should be modified or the parent node is not target
        
        			if (node.claim_order !== undefined || node.parentNode !== target) {
        
        				target.insertBefore(node, target.actual_end_child);
        
        			}
        
        		} else {
        
        			target.actual_end_child = node.nextSibling;
        
        		}
        
        	} else if (node.parentNode !== target || node.nextSibling !== null) {
        
        		target.appendChild(node);
        
        	}
        
        }
        
        
        
        /**
        
         * @param {Node} target
        
         * @param {Node} node
        
         * @param {Node} [anchor]
        
         * @returns {void}
        
         */
        
        function insert(target, node, anchor) {
        
        	target.insertBefore(node, anchor || null);
        
        }
        
        
        
        /**
        
         * @param {NodeEx} target
        
         * @param {NodeEx} node
        
         * @param {NodeEx} [anchor]
        
         * @returns {void}
        
         */
        
        function insert_hydration(target, node, anchor) {
        
        	if (is_hydrating && !anchor) {
        
        		append_hydration(target, node);
        
        	} else if (node.parentNode !== target || node.nextSibling != anchor) {
        
        		target.insertBefore(node, anchor || null);
        
        	}
        
        }
        
        
        
        /**
        
         * @param {Node} node
        
         * @returns {void}
        
         */
        
        function detach(node) {
        
        	if (node.parentNode) {
        
        		node.parentNode.removeChild(node);
        
        	}
        
        }
        
        
        
        /**
        
         * @returns {void} */
        
        function destroy_each(iterations, detaching) {
        
        	for (let i = 0; i < iterations.length; i += 1) {
        
        		if (iterations[i]) iterations[i].d(detaching);
        
        	}
        
        }
        
        
        
        /**
        
         * @template {keyof HTMLElementTagNameMap} K
        
         * @param {K} name
        
         * @returns {HTMLElementTagNameMap[K]}
        
         */
        
        function element(name) {
        
        	return document.createElement(name);
        
        }
        
        
        
        /**
        
         * @template {keyof SVGElementTagNameMap} K
        
         * @param {K} name
        
         * @returns {SVGElement}
        
         */
        
        function svg_element(name) {
        
        	return document.createElementNS('http://www.w3.org/2000/svg', name);
        
        }
        
        
        
        /**
        
         * @param {string} data
        
         * @returns {Text}
        
         */
        
        function text$2(data) {
        
        	return document.createTextNode(data);
        
        }
        
        
        
        /**
        
         * @returns {Text} */
        
        function space() {
        
        	return text$2(' ');
        
        }
        
        
        
        /**
        
         * @returns {Text} */
        
        function empty() {
        
        	return text$2('');
        
        }
        
        
        
        /**
        
         * @param {EventTarget} node
        
         * @param {string} event
        
         * @param {EventListenerOrEventListenerObject} handler
        
         * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]
        
         * @returns {() => void}
        
         */
        
        function listen(node, event, handler, options) {
        
        	node.addEventListener(event, handler, options);
        
        	return () => node.removeEventListener(event, handler, options);
        
        }
        
        
        
        /**
        
         * @param {Element} node
        
         * @param {string} attribute
        
         * @param {string} [value]
        
         * @returns {void}
        
         */
        
        function attr(node, attribute, value) {
        
        	if (value == null) node.removeAttribute(attribute);
        
        	else if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);
        
        }
        
        /**
        
         * List of attributes that should always be set through the attr method,
        
         * because updating them through the property setter doesn't work reliably.
        
         * In the example of `width`/`height`, the problem is that the setter only
        
         * accepts numeric values, but the attribute can also be set to a string like `50%`.
        
         * If this list becomes too big, rethink this approach.
        
         */
        
        const always_set_through_set_attribute = ['width', 'height'];
        
        
        
        /**
        
         * @param {Element & ElementCSSInlineStyle} node
        
         * @param {{ [x: string]: string }} attributes
        
         * @returns {void}
        
         */
        
        function set_attributes(node, attributes) {
        
        	// @ts-ignore
        
        	const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);
        
        	for (const key in attributes) {
        
        		if (attributes[key] == null) {
        
        			node.removeAttribute(key);
        
        		} else if (key === 'style') {
        
        			node.style.cssText = attributes[key];
        
        		} else if (key === '__value') {
        
        			/** @type {any} */ (node).value = node[key] = attributes[key];
        
        		} else if (
        
        			descriptors[key] &&
        
        			descriptors[key].set &&
        
        			always_set_through_set_attribute.indexOf(key) === -1
        
        		) {
        
        			node[key] = attributes[key];
        
        		} else {
        
        			attr(node, key, attributes[key]);
        
        		}
        
        	}
        
        }
        
        
        
        /**
        
         * @param {Record<string, unknown>} data_map
        
         * @returns {void}
        
         */
        
        function set_custom_element_data_map(node, data_map) {
        
        	Object.keys(data_map).forEach((key) => {
        
        		set_custom_element_data(node, key, data_map[key]);
        
        	});
        
        }
        
        
        
        /**
        
         * @returns {void} */
        
        function set_custom_element_data(node, prop, value) {
        
        	const lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first
        
        	if (lower in node) {
        
        		node[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;
        
        	} else if (prop in node) {
        
        		node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;
        
        	} else {
        
        		attr(node, prop, value);
        
        	}
        
        }
        
        
        
        /**
        
         * @param {string} tag
        
         */
        
        function set_dynamic_element_data(tag) {
        
        	return /-/.test(tag) ? set_custom_element_data_map : set_attributes;
        
        }
        
        
        
        /**
        
         * @param {HTMLElement} node
        
         * @returns {string}
        
         */
        
        function get_svelte_dataset(node) {
        
        	return node.dataset.svelteH;
        
        }
        
        
        
        /**
        
         * @param {HTMLInputElement[]} group
        
         * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}
        
         */
        
        function init_binding_group(group) {
        
        	/**
        
        	 * @type {HTMLInputElement[]} */
        
        	let _inputs;
        
        	return {
        
        		/* push */ p(...inputs) {
        
        			_inputs = inputs;
        
        			_inputs.forEach((input) => group.push(input));
        
        		},
        
        		/* remove */ r() {
        
        			_inputs.forEach((input) => group.splice(group.indexOf(input), 1));
        
        		}
        
        	};
        
        }
        
        
        
        /** @returns {number} */
        
        function to_number(value) {
        
        	return value === '' ? null : +value;
        
        }
        
        
        
        /**
        
         * @param {Element} element
        
         * @returns {ChildNode[]}
        
         */
        
        function children(element) {
        
        	return Array.from(element.childNodes);
        
        }
        
        
        
        /**
        
         * @param {ChildNodeArray} nodes
        
         * @returns {void}
        
         */
        
        function init_claim_info(nodes) {
        
        	if (nodes.claim_info === undefined) {
        
        		nodes.claim_info = { last_index: 0, total_claimed: 0 };
        
        	}
        
        }
        
        
        
        /**
        
         * @template {ChildNodeEx} R
        
         * @param {ChildNodeArray} nodes
        
         * @param {(node: ChildNodeEx) => node is R} predicate
        
         * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node
        
         * @param {() => R} create_node
        
         * @param {boolean} dont_update_last_index
        
         * @returns {R}
        
         */
        
        function claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {
        
        	// Try to find nodes in an order such that we lengthen the longest increasing subsequence
        
        	init_claim_info(nodes);
        
        	const result_node = (() => {
        
        		// We first try to find an element after the previous one
        
        		for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {
        
        			const node = nodes[i];
        
        			if (predicate(node)) {
        
        				const replacement = process_node(node);
        
        				if (replacement === undefined) {
        
        					nodes.splice(i, 1);
        
        				} else {
        
        					nodes[i] = replacement;
        
        				}
        
        				if (!dont_update_last_index) {
        
        					nodes.claim_info.last_index = i;
        
        				}
        
        				return node;
        
        			}
        
        		}
        
        		// Otherwise, we try to find one before
        
        		// We iterate in reverse so that we don't go too far back
        
        		for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {
        
        			const node = nodes[i];
        
        			if (predicate(node)) {
        
        				const replacement = process_node(node);
        
        				if (replacement === undefined) {
        
        					nodes.splice(i, 1);
        
        				} else {
        
        					nodes[i] = replacement;
        
        				}
        
        				if (!dont_update_last_index) {
        
        					nodes.claim_info.last_index = i;
        
        				} else if (replacement === undefined) {
        
        					// Since we spliced before the last_index, we decrease it
        
        					nodes.claim_info.last_index--;
        
        				}
        
        				return node;
        
        			}
        
        		}
        
        		// If we can't find any matching node, we create a new one
        
        		return create_node();
        
        	})();
        
        	result_node.claim_order = nodes.claim_info.total_claimed;
        
        	nodes.claim_info.total_claimed += 1;
        
        	return result_node;
        
        }
        
        
        
        /**
        
         * @param {ChildNodeArray} nodes
        
         * @param {string} name
        
         * @param {{ [key: string]: boolean }} attributes
        
         * @param {(name: string) => Element | SVGElement} create_element
        
         * @returns {Element | SVGElement}
        
         */
        
        function claim_element_base(nodes, name, attributes, create_element) {
        
        	return claim_node(
        
        		nodes,
        
        		/** @returns {node is Element | SVGElement} */
        
        		(node) => node.nodeName === name,
        
        		/** @param {Element} node */
        
        		(node) => {
        
        			const remove = [];
        
        			for (let j = 0; j < node.attributes.length; j++) {
        
        				const attribute = node.attributes[j];
        
        				if (!attributes[attribute.name]) {
        
        					remove.push(attribute.name);
        
        				}
        
        			}
        
        			remove.forEach((v) => node.removeAttribute(v));
        
        			return undefined;
        
        		},
        
        		() => create_element(name)
        
        	);
        
        }
        
        
        
        /**
        
         * @param {ChildNodeArray} nodes
        
         * @param {string} name
        
         * @param {{ [key: string]: boolean }} attributes
        
         * @returns {Element | SVGElement}
        
         */
        
        function claim_element(nodes, name, attributes) {
        
        	return claim_element_base(nodes, name, attributes, element);
        
        }
        
        
        
        /**
        
         * @param {ChildNodeArray} nodes
        
         * @returns {Text}
        
         */
        
        function claim_text(nodes, data) {
        
        	return claim_node(
        
        		nodes,
        
        		/** @returns {node is Text} */
        
        		(node) => node.nodeType === 3,
        
        		/** @param {Text} node */
        
        		(node) => {
        
        			const data_str = '' + data;
        
        			if (node.data.startsWith(data_str)) {
        
        				if (node.data.length !== data_str.length) {
        
        					return node.splitText(data_str.length);
        
        				}
        
        			} else {
        
        				node.data = data_str;
        
        			}
        
        		},
        
        		() => text$2(data),
        
        		true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements
        
        	);
        
        }
        
        
        
        /**
        
         * @returns {Text} */
        
        function claim_space(nodes) {
        
        	return claim_text(nodes, ' ');
        
        }
        
        
        
        function get_comment_idx(nodes, text, start) {
        
        	for (let i = start; i < nodes.length; i += 1) {
        
        		const node = nodes[i];
        
        		if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {
        
        			return i;
        
        		}
        
        	}
        
        	return -1;
        
        }
        
        
        
        /**
        
         * @param {boolean} is_svg
        
         * @returns {HtmlTagHydration}
        
         */
        
        function claim_html_tag(nodes, is_svg) {
        
        	// find html opening tag
        
        	const start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);
        
        	const end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);
        
        	if (start_index === -1 || end_index === -1) {
        
        		return new HtmlTagHydration(is_svg);
        
        	}
        
        
        
        	init_claim_info(nodes);
        
        	const html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);
        
        	detach(html_tag_nodes[0]);
        
        	detach(html_tag_nodes[html_tag_nodes.length - 1]);
        
        	const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);
        
        	if (claimed_nodes.length === 0) {
        
        		return new HtmlTagHydration(is_svg);
        
        	}
        
        	for (const n of claimed_nodes) {
        
        		n.claim_order = nodes.claim_info.total_claimed;
        
        		nodes.claim_info.total_claimed += 1;
        
        	}
        
        	return new HtmlTagHydration(is_svg, claimed_nodes);
        
        }
        
        
        
        /**
        
         * @param {Text} text
        
         * @param {unknown} data
        
         * @returns {void}
        
         */
        
        function set_data(text, data) {
        
        	data = '' + data;
        
        	if (text.data === data) return;
        
        	text.data = /** @type {string} */ (data);
        
        }
        
        
        
        /**
        
         * @returns {void} */
        
        function set_input_value(input, value) {
        
        	input.value = value == null ? '' : value;
        
        }
        
        
        
        /**
        
         * @returns {void} */
        
        function set_style(node, key, value, important) {
        
        	if (value == null) {
        
        		node.style.removeProperty(key);
        
        	} else {
        
        		node.style.setProperty(key, value, important ? 'important' : '');
        
        	}
        
        }
        
        
        
        /**
        
         * @returns {void} */
        
        function select_option(select, value, mounting) {
        
        	for (let i = 0; i < select.options.length; i += 1) {
        
        		const option = select.options[i];
        
        		if (option.__value === value) {
        
        			option.selected = true;
        
        			return;
        
        		}
        
        	}
        
        	if (!mounting || value !== undefined) {
        
        		select.selectedIndex = -1; // no option should be selected
        
        	}
        
        }
        
        
        
        /**
        
         * @template T
        
         * @param {string} type
        
         * @param {T} [detail]
        
         * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]
        
         * @returns {CustomEvent<T>}
        
         */
        
        function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {
        
        	return new CustomEvent(type, { detail, bubbles, cancelable });
        
        }
        
        /** */
        
        class HtmlTag {
        
        	/**
        
        	 * @private
        
        	 * @default false
        
        	 */
        
        	is_svg = false;
        
        	/** parent for creating node */
        
        	e = undefined;
        
        	/** html tag nodes */
        
        	n = undefined;
        
        	/** target */
        
        	t = undefined;
        
        	/** anchor */
        
        	a = undefined;
        
        	constructor(is_svg = false) {
        
        		this.is_svg = is_svg;
        
        		this.e = this.n = null;
        
        	}
        
        
        
        	/**
        
        	 * @param {string} html
        
        	 * @returns {void}
        
        	 */
        
        	c(html) {
        
        		this.h(html);
        
        	}
        
        
        
        	/**
        
        	 * @param {string} html
        
        	 * @param {HTMLElement | SVGElement} target
        
        	 * @param {HTMLElement | SVGElement} anchor
        
        	 * @returns {void}
        
        	 */
        
        	m(html, target, anchor = null) {
        
        		if (!this.e) {
        
        			if (this.is_svg)
        
        				this.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));
        
        			/** #7364  target for <template> may be provided as #document-fragment(11) */ else
        
        				this.e = element(
        
        					/** @type {keyof HTMLElementTagNameMap} */ (
        
        						target.nodeType === 11 ? 'TEMPLATE' : target.nodeName
        
        					)
        
        				);
        
        			this.t =
        
        				target.tagName !== 'TEMPLATE'
        
        					? target
        
        					: /** @type {HTMLTemplateElement} */ (target).content;
        
        			this.c(html);
        
        		}
        
        		this.i(anchor);
        
        	}
        
        
        
        	/**
        
        	 * @param {string} html
        
        	 * @returns {void}
        
        	 */
        
        	h(html) {
        
        		this.e.innerHTML = html;
        
        		this.n = Array.from(
        
        			this.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes
        
        		);
        
        	}
        
        
        
        	/**
        
        	 * @returns {void} */
        
        	i(anchor) {
        
        		for (let i = 0; i < this.n.length; i += 1) {
        
        			insert(this.t, this.n[i], anchor);
        
        		}
        
        	}
        
        
        
        	/**
        
        	 * @param {string} html
        
        	 * @returns {void}
        
        	 */
        
        	p(html) {
        
        		this.d();
        
        		this.h(html);
        
        		this.i(this.a);
        
        	}
        
        
        
        	/**
        
        	 * @returns {void} */
        
        	d() {
        
        		this.n.forEach(detach);
        
        	}
        
        }
        
        
        
        class HtmlTagHydration extends HtmlTag {
        
        	/** @type {Element[]} hydration claimed nodes */
        
        	l = undefined;
        
        
        
        	constructor(is_svg = false, claimed_nodes) {
        
        		super(is_svg);
        
        		this.e = this.n = null;
        
        		this.l = claimed_nodes;
        
        	}
        
        
        
        	/**
        
        	 * @param {string} html
        
        	 * @returns {void}
        
        	 */
        
        	c(html) {
        
        		if (this.l) {
        
        			this.n = this.l;
        
        		} else {
        
        			super.c(html);
        
        		}
        
        	}
        
        
        
        	/**
        
        	 * @returns {void} */
        
        	i(anchor) {
        
        		for (let i = 0; i < this.n.length; i += 1) {
        
        			insert_hydration(this.t, this.n[i], anchor);
        
        		}
        
        	}
        
        }
        
        
        
        /**
        
         * @typedef {Node & {
        
         * 	claim_order?: number;
        
         * 	hydrate_init?: true;
        
         * 	actual_end_child?: NodeEx;
        
         * 	childNodes: NodeListOf<NodeEx>;
        
         * }} NodeEx
        
         */
        
        
        
        /** @typedef {ChildNode & NodeEx} ChildNodeEx */
        
        
        
        /** @typedef {NodeEx & { claim_order: number }} NodeEx2 */
        
        
        
        /**
        
         * @typedef {ChildNodeEx[] & {
        
         * 	claim_info?: {
        
         * 		last_index: number;
        
         * 		total_claimed: number;
        
         * 	};
        
         * }} ChildNodeArray
        
         */
        
        
        
        // we need to store the information for multiple documents because a Svelte application could also contain iframes
        
        // https://github.com/sveltejs/svelte/issues/3624
        
        /** @type {Map<Document | ShadowRoot, import('./private.d.ts').StyleInformation>} */
        
        const managed_styles = new Map();
        
        
        
        let active = 0;
        
        
        
        // https://github.com/darkskyapp/string-hash/blob/master/index.js
        
        /**
        
         * @param {string} str
        
         * @returns {number}
        
         */
        
        function hash(str) {
        
        	let hash = 5381;
        
        	let i = str.length;
        
        	while (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);
        
        	return hash >>> 0;
        
        }
        
        
        
        /**
        
         * @param {Document | ShadowRoot} doc
        
         * @param {Element & ElementCSSInlineStyle} node
        
         * @returns {{ stylesheet: any; rules: {}; }}
        
         */
        
        function create_style_information(doc, node) {
        
        	const info = { stylesheet: append_empty_stylesheet(node), rules: {} };
        
        	managed_styles.set(doc, info);
        
        	return info;
        
        }
        
        
        
        /**
        
         * @param {Element & ElementCSSInlineStyle} node
        
         * @param {number} a
        
         * @param {number} b
        
         * @param {number} duration
        
         * @param {number} delay
        
         * @param {(t: number) => number} ease
        
         * @param {(t: number, u: number) => string} fn
        
         * @param {number} uid
        
         * @returns {string}
        
         */
        
        function create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {
        
        	const step = 16.666 / duration;
        
        	let keyframes = '{\n';
        
        	for (let p = 0; p <= 1; p += step) {
        
        		const t = a + (b - a) * ease(p);
        
        		keyframes += p * 100 + `%{${fn(t, 1 - t)}}\n`;
        
        	}
        
        	const rule = keyframes + `100% {${fn(b, 1 - b)}}\n}`;
        
        	const name = `__svelte_${hash(rule)}_${uid}`;
        
        	const doc = get_root_for_style(node);
        
        	const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);
        
        	if (!rules[name]) {
        
        		rules[name] = true;
        
        		stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);
        
        	}
        
        	const animation = node.style.animation || '';
        
        	node.style.animation = `${
        
        		animation ? `${animation}, ` : ''
        
        	}${name} ${duration}ms linear ${delay}ms 1 both`;
        
        	active += 1;
        
        	return name;
        
        }
        
        
        
        /**
        
         * @param {Element & ElementCSSInlineStyle} node
        
         * @param {string} [name]
        
         * @returns {void}
        
         */
        
        function delete_rule(node, name) {
        
        	const previous = (node.style.animation || '').split(', ');
        
        	const next = previous.filter(
        
        		name
        
        			? (anim) => anim.indexOf(name) < 0 // remove specific animation
        
        			: (anim) => anim.indexOf('__svelte') === -1 // remove all Svelte animations
        
        	);
        
        	const deleted = previous.length - next.length;
        
        	if (deleted) {
        
        		node.style.animation = next.join(', ');
        
        		active -= deleted;
        
        		if (!active) clear_rules();
        
        	}
        
        }
        
        
        
        /** @returns {void} */
        
        function clear_rules() {
        
        	raf(() => {
        
        		if (active) return;
        
        		managed_styles.forEach((info) => {
        
        			const { ownerNode } = info.stylesheet;
        
        			// there is no ownerNode if it runs on jsdom.
        
        			if (ownerNode) detach(ownerNode);
        
        		});
        
        		managed_styles.clear();
        
        	});
        
        }
        
        
        
        /**
        
         * @param {Element & ElementCSSInlineStyle} node
        
         * @param {import('./private.js').PositionRect} from
        
         * @param {import('./private.js').AnimationFn} fn
        
         */
        
        function create_animation(node, from, fn, params) {
        
        	if (!from) return noop;
        
        	const to = node.getBoundingClientRect();
        
        	if (
        
        		from.left === to.left &&
        
        		from.right === to.right &&
        
        		from.top === to.top &&
        
        		from.bottom === to.bottom
        
        	)
        
        		return noop;
        
        	const {
        
        		delay = 0,
        
        		duration = 300,
        
        		easing = identity,
        
        		// @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?
        
        		start: start_time = now() + delay,
        
        		// @ts-ignore todo:
        
        		end = start_time + duration,
        
        		tick = noop,
        
        		css
        
        	} = fn(node, { from, to }, params);
        
        	let running = true;
        
        	let started = false;
        
        	let name;
        
        	/** @returns {void} */
        
        	function start() {
        
        		if (css) {
        
        			name = create_rule(node, 0, 1, duration, delay, easing, css);
        
        		}
        
        		if (!delay) {
        
        			started = true;
        
        		}
        
        	}
        
        	/** @returns {void} */
        
        	function stop() {
        
        		if (css) delete_rule(node, name);
        
        		running = false;
        
        	}
        
        	loop((now) => {
        
        		if (!started && now >= start_time) {
        
        			started = true;
        
        		}
        
        		if (started && now >= end) {
        
        			tick(1, 0);
        
        			stop();
        
        		}
        
        		if (!running) {
        
        			return false;
        
        		}
        
        		if (started) {
        
        			const p = now - start_time;
        
        			const t = 0 + 1 * easing(p / duration);
        
        			tick(t, 1 - t);
        
        		}
        
        		return true;
        
        	});
        
        	start();
        
        	tick(0, 1);
        
        	return stop;
        
        }
        
        
        
        /**
        
         * @param {Element & ElementCSSInlineStyle} node
        
         * @returns {void}
        
         */
        
        function fix_position(node) {
        
        	const style = getComputedStyle(node);
        
        	if (style.position !== 'absolute' && style.position !== 'fixed') {
        
        		const { width, height } = style;
        
        		const a = node.getBoundingClientRect();
        
        		node.style.position = 'absolute';
        
        		node.style.width = width;
        
        		node.style.height = height;
        
        		add_transform(node, a);
        
        	}
        
        }
        
        
        
        /**
        
         * @param {Element & ElementCSSInlineStyle} node
        
         * @param {import('./private.js').PositionRect} a
        
         * @returns {void}
        
         */
        
        function add_transform(node, a) {
        
        	const b = node.getBoundingClientRect();
        
        	if (a.left !== b.left || a.top !== b.top) {
        
        		const style = getComputedStyle(node);
        
        		const transform = style.transform === 'none' ? '' : style.transform;
        
        		node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;
        
        	}
        
        }
        
        
        
        let current_component;
        
        
        
        /** @returns {void} */
        
        function set_current_component(component) {
        
        	current_component = component;
        
        }
        
        
        
        function get_current_component() {
        
        	if (!current_component) throw new Error('Function called outside component initialization');
        
        	return current_component;
        
        }
        
        
        
        /**
        
         * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.
        
         * It must be called during the component's initialisation (but doesn't need to live *inside* the component;
        
         * it can be called from an external module).
        
         *
        
         * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.
        
         *
        
         * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).
        
         *
        
         * https://svelte.dev/docs/svelte#onmount
        
         * @template T
        
         * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn
        
         * @returns {void}
        
         */
        
        function onMount(fn) {
        
        	get_current_component().$$.on_mount.push(fn);
        
        }
        
        
        
        /**
        
         * Schedules a callback to run immediately before the component is unmounted.
        
         *
        
         * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the
        
         * only one that runs inside a server-side component.
        
         *
        
         * https://svelte.dev/docs/svelte#ondestroy
        
         * @param {() => any} fn
        
         * @returns {void}
        
         */
        
        function onDestroy(fn) {
        
        	get_current_component().$$.on_destroy.push(fn);
        
        }
        
        
        
        /**
        
         * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).
        
         * Event dispatchers are functions that can take two arguments: `name` and `detail`.
        
         *
        
         * Component events created with `createEventDispatcher` create a
        
         * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).
        
         * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).
        
         * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)
        
         * property and can contain any type of data.
        
         *
        
         * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:
        
         * ```ts
        
         * const dispatch = createEventDispatcher<{
        
         *  loaded: never; // does not take a detail argument
        
         *  change: string; // takes a detail argument of type string, which is required
        
         *  optional: number | null; // takes an optional detail argument of type number
        
         * }>();
        
         * ```
        
         *
        
         * https://svelte.dev/docs/svelte#createeventdispatcher
        
         * @template {Record<string, any>} [EventMap=any]
        
         * @returns {import('./public.js').EventDispatcher<EventMap>}
        
         */
        
        function createEventDispatcher() {
        
        	const component = get_current_component();
        
        	return (type, detail, { cancelable = false } = {}) => {
        
        		const callbacks = component.$$.callbacks[type];
        
        		if (callbacks) {
        
        			// TODO are there situations where events could be dispatched
        
        			// in a server (non-DOM) environment?
        
        			const event = custom_event(/** @type {string} */ (type), detail, { cancelable });
        
        			callbacks.slice().forEach((fn) => {
        
        				fn.call(component, event);
        
        			});
        
        			return !event.defaultPrevented;
        
        		}
        
        		return true;
        
        	};
        
        }
        
        
        
        const dirty_components = [];
        
        const binding_callbacks = [];
        
        
        
        let render_callbacks = [];
        
        
        
        const flush_callbacks = [];
        
        
        
        const resolved_promise = /* @__PURE__ */ Promise.resolve();
        
        
        
        let update_scheduled = false;
        
        
        
        /** @returns {void} */
        
        function schedule_update() {
        
        	if (!update_scheduled) {
        
        		update_scheduled = true;
        
        		resolved_promise.then(flush);
        
        	}
        
        }
        
        
        
        /** @returns {void} */
        
        function add_render_callback(fn) {
        
        	render_callbacks.push(fn);
        
        }
        
        
        
        // flush() calls callbacks in this order:
        
        // 1. All beforeUpdate callbacks, in order: parents before children
        
        // 2. All bind:this callbacks, in reverse order: children before parents.
        
        // 3. All afterUpdate callbacks, in order: parents before children. EXCEPT
        
        //    for afterUpdates called during the initial onMount, which are called in
        
        //    reverse order: children before parents.
        
        // Since callbacks might update component values, which could trigger another
        
        // call to flush(), the following steps guard against this:
        
        // 1. During beforeUpdate, any updated components will be added to the
        
        //    dirty_components array and will cause a reentrant call to flush(). Because
        
        //    the flush index is kept outside the function, the reentrant call will pick
        
        //    up where the earlier call left off and go through all dirty components. The
        
        //    current_component value is saved and restored so that the reentrant call will
        
        //    not interfere with the "parent" flush() call.
        
        // 2. bind:this callbacks cannot trigger new flush() calls.
        
        // 3. During afterUpdate, any updated components will NOT have their afterUpdate
        
        //    callback called a second time; the seen_callbacks set, outside the flush()
        
        //    function, guarantees this behavior.
        
        const seen_callbacks = new Set();
        
        
        
        let flushidx = 0; // Do *not* move this inside the flush() function
        
        
        
        /** @returns {void} */
        
        function flush() {
        
        	// Do not reenter flush while dirty components are updated, as this can
        
        	// result in an infinite loop. Instead, let the inner flush handle it.
        
        	// Reentrancy is ok afterwards for bindings etc.
        
        	if (flushidx !== 0) {
        
        		return;
        
        	}
        
        	const saved_component = current_component;
        
        	do {
        
        		// first, call beforeUpdate functions
        
        		// and update components
        
        		try {
        
        			while (flushidx < dirty_components.length) {
        
        				const component = dirty_components[flushidx];
        
        				flushidx++;
        
        				set_current_component(component);
        
        				update(component.$$);
        
        			}
        
        		} catch (e) {
        
        			// reset dirty state to not end up in a deadlocked state and then rethrow
        
        			dirty_components.length = 0;
        
        			flushidx = 0;
        
        			throw e;
        
        		}
        
        		set_current_component(null);
        
        		dirty_components.length = 0;
        
        		flushidx = 0;
        
        		while (binding_callbacks.length) binding_callbacks.pop()();
        
        		// then, once components are updated, call
        
        		// afterUpdate functions. This may cause
        
        		// subsequent updates...
        
        		for (let i = 0; i < render_callbacks.length; i += 1) {
        
        			const callback = render_callbacks[i];
        
        			if (!seen_callbacks.has(callback)) {
        
        				// ...so guard against infinite loops
        
        				seen_callbacks.add(callback);
        
        				callback();
        
        			}
        
        		}
        
        		render_callbacks.length = 0;
        
        	} while (dirty_components.length);
        
        	while (flush_callbacks.length) {
        
        		flush_callbacks.pop()();
        
        	}
        
        	update_scheduled = false;
        
        	seen_callbacks.clear();
        
        	set_current_component(saved_component);
        
        }
        
        
        
        /** @returns {void} */
        
        function update($$) {
        
        	if ($$.fragment !== null) {
        
        		$$.update();
        
        		run_all($$.before_update);
        
        		const dirty = $$.dirty;
        
        		$$.dirty = [-1];
        
        		$$.fragment && $$.fragment.p($$.ctx, dirty);
        
        		$$.after_update.forEach(add_render_callback);
        
        	}
        
        }
        
        
        
        /**
        
         * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.
        
         * @param {Function[]} fns
        
         * @returns {void}
        
         */
        
        function flush_render_callbacks(fns) {
        
        	const filtered = [];
        
        	const targets = [];
        
        	render_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));
        
        	targets.forEach((c) => c());
        
        	render_callbacks = filtered;
        
        }
        
        
        
        /**
        
         * @type {Promise<void> | null}
        
         */
        
        let promise;
        
        
        
        /**
        
         * @returns {Promise<void>}
        
         */
        
        function wait() {
        
        	if (!promise) {
        
        		promise = Promise.resolve();
        
        		promise.then(() => {
        
        			promise = null;
        
        		});
        
        	}
        
        	return promise;
        
        }
        
        
        
        /**
        
         * @param {Element} node
        
         * @param {INTRO | OUTRO | boolean} direction
        
         * @param {'start' | 'end'} kind
        
         * @returns {void}
        
         */
        
        function dispatch(node, direction, kind) {
        
        	node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));
        
        }
        
        
        
        const outroing = new Set();
        
        
        
        /**
        
         * @type {Outro}
        
         */
        
        let outros;
        
        
        
        /**
        
         * @returns {void} */
        
        function group_outros() {
        
        	outros = {
        
        		r: 0,
        
        		c: [],
        
        		p: outros // parent group
        
        	};
        
        }
        
        
        
        /**
        
         * @returns {void} */
        
        function check_outros() {
        
        	if (!outros.r) {
        
        		run_all(outros.c);
        
        	}
        
        	outros = outros.p;
        
        }
        
        
        
        /**
        
         * @param {import('./private.js').Fragment} block
        
         * @param {0 | 1} [local]
        
         * @returns {void}
        
         */
        
        function transition_in(block, local) {
        
        	if (block && block.i) {
        
        		outroing.delete(block);
        
        		block.i(local);
        
        	}
        
        }
        
        
        
        /**
        
         * @param {import('./private.js').Fragment} block
        
         * @param {0 | 1} local
        
         * @param {0 | 1} [detach]
        
         * @param {() => void} [callback]
        
         * @returns {void}
        
         */
        
        function transition_out(block, local, detach, callback) {
        
        	if (block && block.o) {
        
        		if (outroing.has(block)) return;
        
        		outroing.add(block);
        
        		outros.c.push(() => {
        
        			outroing.delete(block);
        
        			if (callback) {
        
        				if (detach) block.d(1);
        
        				callback();
        
        			}
        
        		});
        
        		block.o(local);
        
        	} else if (callback) {
        
        		callback();
        
        	}
        
        }
        
        
        
        /**
        
         * @type {import('../transition/public.js').TransitionConfig}
        
         */
        
        const null_transition = { duration: 0 };
        
        
        
        /**
        
         * @param {Element & ElementCSSInlineStyle} node
        
         * @param {TransitionFn} fn
        
         * @param {any} params
        
         * @returns {{ start(): void; invalidate(): void; end(): void; }}
        
         */
        
        function create_in_transition(node, fn, params) {
        
        	/**
        
        	 * @type {TransitionOptions} */
        
        	const options = { direction: 'in' };
        
        	let config = fn(node, params, options);
        
        	let running = false;
        
        	let animation_name;
        
        	let task;
        
        	let uid = 0;
        
        
        
        	/**
        
        	 * @returns {void} */
        
        	function cleanup() {
        
        		if (animation_name) delete_rule(node, animation_name);
        
        	}
        
        
        
        	/**
        
        	 * @returns {void} */
        
        	function go() {
        
        		const {
        
        			delay = 0,
        
        			duration = 300,
        
        			easing = identity,
        
        			tick = noop,
        
        			css
        
        		} = config || null_transition;
        
        		if (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);
        
        		tick(0, 1);
        
        		const start_time = now() + delay;
        
        		const end_time = start_time + duration;
        
        		if (task) task.abort();
        
        		running = true;
        
        		add_render_callback(() => dispatch(node, true, 'start'));
        
        		task = loop((now) => {
        
        			if (running) {
        
        				if (now >= end_time) {
        
        					tick(1, 0);
        
        					dispatch(node, true, 'end');
        
        					cleanup();
        
        					return (running = false);
        
        				}
        
        				if (now >= start_time) {
        
        					const t = easing((now - start_time) / duration);
        
        					tick(t, 1 - t);
        
        				}
        
        			}
        
        			return running;
        
        		});
        
        	}
        
        	let started = false;
        
        	return {
        
        		start() {
        
        			if (started) return;
        
        			started = true;
        
        			delete_rule(node);
        
        			if (is_function(config)) {
        
        				config = config(options);
        
        				wait().then(go);
        
        			} else {
        
        				go();
        
        			}
        
        		},
        
        		invalidate() {
        
        			started = false;
        
        		},
        
        		end() {
        
        			if (running) {
        
        				cleanup();
        
        				running = false;
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        /**
        
         * @param {Element & ElementCSSInlineStyle} node
        
         * @param {TransitionFn} fn
        
         * @param {any} params
        
         * @returns {{ end(reset: any): void; }}
        
         */
        
        function create_out_transition(node, fn, params) {
        
        	/** @type {TransitionOptions} */
        
        	const options = { direction: 'out' };
        
        	let config = fn(node, params, options);
        
        	let running = true;
        
        	let animation_name;
        
        	const group = outros;
        
        	group.r += 1;
        
        	/** @type {boolean} */
        
        	let original_inert_value;
        
        
        
        	/**
        
        	 * @returns {void} */
        
        	function go() {
        
        		const {
        
        			delay = 0,
        
        			duration = 300,
        
        			easing = identity,
        
        			tick = noop,
        
        			css
        
        		} = config || null_transition;
        
        
        
        		if (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);
        
        
        
        		const start_time = now() + delay;
        
        		const end_time = start_time + duration;
        
        		add_render_callback(() => dispatch(node, false, 'start'));
        
        
        
        		if ('inert' in node) {
        
        			original_inert_value = /** @type {HTMLElement} */ (node).inert;
        
        			node.inert = true;
        
        		}
        
        
        
        		loop((now) => {
        
        			if (running) {
        
        				if (now >= end_time) {
        
        					tick(0, 1);
        
        					dispatch(node, false, 'end');
        
        					if (!--group.r) {
        
        						// this will result in `end()` being called,
        
        						// so we don't need to clean up here
        
        						run_all(group.c);
        
        					}
        
        					return false;
        
        				}
        
        				if (now >= start_time) {
        
        					const t = easing((now - start_time) / duration);
        
        					tick(1 - t, t);
        
        				}
        
        			}
        
        			return running;
        
        		});
        
        	}
        
        
        
        	if (is_function(config)) {
        
        		wait().then(() => {
        
        			// @ts-ignore
        
        			config = config(options);
        
        			go();
        
        		});
        
        	} else {
        
        		go();
        
        	}
        
        
        
        	return {
        
        		end(reset) {
        
        			if (reset && 'inert' in node) {
        
        				node.inert = original_inert_value;
        
        			}
        
        			if (reset && config.tick) {
        
        				config.tick(1, 0);
        
        			}
        
        			if (running) {
        
        				if (animation_name) delete_rule(node, animation_name);
        
        				running = false;
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        /** @typedef {1} INTRO */
        
        /** @typedef {0} OUTRO */
        
        /** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */
        
        /** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */
        
        
        
        /**
        
         * @typedef {Object} Outro
        
         * @property {number} r
        
         * @property {Function[]} c
        
         * @property {Object} p
        
         */
        
        
        
        /**
        
         * @typedef {Object} PendingProgram
        
         * @property {number} start
        
         * @property {INTRO|OUTRO} b
        
         * @property {Outro} [group]
        
         */
        
        
        
        /**
        
         * @typedef {Object} Program
        
         * @property {number} a
        
         * @property {INTRO|OUTRO} b
        
         * @property {1|-1} d
        
         * @property {number} duration
        
         * @property {number} start
        
         * @property {number} end
        
         * @property {Outro} [group]
        
         */
        
        
        
        // general each functions:
        
        
        
        function ensure_array_like(array_like_or_iterator) {
        
        	return array_like_or_iterator?.length !== undefined
        
        		? array_like_or_iterator
        
        		: Array.from(array_like_or_iterator);
        
        }
        
        
        
        /** @returns {void} */
        
        function outro_and_destroy_block(block, lookup) {
        
        	transition_out(block, 1, 1, () => {
        
        		lookup.delete(block.key);
        
        	});
        
        }
        
        
        
        /** @returns {void} */
        
        function fix_and_outro_and_destroy_block(block, lookup) {
        
        	block.f();
        
        	outro_and_destroy_block(block, lookup);
        
        }
        
        
        
        /** @returns {any[]} */
        
        function update_keyed_each(
        
        	old_blocks,
        
        	dirty,
        
        	get_key,
        
        	dynamic,
        
        	ctx,
        
        	list,
        
        	lookup,
        
        	node,
        
        	destroy,
        
        	create_each_block,
        
        	next,
        
        	get_context
        
        ) {
        
        	let o = old_blocks.length;
        
        	let n = list.length;
        
        	let i = o;
        
        	const old_indexes = {};
        
        	while (i--) old_indexes[old_blocks[i].key] = i;
        
        	const new_blocks = [];
        
        	const new_lookup = new Map();
        
        	const deltas = new Map();
        
        	const updates = [];
        
        	i = n;
        
        	while (i--) {
        
        		const child_ctx = get_context(ctx, list, i);
        
        		const key = get_key(child_ctx);
        
        		let block = lookup.get(key);
        
        		if (!block) {
        
        			block = create_each_block(key, child_ctx);
        
        			block.c();
        
        		} else if (dynamic) {
        
        			// defer updates until all the DOM shuffling is done
        
        			updates.push(() => block.p(child_ctx, dirty));
        
        		}
        
        		new_lookup.set(key, (new_blocks[i] = block));
        
        		if (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));
        
        	}
        
        	const will_move = new Set();
        
        	const did_move = new Set();
        
        	/** @returns {void} */
        
        	function insert(block) {
        
        		transition_in(block, 1);
        
        		block.m(node, next);
        
        		lookup.set(block.key, block);
        
        		next = block.first;
        
        		n--;
        
        	}
        
        	while (o && n) {
        
        		const new_block = new_blocks[n - 1];
        
        		const old_block = old_blocks[o - 1];
        
        		const new_key = new_block.key;
        
        		const old_key = old_block.key;
        
        		if (new_block === old_block) {
        
        			// do nothing
        
        			next = new_block.first;
        
        			o--;
        
        			n--;
        
        		} else if (!new_lookup.has(old_key)) {
        
        			// remove old block
        
        			destroy(old_block, lookup);
        
        			o--;
        
        		} else if (!lookup.has(new_key) || will_move.has(new_key)) {
        
        			insert(new_block);
        
        		} else if (did_move.has(old_key)) {
        
        			o--;
        
        		} else if (deltas.get(new_key) > deltas.get(old_key)) {
        
        			did_move.add(new_key);
        
        			insert(new_block);
        
        		} else {
        
        			will_move.add(old_key);
        
        			o--;
        
        		}
        
        	}
        
        	while (o--) {
        
        		const old_block = old_blocks[o];
        
        		if (!new_lookup.has(old_block.key)) destroy(old_block, lookup);
        
        	}
        
        	while (n) insert(new_blocks[n - 1]);
        
        	run_all(updates);
        
        	return new_blocks;
        
        }
        
        
        
        /** @returns {{}} */
        
        function get_spread_update(levels, updates) {
        
        	const update = {};
        
        	const to_null_out = {};
        
        	const accounted_for = { $$scope: 1 };
        
        	let i = levels.length;
        
        	while (i--) {
        
        		const o = levels[i];
        
        		const n = updates[i];
        
        		if (n) {
        
        			for (const key in o) {
        
        				if (!(key in n)) to_null_out[key] = 1;
        
        			}
        
        			for (const key in n) {
        
        				if (!accounted_for[key]) {
        
        					update[key] = n[key];
        
        					accounted_for[key] = 1;
        
        				}
        
        			}
        
        			levels[i] = n;
        
        		} else {
        
        			for (const key in o) {
        
        				accounted_for[key] = 1;
        
        			}
        
        		}
        
        	}
        
        	for (const key in to_null_out) {
        
        		if (!(key in update)) update[key] = undefined;
        
        	}
        
        	return update;
        
        }
        
        
        
        /** @returns {void} */
        
        function create_component(block) {
        
        	block && block.c();
        
        }
        
        
        
        /** @returns {void} */
        
        function claim_component(block, parent_nodes) {
        
        	block && block.l(parent_nodes);
        
        }
        
        
        
        /** @returns {void} */
        
        function mount_component(component, target, anchor) {
        
        	const { fragment, after_update } = component.$$;
        
        	fragment && fragment.m(target, anchor);
        
        	// onMount happens before the initial afterUpdate
        
        	add_render_callback(() => {
        
        		const new_on_destroy = component.$$.on_mount.map(run).filter(is_function);
        
        		// if the component was destroyed immediately
        
        		// it will update the `$$.on_destroy` reference to `null`.
        
        		// the destructured on_destroy may still reference to the old array
        
        		if (component.$$.on_destroy) {
        
        			component.$$.on_destroy.push(...new_on_destroy);
        
        		} else {
        
        			// Edge case - component was destroyed immediately,
        
        			// most likely as a result of a binding initialising
        
        			run_all(new_on_destroy);
        
        		}
        
        		component.$$.on_mount = [];
        
        	});
        
        	after_update.forEach(add_render_callback);
        
        }
        
        
        
        /** @returns {void} */
        
        function destroy_component(component, detaching) {
        
        	const $$ = component.$$;
        
        	if ($$.fragment !== null) {
        
        		flush_render_callbacks($$.after_update);
        
        		run_all($$.on_destroy);
        
        		$$.fragment && $$.fragment.d(detaching);
        
        		// TODO null out other refs, including component.$$ (but need to
        
        		// preserve final state?)
        
        		$$.on_destroy = $$.fragment = null;
        
        		$$.ctx = [];
        
        	}
        
        }
        
        
        
        /** @returns {void} */
        
        function make_dirty(component, i) {
        
        	if (component.$$.dirty[0] === -1) {
        
        		dirty_components.push(component);
        
        		schedule_update();
        
        		component.$$.dirty.fill(0);
        
        	}
        
        	component.$$.dirty[(i / 31) | 0] |= 1 << i % 31;
        
        }
        
        
        
        // TODO: Document the other params
        
        /**
        
         * @param {SvelteComponent} component
        
         * @param {import('./public.js').ComponentConstructorOptions} options
        
         *
        
         * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.
        
         * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.
        
         * This will be the `add_css` function from the compiled component.
        
         *
        
         * @returns {void}
        
         */
        
        function init(
        
        	component,
        
        	options,
        
        	instance,
        
        	create_fragment,
        
        	not_equal,
        
        	props,
        
        	append_styles = null,
        
        	dirty = [-1]
        
        ) {
        
        	const parent_component = current_component;
        
        	set_current_component(component);
        
        	/** @type {import('./private.js').T$$} */
        
        	const $$ = (component.$$ = {
        
        		fragment: null,
        
        		ctx: [],
        
        		// state
        
        		props,
        
        		update: noop,
        
        		not_equal,
        
        		bound: blank_object(),
        
        		// lifecycle
        
        		on_mount: [],
        
        		on_destroy: [],
        
        		on_disconnect: [],
        
        		before_update: [],
        
        		after_update: [],
        
        		context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),
        
        		// everything else
        
        		callbacks: blank_object(),
        
        		dirty,
        
        		skip_bound: false,
        
        		root: options.target || parent_component.$$.root
        
        	});
        
        	append_styles && append_styles($$.root);
        
        	let ready = false;
        
        	$$.ctx = instance
        
        		? instance(component, options.props || {}, (i, ret, ...rest) => {
        
        				const value = rest.length ? rest[0] : ret;
        
        				if ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {
        
        					if (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);
        
        					if (ready) make_dirty(component, i);
        
        				}
        
        				return ret;
        
        		  })
        
        		: [];
        
        	$$.update();
        
        	ready = true;
        
        	run_all($$.before_update);
        
        	// `false` as a special case of no DOM component
        
        	$$.fragment = create_fragment ? create_fragment($$.ctx) : false;
        
        	if (options.target) {
        
        		if (options.hydrate) {
        
        			start_hydrating();
        
        			// TODO: what is the correct type here?
        
        			// @ts-expect-error
        
        			const nodes = children(options.target);
        
        			$$.fragment && $$.fragment.l(nodes);
        
        			nodes.forEach(detach);
        
        		} else {
        
        			// eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        
        			$$.fragment && $$.fragment.c();
        
        		}
        
        		if (options.intro) transition_in(component.$$.fragment);
        
        		mount_component(component, options.target, options.anchor);
        
        		end_hydrating();
        
        		flush();
        
        	}
        
        	set_current_component(parent_component);
        
        }
        
        
        
        /**
        
         * Base class for Svelte components. Used when dev=false.
        
         *
        
         * @template {Record<string, any>} [Props=any]
        
         * @template {Record<string, any>} [Events=any]
        
         */
        
        class SvelteComponent {
        
        	/**
        
        	 * ### PRIVATE API
        
        	 *
        
        	 * Do not use, may change at any time
        
        	 *
        
        	 * @type {any}
        
        	 */
        
        	$$ = undefined;
        
        	/**
        
        	 * ### PRIVATE API
        
        	 *
        
        	 * Do not use, may change at any time
        
        	 *
        
        	 * @type {any}
        
        	 */
        
        	$$set = undefined;
        
        
        
        	/** @returns {void} */
        
        	$destroy() {
        
        		destroy_component(this, 1);
        
        		this.$destroy = noop;
        
        	}
        
        
        
        	/**
        
        	 * @template {Extract<keyof Events, string>} K
        
        	 * @param {K} type
        
        	 * @param {((e: Events[K]) => void) | null | undefined} callback
        
        	 * @returns {() => void}
        
        	 */
        
        	$on(type, callback) {
        
        		if (!is_function(callback)) {
        
        			return noop;
        
        		}
        
        		const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
        
        		callbacks.push(callback);
        
        		return () => {
        
        			const index = callbacks.indexOf(callback);
        
        			if (index !== -1) callbacks.splice(index, 1);
        
        		};
        
        	}
        
        
        
        	/**
        
        	 * @param {Partial<Props>} props
        
        	 * @returns {void}
        
        	 */
        
        	$set(props) {
        
        		if (this.$$set && !is_empty(props)) {
        
        			this.$$.skip_bound = true;
        
        			this.$$set(props);
        
        			this.$$.skip_bound = false;
        
        		}
        
        	}
        
        }
        
        
        
        /**
        
         * @typedef {Object} CustomElementPropDefinition
        
         * @property {string} [attribute]
        
         * @property {boolean} [reflect]
        
         * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]
        
         */
        
        
        
        // generated during release, do not modify
        
        
        
        const PUBLIC_VERSION = '4';
        
        
        
        if (typeof window !== 'undefined')
        
        	// @ts-ignore
        
        	(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);
        
        
        
        function styleInject(css, ref) {
        
          if ( ref === void 0 ) ref = {};
        
          var insertAt = ref.insertAt;
        
        
        
          if (!css || typeof document === 'undefined') { return; }
        
        
        
          var head = document.head || document.getElementsByTagName('head')[0];
        
          var style = document.createElement('style');
        
          style.type = 'text/css';
        
        
        
          if (insertAt === 'top') {
        
            if (head.firstChild) {
        
              head.insertBefore(style, head.firstChild);
        
            } else {
        
              head.appendChild(style);
        
            }
        
          } else {
        
            head.appendChild(style);
        
          }
        
        
        
          if (style.styleSheet) {
        
            style.styleSheet.cssText = css;
        
          } else {
        
            style.appendChild(document.createTextNode(css));
        
          }
        
        }
        
        
        
        var css_248z$5 = "div.svelte-15bh41m{background:pink;border:23px solid orange;padding:0 15px;width:400px;text-align:center;transform:translateX(-200px);animation:2s svelte-15bh41m-slide infinite alternate ease-in-out}@keyframes svelte-15bh41m-slide{from{transform:translateX(-200px)\r\n\t\t}to{transform:translateX(200px)\r\n\t\t}}";
        
        styleInject(css_248z$5);
        
        
        
        /* assets\mdsvex\Seriously.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_fragment$h(ctx) {
        
        	let div;
        
        	let current;
        
        	const default_slot_template = /*#slots*/ ctx[1].default;
        
        	const default_slot = create_slot(default_slot_template, ctx, /*$$scope*/ ctx[0], null);
        
        
        
        	return {
        
        		c() {
        
        			div = element("div");
        
        			if (default_slot) default_slot.c();
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			div = claim_element(nodes, "DIV", { class: true });
        
        			var div_nodes = children(div);
        
        			if (default_slot) default_slot.l(div_nodes);
        
        			div_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			attr(div, "class", "svelte-15bh41m");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, div, anchor);
        
        
        
        			if (default_slot) {
        
        				default_slot.m(div, null);
        
        			}
        
        
        
        			current = true;
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (default_slot) {
        
        				if (default_slot.p && (!current || dirty & /*$$scope*/ 1)) {
        
        					update_slot_base(
        
        						default_slot,
        
        						default_slot_template,
        
        						ctx,
        
        						/*$$scope*/ ctx[0],
        
        						!current
        
        						? get_all_dirty_from_scope(/*$$scope*/ ctx[0])
        
        						: get_slot_changes(default_slot_template, /*$$scope*/ ctx[0], dirty, null),
        
        						null
        
        					);
        
        				}
        
        			}
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(default_slot, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(default_slot, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(div);
        
        			}
        
        
        
        			if (default_slot) default_slot.d(detaching);
        
        		}
        
        	};
        
        }
        
        
        
        function instance$g($$self, $$props, $$invalidate) {
        
        	let { $$slots: slots = {}, $$scope } = $$props;
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('$$scope' in $$props) $$invalidate(0, $$scope = $$props.$$scope);
        
        	};
        
        
        
        	return [$$scope, slots];
        
        }
        
        
        
        class Seriously extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$g, create_fragment$h, safe_not_equal, {});
        
        	}
        
        }
        
        
        
        var css_248z$4 = ".outer.svelte-wsui2k{background:darkorange;height:20px;font-size:12px;display:inline-flex;justify-content:space-between;align-items:center;transform:translateY(-1px);margin:0 5px;border-radius:3px;width:65px;box-shadow:0 3px 15px 1px rgba(0,0,0,0.3)\r\n  }.inner.svelte-wsui2k{margin:0 0px}button.svelte-wsui2k{height:20px;padding:0px 7px 1px 7px;margin:0;border:none;background:none;color:#eee;font-weight:bold;cursor:pointer}";
        
        styleInject(css_248z$4);
        
        
        
        /* assets\mdsvex\Count.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_fragment$g(ctx) {
        
        	let span1;
        
        	let button0;
        
        	let textContent = "-";
        
        	let t1;
        
        	let span0;
        
        	let t2;
        
        	let t3;
        
        	let button1;
        
        	let textContent_1 = "+";
        
        	let mounted;
        
        	let dispose;
        
        
        
        	return {
        
        		c() {
        
        			span1 = element("span");
        
        			button0 = element("button");
        
        			button0.textContent = textContent;
        
        			t1 = space();
        
        			span0 = element("span");
        
        			t2 = text$2(/*count*/ ctx[0]);
        
        			t3 = space();
        
        			button1 = element("button");
        
        			button1.textContent = textContent_1;
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			span1 = claim_element(nodes, "SPAN", { class: true });
        
        			var span1_nodes = children(span1);
        
        			button0 = claim_element(span1_nodes, "BUTTON", { class: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(button0) !== "svelte-1bctjo8") button0.textContent = textContent;
        
        			t1 = claim_space(span1_nodes);
        
        			span0 = claim_element(span1_nodes, "SPAN", { class: true });
        
        			var span0_nodes = children(span0);
        
        			t2 = claim_text(span0_nodes, /*count*/ ctx[0]);
        
        			span0_nodes.forEach(detach);
        
        			t3 = claim_space(span1_nodes);
        
        			button1 = claim_element(span1_nodes, "BUTTON", { class: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(button1) !== "svelte-1qd14cc") button1.textContent = textContent_1;
        
        			span1_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			attr(button0, "class", "svelte-wsui2k");
        
        			attr(span0, "class", "inner svelte-wsui2k");
        
        			attr(button1, "class", "svelte-wsui2k");
        
        			attr(span1, "class", "outer svelte-wsui2k");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, span1, anchor);
        
        			append_hydration(span1, button0);
        
        			append_hydration(span1, t1);
        
        			append_hydration(span1, span0);
        
        			append_hydration(span0, t2);
        
        			append_hydration(span1, t3);
        
        			append_hydration(span1, button1);
        
        
        
        			if (!mounted) {
        
        				dispose = [
        
        					listen(button0, "click", /*click_handler*/ ctx[1]),
        
        					listen(button1, "click", /*click_handler_1*/ ctx[2])
        
        				];
        
        
        
        				mounted = true;
        
        			}
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (dirty & /*count*/ 1) set_data(t2, /*count*/ ctx[0]);
        
        		},
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(span1);
        
        			}
        
        
        
        			mounted = false;
        
        			run_all(dispose);
        
        		}
        
        	};
        
        }
        
        
        
        function instance$f($$self, $$props, $$invalidate) {
        
        	let { count = 0 } = $$props;
        
        	const click_handler = () => $$invalidate(0, count = count - 1);
        
        	const click_handler_1 = () => $$invalidate(0, count = count + 1);
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('count' in $$props) $$invalidate(0, count = $$props.count);
        
        	};
        
        
        
        	return [count, click_handler, click_handler_1];
        
        }
        
        
        
        class Count extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$f, create_fragment$g, safe_not_equal, { count: 0 });
        
        	}
        
        }
        
        
        
        /*
        
        Adapted from https://github.com/mattdesl
        
        Distributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md
        
        */
        
        
        
        /**
        
         * https://svelte.dev/docs/svelte-easing
        
         * @param {number} t
        
         * @returns {number}
        
         */
        
        function cubicOut(t) {
        
        	const f = t - 1.0;
        
        	return f * f * f + 1.0;
        
        }
        
        
        
        /**
        
         * The flip function calculates the start and end position of an element and animates between them, translating the x and y values.
        
         * `flip` stands for [First, Last, Invert, Play](https://aerotwist.com/blog/flip-your-animations/).
        
         *
        
         * https://svelte.dev/docs/svelte-animate#flip
        
         * @param {Element} node
        
         * @param {{ from: DOMRect; to: DOMRect }} fromTo
        
         * @param {import('./public.js').FlipParams} params
        
         * @returns {import('./public.js').AnimationConfig}
        
         */
        
        function flip(node, { from, to }, params = {}) {
        
        	const style = getComputedStyle(node);
        
        	const transform = style.transform === 'none' ? '' : style.transform;
        
        	const [ox, oy] = style.transformOrigin.split(' ').map(parseFloat);
        
        	const dx = from.left + (from.width * ox) / to.width - (to.left + ox);
        
        	const dy = from.top + (from.height * oy) / to.height - (to.top + oy);
        
        	const { delay = 0, duration = (d) => Math.sqrt(d) * 120, easing = cubicOut } = params;
        
        	return {
        
        		delay,
        
        		duration: is_function(duration) ? duration(Math.sqrt(dx * dx + dy * dy)) : duration,
        
        		easing,
        
        		css: (t, u) => {
        
        			const x = u * dx;
        
        			const y = u * dy;
        
        			const sx = t + (u * from.width) / to.width;
        
        			const sy = t + (u * from.height) / to.height;
        
        			return `transform: ${transform} translate(${x}px, ${y}px) scale(${sx}, ${sy});`;
        
        		}
        
        	};
        
        }
        
        
        
        /**
        
         * Animates the opacity and scale of an element. `in` transitions animate from an element's current (default) values to the provided values, passed as parameters. `out` transitions animate from the provided values to an element's default values.
        
         *
        
         * https://svelte.dev/docs/svelte-transition#scale
        
         * @param {Element} node
        
         * @param {import('./public').ScaleParams} [params]
        
         * @returns {import('./public').TransitionConfig}
        
         */
        
        function scale(
        
        	node,
        
        	{ delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 } = {}
        
        ) {
        
        	const style = getComputedStyle(node);
        
        	const target_opacity = +style.opacity;
        
        	const transform = style.transform === 'none' ? '' : style.transform;
        
        	const sd = 1 - start;
        
        	const od = target_opacity * (1 - opacity);
        
        	return {
        
        		delay,
        
        		duration,
        
        		easing,
        
        		css: (_t, u) => `
        
        			transform: ${transform} scale(${1 - sd * u});
        
        			opacity: ${target_opacity - od * u}
        
        		`
        
        	};
        
        }
        
        
        
        /**
        
         * The `crossfade` function creates a pair of [transitions](https://svelte.dev/docs#template-syntax-element-directives-transition-fn) called `send` and `receive`. When an element is 'sent', it looks for a corresponding element being 'received', and generates a transition that transforms the element to its counterpart's position and fades it out. When an element is 'received', the reverse happens. If there is no counterpart, the `fallback` transition is used.
        
         *
        
         * https://svelte.dev/docs/svelte-transition#crossfade
        
         * @param {import('./public').CrossfadeParams & {
        
         * 	fallback?: (node: Element, params: import('./public').CrossfadeParams, intro: boolean) => import('./public').TransitionConfig;
        
         * }} params
        
         * @returns {[(node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig, (node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig]}
        
         */
        
        function crossfade({ fallback, ...defaults }) {
        
        	/** @type {Map<any, Element>} */
        
        	const to_receive = new Map();
        
        	/** @type {Map<any, Element>} */
        
        	const to_send = new Map();
        
        	/**
        
        	 * @param {Element} from_node
        
        	 * @param {Element} node
        
        	 * @param {import('./public').CrossfadeParams} params
        
        	 * @returns {import('./public').TransitionConfig}
        
        	 */
        
        	function crossfade(from_node, node, params) {
        
        		const {
        
        			delay = 0,
        
        			duration = (d) => Math.sqrt(d) * 30,
        
        			easing = cubicOut
        
        		} = assign(assign({}, defaults), params);
        
        		const from = from_node.getBoundingClientRect();
        
        		const to = node.getBoundingClientRect();
        
        		const dx = from.left - to.left;
        
        		const dy = from.top - to.top;
        
        		const dw = from.width / to.width;
        
        		const dh = from.height / to.height;
        
        		const d = Math.sqrt(dx * dx + dy * dy);
        
        		const style = getComputedStyle(node);
        
        		const transform = style.transform === 'none' ? '' : style.transform;
        
        		const opacity = +style.opacity;
        
        		return {
        
        			delay,
        
        			duration: is_function(duration) ? duration(d) : duration,
        
        			easing,
        
        			css: (t, u) => `
        
        				opacity: ${t * opacity};
        
        				transform-origin: top left;
        
        				transform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${
        
        				t + (1 - t) * dh
        
        			});
        
        			`
        
        		};
        
        	}
        
        
        
        	/**
        
        	 * @param {Map<any, Element>} items
        
        	 * @param {Map<any, Element>} counterparts
        
        	 * @param {boolean} intro
        
        	 * @returns {(node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig}
        
        	 */
        
        	function transition(items, counterparts, intro) {
        
        		return (node, params) => {
        
        			items.set(params.key, node);
        
        			return () => {
        
        				if (counterparts.has(params.key)) {
        
        					const other_node = counterparts.get(params.key);
        
        					counterparts.delete(params.key);
        
        					return crossfade(other_node, node, params);
        
        				}
        
        				// if the node is disappearing altogether
        
        				// (i.e. wasn't claimed by the other list)
        
        				// then we need to supply an outro
        
        				items.delete(params.key);
        
        				return fallback && fallback(node, params, intro);
        
        			};
        
        		};
        
        	}
        
        	return [transition(to_send, to_receive, false), transition(to_receive, to_send, true)];
        
        }
        
        
        
        var css_248z$3 = ".container.svelte-10dnw8d.svelte-10dnw8d{width:300px;height:200px;display:flex;justify-content:space-between}.boingers.svelte-10dnw8d.svelte-10dnw8d{display:grid;grid-template-rows:repeat(3, 1fr);grid-template-columns:repeat(2, 1fr);grid-gap:10px}.boingers.svelte-10dnw8d div.svelte-10dnw8d{width:50px;height:50px;display:flex;justify-content:center;align-items:center;color:#eee;font-weight:bold;border-radius:2px;cursor:pointer}";
        
        styleInject(css_248z$3);
        
        
        
        /* assets\mdsvex\Boinger.svelte generated by Svelte v4.2.12 */
        
        
        
        function get_each_context$3(ctx, list, i) {
        
        	const child_ctx = ctx.slice();
        
        	child_ctx[7] = list[i].val;
        
        	return child_ctx;
        
        }
        
        
        
        function get_each_context_1(ctx, list, i) {
        
        	const child_ctx = ctx.slice();
        
        	child_ctx[7] = list[i].val;
        
        	return child_ctx;
        
        }
        
        
        
        // (27:2) {#each boingers.filter(v => !v.boinged) as {val}
        
        function create_each_block_1(key_1, ctx) {
        
        	let div;
        
        	let t_value = /*val*/ ctx[7] + "";
        
        	let t;
        
        	let div_intro;
        
        	let div_outro;
        
        	let rect;
        
        	let stop_animation = noop;
        
        	let current;
        
        	let mounted;
        
        	let dispose;
        
        
        
        	function click_handler() {
        
        		return /*click_handler*/ ctx[5](/*val*/ ctx[7]);
        
        	}
        
        
        
        	return {
        
        		key: key_1,
        
        		first: null,
        
        		c() {
        
        			div = element("div");
        
        			t = text$2(t_value);
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			div = claim_element(nodes, "DIV", { style: true, class: true });
        
        			var div_nodes = children(div);
        
        			t = claim_text(div_nodes, t_value);
        
        			div_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			set_style(div, "background", /*color*/ ctx[0]);
        
        			attr(div, "class", "svelte-10dnw8d");
        
        			this.first = div;
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, div, anchor);
        
        			append_hydration(div, t);
        
        			current = true;
        
        
        
        			if (!mounted) {
        
        				dispose = listen(div, "click", click_handler);
        
        				mounted = true;
        
        			}
        
        		},
        
        		p(new_ctx, dirty) {
        
        			ctx = new_ctx;
        
        			if ((!current || dirty & /*boingers*/ 2) && t_value !== (t_value = /*val*/ ctx[7] + "")) set_data(t, t_value);
        
        
        
        			if (!current || dirty & /*color*/ 1) {
        
        				set_style(div, "background", /*color*/ ctx[0]);
        
        			}
        
        		},
        
        		r() {
        
        			rect = div.getBoundingClientRect();
        
        		},
        
        		f() {
        
        			fix_position(div);
        
        			stop_animation();
        
        			add_transform(div, rect);
        
        		},
        
        		a() {
        
        			stop_animation();
        
        			stop_animation = create_animation(div, rect, flip, {});
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        
        
        			if (local) {
        
        				add_render_callback(() => {
        
        					if (!current) return;
        
        					if (div_outro) div_outro.end(1);
        
        					div_intro = create_in_transition(div, /*receive*/ ctx[3], { key: /*val*/ ctx[7] });
        
        					div_intro.start();
        
        				});
        
        			}
        
        
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			if (div_intro) div_intro.invalidate();
        
        
        
        			if (local) {
        
        				div_outro = create_out_transition(div, /*send*/ ctx[2], { key: /*val*/ ctx[7] });
        
        			}
        
        
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(div);
        
        			}
        
        
        
        			if (detaching && div_outro) div_outro.end();
        
        			mounted = false;
        
        			dispose();
        
        		}
        
        	};
        
        }
        
        
        
        // (39:2) {#each boingers.filter(v => v.boinged) as {val}
        
        function create_each_block$3(key_1, ctx) {
        
        	let div;
        
        	let t_value = /*val*/ ctx[7] + "";
        
        	let t;
        
        	let div_intro;
        
        	let div_outro;
        
        	let rect;
        
        	let stop_animation = noop;
        
        	let current;
        
        	let mounted;
        
        	let dispose;
        
        
        
        	function click_handler_1() {
        
        		return /*click_handler_1*/ ctx[6](/*val*/ ctx[7]);
        
        	}
        
        
        
        	return {
        
        		key: key_1,
        
        		first: null,
        
        		c() {
        
        			div = element("div");
        
        			t = text$2(t_value);
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			div = claim_element(nodes, "DIV", { style: true, class: true });
        
        			var div_nodes = children(div);
        
        			t = claim_text(div_nodes, t_value);
        
        			div_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			set_style(div, "background", /*color*/ ctx[0]);
        
        			attr(div, "class", "svelte-10dnw8d");
        
        			this.first = div;
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, div, anchor);
        
        			append_hydration(div, t);
        
        			current = true;
        
        
        
        			if (!mounted) {
        
        				dispose = listen(div, "click", click_handler_1);
        
        				mounted = true;
        
        			}
        
        		},
        
        		p(new_ctx, dirty) {
        
        			ctx = new_ctx;
        
        			if ((!current || dirty & /*boingers*/ 2) && t_value !== (t_value = /*val*/ ctx[7] + "")) set_data(t, t_value);
        
        
        
        			if (!current || dirty & /*color*/ 1) {
        
        				set_style(div, "background", /*color*/ ctx[0]);
        
        			}
        
        		},
        
        		r() {
        
        			rect = div.getBoundingClientRect();
        
        		},
        
        		f() {
        
        			fix_position(div);
        
        			stop_animation();
        
        			add_transform(div, rect);
        
        		},
        
        		a() {
        
        			stop_animation();
        
        			stop_animation = create_animation(div, rect, flip, {});
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        
        
        			if (local) {
        
        				add_render_callback(() => {
        
        					if (!current) return;
        
        					if (div_outro) div_outro.end(1);
        
        					div_intro = create_in_transition(div, /*receive*/ ctx[3], { key: /*val*/ ctx[7] });
        
        					div_intro.start();
        
        				});
        
        			}
        
        
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			if (div_intro) div_intro.invalidate();
        
        
        
        			if (local) {
        
        				div_outro = create_out_transition(div, /*send*/ ctx[2], { key: /*val*/ ctx[7] });
        
        			}
        
        
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(div);
        
        			}
        
        
        
        			if (detaching && div_outro) div_outro.end();
        
        			mounted = false;
        
        			dispose();
        
        		}
        
        	};
        
        }
        
        
        
        function create_fragment$f(ctx) {
        
        	let div2;
        
        	let div0;
        
        	let each_blocks_1 = [];
        
        	let each0_lookup = new Map();
        
        	let t;
        
        	let div1;
        
        	let each_blocks = [];
        
        	let each1_lookup = new Map();
        
        	let current;
        
        	let each_value_1 = ensure_array_like(/*boingers*/ ctx[1].filter(func));
        
        	const get_key = ctx => /*val*/ ctx[7];
        
        
        
        	for (let i = 0; i < each_value_1.length; i += 1) {
        
        		let child_ctx = get_each_context_1(ctx, each_value_1, i);
        
        		let key = get_key(child_ctx);
        
        		each0_lookup.set(key, each_blocks_1[i] = create_each_block_1(key, child_ctx));
        
        	}
        
        
        
        	let each_value = ensure_array_like(/*boingers*/ ctx[1].filter(func_1));
        
        	const get_key_1 = ctx => /*val*/ ctx[7];
        
        
        
        	for (let i = 0; i < each_value.length; i += 1) {
        
        		let child_ctx = get_each_context$3(ctx, each_value, i);
        
        		let key = get_key_1(child_ctx);
        
        		each1_lookup.set(key, each_blocks[i] = create_each_block$3(key, child_ctx));
        
        	}
        
        
        
        	return {
        
        		c() {
        
        			div2 = element("div");
        
        			div0 = element("div");
        
        
        
        			for (let i = 0; i < each_blocks_1.length; i += 1) {
        
        				each_blocks_1[i].c();
        
        			}
        
        
        
        			t = space();
        
        			div1 = element("div");
        
        
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				each_blocks[i].c();
        
        			}
        
        
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			div2 = claim_element(nodes, "DIV", { class: true });
        
        			var div2_nodes = children(div2);
        
        			div0 = claim_element(div2_nodes, "DIV", { class: true });
        
        			var div0_nodes = children(div0);
        
        
        
        			for (let i = 0; i < each_blocks_1.length; i += 1) {
        
        				each_blocks_1[i].l(div0_nodes);
        
        			}
        
        
        
        			div0_nodes.forEach(detach);
        
        			t = claim_space(div2_nodes);
        
        			div1 = claim_element(div2_nodes, "DIV", { class: true });
        
        			var div1_nodes = children(div1);
        
        
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				each_blocks[i].l(div1_nodes);
        
        			}
        
        
        
        			div1_nodes.forEach(detach);
        
        			div2_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			attr(div0, "class", "boingers svelte-10dnw8d");
        
        			attr(div1, "class", "boingers svelte-10dnw8d");
        
        			attr(div2, "class", "container svelte-10dnw8d");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, div2, anchor);
        
        			append_hydration(div2, div0);
        
        
        
        			for (let i = 0; i < each_blocks_1.length; i += 1) {
        
        				if (each_blocks_1[i]) {
        
        					each_blocks_1[i].m(div0, null);
        
        				}
        
        			}
        
        
        
        			append_hydration(div2, t);
        
        			append_hydration(div2, div1);
        
        
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				if (each_blocks[i]) {
        
        					each_blocks[i].m(div1, null);
        
        				}
        
        			}
        
        
        
        			current = true;
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (dirty & /*color, boingers, toggleBoing*/ 19) {
        
        				each_value_1 = ensure_array_like(/*boingers*/ ctx[1].filter(func));
        
        				group_outros();
        
        				for (let i = 0; i < each_blocks_1.length; i += 1) each_blocks_1[i].r();
        
        				each_blocks_1 = update_keyed_each(each_blocks_1, dirty, get_key, 1, ctx, each_value_1, each0_lookup, div0, fix_and_outro_and_destroy_block, create_each_block_1, null, get_each_context_1);
        
        				for (let i = 0; i < each_blocks_1.length; i += 1) each_blocks_1[i].a();
        
        				check_outros();
        
        			}
        
        
        
        			if (dirty & /*color, boingers, toggleBoing*/ 19) {
        
        				each_value = ensure_array_like(/*boingers*/ ctx[1].filter(func_1));
        
        				group_outros();
        
        				for (let i = 0; i < each_blocks.length; i += 1) each_blocks[i].r();
        
        				each_blocks = update_keyed_each(each_blocks, dirty, get_key_1, 1, ctx, each_value, each1_lookup, div1, fix_and_outro_and_destroy_block, create_each_block$3, null, get_each_context$3);
        
        				for (let i = 0; i < each_blocks.length; i += 1) each_blocks[i].a();
        
        				check_outros();
        
        			}
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        
        
        			for (let i = 0; i < each_value_1.length; i += 1) {
        
        				transition_in(each_blocks_1[i]);
        
        			}
        
        
        
        			for (let i = 0; i < each_value.length; i += 1) {
        
        				transition_in(each_blocks[i]);
        
        			}
        
        
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			for (let i = 0; i < each_blocks_1.length; i += 1) {
        
        				transition_out(each_blocks_1[i]);
        
        			}
        
        
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				transition_out(each_blocks[i]);
        
        			}
        
        
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(div2);
        
        			}
        
        
        
        			for (let i = 0; i < each_blocks_1.length; i += 1) {
        
        				each_blocks_1[i].d();
        
        			}
        
        
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				each_blocks[i].d();
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        const func = v => !v.boinged;
        
        const func_1 = v => v.boinged;
        
        
        
        function instance$e($$self, $$props, $$invalidate) {
        
        	let { color = 'pink' } = $$props;
        
        	const [send, receive] = crossfade({ fallback: scale });
        
        
        
        	let boingers = [
        
        		{ val: 1, boinged: true },
        
        		{ val: 2, boinged: true },
        
        		{ val: 3, boinged: false },
        
        		{ val: 4, boinged: true },
        
        		{ val: 5, boinged: false }
        
        	];
        
        
        
        	function toggleBoing(id) {
        
        		const index = boingers.findIndex(v => v.val === id);
        
        		$$invalidate(1, boingers[index].boinged = !boingers[index].boinged, boingers);
        
        	}
        
        
        
        	const click_handler = val => toggleBoing(val);
        
        	const click_handler_1 = val => toggleBoing(val);
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('color' in $$props) $$invalidate(0, color = $$props.color);
        
        	};
        
        
        
        	return [color, boingers, send, receive, toggleBoing, click_handler, click_handler_1];
        
        }
        
        
        
        class Boinger extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$e, create_fragment$f, safe_not_equal, { color: 0 });
        
        	}
        
        }
        
        
        
        /* assets\mdsvex\App.mdsvx generated by Svelte v4.2.12 */
        
        
        
        function get_each_context$2(ctx, list, i) {
        
        	const child_ctx = ctx.slice();
        
        	child_ctx[0] = list[i];
        
        	return child_ctx;
        
        }
        
        
        
        // (28:0) <Seriously>
        
        function create_default_slot$2(ctx) {
        
        	let h3;
        
        	let textContent = "I wasn’t joking";
        
        	let t1;
        
        	let pre;
        
        	let html_tag;
        
        	let raw_value = `<code class="language-undefined">	This is real life</code>` + "";
        
        
        
        	return {
        
        		c() {
        
        			h3 = element("h3");
        
        			h3.textContent = textContent;
        
        			t1 = space();
        
        			pre = element("pre");
        
        			html_tag = new HtmlTagHydration(false);
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			h3 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h3) !== "svelte-wyfjmr") h3.textContent = textContent;
        
        			t1 = claim_space(nodes);
        
        			pre = claim_element(nodes, "PRE", { class: true });
        
        			var pre_nodes = children(pre);
        
        			html_tag = claim_html_tag(pre_nodes, false);
        
        			pre_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			html_tag.a = null;
        
        			attr(pre, "class", "language-undefined");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, h3, anchor);
        
        			insert_hydration(target, t1, anchor);
        
        			insert_hydration(target, pre, anchor);
        
        			html_tag.m(raw_value, pre);
        
        		},
        
        		p: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(h3);
        
        				detach(t1);
        
        				detach(pre);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (51:0) {#each list as item}
        
        function create_each_block$2(ctx) {
        
        	let li;
        
        	let t_value = /*item*/ ctx[0] + "";
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			li = element("li");
        
        			t = text$2(t_value);
        
        		},
        
        		l(nodes) {
        
        			li = claim_element(nodes, "LI", {});
        
        			var li_nodes = children(li);
        
        			t = claim_text(li_nodes, t_value);
        
        			li_nodes.forEach(detach);
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, li, anchor);
        
        			append_hydration(li, t);
        
        		},
        
        		p: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(li);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        function create_fragment$e(ctx) {
        
        	let h1;
        
        	let t0;
        
        	let t1;
        
        	let h20;
        
        	let textContent = "Good stuff in your markdown";
        
        	let t3;
        
        	let p0;
        
        	let textContent_1 = "Markdown is pretty good but sometimes you just need more.";
        
        	let t5;
        
        	let p1;
        
        	let textContent_2 = "Sometimes you need a boinger like this:";
        
        	let t7;
        
        	let boinger;
        
        	let t8;
        
        	let p2;
        
        	let textContent_3 = "Not many people have a boinger right in their markdown.";
        
        	let t10;
        
        	let h21;
        
        	let textContent_4 = "Markdown in your markdown";
        
        	let t12;
        
        	let p3;
        
        	let textContent_5 = `Sometimes what you wrote last week is so good that you just <em>have</em> to include it again.`;
        
        	let t16;
        
        	let p4;
        
        	let textContent_6 = "I’m not gonna stand in the way of your egomania.";
        
        	let t18;
        
        	let blockquote;
        
        	let count0;
        
        	let t19;
        
        	let p5;
        
        	let textContent_7 = `— <em>Me, May 2019</em>`;
        
        	let t22;
        
        	let p6;
        
        	let textContent_8 = `Yeah, thats right you can put wigdets in markdown (<code>.svx</code> files or otherwise). You can put markdown in widgets too.`;
        
        	let t26;
        
        	let seriously;
        
        	let t27;
        
        	let p7;
        
        	let t28;
        
        	let strong0;
        
        	let textContent_9 = "inlined";
        
        	let t30;
        
        	let count1;
        
        	let t31;
        
        	let code1;
        
        	let textContent_10 = "metadata";
        
        	let t33;
        
        	let code2;
        
        	let textContent_11 = "js exec";
        
        	let t35;
        
        	let t36;
        
        	let p8;
        
        	let textContent_12 = "Normal markdown stuff works too:";
        
        	let t38;
        
        	let table;
        
        	let textContent_13 = `<thead><tr><th>like</th> <th>this</th></tr></thead> <tbody><tr><td>table</td> <td>here</td></tr></tbody>`;
        
        	let t46;
        
        	let p9;
        
        	let textContent_14 = `And <em>this</em> and <strong>THIS</strong>. And other stuff. You can also use all your favorite Svelte features, like <code>each</code> blocks:`;
        
        	let t54;
        
        	let ul;
        
        	let t55;
        
        	let p10;
        
        	let textContent_15 = "and all the other good Svelte stuff.";
        
        	let current;
        
        	boinger = new Boinger({ props: { color } });
        
        	count0 = new Count({});
        
        
        
        	seriously = new Seriously({
        
        			props: {
        
        				$$slots: { default: [create_default_slot$2] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	count1 = new Count({ props: { count: number } });
        
        	let each_value = ensure_array_like(list);
        
        	let each_blocks = [];
        
        
        
        	for (let i = 0; i < each_value.length; i += 1) {
        
        		each_blocks[i] = create_each_block$2(get_each_context$2(ctx, each_value, i));
        
        	}
        
        
        
        	return {
        
        		c() {
        
        			h1 = element("h1");
        
        			t0 = text$2(title);
        
        			t1 = space();
        
        			h20 = element("h2");
        
        			h20.textContent = textContent;
        
        			t3 = space();
        
        			p0 = element("p");
        
        			p0.textContent = textContent_1;
        
        			t5 = space();
        
        			p1 = element("p");
        
        			p1.textContent = textContent_2;
        
        			t7 = space();
        
        			create_component(boinger.$$.fragment);
        
        			t8 = space();
        
        			p2 = element("p");
        
        			p2.textContent = textContent_3;
        
        			t10 = space();
        
        			h21 = element("h2");
        
        			h21.textContent = textContent_4;
        
        			t12 = space();
        
        			p3 = element("p");
        
        			p3.innerHTML = textContent_5;
        
        			t16 = space();
        
        			p4 = element("p");
        
        			p4.textContent = textContent_6;
        
        			t18 = space();
        
        			blockquote = element("blockquote");
        
        			create_component(count0.$$.fragment);
        
        			t19 = space();
        
        			p5 = element("p");
        
        			p5.innerHTML = textContent_7;
        
        			t22 = space();
        
        			p6 = element("p");
        
        			p6.innerHTML = textContent_8;
        
        			t26 = space();
        
        			create_component(seriously.$$.fragment);
        
        			t27 = space();
        
        			p7 = element("p");
        
        			t28 = text$2("Sometimes you need your widgets ");
        
        			strong0 = element("strong");
        
        			strong0.textContent = textContent_9;
        
        			t30 = text$2(" (like this:");
        
        			create_component(count1.$$.fragment);
        
        			t31 = text$2(") because why shouldn’t you.\nObviously you have access to values defined in YAML (namespaced under ");
        
        			code1 = element("code");
        
        			code1.textContent = textContent_10;
        
        			t33 = text$2(") and anything defined in an fenced ");
        
        			code2 = element("code");
        
        			code2.textContent = textContent_11;
        
        			t35 = text$2(" block can be referenced directly.");
        
        			t36 = space();
        
        			p8 = element("p");
        
        			p8.textContent = textContent_12;
        
        			t38 = space();
        
        			table = element("table");
        
        			table.innerHTML = textContent_13;
        
        			t46 = space();
        
        			p9 = element("p");
        
        			p9.innerHTML = textContent_14;
        
        			t54 = space();
        
        			ul = element("ul");
        
        
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				each_blocks[i].c();
        
        			}
        
        
        
        			t55 = space();
        
        			p10 = element("p");
        
        			p10.textContent = textContent_15;
        
        		},
        
        		l(nodes) {
        
        			h1 = claim_element(nodes, "H1", {});
        
        			var h1_nodes = children(h1);
        
        			t0 = claim_text(h1_nodes, title);
        
        			h1_nodes.forEach(detach);
        
        			t1 = claim_space(nodes);
        
        			h20 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h20) !== "svelte-nl5uik") h20.textContent = textContent;
        
        			t3 = claim_space(nodes);
        
        			p0 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p0) !== "svelte-amyxuj") p0.textContent = textContent_1;
        
        			t5 = claim_space(nodes);
        
        			p1 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p1) !== "svelte-1dgjrm3") p1.textContent = textContent_2;
        
        			t7 = claim_space(nodes);
        
        			claim_component(boinger.$$.fragment, nodes);
        
        			t8 = claim_space(nodes);
        
        			p2 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p2) !== "svelte-nqsle") p2.textContent = textContent_3;
        
        			t10 = claim_space(nodes);
        
        			h21 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h21) !== "svelte-1ao8gpq") h21.textContent = textContent_4;
        
        			t12 = claim_space(nodes);
        
        			p3 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p3) !== "svelte-rzn4yk") p3.innerHTML = textContent_5;
        
        			t16 = claim_space(nodes);
        
        			p4 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p4) !== "svelte-3zd2hj") p4.textContent = textContent_6;
        
        			t18 = claim_space(nodes);
        
        			blockquote = claim_element(nodes, "BLOCKQUOTE", {});
        
        			var blockquote_nodes = children(blockquote);
        
        			claim_component(count0.$$.fragment, blockquote_nodes);
        
        			t19 = claim_space(blockquote_nodes);
        
        			p5 = claim_element(blockquote_nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p5) !== "svelte-1g0vqhc") p5.innerHTML = textContent_7;
        
        			blockquote_nodes.forEach(detach);
        
        			t22 = claim_space(nodes);
        
        			p6 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p6) !== "svelte-7kbj1o") p6.innerHTML = textContent_8;
        
        			t26 = claim_space(nodes);
        
        			claim_component(seriously.$$.fragment, nodes);
        
        			t27 = claim_space(nodes);
        
        			p7 = claim_element(nodes, "P", {});
        
        			var p7_nodes = children(p7);
        
        			t28 = claim_text(p7_nodes, "Sometimes you need your widgets ");
        
        			strong0 = claim_element(p7_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong0) !== "svelte-1tibnd3") strong0.textContent = textContent_9;
        
        			t30 = claim_text(p7_nodes, " (like this:");
        
        			claim_component(count1.$$.fragment, p7_nodes);
        
        			t31 = claim_text(p7_nodes, ") because why shouldn’t you.\nObviously you have access to values defined in YAML (namespaced under ");
        
        			code1 = claim_element(p7_nodes, "CODE", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(code1) !== "svelte-9o0lj1") code1.textContent = textContent_10;
        
        			t33 = claim_text(p7_nodes, ") and anything defined in an fenced ");
        
        			code2 = claim_element(p7_nodes, "CODE", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(code2) !== "svelte-oaomc2") code2.textContent = textContent_11;
        
        			t35 = claim_text(p7_nodes, " block can be referenced directly.");
        
        			p7_nodes.forEach(detach);
        
        			t36 = claim_space(nodes);
        
        			p8 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p8) !== "svelte-1jzz59g") p8.textContent = textContent_12;
        
        			t38 = claim_space(nodes);
        
        			table = claim_element(nodes, "TABLE", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(table) !== "svelte-hj8m2t") table.innerHTML = textContent_13;
        
        			t46 = claim_space(nodes);
        
        			p9 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p9) !== "svelte-10tu77b") p9.innerHTML = textContent_14;
        
        			t54 = claim_space(nodes);
        
        			ul = claim_element(nodes, "UL", {});
        
        			var ul_nodes = children(ul);
        
        
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				each_blocks[i].l(ul_nodes);
        
        			}
        
        
        
        			ul_nodes.forEach(detach);
        
        			t55 = claim_space(nodes);
        
        			p10 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p10) !== "svelte-tc2nvv") p10.textContent = textContent_15;
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, h1, anchor);
        
        			append_hydration(h1, t0);
        
        			insert_hydration(target, t1, anchor);
        
        			insert_hydration(target, h20, anchor);
        
        			insert_hydration(target, t3, anchor);
        
        			insert_hydration(target, p0, anchor);
        
        			insert_hydration(target, t5, anchor);
        
        			insert_hydration(target, p1, anchor);
        
        			insert_hydration(target, t7, anchor);
        
        			mount_component(boinger, target, anchor);
        
        			insert_hydration(target, t8, anchor);
        
        			insert_hydration(target, p2, anchor);
        
        			insert_hydration(target, t10, anchor);
        
        			insert_hydration(target, h21, anchor);
        
        			insert_hydration(target, t12, anchor);
        
        			insert_hydration(target, p3, anchor);
        
        			insert_hydration(target, t16, anchor);
        
        			insert_hydration(target, p4, anchor);
        
        			insert_hydration(target, t18, anchor);
        
        			insert_hydration(target, blockquote, anchor);
        
        			mount_component(count0, blockquote, null);
        
        			append_hydration(blockquote, t19);
        
        			append_hydration(blockquote, p5);
        
        			insert_hydration(target, t22, anchor);
        
        			insert_hydration(target, p6, anchor);
        
        			insert_hydration(target, t26, anchor);
        
        			mount_component(seriously, target, anchor);
        
        			insert_hydration(target, t27, anchor);
        
        			insert_hydration(target, p7, anchor);
        
        			append_hydration(p7, t28);
        
        			append_hydration(p7, strong0);
        
        			append_hydration(p7, t30);
        
        			mount_component(count1, p7, null);
        
        			append_hydration(p7, t31);
        
        			append_hydration(p7, code1);
        
        			append_hydration(p7, t33);
        
        			append_hydration(p7, code2);
        
        			append_hydration(p7, t35);
        
        			insert_hydration(target, t36, anchor);
        
        			insert_hydration(target, p8, anchor);
        
        			insert_hydration(target, t38, anchor);
        
        			insert_hydration(target, table, anchor);
        
        			insert_hydration(target, t46, anchor);
        
        			insert_hydration(target, p9, anchor);
        
        			insert_hydration(target, t54, anchor);
        
        			insert_hydration(target, ul, anchor);
        
        
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				if (each_blocks[i]) {
        
        					each_blocks[i].m(ul, null);
        
        				}
        
        			}
        
        
        
        			insert_hydration(target, t55, anchor);
        
        			insert_hydration(target, p10, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, [dirty]) {
        
        			const seriously_changes = {};
        
        
        
        			if (dirty & /*$$scope*/ 8) {
        
        				seriously_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			seriously.$set(seriously_changes);
        
        
        
        			if (dirty & /*list*/ 0) {
        
        				each_value = ensure_array_like(list);
        
        				let i;
        
        
        
        				for (i = 0; i < each_value.length; i += 1) {
        
        					const child_ctx = get_each_context$2(ctx, each_value, i);
        
        
        
        					if (each_blocks[i]) {
        
        						each_blocks[i].p(child_ctx, dirty);
        
        					} else {
        
        						each_blocks[i] = create_each_block$2(child_ctx);
        
        						each_blocks[i].c();
        
        						each_blocks[i].m(ul, null);
        
        					}
        
        				}
        
        
        
        				for (; i < each_blocks.length; i += 1) {
        
        					each_blocks[i].d(1);
        
        				}
        
        
        
        				each_blocks.length = each_value.length;
        
        			}
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(boinger.$$.fragment, local);
        
        			transition_in(count0.$$.fragment, local);
        
        			transition_in(seriously.$$.fragment, local);
        
        			transition_in(count1.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(boinger.$$.fragment, local);
        
        			transition_out(count0.$$.fragment, local);
        
        			transition_out(seriously.$$.fragment, local);
        
        			transition_out(count1.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(h1);
        
        				detach(t1);
        
        				detach(h20);
        
        				detach(t3);
        
        				detach(p0);
        
        				detach(t5);
        
        				detach(p1);
        
        				detach(t7);
        
        				detach(t8);
        
        				detach(p2);
        
        				detach(t10);
        
        				detach(h21);
        
        				detach(t12);
        
        				detach(p3);
        
        				detach(t16);
        
        				detach(p4);
        
        				detach(t18);
        
        				detach(blockquote);
        
        				detach(t22);
        
        				detach(p6);
        
        				detach(t26);
        
        				detach(t27);
        
        				detach(p7);
        
        				detach(t36);
        
        				detach(p8);
        
        				detach(t38);
        
        				detach(table);
        
        				detach(t46);
        
        				detach(p9);
        
        				detach(t54);
        
        				detach(ul);
        
        				detach(t55);
        
        				detach(p10);
        
        			}
        
        
        
        			destroy_component(boinger, detaching);
        
        			destroy_component(count0);
        
        			destroy_component(seriously, detaching);
        
        			destroy_component(count1);
        
        			destroy_each(each_blocks, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        const metadata = {
        
        	"title": "Svex up your markdown",
        
        	"count": 25,
        
        	"color": "cadetblue",
        
        	"list": [1, 2, 3, 4, "boo"]
        
        };
        
        
        
        const { title, count, color, list } = metadata;
        
        let number = 45;
        
        
        
        class App extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, null, create_fragment$e, safe_not_equal, {});
        
        	}
        
        }
        
        
        
        const subscriber_queue = [];
        
        
        
        /**
        
         * Creates a `Readable` store that allows reading by subscription.
        
         *
        
         * https://svelte.dev/docs/svelte-store#readable
        
         * @template T
        
         * @param {T} [value] initial value
        
         * @param {import('./public.js').StartStopNotifier<T>} [start]
        
         * @returns {import('./public.js').Readable<T>}
        
         */
        
        function readable(value, start) {
        
        	return {
        
        		subscribe: writable(value, start).subscribe
        
        	};
        
        }
        
        
        
        /**
        
         * Create a `Writable` store that allows both updating and reading by subscription.
        
         *
        
         * https://svelte.dev/docs/svelte-store#writable
        
         * @template T
        
         * @param {T} [value] initial value
        
         * @param {import('./public.js').StartStopNotifier<T>} [start]
        
         * @returns {import('./public.js').Writable<T>}
        
         */
        
        function writable(value, start = noop) {
        
        	/** @type {import('./public.js').Unsubscriber} */
        
        	let stop;
        
        	/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */
        
        	const subscribers = new Set();
        
        	/** @param {T} new_value
        
        	 * @returns {void}
        
        	 */
        
        	function set(new_value) {
        
        		if (safe_not_equal(value, new_value)) {
        
        			value = new_value;
        
        			if (stop) {
        
        				// store is ready
        
        				const run_queue = !subscriber_queue.length;
        
        				for (const subscriber of subscribers) {
        
        					subscriber[1]();
        
        					subscriber_queue.push(subscriber, value);
        
        				}
        
        				if (run_queue) {
        
        					for (let i = 0; i < subscriber_queue.length; i += 2) {
        
        						subscriber_queue[i][0](subscriber_queue[i + 1]);
        
        					}
        
        					subscriber_queue.length = 0;
        
        				}
        
        			}
        
        		}
        
        	}
        
        
        
        	/**
        
        	 * @param {import('./public.js').Updater<T>} fn
        
        	 * @returns {void}
        
        	 */
        
        	function update(fn) {
        
        		set(fn(value));
        
        	}
        
        
        
        	/**
        
        	 * @param {import('./public.js').Subscriber<T>} run
        
        	 * @param {import('./private.js').Invalidator<T>} [invalidate]
        
        	 * @returns {import('./public.js').Unsubscriber}
        
        	 */
        
        	function subscribe(run, invalidate = noop) {
        
        		/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */
        
        		const subscriber = [run, invalidate];
        
        		subscribers.add(subscriber);
        
        		if (subscribers.size === 1) {
        
        			stop = start(set, update) || noop;
        
        		}
        
        		run(value);
        
        		return () => {
        
        			subscribers.delete(subscriber);
        
        			if (subscribers.size === 0 && stop) {
        
        				stop();
        
        				stop = null;
        
        			}
        
        		};
        
        	}
        
        	return { set, update, subscribe };
        
        }
        
        
        
        /**
        
         * Derived value store by synchronizing one or more readable stores and
        
         * applying an aggregation function over its input values.
        
         *
        
         * https://svelte.dev/docs/svelte-store#derived
        
         * @template {import('./private.js').Stores} S
        
         * @template T
        
         * @overload
        
         * @param {S} stores - input stores
        
         * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values
        
         * @param {T} [initial_value] - initial value
        
         * @returns {import('./public.js').Readable<T>}
        
         */
        
        
        
        /**
        
         * Derived value store by synchronizing one or more readable stores and
        
         * applying an aggregation function over its input values.
        
         *
        
         * https://svelte.dev/docs/svelte-store#derived
        
         * @template {import('./private.js').Stores} S
        
         * @template T
        
         * @overload
        
         * @param {S} stores - input stores
        
         * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values
        
         * @param {T} [initial_value] - initial value
        
         * @returns {import('./public.js').Readable<T>}
        
         */
        
        
        
        /**
        
         * @template {import('./private.js').Stores} S
        
         * @template T
        
         * @param {S} stores
        
         * @param {Function} fn
        
         * @param {T} [initial_value]
        
         * @returns {import('./public.js').Readable<T>}
        
         */
        
        function derived(stores, fn, initial_value) {
        
        	const single = !Array.isArray(stores);
        
        	/** @type {Array<import('./public.js').Readable<any>>} */
        
        	const stores_array = single ? [stores] : stores;
        
        	if (!stores_array.every(Boolean)) {
        
        		throw new Error('derived() expects stores as input, got a falsy value');
        
        	}
        
        	const auto = fn.length < 2;
        
        	return readable(initial_value, (set, update) => {
        
        		let started = false;
        
        		const values = [];
        
        		let pending = 0;
        
        		let cleanup = noop;
        
        		const sync = () => {
        
        			if (pending) {
        
        				return;
        
        			}
        
        			cleanup();
        
        			const result = fn(single ? values[0] : values, set, update);
        
        			if (auto) {
        
        				set(result);
        
        			} else {
        
        				cleanup = is_function(result) ? result : noop;
        
        			}
        
        		};
        
        		const unsubscribers = stores_array.map((store, i) =>
        
        			subscribe(
        
        				store,
        
        				(value) => {
        
        					values[i] = value;
        
        					pending &= ~(1 << i);
        
        					if (started) {
        
        						sync();
        
        					}
        
        				},
        
        				() => {
        
        					pending |= 1 << i;
        
        				}
        
        			)
        
        		);
        
        		started = true;
        
        		sync();
        
        		return function stop() {
        
        			run_all(unsubscribers);
        
        			cleanup();
        
        			// We need to set this to false because callbacks can still happen despite having unsubscribed:
        
        			// Callbacks might already be placed in the queue which doesn't know it should no longer
        
        			// invoke this derived store.
        
        			started = false;
        
        		};
        
        	});
        
        }
        
        
        
        let globalStore = writable({ test: "testicool", number: 10 });
        
        
        
        /* assets\components\SvelteCounter.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_fragment$d(ctx) {
        
        	let button;
        
        	let t0;
        
        	let t1;
        
        	let mounted;
        
        	let dispose;
        
        
        
        	return {
        
        		c() {
        
        			button = element("button");
        
        			t0 = text$2("count is ");
        
        			t1 = text$2(/*count*/ ctx[0]);
        
        		},
        
        		l(nodes) {
        
        			button = claim_element(nodes, "BUTTON", {});
        
        			var button_nodes = children(button);
        
        			t0 = claim_text(button_nodes, "count is ");
        
        			t1 = claim_text(button_nodes, /*count*/ ctx[0]);
        
        			button_nodes.forEach(detach);
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, button, anchor);
        
        			append_hydration(button, t0);
        
        			append_hydration(button, t1);
        
        
        
        			if (!mounted) {
        
        				dispose = listen(button, "click", /*increment*/ ctx[1]);
        
        				mounted = true;
        
        			}
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (dirty & /*count*/ 1) set_data(t1, /*count*/ ctx[0]);
        
        		},
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(button);
        
        			}
        
        
        
        			mounted = false;
        
        			dispose();
        
        		}
        
        	};
        
        }
        
        
        
        function instance$d($$self, $$props, $$invalidate) {
        
        	let count;
        
        
        
        	globalStore.subscribe(value => {
        
        		$$invalidate(0, count = value.number); // Assurez-vous que 'number' est une propriété valide de votre store
        
        		console.log("The store updated !");
        
        		console.log(value);
        
        	});
        
        
        
        	const increment = () => {
        
        		// Mise à jour de la valeur dans le store de manière correcte
        
        		globalStore.update(current => {
        
        			return { ...current, number: current.number + 1 }; // Retourne la nouvelle valeur pour mettre à jour le store
        
        		});
        
        	};
        
        
        
        	return [count, increment];
        
        }
        
        
        
        class SvelteCounter extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$d, create_fragment$d, safe_not_equal, {});
        
        	}
        
        }
        
        
        
        /* assets\components\StaticContainer.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_fragment$c(ctx) {
        
        	let current;
        
        	const default_slot_template = /*#slots*/ ctx[1].default;
        
        	const default_slot = create_slot(default_slot_template, ctx, /*$$scope*/ ctx[0], null);
        
        
        
        	return {
        
        		c() {
        
        			if (default_slot) default_slot.c();
        
        		},
        
        		l(nodes) {
        
        			if (default_slot) default_slot.l(nodes);
        
        		},
        
        		m(target, anchor) {
        
        			if (default_slot) {
        
        				default_slot.m(target, anchor);
        
        			}
        
        
        
        			current = true;
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (default_slot) {
        
        				if (default_slot.p && (!current || dirty & /*$$scope*/ 1)) {
        
        					update_slot_base(
        
        						default_slot,
        
        						default_slot_template,
        
        						ctx,
        
        						/*$$scope*/ ctx[0],
        
        						!current
        
        						? get_all_dirty_from_scope(/*$$scope*/ ctx[0])
        
        						: get_slot_changes(default_slot_template, /*$$scope*/ ctx[0], dirty, null),
        
        						null
        
        					);
        
        				}
        
        			}
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(default_slot, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(default_slot, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (default_slot) default_slot.d(detaching);
        
        		}
        
        	};
        
        }
        
        
        
        function instance$c($$self, $$props, $$invalidate) {
        
        	let { $$slots: slots = {}, $$scope } = $$props;
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('$$scope' in $$props) $$invalidate(0, $$scope = $$props.$$scope);
        
        	};
        
        
        
        	return [$$scope, slots];
        
        }
        
        
        
        class StaticContainer extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$c, create_fragment$c, safe_not_equal, {});
        
        	}
        
        }
        
        
        
        /* assets\components\Sketch.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_dynamic_element$2(ctx) {
        
        	let svelte_element;
        
        	let svelte_element_levels = [{ id: /*currentInstanceId*/ ctx[0] }];
        
        	let svelte_element_data = {};
        
        
        
        	for (let i = 0; i < svelte_element_levels.length; i += 1) {
        
        		svelte_element_data = assign(svelte_element_data, svelte_element_levels[i]);
        
        	}
        
        
        
        	return {
        
        		c() {
        
        			svelte_element = element(/*elementType*/ ctx[2]);
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			svelte_element = claim_element(nodes, (/*elementType*/ ctx[2] || 'null').toUpperCase(), { id: true });
        
        			children(svelte_element).forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			set_dynamic_element_data(/*elementType*/ ctx[2])(svelte_element, svelte_element_data);
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, svelte_element, anchor);
        
        			/*svelte_element_binding*/ ctx[9](svelte_element);
        
        		},
        
        		p(ctx, dirty) {
        
        			set_dynamic_element_data(/*elementType*/ ctx[2])(svelte_element, svelte_element_data = get_spread_update(svelte_element_levels, [dirty & /*currentInstanceId*/ 1 && { id: /*currentInstanceId*/ ctx[0] }]));
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(svelte_element);
        
        			}
        
        
        
        			/*svelte_element_binding*/ ctx[9](null);
        
        		}
        
        	};
        
        }
        
        
        
        function create_fragment$b(ctx) {
        
        	let svelte_element = /*elementType*/ ctx[2] && create_dynamic_element$2(ctx);
        
        
        
        	return {
        
        		c() {
        
        			if (svelte_element) svelte_element.c();
        
        		},
        
        		l(nodes) {
        
        			if (svelte_element) svelte_element.l(nodes);
        
        		},
        
        		m(target, anchor) {
        
        			if (svelte_element) svelte_element.m(target, anchor);
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (/*elementType*/ ctx[2]) {
        
        				svelte_element.p(ctx, dirty);
        
        			}
        
        		},
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (svelte_element) svelte_element.d(detaching);
        
        		}
        
        	};
        
        }
        
        
        
        let numInstance = 0;
        
        
        
        function generateComponentId$1() {
        
        	numInstance++;
        
        	return `sketch-${numInstance}`;
        
        }
        
        
        
        function instance$b($$self, $$props, $$invalidate) {
        
        	const omit_props_names = ["width","height","sketch","display","ratio","webGl"];
        
        	let $$restProps = compute_rest_props($$props, omit_props_names);
        
        	let { width = 500 } = $$props;
        
        	let { height = 500 } = $$props;
        
        	let { sketch } = $$props;
        
        	let { display } = $$props;
        
        	let { ratio } = $$props;
        
        	let { webGl = false } = $$props;
        
        	let currentInstanceId;
        
        	let unsubscribers = [];
        
        	let elementType = display == "inline" ? "span" : "div";
        
        	let elementRef;
        
        	let observer;
        
        	let isVisible = false;
        
        
        
        	function handleIntersect(entries) {
        
        		//console.log(`Callback triggered for ${elementRef.id}`)
        
        		entries.forEach(entry => {
        
        			isVisible = entry.isIntersecting;
        
        		});
        
        	}
        
        
        
        	onMount(() => {
        
        		$$invalidate(0, currentInstanceId = generateComponentId$1());
        
        		observer = new IntersectionObserver(handleIntersect);
        
        
        
        		if (elementRef) {
        
        			observer.observe(elementRef);
        
        		}
        
        
        
        		Promise.resolve().then(function () { return p5_min$1; }).then(p5 => {
        
        			const s = p => {
        
        				const _sketch = sketch.bind(p);
        
        				_sketch(p);
        
        				const _setup = p.setup;
        
        				const _draw = p.draw;
        
        
        
        				for (let prop in $$restProps) {
        
        					if ($$restProps[prop].subscribe) {
        
        						unsubscribers.push($$restProps[prop].subscribe(v => {
        
        							p[prop] = v;
        
        							p.redraw();
        
        						}));
        
        					} else {
        
        						p[prop] = $$restProps[prop];
        
        					}
        
        				}
        
        
        
        				p.setup = () => {
        
        					p.createCanvas(width, height, webGl ? p.WEBGL : p.P2D);
        
        					_setup();
        
        				};
        
        
        
        				p.draw = () => {
        
        					if (isVisible) _draw();
        
        				};
        
        
        
        				console.log(p);
        
        			};
        
        
        
        			console.log(`num instance : ${currentInstanceId}`);
        
        			new p5.default(s, document.getElementById(currentInstanceId));
        
        		});
        
        	});
        
        
        
        	onDestroy(() => {
        
        		if (observer && elementRef) observer.unobserve(elementRef);
        
        		for (unsubscribe of unsubscribers) unsubscribe();
        
        	});
        
        
        
        	function svelte_element_binding($$value) {
        
        		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
        
        			elementRef = $$value;
        
        			$$invalidate(1, elementRef);
        
        		});
        
        	}
        
        
        
        	$$self.$$set = $$new_props => {
        
        		$$props = assign(assign({}, $$props), exclude_internal_props($$new_props));
        
        		$$invalidate(14, $$restProps = compute_rest_props($$props, omit_props_names));
        
        		if ('width' in $$new_props) $$invalidate(3, width = $$new_props.width);
        
        		if ('height' in $$new_props) $$invalidate(4, height = $$new_props.height);
        
        		if ('sketch' in $$new_props) $$invalidate(5, sketch = $$new_props.sketch);
        
        		if ('display' in $$new_props) $$invalidate(6, display = $$new_props.display);
        
        		if ('ratio' in $$new_props) $$invalidate(7, ratio = $$new_props.ratio);
        
        		if ('webGl' in $$new_props) $$invalidate(8, webGl = $$new_props.webGl);
        
        	};
        
        
        
        	return [
        
        		currentInstanceId,
        
        		elementRef,
        
        		elementType,
        
        		width,
        
        		height,
        
        		sketch,
        
        		display,
        
        		ratio,
        
        		webGl,
        
        		svelte_element_binding
        
        	];
        
        }
        
        
        
        class Sketch extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        
        
        		init(this, options, instance$b, create_fragment$b, safe_not_equal, {
        
        			width: 3,
        
        			height: 4,
        
        			sketch: 5,
        
        			display: 6,
        
        			ratio: 7,
        
        			webGl: 8
        
        		});
        
        	}
        
        }
        
        
        
        /* assets\components\Select.svelte generated by Svelte v4.2.12 */
        
        
        
        function get_each_context$1(ctx, list, i) {
        
        	const child_ctx = ctx.slice();
        
        	child_ctx[5] = list[i].value;
        
        	child_ctx[6] = list[i].label;
        
        	return child_ctx;
        
        }
        
        
        
        // (28:4) {#each options as {value, label}}
        
        function create_each_block$1(ctx) {
        
        	let option;
        
        	let t_value = /*label*/ ctx[6] + "";
        
        	let t;
        
        	let option_value_value;
        
        
        
        	return {
        
        		c() {
        
        			option = element("option");
        
        			t = text$2(t_value);
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			option = claim_element(nodes, "OPTION", {});
        
        			var option_nodes = children(option);
        
        			t = claim_text(option_nodes, t_value);
        
        			option_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			option.__value = option_value_value = /*value*/ ctx[5];
        
        			set_input_value(option, option.__value);
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, option, anchor);
        
        			append_hydration(option, t);
        
        		},
        
        		p(ctx, dirty) {
        
        			if (dirty & /*options*/ 1 && t_value !== (t_value = /*label*/ ctx[6] + "")) set_data(t, t_value);
        
        
        
        			if (dirty & /*options*/ 1 && option_value_value !== (option_value_value = /*value*/ ctx[5])) {
        
        				option.__value = option_value_value;
        
        				set_input_value(option, option.__value);
        
        			}
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(option);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        function create_fragment$a(ctx) {
        
        	let select;
        
        	let mounted;
        
        	let dispose;
        
        	let each_value = ensure_array_like(/*options*/ ctx[0]);
        
        	let each_blocks = [];
        
        
        
        	for (let i = 0; i < each_value.length; i += 1) {
        
        		each_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));
        
        	}
        
        
        
        	return {
        
        		c() {
        
        			select = element("select");
        
        
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				each_blocks[i].c();
        
        			}
        
        		},
        
        		l(nodes) {
        
        			select = claim_element(nodes, "SELECT", {});
        
        			var select_nodes = children(select);
        
        
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				each_blocks[i].l(select_nodes);
        
        			}
        
        
        
        			select_nodes.forEach(detach);
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, select, anchor);
        
        
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				if (each_blocks[i]) {
        
        					each_blocks[i].m(select, null);
        
        				}
        
        			}
        
        
        
        			select_option(select, /*selectedValue*/ ctx[1]);
        
        
        
        			if (!mounted) {
        
        				dispose = listen(select, "change", /*handleChange*/ ctx[2]);
        
        				mounted = true;
        
        			}
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (dirty & /*options*/ 1) {
        
        				each_value = ensure_array_like(/*options*/ ctx[0]);
        
        				let i;
        
        
        
        				for (i = 0; i < each_value.length; i += 1) {
        
        					const child_ctx = get_each_context$1(ctx, each_value, i);
        
        
        
        					if (each_blocks[i]) {
        
        						each_blocks[i].p(child_ctx, dirty);
        
        					} else {
        
        						each_blocks[i] = create_each_block$1(child_ctx);
        
        						each_blocks[i].c();
        
        						each_blocks[i].m(select, null);
        
        					}
        
        				}
        
        
        
        				for (; i < each_blocks.length; i += 1) {
        
        					each_blocks[i].d(1);
        
        				}
        
        
        
        				each_blocks.length = each_value.length;
        
        			}
        
        
        
        			if (dirty & /*selectedValue, options*/ 3) {
        
        				select_option(select, /*selectedValue*/ ctx[1]);
        
        			}
        
        		},
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(select);
        
        			}
        
        
        
        			destroy_each(each_blocks, detaching);
        
        			mounted = false;
        
        			dispose();
        
        		}
        
        	};
        
        }
        
        
        
        function instance$a($$self, $$props, $$invalidate) {
        
        	let { valueStore } = $$props;
        
        	let { options = [] } = $$props;
        
        
        
        	// Variable locale pour stocker la valeur actuelle du store
        
        	let selectedValue;
        
        
        
        	// Souscription au store
        
        	const unsubscribe = valueStore.subscribe(value => {
        
        		$$invalidate(1, selectedValue = value);
        
        	});
        
        
        
        	// Nettoyer la souscription lorsque le composant est détruit
        
        	onDestroy(unsubscribe);
        
        
        
        	// Mise à jour du store lorsque l'utilisateur change la sélection
        
        	function handleChange(event) {
        
        		valueStore.set(event.target.value);
        
        	}
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('valueStore' in $$props) $$invalidate(3, valueStore = $$props.valueStore);
        
        		if ('options' in $$props) $$invalidate(0, options = $$props.options);
        
        	};
        
        
        
        	return [options, selectedValue, handleChange, valueStore];
        
        }
        
        
        
        class Select extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$a, create_fragment$a, safe_not_equal, { valueStore: 3, options: 0 });
        
        	}
        
        }
        
        
        
        /* assets\components\Range.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_fragment$9(ctx) {
        
        	let label;
        
        	let input;
        
        	let mounted;
        
        	let dispose;
        
        
        
        	return {
        
        		c() {
        
        			label = element("label");
        
        			input = element("input");
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			label = claim_element(nodes, "LABEL", {});
        
        			var label_nodes = children(label);
        
        
        
        			input = claim_element(label_nodes, "INPUT", {
        
        				type: true,
        
        				min: true,
        
        				max: true,
        
        				step: true
        
        			});
        
        
        
        			label_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			attr(input, "type", "range");
        
        			attr(input, "min", /*min*/ ctx[0]);
        
        			attr(input, "max", /*max*/ ctx[1]);
        
        			attr(input, "step", /*step*/ ctx[2]);
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, label, anchor);
        
        			append_hydration(label, input);
        
        			set_input_value(input, /*value*/ ctx[3]);
        
        
        
        			if (!mounted) {
        
        				dispose = [
        
        					listen(input, "change", /*input_change_input_handler*/ ctx[6]),
        
        					listen(input, "input", /*input_change_input_handler*/ ctx[6]),
        
        					listen(input, "input", /*handleChange*/ ctx[4])
        
        				];
        
        
        
        				mounted = true;
        
        			}
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (dirty & /*min*/ 1) {
        
        				attr(input, "min", /*min*/ ctx[0]);
        
        			}
        
        
        
        			if (dirty & /*max*/ 2) {
        
        				attr(input, "max", /*max*/ ctx[1]);
        
        			}
        
        
        
        			if (dirty & /*step*/ 4) {
        
        				attr(input, "step", /*step*/ ctx[2]);
        
        			}
        
        
        
        			if (dirty & /*value*/ 8) {
        
        				set_input_value(input, /*value*/ ctx[3]);
        
        			}
        
        		},
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(label);
        
        			}
        
        
        
        			mounted = false;
        
        			run_all(dispose);
        
        		}
        
        	};
        
        }
        
        
        
        function instance$9($$self, $$props, $$invalidate) {
        
        	let { min } = $$props;
        
        	let { max } = $$props;
        
        	let { step } = $$props;
        
        	let { store } = $$props;
        
        	let componentMounted = false;
        
        	let value;
        
        	let unsubscribe;
        
        
        
        	onMount(() => {
        
        		if (store) {
        
        			unsubscribe = store.subscribe(v => {
        
        				$$invalidate(3, value = v);
        
        			});
        
        
        
        			componentMounted = true;
        
        		}
        
        	});
        
        
        
        	if (unsubscribe) onDestroy(unsubscribe);
        
        
        
        	function handleChange() {
        
        		if (componentMounted) store.set(value);
        
        	}
        
        
        
        	function input_change_input_handler() {
        
        		value = to_number(this.value);
        
        		$$invalidate(3, value);
        
        	}
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('min' in $$props) $$invalidate(0, min = $$props.min);
        
        		if ('max' in $$props) $$invalidate(1, max = $$props.max);
        
        		if ('step' in $$props) $$invalidate(2, step = $$props.step);
        
        		if ('store' in $$props) $$invalidate(5, store = $$props.store);
        
        	};
        
        
        
        	return [min, max, step, value, handleChange, store, input_change_input_handler];
        
        }
        
        
        
        class Range extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$9, create_fragment$9, safe_not_equal, { min: 0, max: 1, step: 2, store: 5 });
        
        	}
        
        }
        
        
        
        var css_248z$2 = "label.svelte-1qa2g1z{margin-right:10px}";
        
        styleInject(css_248z$2);
        
        
        
        /* assets\components\Radio.svelte generated by Svelte v4.2.12 */
        
        
        
        function get_each_context(ctx, list, i) {
        
        	const child_ctx = ctx.slice();
        
        	child_ctx[7] = list[i].value;
        
        	child_ctx[8] = list[i].label;
        
        	child_ctx[10] = i;
        
        	return child_ctx;
        
        }
        
        
        
        // (29:2) {#each options as {value: optionValue, label}
        
        function create_each_block(ctx) {
        
        	let label_1;
        
        	let input;
        
        	let input_value_value;
        
        	let value_has_changed = false;
        
        	let t0;
        
        	let t1_value = /*label*/ ctx[8] + "";
        
        	let t1;
        
        	let t2;
        
        	let binding_group;
        
        	let mounted;
        
        	let dispose;
        
        	binding_group = init_binding_group(/*$$binding_groups*/ ctx[5][0]);
        
        
        
        	return {
        
        		c() {
        
        			label_1 = element("label");
        
        			input = element("input");
        
        			t0 = space();
        
        			t1 = text$2(t1_value);
        
        			t2 = space();
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			label_1 = claim_element(nodes, "LABEL", { class: true });
        
        			var label_1_nodes = children(label_1);
        
        			input = claim_element(label_1_nodes, "INPUT", { type: true });
        
        			t0 = claim_space(label_1_nodes);
        
        			t1 = claim_text(label_1_nodes, t1_value);
        
        			t2 = claim_space(label_1_nodes);
        
        			label_1_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			attr(input, "type", "radio");
        
        			input.__value = input_value_value = /*optionValue*/ ctx[7];
        
        			set_input_value(input, input.__value);
        
        			attr(label_1, "class", "svelte-1qa2g1z");
        
        			binding_group.p(input);
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, label_1, anchor);
        
        			append_hydration(label_1, input);
        
        			input.checked = input.__value === /*selectedValue*/ ctx[1];
        
        			append_hydration(label_1, t0);
        
        			append_hydration(label_1, t1);
        
        			append_hydration(label_1, t2);
        
        
        
        			if (!mounted) {
        
        				dispose = [
        
        					listen(input, "change", /*input_change_handler*/ ctx[4]),
        
        					listen(input, "change", /*updateValue*/ ctx[2])
        
        				];
        
        
        
        				mounted = true;
        
        			}
        
        		},
        
        		p(ctx, dirty) {
        
        			if (dirty & /*options*/ 1 && input_value_value !== (input_value_value = /*optionValue*/ ctx[7])) {
        
        				input.__value = input_value_value;
        
        				set_input_value(input, input.__value);
        
        				value_has_changed = true;
        
        			}
        
        
        
        			if (value_has_changed || dirty & /*selectedValue, options*/ 3) {
        
        				input.checked = input.__value === /*selectedValue*/ ctx[1];
        
        			}
        
        
        
        			if (dirty & /*options*/ 1 && t1_value !== (t1_value = /*label*/ ctx[8] + "")) set_data(t1, t1_value);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(label_1);
        
        			}
        
        
        
        			binding_group.r();
        
        			mounted = false;
        
        			run_all(dispose);
        
        		}
        
        	};
        
        }
        
        
        
        function create_fragment$8(ctx) {
        
        	let each_1_anchor;
        
        	let each_value = ensure_array_like(/*options*/ ctx[0]);
        
        	let each_blocks = [];
        
        
        
        	for (let i = 0; i < each_value.length; i += 1) {
        
        		each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));
        
        	}
        
        
        
        	return {
        
        		c() {
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				each_blocks[i].c();
        
        			}
        
        
        
        			each_1_anchor = empty();
        
        		},
        
        		l(nodes) {
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				each_blocks[i].l(nodes);
        
        			}
        
        
        
        			each_1_anchor = empty();
        
        		},
        
        		m(target, anchor) {
        
        			for (let i = 0; i < each_blocks.length; i += 1) {
        
        				if (each_blocks[i]) {
        
        					each_blocks[i].m(target, anchor);
        
        				}
        
        			}
        
        
        
        			insert_hydration(target, each_1_anchor, anchor);
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (dirty & /*options, selectedValue, updateValue*/ 7) {
        
        				each_value = ensure_array_like(/*options*/ ctx[0]);
        
        				let i;
        
        
        
        				for (i = 0; i < each_value.length; i += 1) {
        
        					const child_ctx = get_each_context(ctx, each_value, i);
        
        
        
        					if (each_blocks[i]) {
        
        						each_blocks[i].p(child_ctx, dirty);
        
        					} else {
        
        						each_blocks[i] = create_each_block(child_ctx);
        
        						each_blocks[i].c();
        
        						each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
        
        					}
        
        				}
        
        
        
        				for (; i < each_blocks.length; i += 1) {
        
        					each_blocks[i].d(1);
        
        				}
        
        
        
        				each_blocks.length = each_value.length;
        
        			}
        
        		},
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(each_1_anchor);
        
        			}
        
        
        
        			destroy_each(each_blocks, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        function instance$8($$self, $$props, $$invalidate) {
        
        	let { store } = $$props;
        
        	let { options = [] } = $$props;
        
        	let selectedValue;
        
        	let unsubscribe;
        
        
        
        	// Une fonction pour mettre à jour la valeur sélectionnée
        
        	function updateValue(event) {
        
        		store.set(event.target.value);
        
        	}
        
        
        
        	onMount(() => {
        
        		if (store) {
        
        			unsubscribe = store.subscribe(v => {
        
        				$$invalidate(1, selectedValue = v);
        
        			});
        
        		}
        
        	});
        
        
        
        	onDestroy(() => {
        
        		// Se désabonner lors de la destruction du composant pour nettoyer
        
        		if (unsubscribe) unsubscribe();
        
        	});
        
        
        
        	const $$binding_groups = [[]];
        
        
        
        	function input_change_handler() {
        
        		selectedValue = this.__value;
        
        		$$invalidate(1, selectedValue);
        
        	}
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('store' in $$props) $$invalidate(3, store = $$props.store);
        
        		if ('options' in $$props) $$invalidate(0, options = $$props.options);
        
        	};
        
        
        
        	return [
        
        		options,
        
        		selectedValue,
        
        		updateValue,
        
        		store,
        
        		input_change_handler,
        
        		$$binding_groups
        
        	];
        
        }
        
        
        
        class Radio extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$8, create_fragment$8, safe_not_equal, { store: 3, options: 0 });
        
        	}
        
        }
        
        
        
        /* assets\components\Incrementer.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_fragment$7(ctx) {
        
        	let button;
        
        	let t;
        
        	let mounted;
        
        	let dispose;
        
        
        
        	return {
        
        		c() {
        
        			button = element("button");
        
        			t = text$2(/*label*/ ctx[0]);
        
        		},
        
        		l(nodes) {
        
        			button = claim_element(nodes, "BUTTON", {});
        
        			var button_nodes = children(button);
        
        			t = claim_text(button_nodes, /*label*/ ctx[0]);
        
        			button_nodes.forEach(detach);
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, button, anchor);
        
        			append_hydration(button, t);
        
        
        
        			if (!mounted) {
        
        				dispose = listen(button, "click", /*increment*/ ctx[1]);
        
        				mounted = true;
        
        			}
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (dirty & /*label*/ 1) set_data(t, /*label*/ ctx[0]);
        
        		},
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(button);
        
        			}
        
        
        
        			mounted = false;
        
        			dispose();
        
        		}
        
        	};
        
        }
        
        
        
        function instance$7($$self, $$props, $$invalidate) {
        
        	let { store } = $$props;
        
        	let { label = "+" } = $$props;
        
        
        
        	function increment() {
        
        		if (store) store.update(n => n + 1);
        
        	}
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('store' in $$props) $$invalidate(2, store = $$props.store);
        
        		if ('label' in $$props) $$invalidate(0, label = $$props.label);
        
        	};
        
        
        
        	return [label, increment, store];
        
        }
        
        
        
        class Incrementer extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$7, create_fragment$7, safe_not_equal, { store: 2, label: 0 });
        
        	}
        
        }
        
        
        
        /**
        
         * Lexing or parsing positional information for error reporting.
        
         * This object is immutable.
        
         */
        
        class SourceLocation {
        
          // The + prefix indicates that these fields aren't writeable
        
          // Lexer holding the input string.
        
          // Start offset, zero-based inclusive.
        
          // End offset, zero-based exclusive.
        
          constructor(lexer, start, end) {
        
            this.lexer = void 0;
        
            this.start = void 0;
        
            this.end = void 0;
        
            this.lexer = lexer;
        
            this.start = start;
        
            this.end = end;
        
          }
        
          /**
        
           * Merges two `SourceLocation`s from location providers, given they are
        
           * provided in order of appearance.
        
           * - Returns the first one's location if only the first is provided.
        
           * - Returns a merged range of the first and the last if both are provided
        
           *   and their lexers match.
        
           * - Otherwise, returns null.
        
           */
        
        
        
        
        
          static range(first, second) {
        
            if (!second) {
        
              return first && first.loc;
        
            } else if (!first || !first.loc || !second.loc || first.loc.lexer !== second.loc.lexer) {
        
              return null;
        
            } else {
        
              return new SourceLocation(first.loc.lexer, first.loc.start, second.loc.end);
        
            }
        
          }
        
        
        
        }
        
        
        
        /**
        
         * Interface required to break circular dependency between Token, Lexer, and
        
         * ParseError.
        
         */
        
        
        
        /**
        
         * The resulting token returned from `lex`.
        
         *
        
         * It consists of the token text plus some position information.
        
         * The position information is essentially a range in an input string,
        
         * but instead of referencing the bare input string, we refer to the lexer.
        
         * That way it is possible to attach extra metadata to the input string,
        
         * like for example a file name or similar.
        
         *
        
         * The position information is optional, so it is OK to construct synthetic
        
         * tokens if appropriate. Not providing available position information may
        
         * lead to degraded error reporting, though.
        
         */
        
        class Token {
        
          // don't expand the token
        
          // used in \noexpand
        
          constructor(text, // the text of this token
        
          loc) {
        
            this.text = void 0;
        
            this.loc = void 0;
        
            this.noexpand = void 0;
        
            this.treatAsRelax = void 0;
        
            this.text = text;
        
            this.loc = loc;
        
          }
        
          /**
        
           * Given a pair of tokens (this and endToken), compute a `Token` encompassing
        
           * the whole input range enclosed by these two.
        
           */
        
        
        
        
        
          range(endToken, // last token of the range, inclusive
        
          text // the text of the newly constructed token
        
          ) {
        
            return new Token(text, SourceLocation.range(this, endToken));
        
          }
        
        
        
        }
        
        
        
        /**
        
         * This is the ParseError class, which is the main error thrown by KaTeX
        
         * functions when something has gone wrong. This is used to distinguish internal
        
         * errors from errors in the expression that the user provided.
        
         *
        
         * If possible, a caller should provide a Token or ParseNode with information
        
         * about where in the source string the problem occurred.
        
         */
        
        class ParseError {
        
          // Error start position based on passed-in Token or ParseNode.
        
          // Length of affected text based on passed-in Token or ParseNode.
        
          // The underlying error message without any context added.
        
          constructor(message, // The error message
        
          token // An object providing position information
        
          ) {
        
            this.name = void 0;
        
            this.position = void 0;
        
            this.length = void 0;
        
            this.rawMessage = void 0;
        
            var error = "KaTeX parse error: " + message;
        
            var start;
        
            var end;
        
            var loc = token && token.loc;
        
        
        
            if (loc && loc.start <= loc.end) {
        
              // If we have the input and a position, make the error a bit fancier
        
              // Get the input
        
              var input = loc.lexer.input; // Prepend some information
        
        
        
              start = loc.start;
        
              end = loc.end;
        
        
        
              if (start === input.length) {
        
                error += " at end of input: ";
        
              } else {
        
                error += " at position " + (start + 1) + ": ";
        
              } // Underline token in question using combining underscores
        
        
        
        
        
              var underlined = input.slice(start, end).replace(/[^]/g, "$&\u0332"); // Extract some context from the input and add it to the error
        
        
        
              var left;
        
        
        
              if (start > 15) {
        
                left = "…" + input.slice(start - 15, start);
        
              } else {
        
                left = input.slice(0, start);
        
              }
        
        
        
              var right;
        
        
        
              if (end + 15 < input.length) {
        
                right = input.slice(end, end + 15) + "…";
        
              } else {
        
                right = input.slice(end);
        
              }
        
        
        
              error += left + underlined + right;
        
            } // Some hackery to make ParseError a prototype of Error
        
            // See http://stackoverflow.com/a/8460753
        
            // $FlowFixMe
        
        
        
        
        
            var self = new Error(error);
        
            self.name = "ParseError"; // $FlowFixMe
        
        
        
            self.__proto__ = ParseError.prototype;
        
            self.position = start;
        
        
        
            if (start != null && end != null) {
        
              self.length = end - start;
        
            }
        
        
        
            self.rawMessage = message;
        
            return self;
        
          }
        
        
        
        } // $FlowFixMe More hackery
        
        
        
        
        
        ParseError.prototype.__proto__ = Error.prototype;
        
        
        
        /**
        
         * This file contains a list of utility functions which are useful in other
        
         * files.
        
         */
        
        
        
        /**
        
         * Return whether an element is contained in a list
        
         */
        
        var contains = function contains(list, elem) {
        
          return list.indexOf(elem) !== -1;
        
        };
        
        /**
        
         * Provide a default value if a setting is undefined
        
         * NOTE: Couldn't use `T` as the output type due to facebook/flow#5022.
        
         */
        
        
        
        
        
        var deflt = function deflt(setting, defaultIfUndefined) {
        
          return setting === undefined ? defaultIfUndefined : setting;
        
        }; // hyphenate and escape adapted from Facebook's React under Apache 2 license
        
        
        
        
        
        var uppercase = /([A-Z])/g;
        
        
        
        var hyphenate = function hyphenate(str) {
        
          return str.replace(uppercase, "-$1").toLowerCase();
        
        };
        
        
        
        var ESCAPE_LOOKUP = {
        
          "&": "&amp;",
        
          ">": "&gt;",
        
          "<": "&lt;",
        
          "\"": "&quot;",
        
          "'": "&#x27;"
        
        };
        
        var ESCAPE_REGEX = /[&><"']/g;
        
        /**
        
         * Escapes text to prevent scripting attacks.
        
         */
        
        
        
        function escape(text) {
        
          return String(text).replace(ESCAPE_REGEX, match => ESCAPE_LOOKUP[match]);
        
        }
        
        /**
        
         * Sometimes we want to pull out the innermost element of a group. In most
        
         * cases, this will just be the group itself, but when ordgroups and colors have
        
         * a single element, we want to pull that out.
        
         */
        
        
        
        
        
        var getBaseElem = function getBaseElem(group) {
        
          if (group.type === "ordgroup") {
        
            if (group.body.length === 1) {
        
              return getBaseElem(group.body[0]);
        
            } else {
        
              return group;
        
            }
        
          } else if (group.type === "color") {
        
            if (group.body.length === 1) {
        
              return getBaseElem(group.body[0]);
        
            } else {
        
              return group;
        
            }
        
          } else if (group.type === "font") {
        
            return getBaseElem(group.body);
        
          } else {
        
            return group;
        
          }
        
        };
        
        /**
        
         * TeXbook algorithms often reference "character boxes", which are simply groups
        
         * with a single character in them. To decide if something is a character box,
        
         * we find its innermost group, and see if it is a single character.
        
         */
        
        
        
        
        
        var isCharacterBox = function isCharacterBox(group) {
        
          var baseElem = getBaseElem(group); // These are all they types of groups which hold single characters
        
        
        
          return baseElem.type === "mathord" || baseElem.type === "textord" || baseElem.type === "atom";
        
        };
        
        
        
        var assert = function assert(value) {
        
          if (!value) {
        
            throw new Error('Expected non-null, but got ' + String(value));
        
          }
        
        
        
          return value;
        
        };
        
        /**
        
         * Return the protocol of a URL, or "_relative" if the URL does not specify a
        
         * protocol (and thus is relative).
        
         */
        
        
        
        var protocolFromUrl = function protocolFromUrl(url) {
        
          var protocol = /^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(url);
        
          return protocol != null ? protocol[1] : "_relative";
        
        };
        
        var utils = {
        
          contains,
        
          deflt,
        
          escape,
        
          hyphenate,
        
          getBaseElem,
        
          isCharacterBox,
        
          protocolFromUrl
        
        };
        
        
        
        /* eslint no-console:0 */
        
        // TODO: automatically generate documentation
        
        // TODO: check all properties on Settings exist
        
        // TODO: check the type of a property on Settings matches
        
        var SETTINGS_SCHEMA = {
        
          displayMode: {
        
            type: "boolean",
        
            description: "Render math in display mode, which puts the math in " + "display style (so \\int and \\sum are large, for example), and " + "centers the math on the page on its own line.",
        
            cli: "-d, --display-mode"
        
          },
        
          output: {
        
            type: {
        
              enum: ["htmlAndMathml", "html", "mathml"]
        
            },
        
            description: "Determines the markup language of the output.",
        
            cli: "-F, --format <type>"
        
          },
        
          leqno: {
        
            type: "boolean",
        
            description: "Render display math in leqno style (left-justified tags)."
        
          },
        
          fleqn: {
        
            type: "boolean",
        
            description: "Render display math flush left."
        
          },
        
          throwOnError: {
        
            type: "boolean",
        
            default: true,
        
            cli: "-t, --no-throw-on-error",
        
            cliDescription: "Render errors (in the color given by --error-color) ins" + "tead of throwing a ParseError exception when encountering an error."
        
          },
        
          errorColor: {
        
            type: "string",
        
            default: "#cc0000",
        
            cli: "-c, --error-color <color>",
        
            cliDescription: "A color string given in the format 'rgb' or 'rrggbb' " + "(no #). This option determines the color of errors rendered by the " + "-t option.",
        
            cliProcessor: color => "#" + color
        
          },
        
          macros: {
        
            type: "object",
        
            cli: "-m, --macro <def>",
        
            cliDescription: "Define custom macro of the form '\\foo:expansion' (use " + "multiple -m arguments for multiple macros).",
        
            cliDefault: [],
        
            cliProcessor: (def, defs) => {
        
              defs.push(def);
        
              return defs;
        
            }
        
          },
        
          minRuleThickness: {
        
            type: "number",
        
            description: "Specifies a minimum thickness, in ems, for fraction lines," + " `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, " + "`\\hdashline`, `\\underline`, `\\overline`, and the borders of " + "`\\fbox`, `\\boxed`, and `\\fcolorbox`.",
        
            processor: t => Math.max(0, t),
        
            cli: "--min-rule-thickness <size>",
        
            cliProcessor: parseFloat
        
          },
        
          colorIsTextColor: {
        
            type: "boolean",
        
            description: "Makes \\color behave like LaTeX's 2-argument \\textcolor, " + "instead of LaTeX's one-argument \\color mode change.",
        
            cli: "-b, --color-is-text-color"
        
          },
        
          strict: {
        
            type: [{
        
              enum: ["warn", "ignore", "error"]
        
            }, "boolean", "function"],
        
            description: "Turn on strict / LaTeX faithfulness mode, which throws an " + "error if the input uses features that are not supported by LaTeX.",
        
            cli: "-S, --strict",
        
            cliDefault: false
        
          },
        
          trust: {
        
            type: ["boolean", "function"],
        
            description: "Trust the input, enabling all HTML features such as \\url.",
        
            cli: "-T, --trust"
        
          },
        
          maxSize: {
        
            type: "number",
        
            default: Infinity,
        
            description: "If non-zero, all user-specified sizes, e.g. in " + "\\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, " + "elements and spaces can be arbitrarily large",
        
            processor: s => Math.max(0, s),
        
            cli: "-s, --max-size <n>",
        
            cliProcessor: parseInt
        
          },
        
          maxExpand: {
        
            type: "number",
        
            default: 1000,
        
            description: "Limit the number of macro expansions to the specified " + "number, to prevent e.g. infinite macro loops. If set to Infinity, " + "the macro expander will try to fully expand as in LaTeX.",
        
            processor: n => Math.max(0, n),
        
            cli: "-e, --max-expand <n>",
        
            cliProcessor: n => n === "Infinity" ? Infinity : parseInt(n)
        
          },
        
          globalGroup: {
        
            type: "boolean",
        
            cli: false
        
          }
        
        };
        
        
        
        function getDefaultValue(schema) {
        
          if (schema.default) {
        
            return schema.default;
        
          }
        
        
        
          var type = schema.type;
        
          var defaultType = Array.isArray(type) ? type[0] : type;
        
        
        
          if (typeof defaultType !== 'string') {
        
            return defaultType.enum[0];
        
          }
        
        
        
          switch (defaultType) {
        
            case 'boolean':
        
              return false;
        
        
        
            case 'string':
        
              return '';
        
        
        
            case 'number':
        
              return 0;
        
        
        
            case 'object':
        
              return {};
        
          }
        
        }
        
        /**
        
         * The main Settings object
        
         *
        
         * The current options stored are:
        
         *  - displayMode: Whether the expression should be typeset as inline math
        
         *                 (false, the default), meaning that the math starts in
        
         *                 \textstyle and is placed in an inline-block); or as display
        
         *                 math (true), meaning that the math starts in \displaystyle
        
         *                 and is placed in a block with vertical margin.
        
         */
        
        
        
        
        
        class Settings {
        
          constructor(options) {
        
            this.displayMode = void 0;
        
            this.output = void 0;
        
            this.leqno = void 0;
        
            this.fleqn = void 0;
        
            this.throwOnError = void 0;
        
            this.errorColor = void 0;
        
            this.macros = void 0;
        
            this.minRuleThickness = void 0;
        
            this.colorIsTextColor = void 0;
        
            this.strict = void 0;
        
            this.trust = void 0;
        
            this.maxSize = void 0;
        
            this.maxExpand = void 0;
        
            this.globalGroup = void 0;
        
            // allow null options
        
            options = options || {};
        
        
        
            for (var prop in SETTINGS_SCHEMA) {
        
              if (SETTINGS_SCHEMA.hasOwnProperty(prop)) {
        
                // $FlowFixMe
        
                var schema = SETTINGS_SCHEMA[prop]; // TODO: validate options
        
                // $FlowFixMe
        
        
        
                this[prop] = options[prop] !== undefined ? schema.processor ? schema.processor(options[prop]) : options[prop] : getDefaultValue(schema);
        
              }
        
            }
        
          }
        
          /**
        
           * Report nonstrict (non-LaTeX-compatible) input.
        
           * Can safely not be called if `this.strict` is false in JavaScript.
        
           */
        
        
        
        
        
          reportNonstrict(errorCode, errorMsg, token) {
        
            var strict = this.strict;
        
        
        
            if (typeof strict === "function") {
        
              // Allow return value of strict function to be boolean or string
        
              // (or null/undefined, meaning no further processing).
        
              strict = strict(errorCode, errorMsg, token);
        
            }
        
        
        
            if (!strict || strict === "ignore") {
        
              return;
        
            } else if (strict === true || strict === "error") {
        
              throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': " + (errorMsg + " [" + errorCode + "]"), token);
        
            } else if (strict === "warn") {
        
              typeof console !== "undefined" && console.warn("LaTeX-incompatible input and strict mode is set to 'warn': " + (errorMsg + " [" + errorCode + "]"));
        
            } else {
        
              // won't happen in type-safe code
        
              typeof console !== "undefined" && console.warn("LaTeX-incompatible input and strict mode is set to " + ("unrecognized '" + strict + "': " + errorMsg + " [" + errorCode + "]"));
        
            }
        
          }
        
          /**
        
           * Check whether to apply strict (LaTeX-adhering) behavior for unusual
        
           * input (like `\\`).  Unlike `nonstrict`, will not throw an error;
        
           * instead, "error" translates to a return value of `true`, while "ignore"
        
           * translates to a return value of `false`.  May still print a warning:
        
           * "warn" prints a warning and returns `false`.
        
           * This is for the second category of `errorCode`s listed in the README.
        
           */
        
        
        
        
        
          useStrictBehavior(errorCode, errorMsg, token) {
        
            var strict = this.strict;
        
        
        
            if (typeof strict === "function") {
        
              // Allow return value of strict function to be boolean or string
        
              // (or null/undefined, meaning no further processing).
        
              // But catch any exceptions thrown by function, treating them
        
              // like "error".
        
              try {
        
                strict = strict(errorCode, errorMsg, token);
        
              } catch (error) {
        
                strict = "error";
        
              }
        
            }
        
        
        
            if (!strict || strict === "ignore") {
        
              return false;
        
            } else if (strict === true || strict === "error") {
        
              return true;
        
            } else if (strict === "warn") {
        
              typeof console !== "undefined" && console.warn("LaTeX-incompatible input and strict mode is set to 'warn': " + (errorMsg + " [" + errorCode + "]"));
        
              return false;
        
            } else {
        
              // won't happen in type-safe code
        
              typeof console !== "undefined" && console.warn("LaTeX-incompatible input and strict mode is set to " + ("unrecognized '" + strict + "': " + errorMsg + " [" + errorCode + "]"));
        
              return false;
        
            }
        
          }
        
          /**
        
           * Check whether to test potentially dangerous input, and return
        
           * `true` (trusted) or `false` (untrusted).  The sole argument `context`
        
           * should be an object with `command` field specifying the relevant LaTeX
        
           * command (as a string starting with `\`), and any other arguments, etc.
        
           * If `context` has a `url` field, a `protocol` field will automatically
        
           * get added by this function (changing the specified object).
        
           */
        
        
        
        
        
          isTrusted(context) {
        
            if (context.url && !context.protocol) {
        
              context.protocol = utils.protocolFromUrl(context.url);
        
            }
        
        
        
            var trust = typeof this.trust === "function" ? this.trust(context) : this.trust;
        
            return Boolean(trust);
        
          }
        
        
        
        }
        
        
        
        /**
        
         * This file contains information and classes for the various kinds of styles
        
         * used in TeX. It provides a generic `Style` class, which holds information
        
         * about a specific style. It then provides instances of all the different kinds
        
         * of styles possible, and provides functions to move between them and get
        
         * information about them.
        
         */
        
        
        
        /**
        
         * The main style class. Contains a unique id for the style, a size (which is
        
         * the same for cramped and uncramped version of a style), and a cramped flag.
        
         */
        
        class Style {
        
          constructor(id, size, cramped) {
        
            this.id = void 0;
        
            this.size = void 0;
        
            this.cramped = void 0;
        
            this.id = id;
        
            this.size = size;
        
            this.cramped = cramped;
        
          }
        
          /**
        
           * Get the style of a superscript given a base in the current style.
        
           */
        
        
        
        
        
          sup() {
        
            return styles[sup[this.id]];
        
          }
        
          /**
        
           * Get the style of a subscript given a base in the current style.
        
           */
        
        
        
        
        
          sub() {
        
            return styles[sub[this.id]];
        
          }
        
          /**
        
           * Get the style of a fraction numerator given the fraction in the current
        
           * style.
        
           */
        
        
        
        
        
          fracNum() {
        
            return styles[fracNum[this.id]];
        
          }
        
          /**
        
           * Get the style of a fraction denominator given the fraction in the current
        
           * style.
        
           */
        
        
        
        
        
          fracDen() {
        
            return styles[fracDen[this.id]];
        
          }
        
          /**
        
           * Get the cramped version of a style (in particular, cramping a cramped style
        
           * doesn't change the style).
        
           */
        
        
        
        
        
          cramp() {
        
            return styles[cramp[this.id]];
        
          }
        
          /**
        
           * Get a text or display version of this style.
        
           */
        
        
        
        
        
          text() {
        
            return styles[text$1[this.id]];
        
          }
        
          /**
        
           * Return true if this style is tightly spaced (scriptstyle/scriptscriptstyle)
        
           */
        
        
        
        
        
          isTight() {
        
            return this.size >= 2;
        
          }
        
        
        
        } // Export an interface for type checking, but don't expose the implementation.
        
        // This way, no more styles can be generated.
        
        
        
        
        
        // IDs of the different styles
        
        var D = 0;
        
        var Dc = 1;
        
        var T = 2;
        
        var Tc = 3;
        
        var S = 4;
        
        var Sc = 5;
        
        var SS = 6;
        
        var SSc = 7; // Instances of the different styles
        
        
        
        var styles = [new Style(D, 0, false), new Style(Dc, 0, true), new Style(T, 1, false), new Style(Tc, 1, true), new Style(S, 2, false), new Style(Sc, 2, true), new Style(SS, 3, false), new Style(SSc, 3, true)]; // Lookup tables for switching from one style to another
        
        
        
        var sup = [S, Sc, S, Sc, SS, SSc, SS, SSc];
        
        var sub = [Sc, Sc, Sc, Sc, SSc, SSc, SSc, SSc];
        
        var fracNum = [T, Tc, S, Sc, SS, SSc, SS, SSc];
        
        var fracDen = [Tc, Tc, Sc, Sc, SSc, SSc, SSc, SSc];
        
        var cramp = [Dc, Dc, Tc, Tc, Sc, Sc, SSc, SSc];
        
        var text$1 = [D, Dc, T, Tc, T, Tc, T, Tc]; // We only export some of the styles.
        
        
        
        var Style$1 = {
        
          DISPLAY: styles[D],
        
          TEXT: styles[T],
        
          SCRIPT: styles[S],
        
          SCRIPTSCRIPT: styles[SS]
        
        };
        
        
        
        /*
        
         * This file defines the Unicode scripts and script families that we
        
         * support. To add new scripts or families, just add a new entry to the
        
         * scriptData array below. Adding scripts to the scriptData array allows
        
         * characters from that script to appear in \text{} environments.
        
         */
        
        
        
        /**
        
         * Each script or script family has a name and an array of blocks.
        
         * Each block is an array of two numbers which specify the start and
        
         * end points (inclusive) of a block of Unicode codepoints.
        
         */
        
        
        
        /**
        
         * Unicode block data for the families of scripts we support in \text{}.
        
         * Scripts only need to appear here if they do not have font metrics.
        
         */
        
        var scriptData = [{
        
          // Latin characters beyond the Latin-1 characters we have metrics for.
        
          // Needed for Czech, Hungarian and Turkish text, for example.
        
          name: 'latin',
        
          blocks: [[0x0100, 0x024f], // Latin Extended-A and Latin Extended-B
        
          [0x0300, 0x036f] // Combining Diacritical marks
        
          ]
        
        }, {
        
          // The Cyrillic script used by Russian and related languages.
        
          // A Cyrillic subset used to be supported as explicitly defined
        
          // symbols in symbols.js
        
          name: 'cyrillic',
        
          blocks: [[0x0400, 0x04ff]]
        
        }, {
        
          // Armenian
        
          name: 'armenian',
        
          blocks: [[0x0530, 0x058F]]
        
        }, {
        
          // The Brahmic scripts of South and Southeast Asia
        
          // Devanagari (0900–097F)
        
          // Bengali (0980–09FF)
        
          // Gurmukhi (0A00–0A7F)
        
          // Gujarati (0A80–0AFF)
        
          // Oriya (0B00–0B7F)
        
          // Tamil (0B80–0BFF)
        
          // Telugu (0C00–0C7F)
        
          // Kannada (0C80–0CFF)
        
          // Malayalam (0D00–0D7F)
        
          // Sinhala (0D80–0DFF)
        
          // Thai (0E00–0E7F)
        
          // Lao (0E80–0EFF)
        
          // Tibetan (0F00–0FFF)
        
          // Myanmar (1000–109F)
        
          name: 'brahmic',
        
          blocks: [[0x0900, 0x109F]]
        
        }, {
        
          name: 'georgian',
        
          blocks: [[0x10A0, 0x10ff]]
        
        }, {
        
          // Chinese and Japanese.
        
          // The "k" in cjk is for Korean, but we've separated Korean out
        
          name: "cjk",
        
          blocks: [[0x3000, 0x30FF], // CJK symbols and punctuation, Hiragana, Katakana
        
          [0x4E00, 0x9FAF], // CJK ideograms
        
          [0xFF00, 0xFF60] // Fullwidth punctuation
        
          // TODO: add halfwidth Katakana and Romanji glyphs
        
          ]
        
        }, {
        
          // Korean
        
          name: 'hangul',
        
          blocks: [[0xAC00, 0xD7AF]]
        
        }];
        
        /**
        
         * Given a codepoint, return the name of the script or script family
        
         * it is from, or null if it is not part of a known block
        
         */
        
        
        
        function scriptFromCodepoint(codepoint) {
        
          for (var i = 0; i < scriptData.length; i++) {
        
            var script = scriptData[i];
        
        
        
            for (var _i = 0; _i < script.blocks.length; _i++) {
        
              var block = script.blocks[_i];
        
        
        
              if (codepoint >= block[0] && codepoint <= block[1]) {
        
                return script.name;
        
              }
        
            }
        
          }
        
        
        
          return null;
        
        }
        
        /**
        
         * A flattened version of all the supported blocks in a single array.
        
         * This is an optimization to make supportedCodepoint() fast.
        
         */
        
        
        
        var allBlocks = [];
        
        scriptData.forEach(s => s.blocks.forEach(b => allBlocks.push(...b)));
        
        /**
        
         * Given a codepoint, return true if it falls within one of the
        
         * scripts or script families defined above and false otherwise.
        
         *
        
         * Micro benchmarks shows that this is faster than
        
         * /[\u3000-\u30FF\u4E00-\u9FAF\uFF00-\uFF60\uAC00-\uD7AF\u0900-\u109F]/.test()
        
         * in Firefox, Chrome and Node.
        
         */
        
        
        
        function supportedCodepoint(codepoint) {
        
          for (var i = 0; i < allBlocks.length; i += 2) {
        
            if (codepoint >= allBlocks[i] && codepoint <= allBlocks[i + 1]) {
        
              return true;
        
            }
        
          }
        
        
        
          return false;
        
        }
        
        
        
        /**
        
         * This file provides support to domTree.js and delimiter.js.
        
         * It's a storehouse of path geometry for SVG images.
        
         */
        
        // In all paths below, the viewBox-to-em scale is 1000:1.
        
        var hLinePad = 80; // padding above a sqrt vinculum. Prevents image cropping.
        
        // The vinculum of a \sqrt can be made thicker by a KaTeX rendering option.
        
        // Think of variable extraVinculum as two detours in the SVG path.
        
        // The detour begins at the lower left of the area labeled extraVinculum below.
        
        // The detour proceeds one extraVinculum distance up and slightly to the right,
        
        // displacing the radiused corner between surd and vinculum. The radius is
        
        // traversed as usual, then the detour resumes. It goes right, to the end of
        
        // the very long vinculum, then down one extraVinculum distance,
        
        // after which it resumes regular path geometry for the radical.
        
        
        
        /*                                                  vinculum
        
                                                           /
        
                 /▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒←extraVinculum
        
                / █████████████████████←0.04em (40 unit) std vinculum thickness
        
               / /
        
              / /
        
             / /\
        
            / / surd
        
        */
        
        
        
        var sqrtMain = function sqrtMain(extraVinculum, hLinePad) {
        
          // sqrtMain path geometry is from glyph U221A in the font KaTeX Main
        
          return "M95," + (622 + extraVinculum + hLinePad) + "\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl" + extraVinculum / 2.075 + " -" + extraVinculum + "\nc5.3,-9.3,12,-14,20,-14\nH400000v" + (40 + extraVinculum) + "H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM" + (834 + extraVinculum) + " " + hLinePad + "h400000v" + (40 + extraVinculum) + "h-400000z";
        
        };
        
        
        
        var sqrtSize1 = function sqrtSize1(extraVinculum, hLinePad) {
        
          // size1 is from glyph U221A in the font KaTeX_Size1-Regular
        
          return "M263," + (601 + extraVinculum + hLinePad) + "c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl" + extraVinculum / 2.084 + " -" + extraVinculum + "\nc4.7,-7.3,11,-11,19,-11\nH40000v" + (40 + extraVinculum) + "H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM" + (1001 + extraVinculum) + " " + hLinePad + "h400000v" + (40 + extraVinculum) + "h-400000z";
        
        };
        
        
        
        var sqrtSize2 = function sqrtSize2(extraVinculum, hLinePad) {
        
          // size2 is from glyph U221A in the font KaTeX_Size2-Regular
        
          return "M983 " + (10 + extraVinculum + hLinePad) + "\nl" + extraVinculum / 3.13 + " -" + extraVinculum + "\nc4,-6.7,10,-10,18,-10 H400000v" + (40 + extraVinculum) + "\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM" + (1001 + extraVinculum) + " " + hLinePad + "h400000v" + (40 + extraVinculum) + "h-400000z";
        
        };
        
        
        
        var sqrtSize3 = function sqrtSize3(extraVinculum, hLinePad) {
        
          // size3 is from glyph U221A in the font KaTeX_Size3-Regular
        
          return "M424," + (2398 + extraVinculum + hLinePad) + "\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl" + extraVinculum / 4.223 + " -" + extraVinculum + "c4,-6.7,10,-10,18,-10 H400000\nv" + (40 + extraVinculum) + "H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M" + (1001 + extraVinculum) + " " + hLinePad + "\nh400000v" + (40 + extraVinculum) + "h-400000z";
        
        };
        
        
        
        var sqrtSize4 = function sqrtSize4(extraVinculum, hLinePad) {
        
          // size4 is from glyph U221A in the font KaTeX_Size4-Regular
        
          return "M473," + (2713 + extraVinculum + hLinePad) + "\nc339.3,-1799.3,509.3,-2700,510,-2702 l" + extraVinculum / 5.298 + " -" + extraVinculum + "\nc3.3,-7.3,9.3,-11,18,-11 H400000v" + (40 + extraVinculum) + "H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM" + (1001 + extraVinculum) + " " + hLinePad + "h400000v" + (40 + extraVinculum) + "H1017.7z";
        
        };
        
        
        
        var phasePath = function phasePath(y) {
        
          var x = y / 2; // x coordinate at top of angle
        
        
        
          return "M400000 " + y + " H0 L" + x + " 0 l65 45 L145 " + (y - 80) + " H400000z";
        
        };
        
        
        
        var sqrtTall = function sqrtTall(extraVinculum, hLinePad, viewBoxHeight) {
        
          // sqrtTall is from glyph U23B7 in the font KaTeX_Size4-Regular
        
          // One path edge has a variable length. It runs vertically from the vinculum
        
          // to a point near (14 units) the bottom of the surd. The vinculum
        
          // is normally 40 units thick. So the length of the line in question is:
        
          var vertSegment = viewBoxHeight - 54 - hLinePad - extraVinculum;
        
          return "M702 " + (extraVinculum + hLinePad) + "H400000" + (40 + extraVinculum) + "\nH742v" + vertSegment + "l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 " + hLinePad + "H400000v" + (40 + extraVinculum) + "H742z";
        
        };
        
        
        
        var sqrtPath = function sqrtPath(size, extraVinculum, viewBoxHeight) {
        
          extraVinculum = 1000 * extraVinculum; // Convert from document ems to viewBox.
        
        
        
          var path = "";
        
        
        
          switch (size) {
        
            case "sqrtMain":
        
              path = sqrtMain(extraVinculum, hLinePad);
        
              break;
        
        
        
            case "sqrtSize1":
        
              path = sqrtSize1(extraVinculum, hLinePad);
        
              break;
        
        
        
            case "sqrtSize2":
        
              path = sqrtSize2(extraVinculum, hLinePad);
        
              break;
        
        
        
            case "sqrtSize3":
        
              path = sqrtSize3(extraVinculum, hLinePad);
        
              break;
        
        
        
            case "sqrtSize4":
        
              path = sqrtSize4(extraVinculum, hLinePad);
        
              break;
        
        
        
            case "sqrtTall":
        
              path = sqrtTall(extraVinculum, hLinePad, viewBoxHeight);
        
          }
        
        
        
          return path;
        
        };
        
        var innerPath = function innerPath(name, height) {
        
          // The inner part of stretchy tall delimiters
        
          switch (name) {
        
            case "\u239c":
        
              return "M291 0 H417 V" + height + " H291z M291 0 H417 V" + height + " H291z";
        
        
        
            case "\u2223":
        
              return "M145 0 H188 V" + height + " H145z M145 0 H188 V" + height + " H145z";
        
        
        
            case "\u2225":
        
              return "M145 0 H188 V" + height + " H145z M145 0 H188 V" + height + " H145z" + ("M367 0 H410 V" + height + " H367z M367 0 H410 V" + height + " H367z");
        
        
        
            case "\u239f":
        
              return "M457 0 H583 V" + height + " H457z M457 0 H583 V" + height + " H457z";
        
        
        
            case "\u23a2":
        
              return "M319 0 H403 V" + height + " H319z M319 0 H403 V" + height + " H319z";
        
        
        
            case "\u23a5":
        
              return "M263 0 H347 V" + height + " H263z M263 0 H347 V" + height + " H263z";
        
        
        
            case "\u23aa":
        
              return "M384 0 H504 V" + height + " H384z M384 0 H504 V" + height + " H384z";
        
        
        
            case "\u23d0":
        
              return "M312 0 H355 V" + height + " H312z M312 0 H355 V" + height + " H312z";
        
        
        
            case "\u2016":
        
              return "M257 0 H300 V" + height + " H257z M257 0 H300 V" + height + " H257z" + ("M478 0 H521 V" + height + " H478z M478 0 H521 V" + height + " H478z");
        
        
        
            default:
        
              return "";
        
          }
        
        };
        
        var path = {
        
          // The doubleleftarrow geometry is from glyph U+21D0 in the font KaTeX Main
        
          doubleleftarrow: "M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",
        
          // doublerightarrow is from glyph U+21D2 in font KaTeX Main
        
          doublerightarrow: "M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",
        
          // leftarrow is from glyph U+2190 in font KaTeX Main
        
          leftarrow: "M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",
        
          // overbrace is from glyphs U+23A9/23A8/23A7 in font KaTeX_Size4-Regular
        
          leftbrace: "M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",
        
          leftbraceunder: "M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",
        
          // overgroup is from the MnSymbol package (public domain)
        
          leftgroup: "M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",
        
          leftgroupunder: "M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",
        
          // Harpoons are from glyph U+21BD in font KaTeX Main
        
          leftharpoon: "M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",
        
          leftharpoonplus: "M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",
        
          leftharpoondown: "M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",
        
          leftharpoondownplus: "M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",
        
          // hook is from glyph U+21A9 in font KaTeX Main
        
          lefthook: "M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",
        
          leftlinesegment: "M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",
        
          leftmapsto: "M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",
        
          // tofrom is from glyph U+21C4 in font KaTeX AMS Regular
        
          leftToFrom: "M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",
        
          longequal: "M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",
        
          midbrace: "M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",
        
          midbraceunder: "M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",
        
          oiintSize1: "M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",
        
          oiintSize2: "M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",
        
          oiiintSize1: "M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",
        
          oiiintSize2: "M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",
        
          rightarrow: "M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",
        
          rightbrace: "M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",
        
          rightbraceunder: "M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",
        
          rightgroup: "M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",
        
          rightgroupunder: "M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",
        
          rightharpoon: "M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",
        
          rightharpoonplus: "M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",
        
          rightharpoondown: "M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",
        
          rightharpoondownplus: "M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",
        
          righthook: "M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",
        
          rightlinesegment: "M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",
        
          rightToFrom: "M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",
        
          // twoheadleftarrow is from glyph U+219E in font KaTeX AMS Regular
        
          twoheadleftarrow: "M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",
        
          twoheadrightarrow: "M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",
        
          // tilde1 is a modified version of a glyph from the MnSymbol package
        
          tilde1: "M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",
        
          // ditto tilde2, tilde3, & tilde4
        
          tilde2: "M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",
        
          tilde3: "M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",
        
          tilde4: "M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",
        
          // vec is from glyph U+20D7 in font KaTeX Main
        
          vec: "M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",
        
          // widehat1 is a modified version of a glyph from the MnSymbol package
        
          widehat1: "M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",
        
          // ditto widehat2, widehat3, & widehat4
        
          widehat2: "M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",
        
          widehat3: "M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",
        
          widehat4: "M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",
        
          // widecheck paths are all inverted versions of widehat
        
          widecheck1: "M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",
        
          widecheck2: "M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",
        
          widecheck3: "M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",
        
          widecheck4: "M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",
        
          // The next ten paths support reaction arrows from the mhchem package.
        
          // Arrows for \ce{<-->} are offset from xAxis by 0.22ex, per mhchem in LaTeX
        
          // baraboveleftarrow is mostly from glyph U+2190 in font KaTeX Main
        
          baraboveleftarrow: "M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",
        
          // rightarrowabovebar is mostly from glyph U+2192, KaTeX Main
        
          rightarrowabovebar: "M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",
        
          // The short left harpoon has 0.5em (i.e. 500 units) kern on the left end.
        
          // Ref from mhchem.sty: \rlap{\raisebox{-.22ex}{$\kern0.5em
        
          baraboveshortleftharpoon: "M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",
        
          rightharpoonaboveshortbar: "M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",
        
          shortbaraboveleftharpoon: "M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",
        
          shortrightharpoonabovebar: "M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"
        
        };
        
        var tallDelim = function tallDelim(label, midHeight) {
        
          switch (label) {
        
            case "lbrack":
        
              return "M403 1759 V84 H666 V0 H319 V1759 v" + midHeight + " v1759 h347 v-84\nH403z M403 1759 V0 H319 V1759 v" + midHeight + " v1759 h84z";
        
        
        
            case "rbrack":
        
              return "M347 1759 V0 H0 V84 H263 V1759 v" + midHeight + " v1759 H0 v84 H347z\nM347 1759 V0 H263 V1759 v" + midHeight + " v1759 h84z";
        
        
        
            case "vert":
        
              return "M145 15 v585 v" + midHeight + " v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v" + -midHeight + " v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v" + midHeight + " v585 h43z";
        
        
        
            case "doublevert":
        
              return "M145 15 v585 v" + midHeight + " v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v" + -midHeight + " v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v" + midHeight + " v585 h43z\nM367 15 v585 v" + midHeight + " v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v" + -midHeight + " v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M410 15 H367 v585 v" + midHeight + " v585 h43z";
        
        
        
            case "lfloor":
        
              return "M319 602 V0 H403 V602 v" + midHeight + " v1715 h263 v84 H319z\nMM319 602 V0 H403 V602 v" + midHeight + " v1715 H319z";
        
        
        
            case "rfloor":
        
              return "M319 602 V0 H403 V602 v" + midHeight + " v1799 H0 v-84 H319z\nMM319 602 V0 H403 V602 v" + midHeight + " v1715 H319z";
        
        
        
            case "lceil":
        
              return "M403 1759 V84 H666 V0 H319 V1759 v" + midHeight + " v602 h84z\nM403 1759 V0 H319 V1759 v" + midHeight + " v602 h84z";
        
        
        
            case "rceil":
        
              return "M347 1759 V0 H0 V84 H263 V1759 v" + midHeight + " v602 h84z\nM347 1759 V0 h-84 V1759 v" + midHeight + " v602 h84z";
        
        
        
            case "lparen":
        
              return "M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1\nc-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,\n-36,557 l0," + (midHeight + 84) + "c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,\n949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9\nc0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,\n-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189\nl0,-" + (midHeight + 92) + "c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,\n-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z";
        
        
        
            case "rparen":
        
              return "M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,\n63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5\nc11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0," + (midHeight + 9) + "\nc-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664\nc-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11\nc0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17\nc242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558\nl0,-" + (midHeight + 144) + "c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,\n-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z";
        
        
        
            default:
        
              // We should not ever get here.
        
              throw new Error("Unknown stretchy delimiter.");
        
          }
        
        };
        
        
        
        /**
        
         * This node represents a document fragment, which contains elements, but when
        
         * placed into the DOM doesn't have any representation itself. It only contains
        
         * children and doesn't have any DOM node properties.
        
         */
        
        class DocumentFragment {
        
          // HtmlDomNode
        
          // Never used; needed for satisfying interface.
        
          constructor(children) {
        
            this.children = void 0;
        
            this.classes = void 0;
        
            this.height = void 0;
        
            this.depth = void 0;
        
            this.maxFontSize = void 0;
        
            this.style = void 0;
        
            this.children = children;
        
            this.classes = [];
        
            this.height = 0;
        
            this.depth = 0;
        
            this.maxFontSize = 0;
        
            this.style = {};
        
          }
        
        
        
          hasClass(className) {
        
            return utils.contains(this.classes, className);
        
          }
        
          /** Convert the fragment into a node. */
        
        
        
        
        
          toNode() {
        
            var frag = document.createDocumentFragment();
        
        
        
            for (var i = 0; i < this.children.length; i++) {
        
              frag.appendChild(this.children[i].toNode());
        
            }
        
        
        
            return frag;
        
          }
        
          /** Convert the fragment into HTML markup. */
        
        
        
        
        
          toMarkup() {
        
            var markup = ""; // Simply concatenate the markup for the children together.
        
        
        
            for (var i = 0; i < this.children.length; i++) {
        
              markup += this.children[i].toMarkup();
        
            }
        
        
        
            return markup;
        
          }
        
          /**
        
           * Converts the math node into a string, similar to innerText. Applies to
        
           * MathDomNode's only.
        
           */
        
        
        
        
        
          toText() {
        
            // To avoid this, we would subclass documentFragment separately for
        
            // MathML, but polyfills for subclassing is expensive per PR 1469.
        
            // $FlowFixMe: Only works for ChildType = MathDomNode.
        
            var toText = child => child.toText();
        
        
        
            return this.children.map(toText).join("");
        
          }
        
        
        
        }
        
        
        
        // This file is GENERATED by buildMetrics.sh. DO NOT MODIFY.
        
        var fontMetricsData = {
        
          "AMS-Regular": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "65": [0, 0.68889, 0, 0, 0.72222],
        
            "66": [0, 0.68889, 0, 0, 0.66667],
        
            "67": [0, 0.68889, 0, 0, 0.72222],
        
            "68": [0, 0.68889, 0, 0, 0.72222],
        
            "69": [0, 0.68889, 0, 0, 0.66667],
        
            "70": [0, 0.68889, 0, 0, 0.61111],
        
            "71": [0, 0.68889, 0, 0, 0.77778],
        
            "72": [0, 0.68889, 0, 0, 0.77778],
        
            "73": [0, 0.68889, 0, 0, 0.38889],
        
            "74": [0.16667, 0.68889, 0, 0, 0.5],
        
            "75": [0, 0.68889, 0, 0, 0.77778],
        
            "76": [0, 0.68889, 0, 0, 0.66667],
        
            "77": [0, 0.68889, 0, 0, 0.94445],
        
            "78": [0, 0.68889, 0, 0, 0.72222],
        
            "79": [0.16667, 0.68889, 0, 0, 0.77778],
        
            "80": [0, 0.68889, 0, 0, 0.61111],
        
            "81": [0.16667, 0.68889, 0, 0, 0.77778],
        
            "82": [0, 0.68889, 0, 0, 0.72222],
        
            "83": [0, 0.68889, 0, 0, 0.55556],
        
            "84": [0, 0.68889, 0, 0, 0.66667],
        
            "85": [0, 0.68889, 0, 0, 0.72222],
        
            "86": [0, 0.68889, 0, 0, 0.72222],
        
            "87": [0, 0.68889, 0, 0, 1.0],
        
            "88": [0, 0.68889, 0, 0, 0.72222],
        
            "89": [0, 0.68889, 0, 0, 0.72222],
        
            "90": [0, 0.68889, 0, 0, 0.66667],
        
            "107": [0, 0.68889, 0, 0, 0.55556],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "165": [0, 0.675, 0.025, 0, 0.75],
        
            "174": [0.15559, 0.69224, 0, 0, 0.94666],
        
            "240": [0, 0.68889, 0, 0, 0.55556],
        
            "295": [0, 0.68889, 0, 0, 0.54028],
        
            "710": [0, 0.825, 0, 0, 2.33334],
        
            "732": [0, 0.9, 0, 0, 2.33334],
        
            "770": [0, 0.825, 0, 0, 2.33334],
        
            "771": [0, 0.9, 0, 0, 2.33334],
        
            "989": [0.08167, 0.58167, 0, 0, 0.77778],
        
            "1008": [0, 0.43056, 0.04028, 0, 0.66667],
        
            "8245": [0, 0.54986, 0, 0, 0.275],
        
            "8463": [0, 0.68889, 0, 0, 0.54028],
        
            "8487": [0, 0.68889, 0, 0, 0.72222],
        
            "8498": [0, 0.68889, 0, 0, 0.55556],
        
            "8502": [0, 0.68889, 0, 0, 0.66667],
        
            "8503": [0, 0.68889, 0, 0, 0.44445],
        
            "8504": [0, 0.68889, 0, 0, 0.66667],
        
            "8513": [0, 0.68889, 0, 0, 0.63889],
        
            "8592": [-0.03598, 0.46402, 0, 0, 0.5],
        
            "8594": [-0.03598, 0.46402, 0, 0, 0.5],
        
            "8602": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8603": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8606": [0.01354, 0.52239, 0, 0, 1.0],
        
            "8608": [0.01354, 0.52239, 0, 0, 1.0],
        
            "8610": [0.01354, 0.52239, 0, 0, 1.11111],
        
            "8611": [0.01354, 0.52239, 0, 0, 1.11111],
        
            "8619": [0, 0.54986, 0, 0, 1.0],
        
            "8620": [0, 0.54986, 0, 0, 1.0],
        
            "8621": [-0.13313, 0.37788, 0, 0, 1.38889],
        
            "8622": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8624": [0, 0.69224, 0, 0, 0.5],
        
            "8625": [0, 0.69224, 0, 0, 0.5],
        
            "8630": [0, 0.43056, 0, 0, 1.0],
        
            "8631": [0, 0.43056, 0, 0, 1.0],
        
            "8634": [0.08198, 0.58198, 0, 0, 0.77778],
        
            "8635": [0.08198, 0.58198, 0, 0, 0.77778],
        
            "8638": [0.19444, 0.69224, 0, 0, 0.41667],
        
            "8639": [0.19444, 0.69224, 0, 0, 0.41667],
        
            "8642": [0.19444, 0.69224, 0, 0, 0.41667],
        
            "8643": [0.19444, 0.69224, 0, 0, 0.41667],
        
            "8644": [0.1808, 0.675, 0, 0, 1.0],
        
            "8646": [0.1808, 0.675, 0, 0, 1.0],
        
            "8647": [0.1808, 0.675, 0, 0, 1.0],
        
            "8648": [0.19444, 0.69224, 0, 0, 0.83334],
        
            "8649": [0.1808, 0.675, 0, 0, 1.0],
        
            "8650": [0.19444, 0.69224, 0, 0, 0.83334],
        
            "8651": [0.01354, 0.52239, 0, 0, 1.0],
        
            "8652": [0.01354, 0.52239, 0, 0, 1.0],
        
            "8653": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8654": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8655": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8666": [0.13667, 0.63667, 0, 0, 1.0],
        
            "8667": [0.13667, 0.63667, 0, 0, 1.0],
        
            "8669": [-0.13313, 0.37788, 0, 0, 1.0],
        
            "8672": [-0.064, 0.437, 0, 0, 1.334],
        
            "8674": [-0.064, 0.437, 0, 0, 1.334],
        
            "8705": [0, 0.825, 0, 0, 0.5],
        
            "8708": [0, 0.68889, 0, 0, 0.55556],
        
            "8709": [0.08167, 0.58167, 0, 0, 0.77778],
        
            "8717": [0, 0.43056, 0, 0, 0.42917],
        
            "8722": [-0.03598, 0.46402, 0, 0, 0.5],
        
            "8724": [0.08198, 0.69224, 0, 0, 0.77778],
        
            "8726": [0.08167, 0.58167, 0, 0, 0.77778],
        
            "8733": [0, 0.69224, 0, 0, 0.77778],
        
            "8736": [0, 0.69224, 0, 0, 0.72222],
        
            "8737": [0, 0.69224, 0, 0, 0.72222],
        
            "8738": [0.03517, 0.52239, 0, 0, 0.72222],
        
            "8739": [0.08167, 0.58167, 0, 0, 0.22222],
        
            "8740": [0.25142, 0.74111, 0, 0, 0.27778],
        
            "8741": [0.08167, 0.58167, 0, 0, 0.38889],
        
            "8742": [0.25142, 0.74111, 0, 0, 0.5],
        
            "8756": [0, 0.69224, 0, 0, 0.66667],
        
            "8757": [0, 0.69224, 0, 0, 0.66667],
        
            "8764": [-0.13313, 0.36687, 0, 0, 0.77778],
        
            "8765": [-0.13313, 0.37788, 0, 0, 0.77778],
        
            "8769": [-0.13313, 0.36687, 0, 0, 0.77778],
        
            "8770": [-0.03625, 0.46375, 0, 0, 0.77778],
        
            "8774": [0.30274, 0.79383, 0, 0, 0.77778],
        
            "8776": [-0.01688, 0.48312, 0, 0, 0.77778],
        
            "8778": [0.08167, 0.58167, 0, 0, 0.77778],
        
            "8782": [0.06062, 0.54986, 0, 0, 0.77778],
        
            "8783": [0.06062, 0.54986, 0, 0, 0.77778],
        
            "8785": [0.08198, 0.58198, 0, 0, 0.77778],
        
            "8786": [0.08198, 0.58198, 0, 0, 0.77778],
        
            "8787": [0.08198, 0.58198, 0, 0, 0.77778],
        
            "8790": [0, 0.69224, 0, 0, 0.77778],
        
            "8791": [0.22958, 0.72958, 0, 0, 0.77778],
        
            "8796": [0.08198, 0.91667, 0, 0, 0.77778],
        
            "8806": [0.25583, 0.75583, 0, 0, 0.77778],
        
            "8807": [0.25583, 0.75583, 0, 0, 0.77778],
        
            "8808": [0.25142, 0.75726, 0, 0, 0.77778],
        
            "8809": [0.25142, 0.75726, 0, 0, 0.77778],
        
            "8812": [0.25583, 0.75583, 0, 0, 0.5],
        
            "8814": [0.20576, 0.70576, 0, 0, 0.77778],
        
            "8815": [0.20576, 0.70576, 0, 0, 0.77778],
        
            "8816": [0.30274, 0.79383, 0, 0, 0.77778],
        
            "8817": [0.30274, 0.79383, 0, 0, 0.77778],
        
            "8818": [0.22958, 0.72958, 0, 0, 0.77778],
        
            "8819": [0.22958, 0.72958, 0, 0, 0.77778],
        
            "8822": [0.1808, 0.675, 0, 0, 0.77778],
        
            "8823": [0.1808, 0.675, 0, 0, 0.77778],
        
            "8828": [0.13667, 0.63667, 0, 0, 0.77778],
        
            "8829": [0.13667, 0.63667, 0, 0, 0.77778],
        
            "8830": [0.22958, 0.72958, 0, 0, 0.77778],
        
            "8831": [0.22958, 0.72958, 0, 0, 0.77778],
        
            "8832": [0.20576, 0.70576, 0, 0, 0.77778],
        
            "8833": [0.20576, 0.70576, 0, 0, 0.77778],
        
            "8840": [0.30274, 0.79383, 0, 0, 0.77778],
        
            "8841": [0.30274, 0.79383, 0, 0, 0.77778],
        
            "8842": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "8843": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "8847": [0.03517, 0.54986, 0, 0, 0.77778],
        
            "8848": [0.03517, 0.54986, 0, 0, 0.77778],
        
            "8858": [0.08198, 0.58198, 0, 0, 0.77778],
        
            "8859": [0.08198, 0.58198, 0, 0, 0.77778],
        
            "8861": [0.08198, 0.58198, 0, 0, 0.77778],
        
            "8862": [0, 0.675, 0, 0, 0.77778],
        
            "8863": [0, 0.675, 0, 0, 0.77778],
        
            "8864": [0, 0.675, 0, 0, 0.77778],
        
            "8865": [0, 0.675, 0, 0, 0.77778],
        
            "8872": [0, 0.69224, 0, 0, 0.61111],
        
            "8873": [0, 0.69224, 0, 0, 0.72222],
        
            "8874": [0, 0.69224, 0, 0, 0.88889],
        
            "8876": [0, 0.68889, 0, 0, 0.61111],
        
            "8877": [0, 0.68889, 0, 0, 0.61111],
        
            "8878": [0, 0.68889, 0, 0, 0.72222],
        
            "8879": [0, 0.68889, 0, 0, 0.72222],
        
            "8882": [0.03517, 0.54986, 0, 0, 0.77778],
        
            "8883": [0.03517, 0.54986, 0, 0, 0.77778],
        
            "8884": [0.13667, 0.63667, 0, 0, 0.77778],
        
            "8885": [0.13667, 0.63667, 0, 0, 0.77778],
        
            "8888": [0, 0.54986, 0, 0, 1.11111],
        
            "8890": [0.19444, 0.43056, 0, 0, 0.55556],
        
            "8891": [0.19444, 0.69224, 0, 0, 0.61111],
        
            "8892": [0.19444, 0.69224, 0, 0, 0.61111],
        
            "8901": [0, 0.54986, 0, 0, 0.27778],
        
            "8903": [0.08167, 0.58167, 0, 0, 0.77778],
        
            "8905": [0.08167, 0.58167, 0, 0, 0.77778],
        
            "8906": [0.08167, 0.58167, 0, 0, 0.77778],
        
            "8907": [0, 0.69224, 0, 0, 0.77778],
        
            "8908": [0, 0.69224, 0, 0, 0.77778],
        
            "8909": [-0.03598, 0.46402, 0, 0, 0.77778],
        
            "8910": [0, 0.54986, 0, 0, 0.76042],
        
            "8911": [0, 0.54986, 0, 0, 0.76042],
        
            "8912": [0.03517, 0.54986, 0, 0, 0.77778],
        
            "8913": [0.03517, 0.54986, 0, 0, 0.77778],
        
            "8914": [0, 0.54986, 0, 0, 0.66667],
        
            "8915": [0, 0.54986, 0, 0, 0.66667],
        
            "8916": [0, 0.69224, 0, 0, 0.66667],
        
            "8918": [0.0391, 0.5391, 0, 0, 0.77778],
        
            "8919": [0.0391, 0.5391, 0, 0, 0.77778],
        
            "8920": [0.03517, 0.54986, 0, 0, 1.33334],
        
            "8921": [0.03517, 0.54986, 0, 0, 1.33334],
        
            "8922": [0.38569, 0.88569, 0, 0, 0.77778],
        
            "8923": [0.38569, 0.88569, 0, 0, 0.77778],
        
            "8926": [0.13667, 0.63667, 0, 0, 0.77778],
        
            "8927": [0.13667, 0.63667, 0, 0, 0.77778],
        
            "8928": [0.30274, 0.79383, 0, 0, 0.77778],
        
            "8929": [0.30274, 0.79383, 0, 0, 0.77778],
        
            "8934": [0.23222, 0.74111, 0, 0, 0.77778],
        
            "8935": [0.23222, 0.74111, 0, 0, 0.77778],
        
            "8936": [0.23222, 0.74111, 0, 0, 0.77778],
        
            "8937": [0.23222, 0.74111, 0, 0, 0.77778],
        
            "8938": [0.20576, 0.70576, 0, 0, 0.77778],
        
            "8939": [0.20576, 0.70576, 0, 0, 0.77778],
        
            "8940": [0.30274, 0.79383, 0, 0, 0.77778],
        
            "8941": [0.30274, 0.79383, 0, 0, 0.77778],
        
            "8994": [0.19444, 0.69224, 0, 0, 0.77778],
        
            "8995": [0.19444, 0.69224, 0, 0, 0.77778],
        
            "9416": [0.15559, 0.69224, 0, 0, 0.90222],
        
            "9484": [0, 0.69224, 0, 0, 0.5],
        
            "9488": [0, 0.69224, 0, 0, 0.5],
        
            "9492": [0, 0.37788, 0, 0, 0.5],
        
            "9496": [0, 0.37788, 0, 0, 0.5],
        
            "9585": [0.19444, 0.68889, 0, 0, 0.88889],
        
            "9586": [0.19444, 0.74111, 0, 0, 0.88889],
        
            "9632": [0, 0.675, 0, 0, 0.77778],
        
            "9633": [0, 0.675, 0, 0, 0.77778],
        
            "9650": [0, 0.54986, 0, 0, 0.72222],
        
            "9651": [0, 0.54986, 0, 0, 0.72222],
        
            "9654": [0.03517, 0.54986, 0, 0, 0.77778],
        
            "9660": [0, 0.54986, 0, 0, 0.72222],
        
            "9661": [0, 0.54986, 0, 0, 0.72222],
        
            "9664": [0.03517, 0.54986, 0, 0, 0.77778],
        
            "9674": [0.11111, 0.69224, 0, 0, 0.66667],
        
            "9733": [0.19444, 0.69224, 0, 0, 0.94445],
        
            "10003": [0, 0.69224, 0, 0, 0.83334],
        
            "10016": [0, 0.69224, 0, 0, 0.83334],
        
            "10731": [0.11111, 0.69224, 0, 0, 0.66667],
        
            "10846": [0.19444, 0.75583, 0, 0, 0.61111],
        
            "10877": [0.13667, 0.63667, 0, 0, 0.77778],
        
            "10878": [0.13667, 0.63667, 0, 0, 0.77778],
        
            "10885": [0.25583, 0.75583, 0, 0, 0.77778],
        
            "10886": [0.25583, 0.75583, 0, 0, 0.77778],
        
            "10887": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "10888": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "10889": [0.26167, 0.75726, 0, 0, 0.77778],
        
            "10890": [0.26167, 0.75726, 0, 0, 0.77778],
        
            "10891": [0.48256, 0.98256, 0, 0, 0.77778],
        
            "10892": [0.48256, 0.98256, 0, 0, 0.77778],
        
            "10901": [0.13667, 0.63667, 0, 0, 0.77778],
        
            "10902": [0.13667, 0.63667, 0, 0, 0.77778],
        
            "10933": [0.25142, 0.75726, 0, 0, 0.77778],
        
            "10934": [0.25142, 0.75726, 0, 0, 0.77778],
        
            "10935": [0.26167, 0.75726, 0, 0, 0.77778],
        
            "10936": [0.26167, 0.75726, 0, 0, 0.77778],
        
            "10937": [0.26167, 0.75726, 0, 0, 0.77778],
        
            "10938": [0.26167, 0.75726, 0, 0, 0.77778],
        
            "10949": [0.25583, 0.75583, 0, 0, 0.77778],
        
            "10950": [0.25583, 0.75583, 0, 0, 0.77778],
        
            "10955": [0.28481, 0.79383, 0, 0, 0.77778],
        
            "10956": [0.28481, 0.79383, 0, 0, 0.77778],
        
            "57350": [0.08167, 0.58167, 0, 0, 0.22222],
        
            "57351": [0.08167, 0.58167, 0, 0, 0.38889],
        
            "57352": [0.08167, 0.58167, 0, 0, 0.77778],
        
            "57353": [0, 0.43056, 0.04028, 0, 0.66667],
        
            "57356": [0.25142, 0.75726, 0, 0, 0.77778],
        
            "57357": [0.25142, 0.75726, 0, 0, 0.77778],
        
            "57358": [0.41951, 0.91951, 0, 0, 0.77778],
        
            "57359": [0.30274, 0.79383, 0, 0, 0.77778],
        
            "57360": [0.30274, 0.79383, 0, 0, 0.77778],
        
            "57361": [0.41951, 0.91951, 0, 0, 0.77778],
        
            "57366": [0.25142, 0.75726, 0, 0, 0.77778],
        
            "57367": [0.25142, 0.75726, 0, 0, 0.77778],
        
            "57368": [0.25142, 0.75726, 0, 0, 0.77778],
        
            "57369": [0.25142, 0.75726, 0, 0, 0.77778],
        
            "57370": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "57371": [0.13597, 0.63597, 0, 0, 0.77778]
        
          },
        
          "Caligraphic-Regular": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "65": [0, 0.68333, 0, 0.19445, 0.79847],
        
            "66": [0, 0.68333, 0.03041, 0.13889, 0.65681],
        
            "67": [0, 0.68333, 0.05834, 0.13889, 0.52653],
        
            "68": [0, 0.68333, 0.02778, 0.08334, 0.77139],
        
            "69": [0, 0.68333, 0.08944, 0.11111, 0.52778],
        
            "70": [0, 0.68333, 0.09931, 0.11111, 0.71875],
        
            "71": [0.09722, 0.68333, 0.0593, 0.11111, 0.59487],
        
            "72": [0, 0.68333, 0.00965, 0.11111, 0.84452],
        
            "73": [0, 0.68333, 0.07382, 0, 0.54452],
        
            "74": [0.09722, 0.68333, 0.18472, 0.16667, 0.67778],
        
            "75": [0, 0.68333, 0.01445, 0.05556, 0.76195],
        
            "76": [0, 0.68333, 0, 0.13889, 0.68972],
        
            "77": [0, 0.68333, 0, 0.13889, 1.2009],
        
            "78": [0, 0.68333, 0.14736, 0.08334, 0.82049],
        
            "79": [0, 0.68333, 0.02778, 0.11111, 0.79611],
        
            "80": [0, 0.68333, 0.08222, 0.08334, 0.69556],
        
            "81": [0.09722, 0.68333, 0, 0.11111, 0.81667],
        
            "82": [0, 0.68333, 0, 0.08334, 0.8475],
        
            "83": [0, 0.68333, 0.075, 0.13889, 0.60556],
        
            "84": [0, 0.68333, 0.25417, 0, 0.54464],
        
            "85": [0, 0.68333, 0.09931, 0.08334, 0.62583],
        
            "86": [0, 0.68333, 0.08222, 0, 0.61278],
        
            "87": [0, 0.68333, 0.08222, 0.08334, 0.98778],
        
            "88": [0, 0.68333, 0.14643, 0.13889, 0.7133],
        
            "89": [0.09722, 0.68333, 0.08222, 0.08334, 0.66834],
        
            "90": [0, 0.68333, 0.07944, 0.13889, 0.72473],
        
            "160": [0, 0, 0, 0, 0.25]
        
          },
        
          "Fraktur-Regular": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "33": [0, 0.69141, 0, 0, 0.29574],
        
            "34": [0, 0.69141, 0, 0, 0.21471],
        
            "38": [0, 0.69141, 0, 0, 0.73786],
        
            "39": [0, 0.69141, 0, 0, 0.21201],
        
            "40": [0.24982, 0.74947, 0, 0, 0.38865],
        
            "41": [0.24982, 0.74947, 0, 0, 0.38865],
        
            "42": [0, 0.62119, 0, 0, 0.27764],
        
            "43": [0.08319, 0.58283, 0, 0, 0.75623],
        
            "44": [0, 0.10803, 0, 0, 0.27764],
        
            "45": [0.08319, 0.58283, 0, 0, 0.75623],
        
            "46": [0, 0.10803, 0, 0, 0.27764],
        
            "47": [0.24982, 0.74947, 0, 0, 0.50181],
        
            "48": [0, 0.47534, 0, 0, 0.50181],
        
            "49": [0, 0.47534, 0, 0, 0.50181],
        
            "50": [0, 0.47534, 0, 0, 0.50181],
        
            "51": [0.18906, 0.47534, 0, 0, 0.50181],
        
            "52": [0.18906, 0.47534, 0, 0, 0.50181],
        
            "53": [0.18906, 0.47534, 0, 0, 0.50181],
        
            "54": [0, 0.69141, 0, 0, 0.50181],
        
            "55": [0.18906, 0.47534, 0, 0, 0.50181],
        
            "56": [0, 0.69141, 0, 0, 0.50181],
        
            "57": [0.18906, 0.47534, 0, 0, 0.50181],
        
            "58": [0, 0.47534, 0, 0, 0.21606],
        
            "59": [0.12604, 0.47534, 0, 0, 0.21606],
        
            "61": [-0.13099, 0.36866, 0, 0, 0.75623],
        
            "63": [0, 0.69141, 0, 0, 0.36245],
        
            "65": [0, 0.69141, 0, 0, 0.7176],
        
            "66": [0, 0.69141, 0, 0, 0.88397],
        
            "67": [0, 0.69141, 0, 0, 0.61254],
        
            "68": [0, 0.69141, 0, 0, 0.83158],
        
            "69": [0, 0.69141, 0, 0, 0.66278],
        
            "70": [0.12604, 0.69141, 0, 0, 0.61119],
        
            "71": [0, 0.69141, 0, 0, 0.78539],
        
            "72": [0.06302, 0.69141, 0, 0, 0.7203],
        
            "73": [0, 0.69141, 0, 0, 0.55448],
        
            "74": [0.12604, 0.69141, 0, 0, 0.55231],
        
            "75": [0, 0.69141, 0, 0, 0.66845],
        
            "76": [0, 0.69141, 0, 0, 0.66602],
        
            "77": [0, 0.69141, 0, 0, 1.04953],
        
            "78": [0, 0.69141, 0, 0, 0.83212],
        
            "79": [0, 0.69141, 0, 0, 0.82699],
        
            "80": [0.18906, 0.69141, 0, 0, 0.82753],
        
            "81": [0.03781, 0.69141, 0, 0, 0.82699],
        
            "82": [0, 0.69141, 0, 0, 0.82807],
        
            "83": [0, 0.69141, 0, 0, 0.82861],
        
            "84": [0, 0.69141, 0, 0, 0.66899],
        
            "85": [0, 0.69141, 0, 0, 0.64576],
        
            "86": [0, 0.69141, 0, 0, 0.83131],
        
            "87": [0, 0.69141, 0, 0, 1.04602],
        
            "88": [0, 0.69141, 0, 0, 0.71922],
        
            "89": [0.18906, 0.69141, 0, 0, 0.83293],
        
            "90": [0.12604, 0.69141, 0, 0, 0.60201],
        
            "91": [0.24982, 0.74947, 0, 0, 0.27764],
        
            "93": [0.24982, 0.74947, 0, 0, 0.27764],
        
            "94": [0, 0.69141, 0, 0, 0.49965],
        
            "97": [0, 0.47534, 0, 0, 0.50046],
        
            "98": [0, 0.69141, 0, 0, 0.51315],
        
            "99": [0, 0.47534, 0, 0, 0.38946],
        
            "100": [0, 0.62119, 0, 0, 0.49857],
        
            "101": [0, 0.47534, 0, 0, 0.40053],
        
            "102": [0.18906, 0.69141, 0, 0, 0.32626],
        
            "103": [0.18906, 0.47534, 0, 0, 0.5037],
        
            "104": [0.18906, 0.69141, 0, 0, 0.52126],
        
            "105": [0, 0.69141, 0, 0, 0.27899],
        
            "106": [0, 0.69141, 0, 0, 0.28088],
        
            "107": [0, 0.69141, 0, 0, 0.38946],
        
            "108": [0, 0.69141, 0, 0, 0.27953],
        
            "109": [0, 0.47534, 0, 0, 0.76676],
        
            "110": [0, 0.47534, 0, 0, 0.52666],
        
            "111": [0, 0.47534, 0, 0, 0.48885],
        
            "112": [0.18906, 0.52396, 0, 0, 0.50046],
        
            "113": [0.18906, 0.47534, 0, 0, 0.48912],
        
            "114": [0, 0.47534, 0, 0, 0.38919],
        
            "115": [0, 0.47534, 0, 0, 0.44266],
        
            "116": [0, 0.62119, 0, 0, 0.33301],
        
            "117": [0, 0.47534, 0, 0, 0.5172],
        
            "118": [0, 0.52396, 0, 0, 0.5118],
        
            "119": [0, 0.52396, 0, 0, 0.77351],
        
            "120": [0.18906, 0.47534, 0, 0, 0.38865],
        
            "121": [0.18906, 0.47534, 0, 0, 0.49884],
        
            "122": [0.18906, 0.47534, 0, 0, 0.39054],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "8216": [0, 0.69141, 0, 0, 0.21471],
        
            "8217": [0, 0.69141, 0, 0, 0.21471],
        
            "58112": [0, 0.62119, 0, 0, 0.49749],
        
            "58113": [0, 0.62119, 0, 0, 0.4983],
        
            "58114": [0.18906, 0.69141, 0, 0, 0.33328],
        
            "58115": [0.18906, 0.69141, 0, 0, 0.32923],
        
            "58116": [0.18906, 0.47534, 0, 0, 0.50343],
        
            "58117": [0, 0.69141, 0, 0, 0.33301],
        
            "58118": [0, 0.62119, 0, 0, 0.33409],
        
            "58119": [0, 0.47534, 0, 0, 0.50073]
        
          },
        
          "Main-Bold": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "33": [0, 0.69444, 0, 0, 0.35],
        
            "34": [0, 0.69444, 0, 0, 0.60278],
        
            "35": [0.19444, 0.69444, 0, 0, 0.95833],
        
            "36": [0.05556, 0.75, 0, 0, 0.575],
        
            "37": [0.05556, 0.75, 0, 0, 0.95833],
        
            "38": [0, 0.69444, 0, 0, 0.89444],
        
            "39": [0, 0.69444, 0, 0, 0.31944],
        
            "40": [0.25, 0.75, 0, 0, 0.44722],
        
            "41": [0.25, 0.75, 0, 0, 0.44722],
        
            "42": [0, 0.75, 0, 0, 0.575],
        
            "43": [0.13333, 0.63333, 0, 0, 0.89444],
        
            "44": [0.19444, 0.15556, 0, 0, 0.31944],
        
            "45": [0, 0.44444, 0, 0, 0.38333],
        
            "46": [0, 0.15556, 0, 0, 0.31944],
        
            "47": [0.25, 0.75, 0, 0, 0.575],
        
            "48": [0, 0.64444, 0, 0, 0.575],
        
            "49": [0, 0.64444, 0, 0, 0.575],
        
            "50": [0, 0.64444, 0, 0, 0.575],
        
            "51": [0, 0.64444, 0, 0, 0.575],
        
            "52": [0, 0.64444, 0, 0, 0.575],
        
            "53": [0, 0.64444, 0, 0, 0.575],
        
            "54": [0, 0.64444, 0, 0, 0.575],
        
            "55": [0, 0.64444, 0, 0, 0.575],
        
            "56": [0, 0.64444, 0, 0, 0.575],
        
            "57": [0, 0.64444, 0, 0, 0.575],
        
            "58": [0, 0.44444, 0, 0, 0.31944],
        
            "59": [0.19444, 0.44444, 0, 0, 0.31944],
        
            "60": [0.08556, 0.58556, 0, 0, 0.89444],
        
            "61": [-0.10889, 0.39111, 0, 0, 0.89444],
        
            "62": [0.08556, 0.58556, 0, 0, 0.89444],
        
            "63": [0, 0.69444, 0, 0, 0.54305],
        
            "64": [0, 0.69444, 0, 0, 0.89444],
        
            "65": [0, 0.68611, 0, 0, 0.86944],
        
            "66": [0, 0.68611, 0, 0, 0.81805],
        
            "67": [0, 0.68611, 0, 0, 0.83055],
        
            "68": [0, 0.68611, 0, 0, 0.88194],
        
            "69": [0, 0.68611, 0, 0, 0.75555],
        
            "70": [0, 0.68611, 0, 0, 0.72361],
        
            "71": [0, 0.68611, 0, 0, 0.90416],
        
            "72": [0, 0.68611, 0, 0, 0.9],
        
            "73": [0, 0.68611, 0, 0, 0.43611],
        
            "74": [0, 0.68611, 0, 0, 0.59444],
        
            "75": [0, 0.68611, 0, 0, 0.90138],
        
            "76": [0, 0.68611, 0, 0, 0.69166],
        
            "77": [0, 0.68611, 0, 0, 1.09166],
        
            "78": [0, 0.68611, 0, 0, 0.9],
        
            "79": [0, 0.68611, 0, 0, 0.86388],
        
            "80": [0, 0.68611, 0, 0, 0.78611],
        
            "81": [0.19444, 0.68611, 0, 0, 0.86388],
        
            "82": [0, 0.68611, 0, 0, 0.8625],
        
            "83": [0, 0.68611, 0, 0, 0.63889],
        
            "84": [0, 0.68611, 0, 0, 0.8],
        
            "85": [0, 0.68611, 0, 0, 0.88472],
        
            "86": [0, 0.68611, 0.01597, 0, 0.86944],
        
            "87": [0, 0.68611, 0.01597, 0, 1.18888],
        
            "88": [0, 0.68611, 0, 0, 0.86944],
        
            "89": [0, 0.68611, 0.02875, 0, 0.86944],
        
            "90": [0, 0.68611, 0, 0, 0.70277],
        
            "91": [0.25, 0.75, 0, 0, 0.31944],
        
            "92": [0.25, 0.75, 0, 0, 0.575],
        
            "93": [0.25, 0.75, 0, 0, 0.31944],
        
            "94": [0, 0.69444, 0, 0, 0.575],
        
            "95": [0.31, 0.13444, 0.03194, 0, 0.575],
        
            "97": [0, 0.44444, 0, 0, 0.55902],
        
            "98": [0, 0.69444, 0, 0, 0.63889],
        
            "99": [0, 0.44444, 0, 0, 0.51111],
        
            "100": [0, 0.69444, 0, 0, 0.63889],
        
            "101": [0, 0.44444, 0, 0, 0.52708],
        
            "102": [0, 0.69444, 0.10903, 0, 0.35139],
        
            "103": [0.19444, 0.44444, 0.01597, 0, 0.575],
        
            "104": [0, 0.69444, 0, 0, 0.63889],
        
            "105": [0, 0.69444, 0, 0, 0.31944],
        
            "106": [0.19444, 0.69444, 0, 0, 0.35139],
        
            "107": [0, 0.69444, 0, 0, 0.60694],
        
            "108": [0, 0.69444, 0, 0, 0.31944],
        
            "109": [0, 0.44444, 0, 0, 0.95833],
        
            "110": [0, 0.44444, 0, 0, 0.63889],
        
            "111": [0, 0.44444, 0, 0, 0.575],
        
            "112": [0.19444, 0.44444, 0, 0, 0.63889],
        
            "113": [0.19444, 0.44444, 0, 0, 0.60694],
        
            "114": [0, 0.44444, 0, 0, 0.47361],
        
            "115": [0, 0.44444, 0, 0, 0.45361],
        
            "116": [0, 0.63492, 0, 0, 0.44722],
        
            "117": [0, 0.44444, 0, 0, 0.63889],
        
            "118": [0, 0.44444, 0.01597, 0, 0.60694],
        
            "119": [0, 0.44444, 0.01597, 0, 0.83055],
        
            "120": [0, 0.44444, 0, 0, 0.60694],
        
            "121": [0.19444, 0.44444, 0.01597, 0, 0.60694],
        
            "122": [0, 0.44444, 0, 0, 0.51111],
        
            "123": [0.25, 0.75, 0, 0, 0.575],
        
            "124": [0.25, 0.75, 0, 0, 0.31944],
        
            "125": [0.25, 0.75, 0, 0, 0.575],
        
            "126": [0.35, 0.34444, 0, 0, 0.575],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "163": [0, 0.69444, 0, 0, 0.86853],
        
            "168": [0, 0.69444, 0, 0, 0.575],
        
            "172": [0, 0.44444, 0, 0, 0.76666],
        
            "176": [0, 0.69444, 0, 0, 0.86944],
        
            "177": [0.13333, 0.63333, 0, 0, 0.89444],
        
            "184": [0.17014, 0, 0, 0, 0.51111],
        
            "198": [0, 0.68611, 0, 0, 1.04166],
        
            "215": [0.13333, 0.63333, 0, 0, 0.89444],
        
            "216": [0.04861, 0.73472, 0, 0, 0.89444],
        
            "223": [0, 0.69444, 0, 0, 0.59722],
        
            "230": [0, 0.44444, 0, 0, 0.83055],
        
            "247": [0.13333, 0.63333, 0, 0, 0.89444],
        
            "248": [0.09722, 0.54167, 0, 0, 0.575],
        
            "305": [0, 0.44444, 0, 0, 0.31944],
        
            "338": [0, 0.68611, 0, 0, 1.16944],
        
            "339": [0, 0.44444, 0, 0, 0.89444],
        
            "567": [0.19444, 0.44444, 0, 0, 0.35139],
        
            "710": [0, 0.69444, 0, 0, 0.575],
        
            "711": [0, 0.63194, 0, 0, 0.575],
        
            "713": [0, 0.59611, 0, 0, 0.575],
        
            "714": [0, 0.69444, 0, 0, 0.575],
        
            "715": [0, 0.69444, 0, 0, 0.575],
        
            "728": [0, 0.69444, 0, 0, 0.575],
        
            "729": [0, 0.69444, 0, 0, 0.31944],
        
            "730": [0, 0.69444, 0, 0, 0.86944],
        
            "732": [0, 0.69444, 0, 0, 0.575],
        
            "733": [0, 0.69444, 0, 0, 0.575],
        
            "915": [0, 0.68611, 0, 0, 0.69166],
        
            "916": [0, 0.68611, 0, 0, 0.95833],
        
            "920": [0, 0.68611, 0, 0, 0.89444],
        
            "923": [0, 0.68611, 0, 0, 0.80555],
        
            "926": [0, 0.68611, 0, 0, 0.76666],
        
            "928": [0, 0.68611, 0, 0, 0.9],
        
            "931": [0, 0.68611, 0, 0, 0.83055],
        
            "933": [0, 0.68611, 0, 0, 0.89444],
        
            "934": [0, 0.68611, 0, 0, 0.83055],
        
            "936": [0, 0.68611, 0, 0, 0.89444],
        
            "937": [0, 0.68611, 0, 0, 0.83055],
        
            "8211": [0, 0.44444, 0.03194, 0, 0.575],
        
            "8212": [0, 0.44444, 0.03194, 0, 1.14999],
        
            "8216": [0, 0.69444, 0, 0, 0.31944],
        
            "8217": [0, 0.69444, 0, 0, 0.31944],
        
            "8220": [0, 0.69444, 0, 0, 0.60278],
        
            "8221": [0, 0.69444, 0, 0, 0.60278],
        
            "8224": [0.19444, 0.69444, 0, 0, 0.51111],
        
            "8225": [0.19444, 0.69444, 0, 0, 0.51111],
        
            "8242": [0, 0.55556, 0, 0, 0.34444],
        
            "8407": [0, 0.72444, 0.15486, 0, 0.575],
        
            "8463": [0, 0.69444, 0, 0, 0.66759],
        
            "8465": [0, 0.69444, 0, 0, 0.83055],
        
            "8467": [0, 0.69444, 0, 0, 0.47361],
        
            "8472": [0.19444, 0.44444, 0, 0, 0.74027],
        
            "8476": [0, 0.69444, 0, 0, 0.83055],
        
            "8501": [0, 0.69444, 0, 0, 0.70277],
        
            "8592": [-0.10889, 0.39111, 0, 0, 1.14999],
        
            "8593": [0.19444, 0.69444, 0, 0, 0.575],
        
            "8594": [-0.10889, 0.39111, 0, 0, 1.14999],
        
            "8595": [0.19444, 0.69444, 0, 0, 0.575],
        
            "8596": [-0.10889, 0.39111, 0, 0, 1.14999],
        
            "8597": [0.25, 0.75, 0, 0, 0.575],
        
            "8598": [0.19444, 0.69444, 0, 0, 1.14999],
        
            "8599": [0.19444, 0.69444, 0, 0, 1.14999],
        
            "8600": [0.19444, 0.69444, 0, 0, 1.14999],
        
            "8601": [0.19444, 0.69444, 0, 0, 1.14999],
        
            "8636": [-0.10889, 0.39111, 0, 0, 1.14999],
        
            "8637": [-0.10889, 0.39111, 0, 0, 1.14999],
        
            "8640": [-0.10889, 0.39111, 0, 0, 1.14999],
        
            "8641": [-0.10889, 0.39111, 0, 0, 1.14999],
        
            "8656": [-0.10889, 0.39111, 0, 0, 1.14999],
        
            "8657": [0.19444, 0.69444, 0, 0, 0.70277],
        
            "8658": [-0.10889, 0.39111, 0, 0, 1.14999],
        
            "8659": [0.19444, 0.69444, 0, 0, 0.70277],
        
            "8660": [-0.10889, 0.39111, 0, 0, 1.14999],
        
            "8661": [0.25, 0.75, 0, 0, 0.70277],
        
            "8704": [0, 0.69444, 0, 0, 0.63889],
        
            "8706": [0, 0.69444, 0.06389, 0, 0.62847],
        
            "8707": [0, 0.69444, 0, 0, 0.63889],
        
            "8709": [0.05556, 0.75, 0, 0, 0.575],
        
            "8711": [0, 0.68611, 0, 0, 0.95833],
        
            "8712": [0.08556, 0.58556, 0, 0, 0.76666],
        
            "8715": [0.08556, 0.58556, 0, 0, 0.76666],
        
            "8722": [0.13333, 0.63333, 0, 0, 0.89444],
        
            "8723": [0.13333, 0.63333, 0, 0, 0.89444],
        
            "8725": [0.25, 0.75, 0, 0, 0.575],
        
            "8726": [0.25, 0.75, 0, 0, 0.575],
        
            "8727": [-0.02778, 0.47222, 0, 0, 0.575],
        
            "8728": [-0.02639, 0.47361, 0, 0, 0.575],
        
            "8729": [-0.02639, 0.47361, 0, 0, 0.575],
        
            "8730": [0.18, 0.82, 0, 0, 0.95833],
        
            "8733": [0, 0.44444, 0, 0, 0.89444],
        
            "8734": [0, 0.44444, 0, 0, 1.14999],
        
            "8736": [0, 0.69224, 0, 0, 0.72222],
        
            "8739": [0.25, 0.75, 0, 0, 0.31944],
        
            "8741": [0.25, 0.75, 0, 0, 0.575],
        
            "8743": [0, 0.55556, 0, 0, 0.76666],
        
            "8744": [0, 0.55556, 0, 0, 0.76666],
        
            "8745": [0, 0.55556, 0, 0, 0.76666],
        
            "8746": [0, 0.55556, 0, 0, 0.76666],
        
            "8747": [0.19444, 0.69444, 0.12778, 0, 0.56875],
        
            "8764": [-0.10889, 0.39111, 0, 0, 0.89444],
        
            "8768": [0.19444, 0.69444, 0, 0, 0.31944],
        
            "8771": [0.00222, 0.50222, 0, 0, 0.89444],
        
            "8773": [0.027, 0.638, 0, 0, 0.894],
        
            "8776": [0.02444, 0.52444, 0, 0, 0.89444],
        
            "8781": [0.00222, 0.50222, 0, 0, 0.89444],
        
            "8801": [0.00222, 0.50222, 0, 0, 0.89444],
        
            "8804": [0.19667, 0.69667, 0, 0, 0.89444],
        
            "8805": [0.19667, 0.69667, 0, 0, 0.89444],
        
            "8810": [0.08556, 0.58556, 0, 0, 1.14999],
        
            "8811": [0.08556, 0.58556, 0, 0, 1.14999],
        
            "8826": [0.08556, 0.58556, 0, 0, 0.89444],
        
            "8827": [0.08556, 0.58556, 0, 0, 0.89444],
        
            "8834": [0.08556, 0.58556, 0, 0, 0.89444],
        
            "8835": [0.08556, 0.58556, 0, 0, 0.89444],
        
            "8838": [0.19667, 0.69667, 0, 0, 0.89444],
        
            "8839": [0.19667, 0.69667, 0, 0, 0.89444],
        
            "8846": [0, 0.55556, 0, 0, 0.76666],
        
            "8849": [0.19667, 0.69667, 0, 0, 0.89444],
        
            "8850": [0.19667, 0.69667, 0, 0, 0.89444],
        
            "8851": [0, 0.55556, 0, 0, 0.76666],
        
            "8852": [0, 0.55556, 0, 0, 0.76666],
        
            "8853": [0.13333, 0.63333, 0, 0, 0.89444],
        
            "8854": [0.13333, 0.63333, 0, 0, 0.89444],
        
            "8855": [0.13333, 0.63333, 0, 0, 0.89444],
        
            "8856": [0.13333, 0.63333, 0, 0, 0.89444],
        
            "8857": [0.13333, 0.63333, 0, 0, 0.89444],
        
            "8866": [0, 0.69444, 0, 0, 0.70277],
        
            "8867": [0, 0.69444, 0, 0, 0.70277],
        
            "8868": [0, 0.69444, 0, 0, 0.89444],
        
            "8869": [0, 0.69444, 0, 0, 0.89444],
        
            "8900": [-0.02639, 0.47361, 0, 0, 0.575],
        
            "8901": [-0.02639, 0.47361, 0, 0, 0.31944],
        
            "8902": [-0.02778, 0.47222, 0, 0, 0.575],
        
            "8968": [0.25, 0.75, 0, 0, 0.51111],
        
            "8969": [0.25, 0.75, 0, 0, 0.51111],
        
            "8970": [0.25, 0.75, 0, 0, 0.51111],
        
            "8971": [0.25, 0.75, 0, 0, 0.51111],
        
            "8994": [-0.13889, 0.36111, 0, 0, 1.14999],
        
            "8995": [-0.13889, 0.36111, 0, 0, 1.14999],
        
            "9651": [0.19444, 0.69444, 0, 0, 1.02222],
        
            "9657": [-0.02778, 0.47222, 0, 0, 0.575],
        
            "9661": [0.19444, 0.69444, 0, 0, 1.02222],
        
            "9667": [-0.02778, 0.47222, 0, 0, 0.575],
        
            "9711": [0.19444, 0.69444, 0, 0, 1.14999],
        
            "9824": [0.12963, 0.69444, 0, 0, 0.89444],
        
            "9825": [0.12963, 0.69444, 0, 0, 0.89444],
        
            "9826": [0.12963, 0.69444, 0, 0, 0.89444],
        
            "9827": [0.12963, 0.69444, 0, 0, 0.89444],
        
            "9837": [0, 0.75, 0, 0, 0.44722],
        
            "9838": [0.19444, 0.69444, 0, 0, 0.44722],
        
            "9839": [0.19444, 0.69444, 0, 0, 0.44722],
        
            "10216": [0.25, 0.75, 0, 0, 0.44722],
        
            "10217": [0.25, 0.75, 0, 0, 0.44722],
        
            "10815": [0, 0.68611, 0, 0, 0.9],
        
            "10927": [0.19667, 0.69667, 0, 0, 0.89444],
        
            "10928": [0.19667, 0.69667, 0, 0, 0.89444],
        
            "57376": [0.19444, 0.69444, 0, 0, 0]
        
          },
        
          "Main-BoldItalic": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "33": [0, 0.69444, 0.11417, 0, 0.38611],
        
            "34": [0, 0.69444, 0.07939, 0, 0.62055],
        
            "35": [0.19444, 0.69444, 0.06833, 0, 0.94444],
        
            "37": [0.05556, 0.75, 0.12861, 0, 0.94444],
        
            "38": [0, 0.69444, 0.08528, 0, 0.88555],
        
            "39": [0, 0.69444, 0.12945, 0, 0.35555],
        
            "40": [0.25, 0.75, 0.15806, 0, 0.47333],
        
            "41": [0.25, 0.75, 0.03306, 0, 0.47333],
        
            "42": [0, 0.75, 0.14333, 0, 0.59111],
        
            "43": [0.10333, 0.60333, 0.03306, 0, 0.88555],
        
            "44": [0.19444, 0.14722, 0, 0, 0.35555],
        
            "45": [0, 0.44444, 0.02611, 0, 0.41444],
        
            "46": [0, 0.14722, 0, 0, 0.35555],
        
            "47": [0.25, 0.75, 0.15806, 0, 0.59111],
        
            "48": [0, 0.64444, 0.13167, 0, 0.59111],
        
            "49": [0, 0.64444, 0.13167, 0, 0.59111],
        
            "50": [0, 0.64444, 0.13167, 0, 0.59111],
        
            "51": [0, 0.64444, 0.13167, 0, 0.59111],
        
            "52": [0.19444, 0.64444, 0.13167, 0, 0.59111],
        
            "53": [0, 0.64444, 0.13167, 0, 0.59111],
        
            "54": [0, 0.64444, 0.13167, 0, 0.59111],
        
            "55": [0.19444, 0.64444, 0.13167, 0, 0.59111],
        
            "56": [0, 0.64444, 0.13167, 0, 0.59111],
        
            "57": [0, 0.64444, 0.13167, 0, 0.59111],
        
            "58": [0, 0.44444, 0.06695, 0, 0.35555],
        
            "59": [0.19444, 0.44444, 0.06695, 0, 0.35555],
        
            "61": [-0.10889, 0.39111, 0.06833, 0, 0.88555],
        
            "63": [0, 0.69444, 0.11472, 0, 0.59111],
        
            "64": [0, 0.69444, 0.09208, 0, 0.88555],
        
            "65": [0, 0.68611, 0, 0, 0.86555],
        
            "66": [0, 0.68611, 0.0992, 0, 0.81666],
        
            "67": [0, 0.68611, 0.14208, 0, 0.82666],
        
            "68": [0, 0.68611, 0.09062, 0, 0.87555],
        
            "69": [0, 0.68611, 0.11431, 0, 0.75666],
        
            "70": [0, 0.68611, 0.12903, 0, 0.72722],
        
            "71": [0, 0.68611, 0.07347, 0, 0.89527],
        
            "72": [0, 0.68611, 0.17208, 0, 0.8961],
        
            "73": [0, 0.68611, 0.15681, 0, 0.47166],
        
            "74": [0, 0.68611, 0.145, 0, 0.61055],
        
            "75": [0, 0.68611, 0.14208, 0, 0.89499],
        
            "76": [0, 0.68611, 0, 0, 0.69777],
        
            "77": [0, 0.68611, 0.17208, 0, 1.07277],
        
            "78": [0, 0.68611, 0.17208, 0, 0.8961],
        
            "79": [0, 0.68611, 0.09062, 0, 0.85499],
        
            "80": [0, 0.68611, 0.0992, 0, 0.78721],
        
            "81": [0.19444, 0.68611, 0.09062, 0, 0.85499],
        
            "82": [0, 0.68611, 0.02559, 0, 0.85944],
        
            "83": [0, 0.68611, 0.11264, 0, 0.64999],
        
            "84": [0, 0.68611, 0.12903, 0, 0.7961],
        
            "85": [0, 0.68611, 0.17208, 0, 0.88083],
        
            "86": [0, 0.68611, 0.18625, 0, 0.86555],
        
            "87": [0, 0.68611, 0.18625, 0, 1.15999],
        
            "88": [0, 0.68611, 0.15681, 0, 0.86555],
        
            "89": [0, 0.68611, 0.19803, 0, 0.86555],
        
            "90": [0, 0.68611, 0.14208, 0, 0.70888],
        
            "91": [0.25, 0.75, 0.1875, 0, 0.35611],
        
            "93": [0.25, 0.75, 0.09972, 0, 0.35611],
        
            "94": [0, 0.69444, 0.06709, 0, 0.59111],
        
            "95": [0.31, 0.13444, 0.09811, 0, 0.59111],
        
            "97": [0, 0.44444, 0.09426, 0, 0.59111],
        
            "98": [0, 0.69444, 0.07861, 0, 0.53222],
        
            "99": [0, 0.44444, 0.05222, 0, 0.53222],
        
            "100": [0, 0.69444, 0.10861, 0, 0.59111],
        
            "101": [0, 0.44444, 0.085, 0, 0.53222],
        
            "102": [0.19444, 0.69444, 0.21778, 0, 0.4],
        
            "103": [0.19444, 0.44444, 0.105, 0, 0.53222],
        
            "104": [0, 0.69444, 0.09426, 0, 0.59111],
        
            "105": [0, 0.69326, 0.11387, 0, 0.35555],
        
            "106": [0.19444, 0.69326, 0.1672, 0, 0.35555],
        
            "107": [0, 0.69444, 0.11111, 0, 0.53222],
        
            "108": [0, 0.69444, 0.10861, 0, 0.29666],
        
            "109": [0, 0.44444, 0.09426, 0, 0.94444],
        
            "110": [0, 0.44444, 0.09426, 0, 0.64999],
        
            "111": [0, 0.44444, 0.07861, 0, 0.59111],
        
            "112": [0.19444, 0.44444, 0.07861, 0, 0.59111],
        
            "113": [0.19444, 0.44444, 0.105, 0, 0.53222],
        
            "114": [0, 0.44444, 0.11111, 0, 0.50167],
        
            "115": [0, 0.44444, 0.08167, 0, 0.48694],
        
            "116": [0, 0.63492, 0.09639, 0, 0.385],
        
            "117": [0, 0.44444, 0.09426, 0, 0.62055],
        
            "118": [0, 0.44444, 0.11111, 0, 0.53222],
        
            "119": [0, 0.44444, 0.11111, 0, 0.76777],
        
            "120": [0, 0.44444, 0.12583, 0, 0.56055],
        
            "121": [0.19444, 0.44444, 0.105, 0, 0.56166],
        
            "122": [0, 0.44444, 0.13889, 0, 0.49055],
        
            "126": [0.35, 0.34444, 0.11472, 0, 0.59111],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "168": [0, 0.69444, 0.11473, 0, 0.59111],
        
            "176": [0, 0.69444, 0, 0, 0.94888],
        
            "184": [0.17014, 0, 0, 0, 0.53222],
        
            "198": [0, 0.68611, 0.11431, 0, 1.02277],
        
            "216": [0.04861, 0.73472, 0.09062, 0, 0.88555],
        
            "223": [0.19444, 0.69444, 0.09736, 0, 0.665],
        
            "230": [0, 0.44444, 0.085, 0, 0.82666],
        
            "248": [0.09722, 0.54167, 0.09458, 0, 0.59111],
        
            "305": [0, 0.44444, 0.09426, 0, 0.35555],
        
            "338": [0, 0.68611, 0.11431, 0, 1.14054],
        
            "339": [0, 0.44444, 0.085, 0, 0.82666],
        
            "567": [0.19444, 0.44444, 0.04611, 0, 0.385],
        
            "710": [0, 0.69444, 0.06709, 0, 0.59111],
        
            "711": [0, 0.63194, 0.08271, 0, 0.59111],
        
            "713": [0, 0.59444, 0.10444, 0, 0.59111],
        
            "714": [0, 0.69444, 0.08528, 0, 0.59111],
        
            "715": [0, 0.69444, 0, 0, 0.59111],
        
            "728": [0, 0.69444, 0.10333, 0, 0.59111],
        
            "729": [0, 0.69444, 0.12945, 0, 0.35555],
        
            "730": [0, 0.69444, 0, 0, 0.94888],
        
            "732": [0, 0.69444, 0.11472, 0, 0.59111],
        
            "733": [0, 0.69444, 0.11472, 0, 0.59111],
        
            "915": [0, 0.68611, 0.12903, 0, 0.69777],
        
            "916": [0, 0.68611, 0, 0, 0.94444],
        
            "920": [0, 0.68611, 0.09062, 0, 0.88555],
        
            "923": [0, 0.68611, 0, 0, 0.80666],
        
            "926": [0, 0.68611, 0.15092, 0, 0.76777],
        
            "928": [0, 0.68611, 0.17208, 0, 0.8961],
        
            "931": [0, 0.68611, 0.11431, 0, 0.82666],
        
            "933": [0, 0.68611, 0.10778, 0, 0.88555],
        
            "934": [0, 0.68611, 0.05632, 0, 0.82666],
        
            "936": [0, 0.68611, 0.10778, 0, 0.88555],
        
            "937": [0, 0.68611, 0.0992, 0, 0.82666],
        
            "8211": [0, 0.44444, 0.09811, 0, 0.59111],
        
            "8212": [0, 0.44444, 0.09811, 0, 1.18221],
        
            "8216": [0, 0.69444, 0.12945, 0, 0.35555],
        
            "8217": [0, 0.69444, 0.12945, 0, 0.35555],
        
            "8220": [0, 0.69444, 0.16772, 0, 0.62055],
        
            "8221": [0, 0.69444, 0.07939, 0, 0.62055]
        
          },
        
          "Main-Italic": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "33": [0, 0.69444, 0.12417, 0, 0.30667],
        
            "34": [0, 0.69444, 0.06961, 0, 0.51444],
        
            "35": [0.19444, 0.69444, 0.06616, 0, 0.81777],
        
            "37": [0.05556, 0.75, 0.13639, 0, 0.81777],
        
            "38": [0, 0.69444, 0.09694, 0, 0.76666],
        
            "39": [0, 0.69444, 0.12417, 0, 0.30667],
        
            "40": [0.25, 0.75, 0.16194, 0, 0.40889],
        
            "41": [0.25, 0.75, 0.03694, 0, 0.40889],
        
            "42": [0, 0.75, 0.14917, 0, 0.51111],
        
            "43": [0.05667, 0.56167, 0.03694, 0, 0.76666],
        
            "44": [0.19444, 0.10556, 0, 0, 0.30667],
        
            "45": [0, 0.43056, 0.02826, 0, 0.35778],
        
            "46": [0, 0.10556, 0, 0, 0.30667],
        
            "47": [0.25, 0.75, 0.16194, 0, 0.51111],
        
            "48": [0, 0.64444, 0.13556, 0, 0.51111],
        
            "49": [0, 0.64444, 0.13556, 0, 0.51111],
        
            "50": [0, 0.64444, 0.13556, 0, 0.51111],
        
            "51": [0, 0.64444, 0.13556, 0, 0.51111],
        
            "52": [0.19444, 0.64444, 0.13556, 0, 0.51111],
        
            "53": [0, 0.64444, 0.13556, 0, 0.51111],
        
            "54": [0, 0.64444, 0.13556, 0, 0.51111],
        
            "55": [0.19444, 0.64444, 0.13556, 0, 0.51111],
        
            "56": [0, 0.64444, 0.13556, 0, 0.51111],
        
            "57": [0, 0.64444, 0.13556, 0, 0.51111],
        
            "58": [0, 0.43056, 0.0582, 0, 0.30667],
        
            "59": [0.19444, 0.43056, 0.0582, 0, 0.30667],
        
            "61": [-0.13313, 0.36687, 0.06616, 0, 0.76666],
        
            "63": [0, 0.69444, 0.1225, 0, 0.51111],
        
            "64": [0, 0.69444, 0.09597, 0, 0.76666],
        
            "65": [0, 0.68333, 0, 0, 0.74333],
        
            "66": [0, 0.68333, 0.10257, 0, 0.70389],
        
            "67": [0, 0.68333, 0.14528, 0, 0.71555],
        
            "68": [0, 0.68333, 0.09403, 0, 0.755],
        
            "69": [0, 0.68333, 0.12028, 0, 0.67833],
        
            "70": [0, 0.68333, 0.13305, 0, 0.65277],
        
            "71": [0, 0.68333, 0.08722, 0, 0.77361],
        
            "72": [0, 0.68333, 0.16389, 0, 0.74333],
        
            "73": [0, 0.68333, 0.15806, 0, 0.38555],
        
            "74": [0, 0.68333, 0.14028, 0, 0.525],
        
            "75": [0, 0.68333, 0.14528, 0, 0.76888],
        
            "76": [0, 0.68333, 0, 0, 0.62722],
        
            "77": [0, 0.68333, 0.16389, 0, 0.89666],
        
            "78": [0, 0.68333, 0.16389, 0, 0.74333],
        
            "79": [0, 0.68333, 0.09403, 0, 0.76666],
        
            "80": [0, 0.68333, 0.10257, 0, 0.67833],
        
            "81": [0.19444, 0.68333, 0.09403, 0, 0.76666],
        
            "82": [0, 0.68333, 0.03868, 0, 0.72944],
        
            "83": [0, 0.68333, 0.11972, 0, 0.56222],
        
            "84": [0, 0.68333, 0.13305, 0, 0.71555],
        
            "85": [0, 0.68333, 0.16389, 0, 0.74333],
        
            "86": [0, 0.68333, 0.18361, 0, 0.74333],
        
            "87": [0, 0.68333, 0.18361, 0, 0.99888],
        
            "88": [0, 0.68333, 0.15806, 0, 0.74333],
        
            "89": [0, 0.68333, 0.19383, 0, 0.74333],
        
            "90": [0, 0.68333, 0.14528, 0, 0.61333],
        
            "91": [0.25, 0.75, 0.1875, 0, 0.30667],
        
            "93": [0.25, 0.75, 0.10528, 0, 0.30667],
        
            "94": [0, 0.69444, 0.06646, 0, 0.51111],
        
            "95": [0.31, 0.12056, 0.09208, 0, 0.51111],
        
            "97": [0, 0.43056, 0.07671, 0, 0.51111],
        
            "98": [0, 0.69444, 0.06312, 0, 0.46],
        
            "99": [0, 0.43056, 0.05653, 0, 0.46],
        
            "100": [0, 0.69444, 0.10333, 0, 0.51111],
        
            "101": [0, 0.43056, 0.07514, 0, 0.46],
        
            "102": [0.19444, 0.69444, 0.21194, 0, 0.30667],
        
            "103": [0.19444, 0.43056, 0.08847, 0, 0.46],
        
            "104": [0, 0.69444, 0.07671, 0, 0.51111],
        
            "105": [0, 0.65536, 0.1019, 0, 0.30667],
        
            "106": [0.19444, 0.65536, 0.14467, 0, 0.30667],
        
            "107": [0, 0.69444, 0.10764, 0, 0.46],
        
            "108": [0, 0.69444, 0.10333, 0, 0.25555],
        
            "109": [0, 0.43056, 0.07671, 0, 0.81777],
        
            "110": [0, 0.43056, 0.07671, 0, 0.56222],
        
            "111": [0, 0.43056, 0.06312, 0, 0.51111],
        
            "112": [0.19444, 0.43056, 0.06312, 0, 0.51111],
        
            "113": [0.19444, 0.43056, 0.08847, 0, 0.46],
        
            "114": [0, 0.43056, 0.10764, 0, 0.42166],
        
            "115": [0, 0.43056, 0.08208, 0, 0.40889],
        
            "116": [0, 0.61508, 0.09486, 0, 0.33222],
        
            "117": [0, 0.43056, 0.07671, 0, 0.53666],
        
            "118": [0, 0.43056, 0.10764, 0, 0.46],
        
            "119": [0, 0.43056, 0.10764, 0, 0.66444],
        
            "120": [0, 0.43056, 0.12042, 0, 0.46389],
        
            "121": [0.19444, 0.43056, 0.08847, 0, 0.48555],
        
            "122": [0, 0.43056, 0.12292, 0, 0.40889],
        
            "126": [0.35, 0.31786, 0.11585, 0, 0.51111],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "168": [0, 0.66786, 0.10474, 0, 0.51111],
        
            "176": [0, 0.69444, 0, 0, 0.83129],
        
            "184": [0.17014, 0, 0, 0, 0.46],
        
            "198": [0, 0.68333, 0.12028, 0, 0.88277],
        
            "216": [0.04861, 0.73194, 0.09403, 0, 0.76666],
        
            "223": [0.19444, 0.69444, 0.10514, 0, 0.53666],
        
            "230": [0, 0.43056, 0.07514, 0, 0.71555],
        
            "248": [0.09722, 0.52778, 0.09194, 0, 0.51111],
        
            "338": [0, 0.68333, 0.12028, 0, 0.98499],
        
            "339": [0, 0.43056, 0.07514, 0, 0.71555],
        
            "710": [0, 0.69444, 0.06646, 0, 0.51111],
        
            "711": [0, 0.62847, 0.08295, 0, 0.51111],
        
            "713": [0, 0.56167, 0.10333, 0, 0.51111],
        
            "714": [0, 0.69444, 0.09694, 0, 0.51111],
        
            "715": [0, 0.69444, 0, 0, 0.51111],
        
            "728": [0, 0.69444, 0.10806, 0, 0.51111],
        
            "729": [0, 0.66786, 0.11752, 0, 0.30667],
        
            "730": [0, 0.69444, 0, 0, 0.83129],
        
            "732": [0, 0.66786, 0.11585, 0, 0.51111],
        
            "733": [0, 0.69444, 0.1225, 0, 0.51111],
        
            "915": [0, 0.68333, 0.13305, 0, 0.62722],
        
            "916": [0, 0.68333, 0, 0, 0.81777],
        
            "920": [0, 0.68333, 0.09403, 0, 0.76666],
        
            "923": [0, 0.68333, 0, 0, 0.69222],
        
            "926": [0, 0.68333, 0.15294, 0, 0.66444],
        
            "928": [0, 0.68333, 0.16389, 0, 0.74333],
        
            "931": [0, 0.68333, 0.12028, 0, 0.71555],
        
            "933": [0, 0.68333, 0.11111, 0, 0.76666],
        
            "934": [0, 0.68333, 0.05986, 0, 0.71555],
        
            "936": [0, 0.68333, 0.11111, 0, 0.76666],
        
            "937": [0, 0.68333, 0.10257, 0, 0.71555],
        
            "8211": [0, 0.43056, 0.09208, 0, 0.51111],
        
            "8212": [0, 0.43056, 0.09208, 0, 1.02222],
        
            "8216": [0, 0.69444, 0.12417, 0, 0.30667],
        
            "8217": [0, 0.69444, 0.12417, 0, 0.30667],
        
            "8220": [0, 0.69444, 0.1685, 0, 0.51444],
        
            "8221": [0, 0.69444, 0.06961, 0, 0.51444],
        
            "8463": [0, 0.68889, 0, 0, 0.54028]
        
          },
        
          "Main-Regular": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "33": [0, 0.69444, 0, 0, 0.27778],
        
            "34": [0, 0.69444, 0, 0, 0.5],
        
            "35": [0.19444, 0.69444, 0, 0, 0.83334],
        
            "36": [0.05556, 0.75, 0, 0, 0.5],
        
            "37": [0.05556, 0.75, 0, 0, 0.83334],
        
            "38": [0, 0.69444, 0, 0, 0.77778],
        
            "39": [0, 0.69444, 0, 0, 0.27778],
        
            "40": [0.25, 0.75, 0, 0, 0.38889],
        
            "41": [0.25, 0.75, 0, 0, 0.38889],
        
            "42": [0, 0.75, 0, 0, 0.5],
        
            "43": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "44": [0.19444, 0.10556, 0, 0, 0.27778],
        
            "45": [0, 0.43056, 0, 0, 0.33333],
        
            "46": [0, 0.10556, 0, 0, 0.27778],
        
            "47": [0.25, 0.75, 0, 0, 0.5],
        
            "48": [0, 0.64444, 0, 0, 0.5],
        
            "49": [0, 0.64444, 0, 0, 0.5],
        
            "50": [0, 0.64444, 0, 0, 0.5],
        
            "51": [0, 0.64444, 0, 0, 0.5],
        
            "52": [0, 0.64444, 0, 0, 0.5],
        
            "53": [0, 0.64444, 0, 0, 0.5],
        
            "54": [0, 0.64444, 0, 0, 0.5],
        
            "55": [0, 0.64444, 0, 0, 0.5],
        
            "56": [0, 0.64444, 0, 0, 0.5],
        
            "57": [0, 0.64444, 0, 0, 0.5],
        
            "58": [0, 0.43056, 0, 0, 0.27778],
        
            "59": [0.19444, 0.43056, 0, 0, 0.27778],
        
            "60": [0.0391, 0.5391, 0, 0, 0.77778],
        
            "61": [-0.13313, 0.36687, 0, 0, 0.77778],
        
            "62": [0.0391, 0.5391, 0, 0, 0.77778],
        
            "63": [0, 0.69444, 0, 0, 0.47222],
        
            "64": [0, 0.69444, 0, 0, 0.77778],
        
            "65": [0, 0.68333, 0, 0, 0.75],
        
            "66": [0, 0.68333, 0, 0, 0.70834],
        
            "67": [0, 0.68333, 0, 0, 0.72222],
        
            "68": [0, 0.68333, 0, 0, 0.76389],
        
            "69": [0, 0.68333, 0, 0, 0.68056],
        
            "70": [0, 0.68333, 0, 0, 0.65278],
        
            "71": [0, 0.68333, 0, 0, 0.78472],
        
            "72": [0, 0.68333, 0, 0, 0.75],
        
            "73": [0, 0.68333, 0, 0, 0.36111],
        
            "74": [0, 0.68333, 0, 0, 0.51389],
        
            "75": [0, 0.68333, 0, 0, 0.77778],
        
            "76": [0, 0.68333, 0, 0, 0.625],
        
            "77": [0, 0.68333, 0, 0, 0.91667],
        
            "78": [0, 0.68333, 0, 0, 0.75],
        
            "79": [0, 0.68333, 0, 0, 0.77778],
        
            "80": [0, 0.68333, 0, 0, 0.68056],
        
            "81": [0.19444, 0.68333, 0, 0, 0.77778],
        
            "82": [0, 0.68333, 0, 0, 0.73611],
        
            "83": [0, 0.68333, 0, 0, 0.55556],
        
            "84": [0, 0.68333, 0, 0, 0.72222],
        
            "85": [0, 0.68333, 0, 0, 0.75],
        
            "86": [0, 0.68333, 0.01389, 0, 0.75],
        
            "87": [0, 0.68333, 0.01389, 0, 1.02778],
        
            "88": [0, 0.68333, 0, 0, 0.75],
        
            "89": [0, 0.68333, 0.025, 0, 0.75],
        
            "90": [0, 0.68333, 0, 0, 0.61111],
        
            "91": [0.25, 0.75, 0, 0, 0.27778],
        
            "92": [0.25, 0.75, 0, 0, 0.5],
        
            "93": [0.25, 0.75, 0, 0, 0.27778],
        
            "94": [0, 0.69444, 0, 0, 0.5],
        
            "95": [0.31, 0.12056, 0.02778, 0, 0.5],
        
            "97": [0, 0.43056, 0, 0, 0.5],
        
            "98": [0, 0.69444, 0, 0, 0.55556],
        
            "99": [0, 0.43056, 0, 0, 0.44445],
        
            "100": [0, 0.69444, 0, 0, 0.55556],
        
            "101": [0, 0.43056, 0, 0, 0.44445],
        
            "102": [0, 0.69444, 0.07778, 0, 0.30556],
        
            "103": [0.19444, 0.43056, 0.01389, 0, 0.5],
        
            "104": [0, 0.69444, 0, 0, 0.55556],
        
            "105": [0, 0.66786, 0, 0, 0.27778],
        
            "106": [0.19444, 0.66786, 0, 0, 0.30556],
        
            "107": [0, 0.69444, 0, 0, 0.52778],
        
            "108": [0, 0.69444, 0, 0, 0.27778],
        
            "109": [0, 0.43056, 0, 0, 0.83334],
        
            "110": [0, 0.43056, 0, 0, 0.55556],
        
            "111": [0, 0.43056, 0, 0, 0.5],
        
            "112": [0.19444, 0.43056, 0, 0, 0.55556],
        
            "113": [0.19444, 0.43056, 0, 0, 0.52778],
        
            "114": [0, 0.43056, 0, 0, 0.39167],
        
            "115": [0, 0.43056, 0, 0, 0.39445],
        
            "116": [0, 0.61508, 0, 0, 0.38889],
        
            "117": [0, 0.43056, 0, 0, 0.55556],
        
            "118": [0, 0.43056, 0.01389, 0, 0.52778],
        
            "119": [0, 0.43056, 0.01389, 0, 0.72222],
        
            "120": [0, 0.43056, 0, 0, 0.52778],
        
            "121": [0.19444, 0.43056, 0.01389, 0, 0.52778],
        
            "122": [0, 0.43056, 0, 0, 0.44445],
        
            "123": [0.25, 0.75, 0, 0, 0.5],
        
            "124": [0.25, 0.75, 0, 0, 0.27778],
        
            "125": [0.25, 0.75, 0, 0, 0.5],
        
            "126": [0.35, 0.31786, 0, 0, 0.5],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "163": [0, 0.69444, 0, 0, 0.76909],
        
            "167": [0.19444, 0.69444, 0, 0, 0.44445],
        
            "168": [0, 0.66786, 0, 0, 0.5],
        
            "172": [0, 0.43056, 0, 0, 0.66667],
        
            "176": [0, 0.69444, 0, 0, 0.75],
        
            "177": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "182": [0.19444, 0.69444, 0, 0, 0.61111],
        
            "184": [0.17014, 0, 0, 0, 0.44445],
        
            "198": [0, 0.68333, 0, 0, 0.90278],
        
            "215": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "216": [0.04861, 0.73194, 0, 0, 0.77778],
        
            "223": [0, 0.69444, 0, 0, 0.5],
        
            "230": [0, 0.43056, 0, 0, 0.72222],
        
            "247": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "248": [0.09722, 0.52778, 0, 0, 0.5],
        
            "305": [0, 0.43056, 0, 0, 0.27778],
        
            "338": [0, 0.68333, 0, 0, 1.01389],
        
            "339": [0, 0.43056, 0, 0, 0.77778],
        
            "567": [0.19444, 0.43056, 0, 0, 0.30556],
        
            "710": [0, 0.69444, 0, 0, 0.5],
        
            "711": [0, 0.62847, 0, 0, 0.5],
        
            "713": [0, 0.56778, 0, 0, 0.5],
        
            "714": [0, 0.69444, 0, 0, 0.5],
        
            "715": [0, 0.69444, 0, 0, 0.5],
        
            "728": [0, 0.69444, 0, 0, 0.5],
        
            "729": [0, 0.66786, 0, 0, 0.27778],
        
            "730": [0, 0.69444, 0, 0, 0.75],
        
            "732": [0, 0.66786, 0, 0, 0.5],
        
            "733": [0, 0.69444, 0, 0, 0.5],
        
            "915": [0, 0.68333, 0, 0, 0.625],
        
            "916": [0, 0.68333, 0, 0, 0.83334],
        
            "920": [0, 0.68333, 0, 0, 0.77778],
        
            "923": [0, 0.68333, 0, 0, 0.69445],
        
            "926": [0, 0.68333, 0, 0, 0.66667],
        
            "928": [0, 0.68333, 0, 0, 0.75],
        
            "931": [0, 0.68333, 0, 0, 0.72222],
        
            "933": [0, 0.68333, 0, 0, 0.77778],
        
            "934": [0, 0.68333, 0, 0, 0.72222],
        
            "936": [0, 0.68333, 0, 0, 0.77778],
        
            "937": [0, 0.68333, 0, 0, 0.72222],
        
            "8211": [0, 0.43056, 0.02778, 0, 0.5],
        
            "8212": [0, 0.43056, 0.02778, 0, 1.0],
        
            "8216": [0, 0.69444, 0, 0, 0.27778],
        
            "8217": [0, 0.69444, 0, 0, 0.27778],
        
            "8220": [0, 0.69444, 0, 0, 0.5],
        
            "8221": [0, 0.69444, 0, 0, 0.5],
        
            "8224": [0.19444, 0.69444, 0, 0, 0.44445],
        
            "8225": [0.19444, 0.69444, 0, 0, 0.44445],
        
            "8230": [0, 0.123, 0, 0, 1.172],
        
            "8242": [0, 0.55556, 0, 0, 0.275],
        
            "8407": [0, 0.71444, 0.15382, 0, 0.5],
        
            "8463": [0, 0.68889, 0, 0, 0.54028],
        
            "8465": [0, 0.69444, 0, 0, 0.72222],
        
            "8467": [0, 0.69444, 0, 0.11111, 0.41667],
        
            "8472": [0.19444, 0.43056, 0, 0.11111, 0.63646],
        
            "8476": [0, 0.69444, 0, 0, 0.72222],
        
            "8501": [0, 0.69444, 0, 0, 0.61111],
        
            "8592": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8593": [0.19444, 0.69444, 0, 0, 0.5],
        
            "8594": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8595": [0.19444, 0.69444, 0, 0, 0.5],
        
            "8596": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8597": [0.25, 0.75, 0, 0, 0.5],
        
            "8598": [0.19444, 0.69444, 0, 0, 1.0],
        
            "8599": [0.19444, 0.69444, 0, 0, 1.0],
        
            "8600": [0.19444, 0.69444, 0, 0, 1.0],
        
            "8601": [0.19444, 0.69444, 0, 0, 1.0],
        
            "8614": [0.011, 0.511, 0, 0, 1.0],
        
            "8617": [0.011, 0.511, 0, 0, 1.126],
        
            "8618": [0.011, 0.511, 0, 0, 1.126],
        
            "8636": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8637": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8640": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8641": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8652": [0.011, 0.671, 0, 0, 1.0],
        
            "8656": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8657": [0.19444, 0.69444, 0, 0, 0.61111],
        
            "8658": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8659": [0.19444, 0.69444, 0, 0, 0.61111],
        
            "8660": [-0.13313, 0.36687, 0, 0, 1.0],
        
            "8661": [0.25, 0.75, 0, 0, 0.61111],
        
            "8704": [0, 0.69444, 0, 0, 0.55556],
        
            "8706": [0, 0.69444, 0.05556, 0.08334, 0.5309],
        
            "8707": [0, 0.69444, 0, 0, 0.55556],
        
            "8709": [0.05556, 0.75, 0, 0, 0.5],
        
            "8711": [0, 0.68333, 0, 0, 0.83334],
        
            "8712": [0.0391, 0.5391, 0, 0, 0.66667],
        
            "8715": [0.0391, 0.5391, 0, 0, 0.66667],
        
            "8722": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "8723": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "8725": [0.25, 0.75, 0, 0, 0.5],
        
            "8726": [0.25, 0.75, 0, 0, 0.5],
        
            "8727": [-0.03472, 0.46528, 0, 0, 0.5],
        
            "8728": [-0.05555, 0.44445, 0, 0, 0.5],
        
            "8729": [-0.05555, 0.44445, 0, 0, 0.5],
        
            "8730": [0.2, 0.8, 0, 0, 0.83334],
        
            "8733": [0, 0.43056, 0, 0, 0.77778],
        
            "8734": [0, 0.43056, 0, 0, 1.0],
        
            "8736": [0, 0.69224, 0, 0, 0.72222],
        
            "8739": [0.25, 0.75, 0, 0, 0.27778],
        
            "8741": [0.25, 0.75, 0, 0, 0.5],
        
            "8743": [0, 0.55556, 0, 0, 0.66667],
        
            "8744": [0, 0.55556, 0, 0, 0.66667],
        
            "8745": [0, 0.55556, 0, 0, 0.66667],
        
            "8746": [0, 0.55556, 0, 0, 0.66667],
        
            "8747": [0.19444, 0.69444, 0.11111, 0, 0.41667],
        
            "8764": [-0.13313, 0.36687, 0, 0, 0.77778],
        
            "8768": [0.19444, 0.69444, 0, 0, 0.27778],
        
            "8771": [-0.03625, 0.46375, 0, 0, 0.77778],
        
            "8773": [-0.022, 0.589, 0, 0, 0.778],
        
            "8776": [-0.01688, 0.48312, 0, 0, 0.77778],
        
            "8781": [-0.03625, 0.46375, 0, 0, 0.77778],
        
            "8784": [-0.133, 0.673, 0, 0, 0.778],
        
            "8801": [-0.03625, 0.46375, 0, 0, 0.77778],
        
            "8804": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "8805": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "8810": [0.0391, 0.5391, 0, 0, 1.0],
        
            "8811": [0.0391, 0.5391, 0, 0, 1.0],
        
            "8826": [0.0391, 0.5391, 0, 0, 0.77778],
        
            "8827": [0.0391, 0.5391, 0, 0, 0.77778],
        
            "8834": [0.0391, 0.5391, 0, 0, 0.77778],
        
            "8835": [0.0391, 0.5391, 0, 0, 0.77778],
        
            "8838": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "8839": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "8846": [0, 0.55556, 0, 0, 0.66667],
        
            "8849": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "8850": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "8851": [0, 0.55556, 0, 0, 0.66667],
        
            "8852": [0, 0.55556, 0, 0, 0.66667],
        
            "8853": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "8854": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "8855": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "8856": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "8857": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "8866": [0, 0.69444, 0, 0, 0.61111],
        
            "8867": [0, 0.69444, 0, 0, 0.61111],
        
            "8868": [0, 0.69444, 0, 0, 0.77778],
        
            "8869": [0, 0.69444, 0, 0, 0.77778],
        
            "8872": [0.249, 0.75, 0, 0, 0.867],
        
            "8900": [-0.05555, 0.44445, 0, 0, 0.5],
        
            "8901": [-0.05555, 0.44445, 0, 0, 0.27778],
        
            "8902": [-0.03472, 0.46528, 0, 0, 0.5],
        
            "8904": [0.005, 0.505, 0, 0, 0.9],
        
            "8942": [0.03, 0.903, 0, 0, 0.278],
        
            "8943": [-0.19, 0.313, 0, 0, 1.172],
        
            "8945": [-0.1, 0.823, 0, 0, 1.282],
        
            "8968": [0.25, 0.75, 0, 0, 0.44445],
        
            "8969": [0.25, 0.75, 0, 0, 0.44445],
        
            "8970": [0.25, 0.75, 0, 0, 0.44445],
        
            "8971": [0.25, 0.75, 0, 0, 0.44445],
        
            "8994": [-0.14236, 0.35764, 0, 0, 1.0],
        
            "8995": [-0.14236, 0.35764, 0, 0, 1.0],
        
            "9136": [0.244, 0.744, 0, 0, 0.412],
        
            "9137": [0.244, 0.745, 0, 0, 0.412],
        
            "9651": [0.19444, 0.69444, 0, 0, 0.88889],
        
            "9657": [-0.03472, 0.46528, 0, 0, 0.5],
        
            "9661": [0.19444, 0.69444, 0, 0, 0.88889],
        
            "9667": [-0.03472, 0.46528, 0, 0, 0.5],
        
            "9711": [0.19444, 0.69444, 0, 0, 1.0],
        
            "9824": [0.12963, 0.69444, 0, 0, 0.77778],
        
            "9825": [0.12963, 0.69444, 0, 0, 0.77778],
        
            "9826": [0.12963, 0.69444, 0, 0, 0.77778],
        
            "9827": [0.12963, 0.69444, 0, 0, 0.77778],
        
            "9837": [0, 0.75, 0, 0, 0.38889],
        
            "9838": [0.19444, 0.69444, 0, 0, 0.38889],
        
            "9839": [0.19444, 0.69444, 0, 0, 0.38889],
        
            "10216": [0.25, 0.75, 0, 0, 0.38889],
        
            "10217": [0.25, 0.75, 0, 0, 0.38889],
        
            "10222": [0.244, 0.744, 0, 0, 0.412],
        
            "10223": [0.244, 0.745, 0, 0, 0.412],
        
            "10229": [0.011, 0.511, 0, 0, 1.609],
        
            "10230": [0.011, 0.511, 0, 0, 1.638],
        
            "10231": [0.011, 0.511, 0, 0, 1.859],
        
            "10232": [0.024, 0.525, 0, 0, 1.609],
        
            "10233": [0.024, 0.525, 0, 0, 1.638],
        
            "10234": [0.024, 0.525, 0, 0, 1.858],
        
            "10236": [0.011, 0.511, 0, 0, 1.638],
        
            "10815": [0, 0.68333, 0, 0, 0.75],
        
            "10927": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "10928": [0.13597, 0.63597, 0, 0, 0.77778],
        
            "57376": [0.19444, 0.69444, 0, 0, 0]
        
          },
        
          "Math-BoldItalic": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "48": [0, 0.44444, 0, 0, 0.575],
        
            "49": [0, 0.44444, 0, 0, 0.575],
        
            "50": [0, 0.44444, 0, 0, 0.575],
        
            "51": [0.19444, 0.44444, 0, 0, 0.575],
        
            "52": [0.19444, 0.44444, 0, 0, 0.575],
        
            "53": [0.19444, 0.44444, 0, 0, 0.575],
        
            "54": [0, 0.64444, 0, 0, 0.575],
        
            "55": [0.19444, 0.44444, 0, 0, 0.575],
        
            "56": [0, 0.64444, 0, 0, 0.575],
        
            "57": [0.19444, 0.44444, 0, 0, 0.575],
        
            "65": [0, 0.68611, 0, 0, 0.86944],
        
            "66": [0, 0.68611, 0.04835, 0, 0.8664],
        
            "67": [0, 0.68611, 0.06979, 0, 0.81694],
        
            "68": [0, 0.68611, 0.03194, 0, 0.93812],
        
            "69": [0, 0.68611, 0.05451, 0, 0.81007],
        
            "70": [0, 0.68611, 0.15972, 0, 0.68889],
        
            "71": [0, 0.68611, 0, 0, 0.88673],
        
            "72": [0, 0.68611, 0.08229, 0, 0.98229],
        
            "73": [0, 0.68611, 0.07778, 0, 0.51111],
        
            "74": [0, 0.68611, 0.10069, 0, 0.63125],
        
            "75": [0, 0.68611, 0.06979, 0, 0.97118],
        
            "76": [0, 0.68611, 0, 0, 0.75555],
        
            "77": [0, 0.68611, 0.11424, 0, 1.14201],
        
            "78": [0, 0.68611, 0.11424, 0, 0.95034],
        
            "79": [0, 0.68611, 0.03194, 0, 0.83666],
        
            "80": [0, 0.68611, 0.15972, 0, 0.72309],
        
            "81": [0.19444, 0.68611, 0, 0, 0.86861],
        
            "82": [0, 0.68611, 0.00421, 0, 0.87235],
        
            "83": [0, 0.68611, 0.05382, 0, 0.69271],
        
            "84": [0, 0.68611, 0.15972, 0, 0.63663],
        
            "85": [0, 0.68611, 0.11424, 0, 0.80027],
        
            "86": [0, 0.68611, 0.25555, 0, 0.67778],
        
            "87": [0, 0.68611, 0.15972, 0, 1.09305],
        
            "88": [0, 0.68611, 0.07778, 0, 0.94722],
        
            "89": [0, 0.68611, 0.25555, 0, 0.67458],
        
            "90": [0, 0.68611, 0.06979, 0, 0.77257],
        
            "97": [0, 0.44444, 0, 0, 0.63287],
        
            "98": [0, 0.69444, 0, 0, 0.52083],
        
            "99": [0, 0.44444, 0, 0, 0.51342],
        
            "100": [0, 0.69444, 0, 0, 0.60972],
        
            "101": [0, 0.44444, 0, 0, 0.55361],
        
            "102": [0.19444, 0.69444, 0.11042, 0, 0.56806],
        
            "103": [0.19444, 0.44444, 0.03704, 0, 0.5449],
        
            "104": [0, 0.69444, 0, 0, 0.66759],
        
            "105": [0, 0.69326, 0, 0, 0.4048],
        
            "106": [0.19444, 0.69326, 0.0622, 0, 0.47083],
        
            "107": [0, 0.69444, 0.01852, 0, 0.6037],
        
            "108": [0, 0.69444, 0.0088, 0, 0.34815],
        
            "109": [0, 0.44444, 0, 0, 1.0324],
        
            "110": [0, 0.44444, 0, 0, 0.71296],
        
            "111": [0, 0.44444, 0, 0, 0.58472],
        
            "112": [0.19444, 0.44444, 0, 0, 0.60092],
        
            "113": [0.19444, 0.44444, 0.03704, 0, 0.54213],
        
            "114": [0, 0.44444, 0.03194, 0, 0.5287],
        
            "115": [0, 0.44444, 0, 0, 0.53125],
        
            "116": [0, 0.63492, 0, 0, 0.41528],
        
            "117": [0, 0.44444, 0, 0, 0.68102],
        
            "118": [0, 0.44444, 0.03704, 0, 0.56666],
        
            "119": [0, 0.44444, 0.02778, 0, 0.83148],
        
            "120": [0, 0.44444, 0, 0, 0.65903],
        
            "121": [0.19444, 0.44444, 0.03704, 0, 0.59028],
        
            "122": [0, 0.44444, 0.04213, 0, 0.55509],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "915": [0, 0.68611, 0.15972, 0, 0.65694],
        
            "916": [0, 0.68611, 0, 0, 0.95833],
        
            "920": [0, 0.68611, 0.03194, 0, 0.86722],
        
            "923": [0, 0.68611, 0, 0, 0.80555],
        
            "926": [0, 0.68611, 0.07458, 0, 0.84125],
        
            "928": [0, 0.68611, 0.08229, 0, 0.98229],
        
            "931": [0, 0.68611, 0.05451, 0, 0.88507],
        
            "933": [0, 0.68611, 0.15972, 0, 0.67083],
        
            "934": [0, 0.68611, 0, 0, 0.76666],
        
            "936": [0, 0.68611, 0.11653, 0, 0.71402],
        
            "937": [0, 0.68611, 0.04835, 0, 0.8789],
        
            "945": [0, 0.44444, 0, 0, 0.76064],
        
            "946": [0.19444, 0.69444, 0.03403, 0, 0.65972],
        
            "947": [0.19444, 0.44444, 0.06389, 0, 0.59003],
        
            "948": [0, 0.69444, 0.03819, 0, 0.52222],
        
            "949": [0, 0.44444, 0, 0, 0.52882],
        
            "950": [0.19444, 0.69444, 0.06215, 0, 0.50833],
        
            "951": [0.19444, 0.44444, 0.03704, 0, 0.6],
        
            "952": [0, 0.69444, 0.03194, 0, 0.5618],
        
            "953": [0, 0.44444, 0, 0, 0.41204],
        
            "954": [0, 0.44444, 0, 0, 0.66759],
        
            "955": [0, 0.69444, 0, 0, 0.67083],
        
            "956": [0.19444, 0.44444, 0, 0, 0.70787],
        
            "957": [0, 0.44444, 0.06898, 0, 0.57685],
        
            "958": [0.19444, 0.69444, 0.03021, 0, 0.50833],
        
            "959": [0, 0.44444, 0, 0, 0.58472],
        
            "960": [0, 0.44444, 0.03704, 0, 0.68241],
        
            "961": [0.19444, 0.44444, 0, 0, 0.6118],
        
            "962": [0.09722, 0.44444, 0.07917, 0, 0.42361],
        
            "963": [0, 0.44444, 0.03704, 0, 0.68588],
        
            "964": [0, 0.44444, 0.13472, 0, 0.52083],
        
            "965": [0, 0.44444, 0.03704, 0, 0.63055],
        
            "966": [0.19444, 0.44444, 0, 0, 0.74722],
        
            "967": [0.19444, 0.44444, 0, 0, 0.71805],
        
            "968": [0.19444, 0.69444, 0.03704, 0, 0.75833],
        
            "969": [0, 0.44444, 0.03704, 0, 0.71782],
        
            "977": [0, 0.69444, 0, 0, 0.69155],
        
            "981": [0.19444, 0.69444, 0, 0, 0.7125],
        
            "982": [0, 0.44444, 0.03194, 0, 0.975],
        
            "1009": [0.19444, 0.44444, 0, 0, 0.6118],
        
            "1013": [0, 0.44444, 0, 0, 0.48333],
        
            "57649": [0, 0.44444, 0, 0, 0.39352],
        
            "57911": [0.19444, 0.44444, 0, 0, 0.43889]
        
          },
        
          "Math-Italic": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "48": [0, 0.43056, 0, 0, 0.5],
        
            "49": [0, 0.43056, 0, 0, 0.5],
        
            "50": [0, 0.43056, 0, 0, 0.5],
        
            "51": [0.19444, 0.43056, 0, 0, 0.5],
        
            "52": [0.19444, 0.43056, 0, 0, 0.5],
        
            "53": [0.19444, 0.43056, 0, 0, 0.5],
        
            "54": [0, 0.64444, 0, 0, 0.5],
        
            "55": [0.19444, 0.43056, 0, 0, 0.5],
        
            "56": [0, 0.64444, 0, 0, 0.5],
        
            "57": [0.19444, 0.43056, 0, 0, 0.5],
        
            "65": [0, 0.68333, 0, 0.13889, 0.75],
        
            "66": [0, 0.68333, 0.05017, 0.08334, 0.75851],
        
            "67": [0, 0.68333, 0.07153, 0.08334, 0.71472],
        
            "68": [0, 0.68333, 0.02778, 0.05556, 0.82792],
        
            "69": [0, 0.68333, 0.05764, 0.08334, 0.7382],
        
            "70": [0, 0.68333, 0.13889, 0.08334, 0.64306],
        
            "71": [0, 0.68333, 0, 0.08334, 0.78625],
        
            "72": [0, 0.68333, 0.08125, 0.05556, 0.83125],
        
            "73": [0, 0.68333, 0.07847, 0.11111, 0.43958],
        
            "74": [0, 0.68333, 0.09618, 0.16667, 0.55451],
        
            "75": [0, 0.68333, 0.07153, 0.05556, 0.84931],
        
            "76": [0, 0.68333, 0, 0.02778, 0.68056],
        
            "77": [0, 0.68333, 0.10903, 0.08334, 0.97014],
        
            "78": [0, 0.68333, 0.10903, 0.08334, 0.80347],
        
            "79": [0, 0.68333, 0.02778, 0.08334, 0.76278],
        
            "80": [0, 0.68333, 0.13889, 0.08334, 0.64201],
        
            "81": [0.19444, 0.68333, 0, 0.08334, 0.79056],
        
            "82": [0, 0.68333, 0.00773, 0.08334, 0.75929],
        
            "83": [0, 0.68333, 0.05764, 0.08334, 0.6132],
        
            "84": [0, 0.68333, 0.13889, 0.08334, 0.58438],
        
            "85": [0, 0.68333, 0.10903, 0.02778, 0.68278],
        
            "86": [0, 0.68333, 0.22222, 0, 0.58333],
        
            "87": [0, 0.68333, 0.13889, 0, 0.94445],
        
            "88": [0, 0.68333, 0.07847, 0.08334, 0.82847],
        
            "89": [0, 0.68333, 0.22222, 0, 0.58056],
        
            "90": [0, 0.68333, 0.07153, 0.08334, 0.68264],
        
            "97": [0, 0.43056, 0, 0, 0.52859],
        
            "98": [0, 0.69444, 0, 0, 0.42917],
        
            "99": [0, 0.43056, 0, 0.05556, 0.43276],
        
            "100": [0, 0.69444, 0, 0.16667, 0.52049],
        
            "101": [0, 0.43056, 0, 0.05556, 0.46563],
        
            "102": [0.19444, 0.69444, 0.10764, 0.16667, 0.48959],
        
            "103": [0.19444, 0.43056, 0.03588, 0.02778, 0.47697],
        
            "104": [0, 0.69444, 0, 0, 0.57616],
        
            "105": [0, 0.65952, 0, 0, 0.34451],
        
            "106": [0.19444, 0.65952, 0.05724, 0, 0.41181],
        
            "107": [0, 0.69444, 0.03148, 0, 0.5206],
        
            "108": [0, 0.69444, 0.01968, 0.08334, 0.29838],
        
            "109": [0, 0.43056, 0, 0, 0.87801],
        
            "110": [0, 0.43056, 0, 0, 0.60023],
        
            "111": [0, 0.43056, 0, 0.05556, 0.48472],
        
            "112": [0.19444, 0.43056, 0, 0.08334, 0.50313],
        
            "113": [0.19444, 0.43056, 0.03588, 0.08334, 0.44641],
        
            "114": [0, 0.43056, 0.02778, 0.05556, 0.45116],
        
            "115": [0, 0.43056, 0, 0.05556, 0.46875],
        
            "116": [0, 0.61508, 0, 0.08334, 0.36111],
        
            "117": [0, 0.43056, 0, 0.02778, 0.57246],
        
            "118": [0, 0.43056, 0.03588, 0.02778, 0.48472],
        
            "119": [0, 0.43056, 0.02691, 0.08334, 0.71592],
        
            "120": [0, 0.43056, 0, 0.02778, 0.57153],
        
            "121": [0.19444, 0.43056, 0.03588, 0.05556, 0.49028],
        
            "122": [0, 0.43056, 0.04398, 0.05556, 0.46505],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "915": [0, 0.68333, 0.13889, 0.08334, 0.61528],
        
            "916": [0, 0.68333, 0, 0.16667, 0.83334],
        
            "920": [0, 0.68333, 0.02778, 0.08334, 0.76278],
        
            "923": [0, 0.68333, 0, 0.16667, 0.69445],
        
            "926": [0, 0.68333, 0.07569, 0.08334, 0.74236],
        
            "928": [0, 0.68333, 0.08125, 0.05556, 0.83125],
        
            "931": [0, 0.68333, 0.05764, 0.08334, 0.77986],
        
            "933": [0, 0.68333, 0.13889, 0.05556, 0.58333],
        
            "934": [0, 0.68333, 0, 0.08334, 0.66667],
        
            "936": [0, 0.68333, 0.11, 0.05556, 0.61222],
        
            "937": [0, 0.68333, 0.05017, 0.08334, 0.7724],
        
            "945": [0, 0.43056, 0.0037, 0.02778, 0.6397],
        
            "946": [0.19444, 0.69444, 0.05278, 0.08334, 0.56563],
        
            "947": [0.19444, 0.43056, 0.05556, 0, 0.51773],
        
            "948": [0, 0.69444, 0.03785, 0.05556, 0.44444],
        
            "949": [0, 0.43056, 0, 0.08334, 0.46632],
        
            "950": [0.19444, 0.69444, 0.07378, 0.08334, 0.4375],
        
            "951": [0.19444, 0.43056, 0.03588, 0.05556, 0.49653],
        
            "952": [0, 0.69444, 0.02778, 0.08334, 0.46944],
        
            "953": [0, 0.43056, 0, 0.05556, 0.35394],
        
            "954": [0, 0.43056, 0, 0, 0.57616],
        
            "955": [0, 0.69444, 0, 0, 0.58334],
        
            "956": [0.19444, 0.43056, 0, 0.02778, 0.60255],
        
            "957": [0, 0.43056, 0.06366, 0.02778, 0.49398],
        
            "958": [0.19444, 0.69444, 0.04601, 0.11111, 0.4375],
        
            "959": [0, 0.43056, 0, 0.05556, 0.48472],
        
            "960": [0, 0.43056, 0.03588, 0, 0.57003],
        
            "961": [0.19444, 0.43056, 0, 0.08334, 0.51702],
        
            "962": [0.09722, 0.43056, 0.07986, 0.08334, 0.36285],
        
            "963": [0, 0.43056, 0.03588, 0, 0.57141],
        
            "964": [0, 0.43056, 0.1132, 0.02778, 0.43715],
        
            "965": [0, 0.43056, 0.03588, 0.02778, 0.54028],
        
            "966": [0.19444, 0.43056, 0, 0.08334, 0.65417],
        
            "967": [0.19444, 0.43056, 0, 0.05556, 0.62569],
        
            "968": [0.19444, 0.69444, 0.03588, 0.11111, 0.65139],
        
            "969": [0, 0.43056, 0.03588, 0, 0.62245],
        
            "977": [0, 0.69444, 0, 0.08334, 0.59144],
        
            "981": [0.19444, 0.69444, 0, 0.08334, 0.59583],
        
            "982": [0, 0.43056, 0.02778, 0, 0.82813],
        
            "1009": [0.19444, 0.43056, 0, 0.08334, 0.51702],
        
            "1013": [0, 0.43056, 0, 0.05556, 0.4059],
        
            "57649": [0, 0.43056, 0, 0.02778, 0.32246],
        
            "57911": [0.19444, 0.43056, 0, 0.08334, 0.38403]
        
          },
        
          "SansSerif-Bold": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "33": [0, 0.69444, 0, 0, 0.36667],
        
            "34": [0, 0.69444, 0, 0, 0.55834],
        
            "35": [0.19444, 0.69444, 0, 0, 0.91667],
        
            "36": [0.05556, 0.75, 0, 0, 0.55],
        
            "37": [0.05556, 0.75, 0, 0, 1.02912],
        
            "38": [0, 0.69444, 0, 0, 0.83056],
        
            "39": [0, 0.69444, 0, 0, 0.30556],
        
            "40": [0.25, 0.75, 0, 0, 0.42778],
        
            "41": [0.25, 0.75, 0, 0, 0.42778],
        
            "42": [0, 0.75, 0, 0, 0.55],
        
            "43": [0.11667, 0.61667, 0, 0, 0.85556],
        
            "44": [0.10556, 0.13056, 0, 0, 0.30556],
        
            "45": [0, 0.45833, 0, 0, 0.36667],
        
            "46": [0, 0.13056, 0, 0, 0.30556],
        
            "47": [0.25, 0.75, 0, 0, 0.55],
        
            "48": [0, 0.69444, 0, 0, 0.55],
        
            "49": [0, 0.69444, 0, 0, 0.55],
        
            "50": [0, 0.69444, 0, 0, 0.55],
        
            "51": [0, 0.69444, 0, 0, 0.55],
        
            "52": [0, 0.69444, 0, 0, 0.55],
        
            "53": [0, 0.69444, 0, 0, 0.55],
        
            "54": [0, 0.69444, 0, 0, 0.55],
        
            "55": [0, 0.69444, 0, 0, 0.55],
        
            "56": [0, 0.69444, 0, 0, 0.55],
        
            "57": [0, 0.69444, 0, 0, 0.55],
        
            "58": [0, 0.45833, 0, 0, 0.30556],
        
            "59": [0.10556, 0.45833, 0, 0, 0.30556],
        
            "61": [-0.09375, 0.40625, 0, 0, 0.85556],
        
            "63": [0, 0.69444, 0, 0, 0.51945],
        
            "64": [0, 0.69444, 0, 0, 0.73334],
        
            "65": [0, 0.69444, 0, 0, 0.73334],
        
            "66": [0, 0.69444, 0, 0, 0.73334],
        
            "67": [0, 0.69444, 0, 0, 0.70278],
        
            "68": [0, 0.69444, 0, 0, 0.79445],
        
            "69": [0, 0.69444, 0, 0, 0.64167],
        
            "70": [0, 0.69444, 0, 0, 0.61111],
        
            "71": [0, 0.69444, 0, 0, 0.73334],
        
            "72": [0, 0.69444, 0, 0, 0.79445],
        
            "73": [0, 0.69444, 0, 0, 0.33056],
        
            "74": [0, 0.69444, 0, 0, 0.51945],
        
            "75": [0, 0.69444, 0, 0, 0.76389],
        
            "76": [0, 0.69444, 0, 0, 0.58056],
        
            "77": [0, 0.69444, 0, 0, 0.97778],
        
            "78": [0, 0.69444, 0, 0, 0.79445],
        
            "79": [0, 0.69444, 0, 0, 0.79445],
        
            "80": [0, 0.69444, 0, 0, 0.70278],
        
            "81": [0.10556, 0.69444, 0, 0, 0.79445],
        
            "82": [0, 0.69444, 0, 0, 0.70278],
        
            "83": [0, 0.69444, 0, 0, 0.61111],
        
            "84": [0, 0.69444, 0, 0, 0.73334],
        
            "85": [0, 0.69444, 0, 0, 0.76389],
        
            "86": [0, 0.69444, 0.01528, 0, 0.73334],
        
            "87": [0, 0.69444, 0.01528, 0, 1.03889],
        
            "88": [0, 0.69444, 0, 0, 0.73334],
        
            "89": [0, 0.69444, 0.0275, 0, 0.73334],
        
            "90": [0, 0.69444, 0, 0, 0.67223],
        
            "91": [0.25, 0.75, 0, 0, 0.34306],
        
            "93": [0.25, 0.75, 0, 0, 0.34306],
        
            "94": [0, 0.69444, 0, 0, 0.55],
        
            "95": [0.35, 0.10833, 0.03056, 0, 0.55],
        
            "97": [0, 0.45833, 0, 0, 0.525],
        
            "98": [0, 0.69444, 0, 0, 0.56111],
        
            "99": [0, 0.45833, 0, 0, 0.48889],
        
            "100": [0, 0.69444, 0, 0, 0.56111],
        
            "101": [0, 0.45833, 0, 0, 0.51111],
        
            "102": [0, 0.69444, 0.07639, 0, 0.33611],
        
            "103": [0.19444, 0.45833, 0.01528, 0, 0.55],
        
            "104": [0, 0.69444, 0, 0, 0.56111],
        
            "105": [0, 0.69444, 0, 0, 0.25556],
        
            "106": [0.19444, 0.69444, 0, 0, 0.28611],
        
            "107": [0, 0.69444, 0, 0, 0.53056],
        
            "108": [0, 0.69444, 0, 0, 0.25556],
        
            "109": [0, 0.45833, 0, 0, 0.86667],
        
            "110": [0, 0.45833, 0, 0, 0.56111],
        
            "111": [0, 0.45833, 0, 0, 0.55],
        
            "112": [0.19444, 0.45833, 0, 0, 0.56111],
        
            "113": [0.19444, 0.45833, 0, 0, 0.56111],
        
            "114": [0, 0.45833, 0.01528, 0, 0.37222],
        
            "115": [0, 0.45833, 0, 0, 0.42167],
        
            "116": [0, 0.58929, 0, 0, 0.40417],
        
            "117": [0, 0.45833, 0, 0, 0.56111],
        
            "118": [0, 0.45833, 0.01528, 0, 0.5],
        
            "119": [0, 0.45833, 0.01528, 0, 0.74445],
        
            "120": [0, 0.45833, 0, 0, 0.5],
        
            "121": [0.19444, 0.45833, 0.01528, 0, 0.5],
        
            "122": [0, 0.45833, 0, 0, 0.47639],
        
            "126": [0.35, 0.34444, 0, 0, 0.55],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "168": [0, 0.69444, 0, 0, 0.55],
        
            "176": [0, 0.69444, 0, 0, 0.73334],
        
            "180": [0, 0.69444, 0, 0, 0.55],
        
            "184": [0.17014, 0, 0, 0, 0.48889],
        
            "305": [0, 0.45833, 0, 0, 0.25556],
        
            "567": [0.19444, 0.45833, 0, 0, 0.28611],
        
            "710": [0, 0.69444, 0, 0, 0.55],
        
            "711": [0, 0.63542, 0, 0, 0.55],
        
            "713": [0, 0.63778, 0, 0, 0.55],
        
            "728": [0, 0.69444, 0, 0, 0.55],
        
            "729": [0, 0.69444, 0, 0, 0.30556],
        
            "730": [0, 0.69444, 0, 0, 0.73334],
        
            "732": [0, 0.69444, 0, 0, 0.55],
        
            "733": [0, 0.69444, 0, 0, 0.55],
        
            "915": [0, 0.69444, 0, 0, 0.58056],
        
            "916": [0, 0.69444, 0, 0, 0.91667],
        
            "920": [0, 0.69444, 0, 0, 0.85556],
        
            "923": [0, 0.69444, 0, 0, 0.67223],
        
            "926": [0, 0.69444, 0, 0, 0.73334],
        
            "928": [0, 0.69444, 0, 0, 0.79445],
        
            "931": [0, 0.69444, 0, 0, 0.79445],
        
            "933": [0, 0.69444, 0, 0, 0.85556],
        
            "934": [0, 0.69444, 0, 0, 0.79445],
        
            "936": [0, 0.69444, 0, 0, 0.85556],
        
            "937": [0, 0.69444, 0, 0, 0.79445],
        
            "8211": [0, 0.45833, 0.03056, 0, 0.55],
        
            "8212": [0, 0.45833, 0.03056, 0, 1.10001],
        
            "8216": [0, 0.69444, 0, 0, 0.30556],
        
            "8217": [0, 0.69444, 0, 0, 0.30556],
        
            "8220": [0, 0.69444, 0, 0, 0.55834],
        
            "8221": [0, 0.69444, 0, 0, 0.55834]
        
          },
        
          "SansSerif-Italic": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "33": [0, 0.69444, 0.05733, 0, 0.31945],
        
            "34": [0, 0.69444, 0.00316, 0, 0.5],
        
            "35": [0.19444, 0.69444, 0.05087, 0, 0.83334],
        
            "36": [0.05556, 0.75, 0.11156, 0, 0.5],
        
            "37": [0.05556, 0.75, 0.03126, 0, 0.83334],
        
            "38": [0, 0.69444, 0.03058, 0, 0.75834],
        
            "39": [0, 0.69444, 0.07816, 0, 0.27778],
        
            "40": [0.25, 0.75, 0.13164, 0, 0.38889],
        
            "41": [0.25, 0.75, 0.02536, 0, 0.38889],
        
            "42": [0, 0.75, 0.11775, 0, 0.5],
        
            "43": [0.08333, 0.58333, 0.02536, 0, 0.77778],
        
            "44": [0.125, 0.08333, 0, 0, 0.27778],
        
            "45": [0, 0.44444, 0.01946, 0, 0.33333],
        
            "46": [0, 0.08333, 0, 0, 0.27778],
        
            "47": [0.25, 0.75, 0.13164, 0, 0.5],
        
            "48": [0, 0.65556, 0.11156, 0, 0.5],
        
            "49": [0, 0.65556, 0.11156, 0, 0.5],
        
            "50": [0, 0.65556, 0.11156, 0, 0.5],
        
            "51": [0, 0.65556, 0.11156, 0, 0.5],
        
            "52": [0, 0.65556, 0.11156, 0, 0.5],
        
            "53": [0, 0.65556, 0.11156, 0, 0.5],
        
            "54": [0, 0.65556, 0.11156, 0, 0.5],
        
            "55": [0, 0.65556, 0.11156, 0, 0.5],
        
            "56": [0, 0.65556, 0.11156, 0, 0.5],
        
            "57": [0, 0.65556, 0.11156, 0, 0.5],
        
            "58": [0, 0.44444, 0.02502, 0, 0.27778],
        
            "59": [0.125, 0.44444, 0.02502, 0, 0.27778],
        
            "61": [-0.13, 0.37, 0.05087, 0, 0.77778],
        
            "63": [0, 0.69444, 0.11809, 0, 0.47222],
        
            "64": [0, 0.69444, 0.07555, 0, 0.66667],
        
            "65": [0, 0.69444, 0, 0, 0.66667],
        
            "66": [0, 0.69444, 0.08293, 0, 0.66667],
        
            "67": [0, 0.69444, 0.11983, 0, 0.63889],
        
            "68": [0, 0.69444, 0.07555, 0, 0.72223],
        
            "69": [0, 0.69444, 0.11983, 0, 0.59722],
        
            "70": [0, 0.69444, 0.13372, 0, 0.56945],
        
            "71": [0, 0.69444, 0.11983, 0, 0.66667],
        
            "72": [0, 0.69444, 0.08094, 0, 0.70834],
        
            "73": [0, 0.69444, 0.13372, 0, 0.27778],
        
            "74": [0, 0.69444, 0.08094, 0, 0.47222],
        
            "75": [0, 0.69444, 0.11983, 0, 0.69445],
        
            "76": [0, 0.69444, 0, 0, 0.54167],
        
            "77": [0, 0.69444, 0.08094, 0, 0.875],
        
            "78": [0, 0.69444, 0.08094, 0, 0.70834],
        
            "79": [0, 0.69444, 0.07555, 0, 0.73611],
        
            "80": [0, 0.69444, 0.08293, 0, 0.63889],
        
            "81": [0.125, 0.69444, 0.07555, 0, 0.73611],
        
            "82": [0, 0.69444, 0.08293, 0, 0.64584],
        
            "83": [0, 0.69444, 0.09205, 0, 0.55556],
        
            "84": [0, 0.69444, 0.13372, 0, 0.68056],
        
            "85": [0, 0.69444, 0.08094, 0, 0.6875],
        
            "86": [0, 0.69444, 0.1615, 0, 0.66667],
        
            "87": [0, 0.69444, 0.1615, 0, 0.94445],
        
            "88": [0, 0.69444, 0.13372, 0, 0.66667],
        
            "89": [0, 0.69444, 0.17261, 0, 0.66667],
        
            "90": [0, 0.69444, 0.11983, 0, 0.61111],
        
            "91": [0.25, 0.75, 0.15942, 0, 0.28889],
        
            "93": [0.25, 0.75, 0.08719, 0, 0.28889],
        
            "94": [0, 0.69444, 0.0799, 0, 0.5],
        
            "95": [0.35, 0.09444, 0.08616, 0, 0.5],
        
            "97": [0, 0.44444, 0.00981, 0, 0.48056],
        
            "98": [0, 0.69444, 0.03057, 0, 0.51667],
        
            "99": [0, 0.44444, 0.08336, 0, 0.44445],
        
            "100": [0, 0.69444, 0.09483, 0, 0.51667],
        
            "101": [0, 0.44444, 0.06778, 0, 0.44445],
        
            "102": [0, 0.69444, 0.21705, 0, 0.30556],
        
            "103": [0.19444, 0.44444, 0.10836, 0, 0.5],
        
            "104": [0, 0.69444, 0.01778, 0, 0.51667],
        
            "105": [0, 0.67937, 0.09718, 0, 0.23889],
        
            "106": [0.19444, 0.67937, 0.09162, 0, 0.26667],
        
            "107": [0, 0.69444, 0.08336, 0, 0.48889],
        
            "108": [0, 0.69444, 0.09483, 0, 0.23889],
        
            "109": [0, 0.44444, 0.01778, 0, 0.79445],
        
            "110": [0, 0.44444, 0.01778, 0, 0.51667],
        
            "111": [0, 0.44444, 0.06613, 0, 0.5],
        
            "112": [0.19444, 0.44444, 0.0389, 0, 0.51667],
        
            "113": [0.19444, 0.44444, 0.04169, 0, 0.51667],
        
            "114": [0, 0.44444, 0.10836, 0, 0.34167],
        
            "115": [0, 0.44444, 0.0778, 0, 0.38333],
        
            "116": [0, 0.57143, 0.07225, 0, 0.36111],
        
            "117": [0, 0.44444, 0.04169, 0, 0.51667],
        
            "118": [0, 0.44444, 0.10836, 0, 0.46111],
        
            "119": [0, 0.44444, 0.10836, 0, 0.68334],
        
            "120": [0, 0.44444, 0.09169, 0, 0.46111],
        
            "121": [0.19444, 0.44444, 0.10836, 0, 0.46111],
        
            "122": [0, 0.44444, 0.08752, 0, 0.43472],
        
            "126": [0.35, 0.32659, 0.08826, 0, 0.5],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "168": [0, 0.67937, 0.06385, 0, 0.5],
        
            "176": [0, 0.69444, 0, 0, 0.73752],
        
            "184": [0.17014, 0, 0, 0, 0.44445],
        
            "305": [0, 0.44444, 0.04169, 0, 0.23889],
        
            "567": [0.19444, 0.44444, 0.04169, 0, 0.26667],
        
            "710": [0, 0.69444, 0.0799, 0, 0.5],
        
            "711": [0, 0.63194, 0.08432, 0, 0.5],
        
            "713": [0, 0.60889, 0.08776, 0, 0.5],
        
            "714": [0, 0.69444, 0.09205, 0, 0.5],
        
            "715": [0, 0.69444, 0, 0, 0.5],
        
            "728": [0, 0.69444, 0.09483, 0, 0.5],
        
            "729": [0, 0.67937, 0.07774, 0, 0.27778],
        
            "730": [0, 0.69444, 0, 0, 0.73752],
        
            "732": [0, 0.67659, 0.08826, 0, 0.5],
        
            "733": [0, 0.69444, 0.09205, 0, 0.5],
        
            "915": [0, 0.69444, 0.13372, 0, 0.54167],
        
            "916": [0, 0.69444, 0, 0, 0.83334],
        
            "920": [0, 0.69444, 0.07555, 0, 0.77778],
        
            "923": [0, 0.69444, 0, 0, 0.61111],
        
            "926": [0, 0.69444, 0.12816, 0, 0.66667],
        
            "928": [0, 0.69444, 0.08094, 0, 0.70834],
        
            "931": [0, 0.69444, 0.11983, 0, 0.72222],
        
            "933": [0, 0.69444, 0.09031, 0, 0.77778],
        
            "934": [0, 0.69444, 0.04603, 0, 0.72222],
        
            "936": [0, 0.69444, 0.09031, 0, 0.77778],
        
            "937": [0, 0.69444, 0.08293, 0, 0.72222],
        
            "8211": [0, 0.44444, 0.08616, 0, 0.5],
        
            "8212": [0, 0.44444, 0.08616, 0, 1.0],
        
            "8216": [0, 0.69444, 0.07816, 0, 0.27778],
        
            "8217": [0, 0.69444, 0.07816, 0, 0.27778],
        
            "8220": [0, 0.69444, 0.14205, 0, 0.5],
        
            "8221": [0, 0.69444, 0.00316, 0, 0.5]
        
          },
        
          "SansSerif-Regular": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "33": [0, 0.69444, 0, 0, 0.31945],
        
            "34": [0, 0.69444, 0, 0, 0.5],
        
            "35": [0.19444, 0.69444, 0, 0, 0.83334],
        
            "36": [0.05556, 0.75, 0, 0, 0.5],
        
            "37": [0.05556, 0.75, 0, 0, 0.83334],
        
            "38": [0, 0.69444, 0, 0, 0.75834],
        
            "39": [0, 0.69444, 0, 0, 0.27778],
        
            "40": [0.25, 0.75, 0, 0, 0.38889],
        
            "41": [0.25, 0.75, 0, 0, 0.38889],
        
            "42": [0, 0.75, 0, 0, 0.5],
        
            "43": [0.08333, 0.58333, 0, 0, 0.77778],
        
            "44": [0.125, 0.08333, 0, 0, 0.27778],
        
            "45": [0, 0.44444, 0, 0, 0.33333],
        
            "46": [0, 0.08333, 0, 0, 0.27778],
        
            "47": [0.25, 0.75, 0, 0, 0.5],
        
            "48": [0, 0.65556, 0, 0, 0.5],
        
            "49": [0, 0.65556, 0, 0, 0.5],
        
            "50": [0, 0.65556, 0, 0, 0.5],
        
            "51": [0, 0.65556, 0, 0, 0.5],
        
            "52": [0, 0.65556, 0, 0, 0.5],
        
            "53": [0, 0.65556, 0, 0, 0.5],
        
            "54": [0, 0.65556, 0, 0, 0.5],
        
            "55": [0, 0.65556, 0, 0, 0.5],
        
            "56": [0, 0.65556, 0, 0, 0.5],
        
            "57": [0, 0.65556, 0, 0, 0.5],
        
            "58": [0, 0.44444, 0, 0, 0.27778],
        
            "59": [0.125, 0.44444, 0, 0, 0.27778],
        
            "61": [-0.13, 0.37, 0, 0, 0.77778],
        
            "63": [0, 0.69444, 0, 0, 0.47222],
        
            "64": [0, 0.69444, 0, 0, 0.66667],
        
            "65": [0, 0.69444, 0, 0, 0.66667],
        
            "66": [0, 0.69444, 0, 0, 0.66667],
        
            "67": [0, 0.69444, 0, 0, 0.63889],
        
            "68": [0, 0.69444, 0, 0, 0.72223],
        
            "69": [0, 0.69444, 0, 0, 0.59722],
        
            "70": [0, 0.69444, 0, 0, 0.56945],
        
            "71": [0, 0.69444, 0, 0, 0.66667],
        
            "72": [0, 0.69444, 0, 0, 0.70834],
        
            "73": [0, 0.69444, 0, 0, 0.27778],
        
            "74": [0, 0.69444, 0, 0, 0.47222],
        
            "75": [0, 0.69444, 0, 0, 0.69445],
        
            "76": [0, 0.69444, 0, 0, 0.54167],
        
            "77": [0, 0.69444, 0, 0, 0.875],
        
            "78": [0, 0.69444, 0, 0, 0.70834],
        
            "79": [0, 0.69444, 0, 0, 0.73611],
        
            "80": [0, 0.69444, 0, 0, 0.63889],
        
            "81": [0.125, 0.69444, 0, 0, 0.73611],
        
            "82": [0, 0.69444, 0, 0, 0.64584],
        
            "83": [0, 0.69444, 0, 0, 0.55556],
        
            "84": [0, 0.69444, 0, 0, 0.68056],
        
            "85": [0, 0.69444, 0, 0, 0.6875],
        
            "86": [0, 0.69444, 0.01389, 0, 0.66667],
        
            "87": [0, 0.69444, 0.01389, 0, 0.94445],
        
            "88": [0, 0.69444, 0, 0, 0.66667],
        
            "89": [0, 0.69444, 0.025, 0, 0.66667],
        
            "90": [0, 0.69444, 0, 0, 0.61111],
        
            "91": [0.25, 0.75, 0, 0, 0.28889],
        
            "93": [0.25, 0.75, 0, 0, 0.28889],
        
            "94": [0, 0.69444, 0, 0, 0.5],
        
            "95": [0.35, 0.09444, 0.02778, 0, 0.5],
        
            "97": [0, 0.44444, 0, 0, 0.48056],
        
            "98": [0, 0.69444, 0, 0, 0.51667],
        
            "99": [0, 0.44444, 0, 0, 0.44445],
        
            "100": [0, 0.69444, 0, 0, 0.51667],
        
            "101": [0, 0.44444, 0, 0, 0.44445],
        
            "102": [0, 0.69444, 0.06944, 0, 0.30556],
        
            "103": [0.19444, 0.44444, 0.01389, 0, 0.5],
        
            "104": [0, 0.69444, 0, 0, 0.51667],
        
            "105": [0, 0.67937, 0, 0, 0.23889],
        
            "106": [0.19444, 0.67937, 0, 0, 0.26667],
        
            "107": [0, 0.69444, 0, 0, 0.48889],
        
            "108": [0, 0.69444, 0, 0, 0.23889],
        
            "109": [0, 0.44444, 0, 0, 0.79445],
        
            "110": [0, 0.44444, 0, 0, 0.51667],
        
            "111": [0, 0.44444, 0, 0, 0.5],
        
            "112": [0.19444, 0.44444, 0, 0, 0.51667],
        
            "113": [0.19444, 0.44444, 0, 0, 0.51667],
        
            "114": [0, 0.44444, 0.01389, 0, 0.34167],
        
            "115": [0, 0.44444, 0, 0, 0.38333],
        
            "116": [0, 0.57143, 0, 0, 0.36111],
        
            "117": [0, 0.44444, 0, 0, 0.51667],
        
            "118": [0, 0.44444, 0.01389, 0, 0.46111],
        
            "119": [0, 0.44444, 0.01389, 0, 0.68334],
        
            "120": [0, 0.44444, 0, 0, 0.46111],
        
            "121": [0.19444, 0.44444, 0.01389, 0, 0.46111],
        
            "122": [0, 0.44444, 0, 0, 0.43472],
        
            "126": [0.35, 0.32659, 0, 0, 0.5],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "168": [0, 0.67937, 0, 0, 0.5],
        
            "176": [0, 0.69444, 0, 0, 0.66667],
        
            "184": [0.17014, 0, 0, 0, 0.44445],
        
            "305": [0, 0.44444, 0, 0, 0.23889],
        
            "567": [0.19444, 0.44444, 0, 0, 0.26667],
        
            "710": [0, 0.69444, 0, 0, 0.5],
        
            "711": [0, 0.63194, 0, 0, 0.5],
        
            "713": [0, 0.60889, 0, 0, 0.5],
        
            "714": [0, 0.69444, 0, 0, 0.5],
        
            "715": [0, 0.69444, 0, 0, 0.5],
        
            "728": [0, 0.69444, 0, 0, 0.5],
        
            "729": [0, 0.67937, 0, 0, 0.27778],
        
            "730": [0, 0.69444, 0, 0, 0.66667],
        
            "732": [0, 0.67659, 0, 0, 0.5],
        
            "733": [0, 0.69444, 0, 0, 0.5],
        
            "915": [0, 0.69444, 0, 0, 0.54167],
        
            "916": [0, 0.69444, 0, 0, 0.83334],
        
            "920": [0, 0.69444, 0, 0, 0.77778],
        
            "923": [0, 0.69444, 0, 0, 0.61111],
        
            "926": [0, 0.69444, 0, 0, 0.66667],
        
            "928": [0, 0.69444, 0, 0, 0.70834],
        
            "931": [0, 0.69444, 0, 0, 0.72222],
        
            "933": [0, 0.69444, 0, 0, 0.77778],
        
            "934": [0, 0.69444, 0, 0, 0.72222],
        
            "936": [0, 0.69444, 0, 0, 0.77778],
        
            "937": [0, 0.69444, 0, 0, 0.72222],
        
            "8211": [0, 0.44444, 0.02778, 0, 0.5],
        
            "8212": [0, 0.44444, 0.02778, 0, 1.0],
        
            "8216": [0, 0.69444, 0, 0, 0.27778],
        
            "8217": [0, 0.69444, 0, 0, 0.27778],
        
            "8220": [0, 0.69444, 0, 0, 0.5],
        
            "8221": [0, 0.69444, 0, 0, 0.5]
        
          },
        
          "Script-Regular": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "65": [0, 0.7, 0.22925, 0, 0.80253],
        
            "66": [0, 0.7, 0.04087, 0, 0.90757],
        
            "67": [0, 0.7, 0.1689, 0, 0.66619],
        
            "68": [0, 0.7, 0.09371, 0, 0.77443],
        
            "69": [0, 0.7, 0.18583, 0, 0.56162],
        
            "70": [0, 0.7, 0.13634, 0, 0.89544],
        
            "71": [0, 0.7, 0.17322, 0, 0.60961],
        
            "72": [0, 0.7, 0.29694, 0, 0.96919],
        
            "73": [0, 0.7, 0.19189, 0, 0.80907],
        
            "74": [0.27778, 0.7, 0.19189, 0, 1.05159],
        
            "75": [0, 0.7, 0.31259, 0, 0.91364],
        
            "76": [0, 0.7, 0.19189, 0, 0.87373],
        
            "77": [0, 0.7, 0.15981, 0, 1.08031],
        
            "78": [0, 0.7, 0.3525, 0, 0.9015],
        
            "79": [0, 0.7, 0.08078, 0, 0.73787],
        
            "80": [0, 0.7, 0.08078, 0, 1.01262],
        
            "81": [0, 0.7, 0.03305, 0, 0.88282],
        
            "82": [0, 0.7, 0.06259, 0, 0.85],
        
            "83": [0, 0.7, 0.19189, 0, 0.86767],
        
            "84": [0, 0.7, 0.29087, 0, 0.74697],
        
            "85": [0, 0.7, 0.25815, 0, 0.79996],
        
            "86": [0, 0.7, 0.27523, 0, 0.62204],
        
            "87": [0, 0.7, 0.27523, 0, 0.80532],
        
            "88": [0, 0.7, 0.26006, 0, 0.94445],
        
            "89": [0, 0.7, 0.2939, 0, 0.70961],
        
            "90": [0, 0.7, 0.24037, 0, 0.8212],
        
            "160": [0, 0, 0, 0, 0.25]
        
          },
        
          "Size1-Regular": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "40": [0.35001, 0.85, 0, 0, 0.45834],
        
            "41": [0.35001, 0.85, 0, 0, 0.45834],
        
            "47": [0.35001, 0.85, 0, 0, 0.57778],
        
            "91": [0.35001, 0.85, 0, 0, 0.41667],
        
            "92": [0.35001, 0.85, 0, 0, 0.57778],
        
            "93": [0.35001, 0.85, 0, 0, 0.41667],
        
            "123": [0.35001, 0.85, 0, 0, 0.58334],
        
            "125": [0.35001, 0.85, 0, 0, 0.58334],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "710": [0, 0.72222, 0, 0, 0.55556],
        
            "732": [0, 0.72222, 0, 0, 0.55556],
        
            "770": [0, 0.72222, 0, 0, 0.55556],
        
            "771": [0, 0.72222, 0, 0, 0.55556],
        
            "8214": [-0.00099, 0.601, 0, 0, 0.77778],
        
            "8593": [1e-05, 0.6, 0, 0, 0.66667],
        
            "8595": [1e-05, 0.6, 0, 0, 0.66667],
        
            "8657": [1e-05, 0.6, 0, 0, 0.77778],
        
            "8659": [1e-05, 0.6, 0, 0, 0.77778],
        
            "8719": [0.25001, 0.75, 0, 0, 0.94445],
        
            "8720": [0.25001, 0.75, 0, 0, 0.94445],
        
            "8721": [0.25001, 0.75, 0, 0, 1.05556],
        
            "8730": [0.35001, 0.85, 0, 0, 1.0],
        
            "8739": [-0.00599, 0.606, 0, 0, 0.33333],
        
            "8741": [-0.00599, 0.606, 0, 0, 0.55556],
        
            "8747": [0.30612, 0.805, 0.19445, 0, 0.47222],
        
            "8748": [0.306, 0.805, 0.19445, 0, 0.47222],
        
            "8749": [0.306, 0.805, 0.19445, 0, 0.47222],
        
            "8750": [0.30612, 0.805, 0.19445, 0, 0.47222],
        
            "8896": [0.25001, 0.75, 0, 0, 0.83334],
        
            "8897": [0.25001, 0.75, 0, 0, 0.83334],
        
            "8898": [0.25001, 0.75, 0, 0, 0.83334],
        
            "8899": [0.25001, 0.75, 0, 0, 0.83334],
        
            "8968": [0.35001, 0.85, 0, 0, 0.47222],
        
            "8969": [0.35001, 0.85, 0, 0, 0.47222],
        
            "8970": [0.35001, 0.85, 0, 0, 0.47222],
        
            "8971": [0.35001, 0.85, 0, 0, 0.47222],
        
            "9168": [-0.00099, 0.601, 0, 0, 0.66667],
        
            "10216": [0.35001, 0.85, 0, 0, 0.47222],
        
            "10217": [0.35001, 0.85, 0, 0, 0.47222],
        
            "10752": [0.25001, 0.75, 0, 0, 1.11111],
        
            "10753": [0.25001, 0.75, 0, 0, 1.11111],
        
            "10754": [0.25001, 0.75, 0, 0, 1.11111],
        
            "10756": [0.25001, 0.75, 0, 0, 0.83334],
        
            "10758": [0.25001, 0.75, 0, 0, 0.83334]
        
          },
        
          "Size2-Regular": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "40": [0.65002, 1.15, 0, 0, 0.59722],
        
            "41": [0.65002, 1.15, 0, 0, 0.59722],
        
            "47": [0.65002, 1.15, 0, 0, 0.81111],
        
            "91": [0.65002, 1.15, 0, 0, 0.47222],
        
            "92": [0.65002, 1.15, 0, 0, 0.81111],
        
            "93": [0.65002, 1.15, 0, 0, 0.47222],
        
            "123": [0.65002, 1.15, 0, 0, 0.66667],
        
            "125": [0.65002, 1.15, 0, 0, 0.66667],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "710": [0, 0.75, 0, 0, 1.0],
        
            "732": [0, 0.75, 0, 0, 1.0],
        
            "770": [0, 0.75, 0, 0, 1.0],
        
            "771": [0, 0.75, 0, 0, 1.0],
        
            "8719": [0.55001, 1.05, 0, 0, 1.27778],
        
            "8720": [0.55001, 1.05, 0, 0, 1.27778],
        
            "8721": [0.55001, 1.05, 0, 0, 1.44445],
        
            "8730": [0.65002, 1.15, 0, 0, 1.0],
        
            "8747": [0.86225, 1.36, 0.44445, 0, 0.55556],
        
            "8748": [0.862, 1.36, 0.44445, 0, 0.55556],
        
            "8749": [0.862, 1.36, 0.44445, 0, 0.55556],
        
            "8750": [0.86225, 1.36, 0.44445, 0, 0.55556],
        
            "8896": [0.55001, 1.05, 0, 0, 1.11111],
        
            "8897": [0.55001, 1.05, 0, 0, 1.11111],
        
            "8898": [0.55001, 1.05, 0, 0, 1.11111],
        
            "8899": [0.55001, 1.05, 0, 0, 1.11111],
        
            "8968": [0.65002, 1.15, 0, 0, 0.52778],
        
            "8969": [0.65002, 1.15, 0, 0, 0.52778],
        
            "8970": [0.65002, 1.15, 0, 0, 0.52778],
        
            "8971": [0.65002, 1.15, 0, 0, 0.52778],
        
            "10216": [0.65002, 1.15, 0, 0, 0.61111],
        
            "10217": [0.65002, 1.15, 0, 0, 0.61111],
        
            "10752": [0.55001, 1.05, 0, 0, 1.51112],
        
            "10753": [0.55001, 1.05, 0, 0, 1.51112],
        
            "10754": [0.55001, 1.05, 0, 0, 1.51112],
        
            "10756": [0.55001, 1.05, 0, 0, 1.11111],
        
            "10758": [0.55001, 1.05, 0, 0, 1.11111]
        
          },
        
          "Size3-Regular": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "40": [0.95003, 1.45, 0, 0, 0.73611],
        
            "41": [0.95003, 1.45, 0, 0, 0.73611],
        
            "47": [0.95003, 1.45, 0, 0, 1.04445],
        
            "91": [0.95003, 1.45, 0, 0, 0.52778],
        
            "92": [0.95003, 1.45, 0, 0, 1.04445],
        
            "93": [0.95003, 1.45, 0, 0, 0.52778],
        
            "123": [0.95003, 1.45, 0, 0, 0.75],
        
            "125": [0.95003, 1.45, 0, 0, 0.75],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "710": [0, 0.75, 0, 0, 1.44445],
        
            "732": [0, 0.75, 0, 0, 1.44445],
        
            "770": [0, 0.75, 0, 0, 1.44445],
        
            "771": [0, 0.75, 0, 0, 1.44445],
        
            "8730": [0.95003, 1.45, 0, 0, 1.0],
        
            "8968": [0.95003, 1.45, 0, 0, 0.58334],
        
            "8969": [0.95003, 1.45, 0, 0, 0.58334],
        
            "8970": [0.95003, 1.45, 0, 0, 0.58334],
        
            "8971": [0.95003, 1.45, 0, 0, 0.58334],
        
            "10216": [0.95003, 1.45, 0, 0, 0.75],
        
            "10217": [0.95003, 1.45, 0, 0, 0.75]
        
          },
        
          "Size4-Regular": {
        
            "32": [0, 0, 0, 0, 0.25],
        
            "40": [1.25003, 1.75, 0, 0, 0.79167],
        
            "41": [1.25003, 1.75, 0, 0, 0.79167],
        
            "47": [1.25003, 1.75, 0, 0, 1.27778],
        
            "91": [1.25003, 1.75, 0, 0, 0.58334],
        
            "92": [1.25003, 1.75, 0, 0, 1.27778],
        
            "93": [1.25003, 1.75, 0, 0, 0.58334],
        
            "123": [1.25003, 1.75, 0, 0, 0.80556],
        
            "125": [1.25003, 1.75, 0, 0, 0.80556],
        
            "160": [0, 0, 0, 0, 0.25],
        
            "710": [0, 0.825, 0, 0, 1.8889],
        
            "732": [0, 0.825, 0, 0, 1.8889],
        
            "770": [0, 0.825, 0, 0, 1.8889],
        
            "771": [0, 0.825, 0, 0, 1.8889],
        
            "8730": [1.25003, 1.75, 0, 0, 1.0],
        
            "8968": [1.25003, 1.75, 0, 0, 0.63889],
        
            "8969": [1.25003, 1.75, 0, 0, 0.63889],
        
            "8970": [1.25003, 1.75, 0, 0, 0.63889],
        
            "8971": [1.25003, 1.75, 0, 0, 0.63889],
        
            "9115": [0.64502, 1.155, 0, 0, 0.875],
        
            "9116": [1e-05, 0.6, 0, 0, 0.875],
        
            "9117": [0.64502, 1.155, 0, 0, 0.875],
        
            "9118": [0.64502, 1.155, 0, 0, 0.875],
        
            "9119": [1e-05, 0.6, 0, 0, 0.875],
        
            "9120": [0.64502, 1.155, 0, 0, 0.875],
        
            "9121": [0.64502, 1.155, 0, 0, 0.66667],
        
            "9122": [-0.00099, 0.601, 0, 0, 0.66667],
        
            "9123": [0.64502, 1.155, 0, 0, 0.66667],
        
            "9124": [0.64502, 1.155, 0, 0, 0.66667],
        
            "9125": [-0.00099, 0.601, 0, 0, 0.66667],
        
            "9126": [0.64502, 1.155, 0, 0, 0.66667],
        
            "9127": [1e-05, 0.9, 0, 0, 0.88889],
        
            "9128": [0.65002, 1.15, 0, 0, 0.88889],
        
            "9129": [0.90001, 0, 0, 0, 0.88889],
        
            "9130": [0, 0.3, 0, 0, 0.88889],
        
            "9131": [1e-05, 0.9, 0, 0, 0.88889],
        
            "9132": [0.65002, 1.15, 0, 0, 0.88889],
        
            "9133": [0.90001, 0, 0, 0, 0.88889],
        
            "9143": [0.88502, 0.915, 0, 0, 1.05556],
        
            "10216": [1.25003, 1.75, 0, 0, 0.80556],
        
            "10217": [1.25003, 1.75, 0, 0, 0.80556],
        
            "57344": [-0.00499, 0.605, 0, 0, 1.05556],
        
            "57345": [-0.00499, 0.605, 0, 0, 1.05556],
        
            "57680": [0, 0.12, 0, 0, 0.45],
        
            "57681": [0, 0.12, 0, 0, 0.45],
        
            "57682": [0, 0.12, 0, 0, 0.45],
        
            "57683": [0, 0.12, 0, 0, 0.45]
        
          },
        
          "Typewriter-Regular": {
        
            "32": [0, 0, 0, 0, 0.525],
        
            "33": [0, 0.61111, 0, 0, 0.525],
        
            "34": [0, 0.61111, 0, 0, 0.525],
        
            "35": [0, 0.61111, 0, 0, 0.525],
        
            "36": [0.08333, 0.69444, 0, 0, 0.525],
        
            "37": [0.08333, 0.69444, 0, 0, 0.525],
        
            "38": [0, 0.61111, 0, 0, 0.525],
        
            "39": [0, 0.61111, 0, 0, 0.525],
        
            "40": [0.08333, 0.69444, 0, 0, 0.525],
        
            "41": [0.08333, 0.69444, 0, 0, 0.525],
        
            "42": [0, 0.52083, 0, 0, 0.525],
        
            "43": [-0.08056, 0.53055, 0, 0, 0.525],
        
            "44": [0.13889, 0.125, 0, 0, 0.525],
        
            "45": [-0.08056, 0.53055, 0, 0, 0.525],
        
            "46": [0, 0.125, 0, 0, 0.525],
        
            "47": [0.08333, 0.69444, 0, 0, 0.525],
        
            "48": [0, 0.61111, 0, 0, 0.525],
        
            "49": [0, 0.61111, 0, 0, 0.525],
        
            "50": [0, 0.61111, 0, 0, 0.525],
        
            "51": [0, 0.61111, 0, 0, 0.525],
        
            "52": [0, 0.61111, 0, 0, 0.525],
        
            "53": [0, 0.61111, 0, 0, 0.525],
        
            "54": [0, 0.61111, 0, 0, 0.525],
        
            "55": [0, 0.61111, 0, 0, 0.525],
        
            "56": [0, 0.61111, 0, 0, 0.525],
        
            "57": [0, 0.61111, 0, 0, 0.525],
        
            "58": [0, 0.43056, 0, 0, 0.525],
        
            "59": [0.13889, 0.43056, 0, 0, 0.525],
        
            "60": [-0.05556, 0.55556, 0, 0, 0.525],
        
            "61": [-0.19549, 0.41562, 0, 0, 0.525],
        
            "62": [-0.05556, 0.55556, 0, 0, 0.525],
        
            "63": [0, 0.61111, 0, 0, 0.525],
        
            "64": [0, 0.61111, 0, 0, 0.525],
        
            "65": [0, 0.61111, 0, 0, 0.525],
        
            "66": [0, 0.61111, 0, 0, 0.525],
        
            "67": [0, 0.61111, 0, 0, 0.525],
        
            "68": [0, 0.61111, 0, 0, 0.525],
        
            "69": [0, 0.61111, 0, 0, 0.525],
        
            "70": [0, 0.61111, 0, 0, 0.525],
        
            "71": [0, 0.61111, 0, 0, 0.525],
        
            "72": [0, 0.61111, 0, 0, 0.525],
        
            "73": [0, 0.61111, 0, 0, 0.525],
        
            "74": [0, 0.61111, 0, 0, 0.525],
        
            "75": [0, 0.61111, 0, 0, 0.525],
        
            "76": [0, 0.61111, 0, 0, 0.525],
        
            "77": [0, 0.61111, 0, 0, 0.525],
        
            "78": [0, 0.61111, 0, 0, 0.525],
        
            "79": [0, 0.61111, 0, 0, 0.525],
        
            "80": [0, 0.61111, 0, 0, 0.525],
        
            "81": [0.13889, 0.61111, 0, 0, 0.525],
        
            "82": [0, 0.61111, 0, 0, 0.525],
        
            "83": [0, 0.61111, 0, 0, 0.525],
        
            "84": [0, 0.61111, 0, 0, 0.525],
        
            "85": [0, 0.61111, 0, 0, 0.525],
        
            "86": [0, 0.61111, 0, 0, 0.525],
        
            "87": [0, 0.61111, 0, 0, 0.525],
        
            "88": [0, 0.61111, 0, 0, 0.525],
        
            "89": [0, 0.61111, 0, 0, 0.525],
        
            "90": [0, 0.61111, 0, 0, 0.525],
        
            "91": [0.08333, 0.69444, 0, 0, 0.525],
        
            "92": [0.08333, 0.69444, 0, 0, 0.525],
        
            "93": [0.08333, 0.69444, 0, 0, 0.525],
        
            "94": [0, 0.61111, 0, 0, 0.525],
        
            "95": [0.09514, 0, 0, 0, 0.525],
        
            "96": [0, 0.61111, 0, 0, 0.525],
        
            "97": [0, 0.43056, 0, 0, 0.525],
        
            "98": [0, 0.61111, 0, 0, 0.525],
        
            "99": [0, 0.43056, 0, 0, 0.525],
        
            "100": [0, 0.61111, 0, 0, 0.525],
        
            "101": [0, 0.43056, 0, 0, 0.525],
        
            "102": [0, 0.61111, 0, 0, 0.525],
        
            "103": [0.22222, 0.43056, 0, 0, 0.525],
        
            "104": [0, 0.61111, 0, 0, 0.525],
        
            "105": [0, 0.61111, 0, 0, 0.525],
        
            "106": [0.22222, 0.61111, 0, 0, 0.525],
        
            "107": [0, 0.61111, 0, 0, 0.525],
        
            "108": [0, 0.61111, 0, 0, 0.525],
        
            "109": [0, 0.43056, 0, 0, 0.525],
        
            "110": [0, 0.43056, 0, 0, 0.525],
        
            "111": [0, 0.43056, 0, 0, 0.525],
        
            "112": [0.22222, 0.43056, 0, 0, 0.525],
        
            "113": [0.22222, 0.43056, 0, 0, 0.525],
        
            "114": [0, 0.43056, 0, 0, 0.525],
        
            "115": [0, 0.43056, 0, 0, 0.525],
        
            "116": [0, 0.55358, 0, 0, 0.525],
        
            "117": [0, 0.43056, 0, 0, 0.525],
        
            "118": [0, 0.43056, 0, 0, 0.525],
        
            "119": [0, 0.43056, 0, 0, 0.525],
        
            "120": [0, 0.43056, 0, 0, 0.525],
        
            "121": [0.22222, 0.43056, 0, 0, 0.525],
        
            "122": [0, 0.43056, 0, 0, 0.525],
        
            "123": [0.08333, 0.69444, 0, 0, 0.525],
        
            "124": [0.08333, 0.69444, 0, 0, 0.525],
        
            "125": [0.08333, 0.69444, 0, 0, 0.525],
        
            "126": [0, 0.61111, 0, 0, 0.525],
        
            "127": [0, 0.61111, 0, 0, 0.525],
        
            "160": [0, 0, 0, 0, 0.525],
        
            "176": [0, 0.61111, 0, 0, 0.525],
        
            "184": [0.19445, 0, 0, 0, 0.525],
        
            "305": [0, 0.43056, 0, 0, 0.525],
        
            "567": [0.22222, 0.43056, 0, 0, 0.525],
        
            "711": [0, 0.56597, 0, 0, 0.525],
        
            "713": [0, 0.56555, 0, 0, 0.525],
        
            "714": [0, 0.61111, 0, 0, 0.525],
        
            "715": [0, 0.61111, 0, 0, 0.525],
        
            "728": [0, 0.61111, 0, 0, 0.525],
        
            "730": [0, 0.61111, 0, 0, 0.525],
        
            "770": [0, 0.61111, 0, 0, 0.525],
        
            "771": [0, 0.61111, 0, 0, 0.525],
        
            "776": [0, 0.61111, 0, 0, 0.525],
        
            "915": [0, 0.61111, 0, 0, 0.525],
        
            "916": [0, 0.61111, 0, 0, 0.525],
        
            "920": [0, 0.61111, 0, 0, 0.525],
        
            "923": [0, 0.61111, 0, 0, 0.525],
        
            "926": [0, 0.61111, 0, 0, 0.525],
        
            "928": [0, 0.61111, 0, 0, 0.525],
        
            "931": [0, 0.61111, 0, 0, 0.525],
        
            "933": [0, 0.61111, 0, 0, 0.525],
        
            "934": [0, 0.61111, 0, 0, 0.525],
        
            "936": [0, 0.61111, 0, 0, 0.525],
        
            "937": [0, 0.61111, 0, 0, 0.525],
        
            "8216": [0, 0.61111, 0, 0, 0.525],
        
            "8217": [0, 0.61111, 0, 0, 0.525],
        
            "8242": [0, 0.61111, 0, 0, 0.525],
        
            "9251": [0.11111, 0.21944, 0, 0, 0.525]
        
          }
        
        };
        
        
        
        /**
        
         * This file contains metrics regarding fonts and individual symbols. The sigma
        
         * and xi variables, as well as the metricMap map contain data extracted from
        
         * TeX, TeX font metrics, and the TTF files. These data are then exposed via the
        
         * `metrics` variable and the getCharacterMetrics function.
        
         */
        
        // In TeX, there are actually three sets of dimensions, one for each of
        
        // textstyle (size index 5 and higher: >=9pt), scriptstyle (size index 3 and 4:
        
        // 7-8pt), and scriptscriptstyle (size index 1 and 2: 5-6pt).  These are
        
        // provided in the arrays below, in that order.
        
        //
        
        // The font metrics are stored in fonts cmsy10, cmsy7, and cmsy5 respectively.
        
        // This was determined by running the following script:
        
        //
        
        //     latex -interaction=nonstopmode \
        
        //     '\documentclass{article}\usepackage{amsmath}\begin{document}' \
        
        //     '$a$ \expandafter\show\the\textfont2' \
        
        //     '\expandafter\show\the\scriptfont2' \
        
        //     '\expandafter\show\the\scriptscriptfont2' \
        
        //     '\stop'
        
        //
        
        // The metrics themselves were retrieved using the following commands:
        
        //
        
        //     tftopl cmsy10
        
        //     tftopl cmsy7
        
        //     tftopl cmsy5
        
        //
        
        // The output of each of these commands is quite lengthy.  The only part we
        
        // care about is the FONTDIMEN section. Each value is measured in EMs.
        
        var sigmasAndXis = {
        
          slant: [0.250, 0.250, 0.250],
        
          // sigma1
        
          space: [0.000, 0.000, 0.000],
        
          // sigma2
        
          stretch: [0.000, 0.000, 0.000],
        
          // sigma3
        
          shrink: [0.000, 0.000, 0.000],
        
          // sigma4
        
          xHeight: [0.431, 0.431, 0.431],
        
          // sigma5
        
          quad: [1.000, 1.171, 1.472],
        
          // sigma6
        
          extraSpace: [0.000, 0.000, 0.000],
        
          // sigma7
        
          num1: [0.677, 0.732, 0.925],
        
          // sigma8
        
          num2: [0.394, 0.384, 0.387],
        
          // sigma9
        
          num3: [0.444, 0.471, 0.504],
        
          // sigma10
        
          denom1: [0.686, 0.752, 1.025],
        
          // sigma11
        
          denom2: [0.345, 0.344, 0.532],
        
          // sigma12
        
          sup1: [0.413, 0.503, 0.504],
        
          // sigma13
        
          sup2: [0.363, 0.431, 0.404],
        
          // sigma14
        
          sup3: [0.289, 0.286, 0.294],
        
          // sigma15
        
          sub1: [0.150, 0.143, 0.200],
        
          // sigma16
        
          sub2: [0.247, 0.286, 0.400],
        
          // sigma17
        
          supDrop: [0.386, 0.353, 0.494],
        
          // sigma18
        
          subDrop: [0.050, 0.071, 0.100],
        
          // sigma19
        
          delim1: [2.390, 1.700, 1.980],
        
          // sigma20
        
          delim2: [1.010, 1.157, 1.420],
        
          // sigma21
        
          axisHeight: [0.250, 0.250, 0.250],
        
          // sigma22
        
          // These font metrics are extracted from TeX by using tftopl on cmex10.tfm;
        
          // they correspond to the font parameters of the extension fonts (family 3).
        
          // See the TeXbook, page 441. In AMSTeX, the extension fonts scale; to
        
          // match cmex7, we'd use cmex7.tfm values for script and scriptscript
        
          // values.
        
          defaultRuleThickness: [0.04, 0.049, 0.049],
        
          // xi8; cmex7: 0.049
        
          bigOpSpacing1: [0.111, 0.111, 0.111],
        
          // xi9
        
          bigOpSpacing2: [0.166, 0.166, 0.166],
        
          // xi10
        
          bigOpSpacing3: [0.2, 0.2, 0.2],
        
          // xi11
        
          bigOpSpacing4: [0.6, 0.611, 0.611],
        
          // xi12; cmex7: 0.611
        
          bigOpSpacing5: [0.1, 0.143, 0.143],
        
          // xi13; cmex7: 0.143
        
          // The \sqrt rule width is taken from the height of the surd character.
        
          // Since we use the same font at all sizes, this thickness doesn't scale.
        
          sqrtRuleThickness: [0.04, 0.04, 0.04],
        
          // This value determines how large a pt is, for metrics which are defined
        
          // in terms of pts.
        
          // This value is also used in katex.less; if you change it make sure the
        
          // values match.
        
          ptPerEm: [10.0, 10.0, 10.0],
        
          // The space between adjacent `|` columns in an array definition. From
        
          // `\showthe\doublerulesep` in LaTeX. Equals 2.0 / ptPerEm.
        
          doubleRuleSep: [0.2, 0.2, 0.2],
        
          // The width of separator lines in {array} environments. From
        
          // `\showthe\arrayrulewidth` in LaTeX. Equals 0.4 / ptPerEm.
        
          arrayRuleWidth: [0.04, 0.04, 0.04],
        
          // Two values from LaTeX source2e:
        
          fboxsep: [0.3, 0.3, 0.3],
        
          //        3 pt / ptPerEm
        
          fboxrule: [0.04, 0.04, 0.04] // 0.4 pt / ptPerEm
        
        
        
        }; // This map contains a mapping from font name and character code to character
        
        // should have Latin-1 and Cyrillic characters, but may not depending on the
        
        // operating system.  The metrics do not account for extra height from the
        
        // accents.  In the case of Cyrillic characters which have both ascenders and
        
        // descenders we prefer approximations with ascenders, primarily to prevent
        
        // the fraction bar or root line from intersecting the glyph.
        
        // TODO(kevinb) allow union of multiple glyph metrics for better accuracy.
        
        
        
        var extraCharacterMap = {
        
          // Latin-1
        
          'Å': 'A',
        
          'Ð': 'D',
        
          'Þ': 'o',
        
          'å': 'a',
        
          'ð': 'd',
        
          'þ': 'o',
        
          // Cyrillic
        
          'А': 'A',
        
          'Б': 'B',
        
          'В': 'B',
        
          'Г': 'F',
        
          'Д': 'A',
        
          'Е': 'E',
        
          'Ж': 'K',
        
          'З': '3',
        
          'И': 'N',
        
          'Й': 'N',
        
          'К': 'K',
        
          'Л': 'N',
        
          'М': 'M',
        
          'Н': 'H',
        
          'О': 'O',
        
          'П': 'N',
        
          'Р': 'P',
        
          'С': 'C',
        
          'Т': 'T',
        
          'У': 'y',
        
          'Ф': 'O',
        
          'Х': 'X',
        
          'Ц': 'U',
        
          'Ч': 'h',
        
          'Ш': 'W',
        
          'Щ': 'W',
        
          'Ъ': 'B',
        
          'Ы': 'X',
        
          'Ь': 'B',
        
          'Э': '3',
        
          'Ю': 'X',
        
          'Я': 'R',
        
          'а': 'a',
        
          'б': 'b',
        
          'в': 'a',
        
          'г': 'r',
        
          'д': 'y',
        
          'е': 'e',
        
          'ж': 'm',
        
          'з': 'e',
        
          'и': 'n',
        
          'й': 'n',
        
          'к': 'n',
        
          'л': 'n',
        
          'м': 'm',
        
          'н': 'n',
        
          'о': 'o',
        
          'п': 'n',
        
          'р': 'p',
        
          'с': 'c',
        
          'т': 'o',
        
          'у': 'y',
        
          'ф': 'b',
        
          'х': 'x',
        
          'ц': 'n',
        
          'ч': 'n',
        
          'ш': 'w',
        
          'щ': 'w',
        
          'ъ': 'a',
        
          'ы': 'm',
        
          'ь': 'a',
        
          'э': 'e',
        
          'ю': 'm',
        
          'я': 'r'
        
        };
        
        
        
        /**
        
         * This function adds new font metrics to default metricMap
        
         * It can also override existing metrics
        
         */
        
        function setFontMetrics(fontName, metrics) {
        
          fontMetricsData[fontName] = metrics;
        
        }
        
        /**
        
         * This function is a convenience function for looking up information in the
        
         * metricMap table. It takes a character as a string, and a font.
        
         *
        
         * Note: the `width` property may be undefined if fontMetricsData.js wasn't
        
         * built using `Make extended_metrics`.
        
         */
        
        
        
        function getCharacterMetrics(character, font, mode) {
        
          if (!fontMetricsData[font]) {
        
            throw new Error("Font metrics not found for font: " + font + ".");
        
          }
        
        
        
          var ch = character.charCodeAt(0);
        
          var metrics = fontMetricsData[font][ch];
        
        
        
          if (!metrics && character[0] in extraCharacterMap) {
        
            ch = extraCharacterMap[character[0]].charCodeAt(0);
        
            metrics = fontMetricsData[font][ch];
        
          }
        
        
        
          if (!metrics && mode === 'text') {
        
            // We don't typically have font metrics for Asian scripts.
        
            // But since we support them in text mode, we need to return
        
            // some sort of metrics.
        
            // So if the character is in a script we support but we
        
            // don't have metrics for it, just use the metrics for
        
            // the Latin capital letter M. This is close enough because
        
            // we (currently) only care about the height of the glyph
        
            // not its width.
        
            if (supportedCodepoint(ch)) {
        
              metrics = fontMetricsData[font][77]; // 77 is the charcode for 'M'
        
            }
        
          }
        
        
        
          if (metrics) {
        
            return {
        
              depth: metrics[0],
        
              height: metrics[1],
        
              italic: metrics[2],
        
              skew: metrics[3],
        
              width: metrics[4]
        
            };
        
          }
        
        }
        
        var fontMetricsBySizeIndex = {};
        
        /**
        
         * Get the font metrics for a given size.
        
         */
        
        
        
        function getGlobalMetrics(size) {
        
          var sizeIndex;
        
        
        
          if (size >= 5) {
        
            sizeIndex = 0;
        
          } else if (size >= 3) {
        
            sizeIndex = 1;
        
          } else {
        
            sizeIndex = 2;
        
          }
        
        
        
          if (!fontMetricsBySizeIndex[sizeIndex]) {
        
            var metrics = fontMetricsBySizeIndex[sizeIndex] = {
        
              cssEmPerMu: sigmasAndXis.quad[sizeIndex] / 18
        
            };
        
        
        
            for (var key in sigmasAndXis) {
        
              if (sigmasAndXis.hasOwnProperty(key)) {
        
                metrics[key] = sigmasAndXis[key][sizeIndex];
        
              }
        
            }
        
          }
        
        
        
          return fontMetricsBySizeIndex[sizeIndex];
        
        }
        
        
        
        /**
        
         * This file contains information about the options that the Parser carries
        
         * around with it while parsing. Data is held in an `Options` object, and when
        
         * recursing, a new `Options` object can be created with the `.with*` and
        
         * `.reset` functions.
        
         */
        
        var sizeStyleMap = [// Each element contains [textsize, scriptsize, scriptscriptsize].
        
        // The size mappings are taken from TeX with \normalsize=10pt.
        
        [1, 1, 1], // size1: [5, 5, 5]              \tiny
        
        [2, 1, 1], // size2: [6, 5, 5]
        
        [3, 1, 1], // size3: [7, 5, 5]              \scriptsize
        
        [4, 2, 1], // size4: [8, 6, 5]              \footnotesize
        
        [5, 2, 1], // size5: [9, 6, 5]              \small
        
        [6, 3, 1], // size6: [10, 7, 5]             \normalsize
        
        [7, 4, 2], // size7: [12, 8, 6]             \large
        
        [8, 6, 3], // size8: [14.4, 10, 7]          \Large
        
        [9, 7, 6], // size9: [17.28, 12, 10]        \LARGE
        
        [10, 8, 7], // size10: [20.74, 14.4, 12]     \huge
        
        [11, 10, 9] // size11: [24.88, 20.74, 17.28] \HUGE
        
        ];
        
        var sizeMultipliers = [// fontMetrics.js:getGlobalMetrics also uses size indexes, so if
        
        // you change size indexes, change that function.
        
        0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.2, 1.44, 1.728, 2.074, 2.488];
        
        
        
        var sizeAtStyle = function sizeAtStyle(size, style) {
        
          return style.size < 2 ? size : sizeStyleMap[size - 1][style.size - 1];
        
        }; // In these types, "" (empty string) means "no change".
        
        
        
        
        
        /**
        
         * This is the main options class. It contains the current style, size, color,
        
         * and font.
        
         *
        
         * Options objects should not be modified. To create a new Options with
        
         * different properties, call a `.having*` method.
        
         */
        
        class Options {
        
          // A font family applies to a group of fonts (i.e. SansSerif), while a font
        
          // represents a specific font (i.e. SansSerif Bold).
        
          // See: https://tex.stackexchange.com/questions/22350/difference-between-textrm-and-mathrm
        
        
        
          /**
        
           * The base size index.
        
           */
        
          constructor(data) {
        
            this.style = void 0;
        
            this.color = void 0;
        
            this.size = void 0;
        
            this.textSize = void 0;
        
            this.phantom = void 0;
        
            this.font = void 0;
        
            this.fontFamily = void 0;
        
            this.fontWeight = void 0;
        
            this.fontShape = void 0;
        
            this.sizeMultiplier = void 0;
        
            this.maxSize = void 0;
        
            this.minRuleThickness = void 0;
        
            this._fontMetrics = void 0;
        
            this.style = data.style;
        
            this.color = data.color;
        
            this.size = data.size || Options.BASESIZE;
        
            this.textSize = data.textSize || this.size;
        
            this.phantom = !!data.phantom;
        
            this.font = data.font || "";
        
            this.fontFamily = data.fontFamily || "";
        
            this.fontWeight = data.fontWeight || '';
        
            this.fontShape = data.fontShape || '';
        
            this.sizeMultiplier = sizeMultipliers[this.size - 1];
        
            this.maxSize = data.maxSize;
        
            this.minRuleThickness = data.minRuleThickness;
        
            this._fontMetrics = undefined;
        
          }
        
          /**
        
           * Returns a new options object with the same properties as "this".  Properties
        
           * from "extension" will be copied to the new options object.
        
           */
        
        
        
        
        
          extend(extension) {
        
            var data = {
        
              style: this.style,
        
              size: this.size,
        
              textSize: this.textSize,
        
              color: this.color,
        
              phantom: this.phantom,
        
              font: this.font,
        
              fontFamily: this.fontFamily,
        
              fontWeight: this.fontWeight,
        
              fontShape: this.fontShape,
        
              maxSize: this.maxSize,
        
              minRuleThickness: this.minRuleThickness
        
            };
        
        
        
            for (var key in extension) {
        
              if (extension.hasOwnProperty(key)) {
        
                data[key] = extension[key];
        
              }
        
            }
        
        
        
            return new Options(data);
        
          }
        
          /**
        
           * Return an options object with the given style. If `this.style === style`,
        
           * returns `this`.
        
           */
        
        
        
        
        
          havingStyle(style) {
        
            if (this.style === style) {
        
              return this;
        
            } else {
        
              return this.extend({
        
                style: style,
        
                size: sizeAtStyle(this.textSize, style)
        
              });
        
            }
        
          }
        
          /**
        
           * Return an options object with a cramped version of the current style. If
        
           * the current style is cramped, returns `this`.
        
           */
        
        
        
        
        
          havingCrampedStyle() {
        
            return this.havingStyle(this.style.cramp());
        
          }
        
          /**
        
           * Return an options object with the given size and in at least `\textstyle`.
        
           * Returns `this` if appropriate.
        
           */
        
        
        
        
        
          havingSize(size) {
        
            if (this.size === size && this.textSize === size) {
        
              return this;
        
            } else {
        
              return this.extend({
        
                style: this.style.text(),
        
                size: size,
        
                textSize: size,
        
                sizeMultiplier: sizeMultipliers[size - 1]
        
              });
        
            }
        
          }
        
          /**
        
           * Like `this.havingSize(BASESIZE).havingStyle(style)`. If `style` is omitted,
        
           * changes to at least `\textstyle`.
        
           */
        
        
        
        
        
          havingBaseStyle(style) {
        
            style = style || this.style.text();
        
            var wantSize = sizeAtStyle(Options.BASESIZE, style);
        
        
        
            if (this.size === wantSize && this.textSize === Options.BASESIZE && this.style === style) {
        
              return this;
        
            } else {
        
              return this.extend({
        
                style: style,
        
                size: wantSize
        
              });
        
            }
        
          }
        
          /**
        
           * Remove the effect of sizing changes such as \Huge.
        
           * Keep the effect of the current style, such as \scriptstyle.
        
           */
        
        
        
        
        
          havingBaseSizing() {
        
            var size;
        
        
        
            switch (this.style.id) {
        
              case 4:
        
              case 5:
        
                size = 3; // normalsize in scriptstyle
        
        
        
                break;
        
        
        
              case 6:
        
              case 7:
        
                size = 1; // normalsize in scriptscriptstyle
        
        
        
                break;
        
        
        
              default:
        
                size = 6;
        
              // normalsize in textstyle or displaystyle
        
            }
        
        
        
            return this.extend({
        
              style: this.style.text(),
        
              size: size
        
            });
        
          }
        
          /**
        
           * Create a new options object with the given color.
        
           */
        
        
        
        
        
          withColor(color) {
        
            return this.extend({
        
              color: color
        
            });
        
          }
        
          /**
        
           * Create a new options object with "phantom" set to true.
        
           */
        
        
        
        
        
          withPhantom() {
        
            return this.extend({
        
              phantom: true
        
            });
        
          }
        
          /**
        
           * Creates a new options object with the given math font or old text font.
        
           * @type {[type]}
        
           */
        
        
        
        
        
          withFont(font) {
        
            return this.extend({
        
              font
        
            });
        
          }
        
          /**
        
           * Create a new options objects with the given fontFamily.
        
           */
        
        
        
        
        
          withTextFontFamily(fontFamily) {
        
            return this.extend({
        
              fontFamily,
        
              font: ""
        
            });
        
          }
        
          /**
        
           * Creates a new options object with the given font weight
        
           */
        
        
        
        
        
          withTextFontWeight(fontWeight) {
        
            return this.extend({
        
              fontWeight,
        
              font: ""
        
            });
        
          }
        
          /**
        
           * Creates a new options object with the given font weight
        
           */
        
        
        
        
        
          withTextFontShape(fontShape) {
        
            return this.extend({
        
              fontShape,
        
              font: ""
        
            });
        
          }
        
          /**
        
           * Return the CSS sizing classes required to switch from enclosing options
        
           * `oldOptions` to `this`. Returns an array of classes.
        
           */
        
        
        
        
        
          sizingClasses(oldOptions) {
        
            if (oldOptions.size !== this.size) {
        
              return ["sizing", "reset-size" + oldOptions.size, "size" + this.size];
        
            } else {
        
              return [];
        
            }
        
          }
        
          /**
        
           * Return the CSS sizing classes required to switch to the base size. Like
        
           * `this.havingSize(BASESIZE).sizingClasses(this)`.
        
           */
        
        
        
        
        
          baseSizingClasses() {
        
            if (this.size !== Options.BASESIZE) {
        
              return ["sizing", "reset-size" + this.size, "size" + Options.BASESIZE];
        
            } else {
        
              return [];
        
            }
        
          }
        
          /**
        
           * Return the font metrics for this size.
        
           */
        
        
        
        
        
          fontMetrics() {
        
            if (!this._fontMetrics) {
        
              this._fontMetrics = getGlobalMetrics(this.size);
        
            }
        
        
        
            return this._fontMetrics;
        
          }
        
          /**
        
           * Gets the CSS color of the current options object
        
           */
        
        
        
        
        
          getColor() {
        
            if (this.phantom) {
        
              return "transparent";
        
            } else {
        
              return this.color;
        
            }
        
          }
        
        
        
        }
        
        
        
        Options.BASESIZE = 6;
        
        
        
        /**
        
         * This file does conversion between units.  In particular, it provides
        
         * calculateSize to convert other units into ems.
        
         */
        
        // Thus, multiplying a length by this number converts the length from units
        
        // into pts.  Dividing the result by ptPerEm gives the number of ems
        
        // *assuming* a font size of ptPerEm (normal size, normal style).
        
        
        
        var ptPerUnit = {
        
          // https://en.wikibooks.org/wiki/LaTeX/Lengths and
        
          // https://tex.stackexchange.com/a/8263
        
          "pt": 1,
        
          // TeX point
        
          "mm": 7227 / 2540,
        
          // millimeter
        
          "cm": 7227 / 254,
        
          // centimeter
        
          "in": 72.27,
        
          // inch
        
          "bp": 803 / 800,
        
          // big (PostScript) points
        
          "pc": 12,
        
          // pica
        
          "dd": 1238 / 1157,
        
          // didot
        
          "cc": 14856 / 1157,
        
          // cicero (12 didot)
        
          "nd": 685 / 642,
        
          // new didot
        
          "nc": 1370 / 107,
        
          // new cicero (12 new didot)
        
          "sp": 1 / 65536,
        
          // scaled point (TeX's internal smallest unit)
        
          // https://tex.stackexchange.com/a/41371
        
          "px": 803 / 800 // \pdfpxdimen defaults to 1 bp in pdfTeX and LuaTeX
        
        
        
        }; // Dictionary of relative units, for fast validity testing.
        
        
        
        var relativeUnit = {
        
          "ex": true,
        
          "em": true,
        
          "mu": true
        
        };
        
        
        
        /**
        
         * Determine whether the specified unit (either a string defining the unit
        
         * or a "size" parse node containing a unit field) is valid.
        
         */
        
        var validUnit = function validUnit(unit) {
        
          if (typeof unit !== "string") {
        
            unit = unit.unit;
        
          }
        
        
        
          return unit in ptPerUnit || unit in relativeUnit || unit === "ex";
        
        };
        
        /*
        
         * Convert a "size" parse node (with numeric "number" and string "unit" fields,
        
         * as parsed by functions.js argType "size") into a CSS em value for the
        
         * current style/scale.  `options` gives the current options.
        
         */
        
        
        
        var calculateSize = function calculateSize(sizeValue, options) {
        
          var scale;
        
        
        
          if (sizeValue.unit in ptPerUnit) {
        
            // Absolute units
        
            scale = ptPerUnit[sizeValue.unit] // Convert unit to pt
        
            / options.fontMetrics().ptPerEm // Convert pt to CSS em
        
            / options.sizeMultiplier; // Unscale to make absolute units
        
          } else if (sizeValue.unit === "mu") {
        
            // `mu` units scale with scriptstyle/scriptscriptstyle.
        
            scale = options.fontMetrics().cssEmPerMu;
        
          } else {
        
            // Other relative units always refer to the *textstyle* font
        
            // in the current size.
        
            var unitOptions;
        
        
        
            if (options.style.isTight()) {
        
              // isTight() means current style is script/scriptscript.
        
              unitOptions = options.havingStyle(options.style.text());
        
            } else {
        
              unitOptions = options;
        
            } // TODO: In TeX these units are relative to the quad of the current
        
            // *text* font, e.g. cmr10. KaTeX instead uses values from the
        
            // comparably-sized *Computer Modern symbol* font. At 10pt, these
        
            // match. At 7pt and 5pt, they differ: cmr7=1.138894, cmsy7=1.170641;
        
            // cmr5=1.361133, cmsy5=1.472241. Consider $\scriptsize a\kern1emb$.
        
            // TeX \showlists shows a kern of 1.13889 * fontsize;
        
            // KaTeX shows a kern of 1.171 * fontsize.
        
        
        
        
        
            if (sizeValue.unit === "ex") {
        
              scale = unitOptions.fontMetrics().xHeight;
        
            } else if (sizeValue.unit === "em") {
        
              scale = unitOptions.fontMetrics().quad;
        
            } else {
        
              throw new ParseError("Invalid unit: '" + sizeValue.unit + "'");
        
            }
        
        
        
            if (unitOptions !== options) {
        
              scale *= unitOptions.sizeMultiplier / options.sizeMultiplier;
        
            }
        
          }
        
        
        
          return Math.min(sizeValue.number * scale, options.maxSize);
        
        };
        
        /**
        
         * Round `n` to 4 decimal places, or to the nearest 1/10,000th em. See
        
         * https://github.com/KaTeX/KaTeX/pull/2460.
        
         */
        
        
        
        var makeEm = function makeEm(n) {
        
          return +n.toFixed(4) + "em";
        
        };
        
        
        
        /**
        
         * These objects store the data about the DOM nodes we create, as well as some
        
         * extra data. They can then be transformed into real DOM nodes with the
        
         * `toNode` function or HTML markup using `toMarkup`. They are useful for both
        
         * storing extra properties on the nodes, as well as providing a way to easily
        
         * work with the DOM.
        
         *
        
         * Similar functions for working with MathML nodes exist in mathMLTree.js.
        
         *
        
         * TODO: refactor `span` and `anchor` into common superclass when
        
         * target environments support class inheritance
        
         */
        
        
        
        /**
        
         * Create an HTML className based on a list of classes. In addition to joining
        
         * with spaces, we also remove empty classes.
        
         */
        
        var createClass = function createClass(classes) {
        
          return classes.filter(cls => cls).join(" ");
        
        };
        
        
        
        var initNode = function initNode(classes, options, style) {
        
          this.classes = classes || [];
        
          this.attributes = {};
        
          this.height = 0;
        
          this.depth = 0;
        
          this.maxFontSize = 0;
        
          this.style = style || {};
        
        
        
          if (options) {
        
            if (options.style.isTight()) {
        
              this.classes.push("mtight");
        
            }
        
        
        
            var color = options.getColor();
        
        
        
            if (color) {
        
              this.style.color = color;
        
            }
        
          }
        
        };
        
        /**
        
         * Convert into an HTML node
        
         */
        
        
        
        
        
        var toNode = function toNode(tagName) {
        
          var node = document.createElement(tagName); // Apply the class
        
        
        
          node.className = createClass(this.classes); // Apply inline styles
        
        
        
          for (var style in this.style) {
        
            if (this.style.hasOwnProperty(style)) {
        
              // $FlowFixMe Flow doesn't seem to understand span.style's type.
        
              node.style[style] = this.style[style];
        
            }
        
          } // Apply attributes
        
        
        
        
        
          for (var attr in this.attributes) {
        
            if (this.attributes.hasOwnProperty(attr)) {
        
              node.setAttribute(attr, this.attributes[attr]);
        
            }
        
          } // Append the children, also as HTML nodes
        
        
        
        
        
          for (var i = 0; i < this.children.length; i++) {
        
            node.appendChild(this.children[i].toNode());
        
          }
        
        
        
          return node;
        
        };
        
        /**
        
         * Convert into an HTML markup string
        
         */
        
        
        
        
        
        var toMarkup = function toMarkup(tagName) {
        
          var markup = "<" + tagName; // Add the class
        
        
        
          if (this.classes.length) {
        
            markup += " class=\"" + utils.escape(createClass(this.classes)) + "\"";
        
          }
        
        
        
          var styles = ""; // Add the styles, after hyphenation
        
        
        
          for (var style in this.style) {
        
            if (this.style.hasOwnProperty(style)) {
        
              styles += utils.hyphenate(style) + ":" + this.style[style] + ";";
        
            }
        
          }
        
        
        
          if (styles) {
        
            markup += " style=\"" + utils.escape(styles) + "\"";
        
          } // Add the attributes
        
        
        
        
        
          for (var attr in this.attributes) {
        
            if (this.attributes.hasOwnProperty(attr)) {
        
              markup += " " + attr + "=\"" + utils.escape(this.attributes[attr]) + "\"";
        
            }
        
          }
        
        
        
          markup += ">"; // Add the markup of the children, also as markup
        
        
        
          for (var i = 0; i < this.children.length; i++) {
        
            markup += this.children[i].toMarkup();
        
          }
        
        
        
          markup += "</" + tagName + ">";
        
          return markup;
        
        }; // Making the type below exact with all optional fields doesn't work due to
        
        // - https://github.com/facebook/flow/issues/4582
        
        // - https://github.com/facebook/flow/issues/5688
        
        // However, since *all* fields are optional, $Shape<> works as suggested in 5688
        
        // above.
        
        // This type does not include all CSS properties. Additional properties should
        
        // be added as needed.
        
        
        
        
        
        /**
        
         * This node represents a span node, with a className, a list of children, and
        
         * an inline style. It also contains information about its height, depth, and
        
         * maxFontSize.
        
         *
        
         * Represents two types with different uses: SvgSpan to wrap an SVG and DomSpan
        
         * otherwise. This typesafety is important when HTML builders access a span's
        
         * children.
        
         */
        
        class Span {
        
          constructor(classes, children, options, style) {
        
            this.children = void 0;
        
            this.attributes = void 0;
        
            this.classes = void 0;
        
            this.height = void 0;
        
            this.depth = void 0;
        
            this.width = void 0;
        
            this.maxFontSize = void 0;
        
            this.style = void 0;
        
            initNode.call(this, classes, options, style);
        
            this.children = children || [];
        
          }
        
          /**
        
           * Sets an arbitrary attribute on the span. Warning: use this wisely. Not
        
           * all browsers support attributes the same, and having too many custom
        
           * attributes is probably bad.
        
           */
        
        
        
        
        
          setAttribute(attribute, value) {
        
            this.attributes[attribute] = value;
        
          }
        
        
        
          hasClass(className) {
        
            return utils.contains(this.classes, className);
        
          }
        
        
        
          toNode() {
        
            return toNode.call(this, "span");
        
          }
        
        
        
          toMarkup() {
        
            return toMarkup.call(this, "span");
        
          }
        
        
        
        }
        
        /**
        
         * This node represents an anchor (<a>) element with a hyperlink.  See `span`
        
         * for further details.
        
         */
        
        
        
        class Anchor {
        
          constructor(href, classes, children, options) {
        
            this.children = void 0;
        
            this.attributes = void 0;
        
            this.classes = void 0;
        
            this.height = void 0;
        
            this.depth = void 0;
        
            this.maxFontSize = void 0;
        
            this.style = void 0;
        
            initNode.call(this, classes, options);
        
            this.children = children || [];
        
            this.setAttribute('href', href);
        
          }
        
        
        
          setAttribute(attribute, value) {
        
            this.attributes[attribute] = value;
        
          }
        
        
        
          hasClass(className) {
        
            return utils.contains(this.classes, className);
        
          }
        
        
        
          toNode() {
        
            return toNode.call(this, "a");
        
          }
        
        
        
          toMarkup() {
        
            return toMarkup.call(this, "a");
        
          }
        
        
        
        }
        
        /**
        
         * This node represents an image embed (<img>) element.
        
         */
        
        
        
        class Img {
        
          constructor(src, alt, style) {
        
            this.src = void 0;
        
            this.alt = void 0;
        
            this.classes = void 0;
        
            this.height = void 0;
        
            this.depth = void 0;
        
            this.maxFontSize = void 0;
        
            this.style = void 0;
        
            this.alt = alt;
        
            this.src = src;
        
            this.classes = ["mord"];
        
            this.style = style;
        
          }
        
        
        
          hasClass(className) {
        
            return utils.contains(this.classes, className);
        
          }
        
        
        
          toNode() {
        
            var node = document.createElement("img");
        
            node.src = this.src;
        
            node.alt = this.alt;
        
            node.className = "mord"; // Apply inline styles
        
        
        
            for (var style in this.style) {
        
              if (this.style.hasOwnProperty(style)) {
        
                // $FlowFixMe
        
                node.style[style] = this.style[style];
        
              }
        
            }
        
        
        
            return node;
        
          }
        
        
        
          toMarkup() {
        
            var markup = "<img  src='" + this.src + " 'alt='" + this.alt + "' "; // Add the styles, after hyphenation
        
        
        
            var styles = "";
        
        
        
            for (var style in this.style) {
        
              if (this.style.hasOwnProperty(style)) {
        
                styles += utils.hyphenate(style) + ":" + this.style[style] + ";";
        
              }
        
            }
        
        
        
            if (styles) {
        
              markup += " style=\"" + utils.escape(styles) + "\"";
        
            }
        
        
        
            markup += "'/>";
        
            return markup;
        
          }
        
        
        
        }
        
        var iCombinations = {
        
          'î': '\u0131\u0302',
        
          'ï': '\u0131\u0308',
        
          'í': '\u0131\u0301',
        
          // 'ī': '\u0131\u0304', // enable when we add Extended Latin
        
          'ì': '\u0131\u0300'
        
        };
        
        /**
        
         * A symbol node contains information about a single symbol. It either renders
        
         * to a single text node, or a span with a single text node in it, depending on
        
         * whether it has CSS classes, styles, or needs italic correction.
        
         */
        
        
        
        class SymbolNode {
        
          constructor(text, height, depth, italic, skew, width, classes, style) {
        
            this.text = void 0;
        
            this.height = void 0;
        
            this.depth = void 0;
        
            this.italic = void 0;
        
            this.skew = void 0;
        
            this.width = void 0;
        
            this.maxFontSize = void 0;
        
            this.classes = void 0;
        
            this.style = void 0;
        
            this.text = text;
        
            this.height = height || 0;
        
            this.depth = depth || 0;
        
            this.italic = italic || 0;
        
            this.skew = skew || 0;
        
            this.width = width || 0;
        
            this.classes = classes || [];
        
            this.style = style || {};
        
            this.maxFontSize = 0; // Mark text from non-Latin scripts with specific classes so that we
        
            // can specify which fonts to use.  This allows us to render these
        
            // characters with a serif font in situations where the browser would
        
            // either default to a sans serif or render a placeholder character.
        
            // We use CSS class names like cjk_fallback, hangul_fallback and
        
            // brahmic_fallback. See ./unicodeScripts.js for the set of possible
        
            // script names
        
        
        
            var script = scriptFromCodepoint(this.text.charCodeAt(0));
        
        
        
            if (script) {
        
              this.classes.push(script + "_fallback");
        
            }
        
        
        
            if (/[îïíì]/.test(this.text)) {
        
              // add ī when we add Extended Latin
        
              this.text = iCombinations[this.text];
        
            }
        
          }
        
        
        
          hasClass(className) {
        
            return utils.contains(this.classes, className);
        
          }
        
          /**
        
           * Creates a text node or span from a symbol node. Note that a span is only
        
           * created if it is needed.
        
           */
        
        
        
        
        
          toNode() {
        
            var node = document.createTextNode(this.text);
        
            var span = null;
        
        
        
            if (this.italic > 0) {
        
              span = document.createElement("span");
        
              span.style.marginRight = makeEm(this.italic);
        
            }
        
        
        
            if (this.classes.length > 0) {
        
              span = span || document.createElement("span");
        
              span.className = createClass(this.classes);
        
            }
        
        
        
            for (var style in this.style) {
        
              if (this.style.hasOwnProperty(style)) {
        
                span = span || document.createElement("span"); // $FlowFixMe Flow doesn't seem to understand span.style's type.
        
        
        
                span.style[style] = this.style[style];
        
              }
        
            }
        
        
        
            if (span) {
        
              span.appendChild(node);
        
              return span;
        
            } else {
        
              return node;
        
            }
        
          }
        
          /**
        
           * Creates markup for a symbol node.
        
           */
        
        
        
        
        
          toMarkup() {
        
            // TODO(alpert): More duplication than I'd like from
        
            // span.prototype.toMarkup and symbolNode.prototype.toNode...
        
            var needsSpan = false;
        
            var markup = "<span";
        
        
        
            if (this.classes.length) {
        
              needsSpan = true;
        
              markup += " class=\"";
        
              markup += utils.escape(createClass(this.classes));
        
              markup += "\"";
        
            }
        
        
        
            var styles = "";
        
        
        
            if (this.italic > 0) {
        
              styles += "margin-right:" + this.italic + "em;";
        
            }
        
        
        
            for (var style in this.style) {
        
              if (this.style.hasOwnProperty(style)) {
        
                styles += utils.hyphenate(style) + ":" + this.style[style] + ";";
        
              }
        
            }
        
        
        
            if (styles) {
        
              needsSpan = true;
        
              markup += " style=\"" + utils.escape(styles) + "\"";
        
            }
        
        
        
            var escaped = utils.escape(this.text);
        
        
        
            if (needsSpan) {
        
              markup += ">";
        
              markup += escaped;
        
              markup += "</span>";
        
              return markup;
        
            } else {
        
              return escaped;
        
            }
        
          }
        
        
        
        }
        
        /**
        
         * SVG nodes are used to render stretchy wide elements.
        
         */
        
        
        
        class SvgNode {
        
          constructor(children, attributes) {
        
            this.children = void 0;
        
            this.attributes = void 0;
        
            this.children = children || [];
        
            this.attributes = attributes || {};
        
          }
        
        
        
          toNode() {
        
            var svgNS = "http://www.w3.org/2000/svg";
        
            var node = document.createElementNS(svgNS, "svg"); // Apply attributes
        
        
        
            for (var attr in this.attributes) {
        
              if (Object.prototype.hasOwnProperty.call(this.attributes, attr)) {
        
                node.setAttribute(attr, this.attributes[attr]);
        
              }
        
            }
        
        
        
            for (var i = 0; i < this.children.length; i++) {
        
              node.appendChild(this.children[i].toNode());
        
            }
        
        
        
            return node;
        
          }
        
        
        
          toMarkup() {
        
            var markup = "<svg xmlns=\"http://www.w3.org/2000/svg\""; // Apply attributes
        
        
        
            for (var attr in this.attributes) {
        
              if (Object.prototype.hasOwnProperty.call(this.attributes, attr)) {
        
                markup += " " + attr + "='" + this.attributes[attr] + "'";
        
              }
        
            }
        
        
        
            markup += ">";
        
        
        
            for (var i = 0; i < this.children.length; i++) {
        
              markup += this.children[i].toMarkup();
        
            }
        
        
        
            markup += "</svg>";
        
            return markup;
        
          }
        
        
        
        }
        
        class PathNode {
        
          constructor(pathName, alternate) {
        
            this.pathName = void 0;
        
            this.alternate = void 0;
        
            this.pathName = pathName;
        
            this.alternate = alternate; // Used only for \sqrt, \phase, & tall delims
        
          }
        
        
        
          toNode() {
        
            var svgNS = "http://www.w3.org/2000/svg";
        
            var node = document.createElementNS(svgNS, "path");
        
        
        
            if (this.alternate) {
        
              node.setAttribute("d", this.alternate);
        
            } else {
        
              node.setAttribute("d", path[this.pathName]);
        
            }
        
        
        
            return node;
        
          }
        
        
        
          toMarkup() {
        
            if (this.alternate) {
        
              return "<path d='" + this.alternate + "'/>";
        
            } else {
        
              return "<path d='" + path[this.pathName] + "'/>";
        
            }
        
          }
        
        
        
        }
        
        class LineNode {
        
          constructor(attributes) {
        
            this.attributes = void 0;
        
            this.attributes = attributes || {};
        
          }
        
        
        
          toNode() {
        
            var svgNS = "http://www.w3.org/2000/svg";
        
            var node = document.createElementNS(svgNS, "line"); // Apply attributes
        
        
        
            for (var attr in this.attributes) {
        
              if (Object.prototype.hasOwnProperty.call(this.attributes, attr)) {
        
                node.setAttribute(attr, this.attributes[attr]);
        
              }
        
            }
        
        
        
            return node;
        
          }
        
        
        
          toMarkup() {
        
            var markup = "<line";
        
        
        
            for (var attr in this.attributes) {
        
              if (Object.prototype.hasOwnProperty.call(this.attributes, attr)) {
        
                markup += " " + attr + "='" + this.attributes[attr] + "'";
        
              }
        
            }
        
        
        
            markup += "/>";
        
            return markup;
        
          }
        
        
        
        }
        
        function assertSymbolDomNode(group) {
        
          if (group instanceof SymbolNode) {
        
            return group;
        
          } else {
        
            throw new Error("Expected symbolNode but got " + String(group) + ".");
        
          }
        
        }
        
        function assertSpan(group) {
        
          if (group instanceof Span) {
        
            return group;
        
          } else {
        
            throw new Error("Expected span<HtmlDomNode> but got " + String(group) + ".");
        
          }
        
        }
        
        
        
        /**
        
         * This file holds a list of all no-argument functions and single-character
        
         * symbols (like 'a' or ';').
        
         *
        
         * For each of the symbols, there are three properties they can have:
        
         * - font (required): the font to be used for this symbol. Either "main" (the
        
             normal font), or "ams" (the ams fonts).
        
         * - group (required): the ParseNode group type the symbol should have (i.e.
        
             "textord", "mathord", etc).
        
             See https://github.com/KaTeX/KaTeX/wiki/Examining-TeX#group-types
        
         * - replace: the character that this symbol or function should be
        
         *   replaced with (i.e. "\phi" has a replace value of "\u03d5", the phi
        
         *   character in the main font).
        
         *
        
         * The outermost map in the table indicates what mode the symbols should be
        
         * accepted in (e.g. "math" or "text").
        
         */
        
        // Some of these have a "-token" suffix since these are also used as `ParseNode`
        
        // types for raw text tokens, and we want to avoid conflicts with higher-level
        
        // `ParseNode` types. These `ParseNode`s are constructed within `Parser` by
        
        // looking up the `symbols` map.
        
        var ATOMS = {
        
          "bin": 1,
        
          "close": 1,
        
          "inner": 1,
        
          "open": 1,
        
          "punct": 1,
        
          "rel": 1
        
        };
        
        var NON_ATOMS = {
        
          "accent-token": 1,
        
          "mathord": 1,
        
          "op-token": 1,
        
          "spacing": 1,
        
          "textord": 1
        
        };
        
        var symbols = {
        
          "math": {},
        
          "text": {}
        
        };
        
        /** `acceptUnicodeChar = true` is only applicable if `replace` is set. */
        
        
        
        function defineSymbol(mode, font, group, replace, name, acceptUnicodeChar) {
        
          symbols[mode][name] = {
        
            font,
        
            group,
        
            replace
        
          };
        
        
        
          if (acceptUnicodeChar && replace) {
        
            symbols[mode][replace] = symbols[mode][name];
        
          }
        
        } // Some abbreviations for commonly used strings.
        
        // This helps minify the code, and also spotting typos using jshint.
        
        // modes:
        
        
        
        var math = "math";
        
        var text = "text"; // fonts:
        
        
        
        var main = "main";
        
        var ams = "ams"; // groups:
        
        
        
        var accent = "accent-token";
        
        var bin = "bin";
        
        var close = "close";
        
        var inner = "inner";
        
        var mathord = "mathord";
        
        var op = "op-token";
        
        var open = "open";
        
        var punct = "punct";
        
        var rel = "rel";
        
        var spacing = "spacing";
        
        var textord = "textord"; // Now comes the symbol table
        
        // Relation Symbols
        
        
        
        defineSymbol(math, main, rel, "\u2261", "\\equiv", true);
        
        defineSymbol(math, main, rel, "\u227a", "\\prec", true);
        
        defineSymbol(math, main, rel, "\u227b", "\\succ", true);
        
        defineSymbol(math, main, rel, "\u223c", "\\sim", true);
        
        defineSymbol(math, main, rel, "\u22a5", "\\perp");
        
        defineSymbol(math, main, rel, "\u2aaf", "\\preceq", true);
        
        defineSymbol(math, main, rel, "\u2ab0", "\\succeq", true);
        
        defineSymbol(math, main, rel, "\u2243", "\\simeq", true);
        
        defineSymbol(math, main, rel, "\u2223", "\\mid", true);
        
        defineSymbol(math, main, rel, "\u226a", "\\ll", true);
        
        defineSymbol(math, main, rel, "\u226b", "\\gg", true);
        
        defineSymbol(math, main, rel, "\u224d", "\\asymp", true);
        
        defineSymbol(math, main, rel, "\u2225", "\\parallel");
        
        defineSymbol(math, main, rel, "\u22c8", "\\bowtie", true);
        
        defineSymbol(math, main, rel, "\u2323", "\\smile", true);
        
        defineSymbol(math, main, rel, "\u2291", "\\sqsubseteq", true);
        
        defineSymbol(math, main, rel, "\u2292", "\\sqsupseteq", true);
        
        defineSymbol(math, main, rel, "\u2250", "\\doteq", true);
        
        defineSymbol(math, main, rel, "\u2322", "\\frown", true);
        
        defineSymbol(math, main, rel, "\u220b", "\\ni", true);
        
        defineSymbol(math, main, rel, "\u221d", "\\propto", true);
        
        defineSymbol(math, main, rel, "\u22a2", "\\vdash", true);
        
        defineSymbol(math, main, rel, "\u22a3", "\\dashv", true);
        
        defineSymbol(math, main, rel, "\u220b", "\\owns"); // Punctuation
        
        
        
        defineSymbol(math, main, punct, "\u002e", "\\ldotp");
        
        defineSymbol(math, main, punct, "\u22c5", "\\cdotp"); // Misc Symbols
        
        
        
        defineSymbol(math, main, textord, "\u0023", "\\#");
        
        defineSymbol(text, main, textord, "\u0023", "\\#");
        
        defineSymbol(math, main, textord, "\u0026", "\\&");
        
        defineSymbol(text, main, textord, "\u0026", "\\&");
        
        defineSymbol(math, main, textord, "\u2135", "\\aleph", true);
        
        defineSymbol(math, main, textord, "\u2200", "\\forall", true);
        
        defineSymbol(math, main, textord, "\u210f", "\\hbar", true);
        
        defineSymbol(math, main, textord, "\u2203", "\\exists", true);
        
        defineSymbol(math, main, textord, "\u2207", "\\nabla", true);
        
        defineSymbol(math, main, textord, "\u266d", "\\flat", true);
        
        defineSymbol(math, main, textord, "\u2113", "\\ell", true);
        
        defineSymbol(math, main, textord, "\u266e", "\\natural", true);
        
        defineSymbol(math, main, textord, "\u2663", "\\clubsuit", true);
        
        defineSymbol(math, main, textord, "\u2118", "\\wp", true);
        
        defineSymbol(math, main, textord, "\u266f", "\\sharp", true);
        
        defineSymbol(math, main, textord, "\u2662", "\\diamondsuit", true);
        
        defineSymbol(math, main, textord, "\u211c", "\\Re", true);
        
        defineSymbol(math, main, textord, "\u2661", "\\heartsuit", true);
        
        defineSymbol(math, main, textord, "\u2111", "\\Im", true);
        
        defineSymbol(math, main, textord, "\u2660", "\\spadesuit", true);
        
        defineSymbol(math, main, textord, "\u00a7", "\\S", true);
        
        defineSymbol(text, main, textord, "\u00a7", "\\S");
        
        defineSymbol(math, main, textord, "\u00b6", "\\P", true);
        
        defineSymbol(text, main, textord, "\u00b6", "\\P"); // Math and Text
        
        
        
        defineSymbol(math, main, textord, "\u2020", "\\dag");
        
        defineSymbol(text, main, textord, "\u2020", "\\dag");
        
        defineSymbol(text, main, textord, "\u2020", "\\textdagger");
        
        defineSymbol(math, main, textord, "\u2021", "\\ddag");
        
        defineSymbol(text, main, textord, "\u2021", "\\ddag");
        
        defineSymbol(text, main, textord, "\u2021", "\\textdaggerdbl"); // Large Delimiters
        
        
        
        defineSymbol(math, main, close, "\u23b1", "\\rmoustache", true);
        
        defineSymbol(math, main, open, "\u23b0", "\\lmoustache", true);
        
        defineSymbol(math, main, close, "\u27ef", "\\rgroup", true);
        
        defineSymbol(math, main, open, "\u27ee", "\\lgroup", true); // Binary Operators
        
        
        
        defineSymbol(math, main, bin, "\u2213", "\\mp", true);
        
        defineSymbol(math, main, bin, "\u2296", "\\ominus", true);
        
        defineSymbol(math, main, bin, "\u228e", "\\uplus", true);
        
        defineSymbol(math, main, bin, "\u2293", "\\sqcap", true);
        
        defineSymbol(math, main, bin, "\u2217", "\\ast");
        
        defineSymbol(math, main, bin, "\u2294", "\\sqcup", true);
        
        defineSymbol(math, main, bin, "\u25ef", "\\bigcirc", true);
        
        defineSymbol(math, main, bin, "\u2219", "\\bullet", true);
        
        defineSymbol(math, main, bin, "\u2021", "\\ddagger");
        
        defineSymbol(math, main, bin, "\u2240", "\\wr", true);
        
        defineSymbol(math, main, bin, "\u2a3f", "\\amalg");
        
        defineSymbol(math, main, bin, "\u0026", "\\And"); // from amsmath
        
        // Arrow Symbols
        
        
        
        defineSymbol(math, main, rel, "\u27f5", "\\longleftarrow", true);
        
        defineSymbol(math, main, rel, "\u21d0", "\\Leftarrow", true);
        
        defineSymbol(math, main, rel, "\u27f8", "\\Longleftarrow", true);
        
        defineSymbol(math, main, rel, "\u27f6", "\\longrightarrow", true);
        
        defineSymbol(math, main, rel, "\u21d2", "\\Rightarrow", true);
        
        defineSymbol(math, main, rel, "\u27f9", "\\Longrightarrow", true);
        
        defineSymbol(math, main, rel, "\u2194", "\\leftrightarrow", true);
        
        defineSymbol(math, main, rel, "\u27f7", "\\longleftrightarrow", true);
        
        defineSymbol(math, main, rel, "\u21d4", "\\Leftrightarrow", true);
        
        defineSymbol(math, main, rel, "\u27fa", "\\Longleftrightarrow", true);
        
        defineSymbol(math, main, rel, "\u21a6", "\\mapsto", true);
        
        defineSymbol(math, main, rel, "\u27fc", "\\longmapsto", true);
        
        defineSymbol(math, main, rel, "\u2197", "\\nearrow", true);
        
        defineSymbol(math, main, rel, "\u21a9", "\\hookleftarrow", true);
        
        defineSymbol(math, main, rel, "\u21aa", "\\hookrightarrow", true);
        
        defineSymbol(math, main, rel, "\u2198", "\\searrow", true);
        
        defineSymbol(math, main, rel, "\u21bc", "\\leftharpoonup", true);
        
        defineSymbol(math, main, rel, "\u21c0", "\\rightharpoonup", true);
        
        defineSymbol(math, main, rel, "\u2199", "\\swarrow", true);
        
        defineSymbol(math, main, rel, "\u21bd", "\\leftharpoondown", true);
        
        defineSymbol(math, main, rel, "\u21c1", "\\rightharpoondown", true);
        
        defineSymbol(math, main, rel, "\u2196", "\\nwarrow", true);
        
        defineSymbol(math, main, rel, "\u21cc", "\\rightleftharpoons", true); // AMS Negated Binary Relations
        
        
        
        defineSymbol(math, ams, rel, "\u226e", "\\nless", true); // Symbol names preceeded by "@" each have a corresponding macro.
        
        
        
        defineSymbol(math, ams, rel, "\ue010", "\\@nleqslant");
        
        defineSymbol(math, ams, rel, "\ue011", "\\@nleqq");
        
        defineSymbol(math, ams, rel, "\u2a87", "\\lneq", true);
        
        defineSymbol(math, ams, rel, "\u2268", "\\lneqq", true);
        
        defineSymbol(math, ams, rel, "\ue00c", "\\@lvertneqq");
        
        defineSymbol(math, ams, rel, "\u22e6", "\\lnsim", true);
        
        defineSymbol(math, ams, rel, "\u2a89", "\\lnapprox", true);
        
        defineSymbol(math, ams, rel, "\u2280", "\\nprec", true); // unicode-math maps \u22e0 to \npreccurlyeq. We'll use the AMS synonym.
        
        
        
        defineSymbol(math, ams, rel, "\u22e0", "\\npreceq", true);
        
        defineSymbol(math, ams, rel, "\u22e8", "\\precnsim", true);
        
        defineSymbol(math, ams, rel, "\u2ab9", "\\precnapprox", true);
        
        defineSymbol(math, ams, rel, "\u2241", "\\nsim", true);
        
        defineSymbol(math, ams, rel, "\ue006", "\\@nshortmid");
        
        defineSymbol(math, ams, rel, "\u2224", "\\nmid", true);
        
        defineSymbol(math, ams, rel, "\u22ac", "\\nvdash", true);
        
        defineSymbol(math, ams, rel, "\u22ad", "\\nvDash", true);
        
        defineSymbol(math, ams, rel, "\u22ea", "\\ntriangleleft");
        
        defineSymbol(math, ams, rel, "\u22ec", "\\ntrianglelefteq", true);
        
        defineSymbol(math, ams, rel, "\u228a", "\\subsetneq", true);
        
        defineSymbol(math, ams, rel, "\ue01a", "\\@varsubsetneq");
        
        defineSymbol(math, ams, rel, "\u2acb", "\\subsetneqq", true);
        
        defineSymbol(math, ams, rel, "\ue017", "\\@varsubsetneqq");
        
        defineSymbol(math, ams, rel, "\u226f", "\\ngtr", true);
        
        defineSymbol(math, ams, rel, "\ue00f", "\\@ngeqslant");
        
        defineSymbol(math, ams, rel, "\ue00e", "\\@ngeqq");
        
        defineSymbol(math, ams, rel, "\u2a88", "\\gneq", true);
        
        defineSymbol(math, ams, rel, "\u2269", "\\gneqq", true);
        
        defineSymbol(math, ams, rel, "\ue00d", "\\@gvertneqq");
        
        defineSymbol(math, ams, rel, "\u22e7", "\\gnsim", true);
        
        defineSymbol(math, ams, rel, "\u2a8a", "\\gnapprox", true);
        
        defineSymbol(math, ams, rel, "\u2281", "\\nsucc", true); // unicode-math maps \u22e1 to \nsucccurlyeq. We'll use the AMS synonym.
        
        
        
        defineSymbol(math, ams, rel, "\u22e1", "\\nsucceq", true);
        
        defineSymbol(math, ams, rel, "\u22e9", "\\succnsim", true);
        
        defineSymbol(math, ams, rel, "\u2aba", "\\succnapprox", true); // unicode-math maps \u2246 to \simneqq. We'll use the AMS synonym.
        
        
        
        defineSymbol(math, ams, rel, "\u2246", "\\ncong", true);
        
        defineSymbol(math, ams, rel, "\ue007", "\\@nshortparallel");
        
        defineSymbol(math, ams, rel, "\u2226", "\\nparallel", true);
        
        defineSymbol(math, ams, rel, "\u22af", "\\nVDash", true);
        
        defineSymbol(math, ams, rel, "\u22eb", "\\ntriangleright");
        
        defineSymbol(math, ams, rel, "\u22ed", "\\ntrianglerighteq", true);
        
        defineSymbol(math, ams, rel, "\ue018", "\\@nsupseteqq");
        
        defineSymbol(math, ams, rel, "\u228b", "\\supsetneq", true);
        
        defineSymbol(math, ams, rel, "\ue01b", "\\@varsupsetneq");
        
        defineSymbol(math, ams, rel, "\u2acc", "\\supsetneqq", true);
        
        defineSymbol(math, ams, rel, "\ue019", "\\@varsupsetneqq");
        
        defineSymbol(math, ams, rel, "\u22ae", "\\nVdash", true);
        
        defineSymbol(math, ams, rel, "\u2ab5", "\\precneqq", true);
        
        defineSymbol(math, ams, rel, "\u2ab6", "\\succneqq", true);
        
        defineSymbol(math, ams, rel, "\ue016", "\\@nsubseteqq");
        
        defineSymbol(math, ams, bin, "\u22b4", "\\unlhd");
        
        defineSymbol(math, ams, bin, "\u22b5", "\\unrhd"); // AMS Negated Arrows
        
        
        
        defineSymbol(math, ams, rel, "\u219a", "\\nleftarrow", true);
        
        defineSymbol(math, ams, rel, "\u219b", "\\nrightarrow", true);
        
        defineSymbol(math, ams, rel, "\u21cd", "\\nLeftarrow", true);
        
        defineSymbol(math, ams, rel, "\u21cf", "\\nRightarrow", true);
        
        defineSymbol(math, ams, rel, "\u21ae", "\\nleftrightarrow", true);
        
        defineSymbol(math, ams, rel, "\u21ce", "\\nLeftrightarrow", true); // AMS Misc
        
        
        
        defineSymbol(math, ams, rel, "\u25b3", "\\vartriangle");
        
        defineSymbol(math, ams, textord, "\u210f", "\\hslash");
        
        defineSymbol(math, ams, textord, "\u25bd", "\\triangledown");
        
        defineSymbol(math, ams, textord, "\u25ca", "\\lozenge");
        
        defineSymbol(math, ams, textord, "\u24c8", "\\circledS");
        
        defineSymbol(math, ams, textord, "\u00ae", "\\circledR");
        
        defineSymbol(text, ams, textord, "\u00ae", "\\circledR");
        
        defineSymbol(math, ams, textord, "\u2221", "\\measuredangle", true);
        
        defineSymbol(math, ams, textord, "\u2204", "\\nexists");
        
        defineSymbol(math, ams, textord, "\u2127", "\\mho");
        
        defineSymbol(math, ams, textord, "\u2132", "\\Finv", true);
        
        defineSymbol(math, ams, textord, "\u2141", "\\Game", true);
        
        defineSymbol(math, ams, textord, "\u2035", "\\backprime");
        
        defineSymbol(math, ams, textord, "\u25b2", "\\blacktriangle");
        
        defineSymbol(math, ams, textord, "\u25bc", "\\blacktriangledown");
        
        defineSymbol(math, ams, textord, "\u25a0", "\\blacksquare");
        
        defineSymbol(math, ams, textord, "\u29eb", "\\blacklozenge");
        
        defineSymbol(math, ams, textord, "\u2605", "\\bigstar");
        
        defineSymbol(math, ams, textord, "\u2222", "\\sphericalangle", true);
        
        defineSymbol(math, ams, textord, "\u2201", "\\complement", true); // unicode-math maps U+F0 to \matheth. We map to AMS function \eth
        
        
        
        defineSymbol(math, ams, textord, "\u00f0", "\\eth", true);
        
        defineSymbol(text, main, textord, "\u00f0", "\u00f0");
        
        defineSymbol(math, ams, textord, "\u2571", "\\diagup");
        
        defineSymbol(math, ams, textord, "\u2572", "\\diagdown");
        
        defineSymbol(math, ams, textord, "\u25a1", "\\square");
        
        defineSymbol(math, ams, textord, "\u25a1", "\\Box");
        
        defineSymbol(math, ams, textord, "\u25ca", "\\Diamond"); // unicode-math maps U+A5 to \mathyen. We map to AMS function \yen
        
        
        
        defineSymbol(math, ams, textord, "\u00a5", "\\yen", true);
        
        defineSymbol(text, ams, textord, "\u00a5", "\\yen", true);
        
        defineSymbol(math, ams, textord, "\u2713", "\\checkmark", true);
        
        defineSymbol(text, ams, textord, "\u2713", "\\checkmark"); // AMS Hebrew
        
        
        
        defineSymbol(math, ams, textord, "\u2136", "\\beth", true);
        
        defineSymbol(math, ams, textord, "\u2138", "\\daleth", true);
        
        defineSymbol(math, ams, textord, "\u2137", "\\gimel", true); // AMS Greek
        
        
        
        defineSymbol(math, ams, textord, "\u03dd", "\\digamma", true);
        
        defineSymbol(math, ams, textord, "\u03f0", "\\varkappa"); // AMS Delimiters
        
        
        
        defineSymbol(math, ams, open, "\u250c", "\\@ulcorner", true);
        
        defineSymbol(math, ams, close, "\u2510", "\\@urcorner", true);
        
        defineSymbol(math, ams, open, "\u2514", "\\@llcorner", true);
        
        defineSymbol(math, ams, close, "\u2518", "\\@lrcorner", true); // AMS Binary Relations
        
        
        
        defineSymbol(math, ams, rel, "\u2266", "\\leqq", true);
        
        defineSymbol(math, ams, rel, "\u2a7d", "\\leqslant", true);
        
        defineSymbol(math, ams, rel, "\u2a95", "\\eqslantless", true);
        
        defineSymbol(math, ams, rel, "\u2272", "\\lesssim", true);
        
        defineSymbol(math, ams, rel, "\u2a85", "\\lessapprox", true);
        
        defineSymbol(math, ams, rel, "\u224a", "\\approxeq", true);
        
        defineSymbol(math, ams, bin, "\u22d6", "\\lessdot");
        
        defineSymbol(math, ams, rel, "\u22d8", "\\lll", true);
        
        defineSymbol(math, ams, rel, "\u2276", "\\lessgtr", true);
        
        defineSymbol(math, ams, rel, "\u22da", "\\lesseqgtr", true);
        
        defineSymbol(math, ams, rel, "\u2a8b", "\\lesseqqgtr", true);
        
        defineSymbol(math, ams, rel, "\u2251", "\\doteqdot");
        
        defineSymbol(math, ams, rel, "\u2253", "\\risingdotseq", true);
        
        defineSymbol(math, ams, rel, "\u2252", "\\fallingdotseq", true);
        
        defineSymbol(math, ams, rel, "\u223d", "\\backsim", true);
        
        defineSymbol(math, ams, rel, "\u22cd", "\\backsimeq", true);
        
        defineSymbol(math, ams, rel, "\u2ac5", "\\subseteqq", true);
        
        defineSymbol(math, ams, rel, "\u22d0", "\\Subset", true);
        
        defineSymbol(math, ams, rel, "\u228f", "\\sqsubset", true);
        
        defineSymbol(math, ams, rel, "\u227c", "\\preccurlyeq", true);
        
        defineSymbol(math, ams, rel, "\u22de", "\\curlyeqprec", true);
        
        defineSymbol(math, ams, rel, "\u227e", "\\precsim", true);
        
        defineSymbol(math, ams, rel, "\u2ab7", "\\precapprox", true);
        
        defineSymbol(math, ams, rel, "\u22b2", "\\vartriangleleft");
        
        defineSymbol(math, ams, rel, "\u22b4", "\\trianglelefteq");
        
        defineSymbol(math, ams, rel, "\u22a8", "\\vDash", true);
        
        defineSymbol(math, ams, rel, "\u22aa", "\\Vvdash", true);
        
        defineSymbol(math, ams, rel, "\u2323", "\\smallsmile");
        
        defineSymbol(math, ams, rel, "\u2322", "\\smallfrown");
        
        defineSymbol(math, ams, rel, "\u224f", "\\bumpeq", true);
        
        defineSymbol(math, ams, rel, "\u224e", "\\Bumpeq", true);
        
        defineSymbol(math, ams, rel, "\u2267", "\\geqq", true);
        
        defineSymbol(math, ams, rel, "\u2a7e", "\\geqslant", true);
        
        defineSymbol(math, ams, rel, "\u2a96", "\\eqslantgtr", true);
        
        defineSymbol(math, ams, rel, "\u2273", "\\gtrsim", true);
        
        defineSymbol(math, ams, rel, "\u2a86", "\\gtrapprox", true);
        
        defineSymbol(math, ams, bin, "\u22d7", "\\gtrdot");
        
        defineSymbol(math, ams, rel, "\u22d9", "\\ggg", true);
        
        defineSymbol(math, ams, rel, "\u2277", "\\gtrless", true);
        
        defineSymbol(math, ams, rel, "\u22db", "\\gtreqless", true);
        
        defineSymbol(math, ams, rel, "\u2a8c", "\\gtreqqless", true);
        
        defineSymbol(math, ams, rel, "\u2256", "\\eqcirc", true);
        
        defineSymbol(math, ams, rel, "\u2257", "\\circeq", true);
        
        defineSymbol(math, ams, rel, "\u225c", "\\triangleq", true);
        
        defineSymbol(math, ams, rel, "\u223c", "\\thicksim");
        
        defineSymbol(math, ams, rel, "\u2248", "\\thickapprox");
        
        defineSymbol(math, ams, rel, "\u2ac6", "\\supseteqq", true);
        
        defineSymbol(math, ams, rel, "\u22d1", "\\Supset", true);
        
        defineSymbol(math, ams, rel, "\u2290", "\\sqsupset", true);
        
        defineSymbol(math, ams, rel, "\u227d", "\\succcurlyeq", true);
        
        defineSymbol(math, ams, rel, "\u22df", "\\curlyeqsucc", true);
        
        defineSymbol(math, ams, rel, "\u227f", "\\succsim", true);
        
        defineSymbol(math, ams, rel, "\u2ab8", "\\succapprox", true);
        
        defineSymbol(math, ams, rel, "\u22b3", "\\vartriangleright");
        
        defineSymbol(math, ams, rel, "\u22b5", "\\trianglerighteq");
        
        defineSymbol(math, ams, rel, "\u22a9", "\\Vdash", true);
        
        defineSymbol(math, ams, rel, "\u2223", "\\shortmid");
        
        defineSymbol(math, ams, rel, "\u2225", "\\shortparallel");
        
        defineSymbol(math, ams, rel, "\u226c", "\\between", true);
        
        defineSymbol(math, ams, rel, "\u22d4", "\\pitchfork", true);
        
        defineSymbol(math, ams, rel, "\u221d", "\\varpropto");
        
        defineSymbol(math, ams, rel, "\u25c0", "\\blacktriangleleft"); // unicode-math says that \therefore is a mathord atom.
        
        // We kept the amssymb atom type, which is rel.
        
        
        
        defineSymbol(math, ams, rel, "\u2234", "\\therefore", true);
        
        defineSymbol(math, ams, rel, "\u220d", "\\backepsilon");
        
        defineSymbol(math, ams, rel, "\u25b6", "\\blacktriangleright"); // unicode-math says that \because is a mathord atom.
        
        // We kept the amssymb atom type, which is rel.
        
        
        
        defineSymbol(math, ams, rel, "\u2235", "\\because", true);
        
        defineSymbol(math, ams, rel, "\u22d8", "\\llless");
        
        defineSymbol(math, ams, rel, "\u22d9", "\\gggtr");
        
        defineSymbol(math, ams, bin, "\u22b2", "\\lhd");
        
        defineSymbol(math, ams, bin, "\u22b3", "\\rhd");
        
        defineSymbol(math, ams, rel, "\u2242", "\\eqsim", true);
        
        defineSymbol(math, main, rel, "\u22c8", "\\Join");
        
        defineSymbol(math, ams, rel, "\u2251", "\\Doteq", true); // AMS Binary Operators
        
        
        
        defineSymbol(math, ams, bin, "\u2214", "\\dotplus", true);
        
        defineSymbol(math, ams, bin, "\u2216", "\\smallsetminus");
        
        defineSymbol(math, ams, bin, "\u22d2", "\\Cap", true);
        
        defineSymbol(math, ams, bin, "\u22d3", "\\Cup", true);
        
        defineSymbol(math, ams, bin, "\u2a5e", "\\doublebarwedge", true);
        
        defineSymbol(math, ams, bin, "\u229f", "\\boxminus", true);
        
        defineSymbol(math, ams, bin, "\u229e", "\\boxplus", true);
        
        defineSymbol(math, ams, bin, "\u22c7", "\\divideontimes", true);
        
        defineSymbol(math, ams, bin, "\u22c9", "\\ltimes", true);
        
        defineSymbol(math, ams, bin, "\u22ca", "\\rtimes", true);
        
        defineSymbol(math, ams, bin, "\u22cb", "\\leftthreetimes", true);
        
        defineSymbol(math, ams, bin, "\u22cc", "\\rightthreetimes", true);
        
        defineSymbol(math, ams, bin, "\u22cf", "\\curlywedge", true);
        
        defineSymbol(math, ams, bin, "\u22ce", "\\curlyvee", true);
        
        defineSymbol(math, ams, bin, "\u229d", "\\circleddash", true);
        
        defineSymbol(math, ams, bin, "\u229b", "\\circledast", true);
        
        defineSymbol(math, ams, bin, "\u22c5", "\\centerdot");
        
        defineSymbol(math, ams, bin, "\u22ba", "\\intercal", true);
        
        defineSymbol(math, ams, bin, "\u22d2", "\\doublecap");
        
        defineSymbol(math, ams, bin, "\u22d3", "\\doublecup");
        
        defineSymbol(math, ams, bin, "\u22a0", "\\boxtimes", true); // AMS Arrows
        
        // Note: unicode-math maps \u21e2 to their own function \rightdasharrow.
        
        // We'll map it to AMS function \dashrightarrow. It produces the same atom.
        
        
        
        defineSymbol(math, ams, rel, "\u21e2", "\\dashrightarrow", true); // unicode-math maps \u21e0 to \leftdasharrow. We'll use the AMS synonym.
        
        
        
        defineSymbol(math, ams, rel, "\u21e0", "\\dashleftarrow", true);
        
        defineSymbol(math, ams, rel, "\u21c7", "\\leftleftarrows", true);
        
        defineSymbol(math, ams, rel, "\u21c6", "\\leftrightarrows", true);
        
        defineSymbol(math, ams, rel, "\u21da", "\\Lleftarrow", true);
        
        defineSymbol(math, ams, rel, "\u219e", "\\twoheadleftarrow", true);
        
        defineSymbol(math, ams, rel, "\u21a2", "\\leftarrowtail", true);
        
        defineSymbol(math, ams, rel, "\u21ab", "\\looparrowleft", true);
        
        defineSymbol(math, ams, rel, "\u21cb", "\\leftrightharpoons", true);
        
        defineSymbol(math, ams, rel, "\u21b6", "\\curvearrowleft", true); // unicode-math maps \u21ba to \acwopencirclearrow. We'll use the AMS synonym.
        
        
        
        defineSymbol(math, ams, rel, "\u21ba", "\\circlearrowleft", true);
        
        defineSymbol(math, ams, rel, "\u21b0", "\\Lsh", true);
        
        defineSymbol(math, ams, rel, "\u21c8", "\\upuparrows", true);
        
        defineSymbol(math, ams, rel, "\u21bf", "\\upharpoonleft", true);
        
        defineSymbol(math, ams, rel, "\u21c3", "\\downharpoonleft", true);
        
        defineSymbol(math, main, rel, "\u22b6", "\\origof", true); // not in font
        
        
        
        defineSymbol(math, main, rel, "\u22b7", "\\imageof", true); // not in font
        
        
        
        defineSymbol(math, ams, rel, "\u22b8", "\\multimap", true);
        
        defineSymbol(math, ams, rel, "\u21ad", "\\leftrightsquigarrow", true);
        
        defineSymbol(math, ams, rel, "\u21c9", "\\rightrightarrows", true);
        
        defineSymbol(math, ams, rel, "\u21c4", "\\rightleftarrows", true);
        
        defineSymbol(math, ams, rel, "\u21a0", "\\twoheadrightarrow", true);
        
        defineSymbol(math, ams, rel, "\u21a3", "\\rightarrowtail", true);
        
        defineSymbol(math, ams, rel, "\u21ac", "\\looparrowright", true);
        
        defineSymbol(math, ams, rel, "\u21b7", "\\curvearrowright", true); // unicode-math maps \u21bb to \cwopencirclearrow. We'll use the AMS synonym.
        
        
        
        defineSymbol(math, ams, rel, "\u21bb", "\\circlearrowright", true);
        
        defineSymbol(math, ams, rel, "\u21b1", "\\Rsh", true);
        
        defineSymbol(math, ams, rel, "\u21ca", "\\downdownarrows", true);
        
        defineSymbol(math, ams, rel, "\u21be", "\\upharpoonright", true);
        
        defineSymbol(math, ams, rel, "\u21c2", "\\downharpoonright", true);
        
        defineSymbol(math, ams, rel, "\u21dd", "\\rightsquigarrow", true);
        
        defineSymbol(math, ams, rel, "\u21dd", "\\leadsto");
        
        defineSymbol(math, ams, rel, "\u21db", "\\Rrightarrow", true);
        
        defineSymbol(math, ams, rel, "\u21be", "\\restriction");
        
        defineSymbol(math, main, textord, "\u2018", "`");
        
        defineSymbol(math, main, textord, "$", "\\$");
        
        defineSymbol(text, main, textord, "$", "\\$");
        
        defineSymbol(text, main, textord, "$", "\\textdollar");
        
        defineSymbol(math, main, textord, "%", "\\%");
        
        defineSymbol(text, main, textord, "%", "\\%");
        
        defineSymbol(math, main, textord, "_", "\\_");
        
        defineSymbol(text, main, textord, "_", "\\_");
        
        defineSymbol(text, main, textord, "_", "\\textunderscore");
        
        defineSymbol(math, main, textord, "\u2220", "\\angle", true);
        
        defineSymbol(math, main, textord, "\u221e", "\\infty", true);
        
        defineSymbol(math, main, textord, "\u2032", "\\prime");
        
        defineSymbol(math, main, textord, "\u25b3", "\\triangle");
        
        defineSymbol(math, main, textord, "\u0393", "\\Gamma", true);
        
        defineSymbol(math, main, textord, "\u0394", "\\Delta", true);
        
        defineSymbol(math, main, textord, "\u0398", "\\Theta", true);
        
        defineSymbol(math, main, textord, "\u039b", "\\Lambda", true);
        
        defineSymbol(math, main, textord, "\u039e", "\\Xi", true);
        
        defineSymbol(math, main, textord, "\u03a0", "\\Pi", true);
        
        defineSymbol(math, main, textord, "\u03a3", "\\Sigma", true);
        
        defineSymbol(math, main, textord, "\u03a5", "\\Upsilon", true);
        
        defineSymbol(math, main, textord, "\u03a6", "\\Phi", true);
        
        defineSymbol(math, main, textord, "\u03a8", "\\Psi", true);
        
        defineSymbol(math, main, textord, "\u03a9", "\\Omega", true);
        
        defineSymbol(math, main, textord, "A", "\u0391");
        
        defineSymbol(math, main, textord, "B", "\u0392");
        
        defineSymbol(math, main, textord, "E", "\u0395");
        
        defineSymbol(math, main, textord, "Z", "\u0396");
        
        defineSymbol(math, main, textord, "H", "\u0397");
        
        defineSymbol(math, main, textord, "I", "\u0399");
        
        defineSymbol(math, main, textord, "K", "\u039A");
        
        defineSymbol(math, main, textord, "M", "\u039C");
        
        defineSymbol(math, main, textord, "N", "\u039D");
        
        defineSymbol(math, main, textord, "O", "\u039F");
        
        defineSymbol(math, main, textord, "P", "\u03A1");
        
        defineSymbol(math, main, textord, "T", "\u03A4");
        
        defineSymbol(math, main, textord, "X", "\u03A7");
        
        defineSymbol(math, main, textord, "\u00ac", "\\neg", true);
        
        defineSymbol(math, main, textord, "\u00ac", "\\lnot");
        
        defineSymbol(math, main, textord, "\u22a4", "\\top");
        
        defineSymbol(math, main, textord, "\u22a5", "\\bot");
        
        defineSymbol(math, main, textord, "\u2205", "\\emptyset");
        
        defineSymbol(math, ams, textord, "\u2205", "\\varnothing");
        
        defineSymbol(math, main, mathord, "\u03b1", "\\alpha", true);
        
        defineSymbol(math, main, mathord, "\u03b2", "\\beta", true);
        
        defineSymbol(math, main, mathord, "\u03b3", "\\gamma", true);
        
        defineSymbol(math, main, mathord, "\u03b4", "\\delta", true);
        
        defineSymbol(math, main, mathord, "\u03f5", "\\epsilon", true);
        
        defineSymbol(math, main, mathord, "\u03b6", "\\zeta", true);
        
        defineSymbol(math, main, mathord, "\u03b7", "\\eta", true);
        
        defineSymbol(math, main, mathord, "\u03b8", "\\theta", true);
        
        defineSymbol(math, main, mathord, "\u03b9", "\\iota", true);
        
        defineSymbol(math, main, mathord, "\u03ba", "\\kappa", true);
        
        defineSymbol(math, main, mathord, "\u03bb", "\\lambda", true);
        
        defineSymbol(math, main, mathord, "\u03bc", "\\mu", true);
        
        defineSymbol(math, main, mathord, "\u03bd", "\\nu", true);
        
        defineSymbol(math, main, mathord, "\u03be", "\\xi", true);
        
        defineSymbol(math, main, mathord, "\u03bf", "\\omicron", true);
        
        defineSymbol(math, main, mathord, "\u03c0", "\\pi", true);
        
        defineSymbol(math, main, mathord, "\u03c1", "\\rho", true);
        
        defineSymbol(math, main, mathord, "\u03c3", "\\sigma", true);
        
        defineSymbol(math, main, mathord, "\u03c4", "\\tau", true);
        
        defineSymbol(math, main, mathord, "\u03c5", "\\upsilon", true);
        
        defineSymbol(math, main, mathord, "\u03d5", "\\phi", true);
        
        defineSymbol(math, main, mathord, "\u03c7", "\\chi", true);
        
        defineSymbol(math, main, mathord, "\u03c8", "\\psi", true);
        
        defineSymbol(math, main, mathord, "\u03c9", "\\omega", true);
        
        defineSymbol(math, main, mathord, "\u03b5", "\\varepsilon", true);
        
        defineSymbol(math, main, mathord, "\u03d1", "\\vartheta", true);
        
        defineSymbol(math, main, mathord, "\u03d6", "\\varpi", true);
        
        defineSymbol(math, main, mathord, "\u03f1", "\\varrho", true);
        
        defineSymbol(math, main, mathord, "\u03c2", "\\varsigma", true);
        
        defineSymbol(math, main, mathord, "\u03c6", "\\varphi", true);
        
        defineSymbol(math, main, bin, "\u2217", "*", true);
        
        defineSymbol(math, main, bin, "+", "+");
        
        defineSymbol(math, main, bin, "\u2212", "-", true);
        
        defineSymbol(math, main, bin, "\u22c5", "\\cdot", true);
        
        defineSymbol(math, main, bin, "\u2218", "\\circ", true);
        
        defineSymbol(math, main, bin, "\u00f7", "\\div", true);
        
        defineSymbol(math, main, bin, "\u00b1", "\\pm", true);
        
        defineSymbol(math, main, bin, "\u00d7", "\\times", true);
        
        defineSymbol(math, main, bin, "\u2229", "\\cap", true);
        
        defineSymbol(math, main, bin, "\u222a", "\\cup", true);
        
        defineSymbol(math, main, bin, "\u2216", "\\setminus", true);
        
        defineSymbol(math, main, bin, "\u2227", "\\land");
        
        defineSymbol(math, main, bin, "\u2228", "\\lor");
        
        defineSymbol(math, main, bin, "\u2227", "\\wedge", true);
        
        defineSymbol(math, main, bin, "\u2228", "\\vee", true);
        
        defineSymbol(math, main, textord, "\u221a", "\\surd");
        
        defineSymbol(math, main, open, "\u27e8", "\\langle", true);
        
        defineSymbol(math, main, open, "\u2223", "\\lvert");
        
        defineSymbol(math, main, open, "\u2225", "\\lVert");
        
        defineSymbol(math, main, close, "?", "?");
        
        defineSymbol(math, main, close, "!", "!");
        
        defineSymbol(math, main, close, "\u27e9", "\\rangle", true);
        
        defineSymbol(math, main, close, "\u2223", "\\rvert");
        
        defineSymbol(math, main, close, "\u2225", "\\rVert");
        
        defineSymbol(math, main, rel, "=", "=");
        
        defineSymbol(math, main, rel, ":", ":");
        
        defineSymbol(math, main, rel, "\u2248", "\\approx", true);
        
        defineSymbol(math, main, rel, "\u2245", "\\cong", true);
        
        defineSymbol(math, main, rel, "\u2265", "\\ge");
        
        defineSymbol(math, main, rel, "\u2265", "\\geq", true);
        
        defineSymbol(math, main, rel, "\u2190", "\\gets");
        
        defineSymbol(math, main, rel, ">", "\\gt", true);
        
        defineSymbol(math, main, rel, "\u2208", "\\in", true);
        
        defineSymbol(math, main, rel, "\ue020", "\\@not");
        
        defineSymbol(math, main, rel, "\u2282", "\\subset", true);
        
        defineSymbol(math, main, rel, "\u2283", "\\supset", true);
        
        defineSymbol(math, main, rel, "\u2286", "\\subseteq", true);
        
        defineSymbol(math, main, rel, "\u2287", "\\supseteq", true);
        
        defineSymbol(math, ams, rel, "\u2288", "\\nsubseteq", true);
        
        defineSymbol(math, ams, rel, "\u2289", "\\nsupseteq", true);
        
        defineSymbol(math, main, rel, "\u22a8", "\\models");
        
        defineSymbol(math, main, rel, "\u2190", "\\leftarrow", true);
        
        defineSymbol(math, main, rel, "\u2264", "\\le");
        
        defineSymbol(math, main, rel, "\u2264", "\\leq", true);
        
        defineSymbol(math, main, rel, "<", "\\lt", true);
        
        defineSymbol(math, main, rel, "\u2192", "\\rightarrow", true);
        
        defineSymbol(math, main, rel, "\u2192", "\\to");
        
        defineSymbol(math, ams, rel, "\u2271", "\\ngeq", true);
        
        defineSymbol(math, ams, rel, "\u2270", "\\nleq", true);
        
        defineSymbol(math, main, spacing, "\u00a0", "\\ ");
        
        defineSymbol(math, main, spacing, "\u00a0", "\\space"); // Ref: LaTeX Source 2e: \DeclareRobustCommand{\nobreakspace}{%
        
        
        
        defineSymbol(math, main, spacing, "\u00a0", "\\nobreakspace");
        
        defineSymbol(text, main, spacing, "\u00a0", "\\ ");
        
        defineSymbol(text, main, spacing, "\u00a0", " ");
        
        defineSymbol(text, main, spacing, "\u00a0", "\\space");
        
        defineSymbol(text, main, spacing, "\u00a0", "\\nobreakspace");
        
        defineSymbol(math, main, spacing, null, "\\nobreak");
        
        defineSymbol(math, main, spacing, null, "\\allowbreak");
        
        defineSymbol(math, main, punct, ",", ",");
        
        defineSymbol(math, main, punct, ";", ";");
        
        defineSymbol(math, ams, bin, "\u22bc", "\\barwedge", true);
        
        defineSymbol(math, ams, bin, "\u22bb", "\\veebar", true);
        
        defineSymbol(math, main, bin, "\u2299", "\\odot", true);
        
        defineSymbol(math, main, bin, "\u2295", "\\oplus", true);
        
        defineSymbol(math, main, bin, "\u2297", "\\otimes", true);
        
        defineSymbol(math, main, textord, "\u2202", "\\partial", true);
        
        defineSymbol(math, main, bin, "\u2298", "\\oslash", true);
        
        defineSymbol(math, ams, bin, "\u229a", "\\circledcirc", true);
        
        defineSymbol(math, ams, bin, "\u22a1", "\\boxdot", true);
        
        defineSymbol(math, main, bin, "\u25b3", "\\bigtriangleup");
        
        defineSymbol(math, main, bin, "\u25bd", "\\bigtriangledown");
        
        defineSymbol(math, main, bin, "\u2020", "\\dagger");
        
        defineSymbol(math, main, bin, "\u22c4", "\\diamond");
        
        defineSymbol(math, main, bin, "\u22c6", "\\star");
        
        defineSymbol(math, main, bin, "\u25c3", "\\triangleleft");
        
        defineSymbol(math, main, bin, "\u25b9", "\\triangleright");
        
        defineSymbol(math, main, open, "{", "\\{");
        
        defineSymbol(text, main, textord, "{", "\\{");
        
        defineSymbol(text, main, textord, "{", "\\textbraceleft");
        
        defineSymbol(math, main, close, "}", "\\}");
        
        defineSymbol(text, main, textord, "}", "\\}");
        
        defineSymbol(text, main, textord, "}", "\\textbraceright");
        
        defineSymbol(math, main, open, "{", "\\lbrace");
        
        defineSymbol(math, main, close, "}", "\\rbrace");
        
        defineSymbol(math, main, open, "[", "\\lbrack", true);
        
        defineSymbol(text, main, textord, "[", "\\lbrack", true);
        
        defineSymbol(math, main, close, "]", "\\rbrack", true);
        
        defineSymbol(text, main, textord, "]", "\\rbrack", true);
        
        defineSymbol(math, main, open, "(", "\\lparen", true);
        
        defineSymbol(math, main, close, ")", "\\rparen", true);
        
        defineSymbol(text, main, textord, "<", "\\textless", true); // in T1 fontenc
        
        
        
        defineSymbol(text, main, textord, ">", "\\textgreater", true); // in T1 fontenc
        
        
        
        defineSymbol(math, main, open, "\u230a", "\\lfloor", true);
        
        defineSymbol(math, main, close, "\u230b", "\\rfloor", true);
        
        defineSymbol(math, main, open, "\u2308", "\\lceil", true);
        
        defineSymbol(math, main, close, "\u2309", "\\rceil", true);
        
        defineSymbol(math, main, textord, "\\", "\\backslash");
        
        defineSymbol(math, main, textord, "\u2223", "|");
        
        defineSymbol(math, main, textord, "\u2223", "\\vert");
        
        defineSymbol(text, main, textord, "|", "\\textbar", true); // in T1 fontenc
        
        
        
        defineSymbol(math, main, textord, "\u2225", "\\|");
        
        defineSymbol(math, main, textord, "\u2225", "\\Vert");
        
        defineSymbol(text, main, textord, "\u2225", "\\textbardbl");
        
        defineSymbol(text, main, textord, "~", "\\textasciitilde");
        
        defineSymbol(text, main, textord, "\\", "\\textbackslash");
        
        defineSymbol(text, main, textord, "^", "\\textasciicircum");
        
        defineSymbol(math, main, rel, "\u2191", "\\uparrow", true);
        
        defineSymbol(math, main, rel, "\u21d1", "\\Uparrow", true);
        
        defineSymbol(math, main, rel, "\u2193", "\\downarrow", true);
        
        defineSymbol(math, main, rel, "\u21d3", "\\Downarrow", true);
        
        defineSymbol(math, main, rel, "\u2195", "\\updownarrow", true);
        
        defineSymbol(math, main, rel, "\u21d5", "\\Updownarrow", true);
        
        defineSymbol(math, main, op, "\u2210", "\\coprod");
        
        defineSymbol(math, main, op, "\u22c1", "\\bigvee");
        
        defineSymbol(math, main, op, "\u22c0", "\\bigwedge");
        
        defineSymbol(math, main, op, "\u2a04", "\\biguplus");
        
        defineSymbol(math, main, op, "\u22c2", "\\bigcap");
        
        defineSymbol(math, main, op, "\u22c3", "\\bigcup");
        
        defineSymbol(math, main, op, "\u222b", "\\int");
        
        defineSymbol(math, main, op, "\u222b", "\\intop");
        
        defineSymbol(math, main, op, "\u222c", "\\iint");
        
        defineSymbol(math, main, op, "\u222d", "\\iiint");
        
        defineSymbol(math, main, op, "\u220f", "\\prod");
        
        defineSymbol(math, main, op, "\u2211", "\\sum");
        
        defineSymbol(math, main, op, "\u2a02", "\\bigotimes");
        
        defineSymbol(math, main, op, "\u2a01", "\\bigoplus");
        
        defineSymbol(math, main, op, "\u2a00", "\\bigodot");
        
        defineSymbol(math, main, op, "\u222e", "\\oint");
        
        defineSymbol(math, main, op, "\u222f", "\\oiint");
        
        defineSymbol(math, main, op, "\u2230", "\\oiiint");
        
        defineSymbol(math, main, op, "\u2a06", "\\bigsqcup");
        
        defineSymbol(math, main, op, "\u222b", "\\smallint");
        
        defineSymbol(text, main, inner, "\u2026", "\\textellipsis");
        
        defineSymbol(math, main, inner, "\u2026", "\\mathellipsis");
        
        defineSymbol(text, main, inner, "\u2026", "\\ldots", true);
        
        defineSymbol(math, main, inner, "\u2026", "\\ldots", true);
        
        defineSymbol(math, main, inner, "\u22ef", "\\@cdots", true);
        
        defineSymbol(math, main, inner, "\u22f1", "\\ddots", true);
        
        defineSymbol(math, main, textord, "\u22ee", "\\varvdots"); // \vdots is a macro
        
        
        
        defineSymbol(math, main, accent, "\u02ca", "\\acute");
        
        defineSymbol(math, main, accent, "\u02cb", "\\grave");
        
        defineSymbol(math, main, accent, "\u00a8", "\\ddot");
        
        defineSymbol(math, main, accent, "\u007e", "\\tilde");
        
        defineSymbol(math, main, accent, "\u02c9", "\\bar");
        
        defineSymbol(math, main, accent, "\u02d8", "\\breve");
        
        defineSymbol(math, main, accent, "\u02c7", "\\check");
        
        defineSymbol(math, main, accent, "\u005e", "\\hat");
        
        defineSymbol(math, main, accent, "\u20d7", "\\vec");
        
        defineSymbol(math, main, accent, "\u02d9", "\\dot");
        
        defineSymbol(math, main, accent, "\u02da", "\\mathring"); // \imath and \jmath should be invariant to \mathrm, \mathbf, etc., so use PUA
        
        
        
        defineSymbol(math, main, mathord, "\ue131", "\\@imath");
        
        defineSymbol(math, main, mathord, "\ue237", "\\@jmath");
        
        defineSymbol(math, main, textord, "\u0131", "\u0131");
        
        defineSymbol(math, main, textord, "\u0237", "\u0237");
        
        defineSymbol(text, main, textord, "\u0131", "\\i", true);
        
        defineSymbol(text, main, textord, "\u0237", "\\j", true);
        
        defineSymbol(text, main, textord, "\u00df", "\\ss", true);
        
        defineSymbol(text, main, textord, "\u00e6", "\\ae", true);
        
        defineSymbol(text, main, textord, "\u0153", "\\oe", true);
        
        defineSymbol(text, main, textord, "\u00f8", "\\o", true);
        
        defineSymbol(text, main, textord, "\u00c6", "\\AE", true);
        
        defineSymbol(text, main, textord, "\u0152", "\\OE", true);
        
        defineSymbol(text, main, textord, "\u00d8", "\\O", true);
        
        defineSymbol(text, main, accent, "\u02ca", "\\'"); // acute
        
        
        
        defineSymbol(text, main, accent, "\u02cb", "\\`"); // grave
        
        
        
        defineSymbol(text, main, accent, "\u02c6", "\\^"); // circumflex
        
        
        
        defineSymbol(text, main, accent, "\u02dc", "\\~"); // tilde
        
        
        
        defineSymbol(text, main, accent, "\u02c9", "\\="); // macron
        
        
        
        defineSymbol(text, main, accent, "\u02d8", "\\u"); // breve
        
        
        
        defineSymbol(text, main, accent, "\u02d9", "\\."); // dot above
        
        
        
        defineSymbol(text, main, accent, "\u00b8", "\\c"); // cedilla
        
        
        
        defineSymbol(text, main, accent, "\u02da", "\\r"); // ring above
        
        
        
        defineSymbol(text, main, accent, "\u02c7", "\\v"); // caron
        
        
        
        defineSymbol(text, main, accent, "\u00a8", '\\"'); // diaresis
        
        
        
        defineSymbol(text, main, accent, "\u02dd", "\\H"); // double acute
        
        
        
        defineSymbol(text, main, accent, "\u25ef", "\\textcircled"); // \bigcirc glyph
        
        // These ligatures are detected and created in Parser.js's `formLigatures`.
        
        
        
        var ligatures = {
        
          "--": true,
        
          "---": true,
        
          "``": true,
        
          "''": true
        
        };
        
        defineSymbol(text, main, textord, "\u2013", "--", true);
        
        defineSymbol(text, main, textord, "\u2013", "\\textendash");
        
        defineSymbol(text, main, textord, "\u2014", "---", true);
        
        defineSymbol(text, main, textord, "\u2014", "\\textemdash");
        
        defineSymbol(text, main, textord, "\u2018", "`", true);
        
        defineSymbol(text, main, textord, "\u2018", "\\textquoteleft");
        
        defineSymbol(text, main, textord, "\u2019", "'", true);
        
        defineSymbol(text, main, textord, "\u2019", "\\textquoteright");
        
        defineSymbol(text, main, textord, "\u201c", "``", true);
        
        defineSymbol(text, main, textord, "\u201c", "\\textquotedblleft");
        
        defineSymbol(text, main, textord, "\u201d", "''", true);
        
        defineSymbol(text, main, textord, "\u201d", "\\textquotedblright"); //  \degree from gensymb package
        
        
        
        defineSymbol(math, main, textord, "\u00b0", "\\degree", true);
        
        defineSymbol(text, main, textord, "\u00b0", "\\degree"); // \textdegree from inputenc package
        
        
        
        defineSymbol(text, main, textord, "\u00b0", "\\textdegree", true); // TODO: In LaTeX, \pounds can generate a different character in text and math
        
        // mode, but among our fonts, only Main-Regular defines this character "163".
        
        
        
        defineSymbol(math, main, textord, "\u00a3", "\\pounds");
        
        defineSymbol(math, main, textord, "\u00a3", "\\mathsterling", true);
        
        defineSymbol(text, main, textord, "\u00a3", "\\pounds");
        
        defineSymbol(text, main, textord, "\u00a3", "\\textsterling", true);
        
        defineSymbol(math, ams, textord, "\u2720", "\\maltese");
        
        defineSymbol(text, ams, textord, "\u2720", "\\maltese"); // There are lots of symbols which are the same, so we add them in afterwards.
        
        // All of these are textords in math mode
        
        
        
        var mathTextSymbols = "0123456789/@.\"";
        
        
        
        for (var i = 0; i < mathTextSymbols.length; i++) {
        
          var ch = mathTextSymbols.charAt(i);
        
          defineSymbol(math, main, textord, ch, ch);
        
        } // All of these are textords in text mode
        
        
        
        
        
        var textSymbols = "0123456789!@*()-=+\";:?/.,";
        
        
        
        for (var _i = 0; _i < textSymbols.length; _i++) {
        
          var _ch = textSymbols.charAt(_i);
        
        
        
          defineSymbol(text, main, textord, _ch, _ch);
        
        } // All of these are textords in text mode, and mathords in math mode
        
        
        
        
        
        var letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
        
        
        
        for (var _i2 = 0; _i2 < letters.length; _i2++) {
        
          var _ch2 = letters.charAt(_i2);
        
        
        
          defineSymbol(math, main, mathord, _ch2, _ch2);
        
          defineSymbol(text, main, textord, _ch2, _ch2);
        
        } // Blackboard bold and script letters in Unicode range
        
        
        
        
        
        defineSymbol(math, ams, textord, "C", "\u2102"); // blackboard bold
        
        
        
        defineSymbol(text, ams, textord, "C", "\u2102");
        
        defineSymbol(math, ams, textord, "H", "\u210D");
        
        defineSymbol(text, ams, textord, "H", "\u210D");
        
        defineSymbol(math, ams, textord, "N", "\u2115");
        
        defineSymbol(text, ams, textord, "N", "\u2115");
        
        defineSymbol(math, ams, textord, "P", "\u2119");
        
        defineSymbol(text, ams, textord, "P", "\u2119");
        
        defineSymbol(math, ams, textord, "Q", "\u211A");
        
        defineSymbol(text, ams, textord, "Q", "\u211A");
        
        defineSymbol(math, ams, textord, "R", "\u211D");
        
        defineSymbol(text, ams, textord, "R", "\u211D");
        
        defineSymbol(math, ams, textord, "Z", "\u2124");
        
        defineSymbol(text, ams, textord, "Z", "\u2124");
        
        defineSymbol(math, main, mathord, "h", "\u210E"); // italic h, Planck constant
        
        
        
        defineSymbol(text, main, mathord, "h", "\u210E"); // The next loop loads wide (surrogate pair) characters.
        
        // We support some letters in the Unicode range U+1D400 to U+1D7FF,
        
        // Mathematical Alphanumeric Symbols.
        
        // Some editors do not deal well with wide characters. So don't write the
        
        // string into this file. Instead, create the string from the surrogate pair.
        
        
        
        var wideChar = "";
        
        
        
        for (var _i3 = 0; _i3 < letters.length; _i3++) {
        
          var _ch3 = letters.charAt(_i3); // The hex numbers in the next line are a surrogate pair.
        
          // 0xD835 is the high surrogate for all letters in the range we support.
        
          // 0xDC00 is the low surrogate for bold A.
        
        
        
        
        
          wideChar = String.fromCharCode(0xD835, 0xDC00 + _i3); // A-Z a-z bold
        
        
        
          defineSymbol(math, main, mathord, _ch3, wideChar);
        
          defineSymbol(text, main, textord, _ch3, wideChar);
        
          wideChar = String.fromCharCode(0xD835, 0xDC34 + _i3); // A-Z a-z italic
        
        
        
          defineSymbol(math, main, mathord, _ch3, wideChar);
        
          defineSymbol(text, main, textord, _ch3, wideChar);
        
          wideChar = String.fromCharCode(0xD835, 0xDC68 + _i3); // A-Z a-z bold italic
        
        
        
          defineSymbol(math, main, mathord, _ch3, wideChar);
        
          defineSymbol(text, main, textord, _ch3, wideChar);
        
          wideChar = String.fromCharCode(0xD835, 0xDD04 + _i3); // A-Z a-z Fractur
        
        
        
          defineSymbol(math, main, mathord, _ch3, wideChar);
        
          defineSymbol(text, main, textord, _ch3, wideChar);
        
          wideChar = String.fromCharCode(0xD835, 0xDD6C + _i3); // A-Z a-z bold Fractur
        
        
        
          defineSymbol(math, main, mathord, _ch3, wideChar);
        
          defineSymbol(text, main, textord, _ch3, wideChar);
        
          wideChar = String.fromCharCode(0xD835, 0xDDA0 + _i3); // A-Z a-z sans-serif
        
        
        
          defineSymbol(math, main, mathord, _ch3, wideChar);
        
          defineSymbol(text, main, textord, _ch3, wideChar);
        
          wideChar = String.fromCharCode(0xD835, 0xDDD4 + _i3); // A-Z a-z sans bold
        
        
        
          defineSymbol(math, main, mathord, _ch3, wideChar);
        
          defineSymbol(text, main, textord, _ch3, wideChar);
        
          wideChar = String.fromCharCode(0xD835, 0xDE08 + _i3); // A-Z a-z sans italic
        
        
        
          defineSymbol(math, main, mathord, _ch3, wideChar);
        
          defineSymbol(text, main, textord, _ch3, wideChar);
        
          wideChar = String.fromCharCode(0xD835, 0xDE70 + _i3); // A-Z a-z monospace
        
        
        
          defineSymbol(math, main, mathord, _ch3, wideChar);
        
          defineSymbol(text, main, textord, _ch3, wideChar);
        
        
        
          if (_i3 < 26) {
        
            // KaTeX fonts have only capital letters for blackboard bold and script.
        
            // See exception for k below.
        
            wideChar = String.fromCharCode(0xD835, 0xDD38 + _i3); // A-Z double struck
        
        
        
            defineSymbol(math, main, mathord, _ch3, wideChar);
        
            defineSymbol(text, main, textord, _ch3, wideChar);
        
            wideChar = String.fromCharCode(0xD835, 0xDC9C + _i3); // A-Z script
        
        
        
            defineSymbol(math, main, mathord, _ch3, wideChar);
        
            defineSymbol(text, main, textord, _ch3, wideChar);
        
          } // TODO: Add bold script when it is supported by a KaTeX font.
        
        
        
        } // "k" is the only double struck lower case letter in the KaTeX fonts.
        
        
        
        
        
        wideChar = String.fromCharCode(0xD835, 0xDD5C); // k double struck
        
        
        
        defineSymbol(math, main, mathord, "k", wideChar);
        
        defineSymbol(text, main, textord, "k", wideChar); // Next, some wide character numerals
        
        
        
        for (var _i4 = 0; _i4 < 10; _i4++) {
        
          var _ch4 = _i4.toString();
        
        
        
          wideChar = String.fromCharCode(0xD835, 0xDFCE + _i4); // 0-9 bold
        
        
        
          defineSymbol(math, main, mathord, _ch4, wideChar);
        
          defineSymbol(text, main, textord, _ch4, wideChar);
        
          wideChar = String.fromCharCode(0xD835, 0xDFE2 + _i4); // 0-9 sans serif
        
        
        
          defineSymbol(math, main, mathord, _ch4, wideChar);
        
          defineSymbol(text, main, textord, _ch4, wideChar);
        
          wideChar = String.fromCharCode(0xD835, 0xDFEC + _i4); // 0-9 bold sans
        
        
        
          defineSymbol(math, main, mathord, _ch4, wideChar);
        
          defineSymbol(text, main, textord, _ch4, wideChar);
        
          wideChar = String.fromCharCode(0xD835, 0xDFF6 + _i4); // 0-9 monospace
        
        
        
          defineSymbol(math, main, mathord, _ch4, wideChar);
        
          defineSymbol(text, main, textord, _ch4, wideChar);
        
        } // We add these Latin-1 letters as symbols for backwards-compatibility,
        
        // but they are not actually in the font, nor are they supported by the
        
        // Unicode accent mechanism, so they fall back to Times font and look ugly.
        
        // TODO(edemaine): Fix this.
        
        
        
        
        
        var extraLatin = "\u00d0\u00de\u00fe";
        
        
        
        for (var _i5 = 0; _i5 < extraLatin.length; _i5++) {
        
          var _ch5 = extraLatin.charAt(_i5);
        
        
        
          defineSymbol(math, main, mathord, _ch5, _ch5);
        
          defineSymbol(text, main, textord, _ch5, _ch5);
        
        }
        
        
        
        /**
        
         * This file provides support for Unicode range U+1D400 to U+1D7FF,
        
         * Mathematical Alphanumeric Symbols.
        
         *
        
         * Function wideCharacterFont takes a wide character as input and returns
        
         * the font information necessary to render it properly.
        
         */
        
        /**
        
         * Data below is from https://www.unicode.org/charts/PDF/U1D400.pdf
        
         * That document sorts characters into groups by font type, say bold or italic.
        
         *
        
         * In the arrays below, each subarray consists three elements:
        
         *      * The CSS class of that group when in math mode.
        
         *      * The CSS class of that group when in text mode.
        
         *      * The font name, so that KaTeX can get font metrics.
        
         */
        
        
        
        var wideLatinLetterData = [["mathbf", "textbf", "Main-Bold"], // A-Z bold upright
        
        ["mathbf", "textbf", "Main-Bold"], // a-z bold upright
        
        ["mathnormal", "textit", "Math-Italic"], // A-Z italic
        
        ["mathnormal", "textit", "Math-Italic"], // a-z italic
        
        ["boldsymbol", "boldsymbol", "Main-BoldItalic"], // A-Z bold italic
        
        ["boldsymbol", "boldsymbol", "Main-BoldItalic"], // a-z bold italic
        
        // Map fancy A-Z letters to script, not calligraphic.
        
        // This aligns with unicode-math and math fonts (except Cambria Math).
        
        ["mathscr", "textscr", "Script-Regular"], // A-Z script
        
        ["", "", ""], // a-z script.  No font
        
        ["", "", ""], // A-Z bold script. No font
        
        ["", "", ""], // a-z bold script. No font
        
        ["mathfrak", "textfrak", "Fraktur-Regular"], // A-Z Fraktur
        
        ["mathfrak", "textfrak", "Fraktur-Regular"], // a-z Fraktur
        
        ["mathbb", "textbb", "AMS-Regular"], // A-Z double-struck
        
        ["mathbb", "textbb", "AMS-Regular"], // k double-struck
        
        // Note that we are using a bold font, but font metrics for regular Fraktur.
        
        ["mathboldfrak", "textboldfrak", "Fraktur-Regular"], // A-Z bold Fraktur
        
        ["mathboldfrak", "textboldfrak", "Fraktur-Regular"], // a-z bold Fraktur
        
        ["mathsf", "textsf", "SansSerif-Regular"], // A-Z sans-serif
        
        ["mathsf", "textsf", "SansSerif-Regular"], // a-z sans-serif
        
        ["mathboldsf", "textboldsf", "SansSerif-Bold"], // A-Z bold sans-serif
        
        ["mathboldsf", "textboldsf", "SansSerif-Bold"], // a-z bold sans-serif
        
        ["mathitsf", "textitsf", "SansSerif-Italic"], // A-Z italic sans-serif
        
        ["mathitsf", "textitsf", "SansSerif-Italic"], // a-z italic sans-serif
        
        ["", "", ""], // A-Z bold italic sans. No font
        
        ["", "", ""], // a-z bold italic sans. No font
        
        ["mathtt", "texttt", "Typewriter-Regular"], // A-Z monospace
        
        ["mathtt", "texttt", "Typewriter-Regular"] // a-z monospace
        
        ];
        
        var wideNumeralData = [["mathbf", "textbf", "Main-Bold"], // 0-9 bold
        
        ["", "", ""], // 0-9 double-struck. No KaTeX font.
        
        ["mathsf", "textsf", "SansSerif-Regular"], // 0-9 sans-serif
        
        ["mathboldsf", "textboldsf", "SansSerif-Bold"], // 0-9 bold sans-serif
        
        ["mathtt", "texttt", "Typewriter-Regular"] // 0-9 monospace
        
        ];
        
        var wideCharacterFont = function wideCharacterFont(wideChar, mode) {
        
          // IE doesn't support codePointAt(). So work with the surrogate pair.
        
          var H = wideChar.charCodeAt(0); // high surrogate
        
        
        
          var L = wideChar.charCodeAt(1); // low surrogate
        
        
        
          var codePoint = (H - 0xD800) * 0x400 + (L - 0xDC00) + 0x10000;
        
          var j = mode === "math" ? 0 : 1; // column index for CSS class.
        
        
        
          if (0x1D400 <= codePoint && codePoint < 0x1D6A4) {
        
            // wideLatinLetterData contains exactly 26 chars on each row.
        
            // So we can calculate the relevant row. No traverse necessary.
        
            var i = Math.floor((codePoint - 0x1D400) / 26);
        
            return [wideLatinLetterData[i][2], wideLatinLetterData[i][j]];
        
          } else if (0x1D7CE <= codePoint && codePoint <= 0x1D7FF) {
        
            // Numerals, ten per row.
        
            var _i = Math.floor((codePoint - 0x1D7CE) / 10);
        
        
        
            return [wideNumeralData[_i][2], wideNumeralData[_i][j]];
        
          } else if (codePoint === 0x1D6A5 || codePoint === 0x1D6A6) {
        
            // dotless i or j
        
            return [wideLatinLetterData[0][2], wideLatinLetterData[0][j]];
        
          } else if (0x1D6A6 < codePoint && codePoint < 0x1D7CE) {
        
            // Greek letters. Not supported, yet.
        
            return ["", ""];
        
          } else {
        
            // We don't support any wide characters outside 1D400–1D7FF.
        
            throw new ParseError("Unsupported character: " + wideChar);
        
          }
        
        };
        
        
        
        /* eslint no-console:0 */
        
        
        
        /**
        
         * Looks up the given symbol in fontMetrics, after applying any symbol
        
         * replacements defined in symbol.js
        
         */
        
        var lookupSymbol = function lookupSymbol(value, // TODO(#963): Use a union type for this.
        
        fontName, mode) {
        
          // Replace the value with its replaced value from symbol.js
        
          if (symbols[mode][value] && symbols[mode][value].replace) {
        
            value = symbols[mode][value].replace;
        
          }
        
        
        
          return {
        
            value: value,
        
            metrics: getCharacterMetrics(value, fontName, mode)
        
          };
        
        };
        
        /**
        
         * Makes a symbolNode after translation via the list of symbols in symbols.js.
        
         * Correctly pulls out metrics for the character, and optionally takes a list of
        
         * classes to be attached to the node.
        
         *
        
         * TODO: make argument order closer to makeSpan
        
         * TODO: add a separate argument for math class (e.g. `mop`, `mbin`), which
        
         * should if present come first in `classes`.
        
         * TODO(#953): Make `options` mandatory and always pass it in.
        
         */
        
        
        
        
        
        var makeSymbol = function makeSymbol(value, fontName, mode, options, classes) {
        
          var lookup = lookupSymbol(value, fontName, mode);
        
          var metrics = lookup.metrics;
        
          value = lookup.value;
        
          var symbolNode;
        
        
        
          if (metrics) {
        
            var italic = metrics.italic;
        
        
        
            if (mode === "text" || options && options.font === "mathit") {
        
              italic = 0;
        
            }
        
        
        
            symbolNode = new SymbolNode(value, metrics.height, metrics.depth, italic, metrics.skew, metrics.width, classes);
        
          } else {
        
            // TODO(emily): Figure out a good way to only print this in development
        
            typeof console !== "undefined" && console.warn("No character metrics " + ("for '" + value + "' in style '" + fontName + "' and mode '" + mode + "'"));
        
            symbolNode = new SymbolNode(value, 0, 0, 0, 0, 0, classes);
        
          }
        
        
        
          if (options) {
        
            symbolNode.maxFontSize = options.sizeMultiplier;
        
        
        
            if (options.style.isTight()) {
        
              symbolNode.classes.push("mtight");
        
            }
        
        
        
            var color = options.getColor();
        
        
        
            if (color) {
        
              symbolNode.style.color = color;
        
            }
        
          }
        
        
        
          return symbolNode;
        
        };
        
        /**
        
         * Makes a symbol in Main-Regular or AMS-Regular.
        
         * Used for rel, bin, open, close, inner, and punct.
        
         */
        
        
        
        
        
        var mathsym = function mathsym(value, mode, options, classes) {
        
          if (classes === void 0) {
        
            classes = [];
        
          }
        
        
        
          // Decide what font to render the symbol in by its entry in the symbols
        
          // table.
        
          // Have a special case for when the value = \ because the \ is used as a
        
          // textord in unsupported command errors but cannot be parsed as a regular
        
          // text ordinal and is therefore not present as a symbol in the symbols
        
          // table for text, as well as a special case for boldsymbol because it
        
          // can be used for bold + and -
        
          if (options.font === "boldsymbol" && lookupSymbol(value, "Main-Bold", mode).metrics) {
        
            return makeSymbol(value, "Main-Bold", mode, options, classes.concat(["mathbf"]));
        
          } else if (value === "\\" || symbols[mode][value].font === "main") {
        
            return makeSymbol(value, "Main-Regular", mode, options, classes);
        
          } else {
        
            return makeSymbol(value, "AMS-Regular", mode, options, classes.concat(["amsrm"]));
        
          }
        
        };
        
        /**
        
         * Determines which of the two font names (Main-Bold and Math-BoldItalic) and
        
         * corresponding style tags (mathbf or boldsymbol) to use for font "boldsymbol",
        
         * depending on the symbol.  Use this function instead of fontMap for font
        
         * "boldsymbol".
        
         */
        
        
        
        
        
        var boldsymbol = function boldsymbol(value, mode, options, classes, type) {
        
          if (type !== "textord" && lookupSymbol(value, "Math-BoldItalic", mode).metrics) {
        
            return {
        
              fontName: "Math-BoldItalic",
        
              fontClass: "boldsymbol"
        
            };
        
          } else {
        
            // Some glyphs do not exist in Math-BoldItalic so we need to use
        
            // Main-Bold instead.
        
            return {
        
              fontName: "Main-Bold",
        
              fontClass: "mathbf"
        
            };
        
          }
        
        };
        
        /**
        
         * Makes either a mathord or textord in the correct font and color.
        
         */
        
        
        
        
        
        var makeOrd = function makeOrd(group, options, type) {
        
          var mode = group.mode;
        
          var text = group.text;
        
          var classes = ["mord"]; // Math mode or Old font (i.e. \rm)
        
        
        
          var isFont = mode === "math" || mode === "text" && options.font;
        
          var fontOrFamily = isFont ? options.font : options.fontFamily;
        
          var wideFontName = "";
        
          var wideFontClass = "";
        
        
        
          if (text.charCodeAt(0) === 0xD835) {
        
            [wideFontName, wideFontClass] = wideCharacterFont(text, mode);
        
          }
        
        
        
          if (wideFontName.length > 0) {
        
            // surrogate pairs get special treatment
        
            return makeSymbol(text, wideFontName, mode, options, classes.concat(wideFontClass));
        
          } else if (fontOrFamily) {
        
            var fontName;
        
            var fontClasses;
        
        
        
            if (fontOrFamily === "boldsymbol") {
        
              var fontData = boldsymbol(text, mode, options, classes, type);
        
              fontName = fontData.fontName;
        
              fontClasses = [fontData.fontClass];
        
            } else if (isFont) {
        
              fontName = fontMap[fontOrFamily].fontName;
        
              fontClasses = [fontOrFamily];
        
            } else {
        
              fontName = retrieveTextFontName(fontOrFamily, options.fontWeight, options.fontShape);
        
              fontClasses = [fontOrFamily, options.fontWeight, options.fontShape];
        
            }
        
        
        
            if (lookupSymbol(text, fontName, mode).metrics) {
        
              return makeSymbol(text, fontName, mode, options, classes.concat(fontClasses));
        
            } else if (ligatures.hasOwnProperty(text) && fontName.slice(0, 10) === "Typewriter") {
        
              // Deconstruct ligatures in monospace fonts (\texttt, \tt).
        
              var parts = [];
        
        
        
              for (var i = 0; i < text.length; i++) {
        
                parts.push(makeSymbol(text[i], fontName, mode, options, classes.concat(fontClasses)));
        
              }
        
        
        
              return makeFragment(parts);
        
            }
        
          } // Makes a symbol in the default font for mathords and textords.
        
        
        
        
        
          if (type === "mathord") {
        
            return makeSymbol(text, "Math-Italic", mode, options, classes.concat(["mathnormal"]));
        
          } else if (type === "textord") {
        
            var font = symbols[mode][text] && symbols[mode][text].font;
        
        
        
            if (font === "ams") {
        
              var _fontName = retrieveTextFontName("amsrm", options.fontWeight, options.fontShape);
        
        
        
              return makeSymbol(text, _fontName, mode, options, classes.concat("amsrm", options.fontWeight, options.fontShape));
        
            } else if (font === "main" || !font) {
        
              var _fontName2 = retrieveTextFontName("textrm", options.fontWeight, options.fontShape);
        
        
        
              return makeSymbol(text, _fontName2, mode, options, classes.concat(options.fontWeight, options.fontShape));
        
            } else {
        
              // fonts added by plugins
        
              var _fontName3 = retrieveTextFontName(font, options.fontWeight, options.fontShape); // We add font name as a css class
        
        
        
        
        
              return makeSymbol(text, _fontName3, mode, options, classes.concat(_fontName3, options.fontWeight, options.fontShape));
        
            }
        
          } else {
        
            throw new Error("unexpected type: " + type + " in makeOrd");
        
          }
        
        };
        
        /**
        
         * Returns true if subsequent symbolNodes have the same classes, skew, maxFont,
        
         * and styles.
        
         */
        
        
        
        
        
        var canCombine = (prev, next) => {
        
          if (createClass(prev.classes) !== createClass(next.classes) || prev.skew !== next.skew || prev.maxFontSize !== next.maxFontSize) {
        
            return false;
        
          } // If prev and next both are just "mbin"s or "mord"s we don't combine them
        
          // so that the proper spacing can be preserved.
        
        
        
        
        
          if (prev.classes.length === 1) {
        
            var cls = prev.classes[0];
        
        
        
            if (cls === "mbin" || cls === "mord") {
        
              return false;
        
            }
        
          }
        
        
        
          for (var style in prev.style) {
        
            if (prev.style.hasOwnProperty(style) && prev.style[style] !== next.style[style]) {
        
              return false;
        
            }
        
          }
        
        
        
          for (var _style in next.style) {
        
            if (next.style.hasOwnProperty(_style) && prev.style[_style] !== next.style[_style]) {
        
              return false;
        
            }
        
          }
        
        
        
          return true;
        
        };
        
        /**
        
         * Combine consecutive domTree.symbolNodes into a single symbolNode.
        
         * Note: this function mutates the argument.
        
         */
        
        
        
        
        
        var tryCombineChars = chars => {
        
          for (var i = 0; i < chars.length - 1; i++) {
        
            var prev = chars[i];
        
            var next = chars[i + 1];
        
        
        
            if (prev instanceof SymbolNode && next instanceof SymbolNode && canCombine(prev, next)) {
        
              prev.text += next.text;
        
              prev.height = Math.max(prev.height, next.height);
        
              prev.depth = Math.max(prev.depth, next.depth); // Use the last character's italic correction since we use
        
              // it to add padding to the right of the span created from
        
              // the combined characters.
        
        
        
              prev.italic = next.italic;
        
              chars.splice(i + 1, 1);
        
              i--;
        
            }
        
          }
        
        
        
          return chars;
        
        };
        
        /**
        
         * Calculate the height, depth, and maxFontSize of an element based on its
        
         * children.
        
         */
        
        
        
        
        
        var sizeElementFromChildren = function sizeElementFromChildren(elem) {
        
          var height = 0;
        
          var depth = 0;
        
          var maxFontSize = 0;
        
        
        
          for (var i = 0; i < elem.children.length; i++) {
        
            var child = elem.children[i];
        
        
        
            if (child.height > height) {
        
              height = child.height;
        
            }
        
        
        
            if (child.depth > depth) {
        
              depth = child.depth;
        
            }
        
        
        
            if (child.maxFontSize > maxFontSize) {
        
              maxFontSize = child.maxFontSize;
        
            }
        
          }
        
        
        
          elem.height = height;
        
          elem.depth = depth;
        
          elem.maxFontSize = maxFontSize;
        
        };
        
        /**
        
         * Makes a span with the given list of classes, list of children, and options.
        
         *
        
         * TODO(#953): Ensure that `options` is always provided (currently some call
        
         * sites don't pass it) and make the type below mandatory.
        
         * TODO: add a separate argument for math class (e.g. `mop`, `mbin`), which
        
         * should if present come first in `classes`.
        
         */
        
        
        
        
        
        var makeSpan$2 = function makeSpan(classes, children, options, style) {
        
          var span = new Span(classes, children, options, style);
        
          sizeElementFromChildren(span);
        
          return span;
        
        }; // SVG one is simpler -- doesn't require height, depth, max-font setting.
        
        // This is also a separate method for typesafety.
        
        
        
        
        
        var makeSvgSpan = (classes, children, options, style) => new Span(classes, children, options, style);
        
        
        
        var makeLineSpan = function makeLineSpan(className, options, thickness) {
        
          var line = makeSpan$2([className], [], options);
        
          line.height = Math.max(thickness || options.fontMetrics().defaultRuleThickness, options.minRuleThickness);
        
          line.style.borderBottomWidth = makeEm(line.height);
        
          line.maxFontSize = 1.0;
        
          return line;
        
        };
        
        /**
        
         * Makes an anchor with the given href, list of classes, list of children,
        
         * and options.
        
         */
        
        
        
        
        
        var makeAnchor = function makeAnchor(href, classes, children, options) {
        
          var anchor = new Anchor(href, classes, children, options);
        
          sizeElementFromChildren(anchor);
        
          return anchor;
        
        };
        
        /**
        
         * Makes a document fragment with the given list of children.
        
         */
        
        
        
        
        
        var makeFragment = function makeFragment(children) {
        
          var fragment = new DocumentFragment(children);
        
          sizeElementFromChildren(fragment);
        
          return fragment;
        
        };
        
        /**
        
         * Wraps group in a span if it's a document fragment, allowing to apply classes
        
         * and styles
        
         */
        
        
        
        
        
        var wrapFragment = function wrapFragment(group, options) {
        
          if (group instanceof DocumentFragment) {
        
            return makeSpan$2([], [group], options);
        
          }
        
        
        
          return group;
        
        }; // These are exact object types to catch typos in the names of the optional fields.
        
        
        
        
        
        // Computes the updated `children` list and the overall depth.
        
        //
        
        // This helper function for makeVList makes it easier to enforce type safety by
        
        // allowing early exits (returns) in the logic.
        
        var getVListChildrenAndDepth = function getVListChildrenAndDepth(params) {
        
          if (params.positionType === "individualShift") {
        
            var oldChildren = params.children;
        
            var children = [oldChildren[0]]; // Add in kerns to the list of params.children to get each element to be
        
            // shifted to the correct specified shift
        
        
        
            var _depth = -oldChildren[0].shift - oldChildren[0].elem.depth;
        
        
        
            var currPos = _depth;
        
        
        
            for (var i = 1; i < oldChildren.length; i++) {
        
              var diff = -oldChildren[i].shift - currPos - oldChildren[i].elem.depth;
        
              var size = diff - (oldChildren[i - 1].elem.height + oldChildren[i - 1].elem.depth);
        
              currPos = currPos + diff;
        
              children.push({
        
                type: "kern",
        
                size
        
              });
        
              children.push(oldChildren[i]);
        
            }
        
        
        
            return {
        
              children,
        
              depth: _depth
        
            };
        
          }
        
        
        
          var depth;
        
        
        
          if (params.positionType === "top") {
        
            // We always start at the bottom, so calculate the bottom by adding up
        
            // all the sizes
        
            var bottom = params.positionData;
        
        
        
            for (var _i = 0; _i < params.children.length; _i++) {
        
              var child = params.children[_i];
        
              bottom -= child.type === "kern" ? child.size : child.elem.height + child.elem.depth;
        
            }
        
        
        
            depth = bottom;
        
          } else if (params.positionType === "bottom") {
        
            depth = -params.positionData;
        
          } else {
        
            var firstChild = params.children[0];
        
        
        
            if (firstChild.type !== "elem") {
        
              throw new Error('First child must have type "elem".');
        
            }
        
        
        
            if (params.positionType === "shift") {
        
              depth = -firstChild.elem.depth - params.positionData;
        
            } else if (params.positionType === "firstBaseline") {
        
              depth = -firstChild.elem.depth;
        
            } else {
        
              throw new Error("Invalid positionType " + params.positionType + ".");
        
            }
        
          }
        
        
        
          return {
        
            children: params.children,
        
            depth
        
          };
        
        };
        
        /**
        
         * Makes a vertical list by stacking elements and kerns on top of each other.
        
         * Allows for many different ways of specifying the positioning method.
        
         *
        
         * See VListParam documentation above.
        
         */
        
        
        
        
        
        var makeVList = function makeVList(params, options) {
        
          var {
        
            children,
        
            depth
        
          } = getVListChildrenAndDepth(params); // Create a strut that is taller than any list item. The strut is added to
        
          // each item, where it will determine the item's baseline. Since it has
        
          // `overflow:hidden`, the strut's top edge will sit on the item's line box's
        
          // top edge and the strut's bottom edge will sit on the item's baseline,
        
          // with no additional line-height spacing. This allows the item baseline to
        
          // be positioned precisely without worrying about font ascent and
        
          // line-height.
        
        
        
          var pstrutSize = 0;
        
        
        
          for (var i = 0; i < children.length; i++) {
        
            var child = children[i];
        
        
        
            if (child.type === "elem") {
        
              var elem = child.elem;
        
              pstrutSize = Math.max(pstrutSize, elem.maxFontSize, elem.height);
        
            }
        
          }
        
        
        
          pstrutSize += 2;
        
          var pstrut = makeSpan$2(["pstrut"], []);
        
          pstrut.style.height = makeEm(pstrutSize); // Create a new list of actual children at the correct offsets
        
        
        
          var realChildren = [];
        
          var minPos = depth;
        
          var maxPos = depth;
        
          var currPos = depth;
        
        
        
          for (var _i2 = 0; _i2 < children.length; _i2++) {
        
            var _child = children[_i2];
        
        
        
            if (_child.type === "kern") {
        
              currPos += _child.size;
        
            } else {
        
              var _elem = _child.elem;
        
              var classes = _child.wrapperClasses || [];
        
              var style = _child.wrapperStyle || {};
        
              var childWrap = makeSpan$2(classes, [pstrut, _elem], undefined, style);
        
              childWrap.style.top = makeEm(-pstrutSize - currPos - _elem.depth);
        
        
        
              if (_child.marginLeft) {
        
                childWrap.style.marginLeft = _child.marginLeft;
        
              }
        
        
        
              if (_child.marginRight) {
        
                childWrap.style.marginRight = _child.marginRight;
        
              }
        
        
        
              realChildren.push(childWrap);
        
              currPos += _elem.height + _elem.depth;
        
            }
        
        
        
            minPos = Math.min(minPos, currPos);
        
            maxPos = Math.max(maxPos, currPos);
        
          } // The vlist contents go in a table-cell with `vertical-align:bottom`.
        
          // This cell's bottom edge will determine the containing table's baseline
        
          // without overly expanding the containing line-box.
        
        
        
        
        
          var vlist = makeSpan$2(["vlist"], realChildren);
        
          vlist.style.height = makeEm(maxPos); // A second row is used if necessary to represent the vlist's depth.
        
        
        
          var rows;
        
        
        
          if (minPos < 0) {
        
            // We will define depth in an empty span with display: table-cell.
        
            // It should render with the height that we define. But Chrome, in
        
            // contenteditable mode only, treats that span as if it contains some
        
            // text content. And that min-height over-rides our desired height.
        
            // So we put another empty span inside the depth strut span.
        
            var emptySpan = makeSpan$2([], []);
        
            var depthStrut = makeSpan$2(["vlist"], [emptySpan]);
        
            depthStrut.style.height = makeEm(-minPos); // Safari wants the first row to have inline content; otherwise it
        
            // puts the bottom of the *second* row on the baseline.
        
        
        
            var topStrut = makeSpan$2(["vlist-s"], [new SymbolNode("\u200b")]);
        
            rows = [makeSpan$2(["vlist-r"], [vlist, topStrut]), makeSpan$2(["vlist-r"], [depthStrut])];
        
          } else {
        
            rows = [makeSpan$2(["vlist-r"], [vlist])];
        
          }
        
        
        
          var vtable = makeSpan$2(["vlist-t"], rows);
        
        
        
          if (rows.length === 2) {
        
            vtable.classes.push("vlist-t2");
        
          }
        
        
        
          vtable.height = maxPos;
        
          vtable.depth = -minPos;
        
          return vtable;
        
        }; // Glue is a concept from TeX which is a flexible space between elements in
        
        // either a vertical or horizontal list. In KaTeX, at least for now, it's
        
        // static space between elements in a horizontal layout.
        
        
        
        
        
        var makeGlue = (measurement, options) => {
        
          // Make an empty span for the space
        
          var rule = makeSpan$2(["mspace"], [], options);
        
          var size = calculateSize(measurement, options);
        
          rule.style.marginRight = makeEm(size);
        
          return rule;
        
        }; // Takes font options, and returns the appropriate fontLookup name
        
        
        
        
        
        var retrieveTextFontName = function retrieveTextFontName(fontFamily, fontWeight, fontShape) {
        
          var baseFontName = "";
        
        
        
          switch (fontFamily) {
        
            case "amsrm":
        
              baseFontName = "AMS";
        
              break;
        
        
        
            case "textrm":
        
              baseFontName = "Main";
        
              break;
        
        
        
            case "textsf":
        
              baseFontName = "SansSerif";
        
              break;
        
        
        
            case "texttt":
        
              baseFontName = "Typewriter";
        
              break;
        
        
        
            default:
        
              baseFontName = fontFamily;
        
            // use fonts added by a plugin
        
          }
        
        
        
          var fontStylesName;
        
        
        
          if (fontWeight === "textbf" && fontShape === "textit") {
        
            fontStylesName = "BoldItalic";
        
          } else if (fontWeight === "textbf") {
        
            fontStylesName = "Bold";
        
          } else if (fontWeight === "textit") {
        
            fontStylesName = "Italic";
        
          } else {
        
            fontStylesName = "Regular";
        
          }
        
        
        
          return baseFontName + "-" + fontStylesName;
        
        };
        
        /**
        
         * Maps TeX font commands to objects containing:
        
         * - variant: string used for "mathvariant" attribute in buildMathML.js
        
         * - fontName: the "style" parameter to fontMetrics.getCharacterMetrics
        
         */
        
        // A map between tex font commands an MathML mathvariant attribute values
        
        
        
        
        
        var fontMap = {
        
          // styles
        
          "mathbf": {
        
            variant: "bold",
        
            fontName: "Main-Bold"
        
          },
        
          "mathrm": {
        
            variant: "normal",
        
            fontName: "Main-Regular"
        
          },
        
          "textit": {
        
            variant: "italic",
        
            fontName: "Main-Italic"
        
          },
        
          "mathit": {
        
            variant: "italic",
        
            fontName: "Main-Italic"
        
          },
        
          "mathnormal": {
        
            variant: "italic",
        
            fontName: "Math-Italic"
        
          },
        
          // "boldsymbol" is missing because they require the use of multiple fonts:
        
          // Math-BoldItalic and Main-Bold.  This is handled by a special case in
        
          // makeOrd which ends up calling boldsymbol.
        
          // families
        
          "mathbb": {
        
            variant: "double-struck",
        
            fontName: "AMS-Regular"
        
          },
        
          "mathcal": {
        
            variant: "script",
        
            fontName: "Caligraphic-Regular"
        
          },
        
          "mathfrak": {
        
            variant: "fraktur",
        
            fontName: "Fraktur-Regular"
        
          },
        
          "mathscr": {
        
            variant: "script",
        
            fontName: "Script-Regular"
        
          },
        
          "mathsf": {
        
            variant: "sans-serif",
        
            fontName: "SansSerif-Regular"
        
          },
        
          "mathtt": {
        
            variant: "monospace",
        
            fontName: "Typewriter-Regular"
        
          }
        
        };
        
        var svgData = {
        
          //   path, width, height
        
          vec: ["vec", 0.471, 0.714],
        
          // values from the font glyph
        
          oiintSize1: ["oiintSize1", 0.957, 0.499],
        
          // oval to overlay the integrand
        
          oiintSize2: ["oiintSize2", 1.472, 0.659],
        
          oiiintSize1: ["oiiintSize1", 1.304, 0.499],
        
          oiiintSize2: ["oiiintSize2", 1.98, 0.659]
        
        };
        
        
        
        var staticSvg = function staticSvg(value, options) {
        
          // Create a span with inline SVG for the element.
        
          var [pathName, width, height] = svgData[value];
        
          var path = new PathNode(pathName);
        
          var svgNode = new SvgNode([path], {
        
            "width": makeEm(width),
        
            "height": makeEm(height),
        
            // Override CSS rule `.katex svg { width: 100% }`
        
            "style": "width:" + makeEm(width),
        
            "viewBox": "0 0 " + 1000 * width + " " + 1000 * height,
        
            "preserveAspectRatio": "xMinYMin"
        
          });
        
          var span = makeSvgSpan(["overlay"], [svgNode], options);
        
          span.height = height;
        
          span.style.height = makeEm(height);
        
          span.style.width = makeEm(width);
        
          return span;
        
        };
        
        
        
        var buildCommon = {
        
          fontMap,
        
          makeSymbol,
        
          mathsym,
        
          makeSpan: makeSpan$2,
        
          makeSvgSpan,
        
          makeLineSpan,
        
          makeAnchor,
        
          makeFragment,
        
          wrapFragment,
        
          makeVList,
        
          makeOrd,
        
          makeGlue,
        
          staticSvg,
        
          svgData,
        
          tryCombineChars
        
        };
        
        
        
        /**
        
         * Describes spaces between different classes of atoms.
        
         */
        
        var thinspace = {
        
          number: 3,
        
          unit: "mu"
        
        };
        
        var mediumspace = {
        
          number: 4,
        
          unit: "mu"
        
        };
        
        var thickspace = {
        
          number: 5,
        
          unit: "mu"
        
        }; // Making the type below exact with all optional fields doesn't work due to
        
        // - https://github.com/facebook/flow/issues/4582
        
        // - https://github.com/facebook/flow/issues/5688
        
        // However, since *all* fields are optional, $Shape<> works as suggested in 5688
        
        // above.
        
        
        
        // Spacing relationships for display and text styles
        
        var spacings = {
        
          mord: {
        
            mop: thinspace,
        
            mbin: mediumspace,
        
            mrel: thickspace,
        
            minner: thinspace
        
          },
        
          mop: {
        
            mord: thinspace,
        
            mop: thinspace,
        
            mrel: thickspace,
        
            minner: thinspace
        
          },
        
          mbin: {
        
            mord: mediumspace,
        
            mop: mediumspace,
        
            mopen: mediumspace,
        
            minner: mediumspace
        
          },
        
          mrel: {
        
            mord: thickspace,
        
            mop: thickspace,
        
            mopen: thickspace,
        
            minner: thickspace
        
          },
        
          mopen: {},
        
          mclose: {
        
            mop: thinspace,
        
            mbin: mediumspace,
        
            mrel: thickspace,
        
            minner: thinspace
        
          },
        
          mpunct: {
        
            mord: thinspace,
        
            mop: thinspace,
        
            mrel: thickspace,
        
            mopen: thinspace,
        
            mclose: thinspace,
        
            mpunct: thinspace,
        
            minner: thinspace
        
          },
        
          minner: {
        
            mord: thinspace,
        
            mop: thinspace,
        
            mbin: mediumspace,
        
            mrel: thickspace,
        
            mopen: thinspace,
        
            mpunct: thinspace,
        
            minner: thinspace
        
          }
        
        }; // Spacing relationships for script and scriptscript styles
        
        
        
        var tightSpacings = {
        
          mord: {
        
            mop: thinspace
        
          },
        
          mop: {
        
            mord: thinspace,
        
            mop: thinspace
        
          },
        
          mbin: {},
        
          mrel: {},
        
          mopen: {},
        
          mclose: {
        
            mop: thinspace
        
          },
        
          mpunct: {},
        
          minner: {
        
            mop: thinspace
        
          }
        
        };
        
        
        
        /** Context provided to function handlers for error messages. */
        
        // Note: reverse the order of the return type union will cause a flow error.
        
        // See https://github.com/facebook/flow/issues/3663.
        
        // More general version of `HtmlBuilder` for nodes (e.g. \sum, accent types)
        
        // whose presence impacts super/subscripting. In this case, ParseNode<"supsub">
        
        // delegates its HTML building to the HtmlBuilder corresponding to these nodes.
        
        
        
        /**
        
         * Final function spec for use at parse time.
        
         * This is almost identical to `FunctionPropSpec`, except it
        
         * 1. includes the function handler, and
        
         * 2. requires all arguments except argTypes.
        
         * It is generated by `defineFunction()` below.
        
         */
        
        
        
        /**
        
         * All registered functions.
        
         * `functions.js` just exports this same dictionary again and makes it public.
        
         * `Parser.js` requires this dictionary.
        
         */
        
        var _functions = {};
        
        /**
        
         * All HTML builders. Should be only used in the `define*` and the `build*ML`
        
         * functions.
        
         */
        
        
        
        var _htmlGroupBuilders = {};
        
        /**
        
         * All MathML builders. Should be only used in the `define*` and the `build*ML`
        
         * functions.
        
         */
        
        
        
        var _mathmlGroupBuilders = {};
        
        function defineFunction(_ref) {
        
          var {
        
            type,
        
            names,
        
            props,
        
            handler,
        
            htmlBuilder,
        
            mathmlBuilder
        
          } = _ref;
        
          // Set default values of functions
        
          var data = {
        
            type,
        
            numArgs: props.numArgs,
        
            argTypes: props.argTypes,
        
            allowedInArgument: !!props.allowedInArgument,
        
            allowedInText: !!props.allowedInText,
        
            allowedInMath: props.allowedInMath === undefined ? true : props.allowedInMath,
        
            numOptionalArgs: props.numOptionalArgs || 0,
        
            infix: !!props.infix,
        
            primitive: !!props.primitive,
        
            handler: handler
        
          };
        
        
        
          for (var i = 0; i < names.length; ++i) {
        
            _functions[names[i]] = data;
        
          }
        
        
        
          if (type) {
        
            if (htmlBuilder) {
        
              _htmlGroupBuilders[type] = htmlBuilder;
        
            }
        
        
        
            if (mathmlBuilder) {
        
              _mathmlGroupBuilders[type] = mathmlBuilder;
        
            }
        
          }
        
        }
        
        /**
        
         * Use this to register only the HTML and MathML builders for a function (e.g.
        
         * if the function's ParseNode is generated in Parser.js rather than via a
        
         * stand-alone handler provided to `defineFunction`).
        
         */
        
        
        
        function defineFunctionBuilders(_ref2) {
        
          var {
        
            type,
        
            htmlBuilder,
        
            mathmlBuilder
        
          } = _ref2;
        
          defineFunction({
        
            type,
        
            names: [],
        
            props: {
        
              numArgs: 0
        
            },
        
        
        
            handler() {
        
              throw new Error('Should never be called.');
        
            },
        
        
        
            htmlBuilder,
        
            mathmlBuilder
        
          });
        
        }
        
        var normalizeArgument = function normalizeArgument(arg) {
        
          return arg.type === "ordgroup" && arg.body.length === 1 ? arg.body[0] : arg;
        
        }; // Since the corresponding buildHTML/buildMathML function expects a
        
        // list of elements, we normalize for different kinds of arguments
        
        
        
        var ordargument = function ordargument(arg) {
        
          return arg.type === "ordgroup" ? arg.body : [arg];
        
        };
        
        
        
        /**
        
         * This file does the main work of building a domTree structure from a parse
        
         * tree. The entry point is the `buildHTML` function, which takes a parse tree.
        
         * Then, the buildExpression, buildGroup, and various groupBuilders functions
        
         * are called, to produce a final HTML tree.
        
         */
        
        var makeSpan$1 = buildCommon.makeSpan; // Binary atoms (first class `mbin`) change into ordinary atoms (`mord`)
        
        // depending on their surroundings. See TeXbook pg. 442-446, Rules 5 and 6,
        
        // and the text before Rule 19.
        
        
        
        var binLeftCanceller = ["leftmost", "mbin", "mopen", "mrel", "mop", "mpunct"];
        
        var binRightCanceller = ["rightmost", "mrel", "mclose", "mpunct"];
        
        var styleMap$1 = {
        
          "display": Style$1.DISPLAY,
        
          "text": Style$1.TEXT,
        
          "script": Style$1.SCRIPT,
        
          "scriptscript": Style$1.SCRIPTSCRIPT
        
        };
        
        var DomEnum = {
        
          mord: "mord",
        
          mop: "mop",
        
          mbin: "mbin",
        
          mrel: "mrel",
        
          mopen: "mopen",
        
          mclose: "mclose",
        
          mpunct: "mpunct",
        
          minner: "minner"
        
        };
        
        
        
        /**
        
         * Take a list of nodes, build them in order, and return a list of the built
        
         * nodes. documentFragments are flattened into their contents, so the
        
         * returned list contains no fragments. `isRealGroup` is true if `expression`
        
         * is a real group (no atoms will be added on either side), as opposed to
        
         * a partial group (e.g. one created by \color). `surrounding` is an array
        
         * consisting type of nodes that will be added to the left and right.
        
         */
        
        var buildExpression$1 = function buildExpression(expression, options, isRealGroup, surrounding) {
        
          if (surrounding === void 0) {
        
            surrounding = [null, null];
        
          }
        
        
        
          // Parse expressions into `groups`.
        
          var groups = [];
        
        
        
          for (var i = 0; i < expression.length; i++) {
        
            var output = buildGroup$1(expression[i], options);
        
        
        
            if (output instanceof DocumentFragment) {
        
              var children = output.children;
        
              groups.push(...children);
        
            } else {
        
              groups.push(output);
        
            }
        
          } // Combine consecutive domTree.symbolNodes into a single symbolNode.
        
        
        
        
        
          buildCommon.tryCombineChars(groups); // If `expression` is a partial group, let the parent handle spacings
        
          // to avoid processing groups multiple times.
        
        
        
          if (!isRealGroup) {
        
            return groups;
        
          }
        
        
        
          var glueOptions = options;
        
        
        
          if (expression.length === 1) {
        
            var node = expression[0];
        
        
        
            if (node.type === "sizing") {
        
              glueOptions = options.havingSize(node.size);
        
            } else if (node.type === "styling") {
        
              glueOptions = options.havingStyle(styleMap$1[node.style]);
        
            }
        
          } // Dummy spans for determining spacings between surrounding atoms.
        
          // If `expression` has no atoms on the left or right, class "leftmost"
        
          // or "rightmost", respectively, is used to indicate it.
        
        
        
        
        
          var dummyPrev = makeSpan$1([surrounding[0] || "leftmost"], [], options);
        
          var dummyNext = makeSpan$1([surrounding[1] || "rightmost"], [], options); // TODO: These code assumes that a node's math class is the first element
        
          // of its `classes` array. A later cleanup should ensure this, for
        
          // instance by changing the signature of `makeSpan`.
        
          // Before determining what spaces to insert, perform bin cancellation.
        
          // Binary operators change to ordinary symbols in some contexts.
        
        
        
          var isRoot = isRealGroup === "root";
        
          traverseNonSpaceNodes(groups, (node, prev) => {
        
            var prevType = prev.classes[0];
        
            var type = node.classes[0];
        
        
        
            if (prevType === "mbin" && utils.contains(binRightCanceller, type)) {
        
              prev.classes[0] = "mord";
        
            } else if (type === "mbin" && utils.contains(binLeftCanceller, prevType)) {
        
              node.classes[0] = "mord";
        
            }
        
          }, {
        
            node: dummyPrev
        
          }, dummyNext, isRoot);
        
          traverseNonSpaceNodes(groups, (node, prev) => {
        
            var prevType = getTypeOfDomTree(prev);
        
            var type = getTypeOfDomTree(node); // 'mtight' indicates that the node is script or scriptscript style.
        
        
        
            var space = prevType && type ? node.hasClass("mtight") ? tightSpacings[prevType][type] : spacings[prevType][type] : null;
        
        
        
            if (space) {
        
              // Insert glue (spacing) after the `prev`.
        
              return buildCommon.makeGlue(space, glueOptions);
        
            }
        
          }, {
        
            node: dummyPrev
        
          }, dummyNext, isRoot);
        
          return groups;
        
        }; // Depth-first traverse non-space `nodes`, calling `callback` with the current and
        
        // previous node as arguments, optionally returning a node to insert after the
        
        // previous node. `prev` is an object with the previous node and `insertAfter`
        
        // function to insert after it. `next` is a node that will be added to the right.
        
        // Used for bin cancellation and inserting spacings.
        
        
        
        var traverseNonSpaceNodes = function traverseNonSpaceNodes(nodes, callback, prev, next, isRoot) {
        
          if (next) {
        
            // temporarily append the right node, if exists
        
            nodes.push(next);
        
          }
        
        
        
          var i = 0;
        
        
        
          for (; i < nodes.length; i++) {
        
            var node = nodes[i];
        
            var partialGroup = checkPartialGroup(node);
        
        
        
            if (partialGroup) {
        
              // Recursive DFS
        
              // $FlowFixMe: make nodes a $ReadOnlyArray by returning a new array
        
              traverseNonSpaceNodes(partialGroup.children, callback, prev, null, isRoot);
        
              continue;
        
            } // Ignore explicit spaces (e.g., \;, \,) when determining what implicit
        
            // spacing should go between atoms of different classes
        
        
        
        
        
            var nonspace = !node.hasClass("mspace");
        
        
        
            if (nonspace) {
        
              var result = callback(node, prev.node);
        
        
        
              if (result) {
        
                if (prev.insertAfter) {
        
                  prev.insertAfter(result);
        
                } else {
        
                  // insert at front
        
                  nodes.unshift(result);
        
                  i++;
        
                }
        
              }
        
            }
        
        
        
            if (nonspace) {
        
              prev.node = node;
        
            } else if (isRoot && node.hasClass("newline")) {
        
              prev.node = makeSpan$1(["leftmost"]); // treat like beginning of line
        
            }
        
        
        
            prev.insertAfter = (index => n => {
        
              nodes.splice(index + 1, 0, n);
        
              i++;
        
            })(i);
        
          }
        
        
        
          if (next) {
        
            nodes.pop();
        
          }
        
        }; // Check if given node is a partial group, i.e., does not affect spacing around.
        
        
        
        
        
        var checkPartialGroup = function checkPartialGroup(node) {
        
          if (node instanceof DocumentFragment || node instanceof Anchor || node instanceof Span && node.hasClass("enclosing")) {
        
            return node;
        
          }
        
        
        
          return null;
        
        }; // Return the outermost node of a domTree.
        
        
        
        
        
        var getOutermostNode = function getOutermostNode(node, side) {
        
          var partialGroup = checkPartialGroup(node);
        
        
        
          if (partialGroup) {
        
            var children = partialGroup.children;
        
        
        
            if (children.length) {
        
              if (side === "right") {
        
                return getOutermostNode(children[children.length - 1], "right");
        
              } else if (side === "left") {
        
                return getOutermostNode(children[0], "left");
        
              }
        
            }
        
          }
        
        
        
          return node;
        
        }; // Return math atom class (mclass) of a domTree.
        
        // If `side` is given, it will get the type of the outermost node at given side.
        
        
        
        
        
        var getTypeOfDomTree = function getTypeOfDomTree(node, side) {
        
          if (!node) {
        
            return null;
        
          }
        
        
        
          if (side) {
        
            node = getOutermostNode(node, side);
        
          } // This makes a lot of assumptions as to where the type of atom
        
          // appears.  We should do a better job of enforcing this.
        
        
        
        
        
          return DomEnum[node.classes[0]] || null;
        
        };
        
        var makeNullDelimiter = function makeNullDelimiter(options, classes) {
        
          var moreClasses = ["nulldelimiter"].concat(options.baseSizingClasses());
        
          return makeSpan$1(classes.concat(moreClasses));
        
        };
        
        /**
        
         * buildGroup is the function that takes a group and calls the correct groupType
        
         * function for it. It also handles the interaction of size and style changes
        
         * between parents and children.
        
         */
        
        
        
        var buildGroup$1 = function buildGroup(group, options, baseOptions) {
        
          if (!group) {
        
            return makeSpan$1();
        
          }
        
        
        
          if (_htmlGroupBuilders[group.type]) {
        
            // Call the groupBuilders function
        
            // $FlowFixMe
        
            var groupNode = _htmlGroupBuilders[group.type](group, options); // If the size changed between the parent and the current group, account
        
            // for that size difference.
        
        
        
            if (baseOptions && options.size !== baseOptions.size) {
        
              groupNode = makeSpan$1(options.sizingClasses(baseOptions), [groupNode], options);
        
              var multiplier = options.sizeMultiplier / baseOptions.sizeMultiplier;
        
              groupNode.height *= multiplier;
        
              groupNode.depth *= multiplier;
        
            }
        
        
        
            return groupNode;
        
          } else {
        
            throw new ParseError("Got group of unknown type: '" + group.type + "'");
        
          }
        
        };
        
        /**
        
         * Combine an array of HTML DOM nodes (e.g., the output of `buildExpression`)
        
         * into an unbreakable HTML node of class .base, with proper struts to
        
         * guarantee correct vertical extent.  `buildHTML` calls this repeatedly to
        
         * make up the entire expression as a sequence of unbreakable units.
        
         */
        
        
        
        function buildHTMLUnbreakable(children, options) {
        
          // Compute height and depth of this chunk.
        
          var body = makeSpan$1(["base"], children, options); // Add strut, which ensures that the top of the HTML element falls at
        
          // the height of the expression, and the bottom of the HTML element
        
          // falls at the depth of the expression.
        
        
        
          var strut = makeSpan$1(["strut"]);
        
          strut.style.height = makeEm(body.height + body.depth);
        
        
        
          if (body.depth) {
        
            strut.style.verticalAlign = makeEm(-body.depth);
        
          }
        
        
        
          body.children.unshift(strut);
        
          return body;
        
        }
        
        /**
        
         * Take an entire parse tree, and build it into an appropriate set of HTML
        
         * nodes.
        
         */
        
        
        
        
        
        function buildHTML(tree, options) {
        
          // Strip off outer tag wrapper for processing below.
        
          var tag = null;
        
        
        
          if (tree.length === 1 && tree[0].type === "tag") {
        
            tag = tree[0].tag;
        
            tree = tree[0].body;
        
          } // Build the expression contained in the tree
        
        
        
        
        
          var expression = buildExpression$1(tree, options, "root");
        
          var eqnNum;
        
        
        
          if (expression.length === 2 && expression[1].hasClass("tag")) {
        
            // An environment with automatic equation numbers, e.g. {gather}.
        
            eqnNum = expression.pop();
        
          }
        
        
        
          var children = []; // Create one base node for each chunk between potential line breaks.
        
          // The TeXBook [p.173] says "A formula will be broken only after a
        
          // relation symbol like $=$ or $<$ or $\rightarrow$, or after a binary
        
          // operation symbol like $+$ or $-$ or $\times$, where the relation or
        
          // binary operation is on the ``outer level'' of the formula (i.e., not
        
          // enclosed in {...} and not part of an \over construction)."
        
        
        
          var parts = [];
        
        
        
          for (var i = 0; i < expression.length; i++) {
        
            parts.push(expression[i]);
        
        
        
            if (expression[i].hasClass("mbin") || expression[i].hasClass("mrel") || expression[i].hasClass("allowbreak")) {
        
              // Put any post-operator glue on same line as operator.
        
              // Watch for \nobreak along the way, and stop at \newline.
        
              var nobreak = false;
        
        
        
              while (i < expression.length - 1 && expression[i + 1].hasClass("mspace") && !expression[i + 1].hasClass("newline")) {
        
                i++;
        
                parts.push(expression[i]);
        
        
        
                if (expression[i].hasClass("nobreak")) {
        
                  nobreak = true;
        
                }
        
              } // Don't allow break if \nobreak among the post-operator glue.
        
        
        
        
        
              if (!nobreak) {
        
                children.push(buildHTMLUnbreakable(parts, options));
        
                parts = [];
        
              }
        
            } else if (expression[i].hasClass("newline")) {
        
              // Write the line except the newline
        
              parts.pop();
        
        
        
              if (parts.length > 0) {
        
                children.push(buildHTMLUnbreakable(parts, options));
        
                parts = [];
        
              } // Put the newline at the top level
        
        
        
        
        
              children.push(expression[i]);
        
            }
        
          }
        
        
        
          if (parts.length > 0) {
        
            children.push(buildHTMLUnbreakable(parts, options));
        
          } // Now, if there was a tag, build it too and append it as a final child.
        
        
        
        
        
          var tagChild;
        
        
        
          if (tag) {
        
            tagChild = buildHTMLUnbreakable(buildExpression$1(tag, options, true));
        
            tagChild.classes = ["tag"];
        
            children.push(tagChild);
        
          } else if (eqnNum) {
        
            children.push(eqnNum);
        
          }
        
        
        
          var htmlNode = makeSpan$1(["katex-html"], children);
        
          htmlNode.setAttribute("aria-hidden", "true"); // Adjust the strut of the tag to be the maximum height of all children
        
          // (the height of the enclosing htmlNode) for proper vertical alignment.
        
        
        
          if (tagChild) {
        
            var strut = tagChild.children[0];
        
            strut.style.height = makeEm(htmlNode.height + htmlNode.depth);
        
        
        
            if (htmlNode.depth) {
        
              strut.style.verticalAlign = makeEm(-htmlNode.depth);
        
            }
        
          }
        
        
        
          return htmlNode;
        
        }
        
        
        
        /**
        
         * These objects store data about MathML nodes. This is the MathML equivalent
        
         * of the types in domTree.js. Since MathML handles its own rendering, and
        
         * since we're mainly using MathML to improve accessibility, we don't manage
        
         * any of the styling state that the plain DOM nodes do.
        
         *
        
         * The `toNode` and `toMarkup` functions work similarly to how they do in
        
         * domTree.js, creating namespaced DOM nodes and HTML text markup respectively.
        
         */
        
        function newDocumentFragment(children) {
        
          return new DocumentFragment(children);
        
        }
        
        /**
        
         * This node represents a general purpose MathML node of any type. The
        
         * constructor requires the type of node to create (for example, `"mo"` or
        
         * `"mspace"`, corresponding to `<mo>` and `<mspace>` tags).
        
         */
        
        
        
        class MathNode {
        
          constructor(type, children, classes) {
        
            this.type = void 0;
        
            this.attributes = void 0;
        
            this.children = void 0;
        
            this.classes = void 0;
        
            this.type = type;
        
            this.attributes = {};
        
            this.children = children || [];
        
            this.classes = classes || [];
        
          }
        
          /**
        
           * Sets an attribute on a MathML node. MathML depends on attributes to convey a
        
           * semantic content, so this is used heavily.
        
           */
        
        
        
        
        
          setAttribute(name, value) {
        
            this.attributes[name] = value;
        
          }
        
          /**
        
           * Gets an attribute on a MathML node.
        
           */
        
        
        
        
        
          getAttribute(name) {
        
            return this.attributes[name];
        
          }
        
          /**
        
           * Converts the math node into a MathML-namespaced DOM element.
        
           */
        
        
        
        
        
          toNode() {
        
            var node = document.createElementNS("http://www.w3.org/1998/Math/MathML", this.type);
        
        
        
            for (var attr in this.attributes) {
        
              if (Object.prototype.hasOwnProperty.call(this.attributes, attr)) {
        
                node.setAttribute(attr, this.attributes[attr]);
        
              }
        
            }
        
        
        
            if (this.classes.length > 0) {
        
              node.className = createClass(this.classes);
        
            }
        
        
        
            for (var i = 0; i < this.children.length; i++) {
        
              node.appendChild(this.children[i].toNode());
        
            }
        
        
        
            return node;
        
          }
        
          /**
        
           * Converts the math node into an HTML markup string.
        
           */
        
        
        
        
        
          toMarkup() {
        
            var markup = "<" + this.type; // Add the attributes
        
        
        
            for (var attr in this.attributes) {
        
              if (Object.prototype.hasOwnProperty.call(this.attributes, attr)) {
        
                markup += " " + attr + "=\"";
        
                markup += utils.escape(this.attributes[attr]);
        
                markup += "\"";
        
              }
        
            }
        
        
        
            if (this.classes.length > 0) {
        
              markup += " class =\"" + utils.escape(createClass(this.classes)) + "\"";
        
            }
        
        
        
            markup += ">";
        
        
        
            for (var i = 0; i < this.children.length; i++) {
        
              markup += this.children[i].toMarkup();
        
            }
        
        
        
            markup += "</" + this.type + ">";
        
            return markup;
        
          }
        
          /**
        
           * Converts the math node into a string, similar to innerText, but escaped.
        
           */
        
        
        
        
        
          toText() {
        
            return this.children.map(child => child.toText()).join("");
        
          }
        
        
        
        }
        
        /**
        
         * This node represents a piece of text.
        
         */
        
        
        
        class TextNode {
        
          constructor(text) {
        
            this.text = void 0;
        
            this.text = text;
        
          }
        
          /**
        
           * Converts the text node into a DOM text node.
        
           */
        
        
        
        
        
          toNode() {
        
            return document.createTextNode(this.text);
        
          }
        
          /**
        
           * Converts the text node into escaped HTML markup
        
           * (representing the text itself).
        
           */
        
        
        
        
        
          toMarkup() {
        
            return utils.escape(this.toText());
        
          }
        
          /**
        
           * Converts the text node into a string
        
           * (representing the text itself).
        
           */
        
        
        
        
        
          toText() {
        
            return this.text;
        
          }
        
        
        
        }
        
        /**
        
         * This node represents a space, but may render as <mspace.../> or as text,
        
         * depending on the width.
        
         */
        
        
        
        class SpaceNode {
        
          /**
        
           * Create a Space node with width given in CSS ems.
        
           */
        
          constructor(width) {
        
            this.width = void 0;
        
            this.character = void 0;
        
            this.width = width; // See https://www.w3.org/TR/2000/WD-MathML2-20000328/chapter6.html
        
            // for a table of space-like characters.  We use Unicode
        
            // representations instead of &LongNames; as it's not clear how to
        
            // make the latter via document.createTextNode.
        
        
        
            if (width >= 0.05555 && width <= 0.05556) {
        
              this.character = "\u200a"; // &VeryThinSpace;
        
            } else if (width >= 0.1666 && width <= 0.1667) {
        
              this.character = "\u2009"; // &ThinSpace;
        
            } else if (width >= 0.2222 && width <= 0.2223) {
        
              this.character = "\u2005"; // &MediumSpace;
        
            } else if (width >= 0.2777 && width <= 0.2778) {
        
              this.character = "\u2005\u200a"; // &ThickSpace;
        
            } else if (width >= -0.05556 && width <= -0.05555) {
        
              this.character = "\u200a\u2063"; // &NegativeVeryThinSpace;
        
            } else if (width >= -0.1667 && width <= -0.1666) {
        
              this.character = "\u2009\u2063"; // &NegativeThinSpace;
        
            } else if (width >= -0.2223 && width <= -0.2222) {
        
              this.character = "\u205f\u2063"; // &NegativeMediumSpace;
        
            } else if (width >= -0.2778 && width <= -0.2777) {
        
              this.character = "\u2005\u2063"; // &NegativeThickSpace;
        
            } else {
        
              this.character = null;
        
            }
        
          }
        
          /**
        
           * Converts the math node into a MathML-namespaced DOM element.
        
           */
        
        
        
        
        
          toNode() {
        
            if (this.character) {
        
              return document.createTextNode(this.character);
        
            } else {
        
              var node = document.createElementNS("http://www.w3.org/1998/Math/MathML", "mspace");
        
              node.setAttribute("width", makeEm(this.width));
        
              return node;
        
            }
        
          }
        
          /**
        
           * Converts the math node into an HTML markup string.
        
           */
        
        
        
        
        
          toMarkup() {
        
            if (this.character) {
        
              return "<mtext>" + this.character + "</mtext>";
        
            } else {
        
              return "<mspace width=\"" + makeEm(this.width) + "\"/>";
        
            }
        
          }
        
          /**
        
           * Converts the math node into a string, similar to innerText.
        
           */
        
        
        
        
        
          toText() {
        
            if (this.character) {
        
              return this.character;
        
            } else {
        
              return " ";
        
            }
        
          }
        
        
        
        }
        
        
        
        var mathMLTree = {
        
          MathNode,
        
          TextNode,
        
          SpaceNode,
        
          newDocumentFragment
        
        };
        
        
        
        /**
        
         * This file converts a parse tree into a corresponding MathML tree. The main
        
         * entry point is the `buildMathML` function, which takes a parse tree from the
        
         * parser.
        
         */
        
        
        
        /**
        
         * Takes a symbol and converts it into a MathML text node after performing
        
         * optional replacement from symbols.js.
        
         */
        
        var makeText = function makeText(text, mode, options) {
        
          if (symbols[mode][text] && symbols[mode][text].replace && text.charCodeAt(0) !== 0xD835 && !(ligatures.hasOwnProperty(text) && options && (options.fontFamily && options.fontFamily.slice(4, 6) === "tt" || options.font && options.font.slice(4, 6) === "tt"))) {
        
            text = symbols[mode][text].replace;
        
          }
        
        
        
          return new mathMLTree.TextNode(text);
        
        };
        
        /**
        
         * Wrap the given array of nodes in an <mrow> node if needed, i.e.,
        
         * unless the array has length 1.  Always returns a single node.
        
         */
        
        
        
        var makeRow = function makeRow(body) {
        
          if (body.length === 1) {
        
            return body[0];
        
          } else {
        
            return new mathMLTree.MathNode("mrow", body);
        
          }
        
        };
        
        /**
        
         * Returns the math variant as a string or null if none is required.
        
         */
        
        
        
        var getVariant = function getVariant(group, options) {
        
          // Handle \text... font specifiers as best we can.
        
          // MathML has a limited list of allowable mathvariant specifiers; see
        
          // https://www.w3.org/TR/MathML3/chapter3.html#presm.commatt
        
          if (options.fontFamily === "texttt") {
        
            return "monospace";
        
          } else if (options.fontFamily === "textsf") {
        
            if (options.fontShape === "textit" && options.fontWeight === "textbf") {
        
              return "sans-serif-bold-italic";
        
            } else if (options.fontShape === "textit") {
        
              return "sans-serif-italic";
        
            } else if (options.fontWeight === "textbf") {
        
              return "bold-sans-serif";
        
            } else {
        
              return "sans-serif";
        
            }
        
          } else if (options.fontShape === "textit" && options.fontWeight === "textbf") {
        
            return "bold-italic";
        
          } else if (options.fontShape === "textit") {
        
            return "italic";
        
          } else if (options.fontWeight === "textbf") {
        
            return "bold";
        
          }
        
        
        
          var font = options.font;
        
        
        
          if (!font || font === "mathnormal") {
        
            return null;
        
          }
        
        
        
          var mode = group.mode;
        
        
        
          if (font === "mathit") {
        
            return "italic";
        
          } else if (font === "boldsymbol") {
        
            return group.type === "textord" ? "bold" : "bold-italic";
        
          } else if (font === "mathbf") {
        
            return "bold";
        
          } else if (font === "mathbb") {
        
            return "double-struck";
        
          } else if (font === "mathfrak") {
        
            return "fraktur";
        
          } else if (font === "mathscr" || font === "mathcal") {
        
            // MathML makes no distinction between script and calligraphic
        
            return "script";
        
          } else if (font === "mathsf") {
        
            return "sans-serif";
        
          } else if (font === "mathtt") {
        
            return "monospace";
        
          }
        
        
        
          var text = group.text;
        
        
        
          if (utils.contains(["\\imath", "\\jmath"], text)) {
        
            return null;
        
          }
        
        
        
          if (symbols[mode][text] && symbols[mode][text].replace) {
        
            text = symbols[mode][text].replace;
        
          }
        
        
        
          var fontName = buildCommon.fontMap[font].fontName;
        
        
        
          if (getCharacterMetrics(text, fontName, mode)) {
        
            return buildCommon.fontMap[font].variant;
        
          }
        
        
        
          return null;
        
        };
        
        /**
        
         * Takes a list of nodes, builds them, and returns a list of the generated
        
         * MathML nodes.  Also combine consecutive <mtext> outputs into a single
        
         * <mtext> tag.
        
         */
        
        
        
        var buildExpression = function buildExpression(expression, options, isOrdgroup) {
        
          if (expression.length === 1) {
        
            var group = buildGroup(expression[0], options);
        
        
        
            if (isOrdgroup && group instanceof MathNode && group.type === "mo") {
        
              // When TeX writers want to suppress spacing on an operator,
        
              // they often put the operator by itself inside braces.
        
              group.setAttribute("lspace", "0em");
        
              group.setAttribute("rspace", "0em");
        
            }
        
        
        
            return [group];
        
          }
        
        
        
          var groups = [];
        
          var lastGroup;
        
        
        
          for (var i = 0; i < expression.length; i++) {
        
            var _group = buildGroup(expression[i], options);
        
        
        
            if (_group instanceof MathNode && lastGroup instanceof MathNode) {
        
              // Concatenate adjacent <mtext>s
        
              if (_group.type === 'mtext' && lastGroup.type === 'mtext' && _group.getAttribute('mathvariant') === lastGroup.getAttribute('mathvariant')) {
        
                lastGroup.children.push(..._group.children);
        
                continue; // Concatenate adjacent <mn>s
        
              } else if (_group.type === 'mn' && lastGroup.type === 'mn') {
        
                lastGroup.children.push(..._group.children);
        
                continue; // Concatenate <mn>...</mn> followed by <mi>.</mi>
        
              } else if (_group.type === 'mi' && _group.children.length === 1 && lastGroup.type === 'mn') {
        
                var child = _group.children[0];
        
        
        
                if (child instanceof TextNode && child.text === '.') {
        
                  lastGroup.children.push(..._group.children);
        
                  continue;
        
                }
        
              } else if (lastGroup.type === 'mi' && lastGroup.children.length === 1) {
        
                var lastChild = lastGroup.children[0];
        
        
        
                if (lastChild instanceof TextNode && lastChild.text === '\u0338' && (_group.type === 'mo' || _group.type === 'mi' || _group.type === 'mn')) {
        
                  var _child = _group.children[0];
        
        
        
                  if (_child instanceof TextNode && _child.text.length > 0) {
        
                    // Overlay with combining character long solidus
        
                    _child.text = _child.text.slice(0, 1) + "\u0338" + _child.text.slice(1);
        
                    groups.pop();
        
                  }
        
                }
        
              }
        
            }
        
        
        
            groups.push(_group);
        
            lastGroup = _group;
        
          }
        
        
        
          return groups;
        
        };
        
        /**
        
         * Equivalent to buildExpression, but wraps the elements in an <mrow>
        
         * if there's more than one.  Returns a single node instead of an array.
        
         */
        
        
        
        var buildExpressionRow = function buildExpressionRow(expression, options, isOrdgroup) {
        
          return makeRow(buildExpression(expression, options, isOrdgroup));
        
        };
        
        /**
        
         * Takes a group from the parser and calls the appropriate groupBuilders function
        
         * on it to produce a MathML node.
        
         */
        
        
        
        var buildGroup = function buildGroup(group, options) {
        
          if (!group) {
        
            return new mathMLTree.MathNode("mrow");
        
          }
        
        
        
          if (_mathmlGroupBuilders[group.type]) {
        
            // Call the groupBuilders function
        
            // $FlowFixMe
        
            var result = _mathmlGroupBuilders[group.type](group, options); // $FlowFixMe
        
        
        
            return result;
        
          } else {
        
            throw new ParseError("Got group of unknown type: '" + group.type + "'");
        
          }
        
        };
        
        /**
        
         * Takes a full parse tree and settings and builds a MathML representation of
        
         * it. In particular, we put the elements from building the parse tree into a
        
         * <semantics> tag so we can also include that TeX source as an annotation.
        
         *
        
         * Note that we actually return a domTree element with a `<math>` inside it so
        
         * we can do appropriate styling.
        
         */
        
        
        
        function buildMathML(tree, texExpression, options, isDisplayMode, forMathmlOnly) {
        
          var expression = buildExpression(tree, options); // TODO: Make a pass thru the MathML similar to buildHTML.traverseNonSpaceNodes
        
          // and add spacing nodes. This is necessary only adjacent to math operators
        
          // like \sin or \lim or to subsup elements that contain math operators.
        
          // MathML takes care of the other spacing issues.
        
          // Wrap up the expression in an mrow so it is presented in the semantics
        
          // tag correctly, unless it's a single <mrow> or <mtable>.
        
        
        
          var wrapper;
        
        
        
          if (expression.length === 1 && expression[0] instanceof MathNode && utils.contains(["mrow", "mtable"], expression[0].type)) {
        
            wrapper = expression[0];
        
          } else {
        
            wrapper = new mathMLTree.MathNode("mrow", expression);
        
          } // Build a TeX annotation of the source
        
        
        
        
        
          var annotation = new mathMLTree.MathNode("annotation", [new mathMLTree.TextNode(texExpression)]);
        
          annotation.setAttribute("encoding", "application/x-tex");
        
          var semantics = new mathMLTree.MathNode("semantics", [wrapper, annotation]);
        
          var math = new mathMLTree.MathNode("math", [semantics]);
        
          math.setAttribute("xmlns", "http://www.w3.org/1998/Math/MathML");
        
        
        
          if (isDisplayMode) {
        
            math.setAttribute("display", "block");
        
          } // You can't style <math> nodes, so we wrap the node in a span.
        
          // NOTE: The span class is not typed to have <math> nodes as children, and
        
          // we don't want to make the children type more generic since the children
        
          // of span are expected to have more fields in `buildHtml` contexts.
        
        
        
        
        
          var wrapperClass = forMathmlOnly ? "katex" : "katex-mathml"; // $FlowFixMe
        
        
        
          return buildCommon.makeSpan([wrapperClass], [math]);
        
        }
        
        
        
        var optionsFromSettings = function optionsFromSettings(settings) {
        
          return new Options({
        
            style: settings.displayMode ? Style$1.DISPLAY : Style$1.TEXT,
        
            maxSize: settings.maxSize,
        
            minRuleThickness: settings.minRuleThickness
        
          });
        
        };
        
        
        
        var displayWrap = function displayWrap(node, settings) {
        
          if (settings.displayMode) {
        
            var classes = ["katex-display"];
        
        
        
            if (settings.leqno) {
        
              classes.push("leqno");
        
            }
        
        
        
            if (settings.fleqn) {
        
              classes.push("fleqn");
        
            }
        
        
        
            node = buildCommon.makeSpan(classes, [node]);
        
          }
        
        
        
          return node;
        
        };
        
        
        
        var buildTree = function buildTree(tree, expression, settings) {
        
          var options = optionsFromSettings(settings);
        
          var katexNode;
        
        
        
          if (settings.output === "mathml") {
        
            return buildMathML(tree, expression, options, settings.displayMode, true);
        
          } else if (settings.output === "html") {
        
            var htmlNode = buildHTML(tree, options);
        
            katexNode = buildCommon.makeSpan(["katex"], [htmlNode]);
        
          } else {
        
            var mathMLNode = buildMathML(tree, expression, options, settings.displayMode, false);
        
        
        
            var _htmlNode = buildHTML(tree, options);
        
        
        
            katexNode = buildCommon.makeSpan(["katex"], [mathMLNode, _htmlNode]);
        
          }
        
        
        
          return displayWrap(katexNode, settings);
        
        };
        
        var buildHTMLTree = function buildHTMLTree(tree, expression, settings) {
        
          var options = optionsFromSettings(settings);
        
          var htmlNode = buildHTML(tree, options);
        
          var katexNode = buildCommon.makeSpan(["katex"], [htmlNode]);
        
          return displayWrap(katexNode, settings);
        
        };
        
        
        
        /**
        
         * This file provides support to buildMathML.js and buildHTML.js
        
         * for stretchy wide elements rendered from SVG files
        
         * and other CSS trickery.
        
         */
        
        var stretchyCodePoint = {
        
          widehat: "^",
        
          widecheck: "ˇ",
        
          widetilde: "~",
        
          utilde: "~",
        
          overleftarrow: "\u2190",
        
          underleftarrow: "\u2190",
        
          xleftarrow: "\u2190",
        
          overrightarrow: "\u2192",
        
          underrightarrow: "\u2192",
        
          xrightarrow: "\u2192",
        
          underbrace: "\u23df",
        
          overbrace: "\u23de",
        
          overgroup: "\u23e0",
        
          undergroup: "\u23e1",
        
          overleftrightarrow: "\u2194",
        
          underleftrightarrow: "\u2194",
        
          xleftrightarrow: "\u2194",
        
          Overrightarrow: "\u21d2",
        
          xRightarrow: "\u21d2",
        
          overleftharpoon: "\u21bc",
        
          xleftharpoonup: "\u21bc",
        
          overrightharpoon: "\u21c0",
        
          xrightharpoonup: "\u21c0",
        
          xLeftarrow: "\u21d0",
        
          xLeftrightarrow: "\u21d4",
        
          xhookleftarrow: "\u21a9",
        
          xhookrightarrow: "\u21aa",
        
          xmapsto: "\u21a6",
        
          xrightharpoondown: "\u21c1",
        
          xleftharpoondown: "\u21bd",
        
          xrightleftharpoons: "\u21cc",
        
          xleftrightharpoons: "\u21cb",
        
          xtwoheadleftarrow: "\u219e",
        
          xtwoheadrightarrow: "\u21a0",
        
          xlongequal: "=",
        
          xtofrom: "\u21c4",
        
          xrightleftarrows: "\u21c4",
        
          xrightequilibrium: "\u21cc",
        
          // Not a perfect match.
        
          xleftequilibrium: "\u21cb",
        
          // None better available.
        
          "\\cdrightarrow": "\u2192",
        
          "\\cdleftarrow": "\u2190",
        
          "\\cdlongequal": "="
        
        };
        
        
        
        var mathMLnode = function mathMLnode(label) {
        
          var node = new mathMLTree.MathNode("mo", [new mathMLTree.TextNode(stretchyCodePoint[label.replace(/^\\/, '')])]);
        
          node.setAttribute("stretchy", "true");
        
          return node;
        
        }; // Many of the KaTeX SVG images have been adapted from glyphs in KaTeX fonts.
        
        // Copyright (c) 2009-2010, Design Science, Inc. (<www.mathjax.org>)
        
        // Copyright (c) 2014-2017 Khan Academy (<www.khanacademy.org>)
        
        // Licensed under the SIL Open Font License, Version 1.1.
        
        // See \nhttp://scripts.sil.org/OFL
        
        // Very Long SVGs
        
        //    Many of the KaTeX stretchy wide elements use a long SVG image and an
        
        //    overflow: hidden tactic to achieve a stretchy image while avoiding
        
        //    distortion of arrowheads or brace corners.
        
        //    The SVG typically contains a very long (400 em) arrow.
        
        //    The SVG is in a container span that has overflow: hidden, so the span
        
        //    acts like a window that exposes only part of the  SVG.
        
        //    The SVG always has a longer, thinner aspect ratio than the container span.
        
        //    After the SVG fills 100% of the height of the container span,
        
        //    there is a long arrow shaft left over. That left-over shaft is not shown.
        
        //    Instead, it is sliced off because the span's CSS has overflow: hidden.
        
        //    Thus, the reader sees an arrow that matches the subject matter width
        
        //    without distortion.
        
        //    Some functions, such as \cancel, need to vary their aspect ratio. These
        
        //    functions do not get the overflow SVG treatment.
        
        // Second Brush Stroke
        
        //    Low resolution monitors struggle to display images in fine detail.
        
        //    So browsers apply anti-aliasing. A long straight arrow shaft therefore
        
        //    will sometimes appear as if it has a blurred edge.
        
        //    To mitigate this, these SVG files contain a second "brush-stroke" on the
        
        //    arrow shafts. That is, a second long thin rectangular SVG path has been
        
        //    written directly on top of each arrow shaft. This reinforcement causes
        
        //    some of the screen pixels to display as black instead of the anti-aliased
        
        //    gray pixel that a  single path would generate. So we get arrow shafts
        
        //    whose edges appear to be sharper.
        
        // In the katexImagesData object just below, the dimensions all
        
        // correspond to path geometry inside the relevant SVG.
        
        // For example, \overrightarrow uses the same arrowhead as glyph U+2192
        
        // from the KaTeX Main font. The scaling factor is 1000.
        
        // That is, inside the font, that arrowhead is 522 units tall, which
        
        // corresponds to 0.522 em inside the document.
        
        
        
        
        
        var katexImagesData = {
        
          //   path(s), minWidth, height, align
        
          overrightarrow: [["rightarrow"], 0.888, 522, "xMaxYMin"],
        
          overleftarrow: [["leftarrow"], 0.888, 522, "xMinYMin"],
        
          underrightarrow: [["rightarrow"], 0.888, 522, "xMaxYMin"],
        
          underleftarrow: [["leftarrow"], 0.888, 522, "xMinYMin"],
        
          xrightarrow: [["rightarrow"], 1.469, 522, "xMaxYMin"],
        
          "\\cdrightarrow": [["rightarrow"], 3.0, 522, "xMaxYMin"],
        
          // CD minwwidth2.5pc
        
          xleftarrow: [["leftarrow"], 1.469, 522, "xMinYMin"],
        
          "\\cdleftarrow": [["leftarrow"], 3.0, 522, "xMinYMin"],
        
          Overrightarrow: [["doublerightarrow"], 0.888, 560, "xMaxYMin"],
        
          xRightarrow: [["doublerightarrow"], 1.526, 560, "xMaxYMin"],
        
          xLeftarrow: [["doubleleftarrow"], 1.526, 560, "xMinYMin"],
        
          overleftharpoon: [["leftharpoon"], 0.888, 522, "xMinYMin"],
        
          xleftharpoonup: [["leftharpoon"], 0.888, 522, "xMinYMin"],
        
          xleftharpoondown: [["leftharpoondown"], 0.888, 522, "xMinYMin"],
        
          overrightharpoon: [["rightharpoon"], 0.888, 522, "xMaxYMin"],
        
          xrightharpoonup: [["rightharpoon"], 0.888, 522, "xMaxYMin"],
        
          xrightharpoondown: [["rightharpoondown"], 0.888, 522, "xMaxYMin"],
        
          xlongequal: [["longequal"], 0.888, 334, "xMinYMin"],
        
          "\\cdlongequal": [["longequal"], 3.0, 334, "xMinYMin"],
        
          xtwoheadleftarrow: [["twoheadleftarrow"], 0.888, 334, "xMinYMin"],
        
          xtwoheadrightarrow: [["twoheadrightarrow"], 0.888, 334, "xMaxYMin"],
        
          overleftrightarrow: [["leftarrow", "rightarrow"], 0.888, 522],
        
          overbrace: [["leftbrace", "midbrace", "rightbrace"], 1.6, 548],
        
          underbrace: [["leftbraceunder", "midbraceunder", "rightbraceunder"], 1.6, 548],
        
          underleftrightarrow: [["leftarrow", "rightarrow"], 0.888, 522],
        
          xleftrightarrow: [["leftarrow", "rightarrow"], 1.75, 522],
        
          xLeftrightarrow: [["doubleleftarrow", "doublerightarrow"], 1.75, 560],
        
          xrightleftharpoons: [["leftharpoondownplus", "rightharpoonplus"], 1.75, 716],
        
          xleftrightharpoons: [["leftharpoonplus", "rightharpoondownplus"], 1.75, 716],
        
          xhookleftarrow: [["leftarrow", "righthook"], 1.08, 522],
        
          xhookrightarrow: [["lefthook", "rightarrow"], 1.08, 522],
        
          overlinesegment: [["leftlinesegment", "rightlinesegment"], 0.888, 522],
        
          underlinesegment: [["leftlinesegment", "rightlinesegment"], 0.888, 522],
        
          overgroup: [["leftgroup", "rightgroup"], 0.888, 342],
        
          undergroup: [["leftgroupunder", "rightgroupunder"], 0.888, 342],
        
          xmapsto: [["leftmapsto", "rightarrow"], 1.5, 522],
        
          xtofrom: [["leftToFrom", "rightToFrom"], 1.75, 528],
        
          // The next three arrows are from the mhchem package.
        
          // In mhchem.sty, min-length is 2.0em. But these arrows might appear in the
        
          // document as \xrightarrow or \xrightleftharpoons. Those have
        
          // min-length = 1.75em, so we set min-length on these next three to match.
        
          xrightleftarrows: [["baraboveleftarrow", "rightarrowabovebar"], 1.75, 901],
        
          xrightequilibrium: [["baraboveshortleftharpoon", "rightharpoonaboveshortbar"], 1.75, 716],
        
          xleftequilibrium: [["shortbaraboveleftharpoon", "shortrightharpoonabovebar"], 1.75, 716]
        
        };
        
        
        
        var groupLength = function groupLength(arg) {
        
          if (arg.type === "ordgroup") {
        
            return arg.body.length;
        
          } else {
        
            return 1;
        
          }
        
        };
        
        
        
        var svgSpan = function svgSpan(group, options) {
        
          // Create a span with inline SVG for the element.
        
          function buildSvgSpan_() {
        
            var viewBoxWidth = 400000; // default
        
        
        
            var label = group.label.slice(1);
        
        
        
            if (utils.contains(["widehat", "widecheck", "widetilde", "utilde"], label)) {
        
              // Each type in the `if` statement corresponds to one of the ParseNode
        
              // types below. This narrowing is required to access `grp.base`.
        
              // $FlowFixMe
        
              var grp = group; // There are four SVG images available for each function.
        
              // Choose a taller image when there are more characters.
        
        
        
              var numChars = groupLength(grp.base);
        
              var viewBoxHeight;
        
              var pathName;
        
        
        
              var _height;
        
        
        
              if (numChars > 5) {
        
                if (label === "widehat" || label === "widecheck") {
        
                  viewBoxHeight = 420;
        
                  viewBoxWidth = 2364;
        
                  _height = 0.42;
        
                  pathName = label + "4";
        
                } else {
        
                  viewBoxHeight = 312;
        
                  viewBoxWidth = 2340;
        
                  _height = 0.34;
        
                  pathName = "tilde4";
        
                }
        
              } else {
        
                var imgIndex = [1, 1, 2, 2, 3, 3][numChars];
        
        
        
                if (label === "widehat" || label === "widecheck") {
        
                  viewBoxWidth = [0, 1062, 2364, 2364, 2364][imgIndex];
        
                  viewBoxHeight = [0, 239, 300, 360, 420][imgIndex];
        
                  _height = [0, 0.24, 0.3, 0.3, 0.36, 0.42][imgIndex];
        
                  pathName = label + imgIndex;
        
                } else {
        
                  viewBoxWidth = [0, 600, 1033, 2339, 2340][imgIndex];
        
                  viewBoxHeight = [0, 260, 286, 306, 312][imgIndex];
        
                  _height = [0, 0.26, 0.286, 0.3, 0.306, 0.34][imgIndex];
        
                  pathName = "tilde" + imgIndex;
        
                }
        
              }
        
        
        
              var path = new PathNode(pathName);
        
              var svgNode = new SvgNode([path], {
        
                "width": "100%",
        
                "height": makeEm(_height),
        
                "viewBox": "0 0 " + viewBoxWidth + " " + viewBoxHeight,
        
                "preserveAspectRatio": "none"
        
              });
        
              return {
        
                span: buildCommon.makeSvgSpan([], [svgNode], options),
        
                minWidth: 0,
        
                height: _height
        
              };
        
            } else {
        
              var spans = [];
        
              var data = katexImagesData[label];
        
              var [paths, _minWidth, _viewBoxHeight] = data;
        
        
        
              var _height2 = _viewBoxHeight / 1000;
        
        
        
              var numSvgChildren = paths.length;
        
              var widthClasses;
        
              var aligns;
        
        
        
              if (numSvgChildren === 1) {
        
                // $FlowFixMe: All these cases must be of the 4-tuple type.
        
                var align1 = data[3];
        
                widthClasses = ["hide-tail"];
        
                aligns = [align1];
        
              } else if (numSvgChildren === 2) {
        
                widthClasses = ["halfarrow-left", "halfarrow-right"];
        
                aligns = ["xMinYMin", "xMaxYMin"];
        
              } else if (numSvgChildren === 3) {
        
                widthClasses = ["brace-left", "brace-center", "brace-right"];
        
                aligns = ["xMinYMin", "xMidYMin", "xMaxYMin"];
        
              } else {
        
                throw new Error("Correct katexImagesData or update code here to support\n                    " + numSvgChildren + " children.");
        
              }
        
        
        
              for (var i = 0; i < numSvgChildren; i++) {
        
                var _path = new PathNode(paths[i]);
        
        
        
                var _svgNode = new SvgNode([_path], {
        
                  "width": "400em",
        
                  "height": makeEm(_height2),
        
                  "viewBox": "0 0 " + viewBoxWidth + " " + _viewBoxHeight,
        
                  "preserveAspectRatio": aligns[i] + " slice"
        
                });
        
        
        
                var _span = buildCommon.makeSvgSpan([widthClasses[i]], [_svgNode], options);
        
        
        
                if (numSvgChildren === 1) {
        
                  return {
        
                    span: _span,
        
                    minWidth: _minWidth,
        
                    height: _height2
        
                  };
        
                } else {
        
                  _span.style.height = makeEm(_height2);
        
                  spans.push(_span);
        
                }
        
              }
        
        
        
              return {
        
                span: buildCommon.makeSpan(["stretchy"], spans, options),
        
                minWidth: _minWidth,
        
                height: _height2
        
              };
        
            }
        
          } // buildSvgSpan_()
        
        
        
        
        
          var {
        
            span,
        
            minWidth,
        
            height
        
          } = buildSvgSpan_(); // Note that we are returning span.depth = 0.
        
          // Any adjustments relative to the baseline must be done in buildHTML.
        
        
        
          span.height = height;
        
          span.style.height = makeEm(height);
        
        
        
          if (minWidth > 0) {
        
            span.style.minWidth = makeEm(minWidth);
        
          }
        
        
        
          return span;
        
        };
        
        
        
        var encloseSpan = function encloseSpan(inner, label, topPad, bottomPad, options) {
        
          // Return an image span for \cancel, \bcancel, \xcancel, \fbox, or \angl
        
          var img;
        
          var totalHeight = inner.height + inner.depth + topPad + bottomPad;
        
        
        
          if (/fbox|color|angl/.test(label)) {
        
            img = buildCommon.makeSpan(["stretchy", label], [], options);
        
        
        
            if (label === "fbox") {
        
              var color = options.color && options.getColor();
        
        
        
              if (color) {
        
                img.style.borderColor = color;
        
              }
        
            }
        
          } else {
        
            // \cancel, \bcancel, or \xcancel
        
            // Since \cancel's SVG is inline and it omits the viewBox attribute,
        
            // its stroke-width will not vary with span area.
        
            var lines = [];
        
        
        
            if (/^[bx]cancel$/.test(label)) {
        
              lines.push(new LineNode({
        
                "x1": "0",
        
                "y1": "0",
        
                "x2": "100%",
        
                "y2": "100%",
        
                "stroke-width": "0.046em"
        
              }));
        
            }
        
        
        
            if (/^x?cancel$/.test(label)) {
        
              lines.push(new LineNode({
        
                "x1": "0",
        
                "y1": "100%",
        
                "x2": "100%",
        
                "y2": "0",
        
                "stroke-width": "0.046em"
        
              }));
        
            }
        
        
        
            var svgNode = new SvgNode(lines, {
        
              "width": "100%",
        
              "height": makeEm(totalHeight)
        
            });
        
            img = buildCommon.makeSvgSpan([], [svgNode], options);
        
          }
        
        
        
          img.height = totalHeight;
        
          img.style.height = makeEm(totalHeight);
        
          return img;
        
        };
        
        
        
        var stretchy = {
        
          encloseSpan,
        
          mathMLnode,
        
          svgSpan
        
        };
        
        
        
        /**
        
         * Asserts that the node is of the given type and returns it with stricter
        
         * typing. Throws if the node's type does not match.
        
         */
        
        function assertNodeType(node, type) {
        
          if (!node || node.type !== type) {
        
            throw new Error("Expected node of type " + type + ", but got " + (node ? "node of type " + node.type : String(node)));
        
          } // $FlowFixMe, >=0.125
        
        
        
        
        
          return node;
        
        }
        
        /**
        
         * Returns the node more strictly typed iff it is of the given type. Otherwise,
        
         * returns null.
        
         */
        
        
        
        function assertSymbolNodeType(node) {
        
          var typedNode = checkSymbolNodeType(node);
        
        
        
          if (!typedNode) {
        
            throw new Error("Expected node of symbol group type, but got " + (node ? "node of type " + node.type : String(node)));
        
          }
        
        
        
          return typedNode;
        
        }
        
        /**
        
         * Returns the node more strictly typed iff it is of the given type. Otherwise,
        
         * returns null.
        
         */
        
        
        
        function checkSymbolNodeType(node) {
        
          if (node && (node.type === "atom" || NON_ATOMS.hasOwnProperty(node.type))) {
        
            // $FlowFixMe
        
            return node;
        
          }
        
        
        
          return null;
        
        }
        
        
        
        // NOTE: Unlike most `htmlBuilder`s, this one handles not only "accent", but
        
        // also "supsub" since an accent can affect super/subscripting.
        
        var htmlBuilder$a = (grp, options) => {
        
          // Accents are handled in the TeXbook pg. 443, rule 12.
        
          var base;
        
          var group;
        
          var supSubGroup;
        
        
        
          if (grp && grp.type === "supsub") {
        
            // If our base is a character box, and we have superscripts and
        
            // subscripts, the supsub will defer to us. In particular, we want
        
            // to attach the superscripts and subscripts to the inner body (so
        
            // that the position of the superscripts and subscripts won't be
        
            // affected by the height of the accent). We accomplish this by
        
            // sticking the base of the accent into the base of the supsub, and
        
            // rendering that, while keeping track of where the accent is.
        
            // The real accent group is the base of the supsub group
        
            group = assertNodeType(grp.base, "accent"); // The character box is the base of the accent group
        
        
        
            base = group.base; // Stick the character box into the base of the supsub group
        
        
        
            grp.base = base; // Rerender the supsub group with its new base, and store that
        
            // result.
        
        
        
            supSubGroup = assertSpan(buildGroup$1(grp, options)); // reset original base
        
        
        
            grp.base = group;
        
          } else {
        
            group = assertNodeType(grp, "accent");
        
            base = group.base;
        
          } // Build the base group
        
        
        
        
        
          var body = buildGroup$1(base, options.havingCrampedStyle()); // Does the accent need to shift for the skew of a character?
        
        
        
          var mustShift = group.isShifty && utils.isCharacterBox(base); // Calculate the skew of the accent. This is based on the line "If the
        
          // nucleus is not a single character, let s = 0; otherwise set s to the
        
          // kern amount for the nucleus followed by the \skewchar of its font."
        
          // Note that our skew metrics are just the kern between each character
        
          // and the skewchar.
        
        
        
          var skew = 0;
        
        
        
          if (mustShift) {
        
            // If the base is a character box, then we want the skew of the
        
            // innermost character. To do that, we find the innermost character:
        
            var baseChar = utils.getBaseElem(base); // Then, we render its group to get the symbol inside it
        
        
        
            var baseGroup = buildGroup$1(baseChar, options.havingCrampedStyle()); // Finally, we pull the skew off of the symbol.
        
        
        
            skew = assertSymbolDomNode(baseGroup).skew; // Note that we now throw away baseGroup, because the layers we
        
            // removed with getBaseElem might contain things like \color which
        
            // we can't get rid of.
        
            // TODO(emily): Find a better way to get the skew
        
          }
        
        
        
          var accentBelow = group.label === "\\c"; // calculate the amount of space between the body and the accent
        
        
        
          var clearance = accentBelow ? body.height + body.depth : Math.min(body.height, options.fontMetrics().xHeight); // Build the accent
        
        
        
          var accentBody;
        
        
        
          if (!group.isStretchy) {
        
            var accent;
        
            var width;
        
        
        
            if (group.label === "\\vec") {
        
              // Before version 0.9, \vec used the combining font glyph U+20D7.
        
              // But browsers, especially Safari, are not consistent in how they
        
              // render combining characters when not preceded by a character.
        
              // So now we use an SVG.
        
              // If Safari reforms, we should consider reverting to the glyph.
        
              accent = buildCommon.staticSvg("vec", options);
        
              width = buildCommon.svgData.vec[1];
        
            } else {
        
              accent = buildCommon.makeOrd({
        
                mode: group.mode,
        
                text: group.label
        
              }, options, "textord");
        
              accent = assertSymbolDomNode(accent); // Remove the italic correction of the accent, because it only serves to
        
              // shift the accent over to a place we don't want.
        
        
        
              accent.italic = 0;
        
              width = accent.width;
        
        
        
              if (accentBelow) {
        
                clearance += accent.depth;
        
              }
        
            }
        
        
        
            accentBody = buildCommon.makeSpan(["accent-body"], [accent]); // "Full" accents expand the width of the resulting symbol to be
        
            // at least the width of the accent, and overlap directly onto the
        
            // character without any vertical offset.
        
        
        
            var accentFull = group.label === "\\textcircled";
        
        
        
            if (accentFull) {
        
              accentBody.classes.push('accent-full');
        
              clearance = body.height;
        
            } // Shift the accent over by the skew.
        
        
        
        
        
            var left = skew; // CSS defines `.katex .accent .accent-body:not(.accent-full) { width: 0 }`
        
            // so that the accent doesn't contribute to the bounding box.
        
            // We need to shift the character by its width (effectively half
        
            // its width) to compensate.
        
        
        
            if (!accentFull) {
        
              left -= width / 2;
        
            }
        
        
        
            accentBody.style.left = makeEm(left); // \textcircled uses the \bigcirc glyph, so it needs some
        
            // vertical adjustment to match LaTeX.
        
        
        
            if (group.label === "\\textcircled") {
        
              accentBody.style.top = ".2em";
        
            }
        
        
        
            accentBody = buildCommon.makeVList({
        
              positionType: "firstBaseline",
        
              children: [{
        
                type: "elem",
        
                elem: body
        
              }, {
        
                type: "kern",
        
                size: -clearance
        
              }, {
        
                type: "elem",
        
                elem: accentBody
        
              }]
        
            }, options);
        
          } else {
        
            accentBody = stretchy.svgSpan(group, options);
        
            accentBody = buildCommon.makeVList({
        
              positionType: "firstBaseline",
        
              children: [{
        
                type: "elem",
        
                elem: body
        
              }, {
        
                type: "elem",
        
                elem: accentBody,
        
                wrapperClasses: ["svg-align"],
        
                wrapperStyle: skew > 0 ? {
        
                  width: "calc(100% - " + makeEm(2 * skew) + ")",
        
                  marginLeft: makeEm(2 * skew)
        
                } : undefined
        
              }]
        
            }, options);
        
          }
        
        
        
          var accentWrap = buildCommon.makeSpan(["mord", "accent"], [accentBody], options);
        
        
        
          if (supSubGroup) {
        
            // Here, we replace the "base" child of the supsub with our newly
        
            // generated accent.
        
            supSubGroup.children[0] = accentWrap; // Since we don't rerun the height calculation after replacing the
        
            // accent, we manually recalculate height.
        
        
        
            supSubGroup.height = Math.max(accentWrap.height, supSubGroup.height); // Accents should always be ords, even when their innards are not.
        
        
        
            supSubGroup.classes[0] = "mord";
        
            return supSubGroup;
        
          } else {
        
            return accentWrap;
        
          }
        
        };
        
        
        
        var mathmlBuilder$9 = (group, options) => {
        
          var accentNode = group.isStretchy ? stretchy.mathMLnode(group.label) : new mathMLTree.MathNode("mo", [makeText(group.label, group.mode)]);
        
          var node = new mathMLTree.MathNode("mover", [buildGroup(group.base, options), accentNode]);
        
          node.setAttribute("accent", "true");
        
          return node;
        
        };
        
        
        
        var NON_STRETCHY_ACCENT_REGEX = new RegExp(["\\acute", "\\grave", "\\ddot", "\\tilde", "\\bar", "\\breve", "\\check", "\\hat", "\\vec", "\\dot", "\\mathring"].map(accent => "\\" + accent).join("|")); // Accents
        
        
        
        defineFunction({
        
          type: "accent",
        
          names: ["\\acute", "\\grave", "\\ddot", "\\tilde", "\\bar", "\\breve", "\\check", "\\hat", "\\vec", "\\dot", "\\mathring", "\\widecheck", "\\widehat", "\\widetilde", "\\overrightarrow", "\\overleftarrow", "\\Overrightarrow", "\\overleftrightarrow", "\\overgroup", "\\overlinesegment", "\\overleftharpoon", "\\overrightharpoon"],
        
          props: {
        
            numArgs: 1
        
          },
        
          handler: (context, args) => {
        
            var base = normalizeArgument(args[0]);
        
            var isStretchy = !NON_STRETCHY_ACCENT_REGEX.test(context.funcName);
        
            var isShifty = !isStretchy || context.funcName === "\\widehat" || context.funcName === "\\widetilde" || context.funcName === "\\widecheck";
        
            return {
        
              type: "accent",
        
              mode: context.parser.mode,
        
              label: context.funcName,
        
              isStretchy: isStretchy,
        
              isShifty: isShifty,
        
              base: base
        
            };
        
          },
        
          htmlBuilder: htmlBuilder$a,
        
          mathmlBuilder: mathmlBuilder$9
        
        }); // Text-mode accents
        
        
        
        defineFunction({
        
          type: "accent",
        
          names: ["\\'", "\\`", "\\^", "\\~", "\\=", "\\u", "\\.", '\\"', "\\c", "\\r", "\\H", "\\v", "\\textcircled"],
        
          props: {
        
            numArgs: 1,
        
            allowedInText: true,
        
            allowedInMath: true,
        
            // unless in strict mode
        
            argTypes: ["primitive"]
        
          },
        
          handler: (context, args) => {
        
            var base = args[0];
        
            var mode = context.parser.mode;
        
        
        
            if (mode === "math") {
        
              context.parser.settings.reportNonstrict("mathVsTextAccents", "LaTeX's accent " + context.funcName + " works only in text mode");
        
              mode = "text";
        
            }
        
        
        
            return {
        
              type: "accent",
        
              mode: mode,
        
              label: context.funcName,
        
              isStretchy: false,
        
              isShifty: true,
        
              base: base
        
            };
        
          },
        
          htmlBuilder: htmlBuilder$a,
        
          mathmlBuilder: mathmlBuilder$9
        
        });
        
        
        
        // Horizontal overlap functions
        
        defineFunction({
        
          type: "accentUnder",
        
          names: ["\\underleftarrow", "\\underrightarrow", "\\underleftrightarrow", "\\undergroup", "\\underlinesegment", "\\utilde"],
        
          props: {
        
            numArgs: 1
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            var base = args[0];
        
            return {
        
              type: "accentUnder",
        
              mode: parser.mode,
        
              label: funcName,
        
              base: base
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            // Treat under accents much like underlines.
        
            var innerGroup = buildGroup$1(group.base, options);
        
            var accentBody = stretchy.svgSpan(group, options);
        
            var kern = group.label === "\\utilde" ? 0.12 : 0; // Generate the vlist, with the appropriate kerns
        
        
        
            var vlist = buildCommon.makeVList({
        
              positionType: "top",
        
              positionData: innerGroup.height,
        
              children: [{
        
                type: "elem",
        
                elem: accentBody,
        
                wrapperClasses: ["svg-align"]
        
              }, {
        
                type: "kern",
        
                size: kern
        
              }, {
        
                type: "elem",
        
                elem: innerGroup
        
              }]
        
            }, options);
        
            return buildCommon.makeSpan(["mord", "accentunder"], [vlist], options);
        
          },
        
          mathmlBuilder: (group, options) => {
        
            var accentNode = stretchy.mathMLnode(group.label);
        
            var node = new mathMLTree.MathNode("munder", [buildGroup(group.base, options), accentNode]);
        
            node.setAttribute("accentunder", "true");
        
            return node;
        
          }
        
        });
        
        
        
        // Helper function
        
        var paddedNode = group => {
        
          var node = new mathMLTree.MathNode("mpadded", group ? [group] : []);
        
          node.setAttribute("width", "+0.6em");
        
          node.setAttribute("lspace", "0.3em");
        
          return node;
        
        }; // Stretchy arrows with an optional argument
        
        
        
        
        
        defineFunction({
        
          type: "xArrow",
        
          names: ["\\xleftarrow", "\\xrightarrow", "\\xLeftarrow", "\\xRightarrow", "\\xleftrightarrow", "\\xLeftrightarrow", "\\xhookleftarrow", "\\xhookrightarrow", "\\xmapsto", "\\xrightharpoondown", "\\xrightharpoonup", "\\xleftharpoondown", "\\xleftharpoonup", "\\xrightleftharpoons", "\\xleftrightharpoons", "\\xlongequal", "\\xtwoheadrightarrow", "\\xtwoheadleftarrow", "\\xtofrom", // The next 3 functions are here to support the mhchem extension.
        
          // Direct use of these functions is discouraged and may break someday.
        
          "\\xrightleftarrows", "\\xrightequilibrium", "\\xleftequilibrium", // The next 3 functions are here only to support the {CD} environment.
        
          "\\\\cdrightarrow", "\\\\cdleftarrow", "\\\\cdlongequal"],
        
          props: {
        
            numArgs: 1,
        
            numOptionalArgs: 1
        
          },
        
        
        
          handler(_ref, args, optArgs) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            return {
        
              type: "xArrow",
        
              mode: parser.mode,
        
              label: funcName,
        
              body: args[0],
        
              below: optArgs[0]
        
            };
        
          },
        
        
        
          // Flow is unable to correctly infer the type of `group`, even though it's
        
          // unambiguously determined from the passed-in `type` above.
        
          htmlBuilder(group, options) {
        
            var style = options.style; // Build the argument groups in the appropriate style.
        
            // Ref: amsmath.dtx:   \hbox{$\scriptstyle\mkern#3mu{#6}\mkern#4mu$}%
        
            // Some groups can return document fragments.  Handle those by wrapping
        
            // them in a span.
        
        
        
            var newOptions = options.havingStyle(style.sup());
        
            var upperGroup = buildCommon.wrapFragment(buildGroup$1(group.body, newOptions, options), options);
        
            var arrowPrefix = group.label.slice(0, 2) === "\\x" ? "x" : "cd";
        
            upperGroup.classes.push(arrowPrefix + "-arrow-pad");
        
            var lowerGroup;
        
        
        
            if (group.below) {
        
              // Build the lower group
        
              newOptions = options.havingStyle(style.sub());
        
              lowerGroup = buildCommon.wrapFragment(buildGroup$1(group.below, newOptions, options), options);
        
              lowerGroup.classes.push(arrowPrefix + "-arrow-pad");
        
            }
        
        
        
            var arrowBody = stretchy.svgSpan(group, options); // Re shift: Note that stretchy.svgSpan returned arrowBody.depth = 0.
        
            // The point we want on the math axis is at 0.5 * arrowBody.height.
        
        
        
            var arrowShift = -options.fontMetrics().axisHeight + 0.5 * arrowBody.height; // 2 mu kern. Ref: amsmath.dtx: #7\if0#2\else\mkern#2mu\fi
        
        
        
            var upperShift = -options.fontMetrics().axisHeight - 0.5 * arrowBody.height - 0.111; // 0.111 em = 2 mu
        
        
        
            if (upperGroup.depth > 0.25 || group.label === "\\xleftequilibrium") {
        
              upperShift -= upperGroup.depth; // shift up if depth encroaches
        
            } // Generate the vlist
        
        
        
        
        
            var vlist;
        
        
        
            if (lowerGroup) {
        
              var lowerShift = -options.fontMetrics().axisHeight + lowerGroup.height + 0.5 * arrowBody.height + 0.111;
        
              vlist = buildCommon.makeVList({
        
                positionType: "individualShift",
        
                children: [{
        
                  type: "elem",
        
                  elem: upperGroup,
        
                  shift: upperShift
        
                }, {
        
                  type: "elem",
        
                  elem: arrowBody,
        
                  shift: arrowShift
        
                }, {
        
                  type: "elem",
        
                  elem: lowerGroup,
        
                  shift: lowerShift
        
                }]
        
              }, options);
        
            } else {
        
              vlist = buildCommon.makeVList({
        
                positionType: "individualShift",
        
                children: [{
        
                  type: "elem",
        
                  elem: upperGroup,
        
                  shift: upperShift
        
                }, {
        
                  type: "elem",
        
                  elem: arrowBody,
        
                  shift: arrowShift
        
                }]
        
              }, options);
        
            } // $FlowFixMe: Replace this with passing "svg-align" into makeVList.
        
        
        
        
        
            vlist.children[0].children[0].children[1].classes.push("svg-align");
        
            return buildCommon.makeSpan(["mrel", "x-arrow"], [vlist], options);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var arrowNode = stretchy.mathMLnode(group.label);
        
            arrowNode.setAttribute("minsize", group.label.charAt(0) === "x" ? "1.75em" : "3.0em");
        
            var node;
        
        
        
            if (group.body) {
        
              var upperNode = paddedNode(buildGroup(group.body, options));
        
        
        
              if (group.below) {
        
                var lowerNode = paddedNode(buildGroup(group.below, options));
        
                node = new mathMLTree.MathNode("munderover", [arrowNode, lowerNode, upperNode]);
        
              } else {
        
                node = new mathMLTree.MathNode("mover", [arrowNode, upperNode]);
        
              }
        
            } else if (group.below) {
        
              var _lowerNode = paddedNode(buildGroup(group.below, options));
        
        
        
              node = new mathMLTree.MathNode("munder", [arrowNode, _lowerNode]);
        
            } else {
        
              // This should never happen.
        
              // Parser.js throws an error if there is no argument.
        
              node = paddedNode();
        
              node = new mathMLTree.MathNode("mover", [arrowNode, node]);
        
            }
        
        
        
            return node;
        
          }
        
        
        
        });
        
        
        
        var makeSpan = buildCommon.makeSpan;
        
        
        
        function htmlBuilder$9(group, options) {
        
          var elements = buildExpression$1(group.body, options, true);
        
          return makeSpan([group.mclass], elements, options);
        
        }
        
        
        
        function mathmlBuilder$8(group, options) {
        
          var node;
        
          var inner = buildExpression(group.body, options);
        
        
        
          if (group.mclass === "minner") {
        
            node = new mathMLTree.MathNode("mpadded", inner);
        
          } else if (group.mclass === "mord") {
        
            if (group.isCharacterBox) {
        
              node = inner[0];
        
              node.type = "mi";
        
            } else {
        
              node = new mathMLTree.MathNode("mi", inner);
        
            }
        
          } else {
        
            if (group.isCharacterBox) {
        
              node = inner[0];
        
              node.type = "mo";
        
            } else {
        
              node = new mathMLTree.MathNode("mo", inner);
        
            } // Set spacing based on what is the most likely adjacent atom type.
        
            // See TeXbook p170.
        
        
        
        
        
            if (group.mclass === "mbin") {
        
              node.attributes.lspace = "0.22em"; // medium space
        
        
        
              node.attributes.rspace = "0.22em";
        
            } else if (group.mclass === "mpunct") {
        
              node.attributes.lspace = "0em";
        
              node.attributes.rspace = "0.17em"; // thinspace
        
            } else if (group.mclass === "mopen" || group.mclass === "mclose") {
        
              node.attributes.lspace = "0em";
        
              node.attributes.rspace = "0em";
        
            } else if (group.mclass === "minner") {
        
              node.attributes.lspace = "0.0556em"; // 1 mu is the most likely option
        
        
        
              node.attributes.width = "+0.1111em";
        
            } // MathML <mo> default space is 5/18 em, so <mrel> needs no action.
        
            // Ref: https://developer.mozilla.org/en-US/docs/Web/MathML/Element/mo
        
        
        
          }
        
        
        
          return node;
        
        } // Math class commands except \mathop
        
        
        
        
        
        defineFunction({
        
          type: "mclass",
        
          names: ["\\mathord", "\\mathbin", "\\mathrel", "\\mathopen", "\\mathclose", "\\mathpunct", "\\mathinner"],
        
          props: {
        
            numArgs: 1,
        
            primitive: true
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            var body = args[0];
        
            return {
        
              type: "mclass",
        
              mode: parser.mode,
        
              mclass: "m" + funcName.slice(5),
        
              // TODO(kevinb): don't prefix with 'm'
        
              body: ordargument(body),
        
              isCharacterBox: utils.isCharacterBox(body)
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$9,
        
          mathmlBuilder: mathmlBuilder$8
        
        });
        
        var binrelClass = arg => {
        
          // \binrel@ spacing varies with (bin|rel|ord) of the atom in the argument.
        
          // (by rendering separately and with {}s before and after, and measuring
        
          // the change in spacing).  We'll do roughly the same by detecting the
        
          // atom type directly.
        
          var atom = arg.type === "ordgroup" && arg.body.length ? arg.body[0] : arg;
        
        
        
          if (atom.type === "atom" && (atom.family === "bin" || atom.family === "rel")) {
        
            return "m" + atom.family;
        
          } else {
        
            return "mord";
        
          }
        
        }; // \@binrel{x}{y} renders like y but as mbin/mrel/mord if x is mbin/mrel/mord.
        
        // This is equivalent to \binrel@{x}\binrel@@{y} in AMSTeX.
        
        
        
        defineFunction({
        
          type: "mclass",
        
          names: ["\\@binrel"],
        
          props: {
        
            numArgs: 2
        
          },
        
        
        
          handler(_ref2, args) {
        
            var {
        
              parser
        
            } = _ref2;
        
            return {
        
              type: "mclass",
        
              mode: parser.mode,
        
              mclass: binrelClass(args[0]),
        
              body: ordargument(args[1]),
        
              isCharacterBox: utils.isCharacterBox(args[1])
        
            };
        
          }
        
        
        
        }); // Build a relation or stacked op by placing one symbol on top of another
        
        
        
        defineFunction({
        
          type: "mclass",
        
          names: ["\\stackrel", "\\overset", "\\underset"],
        
          props: {
        
            numArgs: 2
        
          },
        
        
        
          handler(_ref3, args) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref3;
        
            var baseArg = args[1];
        
            var shiftedArg = args[0];
        
            var mclass;
        
        
        
            if (funcName !== "\\stackrel") {
        
              // LaTeX applies \binrel spacing to \overset and \underset.
        
              mclass = binrelClass(baseArg);
        
            } else {
        
              mclass = "mrel"; // for \stackrel
        
            }
        
        
        
            var baseOp = {
        
              type: "op",
        
              mode: baseArg.mode,
        
              limits: true,
        
              alwaysHandleSupSub: true,
        
              parentIsSupSub: false,
        
              symbol: false,
        
              suppressBaseShift: funcName !== "\\stackrel",
        
              body: ordargument(baseArg)
        
            };
        
            var supsub = {
        
              type: "supsub",
        
              mode: shiftedArg.mode,
        
              base: baseOp,
        
              sup: funcName === "\\underset" ? null : shiftedArg,
        
              sub: funcName === "\\underset" ? shiftedArg : null
        
            };
        
            return {
        
              type: "mclass",
        
              mode: parser.mode,
        
              mclass,
        
              body: [supsub],
        
              isCharacterBox: utils.isCharacterBox(supsub)
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$9,
        
          mathmlBuilder: mathmlBuilder$8
        
        });
        
        
        
        // \pmb is a simulation of bold font.
        
        // The version of \pmb in ambsy.sty works by typesetting three copies
        
        // with small offsets. We use CSS text-shadow.
        
        // It's a hack. Not as good as a real bold font. Better than nothing.
        
        defineFunction({
        
          type: "pmb",
        
          names: ["\\pmb"],
        
          props: {
        
            numArgs: 1,
        
            allowedInText: true
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser
        
            } = _ref;
        
            return {
        
              type: "pmb",
        
              mode: parser.mode,
        
              mclass: binrelClass(args[0]),
        
              body: ordargument(args[0])
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            var elements = buildExpression$1(group.body, options, true);
        
            var node = buildCommon.makeSpan([group.mclass], elements, options);
        
            node.style.textShadow = "0.02em 0.01em 0.04px";
        
            return node;
        
          },
        
        
        
          mathmlBuilder(group, style) {
        
            var inner = buildExpression(group.body, style); // Wrap with an <mstyle> element.
        
        
        
            var node = new mathMLTree.MathNode("mstyle", inner);
        
            node.setAttribute("style", "text-shadow: 0.02em 0.01em 0.04px");
        
            return node;
        
          }
        
        
        
        });
        
        
        
        var cdArrowFunctionName = {
        
          ">": "\\\\cdrightarrow",
        
          "<": "\\\\cdleftarrow",
        
          "=": "\\\\cdlongequal",
        
          "A": "\\uparrow",
        
          "V": "\\downarrow",
        
          "|": "\\Vert",
        
          ".": "no arrow"
        
        };
        
        
        
        var newCell = () => {
        
          // Create an empty cell, to be filled below with parse nodes.
        
          // The parseTree from this module must be constructed like the
        
          // one created by parseArray(), so an empty CD cell must
        
          // be a ParseNode<"styling">. And CD is always displaystyle.
        
          // So these values are fixed and flow can do implicit typing.
        
          return {
        
            type: "styling",
        
            body: [],
        
            mode: "math",
        
            style: "display"
        
          };
        
        };
        
        
        
        var isStartOfArrow = node => {
        
          return node.type === "textord" && node.text === "@";
        
        };
        
        
        
        var isLabelEnd = (node, endChar) => {
        
          return (node.type === "mathord" || node.type === "atom") && node.text === endChar;
        
        };
        
        
        
        function cdArrow(arrowChar, labels, parser) {
        
          // Return a parse tree of an arrow and its labels.
        
          // This acts in a way similar to a macro expansion.
        
          var funcName = cdArrowFunctionName[arrowChar];
        
        
        
          switch (funcName) {
        
            case "\\\\cdrightarrow":
        
            case "\\\\cdleftarrow":
        
              return parser.callFunction(funcName, [labels[0]], [labels[1]]);
        
        
        
            case "\\uparrow":
        
            case "\\downarrow":
        
              {
        
                var leftLabel = parser.callFunction("\\\\cdleft", [labels[0]], []);
        
                var bareArrow = {
        
                  type: "atom",
        
                  text: funcName,
        
                  mode: "math",
        
                  family: "rel"
        
                };
        
                var sizedArrow = parser.callFunction("\\Big", [bareArrow], []);
        
                var rightLabel = parser.callFunction("\\\\cdright", [labels[1]], []);
        
                var arrowGroup = {
        
                  type: "ordgroup",
        
                  mode: "math",
        
                  body: [leftLabel, sizedArrow, rightLabel]
        
                };
        
                return parser.callFunction("\\\\cdparent", [arrowGroup], []);
        
              }
        
        
        
            case "\\\\cdlongequal":
        
              return parser.callFunction("\\\\cdlongequal", [], []);
        
        
        
            case "\\Vert":
        
              {
        
                var arrow = {
        
                  type: "textord",
        
                  text: "\\Vert",
        
                  mode: "math"
        
                };
        
                return parser.callFunction("\\Big", [arrow], []);
        
              }
        
        
        
            default:
        
              return {
        
                type: "textord",
        
                text: " ",
        
                mode: "math"
        
              };
        
          }
        
        }
        
        
        
        function parseCD(parser) {
        
          // Get the array's parse nodes with \\ temporarily mapped to \cr.
        
          var parsedRows = [];
        
          parser.gullet.beginGroup();
        
          parser.gullet.macros.set("\\cr", "\\\\\\relax");
        
          parser.gullet.beginGroup();
        
        
        
          while (true) {
        
            // eslint-disable-line no-constant-condition
        
            // Get the parse nodes for the next row.
        
            parsedRows.push(parser.parseExpression(false, "\\\\"));
        
            parser.gullet.endGroup();
        
            parser.gullet.beginGroup();
        
            var next = parser.fetch().text;
        
        
        
            if (next === "&" || next === "\\\\") {
        
              parser.consume();
        
            } else if (next === "\\end") {
        
              if (parsedRows[parsedRows.length - 1].length === 0) {
        
                parsedRows.pop(); // final row ended in \\
        
              }
        
        
        
              break;
        
            } else {
        
              throw new ParseError("Expected \\\\ or \\cr or \\end", parser.nextToken);
        
            }
        
          }
        
        
        
          var row = [];
        
          var body = [row]; // Loop thru the parse nodes. Collect them into cells and arrows.
        
        
        
          for (var i = 0; i < parsedRows.length; i++) {
        
            // Start a new row.
        
            var rowNodes = parsedRows[i]; // Create the first cell.
        
        
        
            var cell = newCell();
        
        
        
            for (var j = 0; j < rowNodes.length; j++) {
        
              if (!isStartOfArrow(rowNodes[j])) {
        
                // If a parseNode is not an arrow, it goes into a cell.
        
                cell.body.push(rowNodes[j]);
        
              } else {
        
                // Parse node j is an "@", the start of an arrow.
        
                // Before starting on the arrow, push the cell into `row`.
        
                row.push(cell); // Now collect parseNodes into an arrow.
        
                // The character after "@" defines the arrow type.
        
        
        
                j += 1;
        
                var arrowChar = assertSymbolNodeType(rowNodes[j]).text; // Create two empty label nodes. We may or may not use them.
        
        
        
                var labels = new Array(2);
        
                labels[0] = {
        
                  type: "ordgroup",
        
                  mode: "math",
        
                  body: []
        
                };
        
                labels[1] = {
        
                  type: "ordgroup",
        
                  mode: "math",
        
                  body: []
        
                }; // Process the arrow.
        
        
        
                if ("=|.".indexOf(arrowChar) > -1) ; else if ("<>AV".indexOf(arrowChar) > -1) {
        
                  // Four arrows, `@>>>`, `@<<<`, `@AAA`, and `@VVV`, each take
        
                  // two optional labels. E.g. the right-point arrow syntax is
        
                  // really:  @>{optional label}>{optional label}>
        
                  // Collect parseNodes into labels.
        
                  for (var labelNum = 0; labelNum < 2; labelNum++) {
        
                    var inLabel = true;
        
        
        
                    for (var k = j + 1; k < rowNodes.length; k++) {
        
                      if (isLabelEnd(rowNodes[k], arrowChar)) {
        
                        inLabel = false;
        
                        j = k;
        
                        break;
        
                      }
        
        
        
                      if (isStartOfArrow(rowNodes[k])) {
        
                        throw new ParseError("Missing a " + arrowChar + " character to complete a CD arrow.", rowNodes[k]);
        
                      }
        
        
        
                      labels[labelNum].body.push(rowNodes[k]);
        
                    }
        
        
        
                    if (inLabel) {
        
                      // isLabelEnd never returned a true.
        
                      throw new ParseError("Missing a " + arrowChar + " character to complete a CD arrow.", rowNodes[j]);
        
                    }
        
                  }
        
                } else {
        
                  throw new ParseError("Expected one of \"<>AV=|.\" after @", rowNodes[j]);
        
                } // Now join the arrow to its labels.
        
        
        
        
        
                var arrow = cdArrow(arrowChar, labels, parser); // Wrap the arrow in  ParseNode<"styling">.
        
                // This is done to match parseArray() behavior.
        
        
        
                var wrappedArrow = {
        
                  type: "styling",
        
                  body: [arrow],
        
                  mode: "math",
        
                  style: "display" // CD is always displaystyle.
        
        
        
                };
        
                row.push(wrappedArrow); // In CD's syntax, cells are implicit. That is, everything that
        
                // is not an arrow gets collected into a cell. So create an empty
        
                // cell now. It will collect upcoming parseNodes.
        
        
        
                cell = newCell();
        
              }
        
            }
        
        
        
            if (i % 2 === 0) {
        
              // Even-numbered rows consist of: cell, arrow, cell, arrow, ... cell
        
              // The last cell is not yet pushed into `row`, so:
        
              row.push(cell);
        
            } else {
        
              // Odd-numbered rows consist of: vert arrow, empty cell, ... vert arrow
        
              // Remove the empty cell that was placed at the beginning of `row`.
        
              row.shift();
        
            }
        
        
        
            row = [];
        
            body.push(row);
        
          } // End row group
        
        
        
        
        
          parser.gullet.endGroup(); // End array group defining \\
        
        
        
          parser.gullet.endGroup(); // define column separation.
        
        
        
          var cols = new Array(body[0].length).fill({
        
            type: "align",
        
            align: "c",
        
            pregap: 0.25,
        
            // CD package sets \enskip between columns.
        
            postgap: 0.25 // So pre and post each get half an \enskip, i.e. 0.25em.
        
        
        
          });
        
          return {
        
            type: "array",
        
            mode: "math",
        
            body,
        
            arraystretch: 1,
        
            addJot: true,
        
            rowGaps: [null],
        
            cols,
        
            colSeparationType: "CD",
        
            hLinesBeforeRow: new Array(body.length + 1).fill([])
        
          };
        
        } // The functions below are not available for general use.
        
        // They are here only for internal use by the {CD} environment in placing labels
        
        // next to vertical arrows.
        
        // We don't need any such functions for horizontal arrows because we can reuse
        
        // the functionality that already exists for extensible arrows.
        
        
        
        defineFunction({
        
          type: "cdlabel",
        
          names: ["\\\\cdleft", "\\\\cdright"],
        
          props: {
        
            numArgs: 1
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            return {
        
              type: "cdlabel",
        
              mode: parser.mode,
        
              side: funcName.slice(4),
        
              label: args[0]
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            var newOptions = options.havingStyle(options.style.sup());
        
            var label = buildCommon.wrapFragment(buildGroup$1(group.label, newOptions, options), options);
        
            label.classes.push("cd-label-" + group.side);
        
            label.style.bottom = makeEm(0.8 - label.depth); // Zero out label height & depth, so vertical align of arrow is set
        
            // by the arrow height, not by the label.
        
        
        
            label.height = 0;
        
            label.depth = 0;
        
            return label;
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var label = new mathMLTree.MathNode("mrow", [buildGroup(group.label, options)]);
        
            label = new mathMLTree.MathNode("mpadded", [label]);
        
            label.setAttribute("width", "0");
        
        
        
            if (group.side === "left") {
        
              label.setAttribute("lspace", "-1width");
        
            } // We have to guess at vertical alignment. We know the arrow is 1.8em tall,
        
            // But we don't know the height or depth of the label.
        
        
        
        
        
            label.setAttribute("voffset", "0.7em");
        
            label = new mathMLTree.MathNode("mstyle", [label]);
        
            label.setAttribute("displaystyle", "false");
        
            label.setAttribute("scriptlevel", "1");
        
            return label;
        
          }
        
        
        
        });
        
        defineFunction({
        
          type: "cdlabelparent",
        
          names: ["\\\\cdparent"],
        
          props: {
        
            numArgs: 1
        
          },
        
        
        
          handler(_ref2, args) {
        
            var {
        
              parser
        
            } = _ref2;
        
            return {
        
              type: "cdlabelparent",
        
              mode: parser.mode,
        
              fragment: args[0]
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            // Wrap the vertical arrow and its labels.
        
            // The parent gets position: relative. The child gets position: absolute.
        
            // So CSS can locate the label correctly.
        
            var parent = buildCommon.wrapFragment(buildGroup$1(group.fragment, options), options);
        
            parent.classes.push("cd-vert-arrow");
        
            return parent;
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            return new mathMLTree.MathNode("mrow", [buildGroup(group.fragment, options)]);
        
          }
        
        
        
        });
        
        
        
        // {123} and converts into symbol with code 123.  It is used by the *macro*
        
        // \char defined in macros.js.
        
        
        
        defineFunction({
        
          type: "textord",
        
          names: ["\\@char"],
        
          props: {
        
            numArgs: 1,
        
            allowedInText: true
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser
        
            } = _ref;
        
            var arg = assertNodeType(args[0], "ordgroup");
        
            var group = arg.body;
        
            var number = "";
        
        
        
            for (var i = 0; i < group.length; i++) {
        
              var node = assertNodeType(group[i], "textord");
        
              number += node.text;
        
            }
        
        
        
            var code = parseInt(number);
        
            var text;
        
        
        
            if (isNaN(code)) {
        
              throw new ParseError("\\@char has non-numeric argument " + number); // If we drop IE support, the following code could be replaced with
        
              // text = String.fromCodePoint(code)
        
            } else if (code < 0 || code >= 0x10ffff) {
        
              throw new ParseError("\\@char with invalid code point " + number);
        
            } else if (code <= 0xffff) {
        
              text = String.fromCharCode(code);
        
            } else {
        
              // Astral code point; split into surrogate halves
        
              code -= 0x10000;
        
              text = String.fromCharCode((code >> 10) + 0xd800, (code & 0x3ff) + 0xdc00);
        
            }
        
        
        
            return {
        
              type: "textord",
        
              mode: parser.mode,
        
              text: text
        
            };
        
          }
        
        
        
        });
        
        
        
        var htmlBuilder$8 = (group, options) => {
        
          var elements = buildExpression$1(group.body, options.withColor(group.color), false); // \color isn't supposed to affect the type of the elements it contains.
        
          // To accomplish this, we wrap the results in a fragment, so the inner
        
          // elements will be able to directly interact with their neighbors. For
        
          // example, `\color{red}{2 +} 3` has the same spacing as `2 + 3`
        
        
        
          return buildCommon.makeFragment(elements);
        
        };
        
        
        
        var mathmlBuilder$7 = (group, options) => {
        
          var inner = buildExpression(group.body, options.withColor(group.color));
        
          var node = new mathMLTree.MathNode("mstyle", inner);
        
          node.setAttribute("mathcolor", group.color);
        
          return node;
        
        };
        
        
        
        defineFunction({
        
          type: "color",
        
          names: ["\\textcolor"],
        
          props: {
        
            numArgs: 2,
        
            allowedInText: true,
        
            argTypes: ["color", "original"]
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser
        
            } = _ref;
        
            var color = assertNodeType(args[0], "color-token").color;
        
            var body = args[1];
        
            return {
        
              type: "color",
        
              mode: parser.mode,
        
              color,
        
              body: ordargument(body)
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$8,
        
          mathmlBuilder: mathmlBuilder$7
        
        });
        
        defineFunction({
        
          type: "color",
        
          names: ["\\color"],
        
          props: {
        
            numArgs: 1,
        
            allowedInText: true,
        
            argTypes: ["color"]
        
          },
        
        
        
          handler(_ref2, args) {
        
            var {
        
              parser,
        
              breakOnTokenText
        
            } = _ref2;
        
            var color = assertNodeType(args[0], "color-token").color; // Set macro \current@color in current namespace to store the current
        
            // color, mimicking the behavior of color.sty.
        
            // This is currently used just to correctly color a \right
        
            // that follows a \color command.
        
        
        
            parser.gullet.macros.set("\\current@color", color); // Parse out the implicit body that should be colored.
        
        
        
            var body = parser.parseExpression(true, breakOnTokenText);
        
            return {
        
              type: "color",
        
              mode: parser.mode,
        
              color,
        
              body
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$8,
        
          mathmlBuilder: mathmlBuilder$7
        
        });
        
        
        
        // Row breaks within tabular environments, and line breaks at top level
        
        
        
        defineFunction({
        
          type: "cr",
        
          names: ["\\\\"],
        
          props: {
        
            numArgs: 0,
        
            numOptionalArgs: 0,
        
            allowedInText: true
        
          },
        
        
        
          handler(_ref, args, optArgs) {
        
            var {
        
              parser
        
            } = _ref;
        
            var size = parser.gullet.future().text === "[" ? parser.parseSizeGroup(true) : null;
        
            var newLine = !parser.settings.displayMode || !parser.settings.useStrictBehavior("newLineInDisplayMode", "In LaTeX, \\\\ or \\newline " + "does nothing in display mode");
        
            return {
        
              type: "cr",
        
              mode: parser.mode,
        
              newLine,
        
              size: size && assertNodeType(size, "size").value
        
            };
        
          },
        
        
        
          // The following builders are called only at the top level,
        
          // not within tabular/array environments.
        
          htmlBuilder(group, options) {
        
            var span = buildCommon.makeSpan(["mspace"], [], options);
        
        
        
            if (group.newLine) {
        
              span.classes.push("newline");
        
        
        
              if (group.size) {
        
                span.style.marginTop = makeEm(calculateSize(group.size, options));
        
              }
        
            }
        
        
        
            return span;
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var node = new mathMLTree.MathNode("mspace");
        
        
        
            if (group.newLine) {
        
              node.setAttribute("linebreak", "newline");
        
        
        
              if (group.size) {
        
                node.setAttribute("height", makeEm(calculateSize(group.size, options)));
        
              }
        
            }
        
        
        
            return node;
        
          }
        
        
        
        });
        
        
        
        var globalMap = {
        
          "\\global": "\\global",
        
          "\\long": "\\\\globallong",
        
          "\\\\globallong": "\\\\globallong",
        
          "\\def": "\\gdef",
        
          "\\gdef": "\\gdef",
        
          "\\edef": "\\xdef",
        
          "\\xdef": "\\xdef",
        
          "\\let": "\\\\globallet",
        
          "\\futurelet": "\\\\globalfuture"
        
        };
        
        
        
        var checkControlSequence = tok => {
        
          var name = tok.text;
        
        
        
          if (/^(?:[\\{}$&#^_]|EOF)$/.test(name)) {
        
            throw new ParseError("Expected a control sequence", tok);
        
          }
        
        
        
          return name;
        
        };
        
        
        
        var getRHS = parser => {
        
          var tok = parser.gullet.popToken();
        
        
        
          if (tok.text === "=") {
        
            // consume optional equals
        
            tok = parser.gullet.popToken();
        
        
        
            if (tok.text === " ") {
        
              // consume one optional space
        
              tok = parser.gullet.popToken();
        
            }
        
          }
        
        
        
          return tok;
        
        };
        
        
        
        var letCommand = (parser, name, tok, global) => {
        
          var macro = parser.gullet.macros.get(tok.text);
        
        
        
          if (macro == null) {
        
            // don't expand it later even if a macro with the same name is defined
        
            // e.g., \let\foo=\frac \def\frac{\relax} \frac12
        
            tok.noexpand = true;
        
            macro = {
        
              tokens: [tok],
        
              numArgs: 0,
        
              // reproduce the same behavior in expansion
        
              unexpandable: !parser.gullet.isExpandable(tok.text)
        
            };
        
          }
        
        
        
          parser.gullet.macros.set(name, macro, global);
        
        }; // <assignment> -> <non-macro assignment>|<macro assignment>
        
        // <non-macro assignment> -> <simple assignment>|\global<non-macro assignment>
        
        // <macro assignment> -> <definition>|<prefix><macro assignment>
        
        // <prefix> -> \global|\long|\outer
        
        
        
        
        
        defineFunction({
        
          type: "internal",
        
          names: ["\\global", "\\long", "\\\\globallong" // can’t be entered directly
        
          ],
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true
        
          },
        
        
        
          handler(_ref) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            parser.consumeSpaces();
        
            var token = parser.fetch();
        
        
        
            if (globalMap[token.text]) {
        
              // KaTeX doesn't have \par, so ignore \long
        
              if (funcName === "\\global" || funcName === "\\\\globallong") {
        
                token.text = globalMap[token.text];
        
              }
        
        
        
              return assertNodeType(parser.parseFunction(), "internal");
        
            }
        
        
        
            throw new ParseError("Invalid token after macro prefix", token);
        
          }
        
        
        
        }); // Basic support for macro definitions: \def, \gdef, \edef, \xdef
        
        // <definition> -> <def><control sequence><definition text>
        
        // <def> -> \def|\gdef|\edef|\xdef
        
        // <definition text> -> <parameter text><left brace><balanced text><right brace>
        
        
        
        defineFunction({
        
          type: "internal",
        
          names: ["\\def", "\\gdef", "\\edef", "\\xdef"],
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true,
        
            primitive: true
        
          },
        
        
        
          handler(_ref2) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref2;
        
            var tok = parser.gullet.popToken();
        
            var name = tok.text;
        
        
        
            if (/^(?:[\\{}$&#^_]|EOF)$/.test(name)) {
        
              throw new ParseError("Expected a control sequence", tok);
        
            }
        
        
        
            var numArgs = 0;
        
            var insert;
        
            var delimiters = [[]]; // <parameter text> contains no braces
        
        
        
            while (parser.gullet.future().text !== "{") {
        
              tok = parser.gullet.popToken();
        
        
        
              if (tok.text === "#") {
        
                // If the very last character of the <parameter text> is #, so that
        
                // this # is immediately followed by {, TeX will behave as if the {
        
                // had been inserted at the right end of both the parameter text
        
                // and the replacement text.
        
                if (parser.gullet.future().text === "{") {
        
                  insert = parser.gullet.future();
        
                  delimiters[numArgs].push("{");
        
                  break;
        
                } // A parameter, the first appearance of # must be followed by 1,
        
                // the next by 2, and so on; up to nine #’s are allowed
        
        
        
        
        
                tok = parser.gullet.popToken();
        
        
        
                if (!/^[1-9]$/.test(tok.text)) {
        
                  throw new ParseError("Invalid argument number \"" + tok.text + "\"");
        
                }
        
        
        
                if (parseInt(tok.text) !== numArgs + 1) {
        
                  throw new ParseError("Argument number \"" + tok.text + "\" out of order");
        
                }
        
        
        
                numArgs++;
        
                delimiters.push([]);
        
              } else if (tok.text === "EOF") {
        
                throw new ParseError("Expected a macro definition");
        
              } else {
        
                delimiters[numArgs].push(tok.text);
        
              }
        
            } // replacement text, enclosed in '{' and '}' and properly nested
        
        
        
        
        
            var {
        
              tokens
        
            } = parser.gullet.consumeArg();
        
        
        
            if (insert) {
        
              tokens.unshift(insert);
        
            }
        
        
        
            if (funcName === "\\edef" || funcName === "\\xdef") {
        
              tokens = parser.gullet.expandTokens(tokens);
        
              tokens.reverse(); // to fit in with stack order
        
            } // Final arg is the expansion of the macro
        
        
        
        
        
            parser.gullet.macros.set(name, {
        
              tokens,
        
              numArgs,
        
              delimiters
        
            }, funcName === globalMap[funcName]);
        
            return {
        
              type: "internal",
        
              mode: parser.mode
        
            };
        
          }
        
        
        
        }); // <simple assignment> -> <let assignment>
        
        // <let assignment> -> \futurelet<control sequence><token><token>
        
        //     | \let<control sequence><equals><one optional space><token>
        
        // <equals> -> <optional spaces>|<optional spaces>=
        
        
        
        defineFunction({
        
          type: "internal",
        
          names: ["\\let", "\\\\globallet" // can’t be entered directly
        
          ],
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true,
        
            primitive: true
        
          },
        
        
        
          handler(_ref3) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref3;
        
            var name = checkControlSequence(parser.gullet.popToken());
        
            parser.gullet.consumeSpaces();
        
            var tok = getRHS(parser);
        
            letCommand(parser, name, tok, funcName === "\\\\globallet");
        
            return {
        
              type: "internal",
        
              mode: parser.mode
        
            };
        
          }
        
        
        
        }); // ref: https://www.tug.org/TUGboat/tb09-3/tb22bechtolsheim.pdf
        
        
        
        defineFunction({
        
          type: "internal",
        
          names: ["\\futurelet", "\\\\globalfuture" // can’t be entered directly
        
          ],
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true,
        
            primitive: true
        
          },
        
        
        
          handler(_ref4) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref4;
        
            var name = checkControlSequence(parser.gullet.popToken());
        
            var middle = parser.gullet.popToken();
        
            var tok = parser.gullet.popToken();
        
            letCommand(parser, name, tok, funcName === "\\\\globalfuture");
        
            parser.gullet.pushToken(tok);
        
            parser.gullet.pushToken(middle);
        
            return {
        
              type: "internal",
        
              mode: parser.mode
        
            };
        
          }
        
        
        
        });
        
        
        
        /**
        
         * This file deals with creating delimiters of various sizes. The TeXbook
        
         * discusses these routines on page 441-442, in the "Another subroutine sets box
        
         * x to a specified variable delimiter" paragraph.
        
         *
        
         * There are three main routines here. `makeSmallDelim` makes a delimiter in the
        
         * normal font, but in either text, script, or scriptscript style.
        
         * `makeLargeDelim` makes a delimiter in textstyle, but in one of the Size1,
        
         * Size2, Size3, or Size4 fonts. `makeStackedDelim` makes a delimiter out of
        
         * smaller pieces that are stacked on top of one another.
        
         *
        
         * The functions take a parameter `center`, which determines if the delimiter
        
         * should be centered around the axis.
        
         *
        
         * Then, there are three exposed functions. `sizedDelim` makes a delimiter in
        
         * one of the given sizes. This is used for things like `\bigl`.
        
         * `customSizedDelim` makes a delimiter with a given total height+depth. It is
        
         * called in places like `\sqrt`. `leftRightDelim` makes an appropriate
        
         * delimiter which surrounds an expression of a given height an depth. It is
        
         * used in `\left` and `\right`.
        
         */
        
        
        
        /**
        
         * Get the metrics for a given symbol and font, after transformation (i.e.
        
         * after following replacement from symbols.js)
        
         */
        
        var getMetrics = function getMetrics(symbol, font, mode) {
        
          var replace = symbols.math[symbol] && symbols.math[symbol].replace;
        
          var metrics = getCharacterMetrics(replace || symbol, font, mode);
        
        
        
          if (!metrics) {
        
            throw new Error("Unsupported symbol " + symbol + " and font size " + font + ".");
        
          }
        
        
        
          return metrics;
        
        };
        
        /**
        
         * Puts a delimiter span in a given style, and adds appropriate height, depth,
        
         * and maxFontSizes.
        
         */
        
        
        
        
        
        var styleWrap = function styleWrap(delim, toStyle, options, classes) {
        
          var newOptions = options.havingBaseStyle(toStyle);
        
          var span = buildCommon.makeSpan(classes.concat(newOptions.sizingClasses(options)), [delim], options);
        
          var delimSizeMultiplier = newOptions.sizeMultiplier / options.sizeMultiplier;
        
          span.height *= delimSizeMultiplier;
        
          span.depth *= delimSizeMultiplier;
        
          span.maxFontSize = newOptions.sizeMultiplier;
        
          return span;
        
        };
        
        
        
        var centerSpan = function centerSpan(span, options, style) {
        
          var newOptions = options.havingBaseStyle(style);
        
          var shift = (1 - options.sizeMultiplier / newOptions.sizeMultiplier) * options.fontMetrics().axisHeight;
        
          span.classes.push("delimcenter");
        
          span.style.top = makeEm(shift);
        
          span.height -= shift;
        
          span.depth += shift;
        
        };
        
        /**
        
         * Makes a small delimiter. This is a delimiter that comes in the Main-Regular
        
         * font, but is restyled to either be in textstyle, scriptstyle, or
        
         * scriptscriptstyle.
        
         */
        
        
        
        
        
        var makeSmallDelim = function makeSmallDelim(delim, style, center, options, mode, classes) {
        
          var text = buildCommon.makeSymbol(delim, "Main-Regular", mode, options);
        
          var span = styleWrap(text, style, options, classes);
        
        
        
          if (center) {
        
            centerSpan(span, options, style);
        
          }
        
        
        
          return span;
        
        };
        
        /**
        
         * Builds a symbol in the given font size (note size is an integer)
        
         */
        
        
        
        
        
        var mathrmSize = function mathrmSize(value, size, mode, options) {
        
          return buildCommon.makeSymbol(value, "Size" + size + "-Regular", mode, options);
        
        };
        
        /**
        
         * Makes a large delimiter. This is a delimiter that comes in the Size1, Size2,
        
         * Size3, or Size4 fonts. It is always rendered in textstyle.
        
         */
        
        
        
        
        
        var makeLargeDelim = function makeLargeDelim(delim, size, center, options, mode, classes) {
        
          var inner = mathrmSize(delim, size, mode, options);
        
          var span = styleWrap(buildCommon.makeSpan(["delimsizing", "size" + size], [inner], options), Style$1.TEXT, options, classes);
        
        
        
          if (center) {
        
            centerSpan(span, options, Style$1.TEXT);
        
          }
        
        
        
          return span;
        
        };
        
        /**
        
         * Make a span from a font glyph with the given offset and in the given font.
        
         * This is used in makeStackedDelim to make the stacking pieces for the delimiter.
        
         */
        
        
        
        
        
        var makeGlyphSpan = function makeGlyphSpan(symbol, font, mode) {
        
          var sizeClass; // Apply the correct CSS class to choose the right font.
        
        
        
          if (font === "Size1-Regular") {
        
            sizeClass = "delim-size1";
        
          } else
        
            /* if (font === "Size4-Regular") */
        
            {
        
              sizeClass = "delim-size4";
        
            }
        
        
        
          var corner = buildCommon.makeSpan(["delimsizinginner", sizeClass], [buildCommon.makeSpan([], [buildCommon.makeSymbol(symbol, font, mode)])]); // Since this will be passed into `makeVList` in the end, wrap the element
        
          // in the appropriate tag that VList uses.
        
        
        
          return {
        
            type: "elem",
        
            elem: corner
        
          };
        
        };
        
        
        
        var makeInner = function makeInner(ch, height, options) {
        
          // Create a span with inline SVG for the inner part of a tall stacked delimiter.
        
          var width = fontMetricsData['Size4-Regular'][ch.charCodeAt(0)] ? fontMetricsData['Size4-Regular'][ch.charCodeAt(0)][4] : fontMetricsData['Size1-Regular'][ch.charCodeAt(0)][4];
        
          var path = new PathNode("inner", innerPath(ch, Math.round(1000 * height)));
        
          var svgNode = new SvgNode([path], {
        
            "width": makeEm(width),
        
            "height": makeEm(height),
        
            // Override CSS rule `.katex svg { width: 100% }`
        
            "style": "width:" + makeEm(width),
        
            "viewBox": "0 0 " + 1000 * width + " " + Math.round(1000 * height),
        
            "preserveAspectRatio": "xMinYMin"
        
          });
        
          var span = buildCommon.makeSvgSpan([], [svgNode], options);
        
          span.height = height;
        
          span.style.height = makeEm(height);
        
          span.style.width = makeEm(width);
        
          return {
        
            type: "elem",
        
            elem: span
        
          };
        
        }; // Helpers for makeStackedDelim
        
        
        
        
        
        var lapInEms = 0.008;
        
        var lap = {
        
          type: "kern",
        
          size: -1 * lapInEms
        
        };
        
        var verts = ["|", "\\lvert", "\\rvert", "\\vert"];
        
        var doubleVerts = ["\\|", "\\lVert", "\\rVert", "\\Vert"];
        
        /**
        
         * Make a stacked delimiter out of a given delimiter, with the total height at
        
         * least `heightTotal`. This routine is mentioned on page 442 of the TeXbook.
        
         */
        
        
        
        var makeStackedDelim = function makeStackedDelim(delim, heightTotal, center, options, mode, classes) {
        
          // There are four parts, the top, an optional middle, a repeated part, and a
        
          // bottom.
        
          var top;
        
          var middle;
        
          var repeat;
        
          var bottom;
        
          var svgLabel = "";
        
          var viewBoxWidth = 0;
        
          top = repeat = bottom = delim;
        
          middle = null; // Also keep track of what font the delimiters are in
        
        
        
          var font = "Size1-Regular"; // We set the parts and font based on the symbol. Note that we use
        
          // '\u23d0' instead of '|' and '\u2016' instead of '\\|' for the
        
          // repeats of the arrows
        
        
        
          if (delim === "\\uparrow") {
        
            repeat = bottom = "\u23d0";
        
          } else if (delim === "\\Uparrow") {
        
            repeat = bottom = "\u2016";
        
          } else if (delim === "\\downarrow") {
        
            top = repeat = "\u23d0";
        
          } else if (delim === "\\Downarrow") {
        
            top = repeat = "\u2016";
        
          } else if (delim === "\\updownarrow") {
        
            top = "\\uparrow";
        
            repeat = "\u23d0";
        
            bottom = "\\downarrow";
        
          } else if (delim === "\\Updownarrow") {
        
            top = "\\Uparrow";
        
            repeat = "\u2016";
        
            bottom = "\\Downarrow";
        
          } else if (utils.contains(verts, delim)) {
        
            repeat = "\u2223";
        
            svgLabel = "vert";
        
            viewBoxWidth = 333;
        
          } else if (utils.contains(doubleVerts, delim)) {
        
            repeat = "\u2225";
        
            svgLabel = "doublevert";
        
            viewBoxWidth = 556;
        
          } else if (delim === "[" || delim === "\\lbrack") {
        
            top = "\u23a1";
        
            repeat = "\u23a2";
        
            bottom = "\u23a3";
        
            font = "Size4-Regular";
        
            svgLabel = "lbrack";
        
            viewBoxWidth = 667;
        
          } else if (delim === "]" || delim === "\\rbrack") {
        
            top = "\u23a4";
        
            repeat = "\u23a5";
        
            bottom = "\u23a6";
        
            font = "Size4-Regular";
        
            svgLabel = "rbrack";
        
            viewBoxWidth = 667;
        
          } else if (delim === "\\lfloor" || delim === "\u230a") {
        
            repeat = top = "\u23a2";
        
            bottom = "\u23a3";
        
            font = "Size4-Regular";
        
            svgLabel = "lfloor";
        
            viewBoxWidth = 667;
        
          } else if (delim === "\\lceil" || delim === "\u2308") {
        
            top = "\u23a1";
        
            repeat = bottom = "\u23a2";
        
            font = "Size4-Regular";
        
            svgLabel = "lceil";
        
            viewBoxWidth = 667;
        
          } else if (delim === "\\rfloor" || delim === "\u230b") {
        
            repeat = top = "\u23a5";
        
            bottom = "\u23a6";
        
            font = "Size4-Regular";
        
            svgLabel = "rfloor";
        
            viewBoxWidth = 667;
        
          } else if (delim === "\\rceil" || delim === "\u2309") {
        
            top = "\u23a4";
        
            repeat = bottom = "\u23a5";
        
            font = "Size4-Regular";
        
            svgLabel = "rceil";
        
            viewBoxWidth = 667;
        
          } else if (delim === "(" || delim === "\\lparen") {
        
            top = "\u239b";
        
            repeat = "\u239c";
        
            bottom = "\u239d";
        
            font = "Size4-Regular";
        
            svgLabel = "lparen";
        
            viewBoxWidth = 875;
        
          } else if (delim === ")" || delim === "\\rparen") {
        
            top = "\u239e";
        
            repeat = "\u239f";
        
            bottom = "\u23a0";
        
            font = "Size4-Regular";
        
            svgLabel = "rparen";
        
            viewBoxWidth = 875;
        
          } else if (delim === "\\{" || delim === "\\lbrace") {
        
            top = "\u23a7";
        
            middle = "\u23a8";
        
            bottom = "\u23a9";
        
            repeat = "\u23aa";
        
            font = "Size4-Regular";
        
          } else if (delim === "\\}" || delim === "\\rbrace") {
        
            top = "\u23ab";
        
            middle = "\u23ac";
        
            bottom = "\u23ad";
        
            repeat = "\u23aa";
        
            font = "Size4-Regular";
        
          } else if (delim === "\\lgroup" || delim === "\u27ee") {
        
            top = "\u23a7";
        
            bottom = "\u23a9";
        
            repeat = "\u23aa";
        
            font = "Size4-Regular";
        
          } else if (delim === "\\rgroup" || delim === "\u27ef") {
        
            top = "\u23ab";
        
            bottom = "\u23ad";
        
            repeat = "\u23aa";
        
            font = "Size4-Regular";
        
          } else if (delim === "\\lmoustache" || delim === "\u23b0") {
        
            top = "\u23a7";
        
            bottom = "\u23ad";
        
            repeat = "\u23aa";
        
            font = "Size4-Regular";
        
          } else if (delim === "\\rmoustache" || delim === "\u23b1") {
        
            top = "\u23ab";
        
            bottom = "\u23a9";
        
            repeat = "\u23aa";
        
            font = "Size4-Regular";
        
          } // Get the metrics of the four sections
        
        
        
        
        
          var topMetrics = getMetrics(top, font, mode);
        
          var topHeightTotal = topMetrics.height + topMetrics.depth;
        
          var repeatMetrics = getMetrics(repeat, font, mode);
        
          var repeatHeightTotal = repeatMetrics.height + repeatMetrics.depth;
        
          var bottomMetrics = getMetrics(bottom, font, mode);
        
          var bottomHeightTotal = bottomMetrics.height + bottomMetrics.depth;
        
          var middleHeightTotal = 0;
        
          var middleFactor = 1;
        
        
        
          if (middle !== null) {
        
            var middleMetrics = getMetrics(middle, font, mode);
        
            middleHeightTotal = middleMetrics.height + middleMetrics.depth;
        
            middleFactor = 2; // repeat symmetrically above and below middle
        
          } // Calculate the minimal height that the delimiter can have.
        
          // It is at least the size of the top, bottom, and optional middle combined.
        
        
        
        
        
          var minHeight = topHeightTotal + bottomHeightTotal + middleHeightTotal; // Compute the number of copies of the repeat symbol we will need
        
        
        
          var repeatCount = Math.max(0, Math.ceil((heightTotal - minHeight) / (middleFactor * repeatHeightTotal))); // Compute the total height of the delimiter including all the symbols
        
        
        
          var realHeightTotal = minHeight + repeatCount * middleFactor * repeatHeightTotal; // The center of the delimiter is placed at the center of the axis. Note
        
          // that in this context, "center" means that the delimiter should be
        
          // centered around the axis in the current style, while normally it is
        
          // centered around the axis in textstyle.
        
        
        
          var axisHeight = options.fontMetrics().axisHeight;
        
        
        
          if (center) {
        
            axisHeight *= options.sizeMultiplier;
        
          } // Calculate the depth
        
        
        
        
        
          var depth = realHeightTotal / 2 - axisHeight; // Now, we start building the pieces that will go into the vlist
        
          // Keep a list of the pieces of the stacked delimiter
        
        
        
          var stack = [];
        
        
        
          if (svgLabel.length > 0) {
        
            // Instead of stacking glyphs, create a single SVG.
        
            // This evades browser problems with imprecise positioning of spans.
        
            var midHeight = realHeightTotal - topHeightTotal - bottomHeightTotal;
        
            var viewBoxHeight = Math.round(realHeightTotal * 1000);
        
            var pathStr = tallDelim(svgLabel, Math.round(midHeight * 1000));
        
            var path = new PathNode(svgLabel, pathStr);
        
            var width = (viewBoxWidth / 1000).toFixed(3) + "em";
        
            var height = (viewBoxHeight / 1000).toFixed(3) + "em";
        
            var svg = new SvgNode([path], {
        
              "width": width,
        
              "height": height,
        
              "viewBox": "0 0 " + viewBoxWidth + " " + viewBoxHeight
        
            });
        
            var wrapper = buildCommon.makeSvgSpan([], [svg], options);
        
            wrapper.height = viewBoxHeight / 1000;
        
            wrapper.style.width = width;
        
            wrapper.style.height = height;
        
            stack.push({
        
              type: "elem",
        
              elem: wrapper
        
            });
        
          } else {
        
            // Stack glyphs
        
            // Start by adding the bottom symbol
        
            stack.push(makeGlyphSpan(bottom, font, mode));
        
            stack.push(lap); // overlap
        
        
        
            if (middle === null) {
        
              // The middle section will be an SVG. Make it an extra 0.016em tall.
        
              // We'll overlap by 0.008em at top and bottom.
        
              var innerHeight = realHeightTotal - topHeightTotal - bottomHeightTotal + 2 * lapInEms;
        
              stack.push(makeInner(repeat, innerHeight, options));
        
            } else {
        
              // When there is a middle bit, we need the middle part and two repeated
        
              // sections
        
              var _innerHeight = (realHeightTotal - topHeightTotal - bottomHeightTotal - middleHeightTotal) / 2 + 2 * lapInEms;
        
        
        
              stack.push(makeInner(repeat, _innerHeight, options)); // Now insert the middle of the brace.
        
        
        
              stack.push(lap);
        
              stack.push(makeGlyphSpan(middle, font, mode));
        
              stack.push(lap);
        
              stack.push(makeInner(repeat, _innerHeight, options));
        
            } // Add the top symbol
        
        
        
        
        
            stack.push(lap);
        
            stack.push(makeGlyphSpan(top, font, mode));
        
          } // Finally, build the vlist
        
        
        
        
        
          var newOptions = options.havingBaseStyle(Style$1.TEXT);
        
          var inner = buildCommon.makeVList({
        
            positionType: "bottom",
        
            positionData: depth,
        
            children: stack
        
          }, newOptions);
        
          return styleWrap(buildCommon.makeSpan(["delimsizing", "mult"], [inner], newOptions), Style$1.TEXT, options, classes);
        
        }; // All surds have 0.08em padding above the vinculum inside the SVG.
        
        // That keeps browser span height rounding error from pinching the line.
        
        
        
        
        
        var vbPad = 80; // padding above the surd, measured inside the viewBox.
        
        
        
        var emPad = 0.08; // padding, in ems, measured in the document.
        
        
        
        var sqrtSvg = function sqrtSvg(sqrtName, height, viewBoxHeight, extraVinculum, options) {
        
          var path = sqrtPath(sqrtName, extraVinculum, viewBoxHeight);
        
          var pathNode = new PathNode(sqrtName, path);
        
          var svg = new SvgNode([pathNode], {
        
            // Note: 1000:1 ratio of viewBox to document em width.
        
            "width": "400em",
        
            "height": makeEm(height),
        
            "viewBox": "0 0 400000 " + viewBoxHeight,
        
            "preserveAspectRatio": "xMinYMin slice"
        
          });
        
          return buildCommon.makeSvgSpan(["hide-tail"], [svg], options);
        
        };
        
        /**
        
         * Make a sqrt image of the given height,
        
         */
        
        
        
        
        
        var makeSqrtImage = function makeSqrtImage(height, options) {
        
          // Define a newOptions that removes the effect of size changes such as \Huge.
        
          // We don't pick different a height surd for \Huge. For it, we scale up.
        
          var newOptions = options.havingBaseSizing(); // Pick the desired surd glyph from a sequence of surds.
        
        
        
          var delim = traverseSequence("\\surd", height * newOptions.sizeMultiplier, stackLargeDelimiterSequence, newOptions);
        
          var sizeMultiplier = newOptions.sizeMultiplier; // default
        
          // The standard sqrt SVGs each have a 0.04em thick vinculum.
        
          // If Settings.minRuleThickness is larger than that, we add extraVinculum.
        
        
        
          var extraVinculum = Math.max(0, options.minRuleThickness - options.fontMetrics().sqrtRuleThickness); // Create a span containing an SVG image of a sqrt symbol.
        
        
        
          var span;
        
          var spanHeight = 0;
        
          var texHeight = 0;
        
          var viewBoxHeight = 0;
        
          var advanceWidth; // We create viewBoxes with 80 units of "padding" above each surd.
        
          // Then browser rounding error on the parent span height will not
        
          // encroach on the ink of the vinculum. But that padding is not
        
          // included in the TeX-like `height` used for calculation of
        
          // vertical alignment. So texHeight = span.height < span.style.height.
        
        
        
          if (delim.type === "small") {
        
            // Get an SVG that is derived from glyph U+221A in font KaTeX-Main.
        
            // 1000 unit normal glyph height.
        
            viewBoxHeight = 1000 + 1000 * extraVinculum + vbPad;
        
        
        
            if (height < 1.0) {
        
              sizeMultiplier = 1.0; // mimic a \textfont radical
        
            } else if (height < 1.4) {
        
              sizeMultiplier = 0.7; // mimic a \scriptfont radical
        
            }
        
        
        
            spanHeight = (1.0 + extraVinculum + emPad) / sizeMultiplier;
        
            texHeight = (1.00 + extraVinculum) / sizeMultiplier;
        
            span = sqrtSvg("sqrtMain", spanHeight, viewBoxHeight, extraVinculum, options);
        
            span.style.minWidth = "0.853em";
        
            advanceWidth = 0.833 / sizeMultiplier; // from the font.
        
          } else if (delim.type === "large") {
        
            // These SVGs come from fonts: KaTeX_Size1, _Size2, etc.
        
            viewBoxHeight = (1000 + vbPad) * sizeToMaxHeight[delim.size];
        
            texHeight = (sizeToMaxHeight[delim.size] + extraVinculum) / sizeMultiplier;
        
            spanHeight = (sizeToMaxHeight[delim.size] + extraVinculum + emPad) / sizeMultiplier;
        
            span = sqrtSvg("sqrtSize" + delim.size, spanHeight, viewBoxHeight, extraVinculum, options);
        
            span.style.minWidth = "1.02em";
        
            advanceWidth = 1.0 / sizeMultiplier; // 1.0 from the font.
        
          } else {
        
            // Tall sqrt. In TeX, this would be stacked using multiple glyphs.
        
            // We'll use a single SVG to accomplish the same thing.
        
            spanHeight = height + extraVinculum + emPad;
        
            texHeight = height + extraVinculum;
        
            viewBoxHeight = Math.floor(1000 * height + extraVinculum) + vbPad;
        
            span = sqrtSvg("sqrtTall", spanHeight, viewBoxHeight, extraVinculum, options);
        
            span.style.minWidth = "0.742em";
        
            advanceWidth = 1.056;
        
          }
        
        
        
          span.height = texHeight;
        
          span.style.height = makeEm(spanHeight);
        
          return {
        
            span,
        
            advanceWidth,
        
            // Calculate the actual line width.
        
            // This actually should depend on the chosen font -- e.g. \boldmath
        
            // should use the thicker surd symbols from e.g. KaTeX_Main-Bold, and
        
            // have thicker rules.
        
            ruleWidth: (options.fontMetrics().sqrtRuleThickness + extraVinculum) * sizeMultiplier
        
          };
        
        }; // There are three kinds of delimiters, delimiters that stack when they become
        
        // too large
        
        
        
        
        
        var stackLargeDelimiters = ["(", "\\lparen", ")", "\\rparen", "[", "\\lbrack", "]", "\\rbrack", "\\{", "\\lbrace", "\\}", "\\rbrace", "\\lfloor", "\\rfloor", "\u230a", "\u230b", "\\lceil", "\\rceil", "\u2308", "\u2309", "\\surd"]; // delimiters that always stack
        
        
        
        var stackAlwaysDelimiters = ["\\uparrow", "\\downarrow", "\\updownarrow", "\\Uparrow", "\\Downarrow", "\\Updownarrow", "|", "\\|", "\\vert", "\\Vert", "\\lvert", "\\rvert", "\\lVert", "\\rVert", "\\lgroup", "\\rgroup", "\u27ee", "\u27ef", "\\lmoustache", "\\rmoustache", "\u23b0", "\u23b1"]; // and delimiters that never stack
        
        
        
        var stackNeverDelimiters = ["<", ">", "\\langle", "\\rangle", "/", "\\backslash", "\\lt", "\\gt"]; // Metrics of the different sizes. Found by looking at TeX's output of
        
        // $\bigl| // \Bigl| \biggl| \Biggl| \showlists$
        
        // Used to create stacked delimiters of appropriate sizes in makeSizedDelim.
        
        
        
        var sizeToMaxHeight = [0, 1.2, 1.8, 2.4, 3.0];
        
        /**
        
         * Used to create a delimiter of a specific size, where `size` is 1, 2, 3, or 4.
        
         */
        
        
        
        var makeSizedDelim = function makeSizedDelim(delim, size, options, mode, classes) {
        
          // < and > turn into \langle and \rangle in delimiters
        
          if (delim === "<" || delim === "\\lt" || delim === "\u27e8") {
        
            delim = "\\langle";
        
          } else if (delim === ">" || delim === "\\gt" || delim === "\u27e9") {
        
            delim = "\\rangle";
        
          } // Sized delimiters are never centered.
        
        
        
        
        
          if (utils.contains(stackLargeDelimiters, delim) || utils.contains(stackNeverDelimiters, delim)) {
        
            return makeLargeDelim(delim, size, false, options, mode, classes);
        
          } else if (utils.contains(stackAlwaysDelimiters, delim)) {
        
            return makeStackedDelim(delim, sizeToMaxHeight[size], false, options, mode, classes);
        
          } else {
        
            throw new ParseError("Illegal delimiter: '" + delim + "'");
        
          }
        
        };
        
        /**
        
         * There are three different sequences of delimiter sizes that the delimiters
        
         * follow depending on the kind of delimiter. This is used when creating custom
        
         * sized delimiters to decide whether to create a small, large, or stacked
        
         * delimiter.
        
         *
        
         * In real TeX, these sequences aren't explicitly defined, but are instead
        
         * defined inside the font metrics. Since there are only three sequences that
        
         * are possible for the delimiters that TeX defines, it is easier to just encode
        
         * them explicitly here.
        
         */
        
        
        
        
        
        // Delimiters that never stack try small delimiters and large delimiters only
        
        var stackNeverDelimiterSequence = [{
        
          type: "small",
        
          style: Style$1.SCRIPTSCRIPT
        
        }, {
        
          type: "small",
        
          style: Style$1.SCRIPT
        
        }, {
        
          type: "small",
        
          style: Style$1.TEXT
        
        }, {
        
          type: "large",
        
          size: 1
        
        }, {
        
          type: "large",
        
          size: 2
        
        }, {
        
          type: "large",
        
          size: 3
        
        }, {
        
          type: "large",
        
          size: 4
        
        }]; // Delimiters that always stack try the small delimiters first, then stack
        
        
        
        var stackAlwaysDelimiterSequence = [{
        
          type: "small",
        
          style: Style$1.SCRIPTSCRIPT
        
        }, {
        
          type: "small",
        
          style: Style$1.SCRIPT
        
        }, {
        
          type: "small",
        
          style: Style$1.TEXT
        
        }, {
        
          type: "stack"
        
        }]; // Delimiters that stack when large try the small and then large delimiters, and
        
        // stack afterwards
        
        
        
        var stackLargeDelimiterSequence = [{
        
          type: "small",
        
          style: Style$1.SCRIPTSCRIPT
        
        }, {
        
          type: "small",
        
          style: Style$1.SCRIPT
        
        }, {
        
          type: "small",
        
          style: Style$1.TEXT
        
        }, {
        
          type: "large",
        
          size: 1
        
        }, {
        
          type: "large",
        
          size: 2
        
        }, {
        
          type: "large",
        
          size: 3
        
        }, {
        
          type: "large",
        
          size: 4
        
        }, {
        
          type: "stack"
        
        }];
        
        /**
        
         * Get the font used in a delimiter based on what kind of delimiter it is.
        
         * TODO(#963) Use more specific font family return type once that is introduced.
        
         */
        
        
        
        var delimTypeToFont = function delimTypeToFont(type) {
        
          if (type.type === "small") {
        
            return "Main-Regular";
        
          } else if (type.type === "large") {
        
            return "Size" + type.size + "-Regular";
        
          } else if (type.type === "stack") {
        
            return "Size4-Regular";
        
          } else {
        
            throw new Error("Add support for delim type '" + type.type + "' here.");
        
          }
        
        };
        
        /**
        
         * Traverse a sequence of types of delimiters to decide what kind of delimiter
        
         * should be used to create a delimiter of the given height+depth.
        
         */
        
        
        
        
        
        var traverseSequence = function traverseSequence(delim, height, sequence, options) {
        
          // Here, we choose the index we should start at in the sequences. In smaller
        
          // sizes (which correspond to larger numbers in style.size) we start earlier
        
          // in the sequence. Thus, scriptscript starts at index 3-3=0, script starts
        
          // at index 3-2=1, text starts at 3-1=2, and display starts at min(2,3-0)=2
        
          var start = Math.min(2, 3 - options.style.size);
        
        
        
          for (var i = start; i < sequence.length; i++) {
        
            if (sequence[i].type === "stack") {
        
              // This is always the last delimiter, so we just break the loop now.
        
              break;
        
            }
        
        
        
            var metrics = getMetrics(delim, delimTypeToFont(sequence[i]), "math");
        
            var heightDepth = metrics.height + metrics.depth; // Small delimiters are scaled down versions of the same font, so we
        
            // account for the style change size.
        
        
        
            if (sequence[i].type === "small") {
        
              var newOptions = options.havingBaseStyle(sequence[i].style);
        
              heightDepth *= newOptions.sizeMultiplier;
        
            } // Check if the delimiter at this size works for the given height.
        
        
        
        
        
            if (heightDepth > height) {
        
              return sequence[i];
        
            }
        
          } // If we reached the end of the sequence, return the last sequence element.
        
        
        
        
        
          return sequence[sequence.length - 1];
        
        };
        
        /**
        
         * Make a delimiter of a given height+depth, with optional centering. Here, we
        
         * traverse the sequences, and create a delimiter that the sequence tells us to.
        
         */
        
        
        
        
        
        var makeCustomSizedDelim = function makeCustomSizedDelim(delim, height, center, options, mode, classes) {
        
          if (delim === "<" || delim === "\\lt" || delim === "\u27e8") {
        
            delim = "\\langle";
        
          } else if (delim === ">" || delim === "\\gt" || delim === "\u27e9") {
        
            delim = "\\rangle";
        
          } // Decide what sequence to use
        
        
        
        
        
          var sequence;
        
        
        
          if (utils.contains(stackNeverDelimiters, delim)) {
        
            sequence = stackNeverDelimiterSequence;
        
          } else if (utils.contains(stackLargeDelimiters, delim)) {
        
            sequence = stackLargeDelimiterSequence;
        
          } else {
        
            sequence = stackAlwaysDelimiterSequence;
        
          } // Look through the sequence
        
        
        
        
        
          var delimType = traverseSequence(delim, height, sequence, options); // Get the delimiter from font glyphs.
        
          // Depending on the sequence element we decided on, call the
        
          // appropriate function.
        
        
        
          if (delimType.type === "small") {
        
            return makeSmallDelim(delim, delimType.style, center, options, mode, classes);
        
          } else if (delimType.type === "large") {
        
            return makeLargeDelim(delim, delimType.size, center, options, mode, classes);
        
          } else
        
            /* if (delimType.type === "stack") */
        
            {
        
              return makeStackedDelim(delim, height, center, options, mode, classes);
        
            }
        
        };
        
        /**
        
         * Make a delimiter for use with `\left` and `\right`, given a height and depth
        
         * of an expression that the delimiters surround.
        
         */
        
        
        
        
        
        var makeLeftRightDelim = function makeLeftRightDelim(delim, height, depth, options, mode, classes) {
        
          // We always center \left/\right delimiters, so the axis is always shifted
        
          var axisHeight = options.fontMetrics().axisHeight * options.sizeMultiplier; // Taken from TeX source, tex.web, function make_left_right
        
        
        
          var delimiterFactor = 901;
        
          var delimiterExtend = 5.0 / options.fontMetrics().ptPerEm;
        
          var maxDistFromAxis = Math.max(height - axisHeight, depth + axisHeight);
        
          var totalHeight = Math.max( // In real TeX, calculations are done using integral values which are
        
          // 65536 per pt, or 655360 per em. So, the division here truncates in
        
          // TeX but doesn't here, producing different results. If we wanted to
        
          // exactly match TeX's calculation, we could do
        
          //   Math.floor(655360 * maxDistFromAxis / 500) *
        
          //    delimiterFactor / 655360
        
          // (To see the difference, compare
        
          //    x^{x^{\left(\rule{0.1em}{0.68em}\right)}}
        
          // in TeX and KaTeX)
        
          maxDistFromAxis / 500 * delimiterFactor, 2 * maxDistFromAxis - delimiterExtend); // Finally, we defer to `makeCustomSizedDelim` with our calculated total
        
          // height
        
        
        
          return makeCustomSizedDelim(delim, totalHeight, true, options, mode, classes);
        
        };
        
        
        
        var delimiter = {
        
          sqrtImage: makeSqrtImage,
        
          sizedDelim: makeSizedDelim,
        
          sizeToMaxHeight: sizeToMaxHeight,
        
          customSizedDelim: makeCustomSizedDelim,
        
          leftRightDelim: makeLeftRightDelim
        
        };
        
        
        
        // Extra data needed for the delimiter handler down below
        
        var delimiterSizes = {
        
          "\\bigl": {
        
            mclass: "mopen",
        
            size: 1
        
          },
        
          "\\Bigl": {
        
            mclass: "mopen",
        
            size: 2
        
          },
        
          "\\biggl": {
        
            mclass: "mopen",
        
            size: 3
        
          },
        
          "\\Biggl": {
        
            mclass: "mopen",
        
            size: 4
        
          },
        
          "\\bigr": {
        
            mclass: "mclose",
        
            size: 1
        
          },
        
          "\\Bigr": {
        
            mclass: "mclose",
        
            size: 2
        
          },
        
          "\\biggr": {
        
            mclass: "mclose",
        
            size: 3
        
          },
        
          "\\Biggr": {
        
            mclass: "mclose",
        
            size: 4
        
          },
        
          "\\bigm": {
        
            mclass: "mrel",
        
            size: 1
        
          },
        
          "\\Bigm": {
        
            mclass: "mrel",
        
            size: 2
        
          },
        
          "\\biggm": {
        
            mclass: "mrel",
        
            size: 3
        
          },
        
          "\\Biggm": {
        
            mclass: "mrel",
        
            size: 4
        
          },
        
          "\\big": {
        
            mclass: "mord",
        
            size: 1
        
          },
        
          "\\Big": {
        
            mclass: "mord",
        
            size: 2
        
          },
        
          "\\bigg": {
        
            mclass: "mord",
        
            size: 3
        
          },
        
          "\\Bigg": {
        
            mclass: "mord",
        
            size: 4
        
          }
        
        };
        
        var delimiters = ["(", "\\lparen", ")", "\\rparen", "[", "\\lbrack", "]", "\\rbrack", "\\{", "\\lbrace", "\\}", "\\rbrace", "\\lfloor", "\\rfloor", "\u230a", "\u230b", "\\lceil", "\\rceil", "\u2308", "\u2309", "<", ">", "\\langle", "\u27e8", "\\rangle", "\u27e9", "\\lt", "\\gt", "\\lvert", "\\rvert", "\\lVert", "\\rVert", "\\lgroup", "\\rgroup", "\u27ee", "\u27ef", "\\lmoustache", "\\rmoustache", "\u23b0", "\u23b1", "/", "\\backslash", "|", "\\vert", "\\|", "\\Vert", "\\uparrow", "\\Uparrow", "\\downarrow", "\\Downarrow", "\\updownarrow", "\\Updownarrow", "."];
        
        
        
        // Delimiter functions
        
        function checkDelimiter(delim, context) {
        
          var symDelim = checkSymbolNodeType(delim);
        
        
        
          if (symDelim && utils.contains(delimiters, symDelim.text)) {
        
            return symDelim;
        
          } else if (symDelim) {
        
            throw new ParseError("Invalid delimiter '" + symDelim.text + "' after '" + context.funcName + "'", delim);
        
          } else {
        
            throw new ParseError("Invalid delimiter type '" + delim.type + "'", delim);
        
          }
        
        }
        
        
        
        defineFunction({
        
          type: "delimsizing",
        
          names: ["\\bigl", "\\Bigl", "\\biggl", "\\Biggl", "\\bigr", "\\Bigr", "\\biggr", "\\Biggr", "\\bigm", "\\Bigm", "\\biggm", "\\Biggm", "\\big", "\\Big", "\\bigg", "\\Bigg"],
        
          props: {
        
            numArgs: 1,
        
            argTypes: ["primitive"]
        
          },
        
          handler: (context, args) => {
        
            var delim = checkDelimiter(args[0], context);
        
            return {
        
              type: "delimsizing",
        
              mode: context.parser.mode,
        
              size: delimiterSizes[context.funcName].size,
        
              mclass: delimiterSizes[context.funcName].mclass,
        
              delim: delim.text
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            if (group.delim === ".") {
        
              // Empty delimiters still count as elements, even though they don't
        
              // show anything.
        
              return buildCommon.makeSpan([group.mclass]);
        
            } // Use delimiter.sizedDelim to generate the delimiter.
        
        
        
        
        
            return delimiter.sizedDelim(group.delim, group.size, options, group.mode, [group.mclass]);
        
          },
        
          mathmlBuilder: group => {
        
            var children = [];
        
        
        
            if (group.delim !== ".") {
        
              children.push(makeText(group.delim, group.mode));
        
            }
        
        
        
            var node = new mathMLTree.MathNode("mo", children);
        
        
        
            if (group.mclass === "mopen" || group.mclass === "mclose") {
        
              // Only some of the delimsizing functions act as fences, and they
        
              // return "mopen" or "mclose" mclass.
        
              node.setAttribute("fence", "true");
        
            } else {
        
              // Explicitly disable fencing if it's not a fence, to override the
        
              // defaults.
        
              node.setAttribute("fence", "false");
        
            }
        
        
        
            node.setAttribute("stretchy", "true");
        
            var size = makeEm(delimiter.sizeToMaxHeight[group.size]);
        
            node.setAttribute("minsize", size);
        
            node.setAttribute("maxsize", size);
        
            return node;
        
          }
        
        });
        
        
        
        function assertParsed(group) {
        
          if (!group.body) {
        
            throw new Error("Bug: The leftright ParseNode wasn't fully parsed.");
        
          }
        
        }
        
        
        
        defineFunction({
        
          type: "leftright-right",
        
          names: ["\\right"],
        
          props: {
        
            numArgs: 1,
        
            primitive: true
        
          },
        
          handler: (context, args) => {
        
            // \left case below triggers parsing of \right in
        
            //   `const right = parser.parseFunction();`
        
            // uses this return value.
        
            var color = context.parser.gullet.macros.get("\\current@color");
        
        
        
            if (color && typeof color !== "string") {
        
              throw new ParseError("\\current@color set to non-string in \\right");
        
            }
        
        
        
            return {
        
              type: "leftright-right",
        
              mode: context.parser.mode,
        
              delim: checkDelimiter(args[0], context).text,
        
              color // undefined if not set via \color
        
        
        
            };
        
          }
        
        });
        
        defineFunction({
        
          type: "leftright",
        
          names: ["\\left"],
        
          props: {
        
            numArgs: 1,
        
            primitive: true
        
          },
        
          handler: (context, args) => {
        
            var delim = checkDelimiter(args[0], context);
        
            var parser = context.parser; // Parse out the implicit body
        
        
        
            ++parser.leftrightDepth; // parseExpression stops before '\\right'
        
        
        
            var body = parser.parseExpression(false);
        
            --parser.leftrightDepth; // Check the next token
        
        
        
            parser.expect("\\right", false);
        
            var right = assertNodeType(parser.parseFunction(), "leftright-right");
        
            return {
        
              type: "leftright",
        
              mode: parser.mode,
        
              body,
        
              left: delim.text,
        
              right: right.delim,
        
              rightColor: right.color
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            assertParsed(group); // Build the inner expression
        
        
        
            var inner = buildExpression$1(group.body, options, true, ["mopen", "mclose"]);
        
            var innerHeight = 0;
        
            var innerDepth = 0;
        
            var hadMiddle = false; // Calculate its height and depth
        
        
        
            for (var i = 0; i < inner.length; i++) {
        
              // Property `isMiddle` not defined on `span`. See comment in
        
              // "middle"'s htmlBuilder.
        
              // $FlowFixMe
        
              if (inner[i].isMiddle) {
        
                hadMiddle = true;
        
              } else {
        
                innerHeight = Math.max(inner[i].height, innerHeight);
        
                innerDepth = Math.max(inner[i].depth, innerDepth);
        
              }
        
            } // The size of delimiters is the same, regardless of what style we are
        
            // in. Thus, to correctly calculate the size of delimiter we need around
        
            // a group, we scale down the inner size based on the size.
        
        
        
        
        
            innerHeight *= options.sizeMultiplier;
        
            innerDepth *= options.sizeMultiplier;
        
            var leftDelim;
        
        
        
            if (group.left === ".") {
        
              // Empty delimiters in \left and \right make null delimiter spaces.
        
              leftDelim = makeNullDelimiter(options, ["mopen"]);
        
            } else {
        
              // Otherwise, use leftRightDelim to generate the correct sized
        
              // delimiter.
        
              leftDelim = delimiter.leftRightDelim(group.left, innerHeight, innerDepth, options, group.mode, ["mopen"]);
        
            } // Add it to the beginning of the expression
        
        
        
        
        
            inner.unshift(leftDelim); // Handle middle delimiters
        
        
        
            if (hadMiddle) {
        
              for (var _i = 1; _i < inner.length; _i++) {
        
                var middleDelim = inner[_i]; // Property `isMiddle` not defined on `span`. See comment in
        
                // "middle"'s htmlBuilder.
        
                // $FlowFixMe
        
        
        
                var isMiddle = middleDelim.isMiddle;
        
        
        
                if (isMiddle) {
        
                  // Apply the options that were active when \middle was called
        
                  inner[_i] = delimiter.leftRightDelim(isMiddle.delim, innerHeight, innerDepth, isMiddle.options, group.mode, []);
        
                }
        
              }
        
            }
        
        
        
            var rightDelim; // Same for the right delimiter, but using color specified by \color
        
        
        
            if (group.right === ".") {
        
              rightDelim = makeNullDelimiter(options, ["mclose"]);
        
            } else {
        
              var colorOptions = group.rightColor ? options.withColor(group.rightColor) : options;
        
              rightDelim = delimiter.leftRightDelim(group.right, innerHeight, innerDepth, colorOptions, group.mode, ["mclose"]);
        
            } // Add it to the end of the expression.
        
        
        
        
        
            inner.push(rightDelim);
        
            return buildCommon.makeSpan(["minner"], inner, options);
        
          },
        
          mathmlBuilder: (group, options) => {
        
            assertParsed(group);
        
            var inner = buildExpression(group.body, options);
        
        
        
            if (group.left !== ".") {
        
              var leftNode = new mathMLTree.MathNode("mo", [makeText(group.left, group.mode)]);
        
              leftNode.setAttribute("fence", "true");
        
              inner.unshift(leftNode);
        
            }
        
        
        
            if (group.right !== ".") {
        
              var rightNode = new mathMLTree.MathNode("mo", [makeText(group.right, group.mode)]);
        
              rightNode.setAttribute("fence", "true");
        
        
        
              if (group.rightColor) {
        
                rightNode.setAttribute("mathcolor", group.rightColor);
        
              }
        
        
        
              inner.push(rightNode);
        
            }
        
        
        
            return makeRow(inner);
        
          }
        
        });
        
        defineFunction({
        
          type: "middle",
        
          names: ["\\middle"],
        
          props: {
        
            numArgs: 1,
        
            primitive: true
        
          },
        
          handler: (context, args) => {
        
            var delim = checkDelimiter(args[0], context);
        
        
        
            if (!context.parser.leftrightDepth) {
        
              throw new ParseError("\\middle without preceding \\left", delim);
        
            }
        
        
        
            return {
        
              type: "middle",
        
              mode: context.parser.mode,
        
              delim: delim.text
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            var middleDelim;
        
        
        
            if (group.delim === ".") {
        
              middleDelim = makeNullDelimiter(options, []);
        
            } else {
        
              middleDelim = delimiter.sizedDelim(group.delim, 1, options, group.mode, []);
        
              var isMiddle = {
        
                delim: group.delim,
        
                options
        
              }; // Property `isMiddle` not defined on `span`. It is only used in
        
              // this file above.
        
              // TODO: Fix this violation of the `span` type and possibly rename
        
              // things since `isMiddle` sounds like a boolean, but is a struct.
        
              // $FlowFixMe
        
        
        
              middleDelim.isMiddle = isMiddle;
        
            }
        
        
        
            return middleDelim;
        
          },
        
          mathmlBuilder: (group, options) => {
        
            // A Firefox \middle will stretch a character vertically only if it
        
            // is in the fence part of the operator dictionary at:
        
            // https://www.w3.org/TR/MathML3/appendixc.html.
        
            // So we need to avoid U+2223 and use plain "|" instead.
        
            var textNode = group.delim === "\\vert" || group.delim === "|" ? makeText("|", "text") : makeText(group.delim, group.mode);
        
            var middleNode = new mathMLTree.MathNode("mo", [textNode]);
        
            middleNode.setAttribute("fence", "true"); // MathML gives 5/18em spacing to each <mo> element.
        
            // \middle should get delimiter spacing instead.
        
        
        
            middleNode.setAttribute("lspace", "0.05em");
        
            middleNode.setAttribute("rspace", "0.05em");
        
            return middleNode;
        
          }
        
        });
        
        
        
        var htmlBuilder$7 = (group, options) => {
        
          // \cancel, \bcancel, \xcancel, \sout, \fbox, \colorbox, \fcolorbox, \phase
        
          // Some groups can return document fragments.  Handle those by wrapping
        
          // them in a span.
        
          var inner = buildCommon.wrapFragment(buildGroup$1(group.body, options), options);
        
          var label = group.label.slice(1);
        
          var scale = options.sizeMultiplier;
        
          var img;
        
          var imgShift = 0; // In the LaTeX cancel package, line geometry is slightly different
        
          // depending on whether the subject is wider than it is tall, or vice versa.
        
          // We don't know the width of a group, so as a proxy, we test if
        
          // the subject is a single character. This captures most of the
        
          // subjects that should get the "tall" treatment.
        
        
        
          var isSingleChar = utils.isCharacterBox(group.body);
        
        
        
          if (label === "sout") {
        
            img = buildCommon.makeSpan(["stretchy", "sout"]);
        
            img.height = options.fontMetrics().defaultRuleThickness / scale;
        
            imgShift = -0.5 * options.fontMetrics().xHeight;
        
          } else if (label === "phase") {
        
            // Set a couple of dimensions from the steinmetz package.
        
            var lineWeight = calculateSize({
        
              number: 0.6,
        
              unit: "pt"
        
            }, options);
        
            var clearance = calculateSize({
        
              number: 0.35,
        
              unit: "ex"
        
            }, options); // Prevent size changes like \Huge from affecting line thickness
        
        
        
            var newOptions = options.havingBaseSizing();
        
            scale = scale / newOptions.sizeMultiplier;
        
            var angleHeight = inner.height + inner.depth + lineWeight + clearance; // Reserve a left pad for the angle.
        
        
        
            inner.style.paddingLeft = makeEm(angleHeight / 2 + lineWeight); // Create an SVG
        
        
        
            var viewBoxHeight = Math.floor(1000 * angleHeight * scale);
        
            var path = phasePath(viewBoxHeight);
        
            var svgNode = new SvgNode([new PathNode("phase", path)], {
        
              "width": "400em",
        
              "height": makeEm(viewBoxHeight / 1000),
        
              "viewBox": "0 0 400000 " + viewBoxHeight,
        
              "preserveAspectRatio": "xMinYMin slice"
        
            }); // Wrap it in a span with overflow: hidden.
        
        
        
            img = buildCommon.makeSvgSpan(["hide-tail"], [svgNode], options);
        
            img.style.height = makeEm(angleHeight);
        
            imgShift = inner.depth + lineWeight + clearance;
        
          } else {
        
            // Add horizontal padding
        
            if (/cancel/.test(label)) {
        
              if (!isSingleChar) {
        
                inner.classes.push("cancel-pad");
        
              }
        
            } else if (label === "angl") {
        
              inner.classes.push("anglpad");
        
            } else {
        
              inner.classes.push("boxpad");
        
            } // Add vertical padding
        
        
        
        
        
            var topPad = 0;
        
            var bottomPad = 0;
        
            var ruleThickness = 0; // ref: cancel package: \advance\totalheight2\p@ % "+2"
        
        
        
            if (/box/.test(label)) {
        
              ruleThickness = Math.max(options.fontMetrics().fboxrule, // default
        
              options.minRuleThickness // User override.
        
              );
        
              topPad = options.fontMetrics().fboxsep + (label === "colorbox" ? 0 : ruleThickness);
        
              bottomPad = topPad;
        
            } else if (label === "angl") {
        
              ruleThickness = Math.max(options.fontMetrics().defaultRuleThickness, options.minRuleThickness);
        
              topPad = 4 * ruleThickness; // gap = 3 × line, plus the line itself.
        
        
        
              bottomPad = Math.max(0, 0.25 - inner.depth);
        
            } else {
        
              topPad = isSingleChar ? 0.2 : 0;
        
              bottomPad = topPad;
        
            }
        
        
        
            img = stretchy.encloseSpan(inner, label, topPad, bottomPad, options);
        
        
        
            if (/fbox|boxed|fcolorbox/.test(label)) {
        
              img.style.borderStyle = "solid";
        
              img.style.borderWidth = makeEm(ruleThickness);
        
            } else if (label === "angl" && ruleThickness !== 0.049) {
        
              img.style.borderTopWidth = makeEm(ruleThickness);
        
              img.style.borderRightWidth = makeEm(ruleThickness);
        
            }
        
        
        
            imgShift = inner.depth + bottomPad;
        
        
        
            if (group.backgroundColor) {
        
              img.style.backgroundColor = group.backgroundColor;
        
        
        
              if (group.borderColor) {
        
                img.style.borderColor = group.borderColor;
        
              }
        
            }
        
          }
        
        
        
          var vlist;
        
        
        
          if (group.backgroundColor) {
        
            vlist = buildCommon.makeVList({
        
              positionType: "individualShift",
        
              children: [// Put the color background behind inner;
        
              {
        
                type: "elem",
        
                elem: img,
        
                shift: imgShift
        
              }, {
        
                type: "elem",
        
                elem: inner,
        
                shift: 0
        
              }]
        
            }, options);
        
          } else {
        
            var classes = /cancel|phase/.test(label) ? ["svg-align"] : [];
        
            vlist = buildCommon.makeVList({
        
              positionType: "individualShift",
        
              children: [// Write the \cancel stroke on top of inner.
        
              {
        
                type: "elem",
        
                elem: inner,
        
                shift: 0
        
              }, {
        
                type: "elem",
        
                elem: img,
        
                shift: imgShift,
        
                wrapperClasses: classes
        
              }]
        
            }, options);
        
          }
        
        
        
          if (/cancel/.test(label)) {
        
            // The cancel package documentation says that cancel lines add their height
        
            // to the expression, but tests show that isn't how it actually works.
        
            vlist.height = inner.height;
        
            vlist.depth = inner.depth;
        
          }
        
        
        
          if (/cancel/.test(label) && !isSingleChar) {
        
            // cancel does not create horiz space for its line extension.
        
            return buildCommon.makeSpan(["mord", "cancel-lap"], [vlist], options);
        
          } else {
        
            return buildCommon.makeSpan(["mord"], [vlist], options);
        
          }
        
        };
        
        
        
        var mathmlBuilder$6 = (group, options) => {
        
          var fboxsep = 0;
        
          var node = new mathMLTree.MathNode(group.label.indexOf("colorbox") > -1 ? "mpadded" : "menclose", [buildGroup(group.body, options)]);
        
        
        
          switch (group.label) {
        
            case "\\cancel":
        
              node.setAttribute("notation", "updiagonalstrike");
        
              break;
        
        
        
            case "\\bcancel":
        
              node.setAttribute("notation", "downdiagonalstrike");
        
              break;
        
        
        
            case "\\phase":
        
              node.setAttribute("notation", "phasorangle");
        
              break;
        
        
        
            case "\\sout":
        
              node.setAttribute("notation", "horizontalstrike");
        
              break;
        
        
        
            case "\\fbox":
        
              node.setAttribute("notation", "box");
        
              break;
        
        
        
            case "\\angl":
        
              node.setAttribute("notation", "actuarial");
        
              break;
        
        
        
            case "\\fcolorbox":
        
            case "\\colorbox":
        
              // <menclose> doesn't have a good notation option. So use <mpadded>
        
              // instead. Set some attributes that come included with <menclose>.
        
              fboxsep = options.fontMetrics().fboxsep * options.fontMetrics().ptPerEm;
        
              node.setAttribute("width", "+" + 2 * fboxsep + "pt");
        
              node.setAttribute("height", "+" + 2 * fboxsep + "pt");
        
              node.setAttribute("lspace", fboxsep + "pt"); //
        
        
        
              node.setAttribute("voffset", fboxsep + "pt");
        
        
        
              if (group.label === "\\fcolorbox") {
        
                var thk = Math.max(options.fontMetrics().fboxrule, // default
        
                options.minRuleThickness // user override
        
                );
        
                node.setAttribute("style", "border: " + thk + "em solid " + String(group.borderColor));
        
              }
        
        
        
              break;
        
        
        
            case "\\xcancel":
        
              node.setAttribute("notation", "updiagonalstrike downdiagonalstrike");
        
              break;
        
          }
        
        
        
          if (group.backgroundColor) {
        
            node.setAttribute("mathbackground", group.backgroundColor);
        
          }
        
        
        
          return node;
        
        };
        
        
        
        defineFunction({
        
          type: "enclose",
        
          names: ["\\colorbox"],
        
          props: {
        
            numArgs: 2,
        
            allowedInText: true,
        
            argTypes: ["color", "text"]
        
          },
        
        
        
          handler(_ref, args, optArgs) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            var color = assertNodeType(args[0], "color-token").color;
        
            var body = args[1];
        
            return {
        
              type: "enclose",
        
              mode: parser.mode,
        
              label: funcName,
        
              backgroundColor: color,
        
              body
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$7,
        
          mathmlBuilder: mathmlBuilder$6
        
        });
        
        defineFunction({
        
          type: "enclose",
        
          names: ["\\fcolorbox"],
        
          props: {
        
            numArgs: 3,
        
            allowedInText: true,
        
            argTypes: ["color", "color", "text"]
        
          },
        
        
        
          handler(_ref2, args, optArgs) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref2;
        
            var borderColor = assertNodeType(args[0], "color-token").color;
        
            var backgroundColor = assertNodeType(args[1], "color-token").color;
        
            var body = args[2];
        
            return {
        
              type: "enclose",
        
              mode: parser.mode,
        
              label: funcName,
        
              backgroundColor,
        
              borderColor,
        
              body
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$7,
        
          mathmlBuilder: mathmlBuilder$6
        
        });
        
        defineFunction({
        
          type: "enclose",
        
          names: ["\\fbox"],
        
          props: {
        
            numArgs: 1,
        
            argTypes: ["hbox"],
        
            allowedInText: true
        
          },
        
        
        
          handler(_ref3, args) {
        
            var {
        
              parser
        
            } = _ref3;
        
            return {
        
              type: "enclose",
        
              mode: parser.mode,
        
              label: "\\fbox",
        
              body: args[0]
        
            };
        
          }
        
        
        
        });
        
        defineFunction({
        
          type: "enclose",
        
          names: ["\\cancel", "\\bcancel", "\\xcancel", "\\sout", "\\phase"],
        
          props: {
        
            numArgs: 1
        
          },
        
        
        
          handler(_ref4, args) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref4;
        
            var body = args[0];
        
            return {
        
              type: "enclose",
        
              mode: parser.mode,
        
              label: funcName,
        
              body
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$7,
        
          mathmlBuilder: mathmlBuilder$6
        
        });
        
        defineFunction({
        
          type: "enclose",
        
          names: ["\\angl"],
        
          props: {
        
            numArgs: 1,
        
            argTypes: ["hbox"],
        
            allowedInText: false
        
          },
        
        
        
          handler(_ref5, args) {
        
            var {
        
              parser
        
            } = _ref5;
        
            return {
        
              type: "enclose",
        
              mode: parser.mode,
        
              label: "\\angl",
        
              body: args[0]
        
            };
        
          }
        
        
        
        });
        
        
        
        /**
        
         * All registered environments.
        
         * `environments.js` exports this same dictionary again and makes it public.
        
         * `Parser.js` requires this dictionary via `environments.js`.
        
         */
        
        var _environments = {};
        
        function defineEnvironment(_ref) {
        
          var {
        
            type,
        
            names,
        
            props,
        
            handler,
        
            htmlBuilder,
        
            mathmlBuilder
        
          } = _ref;
        
          // Set default values of environments.
        
          var data = {
        
            type,
        
            numArgs: props.numArgs || 0,
        
            allowedInText: false,
        
            numOptionalArgs: 0,
        
            handler
        
          };
        
        
        
          for (var i = 0; i < names.length; ++i) {
        
            // TODO: The value type of _environments should be a type union of all
        
            // possible `EnvSpec<>` possibilities instead of `EnvSpec<*>`, which is
        
            // an existential type.
        
            _environments[names[i]] = data;
        
          }
        
        
        
          if (htmlBuilder) {
        
            _htmlGroupBuilders[type] = htmlBuilder;
        
          }
        
        
        
          if (mathmlBuilder) {
        
            _mathmlGroupBuilders[type] = mathmlBuilder;
        
          }
        
        }
        
        
        
        /**
        
         * All registered global/built-in macros.
        
         * `macros.js` exports this same dictionary again and makes it public.
        
         * `Parser.js` requires this dictionary via `macros.js`.
        
         */
        
        var _macros = {}; // This function might one day accept an additional argument and do more things.
        
        
        
        function defineMacro(name, body) {
        
          _macros[name] = body;
        
        }
        
        
        
        // Helper functions
        
        function getHLines(parser) {
        
          // Return an array. The array length = number of hlines.
        
          // Each element in the array tells if the line is dashed.
        
          var hlineInfo = [];
        
          parser.consumeSpaces();
        
          var nxt = parser.fetch().text;
        
        
        
          if (nxt === "\\relax") {
        
            // \relax is an artifact of the \cr macro below
        
            parser.consume();
        
            parser.consumeSpaces();
        
            nxt = parser.fetch().text;
        
          }
        
        
        
          while (nxt === "\\hline" || nxt === "\\hdashline") {
        
            parser.consume();
        
            hlineInfo.push(nxt === "\\hdashline");
        
            parser.consumeSpaces();
        
            nxt = parser.fetch().text;
        
          }
        
        
        
          return hlineInfo;
        
        }
        
        
        
        var validateAmsEnvironmentContext = context => {
        
          var settings = context.parser.settings;
        
        
        
          if (!settings.displayMode) {
        
            throw new ParseError("{" + context.envName + "} can be used only in" + " display mode.");
        
          }
        
        }; // autoTag (an argument to parseArray) can be one of three values:
        
        // * undefined: Regular (not-top-level) array; no tags on each row
        
        // * true: Automatic equation numbering, overridable by \tag
        
        // * false: Tags allowed on each row, but no automatic numbering
        
        // This function *doesn't* work with the "split" environment name.
        
        
        
        
        
        function getAutoTag(name) {
        
          if (name.indexOf("ed") === -1) {
        
            return name.indexOf("*") === -1;
        
          } // return undefined;
        
        
        
        }
        
        /**
        
         * Parse the body of the environment, with rows delimited by \\ and
        
         * columns delimited by &, and create a nested list in row-major order
        
         * with one group per cell.  If given an optional argument style
        
         * ("text", "display", etc.), then each cell is cast into that style.
        
         */
        
        
        
        
        
        function parseArray(parser, _ref, style) {
        
          var {
        
            hskipBeforeAndAfter,
        
            addJot,
        
            cols,
        
            arraystretch,
        
            colSeparationType,
        
            autoTag,
        
            singleRow,
        
            emptySingleRow,
        
            maxNumCols,
        
            leqno
        
          } = _ref;
        
          parser.gullet.beginGroup();
        
        
        
          if (!singleRow) {
        
            // \cr is equivalent to \\ without the optional size argument (see below)
        
            // TODO: provide helpful error when \cr is used outside array environment
        
            parser.gullet.macros.set("\\cr", "\\\\\\relax");
        
          } // Get current arraystretch if it's not set by the environment
        
        
        
        
        
          if (!arraystretch) {
        
            var stretch = parser.gullet.expandMacroAsText("\\arraystretch");
        
        
        
            if (stretch == null) {
        
              // Default \arraystretch from lttab.dtx
        
              arraystretch = 1;
        
            } else {
        
              arraystretch = parseFloat(stretch);
        
        
        
              if (!arraystretch || arraystretch < 0) {
        
                throw new ParseError("Invalid \\arraystretch: " + stretch);
        
              }
        
            }
        
          } // Start group for first cell
        
        
        
        
        
          parser.gullet.beginGroup();
        
          var row = [];
        
          var body = [row];
        
          var rowGaps = [];
        
          var hLinesBeforeRow = [];
        
          var tags = autoTag != null ? [] : undefined; // amsmath uses \global\@eqnswtrue and \global\@eqnswfalse to represent
        
          // whether this row should have an equation number.  Simulate this with
        
          // a \@eqnsw macro set to 1 or 0.
        
        
        
          function beginRow() {
        
            if (autoTag) {
        
              parser.gullet.macros.set("\\@eqnsw", "1", true);
        
            }
        
          }
        
        
        
          function endRow() {
        
            if (tags) {
        
              if (parser.gullet.macros.get("\\df@tag")) {
        
                tags.push(parser.subparse([new Token("\\df@tag")]));
        
                parser.gullet.macros.set("\\df@tag", undefined, true);
        
              } else {
        
                tags.push(Boolean(autoTag) && parser.gullet.macros.get("\\@eqnsw") === "1");
        
              }
        
            }
        
          }
        
        
        
          beginRow(); // Test for \hline at the top of the array.
        
        
        
          hLinesBeforeRow.push(getHLines(parser));
        
        
        
          while (true) {
        
            // eslint-disable-line no-constant-condition
        
            // Parse each cell in its own group (namespace)
        
            var cell = parser.parseExpression(false, singleRow ? "\\end" : "\\\\");
        
            parser.gullet.endGroup();
        
            parser.gullet.beginGroup();
        
            cell = {
        
              type: "ordgroup",
        
              mode: parser.mode,
        
              body: cell
        
            };
        
        
        
            if (style) {
        
              cell = {
        
                type: "styling",
        
                mode: parser.mode,
        
                style,
        
                body: [cell]
        
              };
        
            }
        
        
        
            row.push(cell);
        
            var next = parser.fetch().text;
        
        
        
            if (next === "&") {
        
              if (maxNumCols && row.length === maxNumCols) {
        
                if (singleRow || colSeparationType) {
        
                  // {equation} or {split}
        
                  throw new ParseError("Too many tab characters: &", parser.nextToken);
        
                } else {
        
                  // {array} environment
        
                  parser.settings.reportNonstrict("textEnv", "Too few columns " + "specified in the {array} column argument.");
        
                }
        
              }
        
        
        
              parser.consume();
        
            } else if (next === "\\end") {
        
              endRow(); // Arrays terminate newlines with `\crcr` which consumes a `\cr` if
        
              // the last line is empty.  However, AMS environments keep the
        
              // empty row if it's the only one.
        
              // NOTE: Currently, `cell` is the last item added into `row`.
        
        
        
              if (row.length === 1 && cell.type === "styling" && cell.body[0].body.length === 0 && (body.length > 1 || !emptySingleRow)) {
        
                body.pop();
        
              }
        
        
        
              if (hLinesBeforeRow.length < body.length + 1) {
        
                hLinesBeforeRow.push([]);
        
              }
        
        
        
              break;
        
            } else if (next === "\\\\") {
        
              parser.consume();
        
              var size = void 0; // \def\Let@{\let\\\math@cr}
        
              // \def\math@cr{...\math@cr@}
        
              // \def\math@cr@{\new@ifnextchar[\math@cr@@{\math@cr@@[\z@]}}
        
              // \def\math@cr@@[#1]{...\math@cr@@@...}
        
              // \def\math@cr@@@{\cr}
        
        
        
              if (parser.gullet.future().text !== " ") {
        
                size = parser.parseSizeGroup(true);
        
              }
        
        
        
              rowGaps.push(size ? size.value : null);
        
              endRow(); // check for \hline(s) following the row separator
        
        
        
              hLinesBeforeRow.push(getHLines(parser));
        
              row = [];
        
              body.push(row);
        
              beginRow();
        
            } else {
        
              throw new ParseError("Expected & or \\\\ or \\cr or \\end", parser.nextToken);
        
            }
        
          } // End cell group
        
        
        
        
        
          parser.gullet.endGroup(); // End array group defining \cr
        
        
        
          parser.gullet.endGroup();
        
          return {
        
            type: "array",
        
            mode: parser.mode,
        
            addJot,
        
            arraystretch,
        
            body,
        
            cols,
        
            rowGaps,
        
            hskipBeforeAndAfter,
        
            hLinesBeforeRow,
        
            colSeparationType,
        
            tags,
        
            leqno
        
          };
        
        } // Decides on a style for cells in an array according to whether the given
        
        // environment name starts with the letter 'd'.
        
        
        
        
        
        function dCellStyle(envName) {
        
          if (envName.slice(0, 1) === "d") {
        
            return "display";
        
          } else {
        
            return "text";
        
          }
        
        }
        
        
        
        var htmlBuilder$6 = function htmlBuilder(group, options) {
        
          var r;
        
          var c;
        
          var nr = group.body.length;
        
          var hLinesBeforeRow = group.hLinesBeforeRow;
        
          var nc = 0;
        
          var body = new Array(nr);
        
          var hlines = [];
        
          var ruleThickness = Math.max( // From LaTeX \showthe\arrayrulewidth. Equals 0.04 em.
        
          options.fontMetrics().arrayRuleWidth, options.minRuleThickness // User override.
        
          ); // Horizontal spacing
        
        
        
          var pt = 1 / options.fontMetrics().ptPerEm;
        
          var arraycolsep = 5 * pt; // default value, i.e. \arraycolsep in article.cls
        
        
        
          if (group.colSeparationType && group.colSeparationType === "small") {
        
            // We're in a {smallmatrix}. Default column space is \thickspace,
        
            // i.e. 5/18em = 0.2778em, per amsmath.dtx for {smallmatrix}.
        
            // But that needs adjustment because LaTeX applies \scriptstyle to the
        
            // entire array, including the colspace, but this function applies
        
            // \scriptstyle only inside each element.
        
            var localMultiplier = options.havingStyle(Style$1.SCRIPT).sizeMultiplier;
        
            arraycolsep = 0.2778 * (localMultiplier / options.sizeMultiplier);
        
          } // Vertical spacing
        
        
        
        
        
          var baselineskip = group.colSeparationType === "CD" ? calculateSize({
        
            number: 3,
        
            unit: "ex"
        
          }, options) : 12 * pt; // see size10.clo
        
          // Default \jot from ltmath.dtx
        
          // TODO(edemaine): allow overriding \jot via \setlength (#687)
        
        
        
          var jot = 3 * pt;
        
          var arrayskip = group.arraystretch * baselineskip;
        
          var arstrutHeight = 0.7 * arrayskip; // \strutbox in ltfsstrc.dtx and
        
        
        
          var arstrutDepth = 0.3 * arrayskip; // \@arstrutbox in lttab.dtx
        
        
        
          var totalHeight = 0; // Set a position for \hline(s) at the top of the array, if any.
        
        
        
          function setHLinePos(hlinesInGap) {
        
            for (var i = 0; i < hlinesInGap.length; ++i) {
        
              if (i > 0) {
        
                totalHeight += 0.25;
        
              }
        
        
        
              hlines.push({
        
                pos: totalHeight,
        
                isDashed: hlinesInGap[i]
        
              });
        
            }
        
          }
        
        
        
          setHLinePos(hLinesBeforeRow[0]);
        
        
        
          for (r = 0; r < group.body.length; ++r) {
        
            var inrow = group.body[r];
        
            var height = arstrutHeight; // \@array adds an \@arstrut
        
        
        
            var depth = arstrutDepth; // to each tow (via the template)
        
        
        
            if (nc < inrow.length) {
        
              nc = inrow.length;
        
            }
        
        
        
            var outrow = new Array(inrow.length);
        
        
        
            for (c = 0; c < inrow.length; ++c) {
        
              var elt = buildGroup$1(inrow[c], options);
        
        
        
              if (depth < elt.depth) {
        
                depth = elt.depth;
        
              }
        
        
        
              if (height < elt.height) {
        
                height = elt.height;
        
              }
        
        
        
              outrow[c] = elt;
        
            }
        
        
        
            var rowGap = group.rowGaps[r];
        
            var gap = 0;
        
        
        
            if (rowGap) {
        
              gap = calculateSize(rowGap, options);
        
        
        
              if (gap > 0) {
        
                // \@argarraycr
        
                gap += arstrutDepth;
        
        
        
                if (depth < gap) {
        
                  depth = gap; // \@xargarraycr
        
                }
        
        
        
                gap = 0;
        
              }
        
            } // In AMS multiline environments such as aligned and gathered, rows
        
            // correspond to lines that have additional \jot added to the
        
            // \baselineskip via \openup.
        
        
        
        
        
            if (group.addJot) {
        
              depth += jot;
        
            }
        
        
        
            outrow.height = height;
        
            outrow.depth = depth;
        
            totalHeight += height;
        
            outrow.pos = totalHeight;
        
            totalHeight += depth + gap; // \@yargarraycr
        
        
        
            body[r] = outrow; // Set a position for \hline(s), if any.
        
        
        
            setHLinePos(hLinesBeforeRow[r + 1]);
        
          }
        
        
        
          var offset = totalHeight / 2 + options.fontMetrics().axisHeight;
        
          var colDescriptions = group.cols || [];
        
          var cols = [];
        
          var colSep;
        
          var colDescrNum;
        
          var tagSpans = [];
        
        
        
          if (group.tags && group.tags.some(tag => tag)) {
        
            // An environment with manual tags and/or automatic equation numbers.
        
            // Create node(s), the latter of which trigger CSS counter increment.
        
            for (r = 0; r < nr; ++r) {
        
              var rw = body[r];
        
              var shift = rw.pos - offset;
        
              var tag = group.tags[r];
        
              var tagSpan = void 0;
        
        
        
              if (tag === true) {
        
                // automatic numbering
        
                tagSpan = buildCommon.makeSpan(["eqn-num"], [], options);
        
              } else if (tag === false) {
        
                // \nonumber/\notag or starred environment
        
                tagSpan = buildCommon.makeSpan([], [], options);
        
              } else {
        
                // manual \tag
        
                tagSpan = buildCommon.makeSpan([], buildExpression$1(tag, options, true), options);
        
              }
        
        
        
              tagSpan.depth = rw.depth;
        
              tagSpan.height = rw.height;
        
              tagSpans.push({
        
                type: "elem",
        
                elem: tagSpan,
        
                shift
        
              });
        
            }
        
          }
        
        
        
          for (c = 0, colDescrNum = 0; // Continue while either there are more columns or more column
        
          // descriptions, so trailing separators don't get lost.
        
          c < nc || colDescrNum < colDescriptions.length; ++c, ++colDescrNum) {
        
            var colDescr = colDescriptions[colDescrNum] || {};
        
            var firstSeparator = true;
        
        
        
            while (colDescr.type === "separator") {
        
              // If there is more than one separator in a row, add a space
        
              // between them.
        
              if (!firstSeparator) {
        
                colSep = buildCommon.makeSpan(["arraycolsep"], []);
        
                colSep.style.width = makeEm(options.fontMetrics().doubleRuleSep);
        
                cols.push(colSep);
        
              }
        
        
        
              if (colDescr.separator === "|" || colDescr.separator === ":") {
        
                var lineType = colDescr.separator === "|" ? "solid" : "dashed";
        
                var separator = buildCommon.makeSpan(["vertical-separator"], [], options);
        
                separator.style.height = makeEm(totalHeight);
        
                separator.style.borderRightWidth = makeEm(ruleThickness);
        
                separator.style.borderRightStyle = lineType;
        
                separator.style.margin = "0 " + makeEm(-ruleThickness / 2);
        
        
        
                var _shift = totalHeight - offset;
        
        
        
                if (_shift) {
        
                  separator.style.verticalAlign = makeEm(-_shift);
        
                }
        
        
        
                cols.push(separator);
        
              } else {
        
                throw new ParseError("Invalid separator type: " + colDescr.separator);
        
              }
        
        
        
              colDescrNum++;
        
              colDescr = colDescriptions[colDescrNum] || {};
        
              firstSeparator = false;
        
            }
        
        
        
            if (c >= nc) {
        
              continue;
        
            }
        
        
        
            var sepwidth = void 0;
        
        
        
            if (c > 0 || group.hskipBeforeAndAfter) {
        
              sepwidth = utils.deflt(colDescr.pregap, arraycolsep);
        
        
        
              if (sepwidth !== 0) {
        
                colSep = buildCommon.makeSpan(["arraycolsep"], []);
        
                colSep.style.width = makeEm(sepwidth);
        
                cols.push(colSep);
        
              }
        
            }
        
        
        
            var col = [];
        
        
        
            for (r = 0; r < nr; ++r) {
        
              var row = body[r];
        
              var elem = row[c];
        
        
        
              if (!elem) {
        
                continue;
        
              }
        
        
        
              var _shift2 = row.pos - offset;
        
        
        
              elem.depth = row.depth;
        
              elem.height = row.height;
        
              col.push({
        
                type: "elem",
        
                elem: elem,
        
                shift: _shift2
        
              });
        
            }
        
        
        
            col = buildCommon.makeVList({
        
              positionType: "individualShift",
        
              children: col
        
            }, options);
        
            col = buildCommon.makeSpan(["col-align-" + (colDescr.align || "c")], [col]);
        
            cols.push(col);
        
        
        
            if (c < nc - 1 || group.hskipBeforeAndAfter) {
        
              sepwidth = utils.deflt(colDescr.postgap, arraycolsep);
        
        
        
              if (sepwidth !== 0) {
        
                colSep = buildCommon.makeSpan(["arraycolsep"], []);
        
                colSep.style.width = makeEm(sepwidth);
        
                cols.push(colSep);
        
              }
        
            }
        
          }
        
        
        
          body = buildCommon.makeSpan(["mtable"], cols); // Add \hline(s), if any.
        
        
        
          if (hlines.length > 0) {
        
            var line = buildCommon.makeLineSpan("hline", options, ruleThickness);
        
            var dashes = buildCommon.makeLineSpan("hdashline", options, ruleThickness);
        
            var vListElems = [{
        
              type: "elem",
        
              elem: body,
        
              shift: 0
        
            }];
        
        
        
            while (hlines.length > 0) {
        
              var hline = hlines.pop();
        
              var lineShift = hline.pos - offset;
        
        
        
              if (hline.isDashed) {
        
                vListElems.push({
        
                  type: "elem",
        
                  elem: dashes,
        
                  shift: lineShift
        
                });
        
              } else {
        
                vListElems.push({
        
                  type: "elem",
        
                  elem: line,
        
                  shift: lineShift
        
                });
        
              }
        
            }
        
        
        
            body = buildCommon.makeVList({
        
              positionType: "individualShift",
        
              children: vListElems
        
            }, options);
        
          }
        
        
        
          if (tagSpans.length === 0) {
        
            return buildCommon.makeSpan(["mord"], [body], options);
        
          } else {
        
            var eqnNumCol = buildCommon.makeVList({
        
              positionType: "individualShift",
        
              children: tagSpans
        
            }, options);
        
            eqnNumCol = buildCommon.makeSpan(["tag"], [eqnNumCol], options);
        
            return buildCommon.makeFragment([body, eqnNumCol]);
        
          }
        
        };
        
        
        
        var alignMap = {
        
          c: "center ",
        
          l: "left ",
        
          r: "right "
        
        };
        
        
        
        var mathmlBuilder$5 = function mathmlBuilder(group, options) {
        
          var tbl = [];
        
          var glue = new mathMLTree.MathNode("mtd", [], ["mtr-glue"]);
        
          var tag = new mathMLTree.MathNode("mtd", [], ["mml-eqn-num"]);
        
        
        
          for (var i = 0; i < group.body.length; i++) {
        
            var rw = group.body[i];
        
            var row = [];
        
        
        
            for (var j = 0; j < rw.length; j++) {
        
              row.push(new mathMLTree.MathNode("mtd", [buildGroup(rw[j], options)]));
        
            }
        
        
        
            if (group.tags && group.tags[i]) {
        
              row.unshift(glue);
        
              row.push(glue);
        
        
        
              if (group.leqno) {
        
                row.unshift(tag);
        
              } else {
        
                row.push(tag);
        
              }
        
            }
        
        
        
            tbl.push(new mathMLTree.MathNode("mtr", row));
        
          }
        
        
        
          var table = new mathMLTree.MathNode("mtable", tbl); // Set column alignment, row spacing, column spacing, and
        
          // array lines by setting attributes on the table element.
        
          // Set the row spacing. In MathML, we specify a gap distance.
        
          // We do not use rowGap[] because MathML automatically increases
        
          // cell height with the height/depth of the element content.
        
          // LaTeX \arraystretch multiplies the row baseline-to-baseline distance.
        
          // We simulate this by adding (arraystretch - 1)em to the gap. This
        
          // does a reasonable job of adjusting arrays containing 1 em tall content.
        
          // The 0.16 and 0.09 values are found empirically. They produce an array
        
          // similar to LaTeX and in which content does not interfere with \hlines.
        
        
        
          var gap = group.arraystretch === 0.5 ? 0.1 // {smallmatrix}, {subarray}
        
          : 0.16 + group.arraystretch - 1 + (group.addJot ? 0.09 : 0);
        
          table.setAttribute("rowspacing", makeEm(gap)); // MathML table lines go only between cells.
        
          // To place a line on an edge we'll use <menclose>, if necessary.
        
        
        
          var menclose = "";
        
          var align = "";
        
        
        
          if (group.cols && group.cols.length > 0) {
        
            // Find column alignment, column spacing, and  vertical lines.
        
            var cols = group.cols;
        
            var columnLines = "";
        
            var prevTypeWasAlign = false;
        
            var iStart = 0;
        
            var iEnd = cols.length;
        
        
        
            if (cols[0].type === "separator") {
        
              menclose += "top ";
        
              iStart = 1;
        
            }
        
        
        
            if (cols[cols.length - 1].type === "separator") {
        
              menclose += "bottom ";
        
              iEnd -= 1;
        
            }
        
        
        
            for (var _i = iStart; _i < iEnd; _i++) {
        
              if (cols[_i].type === "align") {
        
                align += alignMap[cols[_i].align];
        
        
        
                if (prevTypeWasAlign) {
        
                  columnLines += "none ";
        
                }
        
        
        
                prevTypeWasAlign = true;
        
              } else if (cols[_i].type === "separator") {
        
                // MathML accepts only single lines between cells.
        
                // So we read only the first of consecutive separators.
        
                if (prevTypeWasAlign) {
        
                  columnLines += cols[_i].separator === "|" ? "solid " : "dashed ";
        
                  prevTypeWasAlign = false;
        
                }
        
              }
        
            }
        
        
        
            table.setAttribute("columnalign", align.trim());
        
        
        
            if (/[sd]/.test(columnLines)) {
        
              table.setAttribute("columnlines", columnLines.trim());
        
            }
        
          } // Set column spacing.
        
        
        
        
        
          if (group.colSeparationType === "align") {
        
            var _cols = group.cols || [];
        
        
        
            var spacing = "";
        
        
        
            for (var _i2 = 1; _i2 < _cols.length; _i2++) {
        
              spacing += _i2 % 2 ? "0em " : "1em ";
        
            }
        
        
        
            table.setAttribute("columnspacing", spacing.trim());
        
          } else if (group.colSeparationType === "alignat" || group.colSeparationType === "gather") {
        
            table.setAttribute("columnspacing", "0em");
        
          } else if (group.colSeparationType === "small") {
        
            table.setAttribute("columnspacing", "0.2778em");
        
          } else if (group.colSeparationType === "CD") {
        
            table.setAttribute("columnspacing", "0.5em");
        
          } else {
        
            table.setAttribute("columnspacing", "1em");
        
          } // Address \hline and \hdashline
        
        
        
        
        
          var rowLines = "";
        
          var hlines = group.hLinesBeforeRow;
        
          menclose += hlines[0].length > 0 ? "left " : "";
        
          menclose += hlines[hlines.length - 1].length > 0 ? "right " : "";
        
        
        
          for (var _i3 = 1; _i3 < hlines.length - 1; _i3++) {
        
            rowLines += hlines[_i3].length === 0 ? "none " // MathML accepts only a single line between rows. Read one element.
        
            : hlines[_i3][0] ? "dashed " : "solid ";
        
          }
        
        
        
          if (/[sd]/.test(rowLines)) {
        
            table.setAttribute("rowlines", rowLines.trim());
        
          }
        
        
        
          if (menclose !== "") {
        
            table = new mathMLTree.MathNode("menclose", [table]);
        
            table.setAttribute("notation", menclose.trim());
        
          }
        
        
        
          if (group.arraystretch && group.arraystretch < 1) {
        
            // A small array. Wrap in scriptstyle so row gap is not too large.
        
            table = new mathMLTree.MathNode("mstyle", [table]);
        
            table.setAttribute("scriptlevel", "1");
        
          }
        
        
        
          return table;
        
        }; // Convenience function for align, align*, aligned, alignat, alignat*, alignedat.
        
        
        
        
        
        var alignedHandler = function alignedHandler(context, args) {
        
          if (context.envName.indexOf("ed") === -1) {
        
            validateAmsEnvironmentContext(context);
        
          }
        
        
        
          var cols = [];
        
          var separationType = context.envName.indexOf("at") > -1 ? "alignat" : "align";
        
          var isSplit = context.envName === "split";
        
          var res = parseArray(context.parser, {
        
            cols,
        
            addJot: true,
        
            autoTag: isSplit ? undefined : getAutoTag(context.envName),
        
            emptySingleRow: true,
        
            colSeparationType: separationType,
        
            maxNumCols: isSplit ? 2 : undefined,
        
            leqno: context.parser.settings.leqno
        
          }, "display"); // Determining number of columns.
        
          // 1. If the first argument is given, we use it as a number of columns,
        
          //    and makes sure that each row doesn't exceed that number.
        
          // 2. Otherwise, just count number of columns = maximum number
        
          //    of cells in each row ("aligned" mode -- isAligned will be true).
        
          //
        
          // At the same time, prepend empty group {} at beginning of every second
        
          // cell in each row (starting with second cell) so that operators become
        
          // binary.  This behavior is implemented in amsmath's \start@aligned.
        
        
        
          var numMaths;
        
          var numCols = 0;
        
          var emptyGroup = {
        
            type: "ordgroup",
        
            mode: context.mode,
        
            body: []
        
          };
        
        
        
          if (args[0] && args[0].type === "ordgroup") {
        
            var arg0 = "";
        
        
        
            for (var i = 0; i < args[0].body.length; i++) {
        
              var textord = assertNodeType(args[0].body[i], "textord");
        
              arg0 += textord.text;
        
            }
        
        
        
            numMaths = Number(arg0);
        
            numCols = numMaths * 2;
        
          }
        
        
        
          var isAligned = !numCols;
        
          res.body.forEach(function (row) {
        
            for (var _i4 = 1; _i4 < row.length; _i4 += 2) {
        
              // Modify ordgroup node within styling node
        
              var styling = assertNodeType(row[_i4], "styling");
        
              var ordgroup = assertNodeType(styling.body[0], "ordgroup");
        
              ordgroup.body.unshift(emptyGroup);
        
            }
        
        
        
            if (!isAligned) {
        
              // Case 1
        
              var curMaths = row.length / 2;
        
        
        
              if (numMaths < curMaths) {
        
                throw new ParseError("Too many math in a row: " + ("expected " + numMaths + ", but got " + curMaths), row[0]);
        
              }
        
            } else if (numCols < row.length) {
        
              // Case 2
        
              numCols = row.length;
        
            }
        
          }); // Adjusting alignment.
        
          // In aligned mode, we add one \qquad between columns;
        
          // otherwise we add nothing.
        
        
        
          for (var _i5 = 0; _i5 < numCols; ++_i5) {
        
            var align = "r";
        
            var pregap = 0;
        
        
        
            if (_i5 % 2 === 1) {
        
              align = "l";
        
            } else if (_i5 > 0 && isAligned) {
        
              // "aligned" mode.
        
              pregap = 1; // add one \quad
        
            }
        
        
        
            cols[_i5] = {
        
              type: "align",
        
              align: align,
        
              pregap: pregap,
        
              postgap: 0
        
            };
        
          }
        
        
        
          res.colSeparationType = isAligned ? "align" : "alignat";
        
          return res;
        
        }; // Arrays are part of LaTeX, defined in lttab.dtx so its documentation
        
        // is part of the source2e.pdf file of LaTeX2e source documentation.
        
        // {darray} is an {array} environment where cells are set in \displaystyle,
        
        // as defined in nccmath.sty.
        
        
        
        
        
        defineEnvironment({
        
          type: "array",
        
          names: ["array", "darray"],
        
          props: {
        
            numArgs: 1
        
          },
        
        
        
          handler(context, args) {
        
            // Since no types are specified above, the two possibilities are
        
            // - The argument is wrapped in {} or [], in which case Parser's
        
            //   parseGroup() returns an "ordgroup" wrapping some symbol node.
        
            // - The argument is a bare symbol node.
        
            var symNode = checkSymbolNodeType(args[0]);
        
            var colalign = symNode ? [args[0]] : assertNodeType(args[0], "ordgroup").body;
        
            var cols = colalign.map(function (nde) {
        
              var node = assertSymbolNodeType(nde);
        
              var ca = node.text;
        
        
        
              if ("lcr".indexOf(ca) !== -1) {
        
                return {
        
                  type: "align",
        
                  align: ca
        
                };
        
              } else if (ca === "|") {
        
                return {
        
                  type: "separator",
        
                  separator: "|"
        
                };
        
              } else if (ca === ":") {
        
                return {
        
                  type: "separator",
        
                  separator: ":"
        
                };
        
              }
        
        
        
              throw new ParseError("Unknown column alignment: " + ca, nde);
        
            });
        
            var res = {
        
              cols,
        
              hskipBeforeAndAfter: true,
        
              // \@preamble in lttab.dtx
        
              maxNumCols: cols.length
        
            };
        
            return parseArray(context.parser, res, dCellStyle(context.envName));
        
          },
        
        
        
          htmlBuilder: htmlBuilder$6,
        
          mathmlBuilder: mathmlBuilder$5
        
        }); // The matrix environments of amsmath builds on the array environment
        
        // of LaTeX, which is discussed above.
        
        // The mathtools package adds starred versions of the same environments.
        
        // These have an optional argument to choose left|center|right justification.
        
        
        
        defineEnvironment({
        
          type: "array",
        
          names: ["matrix", "pmatrix", "bmatrix", "Bmatrix", "vmatrix", "Vmatrix", "matrix*", "pmatrix*", "bmatrix*", "Bmatrix*", "vmatrix*", "Vmatrix*"],
        
          props: {
        
            numArgs: 0
        
          },
        
        
        
          handler(context) {
        
            var delimiters = {
        
              "matrix": null,
        
              "pmatrix": ["(", ")"],
        
              "bmatrix": ["[", "]"],
        
              "Bmatrix": ["\\{", "\\}"],
        
              "vmatrix": ["|", "|"],
        
              "Vmatrix": ["\\Vert", "\\Vert"]
        
            }[context.envName.replace("*", "")]; // \hskip -\arraycolsep in amsmath
        
        
        
            var colAlign = "c";
        
            var payload = {
        
              hskipBeforeAndAfter: false,
        
              cols: [{
        
                type: "align",
        
                align: colAlign
        
              }]
        
            };
        
        
        
            if (context.envName.charAt(context.envName.length - 1) === "*") {
        
              // It's one of the mathtools starred functions.
        
              // Parse the optional alignment argument.
        
              var parser = context.parser;
        
              parser.consumeSpaces();
        
        
        
              if (parser.fetch().text === "[") {
        
                parser.consume();
        
                parser.consumeSpaces();
        
                colAlign = parser.fetch().text;
        
        
        
                if ("lcr".indexOf(colAlign) === -1) {
        
                  throw new ParseError("Expected l or c or r", parser.nextToken);
        
                }
        
        
        
                parser.consume();
        
                parser.consumeSpaces();
        
                parser.expect("]");
        
                parser.consume();
        
                payload.cols = [{
        
                  type: "align",
        
                  align: colAlign
        
                }];
        
              }
        
            }
        
        
        
            var res = parseArray(context.parser, payload, dCellStyle(context.envName)); // Populate cols with the correct number of column alignment specs.
        
        
        
            var numCols = Math.max(0, ...res.body.map(row => row.length));
        
            res.cols = new Array(numCols).fill({
        
              type: "align",
        
              align: colAlign
        
            });
        
            return delimiters ? {
        
              type: "leftright",
        
              mode: context.mode,
        
              body: [res],
        
              left: delimiters[0],
        
              right: delimiters[1],
        
              rightColor: undefined // \right uninfluenced by \color in array
        
        
        
            } : res;
        
          },
        
        
        
          htmlBuilder: htmlBuilder$6,
        
          mathmlBuilder: mathmlBuilder$5
        
        });
        
        defineEnvironment({
        
          type: "array",
        
          names: ["smallmatrix"],
        
          props: {
        
            numArgs: 0
        
          },
        
        
        
          handler(context) {
        
            var payload = {
        
              arraystretch: 0.5
        
            };
        
            var res = parseArray(context.parser, payload, "script");
        
            res.colSeparationType = "small";
        
            return res;
        
          },
        
        
        
          htmlBuilder: htmlBuilder$6,
        
          mathmlBuilder: mathmlBuilder$5
        
        });
        
        defineEnvironment({
        
          type: "array",
        
          names: ["subarray"],
        
          props: {
        
            numArgs: 1
        
          },
        
        
        
          handler(context, args) {
        
            // Parsing of {subarray} is similar to {array}
        
            var symNode = checkSymbolNodeType(args[0]);
        
            var colalign = symNode ? [args[0]] : assertNodeType(args[0], "ordgroup").body;
        
            var cols = colalign.map(function (nde) {
        
              var node = assertSymbolNodeType(nde);
        
              var ca = node.text; // {subarray} only recognizes "l" & "c"
        
        
        
              if ("lc".indexOf(ca) !== -1) {
        
                return {
        
                  type: "align",
        
                  align: ca
        
                };
        
              }
        
        
        
              throw new ParseError("Unknown column alignment: " + ca, nde);
        
            });
        
        
        
            if (cols.length > 1) {
        
              throw new ParseError("{subarray} can contain only one column");
        
            }
        
        
        
            var res = {
        
              cols,
        
              hskipBeforeAndAfter: false,
        
              arraystretch: 0.5
        
            };
        
            res = parseArray(context.parser, res, "script");
        
        
        
            if (res.body.length > 0 && res.body[0].length > 1) {
        
              throw new ParseError("{subarray} can contain only one column");
        
            }
        
        
        
            return res;
        
          },
        
        
        
          htmlBuilder: htmlBuilder$6,
        
          mathmlBuilder: mathmlBuilder$5
        
        }); // A cases environment (in amsmath.sty) is almost equivalent to
        
        // \def\arraystretch{1.2}%
        
        // \left\{\begin{array}{@{}l@{\quad}l@{}} … \end{array}\right.
        
        // {dcases} is a {cases} environment where cells are set in \displaystyle,
        
        // as defined in mathtools.sty.
        
        // {rcases} is another mathtools environment. It's brace is on the right side.
        
        
        
        defineEnvironment({
        
          type: "array",
        
          names: ["cases", "dcases", "rcases", "drcases"],
        
          props: {
        
            numArgs: 0
        
          },
        
        
        
          handler(context) {
        
            var payload = {
        
              arraystretch: 1.2,
        
              cols: [{
        
                type: "align",
        
                align: "l",
        
                pregap: 0,
        
                // TODO(kevinb) get the current style.
        
                // For now we use the metrics for TEXT style which is what we were
        
                // doing before.  Before attempting to get the current style we
        
                // should look at TeX's behavior especially for \over and matrices.
        
                postgap: 1.0
        
                /* 1em quad */
        
        
        
              }, {
        
                type: "align",
        
                align: "l",
        
                pregap: 0,
        
                postgap: 0
        
              }]
        
            };
        
            var res = parseArray(context.parser, payload, dCellStyle(context.envName));
        
            return {
        
              type: "leftright",
        
              mode: context.mode,
        
              body: [res],
        
              left: context.envName.indexOf("r") > -1 ? "." : "\\{",
        
              right: context.envName.indexOf("r") > -1 ? "\\}" : ".",
        
              rightColor: undefined
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$6,
        
          mathmlBuilder: mathmlBuilder$5
        
        }); // In the align environment, one uses ampersands, &, to specify number of
        
        // columns in each row, and to locate spacing between each column.
        
        // align gets automatic numbering. align* and aligned do not.
        
        // The alignedat environment can be used in math mode.
        
        // Note that we assume \nomallineskiplimit to be zero,
        
        // so that \strut@ is the same as \strut.
        
        
        
        defineEnvironment({
        
          type: "array",
        
          names: ["align", "align*", "aligned", "split"],
        
          props: {
        
            numArgs: 0
        
          },
        
          handler: alignedHandler,
        
          htmlBuilder: htmlBuilder$6,
        
          mathmlBuilder: mathmlBuilder$5
        
        }); // A gathered environment is like an array environment with one centered
        
        // column, but where rows are considered lines so get \jot line spacing
        
        // and contents are set in \displaystyle.
        
        
        
        defineEnvironment({
        
          type: "array",
        
          names: ["gathered", "gather", "gather*"],
        
          props: {
        
            numArgs: 0
        
          },
        
        
        
          handler(context) {
        
            if (utils.contains(["gather", "gather*"], context.envName)) {
        
              validateAmsEnvironmentContext(context);
        
            }
        
        
        
            var res = {
        
              cols: [{
        
                type: "align",
        
                align: "c"
        
              }],
        
              addJot: true,
        
              colSeparationType: "gather",
        
              autoTag: getAutoTag(context.envName),
        
              emptySingleRow: true,
        
              leqno: context.parser.settings.leqno
        
            };
        
            return parseArray(context.parser, res, "display");
        
          },
        
        
        
          htmlBuilder: htmlBuilder$6,
        
          mathmlBuilder: mathmlBuilder$5
        
        }); // alignat environment is like an align environment, but one must explicitly
        
        // specify maximum number of columns in each row, and can adjust spacing between
        
        // each columns.
        
        
        
        defineEnvironment({
        
          type: "array",
        
          names: ["alignat", "alignat*", "alignedat"],
        
          props: {
        
            numArgs: 1
        
          },
        
          handler: alignedHandler,
        
          htmlBuilder: htmlBuilder$6,
        
          mathmlBuilder: mathmlBuilder$5
        
        });
        
        defineEnvironment({
        
          type: "array",
        
          names: ["equation", "equation*"],
        
          props: {
        
            numArgs: 0
        
          },
        
        
        
          handler(context) {
        
            validateAmsEnvironmentContext(context);
        
            var res = {
        
              autoTag: getAutoTag(context.envName),
        
              emptySingleRow: true,
        
              singleRow: true,
        
              maxNumCols: 1,
        
              leqno: context.parser.settings.leqno
        
            };
        
            return parseArray(context.parser, res, "display");
        
          },
        
        
        
          htmlBuilder: htmlBuilder$6,
        
          mathmlBuilder: mathmlBuilder$5
        
        });
        
        defineEnvironment({
        
          type: "array",
        
          names: ["CD"],
        
          props: {
        
            numArgs: 0
        
          },
        
        
        
          handler(context) {
        
            validateAmsEnvironmentContext(context);
        
            return parseCD(context.parser);
        
          },
        
        
        
          htmlBuilder: htmlBuilder$6,
        
          mathmlBuilder: mathmlBuilder$5
        
        });
        
        defineMacro("\\nonumber", "\\gdef\\@eqnsw{0}");
        
        defineMacro("\\notag", "\\nonumber"); // Catch \hline outside array environment
        
        
        
        defineFunction({
        
          type: "text",
        
          // Doesn't matter what this is.
        
          names: ["\\hline", "\\hdashline"],
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true,
        
            allowedInMath: true
        
          },
        
        
        
          handler(context, args) {
        
            throw new ParseError(context.funcName + " valid only within array environment");
        
          }
        
        
        
        });
        
        
        
        var environments = _environments;
        
        
        
        // defineEnvironment definitions.
        
        
        
        defineFunction({
        
          type: "environment",
        
          names: ["\\begin", "\\end"],
        
          props: {
        
            numArgs: 1,
        
            argTypes: ["text"]
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            var nameGroup = args[0];
        
        
        
            if (nameGroup.type !== "ordgroup") {
        
              throw new ParseError("Invalid environment name", nameGroup);
        
            }
        
        
        
            var envName = "";
        
        
        
            for (var i = 0; i < nameGroup.body.length; ++i) {
        
              envName += assertNodeType(nameGroup.body[i], "textord").text;
        
            }
        
        
        
            if (funcName === "\\begin") {
        
              // begin...end is similar to left...right
        
              if (!environments.hasOwnProperty(envName)) {
        
                throw new ParseError("No such environment: " + envName, nameGroup);
        
              } // Build the environment object. Arguments and other information will
        
              // be made available to the begin and end methods using properties.
        
        
        
        
        
              var env = environments[envName];
        
              var {
        
                args: _args,
        
                optArgs
        
              } = parser.parseArguments("\\begin{" + envName + "}", env);
        
              var context = {
        
                mode: parser.mode,
        
                envName,
        
                parser
        
              };
        
              var result = env.handler(context, _args, optArgs);
        
              parser.expect("\\end", false);
        
              var endNameToken = parser.nextToken;
        
              var end = assertNodeType(parser.parseFunction(), "environment");
        
        
        
              if (end.name !== envName) {
        
                throw new ParseError("Mismatch: \\begin{" + envName + "} matched by \\end{" + end.name + "}", endNameToken);
        
              } // $FlowFixMe, "environment" handler returns an environment ParseNode
        
        
        
        
        
              return result;
        
            }
        
        
        
            return {
        
              type: "environment",
        
              mode: parser.mode,
        
              name: envName,
        
              nameGroup
        
            };
        
          }
        
        
        
        });
        
        
        
        // TODO(kevinb): implement \\sl and \\sc
        
        
        
        var htmlBuilder$5 = (group, options) => {
        
          var font = group.font;
        
          var newOptions = options.withFont(font);
        
          return buildGroup$1(group.body, newOptions);
        
        };
        
        
        
        var mathmlBuilder$4 = (group, options) => {
        
          var font = group.font;
        
          var newOptions = options.withFont(font);
        
          return buildGroup(group.body, newOptions);
        
        };
        
        
        
        var fontAliases = {
        
          "\\Bbb": "\\mathbb",
        
          "\\bold": "\\mathbf",
        
          "\\frak": "\\mathfrak",
        
          "\\bm": "\\boldsymbol"
        
        };
        
        defineFunction({
        
          type: "font",
        
          names: [// styles, except \boldsymbol defined below
        
          "\\mathrm", "\\mathit", "\\mathbf", "\\mathnormal", // families
        
          "\\mathbb", "\\mathcal", "\\mathfrak", "\\mathscr", "\\mathsf", "\\mathtt", // aliases, except \bm defined below
        
          "\\Bbb", "\\bold", "\\frak"],
        
          props: {
        
            numArgs: 1,
        
            allowedInArgument: true
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            var body = normalizeArgument(args[0]);
        
            var func = funcName;
        
        
        
            if (func in fontAliases) {
        
              func = fontAliases[func];
        
            }
        
        
        
            return {
        
              type: "font",
        
              mode: parser.mode,
        
              font: func.slice(1),
        
              body
        
            };
        
          },
        
          htmlBuilder: htmlBuilder$5,
        
          mathmlBuilder: mathmlBuilder$4
        
        });
        
        defineFunction({
        
          type: "mclass",
        
          names: ["\\boldsymbol", "\\bm"],
        
          props: {
        
            numArgs: 1
        
          },
        
          handler: (_ref2, args) => {
        
            var {
        
              parser
        
            } = _ref2;
        
            var body = args[0];
        
            var isCharacterBox = utils.isCharacterBox(body); // amsbsy.sty's \boldsymbol uses \binrel spacing to inherit the
        
            // argument's bin|rel|ord status
        
        
        
            return {
        
              type: "mclass",
        
              mode: parser.mode,
        
              mclass: binrelClass(body),
        
              body: [{
        
                type: "font",
        
                mode: parser.mode,
        
                font: "boldsymbol",
        
                body
        
              }],
        
              isCharacterBox: isCharacterBox
        
            };
        
          }
        
        }); // Old font changing functions
        
        
        
        defineFunction({
        
          type: "font",
        
          names: ["\\rm", "\\sf", "\\tt", "\\bf", "\\it", "\\cal"],
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true
        
          },
        
          handler: (_ref3, args) => {
        
            var {
        
              parser,
        
              funcName,
        
              breakOnTokenText
        
            } = _ref3;
        
            var {
        
              mode
        
            } = parser;
        
            var body = parser.parseExpression(true, breakOnTokenText);
        
            var style = "math" + funcName.slice(1);
        
            return {
        
              type: "font",
        
              mode: mode,
        
              font: style,
        
              body: {
        
                type: "ordgroup",
        
                mode: parser.mode,
        
                body
        
              }
        
            };
        
          },
        
          htmlBuilder: htmlBuilder$5,
        
          mathmlBuilder: mathmlBuilder$4
        
        });
        
        
        
        var adjustStyle = (size, originalStyle) => {
        
          // Figure out what style this fraction should be in based on the
        
          // function used
        
          var style = originalStyle;
        
        
        
          if (size === "display") {
        
            // Get display style as a default.
        
            // If incoming style is sub/sup, use style.text() to get correct size.
        
            style = style.id >= Style$1.SCRIPT.id ? style.text() : Style$1.DISPLAY;
        
          } else if (size === "text" && style.size === Style$1.DISPLAY.size) {
        
            // We're in a \tfrac but incoming style is displaystyle, so:
        
            style = Style$1.TEXT;
        
          } else if (size === "script") {
        
            style = Style$1.SCRIPT;
        
          } else if (size === "scriptscript") {
        
            style = Style$1.SCRIPTSCRIPT;
        
          }
        
        
        
          return style;
        
        };
        
        
        
        var htmlBuilder$4 = (group, options) => {
        
          // Fractions are handled in the TeXbook on pages 444-445, rules 15(a-e).
        
          var style = adjustStyle(group.size, options.style);
        
          var nstyle = style.fracNum();
        
          var dstyle = style.fracDen();
        
          var newOptions;
        
          newOptions = options.havingStyle(nstyle);
        
          var numerm = buildGroup$1(group.numer, newOptions, options);
        
        
        
          if (group.continued) {
        
            // \cfrac inserts a \strut into the numerator.
        
            // Get \strut dimensions from TeXbook page 353.
        
            var hStrut = 8.5 / options.fontMetrics().ptPerEm;
        
            var dStrut = 3.5 / options.fontMetrics().ptPerEm;
        
            numerm.height = numerm.height < hStrut ? hStrut : numerm.height;
        
            numerm.depth = numerm.depth < dStrut ? dStrut : numerm.depth;
        
          }
        
        
        
          newOptions = options.havingStyle(dstyle);
        
          var denomm = buildGroup$1(group.denom, newOptions, options);
        
          var rule;
        
          var ruleWidth;
        
          var ruleSpacing;
        
        
        
          if (group.hasBarLine) {
        
            if (group.barSize) {
        
              ruleWidth = calculateSize(group.barSize, options);
        
              rule = buildCommon.makeLineSpan("frac-line", options, ruleWidth);
        
            } else {
        
              rule = buildCommon.makeLineSpan("frac-line", options);
        
            }
        
        
        
            ruleWidth = rule.height;
        
            ruleSpacing = rule.height;
        
          } else {
        
            rule = null;
        
            ruleWidth = 0;
        
            ruleSpacing = options.fontMetrics().defaultRuleThickness;
        
          } // Rule 15b
        
        
        
        
        
          var numShift;
        
          var clearance;
        
          var denomShift;
        
        
        
          if (style.size === Style$1.DISPLAY.size || group.size === "display") {
        
            numShift = options.fontMetrics().num1;
        
        
        
            if (ruleWidth > 0) {
        
              clearance = 3 * ruleSpacing;
        
            } else {
        
              clearance = 7 * ruleSpacing;
        
            }
        
        
        
            denomShift = options.fontMetrics().denom1;
        
          } else {
        
            if (ruleWidth > 0) {
        
              numShift = options.fontMetrics().num2;
        
              clearance = ruleSpacing;
        
            } else {
        
              numShift = options.fontMetrics().num3;
        
              clearance = 3 * ruleSpacing;
        
            }
        
        
        
            denomShift = options.fontMetrics().denom2;
        
          }
        
        
        
          var frac;
        
        
        
          if (!rule) {
        
            // Rule 15c
        
            var candidateClearance = numShift - numerm.depth - (denomm.height - denomShift);
        
        
        
            if (candidateClearance < clearance) {
        
              numShift += 0.5 * (clearance - candidateClearance);
        
              denomShift += 0.5 * (clearance - candidateClearance);
        
            }
        
        
        
            frac = buildCommon.makeVList({
        
              positionType: "individualShift",
        
              children: [{
        
                type: "elem",
        
                elem: denomm,
        
                shift: denomShift
        
              }, {
        
                type: "elem",
        
                elem: numerm,
        
                shift: -numShift
        
              }]
        
            }, options);
        
          } else {
        
            // Rule 15d
        
            var axisHeight = options.fontMetrics().axisHeight;
        
        
        
            if (numShift - numerm.depth - (axisHeight + 0.5 * ruleWidth) < clearance) {
        
              numShift += clearance - (numShift - numerm.depth - (axisHeight + 0.5 * ruleWidth));
        
            }
        
        
        
            if (axisHeight - 0.5 * ruleWidth - (denomm.height - denomShift) < clearance) {
        
              denomShift += clearance - (axisHeight - 0.5 * ruleWidth - (denomm.height - denomShift));
        
            }
        
        
        
            var midShift = -(axisHeight - 0.5 * ruleWidth);
        
            frac = buildCommon.makeVList({
        
              positionType: "individualShift",
        
              children: [{
        
                type: "elem",
        
                elem: denomm,
        
                shift: denomShift
        
              }, {
        
                type: "elem",
        
                elem: rule,
        
                shift: midShift
        
              }, {
        
                type: "elem",
        
                elem: numerm,
        
                shift: -numShift
        
              }]
        
            }, options);
        
          } // Since we manually change the style sometimes (with \dfrac or \tfrac),
        
          // account for the possible size change here.
        
        
        
        
        
          newOptions = options.havingStyle(style);
        
          frac.height *= newOptions.sizeMultiplier / options.sizeMultiplier;
        
          frac.depth *= newOptions.sizeMultiplier / options.sizeMultiplier; // Rule 15e
        
        
        
          var delimSize;
        
        
        
          if (style.size === Style$1.DISPLAY.size) {
        
            delimSize = options.fontMetrics().delim1;
        
          } else if (style.size === Style$1.SCRIPTSCRIPT.size) {
        
            delimSize = options.havingStyle(Style$1.SCRIPT).fontMetrics().delim2;
        
          } else {
        
            delimSize = options.fontMetrics().delim2;
        
          }
        
        
        
          var leftDelim;
        
          var rightDelim;
        
        
        
          if (group.leftDelim == null) {
        
            leftDelim = makeNullDelimiter(options, ["mopen"]);
        
          } else {
        
            leftDelim = delimiter.customSizedDelim(group.leftDelim, delimSize, true, options.havingStyle(style), group.mode, ["mopen"]);
        
          }
        
        
        
          if (group.continued) {
        
            rightDelim = buildCommon.makeSpan([]); // zero width for \cfrac
        
          } else if (group.rightDelim == null) {
        
            rightDelim = makeNullDelimiter(options, ["mclose"]);
        
          } else {
        
            rightDelim = delimiter.customSizedDelim(group.rightDelim, delimSize, true, options.havingStyle(style), group.mode, ["mclose"]);
        
          }
        
        
        
          return buildCommon.makeSpan(["mord"].concat(newOptions.sizingClasses(options)), [leftDelim, buildCommon.makeSpan(["mfrac"], [frac]), rightDelim], options);
        
        };
        
        
        
        var mathmlBuilder$3 = (group, options) => {
        
          var node = new mathMLTree.MathNode("mfrac", [buildGroup(group.numer, options), buildGroup(group.denom, options)]);
        
        
        
          if (!group.hasBarLine) {
        
            node.setAttribute("linethickness", "0px");
        
          } else if (group.barSize) {
        
            var ruleWidth = calculateSize(group.barSize, options);
        
            node.setAttribute("linethickness", makeEm(ruleWidth));
        
          }
        
        
        
          var style = adjustStyle(group.size, options.style);
        
        
        
          if (style.size !== options.style.size) {
        
            node = new mathMLTree.MathNode("mstyle", [node]);
        
            var isDisplay = style.size === Style$1.DISPLAY.size ? "true" : "false";
        
            node.setAttribute("displaystyle", isDisplay);
        
            node.setAttribute("scriptlevel", "0");
        
          }
        
        
        
          if (group.leftDelim != null || group.rightDelim != null) {
        
            var withDelims = [];
        
        
        
            if (group.leftDelim != null) {
        
              var leftOp = new mathMLTree.MathNode("mo", [new mathMLTree.TextNode(group.leftDelim.replace("\\", ""))]);
        
              leftOp.setAttribute("fence", "true");
        
              withDelims.push(leftOp);
        
            }
        
        
        
            withDelims.push(node);
        
        
        
            if (group.rightDelim != null) {
        
              var rightOp = new mathMLTree.MathNode("mo", [new mathMLTree.TextNode(group.rightDelim.replace("\\", ""))]);
        
              rightOp.setAttribute("fence", "true");
        
              withDelims.push(rightOp);
        
            }
        
        
        
            return makeRow(withDelims);
        
          }
        
        
        
          return node;
        
        };
        
        
        
        defineFunction({
        
          type: "genfrac",
        
          names: ["\\dfrac", "\\frac", "\\tfrac", "\\dbinom", "\\binom", "\\tbinom", "\\\\atopfrac", // can’t be entered directly
        
          "\\\\bracefrac", "\\\\brackfrac" // ditto
        
          ],
        
          props: {
        
            numArgs: 2,
        
            allowedInArgument: true
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            var numer = args[0];
        
            var denom = args[1];
        
            var hasBarLine;
        
            var leftDelim = null;
        
            var rightDelim = null;
        
            var size = "auto";
        
        
        
            switch (funcName) {
        
              case "\\dfrac":
        
              case "\\frac":
        
              case "\\tfrac":
        
                hasBarLine = true;
        
                break;
        
        
        
              case "\\\\atopfrac":
        
                hasBarLine = false;
        
                break;
        
        
        
              case "\\dbinom":
        
              case "\\binom":
        
              case "\\tbinom":
        
                hasBarLine = false;
        
                leftDelim = "(";
        
                rightDelim = ")";
        
                break;
        
        
        
              case "\\\\bracefrac":
        
                hasBarLine = false;
        
                leftDelim = "\\{";
        
                rightDelim = "\\}";
        
                break;
        
        
        
              case "\\\\brackfrac":
        
                hasBarLine = false;
        
                leftDelim = "[";
        
                rightDelim = "]";
        
                break;
        
        
        
              default:
        
                throw new Error("Unrecognized genfrac command");
        
            }
        
        
        
            switch (funcName) {
        
              case "\\dfrac":
        
              case "\\dbinom":
        
                size = "display";
        
                break;
        
        
        
              case "\\tfrac":
        
              case "\\tbinom":
        
                size = "text";
        
                break;
        
            }
        
        
        
            return {
        
              type: "genfrac",
        
              mode: parser.mode,
        
              continued: false,
        
              numer,
        
              denom,
        
              hasBarLine,
        
              leftDelim,
        
              rightDelim,
        
              size,
        
              barSize: null
        
            };
        
          },
        
          htmlBuilder: htmlBuilder$4,
        
          mathmlBuilder: mathmlBuilder$3
        
        });
        
        defineFunction({
        
          type: "genfrac",
        
          names: ["\\cfrac"],
        
          props: {
        
            numArgs: 2
        
          },
        
          handler: (_ref2, args) => {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref2;
        
            var numer = args[0];
        
            var denom = args[1];
        
            return {
        
              type: "genfrac",
        
              mode: parser.mode,
        
              continued: true,
        
              numer,
        
              denom,
        
              hasBarLine: true,
        
              leftDelim: null,
        
              rightDelim: null,
        
              size: "display",
        
              barSize: null
        
            };
        
          }
        
        }); // Infix generalized fractions -- these are not rendered directly, but replaced
        
        // immediately by one of the variants above.
        
        
        
        defineFunction({
        
          type: "infix",
        
          names: ["\\over", "\\choose", "\\atop", "\\brace", "\\brack"],
        
          props: {
        
            numArgs: 0,
        
            infix: true
        
          },
        
        
        
          handler(_ref3) {
        
            var {
        
              parser,
        
              funcName,
        
              token
        
            } = _ref3;
        
            var replaceWith;
        
        
        
            switch (funcName) {
        
              case "\\over":
        
                replaceWith = "\\frac";
        
                break;
        
        
        
              case "\\choose":
        
                replaceWith = "\\binom";
        
                break;
        
        
        
              case "\\atop":
        
                replaceWith = "\\\\atopfrac";
        
                break;
        
        
        
              case "\\brace":
        
                replaceWith = "\\\\bracefrac";
        
                break;
        
        
        
              case "\\brack":
        
                replaceWith = "\\\\brackfrac";
        
                break;
        
        
        
              default:
        
                throw new Error("Unrecognized infix genfrac command");
        
            }
        
        
        
            return {
        
              type: "infix",
        
              mode: parser.mode,
        
              replaceWith,
        
              token
        
            };
        
          }
        
        
        
        });
        
        var stylArray = ["display", "text", "script", "scriptscript"];
        
        
        
        var delimFromValue = function delimFromValue(delimString) {
        
          var delim = null;
        
        
        
          if (delimString.length > 0) {
        
            delim = delimString;
        
            delim = delim === "." ? null : delim;
        
          }
        
        
        
          return delim;
        
        };
        
        
        
        defineFunction({
        
          type: "genfrac",
        
          names: ["\\genfrac"],
        
          props: {
        
            numArgs: 6,
        
            allowedInArgument: true,
        
            argTypes: ["math", "math", "size", "text", "math", "math"]
        
          },
        
        
        
          handler(_ref4, args) {
        
            var {
        
              parser
        
            } = _ref4;
        
            var numer = args[4];
        
            var denom = args[5]; // Look into the parse nodes to get the desired delimiters.
        
        
        
            var leftNode = normalizeArgument(args[0]);
        
            var leftDelim = leftNode.type === "atom" && leftNode.family === "open" ? delimFromValue(leftNode.text) : null;
        
            var rightNode = normalizeArgument(args[1]);
        
            var rightDelim = rightNode.type === "atom" && rightNode.family === "close" ? delimFromValue(rightNode.text) : null;
        
            var barNode = assertNodeType(args[2], "size");
        
            var hasBarLine;
        
            var barSize = null;
        
        
        
            if (barNode.isBlank) {
        
              // \genfrac acts differently than \above.
        
              // \genfrac treats an empty size group as a signal to use a
        
              // standard bar size. \above would see size = 0 and omit the bar.
        
              hasBarLine = true;
        
            } else {
        
              barSize = barNode.value;
        
              hasBarLine = barSize.number > 0;
        
            } // Find out if we want displaystyle, textstyle, etc.
        
        
        
        
        
            var size = "auto";
        
            var styl = args[3];
        
        
        
            if (styl.type === "ordgroup") {
        
              if (styl.body.length > 0) {
        
                var textOrd = assertNodeType(styl.body[0], "textord");
        
                size = stylArray[Number(textOrd.text)];
        
              }
        
            } else {
        
              styl = assertNodeType(styl, "textord");
        
              size = stylArray[Number(styl.text)];
        
            }
        
        
        
            return {
        
              type: "genfrac",
        
              mode: parser.mode,
        
              numer,
        
              denom,
        
              continued: false,
        
              hasBarLine,
        
              barSize,
        
              leftDelim,
        
              rightDelim,
        
              size
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$4,
        
          mathmlBuilder: mathmlBuilder$3
        
        }); // \above is an infix fraction that also defines a fraction bar size.
        
        
        
        defineFunction({
        
          type: "infix",
        
          names: ["\\above"],
        
          props: {
        
            numArgs: 1,
        
            argTypes: ["size"],
        
            infix: true
        
          },
        
        
        
          handler(_ref5, args) {
        
            var {
        
              parser,
        
              funcName,
        
              token
        
            } = _ref5;
        
            return {
        
              type: "infix",
        
              mode: parser.mode,
        
              replaceWith: "\\\\abovefrac",
        
              size: assertNodeType(args[0], "size").value,
        
              token
        
            };
        
          }
        
        
        
        });
        
        defineFunction({
        
          type: "genfrac",
        
          names: ["\\\\abovefrac"],
        
          props: {
        
            numArgs: 3,
        
            argTypes: ["math", "size", "math"]
        
          },
        
          handler: (_ref6, args) => {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref6;
        
            var numer = args[0];
        
            var barSize = assert(assertNodeType(args[1], "infix").size);
        
            var denom = args[2];
        
            var hasBarLine = barSize.number > 0;
        
            return {
        
              type: "genfrac",
        
              mode: parser.mode,
        
              numer,
        
              denom,
        
              continued: false,
        
              hasBarLine,
        
              barSize,
        
              leftDelim: null,
        
              rightDelim: null,
        
              size: "auto"
        
            };
        
          },
        
          htmlBuilder: htmlBuilder$4,
        
          mathmlBuilder: mathmlBuilder$3
        
        });
        
        
        
        // NOTE: Unlike most `htmlBuilder`s, this one handles not only "horizBrace", but
        
        // also "supsub" since an over/underbrace can affect super/subscripting.
        
        var htmlBuilder$3 = (grp, options) => {
        
          var style = options.style; // Pull out the `ParseNode<"horizBrace">` if `grp` is a "supsub" node.
        
        
        
          var supSubGroup;
        
          var group;
        
        
        
          if (grp.type === "supsub") {
        
            // Ref: LaTeX source2e: }}}}\limits}
        
            // i.e. LaTeX treats the brace similar to an op and passes it
        
            // with \limits, so we need to assign supsub style.
        
            supSubGroup = grp.sup ? buildGroup$1(grp.sup, options.havingStyle(style.sup()), options) : buildGroup$1(grp.sub, options.havingStyle(style.sub()), options);
        
            group = assertNodeType(grp.base, "horizBrace");
        
          } else {
        
            group = assertNodeType(grp, "horizBrace");
        
          } // Build the base group
        
        
        
        
        
          var body = buildGroup$1(group.base, options.havingBaseStyle(Style$1.DISPLAY)); // Create the stretchy element
        
        
        
          var braceBody = stretchy.svgSpan(group, options); // Generate the vlist, with the appropriate kerns        ┏━━━━━━━━┓
        
          // This first vlist contains the content and the brace:   equation
        
        
        
          var vlist;
        
        
        
          if (group.isOver) {
        
            vlist = buildCommon.makeVList({
        
              positionType: "firstBaseline",
        
              children: [{
        
                type: "elem",
        
                elem: body
        
              }, {
        
                type: "kern",
        
                size: 0.1
        
              }, {
        
                type: "elem",
        
                elem: braceBody
        
              }]
        
            }, options); // $FlowFixMe: Replace this with passing "svg-align" into makeVList.
        
        
        
            vlist.children[0].children[0].children[1].classes.push("svg-align");
        
          } else {
        
            vlist = buildCommon.makeVList({
        
              positionType: "bottom",
        
              positionData: body.depth + 0.1 + braceBody.height,
        
              children: [{
        
                type: "elem",
        
                elem: braceBody
        
              }, {
        
                type: "kern",
        
                size: 0.1
        
              }, {
        
                type: "elem",
        
                elem: body
        
              }]
        
            }, options); // $FlowFixMe: Replace this with passing "svg-align" into makeVList.
        
        
        
            vlist.children[0].children[0].children[0].classes.push("svg-align");
        
          }
        
        
        
          if (supSubGroup) {
        
            // To write the supsub, wrap the first vlist in another vlist:
        
            // They can't all go in the same vlist, because the note might be
        
            // wider than the equation. We want the equation to control the
        
            // brace width.
        
            //      note          long note           long note
        
            //   ┏━━━━━━━━┓   or    ┏━━━┓     not    ┏━━━━━━━━━┓
        
            //    equation           eqn                 eqn
        
            var vSpan = buildCommon.makeSpan(["mord", group.isOver ? "mover" : "munder"], [vlist], options);
        
        
        
            if (group.isOver) {
        
              vlist = buildCommon.makeVList({
        
                positionType: "firstBaseline",
        
                children: [{
        
                  type: "elem",
        
                  elem: vSpan
        
                }, {
        
                  type: "kern",
        
                  size: 0.2
        
                }, {
        
                  type: "elem",
        
                  elem: supSubGroup
        
                }]
        
              }, options);
        
            } else {
        
              vlist = buildCommon.makeVList({
        
                positionType: "bottom",
        
                positionData: vSpan.depth + 0.2 + supSubGroup.height + supSubGroup.depth,
        
                children: [{
        
                  type: "elem",
        
                  elem: supSubGroup
        
                }, {
        
                  type: "kern",
        
                  size: 0.2
        
                }, {
        
                  type: "elem",
        
                  elem: vSpan
        
                }]
        
              }, options);
        
            }
        
          }
        
        
        
          return buildCommon.makeSpan(["mord", group.isOver ? "mover" : "munder"], [vlist], options);
        
        };
        
        
        
        var mathmlBuilder$2 = (group, options) => {
        
          var accentNode = stretchy.mathMLnode(group.label);
        
          return new mathMLTree.MathNode(group.isOver ? "mover" : "munder", [buildGroup(group.base, options), accentNode]);
        
        }; // Horizontal stretchy braces
        
        
        
        
        
        defineFunction({
        
          type: "horizBrace",
        
          names: ["\\overbrace", "\\underbrace"],
        
          props: {
        
            numArgs: 1
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            return {
        
              type: "horizBrace",
        
              mode: parser.mode,
        
              label: funcName,
        
              isOver: /^\\over/.test(funcName),
        
              base: args[0]
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$3,
        
          mathmlBuilder: mathmlBuilder$2
        
        });
        
        
        
        defineFunction({
        
          type: "href",
        
          names: ["\\href"],
        
          props: {
        
            numArgs: 2,
        
            argTypes: ["url", "original"],
        
            allowedInText: true
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              parser
        
            } = _ref;
        
            var body = args[1];
        
            var href = assertNodeType(args[0], "url").url;
        
        
        
            if (!parser.settings.isTrusted({
        
              command: "\\href",
        
              url: href
        
            })) {
        
              return parser.formatUnsupportedCmd("\\href");
        
            }
        
        
        
            return {
        
              type: "href",
        
              mode: parser.mode,
        
              href,
        
              body: ordargument(body)
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            var elements = buildExpression$1(group.body, options, false);
        
            return buildCommon.makeAnchor(group.href, [], elements, options);
        
          },
        
          mathmlBuilder: (group, options) => {
        
            var math = buildExpressionRow(group.body, options);
        
        
        
            if (!(math instanceof MathNode)) {
        
              math = new MathNode("mrow", [math]);
        
            }
        
        
        
            math.setAttribute("href", group.href);
        
            return math;
        
          }
        
        });
        
        defineFunction({
        
          type: "href",
        
          names: ["\\url"],
        
          props: {
        
            numArgs: 1,
        
            argTypes: ["url"],
        
            allowedInText: true
        
          },
        
          handler: (_ref2, args) => {
        
            var {
        
              parser
        
            } = _ref2;
        
            var href = assertNodeType(args[0], "url").url;
        
        
        
            if (!parser.settings.isTrusted({
        
              command: "\\url",
        
              url: href
        
            })) {
        
              return parser.formatUnsupportedCmd("\\url");
        
            }
        
        
        
            var chars = [];
        
        
        
            for (var i = 0; i < href.length; i++) {
        
              var c = href[i];
        
        
        
              if (c === "~") {
        
                c = "\\textasciitilde";
        
              }
        
        
        
              chars.push({
        
                type: "textord",
        
                mode: "text",
        
                text: c
        
              });
        
            }
        
        
        
            var body = {
        
              type: "text",
        
              mode: parser.mode,
        
              font: "\\texttt",
        
              body: chars
        
            };
        
            return {
        
              type: "href",
        
              mode: parser.mode,
        
              href,
        
              body: ordargument(body)
        
            };
        
          }
        
        });
        
        
        
        // In LaTeX, \vcenter can act only on a box, as in
        
        // \vcenter{\hbox{$\frac{a+b}{\dfrac{c}{d}}$}}
        
        // This function by itself doesn't do anything but prevent a soft line break.
        
        
        
        defineFunction({
        
          type: "hbox",
        
          names: ["\\hbox"],
        
          props: {
        
            numArgs: 1,
        
            argTypes: ["text"],
        
            allowedInText: true,
        
            primitive: true
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser
        
            } = _ref;
        
            return {
        
              type: "hbox",
        
              mode: parser.mode,
        
              body: ordargument(args[0])
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            var elements = buildExpression$1(group.body, options, false);
        
            return buildCommon.makeFragment(elements);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            return new mathMLTree.MathNode("mrow", buildExpression(group.body, options));
        
          }
        
        
        
        });
        
        
        
        defineFunction({
        
          type: "html",
        
          names: ["\\htmlClass", "\\htmlId", "\\htmlStyle", "\\htmlData"],
        
          props: {
        
            numArgs: 2,
        
            argTypes: ["raw", "original"],
        
            allowedInText: true
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              parser,
        
              funcName,
        
              token
        
            } = _ref;
        
            var value = assertNodeType(args[0], "raw").string;
        
            var body = args[1];
        
        
        
            if (parser.settings.strict) {
        
              parser.settings.reportNonstrict("htmlExtension", "HTML extension is disabled on strict mode");
        
            }
        
        
        
            var trustContext;
        
            var attributes = {};
        
        
        
            switch (funcName) {
        
              case "\\htmlClass":
        
                attributes.class = value;
        
                trustContext = {
        
                  command: "\\htmlClass",
        
                  class: value
        
                };
        
                break;
        
        
        
              case "\\htmlId":
        
                attributes.id = value;
        
                trustContext = {
        
                  command: "\\htmlId",
        
                  id: value
        
                };
        
                break;
        
        
        
              case "\\htmlStyle":
        
                attributes.style = value;
        
                trustContext = {
        
                  command: "\\htmlStyle",
        
                  style: value
        
                };
        
                break;
        
        
        
              case "\\htmlData":
        
                {
        
                  var data = value.split(",");
        
        
        
                  for (var i = 0; i < data.length; i++) {
        
                    var keyVal = data[i].split("=");
        
        
        
                    if (keyVal.length !== 2) {
        
                      throw new ParseError("Error parsing key-value for \\htmlData");
        
                    }
        
        
        
                    attributes["data-" + keyVal[0].trim()] = keyVal[1].trim();
        
                  }
        
        
        
                  trustContext = {
        
                    command: "\\htmlData",
        
                    attributes
        
                  };
        
                  break;
        
                }
        
        
        
              default:
        
                throw new Error("Unrecognized html command");
        
            }
        
        
        
            if (!parser.settings.isTrusted(trustContext)) {
        
              return parser.formatUnsupportedCmd(funcName);
        
            }
        
        
        
            return {
        
              type: "html",
        
              mode: parser.mode,
        
              attributes,
        
              body: ordargument(body)
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            var elements = buildExpression$1(group.body, options, false);
        
            var classes = ["enclosing"];
        
        
        
            if (group.attributes.class) {
        
              classes.push(...group.attributes.class.trim().split(/\s+/));
        
            }
        
        
        
            var span = buildCommon.makeSpan(classes, elements, options);
        
        
        
            for (var attr in group.attributes) {
        
              if (attr !== "class" && group.attributes.hasOwnProperty(attr)) {
        
                span.setAttribute(attr, group.attributes[attr]);
        
              }
        
            }
        
        
        
            return span;
        
          },
        
          mathmlBuilder: (group, options) => {
        
            return buildExpressionRow(group.body, options);
        
          }
        
        });
        
        
        
        defineFunction({
        
          type: "htmlmathml",
        
          names: ["\\html@mathml"],
        
          props: {
        
            numArgs: 2,
        
            allowedInText: true
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              parser
        
            } = _ref;
        
            return {
        
              type: "htmlmathml",
        
              mode: parser.mode,
        
              html: ordargument(args[0]),
        
              mathml: ordargument(args[1])
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            var elements = buildExpression$1(group.html, options, false);
        
            return buildCommon.makeFragment(elements);
        
          },
        
          mathmlBuilder: (group, options) => {
        
            return buildExpressionRow(group.mathml, options);
        
          }
        
        });
        
        
        
        var sizeData = function sizeData(str) {
        
          if (/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(str)) {
        
            // str is a number with no unit specified.
        
            // default unit is bp, per graphix package.
        
            return {
        
              number: +str,
        
              unit: "bp"
        
            };
        
          } else {
        
            var match = /([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(str);
        
        
        
            if (!match) {
        
              throw new ParseError("Invalid size: '" + str + "' in \\includegraphics");
        
            }
        
        
        
            var data = {
        
              number: +(match[1] + match[2]),
        
              // sign + magnitude, cast to number
        
              unit: match[3]
        
            };
        
        
        
            if (!validUnit(data)) {
        
              throw new ParseError("Invalid unit: '" + data.unit + "' in \\includegraphics.");
        
            }
        
        
        
            return data;
        
          }
        
        };
        
        
        
        defineFunction({
        
          type: "includegraphics",
        
          names: ["\\includegraphics"],
        
          props: {
        
            numArgs: 1,
        
            numOptionalArgs: 1,
        
            argTypes: ["raw", "url"],
        
            allowedInText: false
        
          },
        
          handler: (_ref, args, optArgs) => {
        
            var {
        
              parser
        
            } = _ref;
        
            var width = {
        
              number: 0,
        
              unit: "em"
        
            };
        
            var height = {
        
              number: 0.9,
        
              unit: "em"
        
            }; // sorta character sized.
        
        
        
            var totalheight = {
        
              number: 0,
        
              unit: "em"
        
            };
        
            var alt = "";
        
        
        
            if (optArgs[0]) {
        
              var attributeStr = assertNodeType(optArgs[0], "raw").string; // Parser.js does not parse key/value pairs. We get a string.
        
        
        
              var attributes = attributeStr.split(",");
        
        
        
              for (var i = 0; i < attributes.length; i++) {
        
                var keyVal = attributes[i].split("=");
        
        
        
                if (keyVal.length === 2) {
        
                  var str = keyVal[1].trim();
        
        
        
                  switch (keyVal[0].trim()) {
        
                    case "alt":
        
                      alt = str;
        
                      break;
        
        
        
                    case "width":
        
                      width = sizeData(str);
        
                      break;
        
        
        
                    case "height":
        
                      height = sizeData(str);
        
                      break;
        
        
        
                    case "totalheight":
        
                      totalheight = sizeData(str);
        
                      break;
        
        
        
                    default:
        
                      throw new ParseError("Invalid key: '" + keyVal[0] + "' in \\includegraphics.");
        
                  }
        
                }
        
              }
        
            }
        
        
        
            var src = assertNodeType(args[0], "url").url;
        
        
        
            if (alt === "") {
        
              // No alt given. Use the file name. Strip away the path.
        
              alt = src;
        
              alt = alt.replace(/^.*[\\/]/, '');
        
              alt = alt.substring(0, alt.lastIndexOf('.'));
        
            }
        
        
        
            if (!parser.settings.isTrusted({
        
              command: "\\includegraphics",
        
              url: src
        
            })) {
        
              return parser.formatUnsupportedCmd("\\includegraphics");
        
            }
        
        
        
            return {
        
              type: "includegraphics",
        
              mode: parser.mode,
        
              alt: alt,
        
              width: width,
        
              height: height,
        
              totalheight: totalheight,
        
              src: src
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            var height = calculateSize(group.height, options);
        
            var depth = 0;
        
        
        
            if (group.totalheight.number > 0) {
        
              depth = calculateSize(group.totalheight, options) - height;
        
            }
        
        
        
            var width = 0;
        
        
        
            if (group.width.number > 0) {
        
              width = calculateSize(group.width, options);
        
            }
        
        
        
            var style = {
        
              height: makeEm(height + depth)
        
            };
        
        
        
            if (width > 0) {
        
              style.width = makeEm(width);
        
            }
        
        
        
            if (depth > 0) {
        
              style.verticalAlign = makeEm(-depth);
        
            }
        
        
        
            var node = new Img(group.src, group.alt, style);
        
            node.height = height;
        
            node.depth = depth;
        
            return node;
        
          },
        
          mathmlBuilder: (group, options) => {
        
            var node = new mathMLTree.MathNode("mglyph", []);
        
            node.setAttribute("alt", group.alt);
        
            var height = calculateSize(group.height, options);
        
            var depth = 0;
        
        
        
            if (group.totalheight.number > 0) {
        
              depth = calculateSize(group.totalheight, options) - height;
        
              node.setAttribute("valign", makeEm(-depth));
        
            }
        
        
        
            node.setAttribute("height", makeEm(height + depth));
        
        
        
            if (group.width.number > 0) {
        
              var width = calculateSize(group.width, options);
        
              node.setAttribute("width", makeEm(width));
        
            }
        
        
        
            node.setAttribute("src", group.src);
        
            return node;
        
          }
        
        });
        
        
        
        // Horizontal spacing commands
        
        
        
        defineFunction({
        
          type: "kern",
        
          names: ["\\kern", "\\mkern", "\\hskip", "\\mskip"],
        
          props: {
        
            numArgs: 1,
        
            argTypes: ["size"],
        
            primitive: true,
        
            allowedInText: true
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            var size = assertNodeType(args[0], "size");
        
        
        
            if (parser.settings.strict) {
        
              var mathFunction = funcName[1] === 'm'; // \mkern, \mskip
        
        
        
              var muUnit = size.value.unit === 'mu';
        
        
        
              if (mathFunction) {
        
                if (!muUnit) {
        
                  parser.settings.reportNonstrict("mathVsTextUnits", "LaTeX's " + funcName + " supports only mu units, " + ("not " + size.value.unit + " units"));
        
                }
        
        
        
                if (parser.mode !== "math") {
        
                  parser.settings.reportNonstrict("mathVsTextUnits", "LaTeX's " + funcName + " works only in math mode");
        
                }
        
              } else {
        
                // !mathFunction
        
                if (muUnit) {
        
                  parser.settings.reportNonstrict("mathVsTextUnits", "LaTeX's " + funcName + " doesn't support mu units");
        
                }
        
              }
        
            }
        
        
        
            return {
        
              type: "kern",
        
              mode: parser.mode,
        
              dimension: size.value
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            return buildCommon.makeGlue(group.dimension, options);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var dimension = calculateSize(group.dimension, options);
        
            return new mathMLTree.SpaceNode(dimension);
        
          }
        
        
        
        });
        
        
        
        // Horizontal overlap functions
        
        defineFunction({
        
          type: "lap",
        
          names: ["\\mathllap", "\\mathrlap", "\\mathclap"],
        
          props: {
        
            numArgs: 1,
        
            allowedInText: true
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            var body = args[0];
        
            return {
        
              type: "lap",
        
              mode: parser.mode,
        
              alignment: funcName.slice(5),
        
              body
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            // mathllap, mathrlap, mathclap
        
            var inner;
        
        
        
            if (group.alignment === "clap") {
        
              // ref: https://www.math.lsu.edu/~aperlis/publications/mathclap/
        
              inner = buildCommon.makeSpan([], [buildGroup$1(group.body, options)]); // wrap, since CSS will center a .clap > .inner > span
        
        
        
              inner = buildCommon.makeSpan(["inner"], [inner], options);
        
            } else {
        
              inner = buildCommon.makeSpan(["inner"], [buildGroup$1(group.body, options)]);
        
            }
        
        
        
            var fix = buildCommon.makeSpan(["fix"], []);
        
            var node = buildCommon.makeSpan([group.alignment], [inner, fix], options); // At this point, we have correctly set horizontal alignment of the
        
            // two items involved in the lap.
        
            // Next, use a strut to set the height of the HTML bounding box.
        
            // Otherwise, a tall argument may be misplaced.
        
            // This code resolved issue #1153
        
        
        
            var strut = buildCommon.makeSpan(["strut"]);
        
            strut.style.height = makeEm(node.height + node.depth);
        
        
        
            if (node.depth) {
        
              strut.style.verticalAlign = makeEm(-node.depth);
        
            }
        
        
        
            node.children.unshift(strut); // Next, prevent vertical misplacement when next to something tall.
        
            // This code resolves issue #1234
        
        
        
            node = buildCommon.makeSpan(["thinbox"], [node], options);
        
            return buildCommon.makeSpan(["mord", "vbox"], [node], options);
        
          },
        
          mathmlBuilder: (group, options) => {
        
            // mathllap, mathrlap, mathclap
        
            var node = new mathMLTree.MathNode("mpadded", [buildGroup(group.body, options)]);
        
        
        
            if (group.alignment !== "rlap") {
        
              var offset = group.alignment === "llap" ? "-1" : "-0.5";
        
              node.setAttribute("lspace", offset + "width");
        
            }
        
        
        
            node.setAttribute("width", "0px");
        
            return node;
        
          }
        
        });
        
        
        
        defineFunction({
        
          type: "styling",
        
          names: ["\\(", "$"],
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true,
        
            allowedInMath: false
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              funcName,
        
              parser
        
            } = _ref;
        
            var outerMode = parser.mode;
        
            parser.switchMode("math");
        
            var close = funcName === "\\(" ? "\\)" : "$";
        
            var body = parser.parseExpression(false, close);
        
            parser.expect(close);
        
            parser.switchMode(outerMode);
        
            return {
        
              type: "styling",
        
              mode: parser.mode,
        
              style: "text",
        
              body
        
            };
        
          }
        
        
        
        }); // Check for extra closing math delimiters
        
        
        
        defineFunction({
        
          type: "text",
        
          // Doesn't matter what this is.
        
          names: ["\\)", "\\]"],
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true,
        
            allowedInMath: false
        
          },
        
        
        
          handler(context, args) {
        
            throw new ParseError("Mismatched " + context.funcName);
        
          }
        
        
        
        });
        
        
        
        var chooseMathStyle = (group, options) => {
        
          switch (options.style.size) {
        
            case Style$1.DISPLAY.size:
        
              return group.display;
        
        
        
            case Style$1.TEXT.size:
        
              return group.text;
        
        
        
            case Style$1.SCRIPT.size:
        
              return group.script;
        
        
        
            case Style$1.SCRIPTSCRIPT.size:
        
              return group.scriptscript;
        
        
        
            default:
        
              return group.text;
        
          }
        
        };
        
        
        
        defineFunction({
        
          type: "mathchoice",
        
          names: ["\\mathchoice"],
        
          props: {
        
            numArgs: 4,
        
            primitive: true
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              parser
        
            } = _ref;
        
            return {
        
              type: "mathchoice",
        
              mode: parser.mode,
        
              display: ordargument(args[0]),
        
              text: ordargument(args[1]),
        
              script: ordargument(args[2]),
        
              scriptscript: ordargument(args[3])
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            var body = chooseMathStyle(group, options);
        
            var elements = buildExpression$1(body, options, false);
        
            return buildCommon.makeFragment(elements);
        
          },
        
          mathmlBuilder: (group, options) => {
        
            var body = chooseMathStyle(group, options);
        
            return buildExpressionRow(body, options);
        
          }
        
        });
        
        
        
        var assembleSupSub = (base, supGroup, subGroup, options, style, slant, baseShift) => {
        
          base = buildCommon.makeSpan([], [base]);
        
          var subIsSingleCharacter = subGroup && utils.isCharacterBox(subGroup);
        
          var sub;
        
          var sup; // We manually have to handle the superscripts and subscripts. This,
        
          // aside from the kern calculations, is copied from supsub.
        
        
        
          if (supGroup) {
        
            var elem = buildGroup$1(supGroup, options.havingStyle(style.sup()), options);
        
            sup = {
        
              elem,
        
              kern: Math.max(options.fontMetrics().bigOpSpacing1, options.fontMetrics().bigOpSpacing3 - elem.depth)
        
            };
        
          }
        
        
        
          if (subGroup) {
        
            var _elem = buildGroup$1(subGroup, options.havingStyle(style.sub()), options);
        
        
        
            sub = {
        
              elem: _elem,
        
              kern: Math.max(options.fontMetrics().bigOpSpacing2, options.fontMetrics().bigOpSpacing4 - _elem.height)
        
            };
        
          } // Build the final group as a vlist of the possible subscript, base,
        
          // and possible superscript.
        
        
        
        
        
          var finalGroup;
        
        
        
          if (sup && sub) {
        
            var bottom = options.fontMetrics().bigOpSpacing5 + sub.elem.height + sub.elem.depth + sub.kern + base.depth + baseShift;
        
            finalGroup = buildCommon.makeVList({
        
              positionType: "bottom",
        
              positionData: bottom,
        
              children: [{
        
                type: "kern",
        
                size: options.fontMetrics().bigOpSpacing5
        
              }, {
        
                type: "elem",
        
                elem: sub.elem,
        
                marginLeft: makeEm(-slant)
        
              }, {
        
                type: "kern",
        
                size: sub.kern
        
              }, {
        
                type: "elem",
        
                elem: base
        
              }, {
        
                type: "kern",
        
                size: sup.kern
        
              }, {
        
                type: "elem",
        
                elem: sup.elem,
        
                marginLeft: makeEm(slant)
        
              }, {
        
                type: "kern",
        
                size: options.fontMetrics().bigOpSpacing5
        
              }]
        
            }, options);
        
          } else if (sub) {
        
            var top = base.height - baseShift; // Shift the limits by the slant of the symbol. Note
        
            // that we are supposed to shift the limits by 1/2 of the slant,
        
            // but since we are centering the limits adding a full slant of
        
            // margin will shift by 1/2 that.
        
        
        
            finalGroup = buildCommon.makeVList({
        
              positionType: "top",
        
              positionData: top,
        
              children: [{
        
                type: "kern",
        
                size: options.fontMetrics().bigOpSpacing5
        
              }, {
        
                type: "elem",
        
                elem: sub.elem,
        
                marginLeft: makeEm(-slant)
        
              }, {
        
                type: "kern",
        
                size: sub.kern
        
              }, {
        
                type: "elem",
        
                elem: base
        
              }]
        
            }, options);
        
          } else if (sup) {
        
            var _bottom = base.depth + baseShift;
        
        
        
            finalGroup = buildCommon.makeVList({
        
              positionType: "bottom",
        
              positionData: _bottom,
        
              children: [{
        
                type: "elem",
        
                elem: base
        
              }, {
        
                type: "kern",
        
                size: sup.kern
        
              }, {
        
                type: "elem",
        
                elem: sup.elem,
        
                marginLeft: makeEm(slant)
        
              }, {
        
                type: "kern",
        
                size: options.fontMetrics().bigOpSpacing5
        
              }]
        
            }, options);
        
          } else {
        
            // This case probably shouldn't occur (this would mean the
        
            // supsub was sending us a group with no superscript or
        
            // subscript) but be safe.
        
            return base;
        
          }
        
        
        
          var parts = [finalGroup];
        
        
        
          if (sub && slant !== 0 && !subIsSingleCharacter) {
        
            // A negative margin-left was applied to the lower limit.
        
            // Avoid an overlap by placing a spacer on the left on the group.
        
            var spacer = buildCommon.makeSpan(["mspace"], [], options);
        
            spacer.style.marginRight = makeEm(slant);
        
            parts.unshift(spacer);
        
          }
        
        
        
          return buildCommon.makeSpan(["mop", "op-limits"], parts, options);
        
        };
        
        
        
        // Limits, symbols
        
        // Most operators have a large successor symbol, but these don't.
        
        var noSuccessor = ["\\smallint"]; // NOTE: Unlike most `htmlBuilder`s, this one handles not only "op", but also
        
        // "supsub" since some of them (like \int) can affect super/subscripting.
        
        
        
        var htmlBuilder$2 = (grp, options) => {
        
          // Operators are handled in the TeXbook pg. 443-444, rule 13(a).
        
          var supGroup;
        
          var subGroup;
        
          var hasLimits = false;
        
          var group;
        
        
        
          if (grp.type === "supsub") {
        
            // If we have limits, supsub will pass us its group to handle. Pull
        
            // out the superscript and subscript and set the group to the op in
        
            // its base.
        
            supGroup = grp.sup;
        
            subGroup = grp.sub;
        
            group = assertNodeType(grp.base, "op");
        
            hasLimits = true;
        
          } else {
        
            group = assertNodeType(grp, "op");
        
          }
        
        
        
          var style = options.style;
        
          var large = false;
        
        
        
          if (style.size === Style$1.DISPLAY.size && group.symbol && !utils.contains(noSuccessor, group.name)) {
        
            // Most symbol operators get larger in displaystyle (rule 13)
        
            large = true;
        
          }
        
        
        
          var base;
        
        
        
          if (group.symbol) {
        
            // If this is a symbol, create the symbol.
        
            var fontName = large ? "Size2-Regular" : "Size1-Regular";
        
            var stash = "";
        
        
        
            if (group.name === "\\oiint" || group.name === "\\oiiint") {
        
              // No font glyphs yet, so use a glyph w/o the oval.
        
              // TODO: When font glyphs are available, delete this code.
        
              stash = group.name.slice(1);
        
              group.name = stash === "oiint" ? "\\iint" : "\\iiint";
        
            }
        
        
        
            base = buildCommon.makeSymbol(group.name, fontName, "math", options, ["mop", "op-symbol", large ? "large-op" : "small-op"]);
        
        
        
            if (stash.length > 0) {
        
              // We're in \oiint or \oiiint. Overlay the oval.
        
              // TODO: When font glyphs are available, delete this code.
        
              var italic = base.italic;
        
              var oval = buildCommon.staticSvg(stash + "Size" + (large ? "2" : "1"), options);
        
              base = buildCommon.makeVList({
        
                positionType: "individualShift",
        
                children: [{
        
                  type: "elem",
        
                  elem: base,
        
                  shift: 0
        
                }, {
        
                  type: "elem",
        
                  elem: oval,
        
                  shift: large ? 0.08 : 0
        
                }]
        
              }, options);
        
              group.name = "\\" + stash;
        
              base.classes.unshift("mop"); // $FlowFixMe
        
        
        
              base.italic = italic;
        
            }
        
          } else if (group.body) {
        
            // If this is a list, compose that list.
        
            var inner = buildExpression$1(group.body, options, true);
        
        
        
            if (inner.length === 1 && inner[0] instanceof SymbolNode) {
        
              base = inner[0];
        
              base.classes[0] = "mop"; // replace old mclass
        
            } else {
        
              base = buildCommon.makeSpan(["mop"], inner, options);
        
            }
        
          } else {
        
            // Otherwise, this is a text operator. Build the text from the
        
            // operator's name.
        
            var output = [];
        
        
        
            for (var i = 1; i < group.name.length; i++) {
        
              output.push(buildCommon.mathsym(group.name[i], group.mode, options));
        
            }
        
        
        
            base = buildCommon.makeSpan(["mop"], output, options);
        
          } // If content of op is a single symbol, shift it vertically.
        
        
        
        
        
          var baseShift = 0;
        
          var slant = 0;
        
        
        
          if ((base instanceof SymbolNode || group.name === "\\oiint" || group.name === "\\oiiint") && !group.suppressBaseShift) {
        
            // We suppress the shift of the base of \overset and \underset. Otherwise,
        
            // shift the symbol so its center lies on the axis (rule 13). It
        
            // appears that our fonts have the centers of the symbols already
        
            // almost on the axis, so these numbers are very small. Note we
        
            // don't actually apply this here, but instead it is used either in
        
            // the vlist creation or separately when there are no limits.
        
            baseShift = (base.height - base.depth) / 2 - options.fontMetrics().axisHeight; // The slant of the symbol is just its italic correction.
        
            // $FlowFixMe
        
        
        
            slant = base.italic;
        
          }
        
        
        
          if (hasLimits) {
        
            return assembleSupSub(base, supGroup, subGroup, options, style, slant, baseShift);
        
          } else {
        
            if (baseShift) {
        
              base.style.position = "relative";
        
              base.style.top = makeEm(baseShift);
        
            }
        
        
        
            return base;
        
          }
        
        };
        
        
        
        var mathmlBuilder$1 = (group, options) => {
        
          var node;
        
        
        
          if (group.symbol) {
        
            // This is a symbol. Just add the symbol.
        
            node = new MathNode("mo", [makeText(group.name, group.mode)]);
        
        
        
            if (utils.contains(noSuccessor, group.name)) {
        
              node.setAttribute("largeop", "false");
        
            }
        
          } else if (group.body) {
        
            // This is an operator with children. Add them.
        
            node = new MathNode("mo", buildExpression(group.body, options));
        
          } else {
        
            // This is a text operator. Add all of the characters from the
        
            // operator's name.
        
            node = new MathNode("mi", [new TextNode(group.name.slice(1))]); // Append an <mo>&ApplyFunction;</mo>.
        
            // ref: https://www.w3.org/TR/REC-MathML/chap3_2.html#sec3.2.4
        
        
        
            var operator = new MathNode("mo", [makeText("\u2061", "text")]);
        
        
        
            if (group.parentIsSupSub) {
        
              node = new MathNode("mrow", [node, operator]);
        
            } else {
        
              node = newDocumentFragment([node, operator]);
        
            }
        
          }
        
        
        
          return node;
        
        };
        
        
        
        var singleCharBigOps = {
        
          "\u220F": "\\prod",
        
          "\u2210": "\\coprod",
        
          "\u2211": "\\sum",
        
          "\u22c0": "\\bigwedge",
        
          "\u22c1": "\\bigvee",
        
          "\u22c2": "\\bigcap",
        
          "\u22c3": "\\bigcup",
        
          "\u2a00": "\\bigodot",
        
          "\u2a01": "\\bigoplus",
        
          "\u2a02": "\\bigotimes",
        
          "\u2a04": "\\biguplus",
        
          "\u2a06": "\\bigsqcup"
        
        };
        
        defineFunction({
        
          type: "op",
        
          names: ["\\coprod", "\\bigvee", "\\bigwedge", "\\biguplus", "\\bigcap", "\\bigcup", "\\intop", "\\prod", "\\sum", "\\bigotimes", "\\bigoplus", "\\bigodot", "\\bigsqcup", "\\smallint", "\u220F", "\u2210", "\u2211", "\u22c0", "\u22c1", "\u22c2", "\u22c3", "\u2a00", "\u2a01", "\u2a02", "\u2a04", "\u2a06"],
        
          props: {
        
            numArgs: 0
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            var fName = funcName;
        
        
        
            if (fName.length === 1) {
        
              fName = singleCharBigOps[fName];
        
            }
        
        
        
            return {
        
              type: "op",
        
              mode: parser.mode,
        
              limits: true,
        
              parentIsSupSub: false,
        
              symbol: true,
        
              name: fName
        
            };
        
          },
        
          htmlBuilder: htmlBuilder$2,
        
          mathmlBuilder: mathmlBuilder$1
        
        }); // Note: calling defineFunction with a type that's already been defined only
        
        // works because the same htmlBuilder and mathmlBuilder are being used.
        
        
        
        defineFunction({
        
          type: "op",
        
          names: ["\\mathop"],
        
          props: {
        
            numArgs: 1,
        
            primitive: true
        
          },
        
          handler: (_ref2, args) => {
        
            var {
        
              parser
        
            } = _ref2;
        
            var body = args[0];
        
            return {
        
              type: "op",
        
              mode: parser.mode,
        
              limits: false,
        
              parentIsSupSub: false,
        
              symbol: false,
        
              body: ordargument(body)
        
            };
        
          },
        
          htmlBuilder: htmlBuilder$2,
        
          mathmlBuilder: mathmlBuilder$1
        
        }); // There are 2 flags for operators; whether they produce limits in
        
        // displaystyle, and whether they are symbols and should grow in
        
        // displaystyle. These four groups cover the four possible choices.
        
        
        
        var singleCharIntegrals = {
        
          "\u222b": "\\int",
        
          "\u222c": "\\iint",
        
          "\u222d": "\\iiint",
        
          "\u222e": "\\oint",
        
          "\u222f": "\\oiint",
        
          "\u2230": "\\oiiint"
        
        }; // No limits, not symbols
        
        
        
        defineFunction({
        
          type: "op",
        
          names: ["\\arcsin", "\\arccos", "\\arctan", "\\arctg", "\\arcctg", "\\arg", "\\ch", "\\cos", "\\cosec", "\\cosh", "\\cot", "\\cotg", "\\coth", "\\csc", "\\ctg", "\\cth", "\\deg", "\\dim", "\\exp", "\\hom", "\\ker", "\\lg", "\\ln", "\\log", "\\sec", "\\sin", "\\sinh", "\\sh", "\\tan", "\\tanh", "\\tg", "\\th"],
        
          props: {
        
            numArgs: 0
        
          },
        
        
        
          handler(_ref3) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref3;
        
            return {
        
              type: "op",
        
              mode: parser.mode,
        
              limits: false,
        
              parentIsSupSub: false,
        
              symbol: false,
        
              name: funcName
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$2,
        
          mathmlBuilder: mathmlBuilder$1
        
        }); // Limits, not symbols
        
        
        
        defineFunction({
        
          type: "op",
        
          names: ["\\det", "\\gcd", "\\inf", "\\lim", "\\max", "\\min", "\\Pr", "\\sup"],
        
          props: {
        
            numArgs: 0
        
          },
        
        
        
          handler(_ref4) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref4;
        
            return {
        
              type: "op",
        
              mode: parser.mode,
        
              limits: true,
        
              parentIsSupSub: false,
        
              symbol: false,
        
              name: funcName
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$2,
        
          mathmlBuilder: mathmlBuilder$1
        
        }); // No limits, symbols
        
        
        
        defineFunction({
        
          type: "op",
        
          names: ["\\int", "\\iint", "\\iiint", "\\oint", "\\oiint", "\\oiiint", "\u222b", "\u222c", "\u222d", "\u222e", "\u222f", "\u2230"],
        
          props: {
        
            numArgs: 0
        
          },
        
        
        
          handler(_ref5) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref5;
        
            var fName = funcName;
        
        
        
            if (fName.length === 1) {
        
              fName = singleCharIntegrals[fName];
        
            }
        
        
        
            return {
        
              type: "op",
        
              mode: parser.mode,
        
              limits: false,
        
              parentIsSupSub: false,
        
              symbol: true,
        
              name: fName
        
            };
        
          },
        
        
        
          htmlBuilder: htmlBuilder$2,
        
          mathmlBuilder: mathmlBuilder$1
        
        });
        
        
        
        // NOTE: Unlike most `htmlBuilder`s, this one handles not only
        
        // "operatorname", but also  "supsub" since \operatorname* can
        
        // affect super/subscripting.
        
        var htmlBuilder$1 = (grp, options) => {
        
          // Operators are handled in the TeXbook pg. 443-444, rule 13(a).
        
          var supGroup;
        
          var subGroup;
        
          var hasLimits = false;
        
          var group;
        
        
        
          if (grp.type === "supsub") {
        
            // If we have limits, supsub will pass us its group to handle. Pull
        
            // out the superscript and subscript and set the group to the op in
        
            // its base.
        
            supGroup = grp.sup;
        
            subGroup = grp.sub;
        
            group = assertNodeType(grp.base, "operatorname");
        
            hasLimits = true;
        
          } else {
        
            group = assertNodeType(grp, "operatorname");
        
          }
        
        
        
          var base;
        
        
        
          if (group.body.length > 0) {
        
            var body = group.body.map(child => {
        
              // $FlowFixMe: Check if the node has a string `text` property.
        
              var childText = child.text;
        
        
        
              if (typeof childText === "string") {
        
                return {
        
                  type: "textord",
        
                  mode: child.mode,
        
                  text: childText
        
                };
        
              } else {
        
                return child;
        
              }
        
            }); // Consolidate function names into symbol characters.
        
        
        
            var expression = buildExpression$1(body, options.withFont("mathrm"), true);
        
        
        
            for (var i = 0; i < expression.length; i++) {
        
              var child = expression[i];
        
        
        
              if (child instanceof SymbolNode) {
        
                // Per amsopn package,
        
                // change minus to hyphen and \ast to asterisk
        
                child.text = child.text.replace(/\u2212/, "-").replace(/\u2217/, "*");
        
              }
        
            }
        
        
        
            base = buildCommon.makeSpan(["mop"], expression, options);
        
          } else {
        
            base = buildCommon.makeSpan(["mop"], [], options);
        
          }
        
        
        
          if (hasLimits) {
        
            return assembleSupSub(base, supGroup, subGroup, options, options.style, 0, 0);
        
          } else {
        
            return base;
        
          }
        
        };
        
        
        
        var mathmlBuilder = (group, options) => {
        
          // The steps taken here are similar to the html version.
        
          var expression = buildExpression(group.body, options.withFont("mathrm")); // Is expression a string or has it something like a fraction?
        
        
        
          var isAllString = true; // default
        
        
        
          for (var i = 0; i < expression.length; i++) {
        
            var node = expression[i];
        
        
        
            if (node instanceof mathMLTree.SpaceNode) ; else if (node instanceof mathMLTree.MathNode) {
        
              switch (node.type) {
        
                case "mi":
        
                case "mn":
        
                case "ms":
        
                case "mspace":
        
                case "mtext":
        
                  break;
        
                // Do nothing yet.
        
        
        
                case "mo":
        
                  {
        
                    var child = node.children[0];
        
        
        
                    if (node.children.length === 1 && child instanceof mathMLTree.TextNode) {
        
                      child.text = child.text.replace(/\u2212/, "-").replace(/\u2217/, "*");
        
                    } else {
        
                      isAllString = false;
        
                    }
        
        
        
                    break;
        
                  }
        
        
        
                default:
        
                  isAllString = false;
        
              }
        
            } else {
        
              isAllString = false;
        
            }
        
          }
        
        
        
          if (isAllString) {
        
            // Write a single TextNode instead of multiple nested tags.
        
            var word = expression.map(node => node.toText()).join("");
        
            expression = [new mathMLTree.TextNode(word)];
        
          }
        
        
        
          var identifier = new mathMLTree.MathNode("mi", expression);
        
          identifier.setAttribute("mathvariant", "normal"); // \u2061 is the same as &ApplyFunction;
        
          // ref: https://www.w3schools.com/charsets/ref_html_entities_a.asp
        
        
        
          var operator = new mathMLTree.MathNode("mo", [makeText("\u2061", "text")]);
        
        
        
          if (group.parentIsSupSub) {
        
            return new mathMLTree.MathNode("mrow", [identifier, operator]);
        
          } else {
        
            return mathMLTree.newDocumentFragment([identifier, operator]);
        
          }
        
        }; // \operatorname
        
        // amsopn.dtx: \mathop{#1\kern\z@\operator@font#3}\newmcodes@
        
        
        
        
        
        defineFunction({
        
          type: "operatorname",
        
          names: ["\\operatorname@", "\\operatornamewithlimits"],
        
          props: {
        
            numArgs: 1
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            var body = args[0];
        
            return {
        
              type: "operatorname",
        
              mode: parser.mode,
        
              body: ordargument(body),
        
              alwaysHandleSupSub: funcName === "\\operatornamewithlimits",
        
              limits: false,
        
              parentIsSupSub: false
        
            };
        
          },
        
          htmlBuilder: htmlBuilder$1,
        
          mathmlBuilder
        
        });
        
        defineMacro("\\operatorname", "\\@ifstar\\operatornamewithlimits\\operatorname@");
        
        
        
        defineFunctionBuilders({
        
          type: "ordgroup",
        
        
        
          htmlBuilder(group, options) {
        
            if (group.semisimple) {
        
              return buildCommon.makeFragment(buildExpression$1(group.body, options, false));
        
            }
        
        
        
            return buildCommon.makeSpan(["mord"], buildExpression$1(group.body, options, true), options);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            return buildExpressionRow(group.body, options, true);
        
          }
        
        
        
        });
        
        
        
        defineFunction({
        
          type: "overline",
        
          names: ["\\overline"],
        
          props: {
        
            numArgs: 1
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser
        
            } = _ref;
        
            var body = args[0];
        
            return {
        
              type: "overline",
        
              mode: parser.mode,
        
              body
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            // Overlines are handled in the TeXbook pg 443, Rule 9.
        
            // Build the inner group in the cramped style.
        
            var innerGroup = buildGroup$1(group.body, options.havingCrampedStyle()); // Create the line above the body
        
        
        
            var line = buildCommon.makeLineSpan("overline-line", options); // Generate the vlist, with the appropriate kerns
        
        
        
            var defaultRuleThickness = options.fontMetrics().defaultRuleThickness;
        
            var vlist = buildCommon.makeVList({
        
              positionType: "firstBaseline",
        
              children: [{
        
                type: "elem",
        
                elem: innerGroup
        
              }, {
        
                type: "kern",
        
                size: 3 * defaultRuleThickness
        
              }, {
        
                type: "elem",
        
                elem: line
        
              }, {
        
                type: "kern",
        
                size: defaultRuleThickness
        
              }]
        
            }, options);
        
            return buildCommon.makeSpan(["mord", "overline"], [vlist], options);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var operator = new mathMLTree.MathNode("mo", [new mathMLTree.TextNode("\u203e")]);
        
            operator.setAttribute("stretchy", "true");
        
            var node = new mathMLTree.MathNode("mover", [buildGroup(group.body, options), operator]);
        
            node.setAttribute("accent", "true");
        
            return node;
        
          }
        
        
        
        });
        
        
        
        defineFunction({
        
          type: "phantom",
        
          names: ["\\phantom"],
        
          props: {
        
            numArgs: 1,
        
            allowedInText: true
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              parser
        
            } = _ref;
        
            var body = args[0];
        
            return {
        
              type: "phantom",
        
              mode: parser.mode,
        
              body: ordargument(body)
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            var elements = buildExpression$1(group.body, options.withPhantom(), false); // \phantom isn't supposed to affect the elements it contains.
        
            // See "color" for more details.
        
        
        
            return buildCommon.makeFragment(elements);
        
          },
        
          mathmlBuilder: (group, options) => {
        
            var inner = buildExpression(group.body, options);
        
            return new mathMLTree.MathNode("mphantom", inner);
        
          }
        
        });
        
        defineFunction({
        
          type: "hphantom",
        
          names: ["\\hphantom"],
        
          props: {
        
            numArgs: 1,
        
            allowedInText: true
        
          },
        
          handler: (_ref2, args) => {
        
            var {
        
              parser
        
            } = _ref2;
        
            var body = args[0];
        
            return {
        
              type: "hphantom",
        
              mode: parser.mode,
        
              body
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            var node = buildCommon.makeSpan([], [buildGroup$1(group.body, options.withPhantom())]);
        
            node.height = 0;
        
            node.depth = 0;
        
        
        
            if (node.children) {
        
              for (var i = 0; i < node.children.length; i++) {
        
                node.children[i].height = 0;
        
                node.children[i].depth = 0;
        
              }
        
            } // See smash for comment re: use of makeVList
        
        
        
        
        
            node = buildCommon.makeVList({
        
              positionType: "firstBaseline",
        
              children: [{
        
                type: "elem",
        
                elem: node
        
              }]
        
            }, options); // For spacing, TeX treats \smash as a math group (same spacing as ord).
        
        
        
            return buildCommon.makeSpan(["mord"], [node], options);
        
          },
        
          mathmlBuilder: (group, options) => {
        
            var inner = buildExpression(ordargument(group.body), options);
        
            var phantom = new mathMLTree.MathNode("mphantom", inner);
        
            var node = new mathMLTree.MathNode("mpadded", [phantom]);
        
            node.setAttribute("height", "0px");
        
            node.setAttribute("depth", "0px");
        
            return node;
        
          }
        
        });
        
        defineFunction({
        
          type: "vphantom",
        
          names: ["\\vphantom"],
        
          props: {
        
            numArgs: 1,
        
            allowedInText: true
        
          },
        
          handler: (_ref3, args) => {
        
            var {
        
              parser
        
            } = _ref3;
        
            var body = args[0];
        
            return {
        
              type: "vphantom",
        
              mode: parser.mode,
        
              body
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            var inner = buildCommon.makeSpan(["inner"], [buildGroup$1(group.body, options.withPhantom())]);
        
            var fix = buildCommon.makeSpan(["fix"], []);
        
            return buildCommon.makeSpan(["mord", "rlap"], [inner, fix], options);
        
          },
        
          mathmlBuilder: (group, options) => {
        
            var inner = buildExpression(ordargument(group.body), options);
        
            var phantom = new mathMLTree.MathNode("mphantom", inner);
        
            var node = new mathMLTree.MathNode("mpadded", [phantom]);
        
            node.setAttribute("width", "0px");
        
            return node;
        
          }
        
        });
        
        
        
        defineFunction({
        
          type: "raisebox",
        
          names: ["\\raisebox"],
        
          props: {
        
            numArgs: 2,
        
            argTypes: ["size", "hbox"],
        
            allowedInText: true
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser
        
            } = _ref;
        
            var amount = assertNodeType(args[0], "size").value;
        
            var body = args[1];
        
            return {
        
              type: "raisebox",
        
              mode: parser.mode,
        
              dy: amount,
        
              body
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            var body = buildGroup$1(group.body, options);
        
            var dy = calculateSize(group.dy, options);
        
            return buildCommon.makeVList({
        
              positionType: "shift",
        
              positionData: -dy,
        
              children: [{
        
                type: "elem",
        
                elem: body
        
              }]
        
            }, options);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var node = new mathMLTree.MathNode("mpadded", [buildGroup(group.body, options)]);
        
            var dy = group.dy.number + group.dy.unit;
        
            node.setAttribute("voffset", dy);
        
            return node;
        
          }
        
        
        
        });
        
        
        
        defineFunction({
        
          type: "internal",
        
          names: ["\\relax"],
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true
        
          },
        
        
        
          handler(_ref) {
        
            var {
        
              parser
        
            } = _ref;
        
            return {
        
              type: "internal",
        
              mode: parser.mode
        
            };
        
          }
        
        
        
        });
        
        
        
        defineFunction({
        
          type: "rule",
        
          names: ["\\rule"],
        
          props: {
        
            numArgs: 2,
        
            numOptionalArgs: 1,
        
            argTypes: ["size", "size", "size"]
        
          },
        
        
        
          handler(_ref, args, optArgs) {
        
            var {
        
              parser
        
            } = _ref;
        
            var shift = optArgs[0];
        
            var width = assertNodeType(args[0], "size");
        
            var height = assertNodeType(args[1], "size");
        
            return {
        
              type: "rule",
        
              mode: parser.mode,
        
              shift: shift && assertNodeType(shift, "size").value,
        
              width: width.value,
        
              height: height.value
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            // Make an empty span for the rule
        
            var rule = buildCommon.makeSpan(["mord", "rule"], [], options); // Calculate the shift, width, and height of the rule, and account for units
        
        
        
            var width = calculateSize(group.width, options);
        
            var height = calculateSize(group.height, options);
        
            var shift = group.shift ? calculateSize(group.shift, options) : 0; // Style the rule to the right size
        
        
        
            rule.style.borderRightWidth = makeEm(width);
        
            rule.style.borderTopWidth = makeEm(height);
        
            rule.style.bottom = makeEm(shift); // Record the height and width
        
        
        
            rule.width = width;
        
            rule.height = height + shift;
        
            rule.depth = -shift; // Font size is the number large enough that the browser will
        
            // reserve at least `absHeight` space above the baseline.
        
            // The 1.125 factor was empirically determined
        
        
        
            rule.maxFontSize = height * 1.125 * options.sizeMultiplier;
        
            return rule;
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var width = calculateSize(group.width, options);
        
            var height = calculateSize(group.height, options);
        
            var shift = group.shift ? calculateSize(group.shift, options) : 0;
        
            var color = options.color && options.getColor() || "black";
        
            var rule = new mathMLTree.MathNode("mspace");
        
            rule.setAttribute("mathbackground", color);
        
            rule.setAttribute("width", makeEm(width));
        
            rule.setAttribute("height", makeEm(height));
        
            var wrapper = new mathMLTree.MathNode("mpadded", [rule]);
        
        
        
            if (shift >= 0) {
        
              wrapper.setAttribute("height", makeEm(shift));
        
            } else {
        
              wrapper.setAttribute("height", makeEm(shift));
        
              wrapper.setAttribute("depth", makeEm(-shift));
        
            }
        
        
        
            wrapper.setAttribute("voffset", makeEm(shift));
        
            return wrapper;
        
          }
        
        
        
        });
        
        
        
        function sizingGroup(value, options, baseOptions) {
        
          var inner = buildExpression$1(value, options, false);
        
          var multiplier = options.sizeMultiplier / baseOptions.sizeMultiplier; // Add size-resetting classes to the inner list and set maxFontSize
        
          // manually. Handle nested size changes.
        
        
        
          for (var i = 0; i < inner.length; i++) {
        
            var pos = inner[i].classes.indexOf("sizing");
        
        
        
            if (pos < 0) {
        
              Array.prototype.push.apply(inner[i].classes, options.sizingClasses(baseOptions));
        
            } else if (inner[i].classes[pos + 1] === "reset-size" + options.size) {
        
              // This is a nested size change: e.g., inner[i] is the "b" in
        
              // `\Huge a \small b`. Override the old size (the `reset-` class)
        
              // but not the new size.
        
              inner[i].classes[pos + 1] = "reset-size" + baseOptions.size;
        
            }
        
        
        
            inner[i].height *= multiplier;
        
            inner[i].depth *= multiplier;
        
          }
        
        
        
          return buildCommon.makeFragment(inner);
        
        }
        
        var sizeFuncs = ["\\tiny", "\\sixptsize", "\\scriptsize", "\\footnotesize", "\\small", "\\normalsize", "\\large", "\\Large", "\\LARGE", "\\huge", "\\Huge"];
        
        var htmlBuilder = (group, options) => {
        
          // Handle sizing operators like \Huge. Real TeX doesn't actually allow
        
          // these functions inside of math expressions, so we do some special
        
          // handling.
        
          var newOptions = options.havingSize(group.size);
        
          return sizingGroup(group.body, newOptions, options);
        
        };
        
        defineFunction({
        
          type: "sizing",
        
          names: sizeFuncs,
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true
        
          },
        
          handler: (_ref, args) => {
        
            var {
        
              breakOnTokenText,
        
              funcName,
        
              parser
        
            } = _ref;
        
            var body = parser.parseExpression(false, breakOnTokenText);
        
            return {
        
              type: "sizing",
        
              mode: parser.mode,
        
              // Figure out what size to use based on the list of functions above
        
              size: sizeFuncs.indexOf(funcName) + 1,
        
              body
        
            };
        
          },
        
          htmlBuilder,
        
          mathmlBuilder: (group, options) => {
        
            var newOptions = options.havingSize(group.size);
        
            var inner = buildExpression(group.body, newOptions);
        
            var node = new mathMLTree.MathNode("mstyle", inner); // TODO(emily): This doesn't produce the correct size for nested size
        
            // changes, because we don't keep state of what style we're currently
        
            // in, so we can't reset the size to normal before changing it.  Now
        
            // that we're passing an options parameter we should be able to fix
        
            // this.
        
        
        
            node.setAttribute("mathsize", makeEm(newOptions.sizeMultiplier));
        
            return node;
        
          }
        
        });
        
        
        
        // smash, with optional [tb], as in AMS
        
        defineFunction({
        
          type: "smash",
        
          names: ["\\smash"],
        
          props: {
        
            numArgs: 1,
        
            numOptionalArgs: 1,
        
            allowedInText: true
        
          },
        
          handler: (_ref, args, optArgs) => {
        
            var {
        
              parser
        
            } = _ref;
        
            var smashHeight = false;
        
            var smashDepth = false;
        
            var tbArg = optArgs[0] && assertNodeType(optArgs[0], "ordgroup");
        
        
        
            if (tbArg) {
        
              // Optional [tb] argument is engaged.
        
              // ref: amsmath: \renewcommand{\smash}[1][tb]{%
        
              //               def\mb@t{\ht}\def\mb@b{\dp}\def\mb@tb{\ht\z@\z@\dp}%
        
              var letter = "";
        
        
        
              for (var i = 0; i < tbArg.body.length; ++i) {
        
                var node = tbArg.body[i]; // $FlowFixMe: Not every node type has a `text` property.
        
        
        
                letter = node.text;
        
        
        
                if (letter === "t") {
        
                  smashHeight = true;
        
                } else if (letter === "b") {
        
                  smashDepth = true;
        
                } else {
        
                  smashHeight = false;
        
                  smashDepth = false;
        
                  break;
        
                }
        
              }
        
            } else {
        
              smashHeight = true;
        
              smashDepth = true;
        
            }
        
        
        
            var body = args[0];
        
            return {
        
              type: "smash",
        
              mode: parser.mode,
        
              body,
        
              smashHeight,
        
              smashDepth
        
            };
        
          },
        
          htmlBuilder: (group, options) => {
        
            var node = buildCommon.makeSpan([], [buildGroup$1(group.body, options)]);
        
        
        
            if (!group.smashHeight && !group.smashDepth) {
        
              return node;
        
            }
        
        
        
            if (group.smashHeight) {
        
              node.height = 0; // In order to influence makeVList, we have to reset the children.
        
        
        
              if (node.children) {
        
                for (var i = 0; i < node.children.length; i++) {
        
                  node.children[i].height = 0;
        
                }
        
              }
        
            }
        
        
        
            if (group.smashDepth) {
        
              node.depth = 0;
        
        
        
              if (node.children) {
        
                for (var _i = 0; _i < node.children.length; _i++) {
        
                  node.children[_i].depth = 0;
        
                }
        
              }
        
            } // At this point, we've reset the TeX-like height and depth values.
        
            // But the span still has an HTML line height.
        
            // makeVList applies "display: table-cell", which prevents the browser
        
            // from acting on that line height. So we'll call makeVList now.
        
        
        
        
        
            var smashedNode = buildCommon.makeVList({
        
              positionType: "firstBaseline",
        
              children: [{
        
                type: "elem",
        
                elem: node
        
              }]
        
            }, options); // For spacing, TeX treats \hphantom as a math group (same spacing as ord).
        
        
        
            return buildCommon.makeSpan(["mord"], [smashedNode], options);
        
          },
        
          mathmlBuilder: (group, options) => {
        
            var node = new mathMLTree.MathNode("mpadded", [buildGroup(group.body, options)]);
        
        
        
            if (group.smashHeight) {
        
              node.setAttribute("height", "0px");
        
            }
        
        
        
            if (group.smashDepth) {
        
              node.setAttribute("depth", "0px");
        
            }
        
        
        
            return node;
        
          }
        
        });
        
        
        
        defineFunction({
        
          type: "sqrt",
        
          names: ["\\sqrt"],
        
          props: {
        
            numArgs: 1,
        
            numOptionalArgs: 1
        
          },
        
        
        
          handler(_ref, args, optArgs) {
        
            var {
        
              parser
        
            } = _ref;
        
            var index = optArgs[0];
        
            var body = args[0];
        
            return {
        
              type: "sqrt",
        
              mode: parser.mode,
        
              body,
        
              index
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            // Square roots are handled in the TeXbook pg. 443, Rule 11.
        
            // First, we do the same steps as in overline to build the inner group
        
            // and line
        
            var inner = buildGroup$1(group.body, options.havingCrampedStyle());
        
        
        
            if (inner.height === 0) {
        
              // Render a small surd.
        
              inner.height = options.fontMetrics().xHeight;
        
            } // Some groups can return document fragments.  Handle those by wrapping
        
            // them in a span.
        
        
        
        
        
            inner = buildCommon.wrapFragment(inner, options); // Calculate the minimum size for the \surd delimiter
        
        
        
            var metrics = options.fontMetrics();
        
            var theta = metrics.defaultRuleThickness;
        
            var phi = theta;
        
        
        
            if (options.style.id < Style$1.TEXT.id) {
        
              phi = options.fontMetrics().xHeight;
        
            } // Calculate the clearance between the body and line
        
        
        
        
        
            var lineClearance = theta + phi / 4;
        
            var minDelimiterHeight = inner.height + inner.depth + lineClearance + theta; // Create a sqrt SVG of the required minimum size
        
        
        
            var {
        
              span: img,
        
              ruleWidth,
        
              advanceWidth
        
            } = delimiter.sqrtImage(minDelimiterHeight, options);
        
            var delimDepth = img.height - ruleWidth; // Adjust the clearance based on the delimiter size
        
        
        
            if (delimDepth > inner.height + inner.depth + lineClearance) {
        
              lineClearance = (lineClearance + delimDepth - inner.height - inner.depth) / 2;
        
            } // Shift the sqrt image
        
        
        
        
        
            var imgShift = img.height - inner.height - lineClearance - ruleWidth;
        
            inner.style.paddingLeft = makeEm(advanceWidth); // Overlay the image and the argument.
        
        
        
            var body = buildCommon.makeVList({
        
              positionType: "firstBaseline",
        
              children: [{
        
                type: "elem",
        
                elem: inner,
        
                wrapperClasses: ["svg-align"]
        
              }, {
        
                type: "kern",
        
                size: -(inner.height + imgShift)
        
              }, {
        
                type: "elem",
        
                elem: img
        
              }, {
        
                type: "kern",
        
                size: ruleWidth
        
              }]
        
            }, options);
        
        
        
            if (!group.index) {
        
              return buildCommon.makeSpan(["mord", "sqrt"], [body], options);
        
            } else {
        
              // Handle the optional root index
        
              // The index is always in scriptscript style
        
              var newOptions = options.havingStyle(Style$1.SCRIPTSCRIPT);
        
              var rootm = buildGroup$1(group.index, newOptions, options); // The amount the index is shifted by. This is taken from the TeX
        
              // source, in the definition of `\r@@t`.
        
        
        
              var toShift = 0.6 * (body.height - body.depth); // Build a VList with the superscript shifted up correctly
        
        
        
              var rootVList = buildCommon.makeVList({
        
                positionType: "shift",
        
                positionData: -toShift,
        
                children: [{
        
                  type: "elem",
        
                  elem: rootm
        
                }]
        
              }, options); // Add a class surrounding it so we can add on the appropriate
        
              // kerning
        
        
        
              var rootVListWrap = buildCommon.makeSpan(["root"], [rootVList]);
        
              return buildCommon.makeSpan(["mord", "sqrt"], [rootVListWrap, body], options);
        
            }
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var {
        
              body,
        
              index
        
            } = group;
        
            return index ? new mathMLTree.MathNode("mroot", [buildGroup(body, options), buildGroup(index, options)]) : new mathMLTree.MathNode("msqrt", [buildGroup(body, options)]);
        
          }
        
        
        
        });
        
        
        
        var styleMap = {
        
          "display": Style$1.DISPLAY,
        
          "text": Style$1.TEXT,
        
          "script": Style$1.SCRIPT,
        
          "scriptscript": Style$1.SCRIPTSCRIPT
        
        };
        
        defineFunction({
        
          type: "styling",
        
          names: ["\\displaystyle", "\\textstyle", "\\scriptstyle", "\\scriptscriptstyle"],
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true,
        
            primitive: true
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              breakOnTokenText,
        
              funcName,
        
              parser
        
            } = _ref;
        
            // parse out the implicit body
        
            var body = parser.parseExpression(true, breakOnTokenText); // TODO: Refactor to avoid duplicating styleMap in multiple places (e.g.
        
            // here and in buildHTML and de-dupe the enumeration of all the styles).
        
            // $FlowFixMe: The names above exactly match the styles.
        
        
        
            var style = funcName.slice(1, funcName.length - 5);
        
            return {
        
              type: "styling",
        
              mode: parser.mode,
        
              // Figure out what style to use by pulling out the style from
        
              // the function name
        
              style,
        
              body
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            // Style changes are handled in the TeXbook on pg. 442, Rule 3.
        
            var newStyle = styleMap[group.style];
        
            var newOptions = options.havingStyle(newStyle).withFont('');
        
            return sizingGroup(group.body, newOptions, options);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            // Figure out what style we're changing to.
        
            var newStyle = styleMap[group.style];
        
            var newOptions = options.havingStyle(newStyle);
        
            var inner = buildExpression(group.body, newOptions);
        
            var node = new mathMLTree.MathNode("mstyle", inner);
        
            var styleAttributes = {
        
              "display": ["0", "true"],
        
              "text": ["0", "false"],
        
              "script": ["1", "false"],
        
              "scriptscript": ["2", "false"]
        
            };
        
            var attr = styleAttributes[group.style];
        
            node.setAttribute("scriptlevel", attr[0]);
        
            node.setAttribute("displaystyle", attr[1]);
        
            return node;
        
          }
        
        
        
        });
        
        
        
        /**
        
         * Sometimes, groups perform special rules when they have superscripts or
        
         * subscripts attached to them. This function lets the `supsub` group know that
        
         * Sometimes, groups perform special rules when they have superscripts or
        
         * its inner element should handle the superscripts and subscripts instead of
        
         * handling them itself.
        
         */
        
        var htmlBuilderDelegate = function htmlBuilderDelegate(group, options) {
        
          var base = group.base;
        
        
        
          if (!base) {
        
            return null;
        
          } else if (base.type === "op") {
        
            // Operators handle supsubs differently when they have limits
        
            // (e.g. `\displaystyle\sum_2^3`)
        
            var delegate = base.limits && (options.style.size === Style$1.DISPLAY.size || base.alwaysHandleSupSub);
        
            return delegate ? htmlBuilder$2 : null;
        
          } else if (base.type === "operatorname") {
        
            var _delegate = base.alwaysHandleSupSub && (options.style.size === Style$1.DISPLAY.size || base.limits);
        
        
        
            return _delegate ? htmlBuilder$1 : null;
        
          } else if (base.type === "accent") {
        
            return utils.isCharacterBox(base.base) ? htmlBuilder$a : null;
        
          } else if (base.type === "horizBrace") {
        
            var isSup = !group.sub;
        
            return isSup === base.isOver ? htmlBuilder$3 : null;
        
          } else {
        
            return null;
        
          }
        
        }; // Super scripts and subscripts, whose precise placement can depend on other
        
        // functions that precede them.
        
        
        
        
        
        defineFunctionBuilders({
        
          type: "supsub",
        
        
        
          htmlBuilder(group, options) {
        
            // Superscript and subscripts are handled in the TeXbook on page
        
            // 445-446, rules 18(a-f).
        
            // Here is where we defer to the inner group if it should handle
        
            // superscripts and subscripts itself.
        
            var builderDelegate = htmlBuilderDelegate(group, options);
        
        
        
            if (builderDelegate) {
        
              return builderDelegate(group, options);
        
            }
        
        
        
            var {
        
              base: valueBase,
        
              sup: valueSup,
        
              sub: valueSub
        
            } = group;
        
            var base = buildGroup$1(valueBase, options);
        
            var supm;
        
            var subm;
        
            var metrics = options.fontMetrics(); // Rule 18a
        
        
        
            var supShift = 0;
        
            var subShift = 0;
        
            var isCharacterBox = valueBase && utils.isCharacterBox(valueBase);
        
        
        
            if (valueSup) {
        
              var newOptions = options.havingStyle(options.style.sup());
        
              supm = buildGroup$1(valueSup, newOptions, options);
        
        
        
              if (!isCharacterBox) {
        
                supShift = base.height - newOptions.fontMetrics().supDrop * newOptions.sizeMultiplier / options.sizeMultiplier;
        
              }
        
            }
        
        
        
            if (valueSub) {
        
              var _newOptions = options.havingStyle(options.style.sub());
        
        
        
              subm = buildGroup$1(valueSub, _newOptions, options);
        
        
        
              if (!isCharacterBox) {
        
                subShift = base.depth + _newOptions.fontMetrics().subDrop * _newOptions.sizeMultiplier / options.sizeMultiplier;
        
              }
        
            } // Rule 18c
        
        
        
        
        
            var minSupShift;
        
        
        
            if (options.style === Style$1.DISPLAY) {
        
              minSupShift = metrics.sup1;
        
            } else if (options.style.cramped) {
        
              minSupShift = metrics.sup3;
        
            } else {
        
              minSupShift = metrics.sup2;
        
            } // scriptspace is a font-size-independent size, so scale it
        
            // appropriately for use as the marginRight.
        
        
        
        
        
            var multiplier = options.sizeMultiplier;
        
            var marginRight = makeEm(0.5 / metrics.ptPerEm / multiplier);
        
            var marginLeft = null;
        
        
        
            if (subm) {
        
              // Subscripts shouldn't be shifted by the base's italic correction.
        
              // Account for that by shifting the subscript back the appropriate
        
              // amount. Note we only do this when the base is a single symbol.
        
              var isOiint = group.base && group.base.type === "op" && group.base.name && (group.base.name === "\\oiint" || group.base.name === "\\oiiint");
        
        
        
              if (base instanceof SymbolNode || isOiint) {
        
                // $FlowFixMe
        
                marginLeft = makeEm(-base.italic);
        
              }
        
            }
        
        
        
            var supsub;
        
        
        
            if (supm && subm) {
        
              supShift = Math.max(supShift, minSupShift, supm.depth + 0.25 * metrics.xHeight);
        
              subShift = Math.max(subShift, metrics.sub2);
        
              var ruleWidth = metrics.defaultRuleThickness; // Rule 18e
        
        
        
              var maxWidth = 4 * ruleWidth;
        
        
        
              if (supShift - supm.depth - (subm.height - subShift) < maxWidth) {
        
                subShift = maxWidth - (supShift - supm.depth) + subm.height;
        
                var psi = 0.8 * metrics.xHeight - (supShift - supm.depth);
        
        
        
                if (psi > 0) {
        
                  supShift += psi;
        
                  subShift -= psi;
        
                }
        
              }
        
        
        
              var vlistElem = [{
        
                type: "elem",
        
                elem: subm,
        
                shift: subShift,
        
                marginRight,
        
                marginLeft
        
              }, {
        
                type: "elem",
        
                elem: supm,
        
                shift: -supShift,
        
                marginRight
        
              }];
        
              supsub = buildCommon.makeVList({
        
                positionType: "individualShift",
        
                children: vlistElem
        
              }, options);
        
            } else if (subm) {
        
              // Rule 18b
        
              subShift = Math.max(subShift, metrics.sub1, subm.height - 0.8 * metrics.xHeight);
        
              var _vlistElem = [{
        
                type: "elem",
        
                elem: subm,
        
                marginLeft,
        
                marginRight
        
              }];
        
              supsub = buildCommon.makeVList({
        
                positionType: "shift",
        
                positionData: subShift,
        
                children: _vlistElem
        
              }, options);
        
            } else if (supm) {
        
              // Rule 18c, d
        
              supShift = Math.max(supShift, minSupShift, supm.depth + 0.25 * metrics.xHeight);
        
              supsub = buildCommon.makeVList({
        
                positionType: "shift",
        
                positionData: -supShift,
        
                children: [{
        
                  type: "elem",
        
                  elem: supm,
        
                  marginRight
        
                }]
        
              }, options);
        
            } else {
        
              throw new Error("supsub must have either sup or sub.");
        
            } // Wrap the supsub vlist in a span.msupsub to reset text-align.
        
        
        
        
        
            var mclass = getTypeOfDomTree(base, "right") || "mord";
        
            return buildCommon.makeSpan([mclass], [base, buildCommon.makeSpan(["msupsub"], [supsub])], options);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            // Is the inner group a relevant horizonal brace?
        
            var isBrace = false;
        
            var isOver;
        
            var isSup;
        
        
        
            if (group.base && group.base.type === "horizBrace") {
        
              isSup = !!group.sup;
        
        
        
              if (isSup === group.base.isOver) {
        
                isBrace = true;
        
                isOver = group.base.isOver;
        
              }
        
            }
        
        
        
            if (group.base && (group.base.type === "op" || group.base.type === "operatorname")) {
        
              group.base.parentIsSupSub = true;
        
            }
        
        
        
            var children = [buildGroup(group.base, options)];
        
        
        
            if (group.sub) {
        
              children.push(buildGroup(group.sub, options));
        
            }
        
        
        
            if (group.sup) {
        
              children.push(buildGroup(group.sup, options));
        
            }
        
        
        
            var nodeType;
        
        
        
            if (isBrace) {
        
              nodeType = isOver ? "mover" : "munder";
        
            } else if (!group.sub) {
        
              var base = group.base;
        
        
        
              if (base && base.type === "op" && base.limits && (options.style === Style$1.DISPLAY || base.alwaysHandleSupSub)) {
        
                nodeType = "mover";
        
              } else if (base && base.type === "operatorname" && base.alwaysHandleSupSub && (base.limits || options.style === Style$1.DISPLAY)) {
        
                nodeType = "mover";
        
              } else {
        
                nodeType = "msup";
        
              }
        
            } else if (!group.sup) {
        
              var _base = group.base;
        
        
        
              if (_base && _base.type === "op" && _base.limits && (options.style === Style$1.DISPLAY || _base.alwaysHandleSupSub)) {
        
                nodeType = "munder";
        
              } else if (_base && _base.type === "operatorname" && _base.alwaysHandleSupSub && (_base.limits || options.style === Style$1.DISPLAY)) {
        
                nodeType = "munder";
        
              } else {
        
                nodeType = "msub";
        
              }
        
            } else {
        
              var _base2 = group.base;
        
        
        
              if (_base2 && _base2.type === "op" && _base2.limits && options.style === Style$1.DISPLAY) {
        
                nodeType = "munderover";
        
              } else if (_base2 && _base2.type === "operatorname" && _base2.alwaysHandleSupSub && (options.style === Style$1.DISPLAY || _base2.limits)) {
        
                nodeType = "munderover";
        
              } else {
        
                nodeType = "msubsup";
        
              }
        
            }
        
        
        
            return new mathMLTree.MathNode(nodeType, children);
        
          }
        
        
        
        });
        
        
        
        defineFunctionBuilders({
        
          type: "atom",
        
        
        
          htmlBuilder(group, options) {
        
            return buildCommon.mathsym(group.text, group.mode, options, ["m" + group.family]);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var node = new mathMLTree.MathNode("mo", [makeText(group.text, group.mode)]);
        
        
        
            if (group.family === "bin") {
        
              var variant = getVariant(group, options);
        
        
        
              if (variant === "bold-italic") {
        
                node.setAttribute("mathvariant", variant);
        
              }
        
            } else if (group.family === "punct") {
        
              node.setAttribute("separator", "true");
        
            } else if (group.family === "open" || group.family === "close") {
        
              // Delims built here should not stretch vertically.
        
              // See delimsizing.js for stretchy delims.
        
              node.setAttribute("stretchy", "false");
        
            }
        
        
        
            return node;
        
          }
        
        
        
        });
        
        
        
        // "mathord" and "textord" ParseNodes created in Parser.js from symbol Groups in
        
        // src/symbols.js.
        
        var defaultVariant = {
        
          "mi": "italic",
        
          "mn": "normal",
        
          "mtext": "normal"
        
        };
        
        defineFunctionBuilders({
        
          type: "mathord",
        
        
        
          htmlBuilder(group, options) {
        
            return buildCommon.makeOrd(group, options, "mathord");
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var node = new mathMLTree.MathNode("mi", [makeText(group.text, group.mode, options)]);
        
            var variant = getVariant(group, options) || "italic";
        
        
        
            if (variant !== defaultVariant[node.type]) {
        
              node.setAttribute("mathvariant", variant);
        
            }
        
        
        
            return node;
        
          }
        
        
        
        });
        
        defineFunctionBuilders({
        
          type: "textord",
        
        
        
          htmlBuilder(group, options) {
        
            return buildCommon.makeOrd(group, options, "textord");
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var text = makeText(group.text, group.mode, options);
        
            var variant = getVariant(group, options) || "normal";
        
            var node;
        
        
        
            if (group.mode === 'text') {
        
              node = new mathMLTree.MathNode("mtext", [text]);
        
            } else if (/[0-9]/.test(group.text)) {
        
              node = new mathMLTree.MathNode("mn", [text]);
        
            } else if (group.text === "\\prime") {
        
              node = new mathMLTree.MathNode("mo", [text]);
        
            } else {
        
              node = new mathMLTree.MathNode("mi", [text]);
        
            }
        
        
        
            if (variant !== defaultVariant[node.type]) {
        
              node.setAttribute("mathvariant", variant);
        
            }
        
        
        
            return node;
        
          }
        
        
        
        });
        
        
        
        var cssSpace = {
        
          "\\nobreak": "nobreak",
        
          "\\allowbreak": "allowbreak"
        
        }; // A lookup table to determine whether a spacing function/symbol should be
        
        // treated like a regular space character.  If a symbol or command is a key
        
        // in this table, then it should be a regular space character.  Furthermore,
        
        // the associated value may have a `className` specifying an extra CSS class
        
        // to add to the created `span`.
        
        
        
        var regularSpace = {
        
          " ": {},
        
          "\\ ": {},
        
          "~": {
        
            className: "nobreak"
        
          },
        
          "\\space": {},
        
          "\\nobreakspace": {
        
            className: "nobreak"
        
          }
        
        }; // ParseNode<"spacing"> created in Parser.js from the "spacing" symbol Groups in
        
        // src/symbols.js.
        
        
        
        defineFunctionBuilders({
        
          type: "spacing",
        
        
        
          htmlBuilder(group, options) {
        
            if (regularSpace.hasOwnProperty(group.text)) {
        
              var className = regularSpace[group.text].className || ""; // Spaces are generated by adding an actual space. Each of these
        
              // things has an entry in the symbols table, so these will be turned
        
              // into appropriate outputs.
        
        
        
              if (group.mode === "text") {
        
                var ord = buildCommon.makeOrd(group, options, "textord");
        
                ord.classes.push(className);
        
                return ord;
        
              } else {
        
                return buildCommon.makeSpan(["mspace", className], [buildCommon.mathsym(group.text, group.mode, options)], options);
        
              }
        
            } else if (cssSpace.hasOwnProperty(group.text)) {
        
              // Spaces based on just a CSS class.
        
              return buildCommon.makeSpan(["mspace", cssSpace[group.text]], [], options);
        
            } else {
        
              throw new ParseError("Unknown type of space \"" + group.text + "\"");
        
            }
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var node;
        
        
        
            if (regularSpace.hasOwnProperty(group.text)) {
        
              node = new mathMLTree.MathNode("mtext", [new mathMLTree.TextNode("\u00a0")]);
        
            } else if (cssSpace.hasOwnProperty(group.text)) {
        
              // CSS-based MathML spaces (\nobreak, \allowbreak) are ignored
        
              return new mathMLTree.MathNode("mspace");
        
            } else {
        
              throw new ParseError("Unknown type of space \"" + group.text + "\"");
        
            }
        
        
        
            return node;
        
          }
        
        
        
        });
        
        
        
        var pad = () => {
        
          var padNode = new mathMLTree.MathNode("mtd", []);
        
          padNode.setAttribute("width", "50%");
        
          return padNode;
        
        };
        
        
        
        defineFunctionBuilders({
        
          type: "tag",
        
        
        
          mathmlBuilder(group, options) {
        
            var table = new mathMLTree.MathNode("mtable", [new mathMLTree.MathNode("mtr", [pad(), new mathMLTree.MathNode("mtd", [buildExpressionRow(group.body, options)]), pad(), new mathMLTree.MathNode("mtd", [buildExpressionRow(group.tag, options)])])]);
        
            table.setAttribute("width", "100%");
        
            return table; // TODO: Left-aligned tags.
        
            // Currently, the group and options passed here do not contain
        
            // enough info to set tag alignment. `leqno` is in Settings but it is
        
            // not passed to Options. On the HTML side, leqno is
        
            // set by a CSS class applied in buildTree.js. That would have worked
        
            // in MathML if browsers supported <mlabeledtr>. Since they don't, we
        
            // need to rewrite the way this function is called.
        
          }
        
        
        
        });
        
        
        
        var textFontFamilies = {
        
          "\\text": undefined,
        
          "\\textrm": "textrm",
        
          "\\textsf": "textsf",
        
          "\\texttt": "texttt",
        
          "\\textnormal": "textrm"
        
        };
        
        var textFontWeights = {
        
          "\\textbf": "textbf",
        
          "\\textmd": "textmd"
        
        };
        
        var textFontShapes = {
        
          "\\textit": "textit",
        
          "\\textup": "textup"
        
        };
        
        
        
        var optionsWithFont = (group, options) => {
        
          var font = group.font; // Checks if the argument is a font family or a font style.
        
        
        
          if (!font) {
        
            return options;
        
          } else if (textFontFamilies[font]) {
        
            return options.withTextFontFamily(textFontFamilies[font]);
        
          } else if (textFontWeights[font]) {
        
            return options.withTextFontWeight(textFontWeights[font]);
        
          } else {
        
            return options.withTextFontShape(textFontShapes[font]);
        
          }
        
        };
        
        
        
        defineFunction({
        
          type: "text",
        
          names: [// Font families
        
          "\\text", "\\textrm", "\\textsf", "\\texttt", "\\textnormal", // Font weights
        
          "\\textbf", "\\textmd", // Font Shapes
        
          "\\textit", "\\textup"],
        
          props: {
        
            numArgs: 1,
        
            argTypes: ["text"],
        
            allowedInArgument: true,
        
            allowedInText: true
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser,
        
              funcName
        
            } = _ref;
        
            var body = args[0];
        
            return {
        
              type: "text",
        
              mode: parser.mode,
        
              body: ordargument(body),
        
              font: funcName
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            var newOptions = optionsWithFont(group, options);
        
            var inner = buildExpression$1(group.body, newOptions, true);
        
            return buildCommon.makeSpan(["mord", "text"], inner, newOptions);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var newOptions = optionsWithFont(group, options);
        
            return buildExpressionRow(group.body, newOptions);
        
          }
        
        
        
        });
        
        
        
        defineFunction({
        
          type: "underline",
        
          names: ["\\underline"],
        
          props: {
        
            numArgs: 1,
        
            allowedInText: true
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser
        
            } = _ref;
        
            return {
        
              type: "underline",
        
              mode: parser.mode,
        
              body: args[0]
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            // Underlines are handled in the TeXbook pg 443, Rule 10.
        
            // Build the inner group.
        
            var innerGroup = buildGroup$1(group.body, options); // Create the line to go below the body
        
        
        
            var line = buildCommon.makeLineSpan("underline-line", options); // Generate the vlist, with the appropriate kerns
        
        
        
            var defaultRuleThickness = options.fontMetrics().defaultRuleThickness;
        
            var vlist = buildCommon.makeVList({
        
              positionType: "top",
        
              positionData: innerGroup.height,
        
              children: [{
        
                type: "kern",
        
                size: defaultRuleThickness
        
              }, {
        
                type: "elem",
        
                elem: line
        
              }, {
        
                type: "kern",
        
                size: 3 * defaultRuleThickness
        
              }, {
        
                type: "elem",
        
                elem: innerGroup
        
              }]
        
            }, options);
        
            return buildCommon.makeSpan(["mord", "underline"], [vlist], options);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var operator = new mathMLTree.MathNode("mo", [new mathMLTree.TextNode("\u203e")]);
        
            operator.setAttribute("stretchy", "true");
        
            var node = new mathMLTree.MathNode("munder", [buildGroup(group.body, options), operator]);
        
            node.setAttribute("accentunder", "true");
        
            return node;
        
          }
        
        
        
        });
        
        
        
        defineFunction({
        
          type: "vcenter",
        
          names: ["\\vcenter"],
        
          props: {
        
            numArgs: 1,
        
            argTypes: ["original"],
        
            // In LaTeX, \vcenter can act only on a box.
        
            allowedInText: false
        
          },
        
        
        
          handler(_ref, args) {
        
            var {
        
              parser
        
            } = _ref;
        
            return {
        
              type: "vcenter",
        
              mode: parser.mode,
        
              body: args[0]
        
            };
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            var body = buildGroup$1(group.body, options);
        
            var axisHeight = options.fontMetrics().axisHeight;
        
            var dy = 0.5 * (body.height - axisHeight - (body.depth + axisHeight));
        
            return buildCommon.makeVList({
        
              positionType: "shift",
        
              positionData: dy,
        
              children: [{
        
                type: "elem",
        
                elem: body
        
              }]
        
            }, options);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            // There is no way to do this in MathML.
        
            // Write a class as a breadcrumb in case some post-processor wants
        
            // to perform a vcenter adjustment.
        
            return new mathMLTree.MathNode("mpadded", [buildGroup(group.body, options)], ["vcenter"]);
        
          }
        
        
        
        });
        
        
        
        defineFunction({
        
          type: "verb",
        
          names: ["\\verb"],
        
          props: {
        
            numArgs: 0,
        
            allowedInText: true
        
          },
        
        
        
          handler(context, args, optArgs) {
        
            // \verb and \verb* are dealt with directly in Parser.js.
        
            // If we end up here, it's because of a failure to match the two delimiters
        
            // in the regex in Lexer.js.  LaTeX raises the following error when \verb is
        
            // terminated by end of line (or file).
        
            throw new ParseError("\\verb ended by end of line instead of matching delimiter");
        
          },
        
        
        
          htmlBuilder(group, options) {
        
            var text = makeVerb(group);
        
            var body = []; // \verb enters text mode and therefore is sized like \textstyle
        
        
        
            var newOptions = options.havingStyle(options.style.text());
        
        
        
            for (var i = 0; i < text.length; i++) {
        
              var c = text[i];
        
        
        
              if (c === '~') {
        
                c = '\\textasciitilde';
        
              }
        
        
        
              body.push(buildCommon.makeSymbol(c, "Typewriter-Regular", group.mode, newOptions, ["mord", "texttt"]));
        
            }
        
        
        
            return buildCommon.makeSpan(["mord", "text"].concat(newOptions.sizingClasses(options)), buildCommon.tryCombineChars(body), newOptions);
        
          },
        
        
        
          mathmlBuilder(group, options) {
        
            var text = new mathMLTree.TextNode(makeVerb(group));
        
            var node = new mathMLTree.MathNode("mtext", [text]);
        
            node.setAttribute("mathvariant", "monospace");
        
            return node;
        
          }
        
        
        
        });
        
        /**
        
         * Converts verb group into body string.
        
         *
        
         * \verb* replaces each space with an open box \u2423
        
         * \verb replaces each space with a no-break space \xA0
        
         */
        
        
        
        var makeVerb = group => group.body.replace(/ /g, group.star ? '\u2423' : '\xA0');
        
        
        
        /** Include this to ensure that all functions are defined. */
        
        var functions = _functions;
        
        
        
        /**
        
         * The Lexer class handles tokenizing the input in various ways. Since our
        
         * parser expects us to be able to backtrack, the lexer allows lexing from any
        
         * given starting point.
        
         *
        
         * Its main exposed function is the `lex` function, which takes a position to
        
         * lex from and a type of token to lex. It defers to the appropriate `_innerLex`
        
         * function.
        
         *
        
         * The various `_innerLex` functions perform the actual lexing of different
        
         * kinds.
        
         */
        
        
        
        /* The following tokenRegex
        
         * - matches typical whitespace (but not NBSP etc.) using its first group
        
         * - does not match any control character \x00-\x1f except whitespace
        
         * - does not match a bare backslash
        
         * - matches any ASCII character except those just mentioned
        
         * - does not match the BMP private use area \uE000-\uF8FF
        
         * - does not match bare surrogate code units
        
         * - matches any BMP character except for those just described
        
         * - matches any valid Unicode surrogate pair
        
         * - matches a backslash followed by one or more whitespace characters
        
         * - matches a backslash followed by one or more letters then whitespace
        
         * - matches a backslash followed by any BMP character
        
         * Capturing groups:
        
         *   [1] regular whitespace
        
         *   [2] backslash followed by whitespace
        
         *   [3] anything else, which may include:
        
         *     [4] left character of \verb*
        
         *     [5] left character of \verb
        
         *     [6] backslash followed by word, excluding any trailing whitespace
        
         * Just because the Lexer matches something doesn't mean it's valid input:
        
         * If there is no matching function or symbol definition, the Parser will
        
         * still reject the input.
        
         */
        
        var spaceRegexString = "[ \r\n\t]";
        
        var controlWordRegexString = "\\\\[a-zA-Z@]+";
        
        var controlSymbolRegexString = "\\\\[^\uD800-\uDFFF]";
        
        var controlWordWhitespaceRegexString = "(" + controlWordRegexString + ")" + spaceRegexString + "*";
        
        var controlSpaceRegexString = "\\\\(\n|[ \r\t]+\n?)[ \r\t]*";
        
        var combiningDiacriticalMarkString = "[\u0300-\u036f]";
        
        var combiningDiacriticalMarksEndRegex = new RegExp(combiningDiacriticalMarkString + "+$");
        
        var tokenRegexString = "(" + spaceRegexString + "+)|" + ( // whitespace
        
        controlSpaceRegexString + "|") + // \whitespace
        
        "([!-\\[\\]-\u2027\u202A-\uD7FF\uF900-\uFFFF]" + ( // single codepoint
        
        combiningDiacriticalMarkString + "*") + // ...plus accents
        
        "|[\uD800-\uDBFF][\uDC00-\uDFFF]" + ( // surrogate pair
        
        combiningDiacriticalMarkString + "*") + // ...plus accents
        
        "|\\\\verb\\*([^]).*?\\4" + // \verb*
        
        "|\\\\verb([^*a-zA-Z]).*?\\5" + ( // \verb unstarred
        
        "|" + controlWordWhitespaceRegexString) + ( // \macroName + spaces
        
        "|" + controlSymbolRegexString + ")"); // \\, \', etc.
        
        
        
        /** Main Lexer class */
        
        
        
        class Lexer {
        
          // Category codes. The lexer only supports comment characters (14) for now.
        
          // MacroExpander additionally distinguishes active (13).
        
          constructor(input, settings) {
        
            this.input = void 0;
        
            this.settings = void 0;
        
            this.tokenRegex = void 0;
        
            this.catcodes = void 0;
        
            // Separate accents from characters
        
            this.input = input;
        
            this.settings = settings;
        
            this.tokenRegex = new RegExp(tokenRegexString, 'g');
        
            this.catcodes = {
        
              "%": 14,
        
              // comment character
        
              "~": 13 // active character
        
        
        
            };
        
          }
        
        
        
          setCatcode(char, code) {
        
            this.catcodes[char] = code;
        
          }
        
          /**
        
           * This function lexes a single token.
        
           */
        
        
        
        
        
          lex() {
        
            var input = this.input;
        
            var pos = this.tokenRegex.lastIndex;
        
        
        
            if (pos === input.length) {
        
              return new Token("EOF", new SourceLocation(this, pos, pos));
        
            }
        
        
        
            var match = this.tokenRegex.exec(input);
        
        
        
            if (match === null || match.index !== pos) {
        
              throw new ParseError("Unexpected character: '" + input[pos] + "'", new Token(input[pos], new SourceLocation(this, pos, pos + 1)));
        
            }
        
        
        
            var text = match[6] || match[3] || (match[2] ? "\\ " : " ");
        
        
        
            if (this.catcodes[text] === 14) {
        
              // comment character
        
              var nlIndex = input.indexOf('\n', this.tokenRegex.lastIndex);
        
        
        
              if (nlIndex === -1) {
        
                this.tokenRegex.lastIndex = input.length; // EOF
        
        
        
                this.settings.reportNonstrict("commentAtEnd", "% comment has no terminating newline; LaTeX would " + "fail because of commenting the end of math mode (e.g. $)");
        
              } else {
        
                this.tokenRegex.lastIndex = nlIndex + 1;
        
              }
        
        
        
              return this.lex();
        
            }
        
        
        
            return new Token(text, new SourceLocation(this, pos, this.tokenRegex.lastIndex));
        
          }
        
        
        
        }
        
        
        
        /**
        
         * A `Namespace` refers to a space of nameable things like macros or lengths,
        
         * which can be `set` either globally or local to a nested group, using an
        
         * undo stack similar to how TeX implements this functionality.
        
         * Performance-wise, `get` and local `set` take constant time, while global
        
         * `set` takes time proportional to the depth of group nesting.
        
         */
        
        class Namespace {
        
          /**
        
           * Both arguments are optional.  The first argument is an object of
        
           * built-in mappings which never change.  The second argument is an object
        
           * of initial (global-level) mappings, which will constantly change
        
           * according to any global/top-level `set`s done.
        
           */
        
          constructor(builtins, globalMacros) {
        
            if (builtins === void 0) {
        
              builtins = {};
        
            }
        
        
        
            if (globalMacros === void 0) {
        
              globalMacros = {};
        
            }
        
        
        
            this.current = void 0;
        
            this.builtins = void 0;
        
            this.undefStack = void 0;
        
            this.current = globalMacros;
        
            this.builtins = builtins;
        
            this.undefStack = [];
        
          }
        
          /**
        
           * Start a new nested group, affecting future local `set`s.
        
           */
        
        
        
        
        
          beginGroup() {
        
            this.undefStack.push({});
        
          }
        
          /**
        
           * End current nested group, restoring values before the group began.
        
           */
        
        
        
        
        
          endGroup() {
        
            if (this.undefStack.length === 0) {
        
              throw new ParseError("Unbalanced namespace destruction: attempt " + "to pop global namespace; please report this as a bug");
        
            }
        
        
        
            var undefs = this.undefStack.pop();
        
        
        
            for (var undef in undefs) {
        
              if (undefs.hasOwnProperty(undef)) {
        
                if (undefs[undef] == null) {
        
                  delete this.current[undef];
        
                } else {
        
                  this.current[undef] = undefs[undef];
        
                }
        
              }
        
            }
        
          }
        
          /**
        
           * Ends all currently nested groups (if any), restoring values before the
        
           * groups began.  Useful in case of an error in the middle of parsing.
        
           */
        
        
        
        
        
          endGroups() {
        
            while (this.undefStack.length > 0) {
        
              this.endGroup();
        
            }
        
          }
        
          /**
        
           * Detect whether `name` has a definition.  Equivalent to
        
           * `get(name) != null`.
        
           */
        
        
        
        
        
          has(name) {
        
            return this.current.hasOwnProperty(name) || this.builtins.hasOwnProperty(name);
        
          }
        
          /**
        
           * Get the current value of a name, or `undefined` if there is no value.
        
           *
        
           * Note: Do not use `if (namespace.get(...))` to detect whether a macro
        
           * is defined, as the definition may be the empty string which evaluates
        
           * to `false` in JavaScript.  Use `if (namespace.get(...) != null)` or
        
           * `if (namespace.has(...))`.
        
           */
        
        
        
        
        
          get(name) {
        
            if (this.current.hasOwnProperty(name)) {
        
              return this.current[name];
        
            } else {
        
              return this.builtins[name];
        
            }
        
          }
        
          /**
        
           * Set the current value of a name, and optionally set it globally too.
        
           * Local set() sets the current value and (when appropriate) adds an undo
        
           * operation to the undo stack.  Global set() may change the undo
        
           * operation at every level, so takes time linear in their number.
        
           * A value of undefined means to delete existing definitions.
        
           */
        
        
        
        
        
          set(name, value, global) {
        
            if (global === void 0) {
        
              global = false;
        
            }
        
        
        
            if (global) {
        
              // Global set is equivalent to setting in all groups.  Simulate this
        
              // by destroying any undos currently scheduled for this name,
        
              // and adding an undo with the *new* value (in case it later gets
        
              // locally reset within this environment).
        
              for (var i = 0; i < this.undefStack.length; i++) {
        
                delete this.undefStack[i][name];
        
              }
        
        
        
              if (this.undefStack.length > 0) {
        
                this.undefStack[this.undefStack.length - 1][name] = value;
        
              }
        
            } else {
        
              // Undo this set at end of this group (possibly to `undefined`),
        
              // unless an undo is already in place, in which case that older
        
              // value is the correct one.
        
              var top = this.undefStack[this.undefStack.length - 1];
        
        
        
              if (top && !top.hasOwnProperty(name)) {
        
                top[name] = this.current[name];
        
              }
        
            }
        
        
        
            if (value == null) {
        
              delete this.current[name];
        
            } else {
        
              this.current[name] = value;
        
            }
        
          }
        
        
        
        }
        
        
        
        /**
        
         * Predefined macros for KaTeX.
        
         * This can be used to define some commands in terms of others.
        
         */
        
        var macros = _macros;
        
        // macro tools
        
        
        
        defineMacro("\\noexpand", function (context) {
        
          // The expansion is the token itself; but that token is interpreted
        
          // as if its meaning were ‘\relax’ if it is a control sequence that
        
          // would ordinarily be expanded by TeX’s expansion rules.
        
          var t = context.popToken();
        
        
        
          if (context.isExpandable(t.text)) {
        
            t.noexpand = true;
        
            t.treatAsRelax = true;
        
          }
        
        
        
          return {
        
            tokens: [t],
        
            numArgs: 0
        
          };
        
        });
        
        defineMacro("\\expandafter", function (context) {
        
          // TeX first reads the token that comes immediately after \expandafter,
        
          // without expanding it; let’s call this token t. Then TeX reads the
        
          // token that comes after t (and possibly more tokens, if that token
        
          // has an argument), replacing it by its expansion. Finally TeX puts
        
          // t back in front of that expansion.
        
          var t = context.popToken();
        
          context.expandOnce(true); // expand only an expandable token
        
        
        
          return {
        
            tokens: [t],
        
            numArgs: 0
        
          };
        
        }); // LaTeX's \@firstoftwo{#1}{#2} expands to #1, skipping #2
        
        // TeX source: \long\def\@firstoftwo#1#2{#1}
        
        
        
        defineMacro("\\@firstoftwo", function (context) {
        
          var args = context.consumeArgs(2);
        
          return {
        
            tokens: args[0],
        
            numArgs: 0
        
          };
        
        }); // LaTeX's \@secondoftwo{#1}{#2} expands to #2, skipping #1
        
        // TeX source: \long\def\@secondoftwo#1#2{#2}
        
        
        
        defineMacro("\\@secondoftwo", function (context) {
        
          var args = context.consumeArgs(2);
        
          return {
        
            tokens: args[1],
        
            numArgs: 0
        
          };
        
        }); // LaTeX's \@ifnextchar{#1}{#2}{#3} looks ahead to the next (unexpanded)
        
        // symbol that isn't a space, consuming any spaces but not consuming the
        
        // first nonspace character.  If that nonspace character matches #1, then
        
        // the macro expands to #2; otherwise, it expands to #3.
        
        
        
        defineMacro("\\@ifnextchar", function (context) {
        
          var args = context.consumeArgs(3); // symbol, if, else
        
        
        
          context.consumeSpaces();
        
          var nextToken = context.future();
        
        
        
          if (args[0].length === 1 && args[0][0].text === nextToken.text) {
        
            return {
        
              tokens: args[1],
        
              numArgs: 0
        
            };
        
          } else {
        
            return {
        
              tokens: args[2],
        
              numArgs: 0
        
            };
        
          }
        
        }); // LaTeX's \@ifstar{#1}{#2} looks ahead to the next (unexpanded) symbol.
        
        // If it is `*`, then it consumes the symbol, and the macro expands to #1;
        
        // otherwise, the macro expands to #2 (without consuming the symbol).
        
        // TeX source: \def\@ifstar#1{\@ifnextchar *{\@firstoftwo{#1}}}
        
        
        
        defineMacro("\\@ifstar", "\\@ifnextchar *{\\@firstoftwo{#1}}"); // LaTeX's \TextOrMath{#1}{#2} expands to #1 in text mode, #2 in math mode
        
        
        
        defineMacro("\\TextOrMath", function (context) {
        
          var args = context.consumeArgs(2);
        
        
        
          if (context.mode === 'text') {
        
            return {
        
              tokens: args[0],
        
              numArgs: 0
        
            };
        
          } else {
        
            return {
        
              tokens: args[1],
        
              numArgs: 0
        
            };
        
          }
        
        }); // Lookup table for parsing numbers in base 8 through 16
        
        
        
        var digitToNumber = {
        
          "0": 0,
        
          "1": 1,
        
          "2": 2,
        
          "3": 3,
        
          "4": 4,
        
          "5": 5,
        
          "6": 6,
        
          "7": 7,
        
          "8": 8,
        
          "9": 9,
        
          "a": 10,
        
          "A": 10,
        
          "b": 11,
        
          "B": 11,
        
          "c": 12,
        
          "C": 12,
        
          "d": 13,
        
          "D": 13,
        
          "e": 14,
        
          "E": 14,
        
          "f": 15,
        
          "F": 15
        
        }; // TeX \char makes a literal character (catcode 12) using the following forms:
        
        // (see The TeXBook, p. 43)
        
        //   \char123  -- decimal
        
        //   \char'123 -- octal
        
        //   \char"123 -- hex
        
        //   \char`x   -- character that can be written (i.e. isn't active)
        
        //   \char`\x  -- character that cannot be written (e.g. %)
        
        // These all refer to characters from the font, so we turn them into special
        
        // calls to a function \@char dealt with in the Parser.
        
        
        
        defineMacro("\\char", function (context) {
        
          var token = context.popToken();
        
          var base;
        
          var number = '';
        
        
        
          if (token.text === "'") {
        
            base = 8;
        
            token = context.popToken();
        
          } else if (token.text === '"') {
        
            base = 16;
        
            token = context.popToken();
        
          } else if (token.text === "`") {
        
            token = context.popToken();
        
        
        
            if (token.text[0] === "\\") {
        
              number = token.text.charCodeAt(1);
        
            } else if (token.text === "EOF") {
        
              throw new ParseError("\\char` missing argument");
        
            } else {
        
              number = token.text.charCodeAt(0);
        
            }
        
          } else {
        
            base = 10;
        
          }
        
        
        
          if (base) {
        
            // Parse a number in the given base, starting with first `token`.
        
            number = digitToNumber[token.text];
        
        
        
            if (number == null || number >= base) {
        
              throw new ParseError("Invalid base-" + base + " digit " + token.text);
        
            }
        
        
        
            var digit;
        
        
        
            while ((digit = digitToNumber[context.future().text]) != null && digit < base) {
        
              number *= base;
        
              number += digit;
        
              context.popToken();
        
            }
        
          }
        
        
        
          return "\\@char{" + number + "}";
        
        }); // \newcommand{\macro}[args]{definition}
        
        // \renewcommand{\macro}[args]{definition}
        
        // TODO: Optional arguments: \newcommand{\macro}[args][default]{definition}
        
        
        
        var newcommand = (context, existsOK, nonexistsOK) => {
        
          var arg = context.consumeArg().tokens;
        
        
        
          if (arg.length !== 1) {
        
            throw new ParseError("\\newcommand's first argument must be a macro name");
        
          }
        
        
        
          var name = arg[0].text;
        
          var exists = context.isDefined(name);
        
        
        
          if (exists && !existsOK) {
        
            throw new ParseError("\\newcommand{" + name + "} attempting to redefine " + (name + "; use \\renewcommand"));
        
          }
        
        
        
          if (!exists && !nonexistsOK) {
        
            throw new ParseError("\\renewcommand{" + name + "} when command " + name + " " + "does not yet exist; use \\newcommand");
        
          }
        
        
        
          var numArgs = 0;
        
          arg = context.consumeArg().tokens;
        
        
        
          if (arg.length === 1 && arg[0].text === "[") {
        
            var argText = '';
        
            var token = context.expandNextToken();
        
        
        
            while (token.text !== "]" && token.text !== "EOF") {
        
              // TODO: Should properly expand arg, e.g., ignore {}s
        
              argText += token.text;
        
              token = context.expandNextToken();
        
            }
        
        
        
            if (!argText.match(/^\s*[0-9]+\s*$/)) {
        
              throw new ParseError("Invalid number of arguments: " + argText);
        
            }
        
        
        
            numArgs = parseInt(argText);
        
            arg = context.consumeArg().tokens;
        
          } // Final arg is the expansion of the macro
        
        
        
        
        
          context.macros.set(name, {
        
            tokens: arg,
        
            numArgs
        
          });
        
          return '';
        
        };
        
        
        
        defineMacro("\\newcommand", context => newcommand(context, false, true));
        
        defineMacro("\\renewcommand", context => newcommand(context, true, false));
        
        defineMacro("\\providecommand", context => newcommand(context, true, true)); // terminal (console) tools
        
        
        
        defineMacro("\\message", context => {
        
          var arg = context.consumeArgs(1)[0]; // eslint-disable-next-line no-console
        
        
        
          console.log(arg.reverse().map(token => token.text).join(""));
        
          return '';
        
        });
        
        defineMacro("\\errmessage", context => {
        
          var arg = context.consumeArgs(1)[0]; // eslint-disable-next-line no-console
        
        
        
          console.error(arg.reverse().map(token => token.text).join(""));
        
          return '';
        
        });
        
        defineMacro("\\show", context => {
        
          var tok = context.popToken();
        
          var name = tok.text; // eslint-disable-next-line no-console
        
        
        
          console.log(tok, context.macros.get(name), functions[name], symbols.math[name], symbols.text[name]);
        
          return '';
        
        }); //////////////////////////////////////////////////////////////////////
        
        // Grouping
        
        // \let\bgroup={ \let\egroup=}
        
        
        
        defineMacro("\\bgroup", "{");
        
        defineMacro("\\egroup", "}"); // Symbols from latex.ltx:
        
        // \def~{\nobreakspace{}}
        
        // \def\lq{`}
        
        // \def\rq{'}
        
        // \def \aa {\r a}
        
        // \def \AA {\r A}
        
        
        
        defineMacro("~", "\\nobreakspace");
        
        defineMacro("\\lq", "`");
        
        defineMacro("\\rq", "'");
        
        defineMacro("\\aa", "\\r a");
        
        defineMacro("\\AA", "\\r A"); // Copyright (C) and registered (R) symbols. Use raw symbol in MathML.
        
        // \DeclareTextCommandDefault{\textcopyright}{\textcircled{c}}
        
        // \DeclareTextCommandDefault{\textregistered}{\textcircled{%
        
        //      \check@mathfonts\fontsize\sf@size\z@\math@fontsfalse\selectfont R}}
        
        // \DeclareRobustCommand{\copyright}{%
        
        //    \ifmmode{\nfss@text{\textcopyright}}\else\textcopyright\fi}
        
        
        
        defineMacro("\\textcopyright", "\\html@mathml{\\textcircled{c}}{\\char`©}");
        
        defineMacro("\\copyright", "\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");
        
        defineMacro("\\textregistered", "\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"); // Characters omitted from Unicode range 1D400–1D7FF
        
        
        
        defineMacro("\u212C", "\\mathscr{B}"); // script
        
        
        
        defineMacro("\u2130", "\\mathscr{E}");
        
        defineMacro("\u2131", "\\mathscr{F}");
        
        defineMacro("\u210B", "\\mathscr{H}");
        
        defineMacro("\u2110", "\\mathscr{I}");
        
        defineMacro("\u2112", "\\mathscr{L}");
        
        defineMacro("\u2133", "\\mathscr{M}");
        
        defineMacro("\u211B", "\\mathscr{R}");
        
        defineMacro("\u212D", "\\mathfrak{C}"); // Fraktur
        
        
        
        defineMacro("\u210C", "\\mathfrak{H}");
        
        defineMacro("\u2128", "\\mathfrak{Z}"); // Define \Bbbk with a macro that works in both HTML and MathML.
        
        
        
        defineMacro("\\Bbbk", "\\Bbb{k}"); // Unicode middle dot
        
        // The KaTeX fonts do not contain U+00B7. Instead, \cdotp displays
        
        // the dot at U+22C5 and gives it punct spacing.
        
        
        
        defineMacro("\u00b7", "\\cdotp"); // \llap and \rlap render their contents in text mode
        
        
        
        defineMacro("\\llap", "\\mathllap{\\textrm{#1}}");
        
        defineMacro("\\rlap", "\\mathrlap{\\textrm{#1}}");
        
        defineMacro("\\clap", "\\mathclap{\\textrm{#1}}"); // \mathstrut from the TeXbook, p 360
        
        
        
        defineMacro("\\mathstrut", "\\vphantom{(}"); // \underbar from TeXbook p 353
        
        
        
        defineMacro("\\underbar", "\\underline{\\text{#1}}"); // \not is defined by base/fontmath.ltx via
        
        // \DeclareMathSymbol{\not}{\mathrel}{symbols}{"36}
        
        // It's thus treated like a \mathrel, but defined by a symbol that has zero
        
        // width but extends to the right.  We use \rlap to get that spacing.
        
        // For MathML we write U+0338 here. buildMathML.js will then do the overlay.
        
        
        
        defineMacro("\\not", '\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'); // Negated symbols from base/fontmath.ltx:
        
        // \def\neq{\not=} \let\ne=\neq
        
        // \DeclareRobustCommand
        
        //   \notin{\mathrel{\m@th\mathpalette\c@ncel\in}}
        
        // \def\c@ncel#1#2{\m@th\ooalign{$\hfil#1\mkern1mu/\hfil$\crcr$#1#2$}}
        
        
        
        defineMacro("\\neq", "\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");
        
        defineMacro("\\ne", "\\neq");
        
        defineMacro("\u2260", "\\neq");
        
        defineMacro("\\notin", "\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}" + "{\\mathrel{\\char`∉}}");
        
        defineMacro("\u2209", "\\notin"); // Unicode stacked relations
        
        
        
        defineMacro("\u2258", "\\html@mathml{" + "\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}" + "}{\\mathrel{\\char`\u2258}}");
        
        defineMacro("\u2259", "\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}");
        
        defineMacro("\u225A", "\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225A}}");
        
        defineMacro("\u225B", "\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}" + "{\\mathrel{\\char`\u225B}}");
        
        defineMacro("\u225D", "\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}" + "{\\mathrel{\\char`\u225D}}");
        
        defineMacro("\u225E", "\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}" + "{\\mathrel{\\char`\u225E}}");
        
        defineMacro("\u225F", "\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225F}}"); // Misc Unicode
        
        
        
        defineMacro("\u27C2", "\\perp");
        
        defineMacro("\u203C", "\\mathclose{!\\mkern-0.8mu!}");
        
        defineMacro("\u220C", "\\notni");
        
        defineMacro("\u231C", "\\ulcorner");
        
        defineMacro("\u231D", "\\urcorner");
        
        defineMacro("\u231E", "\\llcorner");
        
        defineMacro("\u231F", "\\lrcorner");
        
        defineMacro("\u00A9", "\\copyright");
        
        defineMacro("\u00AE", "\\textregistered");
        
        defineMacro("\uFE0F", "\\textregistered"); // The KaTeX fonts have corners at codepoints that don't match Unicode.
        
        // For MathML purposes, use the Unicode code point.
        
        
        
        defineMacro("\\ulcorner", "\\html@mathml{\\@ulcorner}{\\mathop{\\char\"231c}}");
        
        defineMacro("\\urcorner", "\\html@mathml{\\@urcorner}{\\mathop{\\char\"231d}}");
        
        defineMacro("\\llcorner", "\\html@mathml{\\@llcorner}{\\mathop{\\char\"231e}}");
        
        defineMacro("\\lrcorner", "\\html@mathml{\\@lrcorner}{\\mathop{\\char\"231f}}"); //////////////////////////////////////////////////////////////////////
        
        // LaTeX_2ε
        
        // \vdots{\vbox{\baselineskip4\p@  \lineskiplimit\z@
        
        // \kern6\p@\hbox{.}\hbox{.}\hbox{.}}}
        
        // We'll call \varvdots, which gets a glyph from symbols.js.
        
        // The zero-width rule gets us an equivalent to the vertical 6pt kern.
        
        
        
        defineMacro("\\vdots", "\\mathord{\\varvdots\\rule{0pt}{15pt}}");
        
        defineMacro("\u22ee", "\\vdots"); //////////////////////////////////////////////////////////////////////
        
        // amsmath.sty
        
        // http://mirrors.concertpass.com/tex-archive/macros/latex/required/amsmath/amsmath.pdf
        
        // Italic Greek capital letters.  AMS defines these with \DeclareMathSymbol,
        
        // but they are equivalent to \mathit{\Letter}.
        
        
        
        defineMacro("\\varGamma", "\\mathit{\\Gamma}");
        
        defineMacro("\\varDelta", "\\mathit{\\Delta}");
        
        defineMacro("\\varTheta", "\\mathit{\\Theta}");
        
        defineMacro("\\varLambda", "\\mathit{\\Lambda}");
        
        defineMacro("\\varXi", "\\mathit{\\Xi}");
        
        defineMacro("\\varPi", "\\mathit{\\Pi}");
        
        defineMacro("\\varSigma", "\\mathit{\\Sigma}");
        
        defineMacro("\\varUpsilon", "\\mathit{\\Upsilon}");
        
        defineMacro("\\varPhi", "\\mathit{\\Phi}");
        
        defineMacro("\\varPsi", "\\mathit{\\Psi}");
        
        defineMacro("\\varOmega", "\\mathit{\\Omega}"); //\newcommand{\substack}[1]{\subarray{c}#1\endsubarray}
        
        
        
        defineMacro("\\substack", "\\begin{subarray}{c}#1\\end{subarray}"); // \renewcommand{\colon}{\nobreak\mskip2mu\mathpunct{}\nonscript
        
        // \mkern-\thinmuskip{:}\mskip6muplus1mu\relax}
        
        
        
        defineMacro("\\colon", "\\nobreak\\mskip2mu\\mathpunct{}" + "\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"); // \newcommand{\boxed}[1]{\fbox{\m@th$\displaystyle#1$}}
        
        
        
        defineMacro("\\boxed", "\\fbox{$\\displaystyle{#1}$}"); // \def\iff{\DOTSB\;\Longleftrightarrow\;}
        
        // \def\implies{\DOTSB\;\Longrightarrow\;}
        
        // \def\impliedby{\DOTSB\;\Longleftarrow\;}
        
        
        
        defineMacro("\\iff", "\\DOTSB\\;\\Longleftrightarrow\\;");
        
        defineMacro("\\implies", "\\DOTSB\\;\\Longrightarrow\\;");
        
        defineMacro("\\impliedby", "\\DOTSB\\;\\Longleftarrow\\;"); // AMSMath's automatic \dots, based on \mdots@@ macro.
        
        
        
        var dotsByToken = {
        
          ',': '\\dotsc',
        
          '\\not': '\\dotsb',
        
          // \keybin@ checks for the following:
        
          '+': '\\dotsb',
        
          '=': '\\dotsb',
        
          '<': '\\dotsb',
        
          '>': '\\dotsb',
        
          '-': '\\dotsb',
        
          '*': '\\dotsb',
        
          ':': '\\dotsb',
        
          // Symbols whose definition starts with \DOTSB:
        
          '\\DOTSB': '\\dotsb',
        
          '\\coprod': '\\dotsb',
        
          '\\bigvee': '\\dotsb',
        
          '\\bigwedge': '\\dotsb',
        
          '\\biguplus': '\\dotsb',
        
          '\\bigcap': '\\dotsb',
        
          '\\bigcup': '\\dotsb',
        
          '\\prod': '\\dotsb',
        
          '\\sum': '\\dotsb',
        
          '\\bigotimes': '\\dotsb',
        
          '\\bigoplus': '\\dotsb',
        
          '\\bigodot': '\\dotsb',
        
          '\\bigsqcup': '\\dotsb',
        
          '\\And': '\\dotsb',
        
          '\\longrightarrow': '\\dotsb',
        
          '\\Longrightarrow': '\\dotsb',
        
          '\\longleftarrow': '\\dotsb',
        
          '\\Longleftarrow': '\\dotsb',
        
          '\\longleftrightarrow': '\\dotsb',
        
          '\\Longleftrightarrow': '\\dotsb',
        
          '\\mapsto': '\\dotsb',
        
          '\\longmapsto': '\\dotsb',
        
          '\\hookrightarrow': '\\dotsb',
        
          '\\doteq': '\\dotsb',
        
          // Symbols whose definition starts with \mathbin:
        
          '\\mathbin': '\\dotsb',
        
          // Symbols whose definition starts with \mathrel:
        
          '\\mathrel': '\\dotsb',
        
          '\\relbar': '\\dotsb',
        
          '\\Relbar': '\\dotsb',
        
          '\\xrightarrow': '\\dotsb',
        
          '\\xleftarrow': '\\dotsb',
        
          // Symbols whose definition starts with \DOTSI:
        
          '\\DOTSI': '\\dotsi',
        
          '\\int': '\\dotsi',
        
          '\\oint': '\\dotsi',
        
          '\\iint': '\\dotsi',
        
          '\\iiint': '\\dotsi',
        
          '\\iiiint': '\\dotsi',
        
          '\\idotsint': '\\dotsi',
        
          // Symbols whose definition starts with \DOTSX:
        
          '\\DOTSX': '\\dotsx'
        
        };
        
        defineMacro("\\dots", function (context) {
        
          // TODO: If used in text mode, should expand to \textellipsis.
        
          // However, in KaTeX, \textellipsis and \ldots behave the same
        
          // (in text mode), and it's unlikely we'd see any of the math commands
        
          // that affect the behavior of \dots when in text mode.  So fine for now
        
          // (until we support \ifmmode ... \else ... \fi).
        
          var thedots = '\\dotso';
        
          var next = context.expandAfterFuture().text;
        
        
        
          if (next in dotsByToken) {
        
            thedots = dotsByToken[next];
        
          } else if (next.slice(0, 4) === '\\not') {
        
            thedots = '\\dotsb';
        
          } else if (next in symbols.math) {
        
            if (utils.contains(['bin', 'rel'], symbols.math[next].group)) {
        
              thedots = '\\dotsb';
        
            }
        
          }
        
        
        
          return thedots;
        
        });
        
        var spaceAfterDots = {
        
          // \rightdelim@ checks for the following:
        
          ')': true,
        
          ']': true,
        
          '\\rbrack': true,
        
          '\\}': true,
        
          '\\rbrace': true,
        
          '\\rangle': true,
        
          '\\rceil': true,
        
          '\\rfloor': true,
        
          '\\rgroup': true,
        
          '\\rmoustache': true,
        
          '\\right': true,
        
          '\\bigr': true,
        
          '\\biggr': true,
        
          '\\Bigr': true,
        
          '\\Biggr': true,
        
          // \extra@ also tests for the following:
        
          '$': true,
        
          // \extrap@ checks for the following:
        
          ';': true,
        
          '.': true,
        
          ',': true
        
        };
        
        defineMacro("\\dotso", function (context) {
        
          var next = context.future().text;
        
        
        
          if (next in spaceAfterDots) {
        
            return "\\ldots\\,";
        
          } else {
        
            return "\\ldots";
        
          }
        
        });
        
        defineMacro("\\dotsc", function (context) {
        
          var next = context.future().text; // \dotsc uses \extra@ but not \extrap@, instead specially checking for
        
          // ';' and '.', but doesn't check for ','.
        
        
        
          if (next in spaceAfterDots && next !== ',') {
        
            return "\\ldots\\,";
        
          } else {
        
            return "\\ldots";
        
          }
        
        });
        
        defineMacro("\\cdots", function (context) {
        
          var next = context.future().text;
        
        
        
          if (next in spaceAfterDots) {
        
            return "\\@cdots\\,";
        
          } else {
        
            return "\\@cdots";
        
          }
        
        });
        
        defineMacro("\\dotsb", "\\cdots");
        
        defineMacro("\\dotsm", "\\cdots");
        
        defineMacro("\\dotsi", "\\!\\cdots"); // amsmath doesn't actually define \dotsx, but \dots followed by a macro
        
        // starting with \DOTSX implies \dotso, and then \extra@ detects this case
        
        // and forces the added `\,`.
        
        
        
        defineMacro("\\dotsx", "\\ldots\\,"); // \let\DOTSI\relax
        
        // \let\DOTSB\relax
        
        // \let\DOTSX\relax
        
        
        
        defineMacro("\\DOTSI", "\\relax");
        
        defineMacro("\\DOTSB", "\\relax");
        
        defineMacro("\\DOTSX", "\\relax"); // Spacing, based on amsmath.sty's override of LaTeX defaults
        
        // \DeclareRobustCommand{\tmspace}[3]{%
        
        //   \ifmmode\mskip#1#2\else\kern#1#3\fi\relax}
        
        
        
        defineMacro("\\tmspace", "\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"); // \renewcommand{\,}{\tmspace+\thinmuskip{.1667em}}
        
        // TODO: math mode should use \thinmuskip
        
        
        
        defineMacro("\\,", "\\tmspace+{3mu}{.1667em}"); // \let\thinspace\,
        
        
        
        defineMacro("\\thinspace", "\\,"); // \def\>{\mskip\medmuskip}
        
        // \renewcommand{\:}{\tmspace+\medmuskip{.2222em}}
        
        // TODO: \> and math mode of \: should use \medmuskip = 4mu plus 2mu minus 4mu
        
        
        
        defineMacro("\\>", "\\mskip{4mu}");
        
        defineMacro("\\:", "\\tmspace+{4mu}{.2222em}"); // \let\medspace\:
        
        
        
        defineMacro("\\medspace", "\\:"); // \renewcommand{\;}{\tmspace+\thickmuskip{.2777em}}
        
        // TODO: math mode should use \thickmuskip = 5mu plus 5mu
        
        
        
        defineMacro("\\;", "\\tmspace+{5mu}{.2777em}"); // \let\thickspace\;
        
        
        
        defineMacro("\\thickspace", "\\;"); // \renewcommand{\!}{\tmspace-\thinmuskip{.1667em}}
        
        // TODO: math mode should use \thinmuskip
        
        
        
        defineMacro("\\!", "\\tmspace-{3mu}{.1667em}"); // \let\negthinspace\!
        
        
        
        defineMacro("\\negthinspace", "\\!"); // \newcommand{\negmedspace}{\tmspace-\medmuskip{.2222em}}
        
        // TODO: math mode should use \medmuskip
        
        
        
        defineMacro("\\negmedspace", "\\tmspace-{4mu}{.2222em}"); // \newcommand{\negthickspace}{\tmspace-\thickmuskip{.2777em}}
        
        // TODO: math mode should use \thickmuskip
        
        
        
        defineMacro("\\negthickspace", "\\tmspace-{5mu}{.277em}"); // \def\enspace{\kern.5em }
        
        
        
        defineMacro("\\enspace", "\\kern.5em "); // \def\enskip{\hskip.5em\relax}
        
        
        
        defineMacro("\\enskip", "\\hskip.5em\\relax"); // \def\quad{\hskip1em\relax}
        
        
        
        defineMacro("\\quad", "\\hskip1em\\relax"); // \def\qquad{\hskip2em\relax}
        
        
        
        defineMacro("\\qquad", "\\hskip2em\\relax"); // \tag@in@display form of \tag
        
        
        
        defineMacro("\\tag", "\\@ifstar\\tag@literal\\tag@paren");
        
        defineMacro("\\tag@paren", "\\tag@literal{({#1})}");
        
        defineMacro("\\tag@literal", context => {
        
          if (context.macros.get("\\df@tag")) {
        
            throw new ParseError("Multiple \\tag");
        
          }
        
        
        
          return "\\gdef\\df@tag{\\text{#1}}";
        
        }); // \renewcommand{\bmod}{\nonscript\mskip-\medmuskip\mkern5mu\mathbin
        
        //   {\operator@font mod}\penalty900
        
        //   \mkern5mu\nonscript\mskip-\medmuskip}
        
        // \newcommand{\pod}[1]{\allowbreak
        
        //   \if@display\mkern18mu\else\mkern8mu\fi(#1)}
        
        // \renewcommand{\pmod}[1]{\pod{{\operator@font mod}\mkern6mu#1}}
        
        // \newcommand{\mod}[1]{\allowbreak\if@display\mkern18mu
        
        //   \else\mkern12mu\fi{\operator@font mod}\,\,#1}
        
        // TODO: math mode should use \medmuskip = 4mu plus 2mu minus 4mu
        
        
        
        defineMacro("\\bmod", "\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}" + "\\mathbin{\\rm mod}" + "\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");
        
        defineMacro("\\pod", "\\allowbreak" + "\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");
        
        defineMacro("\\pmod", "\\pod{{\\rm mod}\\mkern6mu#1}");
        
        defineMacro("\\mod", "\\allowbreak" + "\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}" + "{\\rm mod}\\,\\,#1"); //////////////////////////////////////////////////////////////////////
        
        // LaTeX source2e
        
        // \expandafter\let\expandafter\@normalcr
        
        //     \csname\expandafter\@gobble\string\\ \endcsname
        
        // \DeclareRobustCommand\newline{\@normalcr\relax}
        
        
        
        defineMacro("\\newline", "\\\\\\relax"); // \def\TeX{T\kern-.1667em\lower.5ex\hbox{E}\kern-.125emX\@}
        
        // TODO: Doesn't normally work in math mode because \@ fails.  KaTeX doesn't
        
        // support \@ yet, so that's omitted, and we add \text so that the result
        
        // doesn't look funny in math mode.
        
        
        
        defineMacro("\\TeX", "\\textrm{\\html@mathml{" + "T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX" + "}{TeX}}"); // \DeclareRobustCommand{\LaTeX}{L\kern-.36em%
        
        //         {\sbox\z@ T%
        
        //          \vbox to\ht\z@{\hbox{\check@mathfonts
        
        //                               \fontsize\sf@size\z@
        
        //                               \math@fontsfalse\selectfont
        
        //                               A}%
        
        //                         \vss}%
        
        //         }%
        
        //         \kern-.15em%
        
        //         \TeX}
        
        // This code aligns the top of the A with the T (from the perspective of TeX's
        
        // boxes, though visually the A appears to extend above slightly).
        
        // We compute the corresponding \raisebox when A is rendered in \normalsize
        
        // \scriptstyle, which has a scale factor of 0.7 (see Options.js).
        
        
        
        var latexRaiseA = makeEm(fontMetricsData['Main-Regular']["T".charCodeAt(0)][1] - 0.7 * fontMetricsData['Main-Regular']["A".charCodeAt(0)][1]);
        
        defineMacro("\\LaTeX", "\\textrm{\\html@mathml{" + ("L\\kern-.36em\\raisebox{" + latexRaiseA + "}{\\scriptstyle A}") + "\\kern-.15em\\TeX}{LaTeX}}"); // New KaTeX logo based on tweaking LaTeX logo
        
        
        
        defineMacro("\\KaTeX", "\\textrm{\\html@mathml{" + ("K\\kern-.17em\\raisebox{" + latexRaiseA + "}{\\scriptstyle A}") + "\\kern-.15em\\TeX}{KaTeX}}"); // \DeclareRobustCommand\hspace{\@ifstar\@hspacer\@hspace}
        
        // \def\@hspace#1{\hskip  #1\relax}
        
        // \def\@hspacer#1{\vrule \@width\z@\nobreak
        
        //                 \hskip #1\hskip \z@skip}
        
        
        
        defineMacro("\\hspace", "\\@ifstar\\@hspacer\\@hspace");
        
        defineMacro("\\@hspace", "\\hskip #1\\relax");
        
        defineMacro("\\@hspacer", "\\rule{0pt}{0pt}\\hskip #1\\relax"); //////////////////////////////////////////////////////////////////////
        
        // mathtools.sty
        
        //\providecommand\ordinarycolon{:}
        
        
        
        defineMacro("\\ordinarycolon", ":"); //\def\vcentcolon{\mathrel{\mathop\ordinarycolon}}
        
        //TODO(edemaine): Not yet centered. Fix via \raisebox or #726
        
        
        
        defineMacro("\\vcentcolon", "\\mathrel{\\mathop\\ordinarycolon}"); // \providecommand*\dblcolon{\vcentcolon\mathrel{\mkern-.9mu}\vcentcolon}
        
        
        
        defineMacro("\\dblcolon", "\\html@mathml{" + "\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}" + "{\\mathop{\\char\"2237}}"); // \providecommand*\coloneqq{\vcentcolon\mathrel{\mkern-1.2mu}=}
        
        
        
        defineMacro("\\coloneqq", "\\html@mathml{" + "\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}" + "{\\mathop{\\char\"2254}}"); // ≔
        
        // \providecommand*\Coloneqq{\dblcolon\mathrel{\mkern-1.2mu}=}
        
        
        
        defineMacro("\\Coloneqq", "\\html@mathml{" + "\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}" + "{\\mathop{\\char\"2237\\char\"3d}}"); // \providecommand*\coloneq{\vcentcolon\mathrel{\mkern-1.2mu}\mathrel{-}}
        
        
        
        defineMacro("\\coloneq", "\\html@mathml{" + "\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}" + "{\\mathop{\\char\"3a\\char\"2212}}"); // \providecommand*\Coloneq{\dblcolon\mathrel{\mkern-1.2mu}\mathrel{-}}
        
        
        
        defineMacro("\\Coloneq", "\\html@mathml{" + "\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}" + "{\\mathop{\\char\"2237\\char\"2212}}"); // \providecommand*\eqqcolon{=\mathrel{\mkern-1.2mu}\vcentcolon}
        
        
        
        defineMacro("\\eqqcolon", "\\html@mathml{" + "\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}" + "{\\mathop{\\char\"2255}}"); // ≕
        
        // \providecommand*\Eqqcolon{=\mathrel{\mkern-1.2mu}\dblcolon}
        
        
        
        defineMacro("\\Eqqcolon", "\\html@mathml{" + "\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}" + "{\\mathop{\\char\"3d\\char\"2237}}"); // \providecommand*\eqcolon{\mathrel{-}\mathrel{\mkern-1.2mu}\vcentcolon}
        
        
        
        defineMacro("\\eqcolon", "\\html@mathml{" + "\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}" + "{\\mathop{\\char\"2239}}"); // \providecommand*\Eqcolon{\mathrel{-}\mathrel{\mkern-1.2mu}\dblcolon}
        
        
        
        defineMacro("\\Eqcolon", "\\html@mathml{" + "\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}" + "{\\mathop{\\char\"2212\\char\"2237}}"); // \providecommand*\colonapprox{\vcentcolon\mathrel{\mkern-1.2mu}\approx}
        
        
        
        defineMacro("\\colonapprox", "\\html@mathml{" + "\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}" + "{\\mathop{\\char\"3a\\char\"2248}}"); // \providecommand*\Colonapprox{\dblcolon\mathrel{\mkern-1.2mu}\approx}
        
        
        
        defineMacro("\\Colonapprox", "\\html@mathml{" + "\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}" + "{\\mathop{\\char\"2237\\char\"2248}}"); // \providecommand*\colonsim{\vcentcolon\mathrel{\mkern-1.2mu}\sim}
        
        
        
        defineMacro("\\colonsim", "\\html@mathml{" + "\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}" + "{\\mathop{\\char\"3a\\char\"223c}}"); // \providecommand*\Colonsim{\dblcolon\mathrel{\mkern-1.2mu}\sim}
        
        
        
        defineMacro("\\Colonsim", "\\html@mathml{" + "\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}" + "{\\mathop{\\char\"2237\\char\"223c}}"); // Some Unicode characters are implemented with macros to mathtools functions.
        
        
        
        defineMacro("\u2237", "\\dblcolon"); // ::
        
        
        
        defineMacro("\u2239", "\\eqcolon"); // -:
        
        
        
        defineMacro("\u2254", "\\coloneqq"); // :=
        
        
        
        defineMacro("\u2255", "\\eqqcolon"); // =:
        
        
        
        defineMacro("\u2A74", "\\Coloneqq"); // ::=
        
        //////////////////////////////////////////////////////////////////////
        
        // colonequals.sty
        
        // Alternate names for mathtools's macros:
        
        
        
        defineMacro("\\ratio", "\\vcentcolon");
        
        defineMacro("\\coloncolon", "\\dblcolon");
        
        defineMacro("\\colonequals", "\\coloneqq");
        
        defineMacro("\\coloncolonequals", "\\Coloneqq");
        
        defineMacro("\\equalscolon", "\\eqqcolon");
        
        defineMacro("\\equalscoloncolon", "\\Eqqcolon");
        
        defineMacro("\\colonminus", "\\coloneq");
        
        defineMacro("\\coloncolonminus", "\\Coloneq");
        
        defineMacro("\\minuscolon", "\\eqcolon");
        
        defineMacro("\\minuscoloncolon", "\\Eqcolon"); // \colonapprox name is same in mathtools and colonequals.
        
        
        
        defineMacro("\\coloncolonapprox", "\\Colonapprox"); // \colonsim name is same in mathtools and colonequals.
        
        
        
        defineMacro("\\coloncolonsim", "\\Colonsim"); // Additional macros, implemented by analogy with mathtools definitions:
        
        
        
        defineMacro("\\simcolon", "\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");
        
        defineMacro("\\simcoloncolon", "\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");
        
        defineMacro("\\approxcolon", "\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");
        
        defineMacro("\\approxcoloncolon", "\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"); // Present in newtxmath, pxfonts and txfonts
        
        
        
        defineMacro("\\notni", "\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220C}}");
        
        defineMacro("\\limsup", "\\DOTSB\\operatorname*{lim\\,sup}");
        
        defineMacro("\\liminf", "\\DOTSB\\operatorname*{lim\\,inf}"); //////////////////////////////////////////////////////////////////////
        
        // From amsopn.sty
        
        
        
        defineMacro("\\injlim", "\\DOTSB\\operatorname*{inj\\,lim}");
        
        defineMacro("\\projlim", "\\DOTSB\\operatorname*{proj\\,lim}");
        
        defineMacro("\\varlimsup", "\\DOTSB\\operatorname*{\\overline{lim}}");
        
        defineMacro("\\varliminf", "\\DOTSB\\operatorname*{\\underline{lim}}");
        
        defineMacro("\\varinjlim", "\\DOTSB\\operatorname*{\\underrightarrow{lim}}");
        
        defineMacro("\\varprojlim", "\\DOTSB\\operatorname*{\\underleftarrow{lim}}"); //////////////////////////////////////////////////////////////////////
        
        // MathML alternates for KaTeX glyphs in the Unicode private area
        
        
        
        defineMacro("\\gvertneqq", "\\html@mathml{\\@gvertneqq}{\u2269}");
        
        defineMacro("\\lvertneqq", "\\html@mathml{\\@lvertneqq}{\u2268}");
        
        defineMacro("\\ngeqq", "\\html@mathml{\\@ngeqq}{\u2271}");
        
        defineMacro("\\ngeqslant", "\\html@mathml{\\@ngeqslant}{\u2271}");
        
        defineMacro("\\nleqq", "\\html@mathml{\\@nleqq}{\u2270}");
        
        defineMacro("\\nleqslant", "\\html@mathml{\\@nleqslant}{\u2270}");
        
        defineMacro("\\nshortmid", "\\html@mathml{\\@nshortmid}{∤}");
        
        defineMacro("\\nshortparallel", "\\html@mathml{\\@nshortparallel}{∦}");
        
        defineMacro("\\nsubseteqq", "\\html@mathml{\\@nsubseteqq}{\u2288}");
        
        defineMacro("\\nsupseteqq", "\\html@mathml{\\@nsupseteqq}{\u2289}");
        
        defineMacro("\\varsubsetneq", "\\html@mathml{\\@varsubsetneq}{⊊}");
        
        defineMacro("\\varsubsetneqq", "\\html@mathml{\\@varsubsetneqq}{⫋}");
        
        defineMacro("\\varsupsetneq", "\\html@mathml{\\@varsupsetneq}{⊋}");
        
        defineMacro("\\varsupsetneqq", "\\html@mathml{\\@varsupsetneqq}{⫌}");
        
        defineMacro("\\imath", "\\html@mathml{\\@imath}{\u0131}");
        
        defineMacro("\\jmath", "\\html@mathml{\\@jmath}{\u0237}"); //////////////////////////////////////////////////////////////////////
        
        // stmaryrd and semantic
        
        // The stmaryrd and semantic packages render the next four items by calling a
        
        // glyph. Those glyphs do not exist in the KaTeX fonts. Hence the macros.
        
        
        
        defineMacro("\\llbracket", "\\html@mathml{" + "\\mathopen{[\\mkern-3.2mu[}}" + "{\\mathopen{\\char`\u27e6}}");
        
        defineMacro("\\rrbracket", "\\html@mathml{" + "\\mathclose{]\\mkern-3.2mu]}}" + "{\\mathclose{\\char`\u27e7}}");
        
        defineMacro("\u27e6", "\\llbracket"); // blackboard bold [
        
        
        
        defineMacro("\u27e7", "\\rrbracket"); // blackboard bold ]
        
        
        
        defineMacro("\\lBrace", "\\html@mathml{" + "\\mathopen{\\{\\mkern-3.2mu[}}" + "{\\mathopen{\\char`\u2983}}");
        
        defineMacro("\\rBrace", "\\html@mathml{" + "\\mathclose{]\\mkern-3.2mu\\}}}" + "{\\mathclose{\\char`\u2984}}");
        
        defineMacro("\u2983", "\\lBrace"); // blackboard bold {
        
        
        
        defineMacro("\u2984", "\\rBrace"); // blackboard bold }
        
        // TODO: Create variable sized versions of the last two items. I believe that
        
        // will require new font glyphs.
        
        // The stmaryrd function `\minuso` provides a "Plimsoll" symbol that
        
        // superimposes the characters \circ and \mathminus. Used in chemistry.
        
        
        
        defineMacro("\\minuso", "\\mathbin{\\html@mathml{" + "{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}" + "{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}" + "{\\char`⦵}}");
        
        defineMacro("⦵", "\\minuso"); //////////////////////////////////////////////////////////////////////
        
        // texvc.sty
        
        // The texvc package contains macros available in mediawiki pages.
        
        // We omit the functions deprecated at
        
        // https://en.wikipedia.org/wiki/Help:Displaying_a_formula#Deprecated_syntax
        
        // We also omit texvc's \O, which conflicts with \text{\O}
        
        
        
        defineMacro("\\darr", "\\downarrow");
        
        defineMacro("\\dArr", "\\Downarrow");
        
        defineMacro("\\Darr", "\\Downarrow");
        
        defineMacro("\\lang", "\\langle");
        
        defineMacro("\\rang", "\\rangle");
        
        defineMacro("\\uarr", "\\uparrow");
        
        defineMacro("\\uArr", "\\Uparrow");
        
        defineMacro("\\Uarr", "\\Uparrow");
        
        defineMacro("\\N", "\\mathbb{N}");
        
        defineMacro("\\R", "\\mathbb{R}");
        
        defineMacro("\\Z", "\\mathbb{Z}");
        
        defineMacro("\\alef", "\\aleph");
        
        defineMacro("\\alefsym", "\\aleph");
        
        defineMacro("\\Alpha", "\\mathrm{A}");
        
        defineMacro("\\Beta", "\\mathrm{B}");
        
        defineMacro("\\bull", "\\bullet");
        
        defineMacro("\\Chi", "\\mathrm{X}");
        
        defineMacro("\\clubs", "\\clubsuit");
        
        defineMacro("\\cnums", "\\mathbb{C}");
        
        defineMacro("\\Complex", "\\mathbb{C}");
        
        defineMacro("\\Dagger", "\\ddagger");
        
        defineMacro("\\diamonds", "\\diamondsuit");
        
        defineMacro("\\empty", "\\emptyset");
        
        defineMacro("\\Epsilon", "\\mathrm{E}");
        
        defineMacro("\\Eta", "\\mathrm{H}");
        
        defineMacro("\\exist", "\\exists");
        
        defineMacro("\\harr", "\\leftrightarrow");
        
        defineMacro("\\hArr", "\\Leftrightarrow");
        
        defineMacro("\\Harr", "\\Leftrightarrow");
        
        defineMacro("\\hearts", "\\heartsuit");
        
        defineMacro("\\image", "\\Im");
        
        defineMacro("\\infin", "\\infty");
        
        defineMacro("\\Iota", "\\mathrm{I}");
        
        defineMacro("\\isin", "\\in");
        
        defineMacro("\\Kappa", "\\mathrm{K}");
        
        defineMacro("\\larr", "\\leftarrow");
        
        defineMacro("\\lArr", "\\Leftarrow");
        
        defineMacro("\\Larr", "\\Leftarrow");
        
        defineMacro("\\lrarr", "\\leftrightarrow");
        
        defineMacro("\\lrArr", "\\Leftrightarrow");
        
        defineMacro("\\Lrarr", "\\Leftrightarrow");
        
        defineMacro("\\Mu", "\\mathrm{M}");
        
        defineMacro("\\natnums", "\\mathbb{N}");
        
        defineMacro("\\Nu", "\\mathrm{N}");
        
        defineMacro("\\Omicron", "\\mathrm{O}");
        
        defineMacro("\\plusmn", "\\pm");
        
        defineMacro("\\rarr", "\\rightarrow");
        
        defineMacro("\\rArr", "\\Rightarrow");
        
        defineMacro("\\Rarr", "\\Rightarrow");
        
        defineMacro("\\real", "\\Re");
        
        defineMacro("\\reals", "\\mathbb{R}");
        
        defineMacro("\\Reals", "\\mathbb{R}");
        
        defineMacro("\\Rho", "\\mathrm{P}");
        
        defineMacro("\\sdot", "\\cdot");
        
        defineMacro("\\sect", "\\S");
        
        defineMacro("\\spades", "\\spadesuit");
        
        defineMacro("\\sub", "\\subset");
        
        defineMacro("\\sube", "\\subseteq");
        
        defineMacro("\\supe", "\\supseteq");
        
        defineMacro("\\Tau", "\\mathrm{T}");
        
        defineMacro("\\thetasym", "\\vartheta"); // TODO: defineMacro("\\varcoppa", "\\\mbox{\\coppa}");
        
        
        
        defineMacro("\\weierp", "\\wp");
        
        defineMacro("\\Zeta", "\\mathrm{Z}"); //////////////////////////////////////////////////////////////////////
        
        // statmath.sty
        
        // https://ctan.math.illinois.edu/macros/latex/contrib/statmath/statmath.pdf
        
        
        
        defineMacro("\\argmin", "\\DOTSB\\operatorname*{arg\\,min}");
        
        defineMacro("\\argmax", "\\DOTSB\\operatorname*{arg\\,max}");
        
        defineMacro("\\plim", "\\DOTSB\\mathop{\\operatorname{plim}}\\limits"); //////////////////////////////////////////////////////////////////////
        
        // braket.sty
        
        // http://ctan.math.washington.edu/tex-archive/macros/latex/contrib/braket/braket.pdf
        
        
        
        defineMacro("\\bra", "\\mathinner{\\langle{#1}|}");
        
        defineMacro("\\ket", "\\mathinner{|{#1}\\rangle}");
        
        defineMacro("\\braket", "\\mathinner{\\langle{#1}\\rangle}");
        
        defineMacro("\\Bra", "\\left\\langle#1\\right|");
        
        defineMacro("\\Ket", "\\left|#1\\right\\rangle");
        
        
        
        var braketHelper = one => context => {
        
          var left = context.consumeArg().tokens;
        
          var middle = context.consumeArg().tokens;
        
          var middleDouble = context.consumeArg().tokens;
        
          var right = context.consumeArg().tokens;
        
          var oldMiddle = context.macros.get("|");
        
          var oldMiddleDouble = context.macros.get("\\|");
        
          context.macros.beginGroup();
        
        
        
          var midMacro = double => context => {
        
            if (one) {
        
              // Only modify the first instance of | or \|
        
              context.macros.set("|", oldMiddle);
        
        
        
              if (middleDouble.length) {
        
                context.macros.set("\\|", oldMiddleDouble);
        
              }
        
            }
        
        
        
            var doubled = double;
        
        
        
            if (!double && middleDouble.length) {
        
              // Mimic \@ifnextchar
        
              var nextToken = context.future();
        
        
        
              if (nextToken.text === "|") {
        
                context.popToken();
        
                doubled = true;
        
              }
        
            }
        
        
        
            return {
        
              tokens: doubled ? middleDouble : middle,
        
              numArgs: 0
        
            };
        
          };
        
        
        
          context.macros.set("|", midMacro(false));
        
        
        
          if (middleDouble.length) {
        
            context.macros.set("\\|", midMacro(true));
        
          }
        
        
        
          var arg = context.consumeArg().tokens;
        
          var expanded = context.expandTokens([...right, ...arg, ...left // reversed
        
          ]);
        
          context.macros.endGroup();
        
          return {
        
            tokens: expanded.reverse(),
        
            numArgs: 0
        
          };
        
        };
        
        
        
        defineMacro("\\bra@ket", braketHelper(false));
        
        defineMacro("\\bra@set", braketHelper(true));
        
        defineMacro("\\Braket", "\\bra@ket{\\left\\langle}" + "{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");
        
        defineMacro("\\Set", "\\bra@set{\\left\\{\\:}" + "{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");
        
        defineMacro("\\set", "\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"); // has no support for special || or \|
        
        //////////////////////////////////////////////////////////////////////
        
        // actuarialangle.dtx
        
        
        
        defineMacro("\\angln", "{\\angl n}"); // Custom Khan Academy colors, should be moved to an optional package
        
        
        
        defineMacro("\\blue", "\\textcolor{##6495ed}{#1}");
        
        defineMacro("\\orange", "\\textcolor{##ffa500}{#1}");
        
        defineMacro("\\pink", "\\textcolor{##ff00af}{#1}");
        
        defineMacro("\\red", "\\textcolor{##df0030}{#1}");
        
        defineMacro("\\green", "\\textcolor{##28ae7b}{#1}");
        
        defineMacro("\\gray", "\\textcolor{gray}{#1}");
        
        defineMacro("\\purple", "\\textcolor{##9d38bd}{#1}");
        
        defineMacro("\\blueA", "\\textcolor{##ccfaff}{#1}");
        
        defineMacro("\\blueB", "\\textcolor{##80f6ff}{#1}");
        
        defineMacro("\\blueC", "\\textcolor{##63d9ea}{#1}");
        
        defineMacro("\\blueD", "\\textcolor{##11accd}{#1}");
        
        defineMacro("\\blueE", "\\textcolor{##0c7f99}{#1}");
        
        defineMacro("\\tealA", "\\textcolor{##94fff5}{#1}");
        
        defineMacro("\\tealB", "\\textcolor{##26edd5}{#1}");
        
        defineMacro("\\tealC", "\\textcolor{##01d1c1}{#1}");
        
        defineMacro("\\tealD", "\\textcolor{##01a995}{#1}");
        
        defineMacro("\\tealE", "\\textcolor{##208170}{#1}");
        
        defineMacro("\\greenA", "\\textcolor{##b6ffb0}{#1}");
        
        defineMacro("\\greenB", "\\textcolor{##8af281}{#1}");
        
        defineMacro("\\greenC", "\\textcolor{##74cf70}{#1}");
        
        defineMacro("\\greenD", "\\textcolor{##1fab54}{#1}");
        
        defineMacro("\\greenE", "\\textcolor{##0d923f}{#1}");
        
        defineMacro("\\goldA", "\\textcolor{##ffd0a9}{#1}");
        
        defineMacro("\\goldB", "\\textcolor{##ffbb71}{#1}");
        
        defineMacro("\\goldC", "\\textcolor{##ff9c39}{#1}");
        
        defineMacro("\\goldD", "\\textcolor{##e07d10}{#1}");
        
        defineMacro("\\goldE", "\\textcolor{##a75a05}{#1}");
        
        defineMacro("\\redA", "\\textcolor{##fca9a9}{#1}");
        
        defineMacro("\\redB", "\\textcolor{##ff8482}{#1}");
        
        defineMacro("\\redC", "\\textcolor{##f9685d}{#1}");
        
        defineMacro("\\redD", "\\textcolor{##e84d39}{#1}");
        
        defineMacro("\\redE", "\\textcolor{##bc2612}{#1}");
        
        defineMacro("\\maroonA", "\\textcolor{##ffbde0}{#1}");
        
        defineMacro("\\maroonB", "\\textcolor{##ff92c6}{#1}");
        
        defineMacro("\\maroonC", "\\textcolor{##ed5fa6}{#1}");
        
        defineMacro("\\maroonD", "\\textcolor{##ca337c}{#1}");
        
        defineMacro("\\maroonE", "\\textcolor{##9e034e}{#1}");
        
        defineMacro("\\purpleA", "\\textcolor{##ddd7ff}{#1}");
        
        defineMacro("\\purpleB", "\\textcolor{##c6b9fc}{#1}");
        
        defineMacro("\\purpleC", "\\textcolor{##aa87ff}{#1}");
        
        defineMacro("\\purpleD", "\\textcolor{##7854ab}{#1}");
        
        defineMacro("\\purpleE", "\\textcolor{##543b78}{#1}");
        
        defineMacro("\\mintA", "\\textcolor{##f5f9e8}{#1}");
        
        defineMacro("\\mintB", "\\textcolor{##edf2df}{#1}");
        
        defineMacro("\\mintC", "\\textcolor{##e0e5cc}{#1}");
        
        defineMacro("\\grayA", "\\textcolor{##f6f7f7}{#1}");
        
        defineMacro("\\grayB", "\\textcolor{##f0f1f2}{#1}");
        
        defineMacro("\\grayC", "\\textcolor{##e3e5e6}{#1}");
        
        defineMacro("\\grayD", "\\textcolor{##d6d8da}{#1}");
        
        defineMacro("\\grayE", "\\textcolor{##babec2}{#1}");
        
        defineMacro("\\grayF", "\\textcolor{##888d93}{#1}");
        
        defineMacro("\\grayG", "\\textcolor{##626569}{#1}");
        
        defineMacro("\\grayH", "\\textcolor{##3b3e40}{#1}");
        
        defineMacro("\\grayI", "\\textcolor{##21242c}{#1}");
        
        defineMacro("\\kaBlue", "\\textcolor{##314453}{#1}");
        
        defineMacro("\\kaGreen", "\\textcolor{##71B307}{#1}");
        
        
        
        /**
        
         * This file contains the “gullet” where macros are expanded
        
         * until only non-macro tokens remain.
        
         */
        
        // List of commands that act like macros but aren't defined as a macro,
        
        // function, or symbol.  Used in `isDefined`.
        
        var implicitCommands = {
        
          "^": true,
        
          // Parser.js
        
          "_": true,
        
          // Parser.js
        
          "\\limits": true,
        
          // Parser.js
        
          "\\nolimits": true // Parser.js
        
        
        
        };
        
        class MacroExpander {
        
          constructor(input, settings, mode) {
        
            this.settings = void 0;
        
            this.expansionCount = void 0;
        
            this.lexer = void 0;
        
            this.macros = void 0;
        
            this.stack = void 0;
        
            this.mode = void 0;
        
            this.settings = settings;
        
            this.expansionCount = 0;
        
            this.feed(input); // Make new global namespace
        
        
        
            this.macros = new Namespace(macros, settings.macros);
        
            this.mode = mode;
        
            this.stack = []; // contains tokens in REVERSE order
        
          }
        
          /**
        
           * Feed a new input string to the same MacroExpander
        
           * (with existing macros etc.).
        
           */
        
        
        
        
        
          feed(input) {
        
            this.lexer = new Lexer(input, this.settings);
        
          }
        
          /**
        
           * Switches between "text" and "math" modes.
        
           */
        
        
        
        
        
          switchMode(newMode) {
        
            this.mode = newMode;
        
          }
        
          /**
        
           * Start a new group nesting within all namespaces.
        
           */
        
        
        
        
        
          beginGroup() {
        
            this.macros.beginGroup();
        
          }
        
          /**
        
           * End current group nesting within all namespaces.
        
           */
        
        
        
        
        
          endGroup() {
        
            this.macros.endGroup();
        
          }
        
          /**
        
           * Ends all currently nested groups (if any), restoring values before the
        
           * groups began.  Useful in case of an error in the middle of parsing.
        
           */
        
        
        
        
        
          endGroups() {
        
            this.macros.endGroups();
        
          }
        
          /**
        
           * Returns the topmost token on the stack, without expanding it.
        
           * Similar in behavior to TeX's `\futurelet`.
        
           */
        
        
        
        
        
          future() {
        
            if (this.stack.length === 0) {
        
              this.pushToken(this.lexer.lex());
        
            }
        
        
        
            return this.stack[this.stack.length - 1];
        
          }
        
          /**
        
           * Remove and return the next unexpanded token.
        
           */
        
        
        
        
        
          popToken() {
        
            this.future(); // ensure non-empty stack
        
        
        
            return this.stack.pop();
        
          }
        
          /**
        
           * Add a given token to the token stack.  In particular, this get be used
        
           * to put back a token returned from one of the other methods.
        
           */
        
        
        
        
        
          pushToken(token) {
        
            this.stack.push(token);
        
          }
        
          /**
        
           * Append an array of tokens to the token stack.
        
           */
        
        
        
        
        
          pushTokens(tokens) {
        
            this.stack.push(...tokens);
        
          }
        
          /**
        
           * Find an macro argument without expanding tokens and append the array of
        
           * tokens to the token stack. Uses Token as a container for the result.
        
           */
        
        
        
        
        
          scanArgument(isOptional) {
        
            var start;
        
            var end;
        
            var tokens;
        
        
        
            if (isOptional) {
        
              this.consumeSpaces(); // \@ifnextchar gobbles any space following it
        
        
        
              if (this.future().text !== "[") {
        
                return null;
        
              }
        
        
        
              start = this.popToken(); // don't include [ in tokens
        
        
        
              ({
        
                tokens,
        
                end
        
              } = this.consumeArg(["]"]));
        
            } else {
        
              ({
        
                tokens,
        
                start,
        
                end
        
              } = this.consumeArg());
        
            } // indicate the end of an argument
        
        
        
        
        
            this.pushToken(new Token("EOF", end.loc));
        
            this.pushTokens(tokens);
        
            return start.range(end, "");
        
          }
        
          /**
        
           * Consume all following space tokens, without expansion.
        
           */
        
        
        
        
        
          consumeSpaces() {
        
            for (;;) {
        
              var token = this.future();
        
        
        
              if (token.text === " ") {
        
                this.stack.pop();
        
              } else {
        
                break;
        
              }
        
            }
        
          }
        
          /**
        
           * Consume an argument from the token stream, and return the resulting array
        
           * of tokens and start/end token.
        
           */
        
        
        
        
        
          consumeArg(delims) {
        
            // The argument for a delimited parameter is the shortest (possibly
        
            // empty) sequence of tokens with properly nested {...} groups that is
        
            // followed ... by this particular list of non-parameter tokens.
        
            // The argument for an undelimited parameter is the next nonblank
        
            // token, unless that token is ‘{’, when the argument will be the
        
            // entire {...} group that follows.
        
            var tokens = [];
        
            var isDelimited = delims && delims.length > 0;
        
        
        
            if (!isDelimited) {
        
              // Ignore spaces between arguments.  As the TeXbook says:
        
              // "After you have said ‘\def\row#1#2{...}’, you are allowed to
        
              //  put spaces between the arguments (e.g., ‘\row x n’), because
        
              //  TeX doesn’t use single spaces as undelimited arguments."
        
              this.consumeSpaces();
        
            }
        
        
        
            var start = this.future();
        
            var tok;
        
            var depth = 0;
        
            var match = 0;
        
        
        
            do {
        
              tok = this.popToken();
        
              tokens.push(tok);
        
        
        
              if (tok.text === "{") {
        
                ++depth;
        
              } else if (tok.text === "}") {
        
                --depth;
        
        
        
                if (depth === -1) {
        
                  throw new ParseError("Extra }", tok);
        
                }
        
              } else if (tok.text === "EOF") {
        
                throw new ParseError("Unexpected end of input in a macro argument" + ", expected '" + (delims && isDelimited ? delims[match] : "}") + "'", tok);
        
              }
        
        
        
              if (delims && isDelimited) {
        
                if ((depth === 0 || depth === 1 && delims[match] === "{") && tok.text === delims[match]) {
        
                  ++match;
        
        
        
                  if (match === delims.length) {
        
                    // don't include delims in tokens
        
                    tokens.splice(-match, match);
        
                    break;
        
                  }
        
                } else {
        
                  match = 0;
        
                }
        
              }
        
            } while (depth !== 0 || isDelimited); // If the argument found ... has the form ‘{<nested tokens>}’,
        
            // ... the outermost braces enclosing the argument are removed
        
        
        
        
        
            if (start.text === "{" && tokens[tokens.length - 1].text === "}") {
        
              tokens.pop();
        
              tokens.shift();
        
            }
        
        
        
            tokens.reverse(); // to fit in with stack order
        
        
        
            return {
        
              tokens,
        
              start,
        
              end: tok
        
            };
        
          }
        
          /**
        
           * Consume the specified number of (delimited) arguments from the token
        
           * stream and return the resulting array of arguments.
        
           */
        
        
        
        
        
          consumeArgs(numArgs, delimiters) {
        
            if (delimiters) {
        
              if (delimiters.length !== numArgs + 1) {
        
                throw new ParseError("The length of delimiters doesn't match the number of args!");
        
              }
        
        
        
              var delims = delimiters[0];
        
        
        
              for (var i = 0; i < delims.length; i++) {
        
                var tok = this.popToken();
        
        
        
                if (delims[i] !== tok.text) {
        
                  throw new ParseError("Use of the macro doesn't match its definition", tok);
        
                }
        
              }
        
            }
        
        
        
            var args = [];
        
        
        
            for (var _i = 0; _i < numArgs; _i++) {
        
              args.push(this.consumeArg(delimiters && delimiters[_i + 1]).tokens);
        
            }
        
        
        
            return args;
        
          }
        
          /**
        
           * Expand the next token only once if possible.
        
           *
        
           * If the token is expanded, the resulting tokens will be pushed onto
        
           * the stack in reverse order, and the number of such tokens will be
        
           * returned.  This number might be zero or positive.
        
           *
        
           * If not, the return value is `false`, and the next token remains at the
        
           * top of the stack.
        
           *
        
           * In either case, the next token will be on the top of the stack,
        
           * or the stack will be empty (in case of empty expansion
        
           * and no other tokens).
        
           *
        
           * Used to implement `expandAfterFuture` and `expandNextToken`.
        
           *
        
           * If expandableOnly, only expandable tokens are expanded and
        
           * an undefined control sequence results in an error.
        
           */
        
        
        
        
        
          expandOnce(expandableOnly) {
        
            var topToken = this.popToken();
        
            var name = topToken.text;
        
            var expansion = !topToken.noexpand ? this._getExpansion(name) : null;
        
        
        
            if (expansion == null || expandableOnly && expansion.unexpandable) {
        
              if (expandableOnly && expansion == null && name[0] === "\\" && !this.isDefined(name)) {
        
                throw new ParseError("Undefined control sequence: " + name);
        
              }
        
        
        
              this.pushToken(topToken);
        
              return false;
        
            }
        
        
        
            this.expansionCount++;
        
        
        
            if (this.expansionCount > this.settings.maxExpand) {
        
              throw new ParseError("Too many expansions: infinite loop or " + "need to increase maxExpand setting");
        
            }
        
        
        
            var tokens = expansion.tokens;
        
            var args = this.consumeArgs(expansion.numArgs, expansion.delimiters);
        
        
        
            if (expansion.numArgs) {
        
              // paste arguments in place of the placeholders
        
              tokens = tokens.slice(); // make a shallow copy
        
        
        
              for (var i = tokens.length - 1; i >= 0; --i) {
        
                var tok = tokens[i];
        
        
        
                if (tok.text === "#") {
        
                  if (i === 0) {
        
                    throw new ParseError("Incomplete placeholder at end of macro body", tok);
        
                  }
        
        
        
                  tok = tokens[--i]; // next token on stack
        
        
        
                  if (tok.text === "#") {
        
                    // ## → #
        
                    tokens.splice(i + 1, 1); // drop first #
        
                  } else if (/^[1-9]$/.test(tok.text)) {
        
                    // replace the placeholder with the indicated argument
        
                    tokens.splice(i, 2, ...args[+tok.text - 1]);
        
                  } else {
        
                    throw new ParseError("Not a valid argument number", tok);
        
                  }
        
                }
        
              }
        
            } // Concatenate expansion onto top of stack.
        
        
        
        
        
            this.pushTokens(tokens);
        
            return tokens.length;
        
          }
        
          /**
        
           * Expand the next token only once (if possible), and return the resulting
        
           * top token on the stack (without removing anything from the stack).
        
           * Similar in behavior to TeX's `\expandafter\futurelet`.
        
           * Equivalent to expandOnce() followed by future().
        
           */
        
        
        
        
        
          expandAfterFuture() {
        
            this.expandOnce();
        
            return this.future();
        
          }
        
          /**
        
           * Recursively expand first token, then return first non-expandable token.
        
           */
        
        
        
        
        
          expandNextToken() {
        
            for (;;) {
        
              if (this.expandOnce() === false) {
        
                // fully expanded
        
                var token = this.stack.pop(); // the token after \noexpand is interpreted as if its meaning
        
                // were ‘\relax’
        
        
        
                if (token.treatAsRelax) {
        
                  token.text = "\\relax";
        
                }
        
        
        
                return token;
        
              }
        
            } // Flow unable to figure out that this pathway is impossible.
        
            // https://github.com/facebook/flow/issues/4808
        
        
        
        
        
            throw new Error(); // eslint-disable-line no-unreachable
        
          }
        
          /**
        
           * Fully expand the given macro name and return the resulting list of
        
           * tokens, or return `undefined` if no such macro is defined.
        
           */
        
        
        
        
        
          expandMacro(name) {
        
            return this.macros.has(name) ? this.expandTokens([new Token(name)]) : undefined;
        
          }
        
          /**
        
           * Fully expand the given token stream and return the resulting list of
        
           * tokens.  Note that the input tokens are in reverse order, but the
        
           * output tokens are in forward order.
        
           */
        
        
        
        
        
          expandTokens(tokens) {
        
            var output = [];
        
            var oldStackLength = this.stack.length;
        
            this.pushTokens(tokens);
        
        
        
            while (this.stack.length > oldStackLength) {
        
              // Expand only expandable tokens
        
              if (this.expandOnce(true) === false) {
        
                // fully expanded
        
                var token = this.stack.pop();
        
        
        
                if (token.treatAsRelax) {
        
                  // the expansion of \noexpand is the token itself
        
                  token.noexpand = false;
        
                  token.treatAsRelax = false;
        
                }
        
        
        
                output.push(token);
        
              }
        
            }
        
        
        
            return output;
        
          }
        
          /**
        
           * Fully expand the given macro name and return the result as a string,
        
           * or return `undefined` if no such macro is defined.
        
           */
        
        
        
        
        
          expandMacroAsText(name) {
        
            var tokens = this.expandMacro(name);
        
        
        
            if (tokens) {
        
              return tokens.map(token => token.text).join("");
        
            } else {
        
              return tokens;
        
            }
        
          }
        
          /**
        
           * Returns the expanded macro as a reversed array of tokens and a macro
        
           * argument count.  Or returns `null` if no such macro.
        
           */
        
        
        
        
        
          _getExpansion(name) {
        
            var definition = this.macros.get(name);
        
        
        
            if (definition == null) {
        
              // mainly checking for undefined here
        
              return definition;
        
            } // If a single character has an associated catcode other than 13
        
            // (active character), then don't expand it.
        
        
        
        
        
            if (name.length === 1) {
        
              var catcode = this.lexer.catcodes[name];
        
        
        
              if (catcode != null && catcode !== 13) {
        
                return;
        
              }
        
            }
        
        
        
            var expansion = typeof definition === "function" ? definition(this) : definition;
        
        
        
            if (typeof expansion === "string") {
        
              var numArgs = 0;
        
        
        
              if (expansion.indexOf("#") !== -1) {
        
                var stripped = expansion.replace(/##/g, "");
        
        
        
                while (stripped.indexOf("#" + (numArgs + 1)) !== -1) {
        
                  ++numArgs;
        
                }
        
              }
        
        
        
              var bodyLexer = new Lexer(expansion, this.settings);
        
              var tokens = [];
        
              var tok = bodyLexer.lex();
        
        
        
              while (tok.text !== "EOF") {
        
                tokens.push(tok);
        
                tok = bodyLexer.lex();
        
              }
        
        
        
              tokens.reverse(); // to fit in with stack using push and pop
        
        
        
              var expanded = {
        
                tokens,
        
                numArgs
        
              };
        
              return expanded;
        
            }
        
        
        
            return expansion;
        
          }
        
          /**
        
           * Determine whether a command is currently "defined" (has some
        
           * functionality), meaning that it's a macro (in the current group),
        
           * a function, a symbol, or one of the special commands listed in
        
           * `implicitCommands`.
        
           */
        
        
        
        
        
          isDefined(name) {
        
            return this.macros.has(name) || functions.hasOwnProperty(name) || symbols.math.hasOwnProperty(name) || symbols.text.hasOwnProperty(name) || implicitCommands.hasOwnProperty(name);
        
          }
        
          /**
        
           * Determine whether a command is expandable.
        
           */
        
        
        
        
        
          isExpandable(name) {
        
            var macro = this.macros.get(name);
        
            return macro != null ? typeof macro === "string" || typeof macro === "function" || !macro.unexpandable : functions.hasOwnProperty(name) && !functions[name].primitive;
        
          }
        
        
        
        }
        
        
        
        // Helpers for Parser.js handling of Unicode (sub|super)script characters.
        
        var unicodeSubRegEx = /^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/;
        
        var uSubsAndSups = Object.freeze({
        
          '₊': '+',
        
          '₋': '-',
        
          '₌': '=',
        
          '₍': '(',
        
          '₎': ')',
        
          '₀': '0',
        
          '₁': '1',
        
          '₂': '2',
        
          '₃': '3',
        
          '₄': '4',
        
          '₅': '5',
        
          '₆': '6',
        
          '₇': '7',
        
          '₈': '8',
        
          '₉': '9',
        
          '\u2090': 'a',
        
          '\u2091': 'e',
        
          '\u2095': 'h',
        
          '\u1D62': 'i',
        
          '\u2C7C': 'j',
        
          '\u2096': 'k',
        
          '\u2097': 'l',
        
          '\u2098': 'm',
        
          '\u2099': 'n',
        
          '\u2092': 'o',
        
          '\u209A': 'p',
        
          '\u1D63': 'r',
        
          '\u209B': 's',
        
          '\u209C': 't',
        
          '\u1D64': 'u',
        
          '\u1D65': 'v',
        
          '\u2093': 'x',
        
          '\u1D66': 'β',
        
          '\u1D67': 'γ',
        
          '\u1D68': 'ρ',
        
          '\u1D69': '\u03d5',
        
          '\u1D6A': 'χ',
        
          '⁺': '+',
        
          '⁻': '-',
        
          '⁼': '=',
        
          '⁽': '(',
        
          '⁾': ')',
        
          '⁰': '0',
        
          '¹': '1',
        
          '²': '2',
        
          '³': '3',
        
          '⁴': '4',
        
          '⁵': '5',
        
          '⁶': '6',
        
          '⁷': '7',
        
          '⁸': '8',
        
          '⁹': '9',
        
          '\u1D2C': 'A',
        
          '\u1D2E': 'B',
        
          '\u1D30': 'D',
        
          '\u1D31': 'E',
        
          '\u1D33': 'G',
        
          '\u1D34': 'H',
        
          '\u1D35': 'I',
        
          '\u1D36': 'J',
        
          '\u1D37': 'K',
        
          '\u1D38': 'L',
        
          '\u1D39': 'M',
        
          '\u1D3A': 'N',
        
          '\u1D3C': 'O',
        
          '\u1D3E': 'P',
        
          '\u1D3F': 'R',
        
          '\u1D40': 'T',
        
          '\u1D41': 'U',
        
          '\u2C7D': 'V',
        
          '\u1D42': 'W',
        
          '\u1D43': 'a',
        
          '\u1D47': 'b',
        
          '\u1D9C': 'c',
        
          '\u1D48': 'd',
        
          '\u1D49': 'e',
        
          '\u1DA0': 'f',
        
          '\u1D4D': 'g',
        
          '\u02B0': 'h',
        
          '\u2071': 'i',
        
          '\u02B2': 'j',
        
          '\u1D4F': 'k',
        
          '\u02E1': 'l',
        
          '\u1D50': 'm',
        
          '\u207F': 'n',
        
          '\u1D52': 'o',
        
          '\u1D56': 'p',
        
          '\u02B3': 'r',
        
          '\u02E2': 's',
        
          '\u1D57': 't',
        
          '\u1D58': 'u',
        
          '\u1D5B': 'v',
        
          '\u02B7': 'w',
        
          '\u02E3': 'x',
        
          '\u02B8': 'y',
        
          '\u1DBB': 'z',
        
          '\u1D5D': 'β',
        
          '\u1D5E': 'γ',
        
          '\u1D5F': 'δ',
        
          '\u1D60': '\u03d5',
        
          '\u1D61': 'χ',
        
          '\u1DBF': 'θ'
        
        });
        
        
        
        /* eslint no-constant-condition:0 */
        
        
        
        var unicodeAccents = {
        
          "́": {
        
            "text": "\\'",
        
            "math": "\\acute"
        
          },
        
          "̀": {
        
            "text": "\\`",
        
            "math": "\\grave"
        
          },
        
          "̈": {
        
            "text": "\\\"",
        
            "math": "\\ddot"
        
          },
        
          "̃": {
        
            "text": "\\~",
        
            "math": "\\tilde"
        
          },
        
          "̄": {
        
            "text": "\\=",
        
            "math": "\\bar"
        
          },
        
          "̆": {
        
            "text": "\\u",
        
            "math": "\\breve"
        
          },
        
          "̌": {
        
            "text": "\\v",
        
            "math": "\\check"
        
          },
        
          "̂": {
        
            "text": "\\^",
        
            "math": "\\hat"
        
          },
        
          "̇": {
        
            "text": "\\.",
        
            "math": "\\dot"
        
          },
        
          "̊": {
        
            "text": "\\r",
        
            "math": "\\mathring"
        
          },
        
          "̋": {
        
            "text": "\\H"
        
          },
        
          "̧": {
        
            "text": "\\c"
        
          }
        
        };
        
        var unicodeSymbols = {
        
          "á": "á",
        
          "à": "à",
        
          "ä": "ä",
        
          "ǟ": "ǟ",
        
          "ã": "ã",
        
          "ā": "ā",
        
          "ă": "ă",
        
          "ắ": "ắ",
        
          "ằ": "ằ",
        
          "ẵ": "ẵ",
        
          "ǎ": "ǎ",
        
          "â": "â",
        
          "ấ": "ấ",
        
          "ầ": "ầ",
        
          "ẫ": "ẫ",
        
          "ȧ": "ȧ",
        
          "ǡ": "ǡ",
        
          "å": "å",
        
          "ǻ": "ǻ",
        
          "ḃ": "ḃ",
        
          "ć": "ć",
        
          "ḉ": "ḉ",
        
          "č": "č",
        
          "ĉ": "ĉ",
        
          "ċ": "ċ",
        
          "ç": "ç",
        
          "ď": "ď",
        
          "ḋ": "ḋ",
        
          "ḑ": "ḑ",
        
          "é": "é",
        
          "è": "è",
        
          "ë": "ë",
        
          "ẽ": "ẽ",
        
          "ē": "ē",
        
          "ḗ": "ḗ",
        
          "ḕ": "ḕ",
        
          "ĕ": "ĕ",
        
          "ḝ": "ḝ",
        
          "ě": "ě",
        
          "ê": "ê",
        
          "ế": "ế",
        
          "ề": "ề",
        
          "ễ": "ễ",
        
          "ė": "ė",
        
          "ȩ": "ȩ",
        
          "ḟ": "ḟ",
        
          "ǵ": "ǵ",
        
          "ḡ": "ḡ",
        
          "ğ": "ğ",
        
          "ǧ": "ǧ",
        
          "ĝ": "ĝ",
        
          "ġ": "ġ",
        
          "ģ": "ģ",
        
          "ḧ": "ḧ",
        
          "ȟ": "ȟ",
        
          "ĥ": "ĥ",
        
          "ḣ": "ḣ",
        
          "ḩ": "ḩ",
        
          "í": "í",
        
          "ì": "ì",
        
          "ï": "ï",
        
          "ḯ": "ḯ",
        
          "ĩ": "ĩ",
        
          "ī": "ī",
        
          "ĭ": "ĭ",
        
          "ǐ": "ǐ",
        
          "î": "î",
        
          "ǰ": "ǰ",
        
          "ĵ": "ĵ",
        
          "ḱ": "ḱ",
        
          "ǩ": "ǩ",
        
          "ķ": "ķ",
        
          "ĺ": "ĺ",
        
          "ľ": "ľ",
        
          "ļ": "ļ",
        
          "ḿ": "ḿ",
        
          "ṁ": "ṁ",
        
          "ń": "ń",
        
          "ǹ": "ǹ",
        
          "ñ": "ñ",
        
          "ň": "ň",
        
          "ṅ": "ṅ",
        
          "ņ": "ņ",
        
          "ó": "ó",
        
          "ò": "ò",
        
          "ö": "ö",
        
          "ȫ": "ȫ",
        
          "õ": "õ",
        
          "ṍ": "ṍ",
        
          "ṏ": "ṏ",
        
          "ȭ": "ȭ",
        
          "ō": "ō",
        
          "ṓ": "ṓ",
        
          "ṑ": "ṑ",
        
          "ŏ": "ŏ",
        
          "ǒ": "ǒ",
        
          "ô": "ô",
        
          "ố": "ố",
        
          "ồ": "ồ",
        
          "ỗ": "ỗ",
        
          "ȯ": "ȯ",
        
          "ȱ": "ȱ",
        
          "ő": "ő",
        
          "ṕ": "ṕ",
        
          "ṗ": "ṗ",
        
          "ŕ": "ŕ",
        
          "ř": "ř",
        
          "ṙ": "ṙ",
        
          "ŗ": "ŗ",
        
          "ś": "ś",
        
          "ṥ": "ṥ",
        
          "š": "š",
        
          "ṧ": "ṧ",
        
          "ŝ": "ŝ",
        
          "ṡ": "ṡ",
        
          "ş": "ş",
        
          "ẗ": "ẗ",
        
          "ť": "ť",
        
          "ṫ": "ṫ",
        
          "ţ": "ţ",
        
          "ú": "ú",
        
          "ù": "ù",
        
          "ü": "ü",
        
          "ǘ": "ǘ",
        
          "ǜ": "ǜ",
        
          "ǖ": "ǖ",
        
          "ǚ": "ǚ",
        
          "ũ": "ũ",
        
          "ṹ": "ṹ",
        
          "ū": "ū",
        
          "ṻ": "ṻ",
        
          "ŭ": "ŭ",
        
          "ǔ": "ǔ",
        
          "û": "û",
        
          "ů": "ů",
        
          "ű": "ű",
        
          "ṽ": "ṽ",
        
          "ẃ": "ẃ",
        
          "ẁ": "ẁ",
        
          "ẅ": "ẅ",
        
          "ŵ": "ŵ",
        
          "ẇ": "ẇ",
        
          "ẘ": "ẘ",
        
          "ẍ": "ẍ",
        
          "ẋ": "ẋ",
        
          "ý": "ý",
        
          "ỳ": "ỳ",
        
          "ÿ": "ÿ",
        
          "ỹ": "ỹ",
        
          "ȳ": "ȳ",
        
          "ŷ": "ŷ",
        
          "ẏ": "ẏ",
        
          "ẙ": "ẙ",
        
          "ź": "ź",
        
          "ž": "ž",
        
          "ẑ": "ẑ",
        
          "ż": "ż",
        
          "Á": "Á",
        
          "À": "À",
        
          "Ä": "Ä",
        
          "Ǟ": "Ǟ",
        
          "Ã": "Ã",
        
          "Ā": "Ā",
        
          "Ă": "Ă",
        
          "Ắ": "Ắ",
        
          "Ằ": "Ằ",
        
          "Ẵ": "Ẵ",
        
          "Ǎ": "Ǎ",
        
          "Â": "Â",
        
          "Ấ": "Ấ",
        
          "Ầ": "Ầ",
        
          "Ẫ": "Ẫ",
        
          "Ȧ": "Ȧ",
        
          "Ǡ": "Ǡ",
        
          "Å": "Å",
        
          "Ǻ": "Ǻ",
        
          "Ḃ": "Ḃ",
        
          "Ć": "Ć",
        
          "Ḉ": "Ḉ",
        
          "Č": "Č",
        
          "Ĉ": "Ĉ",
        
          "Ċ": "Ċ",
        
          "Ç": "Ç",
        
          "Ď": "Ď",
        
          "Ḋ": "Ḋ",
        
          "Ḑ": "Ḑ",
        
          "É": "É",
        
          "È": "È",
        
          "Ë": "Ë",
        
          "Ẽ": "Ẽ",
        
          "Ē": "Ē",
        
          "Ḗ": "Ḗ",
        
          "Ḕ": "Ḕ",
        
          "Ĕ": "Ĕ",
        
          "Ḝ": "Ḝ",
        
          "Ě": "Ě",
        
          "Ê": "Ê",
        
          "Ế": "Ế",
        
          "Ề": "Ề",
        
          "Ễ": "Ễ",
        
          "Ė": "Ė",
        
          "Ȩ": "Ȩ",
        
          "Ḟ": "Ḟ",
        
          "Ǵ": "Ǵ",
        
          "Ḡ": "Ḡ",
        
          "Ğ": "Ğ",
        
          "Ǧ": "Ǧ",
        
          "Ĝ": "Ĝ",
        
          "Ġ": "Ġ",
        
          "Ģ": "Ģ",
        
          "Ḧ": "Ḧ",
        
          "Ȟ": "Ȟ",
        
          "Ĥ": "Ĥ",
        
          "Ḣ": "Ḣ",
        
          "Ḩ": "Ḩ",
        
          "Í": "Í",
        
          "Ì": "Ì",
        
          "Ï": "Ï",
        
          "Ḯ": "Ḯ",
        
          "Ĩ": "Ĩ",
        
          "Ī": "Ī",
        
          "Ĭ": "Ĭ",
        
          "Ǐ": "Ǐ",
        
          "Î": "Î",
        
          "İ": "İ",
        
          "Ĵ": "Ĵ",
        
          "Ḱ": "Ḱ",
        
          "Ǩ": "Ǩ",
        
          "Ķ": "Ķ",
        
          "Ĺ": "Ĺ",
        
          "Ľ": "Ľ",
        
          "Ļ": "Ļ",
        
          "Ḿ": "Ḿ",
        
          "Ṁ": "Ṁ",
        
          "Ń": "Ń",
        
          "Ǹ": "Ǹ",
        
          "Ñ": "Ñ",
        
          "Ň": "Ň",
        
          "Ṅ": "Ṅ",
        
          "Ņ": "Ņ",
        
          "Ó": "Ó",
        
          "Ò": "Ò",
        
          "Ö": "Ö",
        
          "Ȫ": "Ȫ",
        
          "Õ": "Õ",
        
          "Ṍ": "Ṍ",
        
          "Ṏ": "Ṏ",
        
          "Ȭ": "Ȭ",
        
          "Ō": "Ō",
        
          "Ṓ": "Ṓ",
        
          "Ṑ": "Ṑ",
        
          "Ŏ": "Ŏ",
        
          "Ǒ": "Ǒ",
        
          "Ô": "Ô",
        
          "Ố": "Ố",
        
          "Ồ": "Ồ",
        
          "Ỗ": "Ỗ",
        
          "Ȯ": "Ȯ",
        
          "Ȱ": "Ȱ",
        
          "Ő": "Ő",
        
          "Ṕ": "Ṕ",
        
          "Ṗ": "Ṗ",
        
          "Ŕ": "Ŕ",
        
          "Ř": "Ř",
        
          "Ṙ": "Ṙ",
        
          "Ŗ": "Ŗ",
        
          "Ś": "Ś",
        
          "Ṥ": "Ṥ",
        
          "Š": "Š",
        
          "Ṧ": "Ṧ",
        
          "Ŝ": "Ŝ",
        
          "Ṡ": "Ṡ",
        
          "Ş": "Ş",
        
          "Ť": "Ť",
        
          "Ṫ": "Ṫ",
        
          "Ţ": "Ţ",
        
          "Ú": "Ú",
        
          "Ù": "Ù",
        
          "Ü": "Ü",
        
          "Ǘ": "Ǘ",
        
          "Ǜ": "Ǜ",
        
          "Ǖ": "Ǖ",
        
          "Ǚ": "Ǚ",
        
          "Ũ": "Ũ",
        
          "Ṹ": "Ṹ",
        
          "Ū": "Ū",
        
          "Ṻ": "Ṻ",
        
          "Ŭ": "Ŭ",
        
          "Ǔ": "Ǔ",
        
          "Û": "Û",
        
          "Ů": "Ů",
        
          "Ű": "Ű",
        
          "Ṽ": "Ṽ",
        
          "Ẃ": "Ẃ",
        
          "Ẁ": "Ẁ",
        
          "Ẅ": "Ẅ",
        
          "Ŵ": "Ŵ",
        
          "Ẇ": "Ẇ",
        
          "Ẍ": "Ẍ",
        
          "Ẋ": "Ẋ",
        
          "Ý": "Ý",
        
          "Ỳ": "Ỳ",
        
          "Ÿ": "Ÿ",
        
          "Ỹ": "Ỹ",
        
          "Ȳ": "Ȳ",
        
          "Ŷ": "Ŷ",
        
          "Ẏ": "Ẏ",
        
          "Ź": "Ź",
        
          "Ž": "Ž",
        
          "Ẑ": "Ẑ",
        
          "Ż": "Ż",
        
          "ά": "ά",
        
          "ὰ": "ὰ",
        
          "ᾱ": "ᾱ",
        
          "ᾰ": "ᾰ",
        
          "έ": "έ",
        
          "ὲ": "ὲ",
        
          "ή": "ή",
        
          "ὴ": "ὴ",
        
          "ί": "ί",
        
          "ὶ": "ὶ",
        
          "ϊ": "ϊ",
        
          "ΐ": "ΐ",
        
          "ῒ": "ῒ",
        
          "ῑ": "ῑ",
        
          "ῐ": "ῐ",
        
          "ό": "ό",
        
          "ὸ": "ὸ",
        
          "ύ": "ύ",
        
          "ὺ": "ὺ",
        
          "ϋ": "ϋ",
        
          "ΰ": "ΰ",
        
          "ῢ": "ῢ",
        
          "ῡ": "ῡ",
        
          "ῠ": "ῠ",
        
          "ώ": "ώ",
        
          "ὼ": "ὼ",
        
          "Ύ": "Ύ",
        
          "Ὺ": "Ὺ",
        
          "Ϋ": "Ϋ",
        
          "Ῡ": "Ῡ",
        
          "Ῠ": "Ῠ",
        
          "Ώ": "Ώ",
        
          "Ὼ": "Ὼ"
        
        };
        
        
        
        /**
        
         * This file contains the parser used to parse out a TeX expression from the
        
         * input. Since TeX isn't context-free, standard parsers don't work particularly
        
         * well.
        
         *
        
         * The strategy of this parser is as such:
        
         *
        
         * The main functions (the `.parse...` ones) take a position in the current
        
         * parse string to parse tokens from. The lexer (found in Lexer.js, stored at
        
         * this.gullet.lexer) also supports pulling out tokens at arbitrary places. When
        
         * individual tokens are needed at a position, the lexer is called to pull out a
        
         * token, which is then used.
        
         *
        
         * The parser has a property called "mode" indicating the mode that
        
         * the parser is currently in. Currently it has to be one of "math" or
        
         * "text", which denotes whether the current environment is a math-y
        
         * one or a text-y one (e.g. inside \text). Currently, this serves to
        
         * limit the functions which can be used in text mode.
        
         *
        
         * The main functions then return an object which contains the useful data that
        
         * was parsed at its given point, and a new position at the end of the parsed
        
         * data. The main functions can call each other and continue the parsing by
        
         * using the returned position as a new starting point.
        
         *
        
         * There are also extra `.handle...` functions, which pull out some reused
        
         * functionality into self-contained functions.
        
         *
        
         * The functions return ParseNodes.
        
         */
        
        class Parser {
        
          constructor(input, settings) {
        
            this.mode = void 0;
        
            this.gullet = void 0;
        
            this.settings = void 0;
        
            this.leftrightDepth = void 0;
        
            this.nextToken = void 0;
        
            // Start in math mode
        
            this.mode = "math"; // Create a new macro expander (gullet) and (indirectly via that) also a
        
            // new lexer (mouth) for this parser (stomach, in the language of TeX)
        
        
        
            this.gullet = new MacroExpander(input, settings, this.mode); // Store the settings for use in parsing
        
        
        
            this.settings = settings; // Count leftright depth (for \middle errors)
        
        
        
            this.leftrightDepth = 0;
        
          }
        
          /**
        
           * Checks a result to make sure it has the right type, and throws an
        
           * appropriate error otherwise.
        
           */
        
        
        
        
        
          expect(text, consume) {
        
            if (consume === void 0) {
        
              consume = true;
        
            }
        
        
        
            if (this.fetch().text !== text) {
        
              throw new ParseError("Expected '" + text + "', got '" + this.fetch().text + "'", this.fetch());
        
            }
        
        
        
            if (consume) {
        
              this.consume();
        
            }
        
          }
        
          /**
        
           * Discards the current lookahead token, considering it consumed.
        
           */
        
        
        
        
        
          consume() {
        
            this.nextToken = null;
        
          }
        
          /**
        
           * Return the current lookahead token, or if there isn't one (at the
        
           * beginning, or if the previous lookahead token was consume()d),
        
           * fetch the next token as the new lookahead token and return it.
        
           */
        
        
        
        
        
          fetch() {
        
            if (this.nextToken == null) {
        
              this.nextToken = this.gullet.expandNextToken();
        
            }
        
        
        
            return this.nextToken;
        
          }
        
          /**
        
           * Switches between "text" and "math" modes.
        
           */
        
        
        
        
        
          switchMode(newMode) {
        
            this.mode = newMode;
        
            this.gullet.switchMode(newMode);
        
          }
        
          /**
        
           * Main parsing function, which parses an entire input.
        
           */
        
        
        
        
        
          parse() {
        
            if (!this.settings.globalGroup) {
        
              // Create a group namespace for the math expression.
        
              // (LaTeX creates a new group for every $...$, $$...$$, \[...\].)
        
              this.gullet.beginGroup();
        
            } // Use old \color behavior (same as LaTeX's \textcolor) if requested.
        
            // We do this within the group for the math expression, so it doesn't
        
            // pollute settings.macros.
        
        
        
        
        
            if (this.settings.colorIsTextColor) {
        
              this.gullet.macros.set("\\color", "\\textcolor");
        
            }
        
        
        
            try {
        
              // Try to parse the input
        
              var parse = this.parseExpression(false); // If we succeeded, make sure there's an EOF at the end
        
        
        
              this.expect("EOF"); // End the group namespace for the expression
        
        
        
              if (!this.settings.globalGroup) {
        
                this.gullet.endGroup();
        
              }
        
        
        
              return parse; // Close any leftover groups in case of a parse error.
        
            } finally {
        
              this.gullet.endGroups();
        
            }
        
          }
        
          /**
        
           * Fully parse a separate sequence of tokens as a separate job.
        
           * Tokens should be specified in reverse order, as in a MacroDefinition.
        
           */
        
        
        
        
        
          subparse(tokens) {
        
            // Save the next token from the current job.
        
            var oldToken = this.nextToken;
        
            this.consume(); // Run the new job, terminating it with an excess '}'
        
        
        
            this.gullet.pushToken(new Token("}"));
        
            this.gullet.pushTokens(tokens);
        
            var parse = this.parseExpression(false);
        
            this.expect("}"); // Restore the next token from the current job.
        
        
        
            this.nextToken = oldToken;
        
            return parse;
        
          }
        
        
        
          /**
        
           * Parses an "expression", which is a list of atoms.
        
           *
        
           * `breakOnInfix`: Should the parsing stop when we hit infix nodes? This
        
           *                 happens when functions have higher precedence han infix
        
           *                 nodes in implicit parses.
        
           *
        
           * `breakOnTokenText`: The text of the token that the expression should end
        
           *                     with, or `null` if something else should end the
        
           *                     expression.
        
           */
        
          parseExpression(breakOnInfix, breakOnTokenText) {
        
            var body = []; // Keep adding atoms to the body until we can't parse any more atoms (either
        
            // we reached the end, a }, or a \right)
        
        
        
            while (true) {
        
              // Ignore spaces in math mode
        
              if (this.mode === "math") {
        
                this.consumeSpaces();
        
              }
        
        
        
              var lex = this.fetch();
        
        
        
              if (Parser.endOfExpression.indexOf(lex.text) !== -1) {
        
                break;
        
              }
        
        
        
              if (breakOnTokenText && lex.text === breakOnTokenText) {
        
                break;
        
              }
        
        
        
              if (breakOnInfix && functions[lex.text] && functions[lex.text].infix) {
        
                break;
        
              }
        
        
        
              var atom = this.parseAtom(breakOnTokenText);
        
        
        
              if (!atom) {
        
                break;
        
              } else if (atom.type === "internal") {
        
                continue;
        
              }
        
        
        
              body.push(atom);
        
            }
        
        
        
            if (this.mode === "text") {
        
              this.formLigatures(body);
        
            }
        
        
        
            return this.handleInfixNodes(body);
        
          }
        
          /**
        
           * Rewrites infix operators such as \over with corresponding commands such
        
           * as \frac.
        
           *
        
           * There can only be one infix operator per group.  If there's more than one
        
           * then the expression is ambiguous.  This can be resolved by adding {}.
        
           */
        
        
        
        
        
          handleInfixNodes(body) {
        
            var overIndex = -1;
        
            var funcName;
        
        
        
            for (var i = 0; i < body.length; i++) {
        
              if (body[i].type === "infix") {
        
                if (overIndex !== -1) {
        
                  throw new ParseError("only one infix operator per group", body[i].token);
        
                }
        
        
        
                overIndex = i;
        
                funcName = body[i].replaceWith;
        
              }
        
            }
        
        
        
            if (overIndex !== -1 && funcName) {
        
              var numerNode;
        
              var denomNode;
        
              var numerBody = body.slice(0, overIndex);
        
              var denomBody = body.slice(overIndex + 1);
        
        
        
              if (numerBody.length === 1 && numerBody[0].type === "ordgroup") {
        
                numerNode = numerBody[0];
        
              } else {
        
                numerNode = {
        
                  type: "ordgroup",
        
                  mode: this.mode,
        
                  body: numerBody
        
                };
        
              }
        
        
        
              if (denomBody.length === 1 && denomBody[0].type === "ordgroup") {
        
                denomNode = denomBody[0];
        
              } else {
        
                denomNode = {
        
                  type: "ordgroup",
        
                  mode: this.mode,
        
                  body: denomBody
        
                };
        
              }
        
        
        
              var node;
        
        
        
              if (funcName === "\\\\abovefrac") {
        
                node = this.callFunction(funcName, [numerNode, body[overIndex], denomNode], []);
        
              } else {
        
                node = this.callFunction(funcName, [numerNode, denomNode], []);
        
              }
        
        
        
              return [node];
        
            } else {
        
              return body;
        
            }
        
          }
        
          /**
        
           * Handle a subscript or superscript with nice errors.
        
           */
        
        
        
        
        
          handleSupSubscript(name // For error reporting.
        
          ) {
        
            var symbolToken = this.fetch();
        
            var symbol = symbolToken.text;
        
            this.consume();
        
            this.consumeSpaces(); // ignore spaces before sup/subscript argument
        
        
        
            var group = this.parseGroup(name);
        
        
        
            if (!group) {
        
              throw new ParseError("Expected group after '" + symbol + "'", symbolToken);
        
            }
        
        
        
            return group;
        
          }
        
          /**
        
           * Converts the textual input of an unsupported command into a text node
        
           * contained within a color node whose color is determined by errorColor
        
           */
        
        
        
        
        
          formatUnsupportedCmd(text) {
        
            var textordArray = [];
        
        
        
            for (var i = 0; i < text.length; i++) {
        
              textordArray.push({
        
                type: "textord",
        
                mode: "text",
        
                text: text[i]
        
              });
        
            }
        
        
        
            var textNode = {
        
              type: "text",
        
              mode: this.mode,
        
              body: textordArray
        
            };
        
            var colorNode = {
        
              type: "color",
        
              mode: this.mode,
        
              color: this.settings.errorColor,
        
              body: [textNode]
        
            };
        
            return colorNode;
        
          }
        
          /**
        
           * Parses a group with optional super/subscripts.
        
           */
        
        
        
        
        
          parseAtom(breakOnTokenText) {
        
            // The body of an atom is an implicit group, so that things like
        
            // \left(x\right)^2 work correctly.
        
            var base = this.parseGroup("atom", breakOnTokenText); // In text mode, we don't have superscripts or subscripts
        
        
        
            if (this.mode === "text") {
        
              return base;
        
            } // Note that base may be empty (i.e. null) at this point.
        
        
        
        
        
            var superscript;
        
            var subscript;
        
        
        
            while (true) {
        
              // Guaranteed in math mode, so eat any spaces first.
        
              this.consumeSpaces(); // Lex the first token
        
        
        
              var lex = this.fetch();
        
        
        
              if (lex.text === "\\limits" || lex.text === "\\nolimits") {
        
                // We got a limit control
        
                if (base && base.type === "op") {
        
                  var limits = lex.text === "\\limits";
        
                  base.limits = limits;
        
                  base.alwaysHandleSupSub = true;
        
                } else if (base && base.type === "operatorname") {
        
                  if (base.alwaysHandleSupSub) {
        
                    base.limits = lex.text === "\\limits";
        
                  }
        
                } else {
        
                  throw new ParseError("Limit controls must follow a math operator", lex);
        
                }
        
        
        
                this.consume();
        
              } else if (lex.text === "^") {
        
                // We got a superscript start
        
                if (superscript) {
        
                  throw new ParseError("Double superscript", lex);
        
                }
        
        
        
                superscript = this.handleSupSubscript("superscript");
        
              } else if (lex.text === "_") {
        
                // We got a subscript start
        
                if (subscript) {
        
                  throw new ParseError("Double subscript", lex);
        
                }
        
        
        
                subscript = this.handleSupSubscript("subscript");
        
              } else if (lex.text === "'") {
        
                // We got a prime
        
                if (superscript) {
        
                  throw new ParseError("Double superscript", lex);
        
                }
        
        
        
                var prime = {
        
                  type: "textord",
        
                  mode: this.mode,
        
                  text: "\\prime"
        
                }; // Many primes can be grouped together, so we handle this here
        
        
        
                var primes = [prime];
        
                this.consume(); // Keep lexing tokens until we get something that's not a prime
        
        
        
                while (this.fetch().text === "'") {
        
                  // For each one, add another prime to the list
        
                  primes.push(prime);
        
                  this.consume();
        
                } // If there's a superscript following the primes, combine that
        
                // superscript in with the primes.
        
        
        
        
        
                if (this.fetch().text === "^") {
        
                  primes.push(this.handleSupSubscript("superscript"));
        
                } // Put everything into an ordgroup as the superscript
        
        
        
        
        
                superscript = {
        
                  type: "ordgroup",
        
                  mode: this.mode,
        
                  body: primes
        
                };
        
              } else if (uSubsAndSups[lex.text]) {
        
                // A Unicode subscript or superscript character.
        
                // We treat these similarly to the unicode-math package.
        
                // So we render a string of Unicode (sub|super)scripts the
        
                // same as a (sub|super)script of regular characters.
        
                var str = uSubsAndSups[lex.text];
        
                var isSub = unicodeSubRegEx.test(lex.text);
        
                this.consume(); // Continue fetching tokens to fill out the string.
        
        
        
                while (true) {
        
                  var token = this.fetch().text;
        
        
        
                  if (!uSubsAndSups[token]) {
        
                    break;
        
                  }
        
        
        
                  if (unicodeSubRegEx.test(token) !== isSub) {
        
                    break;
        
                  }
        
        
        
                  this.consume();
        
                  str += uSubsAndSups[token];
        
                } // Now create a (sub|super)script.
        
        
        
        
        
                var body = new Parser(str, this.settings).parse();
        
        
        
                if (isSub) {
        
                  subscript = {
        
                    type: "ordgroup",
        
                    mode: "math",
        
                    body
        
                  };
        
                } else {
        
                  superscript = {
        
                    type: "ordgroup",
        
                    mode: "math",
        
                    body
        
                  };
        
                }
        
              } else {
        
                // If it wasn't ^, _, or ', stop parsing super/subscripts
        
                break;
        
              }
        
            } // Base must be set if superscript or subscript are set per logic above,
        
            // but need to check here for type check to pass.
        
        
        
        
        
            if (superscript || subscript) {
        
              // If we got either a superscript or subscript, create a supsub
        
              return {
        
                type: "supsub",
        
                mode: this.mode,
        
                base: base,
        
                sup: superscript,
        
                sub: subscript
        
              };
        
            } else {
        
              // Otherwise return the original body
        
              return base;
        
            }
        
          }
        
          /**
        
           * Parses an entire function, including its base and all of its arguments.
        
           */
        
        
        
        
        
          parseFunction(breakOnTokenText, name // For determining its context
        
          ) {
        
            var token = this.fetch();
        
            var func = token.text;
        
            var funcData = functions[func];
        
        
        
            if (!funcData) {
        
              return null;
        
            }
        
        
        
            this.consume(); // consume command token
        
        
        
            if (name && name !== "atom" && !funcData.allowedInArgument) {
        
              throw new ParseError("Got function '" + func + "' with no arguments" + (name ? " as " + name : ""), token);
        
            } else if (this.mode === "text" && !funcData.allowedInText) {
        
              throw new ParseError("Can't use function '" + func + "' in text mode", token);
        
            } else if (this.mode === "math" && funcData.allowedInMath === false) {
        
              throw new ParseError("Can't use function '" + func + "' in math mode", token);
        
            }
        
        
        
            var {
        
              args,
        
              optArgs
        
            } = this.parseArguments(func, funcData);
        
            return this.callFunction(func, args, optArgs, token, breakOnTokenText);
        
          }
        
          /**
        
           * Call a function handler with a suitable context and arguments.
        
           */
        
        
        
        
        
          callFunction(name, args, optArgs, token, breakOnTokenText) {
        
            var context = {
        
              funcName: name,
        
              parser: this,
        
              token,
        
              breakOnTokenText
        
            };
        
            var func = functions[name];
        
        
        
            if (func && func.handler) {
        
              return func.handler(context, args, optArgs);
        
            } else {
        
              throw new ParseError("No function handler for " + name);
        
            }
        
          }
        
          /**
        
           * Parses the arguments of a function or environment
        
           */
        
        
        
        
        
          parseArguments(func, // Should look like "\name" or "\begin{name}".
        
          funcData) {
        
            var totalArgs = funcData.numArgs + funcData.numOptionalArgs;
        
        
        
            if (totalArgs === 0) {
        
              return {
        
                args: [],
        
                optArgs: []
        
              };
        
            }
        
        
        
            var args = [];
        
            var optArgs = [];
        
        
        
            for (var i = 0; i < totalArgs; i++) {
        
              var argType = funcData.argTypes && funcData.argTypes[i];
        
              var isOptional = i < funcData.numOptionalArgs;
        
        
        
              if (funcData.primitive && argType == null || // \sqrt expands into primitive if optional argument doesn't exist
        
              funcData.type === "sqrt" && i === 1 && optArgs[0] == null) {
        
                argType = "primitive";
        
              }
        
        
        
              var arg = this.parseGroupOfType("argument to '" + func + "'", argType, isOptional);
        
        
        
              if (isOptional) {
        
                optArgs.push(arg);
        
              } else if (arg != null) {
        
                args.push(arg);
        
              } else {
        
                // should be unreachable
        
                throw new ParseError("Null argument, please report this as a bug");
        
              }
        
            }
        
        
        
            return {
        
              args,
        
              optArgs
        
            };
        
          }
        
          /**
        
           * Parses a group when the mode is changing.
        
           */
        
        
        
        
        
          parseGroupOfType(name, type, optional) {
        
            switch (type) {
        
              case "color":
        
                return this.parseColorGroup(optional);
        
        
        
              case "size":
        
                return this.parseSizeGroup(optional);
        
        
        
              case "url":
        
                return this.parseUrlGroup(optional);
        
        
        
              case "math":
        
              case "text":
        
                return this.parseArgumentGroup(optional, type);
        
        
        
              case "hbox":
        
                {
        
                  // hbox argument type wraps the argument in the equivalent of
        
                  // \hbox, which is like \text but switching to \textstyle size.
        
                  var group = this.parseArgumentGroup(optional, "text");
        
                  return group != null ? {
        
                    type: "styling",
        
                    mode: group.mode,
        
                    body: [group],
        
                    style: "text" // simulate \textstyle
        
        
        
                  } : null;
        
                }
        
        
        
              case "raw":
        
                {
        
                  var token = this.parseStringGroup("raw", optional);
        
                  return token != null ? {
        
                    type: "raw",
        
                    mode: "text",
        
                    string: token.text
        
                  } : null;
        
                }
        
        
        
              case "primitive":
        
                {
        
                  if (optional) {
        
                    throw new ParseError("A primitive argument cannot be optional");
        
                  }
        
        
        
                  var _group = this.parseGroup(name);
        
        
        
                  if (_group == null) {
        
                    throw new ParseError("Expected group as " + name, this.fetch());
        
                  }
        
        
        
                  return _group;
        
                }
        
        
        
              case "original":
        
              case null:
        
              case undefined:
        
                return this.parseArgumentGroup(optional);
        
        
        
              default:
        
                throw new ParseError("Unknown group type as " + name, this.fetch());
        
            }
        
          }
        
          /**
        
           * Discard any space tokens, fetching the next non-space token.
        
           */
        
        
        
        
        
          consumeSpaces() {
        
            while (this.fetch().text === " ") {
        
              this.consume();
        
            }
        
          }
        
          /**
        
           * Parses a group, essentially returning the string formed by the
        
           * brace-enclosed tokens plus some position information.
        
           */
        
        
        
        
        
          parseStringGroup(modeName, // Used to describe the mode in error messages.
        
          optional) {
        
            var argToken = this.gullet.scanArgument(optional);
        
        
        
            if (argToken == null) {
        
              return null;
        
            }
        
        
        
            var str = "";
        
            var nextToken;
        
        
        
            while ((nextToken = this.fetch()).text !== "EOF") {
        
              str += nextToken.text;
        
              this.consume();
        
            }
        
        
        
            this.consume(); // consume the end of the argument
        
        
        
            argToken.text = str;
        
            return argToken;
        
          }
        
          /**
        
           * Parses a regex-delimited group: the largest sequence of tokens
        
           * whose concatenated strings match `regex`. Returns the string
        
           * formed by the tokens plus some position information.
        
           */
        
        
        
        
        
          parseRegexGroup(regex, modeName // Used to describe the mode in error messages.
        
          ) {
        
            var firstToken = this.fetch();
        
            var lastToken = firstToken;
        
            var str = "";
        
            var nextToken;
        
        
        
            while ((nextToken = this.fetch()).text !== "EOF" && regex.test(str + nextToken.text)) {
        
              lastToken = nextToken;
        
              str += lastToken.text;
        
              this.consume();
        
            }
        
        
        
            if (str === "") {
        
              throw new ParseError("Invalid " + modeName + ": '" + firstToken.text + "'", firstToken);
        
            }
        
        
        
            return firstToken.range(lastToken, str);
        
          }
        
          /**
        
           * Parses a color description.
        
           */
        
        
        
        
        
          parseColorGroup(optional) {
        
            var res = this.parseStringGroup("color", optional);
        
        
        
            if (res == null) {
        
              return null;
        
            }
        
        
        
            var match = /^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(res.text);
        
        
        
            if (!match) {
        
              throw new ParseError("Invalid color: '" + res.text + "'", res);
        
            }
        
        
        
            var color = match[0];
        
        
        
            if (/^[0-9a-f]{6}$/i.test(color)) {
        
              // We allow a 6-digit HTML color spec without a leading "#".
        
              // This follows the xcolor package's HTML color model.
        
              // Predefined color names are all missed by this RegEx pattern.
        
              color = "#" + color;
        
            }
        
        
        
            return {
        
              type: "color-token",
        
              mode: this.mode,
        
              color
        
            };
        
          }
        
          /**
        
           * Parses a size specification, consisting of magnitude and unit.
        
           */
        
        
        
        
        
          parseSizeGroup(optional) {
        
            var res;
        
            var isBlank = false; // don't expand before parseStringGroup
        
        
        
            this.gullet.consumeSpaces();
        
        
        
            if (!optional && this.gullet.future().text !== "{") {
        
              res = this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/, "size");
        
            } else {
        
              res = this.parseStringGroup("size", optional);
        
            }
        
        
        
            if (!res) {
        
              return null;
        
            }
        
        
        
            if (!optional && res.text.length === 0) {
        
              // Because we've tested for what is !optional, this block won't
        
              // affect \kern, \hspace, etc. It will capture the mandatory arguments
        
              // to \genfrac and \above.
        
              res.text = "0pt"; // Enable \above{}
        
        
        
              isBlank = true; // This is here specifically for \genfrac
        
            }
        
        
        
            var match = /([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(res.text);
        
        
        
            if (!match) {
        
              throw new ParseError("Invalid size: '" + res.text + "'", res);
        
            }
        
        
        
            var data = {
        
              number: +(match[1] + match[2]),
        
              // sign + magnitude, cast to number
        
              unit: match[3]
        
            };
        
        
        
            if (!validUnit(data)) {
        
              throw new ParseError("Invalid unit: '" + data.unit + "'", res);
        
            }
        
        
        
            return {
        
              type: "size",
        
              mode: this.mode,
        
              value: data,
        
              isBlank
        
            };
        
          }
        
          /**
        
           * Parses an URL, checking escaped letters and allowed protocols,
        
           * and setting the catcode of % as an active character (as in \hyperref).
        
           */
        
        
        
        
        
          parseUrlGroup(optional) {
        
            this.gullet.lexer.setCatcode("%", 13); // active character
        
        
        
            this.gullet.lexer.setCatcode("~", 12); // other character
        
        
        
            var res = this.parseStringGroup("url", optional);
        
            this.gullet.lexer.setCatcode("%", 14); // comment character
        
        
        
            this.gullet.lexer.setCatcode("~", 13); // active character
        
        
        
            if (res == null) {
        
              return null;
        
            } // hyperref package allows backslashes alone in href, but doesn't
        
            // generate valid links in such cases; we interpret this as
        
            // "undefined" behaviour, and keep them as-is. Some browser will
        
            // replace backslashes with forward slashes.
        
        
        
        
        
            var url = res.text.replace(/\\([#$%&~_^{}])/g, '$1');
        
            return {
        
              type: "url",
        
              mode: this.mode,
        
              url
        
            };
        
          }
        
          /**
        
           * Parses an argument with the mode specified.
        
           */
        
        
        
        
        
          parseArgumentGroup(optional, mode) {
        
            var argToken = this.gullet.scanArgument(optional);
        
        
        
            if (argToken == null) {
        
              return null;
        
            }
        
        
        
            var outerMode = this.mode;
        
        
        
            if (mode) {
        
              // Switch to specified mode
        
              this.switchMode(mode);
        
            }
        
        
        
            this.gullet.beginGroup();
        
            var expression = this.parseExpression(false, "EOF"); // TODO: find an alternative way to denote the end
        
        
        
            this.expect("EOF"); // expect the end of the argument
        
        
        
            this.gullet.endGroup();
        
            var result = {
        
              type: "ordgroup",
        
              mode: this.mode,
        
              loc: argToken.loc,
        
              body: expression
        
            };
        
        
        
            if (mode) {
        
              // Switch mode back
        
              this.switchMode(outerMode);
        
            }
        
        
        
            return result;
        
          }
        
          /**
        
           * Parses an ordinary group, which is either a single nucleus (like "x")
        
           * or an expression in braces (like "{x+y}") or an implicit group, a group
        
           * that starts at the current position, and ends right before a higher explicit
        
           * group ends, or at EOF.
        
           */
        
        
        
        
        
          parseGroup(name, // For error reporting.
        
          breakOnTokenText) {
        
            var firstToken = this.fetch();
        
            var text = firstToken.text;
        
            var result; // Try to parse an open brace or \begingroup
        
        
        
            if (text === "{" || text === "\\begingroup") {
        
              this.consume();
        
              var groupEnd = text === "{" ? "}" : "\\endgroup";
        
              this.gullet.beginGroup(); // If we get a brace, parse an expression
        
        
        
              var expression = this.parseExpression(false, groupEnd);
        
              var lastToken = this.fetch();
        
              this.expect(groupEnd); // Check that we got a matching closing brace
        
        
        
              this.gullet.endGroup();
        
              result = {
        
                type: "ordgroup",
        
                mode: this.mode,
        
                loc: SourceLocation.range(firstToken, lastToken),
        
                body: expression,
        
                // A group formed by \begingroup...\endgroup is a semi-simple group
        
                // which doesn't affect spacing in math mode, i.e., is transparent.
        
                // https://tex.stackexchange.com/questions/1930/when-should-one-
        
                // use-begingroup-instead-of-bgroup
        
                semisimple: text === "\\begingroup" || undefined
        
              };
        
            } else {
        
              // If there exists a function with this name, parse the function.
        
              // Otherwise, just return a nucleus
        
              result = this.parseFunction(breakOnTokenText, name) || this.parseSymbol();
        
        
        
              if (result == null && text[0] === "\\" && !implicitCommands.hasOwnProperty(text)) {
        
                if (this.settings.throwOnError) {
        
                  throw new ParseError("Undefined control sequence: " + text, firstToken);
        
                }
        
        
        
                result = this.formatUnsupportedCmd(text);
        
                this.consume();
        
              }
        
            }
        
        
        
            return result;
        
          }
        
          /**
        
           * Form ligature-like combinations of characters for text mode.
        
           * This includes inputs like "--", "---", "``" and "''".
        
           * The result will simply replace multiple textord nodes with a single
        
           * character in each value by a single textord node having multiple
        
           * characters in its value.  The representation is still ASCII source.
        
           * The group will be modified in place.
        
           */
        
        
        
        
        
          formLigatures(group) {
        
            var n = group.length - 1;
        
        
        
            for (var i = 0; i < n; ++i) {
        
              var a = group[i]; // $FlowFixMe: Not every node type has a `text` property.
        
        
        
              var v = a.text;
        
        
        
              if (v === "-" && group[i + 1].text === "-") {
        
                if (i + 1 < n && group[i + 2].text === "-") {
        
                  group.splice(i, 3, {
        
                    type: "textord",
        
                    mode: "text",
        
                    loc: SourceLocation.range(a, group[i + 2]),
        
                    text: "---"
        
                  });
        
                  n -= 2;
        
                } else {
        
                  group.splice(i, 2, {
        
                    type: "textord",
        
                    mode: "text",
        
                    loc: SourceLocation.range(a, group[i + 1]),
        
                    text: "--"
        
                  });
        
                  n -= 1;
        
                }
        
              }
        
        
        
              if ((v === "'" || v === "`") && group[i + 1].text === v) {
        
                group.splice(i, 2, {
        
                  type: "textord",
        
                  mode: "text",
        
                  loc: SourceLocation.range(a, group[i + 1]),
        
                  text: v + v
        
                });
        
                n -= 1;
        
              }
        
            }
        
          }
        
          /**
        
           * Parse a single symbol out of the string. Here, we handle single character
        
           * symbols and special functions like \verb.
        
           */
        
        
        
        
        
          parseSymbol() {
        
            var nucleus = this.fetch();
        
            var text = nucleus.text;
        
        
        
            if (/^\\verb[^a-zA-Z]/.test(text)) {
        
              this.consume();
        
              var arg = text.slice(5);
        
              var star = arg.charAt(0) === "*";
        
        
        
              if (star) {
        
                arg = arg.slice(1);
        
              } // Lexer's tokenRegex is constructed to always have matching
        
              // first/last characters.
        
        
        
        
        
              if (arg.length < 2 || arg.charAt(0) !== arg.slice(-1)) {
        
                throw new ParseError("\\verb assertion failed --\n                    please report what input caused this bug");
        
              }
        
        
        
              arg = arg.slice(1, -1); // remove first and last char
        
        
        
              return {
        
                type: "verb",
        
                mode: "text",
        
                body: arg,
        
                star
        
              };
        
            } // At this point, we should have a symbol, possibly with accents.
        
            // First expand any accented base symbol according to unicodeSymbols.
        
        
        
        
        
            if (unicodeSymbols.hasOwnProperty(text[0]) && !symbols[this.mode][text[0]]) {
        
              // This behavior is not strict (XeTeX-compatible) in math mode.
        
              if (this.settings.strict && this.mode === "math") {
        
                this.settings.reportNonstrict("unicodeTextInMathMode", "Accented Unicode text character \"" + text[0] + "\" used in " + "math mode", nucleus);
        
              }
        
        
        
              text = unicodeSymbols[text[0]] + text.slice(1);
        
            } // Strip off any combining characters
        
        
        
        
        
            var match = combiningDiacriticalMarksEndRegex.exec(text);
        
        
        
            if (match) {
        
              text = text.substring(0, match.index);
        
        
        
              if (text === 'i') {
        
                text = '\u0131'; // dotless i, in math and text mode
        
              } else if (text === 'j') {
        
                text = '\u0237'; // dotless j, in math and text mode
        
              }
        
            } // Recognize base symbol
        
        
        
        
        
            var symbol;
        
        
        
            if (symbols[this.mode][text]) {
        
              if (this.settings.strict && this.mode === 'math' && extraLatin.indexOf(text) >= 0) {
        
                this.settings.reportNonstrict("unicodeTextInMathMode", "Latin-1/Unicode text character \"" + text[0] + "\" used in " + "math mode", nucleus);
        
              }
        
        
        
              var group = symbols[this.mode][text].group;
        
              var loc = SourceLocation.range(nucleus);
        
              var s;
        
        
        
              if (ATOMS.hasOwnProperty(group)) {
        
                // $FlowFixMe
        
                var family = group;
        
                s = {
        
                  type: "atom",
        
                  mode: this.mode,
        
                  family,
        
                  loc,
        
                  text
        
                };
        
              } else {
        
                // $FlowFixMe
        
                s = {
        
                  type: group,
        
                  mode: this.mode,
        
                  loc,
        
                  text
        
                };
        
              } // $FlowFixMe
        
        
        
        
        
              symbol = s;
        
            } else if (text.charCodeAt(0) >= 0x80) {
        
              // no symbol for e.g. ^
        
              if (this.settings.strict) {
        
                if (!supportedCodepoint(text.charCodeAt(0))) {
        
                  this.settings.reportNonstrict("unknownSymbol", "Unrecognized Unicode character \"" + text[0] + "\"" + (" (" + text.charCodeAt(0) + ")"), nucleus);
        
                } else if (this.mode === "math") {
        
                  this.settings.reportNonstrict("unicodeTextInMathMode", "Unicode text character \"" + text[0] + "\" used in math mode", nucleus);
        
                }
        
              } // All nonmathematical Unicode characters are rendered as if they
        
              // are in text mode (wrapped in \text) because that's what it
        
              // takes to render them in LaTeX.  Setting `mode: this.mode` is
        
              // another natural choice (the user requested math mode), but
        
              // this makes it more difficult for getCharacterMetrics() to
        
              // distinguish Unicode characters without metrics and those for
        
              // which we want to simulate the letter M.
        
        
        
        
        
              symbol = {
        
                type: "textord",
        
                mode: "text",
        
                loc: SourceLocation.range(nucleus),
        
                text
        
              };
        
            } else {
        
              return null; // EOF, ^, _, {, }, etc.
        
            }
        
        
        
            this.consume(); // Transform combining characters into accents
        
        
        
            if (match) {
        
              for (var i = 0; i < match[0].length; i++) {
        
                var accent = match[0][i];
        
        
        
                if (!unicodeAccents[accent]) {
        
                  throw new ParseError("Unknown accent ' " + accent + "'", nucleus);
        
                }
        
        
        
                var command = unicodeAccents[accent][this.mode] || unicodeAccents[accent].text;
        
        
        
                if (!command) {
        
                  throw new ParseError("Accent " + accent + " unsupported in " + this.mode + " mode", nucleus);
        
                }
        
        
        
                symbol = {
        
                  type: "accent",
        
                  mode: this.mode,
        
                  loc: SourceLocation.range(nucleus),
        
                  label: command,
        
                  isStretchy: false,
        
                  isShifty: true,
        
                  // $FlowFixMe
        
                  base: symbol
        
                };
        
              }
        
            } // $FlowFixMe
        
        
        
        
        
            return symbol;
        
          }
        
        
        
        }
        
        Parser.endOfExpression = ["}", "\\endgroup", "\\end", "\\right", "&"];
        
        
        
        /**
        
         * Provides a single function for parsing an expression using a Parser
        
         * TODO(emily): Remove this
        
         */
        
        
        
        /**
        
         * Parses an expression using a Parser, then returns the parsed result.
        
         */
        
        var parseTree = function parseTree(toParse, settings) {
        
          if (!(typeof toParse === 'string' || toParse instanceof String)) {
        
            throw new TypeError('KaTeX can only parse string typed expression');
        
          }
        
        
        
          var parser = new Parser(toParse, settings); // Blank out any \df@tag to avoid spurious "Duplicate \tag" errors
        
        
        
          delete parser.gullet.macros.current["\\df@tag"];
        
          var tree = parser.parse(); // Prevent a color definition from persisting between calls to katex.render().
        
        
        
          delete parser.gullet.macros.current["\\current@color"];
        
          delete parser.gullet.macros.current["\\color"]; // If the input used \tag, it will set the \df@tag macro to the tag.
        
          // In this case, we separately parse the tag and wrap the tree.
        
        
        
          if (parser.gullet.macros.get("\\df@tag")) {
        
            if (!settings.displayMode) {
        
              throw new ParseError("\\tag works only in display equations");
        
            }
        
        
        
            tree = [{
        
              type: "tag",
        
              mode: "text",
        
              body: tree,
        
              tag: parser.subparse([new Token("\\df@tag")])
        
            }];
        
          }
        
        
        
          return tree;
        
        };
        
        
        
        /* eslint no-console:0 */
        
        
        
        /**
        
         * Parse and build an expression, and place that expression in the DOM node
        
         * given.
        
         */
        
        var render = function render(expression, baseNode, options) {
        
          baseNode.textContent = "";
        
          var node = renderToDomTree(expression, options).toNode();
        
          baseNode.appendChild(node);
        
        }; // KaTeX's styles don't work properly in quirks mode. Print out an error, and
        
        // disable rendering.
        
        
        
        
        
        if (typeof document !== "undefined") {
        
          if (document.compatMode !== "CSS1Compat") {
        
            typeof console !== "undefined" && console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your " + "website has a suitable doctype.");
        
        
        
            render = function render() {
        
              throw new ParseError("KaTeX doesn't work in quirks mode.");
        
            };
        
          }
        
        }
        
        /**
        
         * Parse and build an expression, and return the markup for that.
        
         */
        
        
        
        
        
        var renderToString = function renderToString(expression, options) {
        
          var markup = renderToDomTree(expression, options).toMarkup();
        
          return markup;
        
        };
        
        /**
        
         * Parse an expression and return the parse tree.
        
         */
        
        
        
        
        
        var generateParseTree = function generateParseTree(expression, options) {
        
          var settings = new Settings(options);
        
          return parseTree(expression, settings);
        
        };
        
        /**
        
         * If the given error is a KaTeX ParseError and options.throwOnError is false,
        
         * renders the invalid LaTeX as a span with hover title giving the KaTeX
        
         * error message.  Otherwise, simply throws the error.
        
         */
        
        
        
        
        
        var renderError = function renderError(error, expression, options) {
        
          if (options.throwOnError || !(error instanceof ParseError)) {
        
            throw error;
        
          }
        
        
        
          var node = buildCommon.makeSpan(["katex-error"], [new SymbolNode(expression)]);
        
          node.setAttribute("title", error.toString());
        
          node.setAttribute("style", "color:" + options.errorColor);
        
          return node;
        
        };
        
        /**
        
         * Generates and returns the katex build tree. This is used for advanced
        
         * use cases (like rendering to custom output).
        
         */
        
        
        
        
        
        var renderToDomTree = function renderToDomTree(expression, options) {
        
          var settings = new Settings(options);
        
        
        
          try {
        
            var tree = parseTree(expression, settings);
        
            return buildTree(tree, expression, settings);
        
          } catch (error) {
        
            return renderError(error, expression, settings);
        
          }
        
        };
        
        /**
        
         * Generates and returns the katex build tree, with just HTML (no MathML).
        
         * This is used for advanced use cases (like rendering to custom output).
        
         */
        
        
        
        
        
        var renderToHTMLTree = function renderToHTMLTree(expression, options) {
        
          var settings = new Settings(options);
        
        
        
          try {
        
            var tree = parseTree(expression, settings);
        
            return buildHTMLTree(tree, expression, settings);
        
          } catch (error) {
        
            return renderError(error, expression, settings);
        
          }
        
        };
        
        
        
        var katex = {
        
          /**
        
           * Current KaTeX version
        
           */
        
          version: "0.16.9",
        
        
        
          /**
        
           * Renders the given LaTeX into an HTML+MathML combination, and adds
        
           * it as a child to the specified DOM node.
        
           */
        
          render,
        
        
        
          /**
        
           * Renders the given LaTeX into an HTML+MathML combination string,
        
           * for sending to the client.
        
           */
        
          renderToString,
        
        
        
          /**
        
           * KaTeX error, usually during parsing.
        
           */
        
          ParseError,
        
        
        
          /**
        
           * The shema of Settings
        
           */
        
          SETTINGS_SCHEMA,
        
        
        
          /**
        
           * Parses the given LaTeX into KaTeX's internal parse tree structure,
        
           * without rendering to HTML or MathML.
        
           *
        
           * NOTE: This method is not currently recommended for public use.
        
           * The internal tree representation is unstable and is very likely
        
           * to change. Use at your own risk.
        
           */
        
          __parse: generateParseTree,
        
        
        
          /**
        
           * Renders the given LaTeX into an HTML+MathML internal DOM tree
        
           * representation, without flattening that representation to a string.
        
           *
        
           * NOTE: This method is not currently recommended for public use.
        
           * The internal tree representation is unstable and is very likely
        
           * to change. Use at your own risk.
        
           */
        
          __renderToDomTree: renderToDomTree,
        
        
        
          /**
        
           * Renders the given LaTeX into an HTML internal DOM tree representation,
        
           * without MathML and without flattening that representation to a string.
        
           *
        
           * NOTE: This method is not currently recommended for public use.
        
           * The internal tree representation is unstable and is very likely
        
           * to change. Use at your own risk.
        
           */
        
          __renderToHTMLTree: renderToHTMLTree,
        
        
        
          /**
        
           * extends internal font metrics object with a new object
        
           * each key in the new object represents a font name
        
          */
        
          __setFontMetrics: setFontMetrics,
        
        
        
          /**
        
           * adds a new symbol to builtin symbols table
        
           */
        
          __defineSymbol: defineSymbol,
        
        
        
          /**
        
           * adds a new function to builtin function list,
        
           * which directly produce parse tree elements
        
           * and have their own html/mathml builders
        
           */
        
          __defineFunction: defineFunction,
        
        
        
          /**
        
           * adds a new macro to builtin macro list
        
           */
        
          __defineMacro: defineMacro,
        
        
        
          /**
        
           * Expose the dom tree node types, which can be useful for type checking nodes.
        
           *
        
           * NOTE: This method is not currently recommended for public use.
        
           * The internal tree representation is unstable and is very likely
        
           * to change. Use at your own risk.
        
           */
        
          __domTree: {
        
            Span,
        
            Anchor,
        
            SymbolNode,
        
            SvgNode,
        
            PathNode,
        
            LineNode
        
          }
        
        };
        
        
        
        /* assets\components\Equation.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_dynamic_element$1(ctx) {
        
        	let svelte_element;
        
        	let current;
        
        	const default_slot_template = /*#slots*/ ctx[7].default;
        
        	const default_slot = create_slot(default_slot_template, ctx, /*$$scope*/ ctx[6], null);
        
        
        
        	return {
        
        		c() {
        
        			svelte_element = element(/*element*/ ctx[2]);
        
        			if (default_slot) default_slot.c();
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			svelte_element = claim_element(nodes, (/*element*/ ctx[2] || 'null').toUpperCase(), { id: true });
        
        			var svelte_element_nodes = children(svelte_element);
        
        			if (default_slot) default_slot.l(svelte_element_nodes);
        
        			svelte_element_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			set_dynamic_element_data(/*element*/ ctx[2])(svelte_element, { id: /*instanceId*/ ctx[1] });
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, svelte_element, anchor);
        
        
        
        			if (default_slot) {
        
        				default_slot.m(svelte_element, null);
        
        			}
        
        
        
        			/*svelte_element_binding*/ ctx[8](svelte_element);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			if (default_slot) {
        
        				if (default_slot.p && (!current || dirty & /*$$scope*/ 64)) {
        
        					update_slot_base(
        
        						default_slot,
        
        						default_slot_template,
        
        						ctx,
        
        						/*$$scope*/ ctx[6],
        
        						!current
        
        						? get_all_dirty_from_scope(/*$$scope*/ ctx[6])
        
        						: get_slot_changes(default_slot_template, /*$$scope*/ ctx[6], dirty, null),
        
        						null
        
        					);
        
        				}
        
        			}
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(default_slot, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(default_slot, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(svelte_element);
        
        			}
        
        
        
        			if (default_slot) default_slot.d(detaching);
        
        			/*svelte_element_binding*/ ctx[8](null);
        
        		}
        
        	};
        
        }
        
        
        
        function create_fragment$6(ctx) {
        
        	let current;
        
        	let svelte_element = /*element*/ ctx[2] && create_dynamic_element$1(ctx);
        
        
        
        	return {
        
        		c() {
        
        			if (svelte_element) svelte_element.c();
        
        		},
        
        		l(nodes) {
        
        			if (svelte_element) svelte_element.l(nodes);
        
        		},
        
        		m(target, anchor) {
        
        			if (svelte_element) svelte_element.m(target, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (/*element*/ ctx[2]) {
        
        				svelte_element.p(ctx, dirty);
        
        			}
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(svelte_element, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(svelte_element, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (svelte_element) svelte_element.d(detaching);
        
        		}
        
        	};
        
        }
        
        
        
        let numInstances = 0;
        
        
        
        function generateComponentId() {
        
        	numInstances++;
        
        	return `equation-${numInstances}`;
        
        }
        
        
        
        function instance$6($$self, $$props, $$invalidate) {
        
        	let { $$slots: slots = {}, $$scope } = $$props;
        
        	let { markup } = $$props;
        
        	let { display = "inline" } = $$props;
        
        	let instanceId = generateComponentId();
        
        	let element = display === "block" ? "div" : "span";
        
        	let equationElement;
        
        	let initialContent;
        
        
        
        	onMount(() => {
        
        		$$invalidate(5, initialContent = equationElement.textContent.trim());
        
        		renderContent();
        
        	});
        
        
        
        	function renderContent() {
        
        		const contentToRender = markup || initialContent;
        
        
        
        		if (contentToRender) {
        
        			// Utilisation directe de katexLib pour le rendu
        
        			katex.render(contentToRender, equationElement, { throwOnError: true, output: "mathml" });
        
        		}
        
        	}
        
        
        
        	function svelte_element_binding($$value) {
        
        		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
        
        			equationElement = $$value;
        
        			$$invalidate(0, equationElement);
        
        		});
        
        	}
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('markup' in $$props) $$invalidate(3, markup = $$props.markup);
        
        		if ('display' in $$props) $$invalidate(4, display = $$props.display);
        
        		if ('$$scope' in $$props) $$invalidate(6, $$scope = $$props.$$scope);
        
        	};
        
        
        
        	$$self.$$.update = () => {
        
        		if ($$self.$$.dirty & /*equationElement, markup, initialContent*/ 41) {
        
        			if (equationElement && (markup || initialContent)) {
        
        				renderContent();
        
        			}
        
        		}
        
        	};
        
        
        
        	return [
        
        		equationElement,
        
        		instanceId,
        
        		element,
        
        		markup,
        
        		display,
        
        		initialContent,
        
        		$$scope,
        
        		slots,
        
        		svelte_element_binding
        
        	];
        
        }
        
        
        
        class Equation extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$6, create_fragment$6, safe_not_equal, { markup: 3, display: 4 });
        
        	}
        
        }
        
        
        
        var css_248z$1 = ".dynamic.svelte-38ydfs{text-decoration:underline dotted;cursor:ew-resize;user-select:none}";
        
        styleInject(css_248z$1);
        
        
        
        /* assets\components\Dynamic.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_fragment$5(ctx) {
        
        	let span;
        
        	let t_value = /*value*/ ctx[2].toFixed(2) + "";
        
        	let t;
        
        	let mounted;
        
        	let dispose;
        
        
        
        	return {
        
        		c() {
        
        			span = element("span");
        
        			t = text$2(t_value);
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			span = claim_element(nodes, "SPAN", {
        
        				class: true,
        
        				role: true,
        
        				tabindex: true,
        
        				"aria-valuemin": true,
        
        				"aria-valuemax": true,
        
        				"aria-valuenow": true
        
        			});
        
        
        
        			var span_nodes = children(span);
        
        			t = claim_text(span_nodes, t_value);
        
        			span_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			attr(span, "class", "dynamic svelte-38ydfs");
        
        			attr(span, "role", "spinbutton");
        
        			attr(span, "tabindex", "0");
        
        			attr(span, "aria-valuemin", /*min*/ ctx[0]);
        
        			attr(span, "aria-valuemax", /*max*/ ctx[1]);
        
        			attr(span, "aria-valuenow", /*value*/ ctx[2]);
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, span, anchor);
        
        			append_hydration(span, t);
        
        
        
        			if (!mounted) {
        
        				dispose = [
        
        					listen(window, "mousemove", /*handleMouseMove*/ ctx[4]),
        
        					listen(window, "mouseup", /*handleMouseUp*/ ctx[5]),
        
        					listen(span, "mousedown", /*handleMouseDown*/ ctx[3])
        
        				];
        
        
        
        				mounted = true;
        
        			}
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (dirty & /*value*/ 4 && t_value !== (t_value = /*value*/ ctx[2].toFixed(2) + "")) set_data(t, t_value);
        
        
        
        			if (dirty & /*min*/ 1) {
        
        				attr(span, "aria-valuemin", /*min*/ ctx[0]);
        
        			}
        
        
        
        			if (dirty & /*max*/ 2) {
        
        				attr(span, "aria-valuemax", /*max*/ ctx[1]);
        
        			}
        
        
        
        			if (dirty & /*value*/ 4) {
        
        				attr(span, "aria-valuenow", /*value*/ ctx[2]);
        
        			}
        
        		},
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(span);
        
        			}
        
        
        
        			mounted = false;
        
        			run_all(dispose);
        
        		}
        
        	};
        
        }
        
        
        
        function instance$5($$self, $$props, $$invalidate) {
        
        	const dispatch = createEventDispatcher();
        
        	let startDrag = false;
        
        	let startPosition = 0;
        
        	let value = 0; // La valeur à afficher et ajuster
        
        	let unsubscribe;
        
        	let { store } = $$props;
        
        	let { min } = $$props;
        
        	let { max } = $$props;
        
        	let { step } = $$props;
        
        
        
        	onMount(() => {
        
        		if (store) {
        
        			unsubscribe = store.subscribe(v => {
        
        				$$invalidate(2, value = v);
        
        			});
        
        		}
        
        	});
        
        
        
        	onDestroy(() => {
        
        		// Se désabonner lors de la destruction du composant pour nettoyer
        
        		if (unsubscribe) unsubscribe();
        
        	});
        
        
        
        	// Initialiser le drag
        
        	function handleMouseDown(event) {
        
        		//event.preventDefault();
        
        		startDrag = true;
        
        
        
        		startPosition = event.clientX;
        
        		document.body.classList.add("dragging-ew");
        
        	}
        
        
        
        	// Ajuster la valeur lors du drag
        
        	function handleMouseMove(event) {
        
        		//event.preventDefault();
        
        		if (startDrag) {
        
        			let diff = event.clientX - startPosition;
        
        			let sign = diff / Math.abs(diff);
        
        			let adjustedValue = value + step * sign;
        
        
        
        			if (Math.abs(diff) > 10) {
        
        				// Vérifier si le mouvement est suffisant pour ajuster
        
        				$$invalidate(2, value = adjustedValue > max
        
        				? max
        
        				: adjustedValue < min ? min : adjustedValue);
        
        
        
        				if (store) store.set(value);
        
        				dispatch('change');
        
        				startPosition = event.clientX;
        
        			}
        
        		}
        
        	}
        
        
        
        	// Terminer le drag
        
        	function handleMouseUp() {
        
        		startDrag = false;
        
        		document.body.classList.remove("dragging-ew");
        
        	}
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('store' in $$props) $$invalidate(6, store = $$props.store);
        
        		if ('min' in $$props) $$invalidate(0, min = $$props.min);
        
        		if ('max' in $$props) $$invalidate(1, max = $$props.max);
        
        		if ('step' in $$props) $$invalidate(7, step = $$props.step);
        
        	};
        
        
        
        	return [min, max, value, handleMouseDown, handleMouseMove, handleMouseUp, store, step];
        
        }
        
        
        
        class Dynamic extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$5, create_fragment$5, safe_not_equal, { store: 6, min: 0, max: 1, step: 7 });
        
        	}
        
        }
        
        
        
        /* assets\components\Declare.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_fragment$4(ctx) {
        
        	let h10;
        
        	let t0;
        
        	let t1;
        
        	let h11;
        
        	let t2;
        
        
        
        	return {
        
        		c() {
        
        			h10 = element("h1");
        
        			t0 = text$2(/*myValue*/ ctx[0]);
        
        			t1 = space();
        
        			h11 = element("h1");
        
        			t2 = text$2(/*num*/ ctx[1]);
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			h10 = claim_element(nodes, "H1", { style: true });
        
        			var h10_nodes = children(h10);
        
        			t0 = claim_text(h10_nodes, /*myValue*/ ctx[0]);
        
        			h10_nodes.forEach(detach);
        
        			t1 = claim_space(nodes);
        
        			h11 = claim_element(nodes, "H1", { style: true });
        
        			var h11_nodes = children(h11);
        
        			t2 = claim_text(h11_nodes, /*num*/ ctx[1]);
        
        			h11_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			set_style(h10, "color", "aqua");
        
        			set_style(h11, "color", "blueviolet");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, h10, anchor);
        
        			append_hydration(h10, t0);
        
        			insert_hydration(target, t1, anchor);
        
        			insert_hydration(target, h11, anchor);
        
        			append_hydration(h11, t2);
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (dirty & /*myValue*/ 1) set_data(t0, /*myValue*/ ctx[0]);
        
        			if (dirty & /*num*/ 2) set_data(t2, /*num*/ ctx[1]);
        
        		},
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(h10);
        
        				detach(t1);
        
        				detach(h11);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        function instance$4($$self, $$props, $$invalidate) {
        
        	let num;
        
        	let $globalStore;
        
        	component_subscribe($$self, globalStore, $$value => $$invalidate(2, $globalStore = $$value));
        
        	let myValue;
        
        
        
        	globalStore.subscribe(value => {
        
        		$$invalidate(0, myValue = value.test);
        
        		value.number;
        
        		console.log("The store updated !");
        
        		console.log(value);
        
        	});
        
        
        
        	$$self.$$.update = () => {
        
        		if ($$self.$$.dirty & /*$globalStore*/ 4) {
        
        			$$invalidate(1, num = $globalStore.number);
        
        		}
        
        	};
        
        
        
        	return [myValue, num, $globalStore];
        
        }
        
        
        
        class Declare extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$4, create_fragment$4, safe_not_equal, {});
        
        	}
        
        }
        
        
        
        /* assets\components\CheckBox.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_if_block$2(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2(/*label*/ ctx[0]);
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, /*label*/ ctx[0]);
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		p(ctx, dirty) {
        
        			if (dirty & /*label*/ 1) set_data(t, /*label*/ ctx[0]);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        function create_fragment$3(ctx) {
        
        	let input;
        
        	let t;
        
        	let if_block_anchor;
        
        	let mounted;
        
        	let dispose;
        
        	let if_block = /*label*/ ctx[0] && create_if_block$2(ctx);
        
        
        
        	return {
        
        		c() {
        
        			input = element("input");
        
        			t = space();
        
        			if (if_block) if_block.c();
        
        			if_block_anchor = empty();
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			input = claim_element(nodes, "INPUT", { type: true });
        
        			t = claim_space(nodes);
        
        			if (if_block) if_block.l(nodes);
        
        			if_block_anchor = empty();
        
        			this.h();
        
        		},
        
        		h() {
        
        			attr(input, "type", "checkbox");
        
        			input.checked = /*checked*/ ctx[1];
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, input, anchor);
        
        			insert_hydration(target, t, anchor);
        
        			if (if_block) if_block.m(target, anchor);
        
        			insert_hydration(target, if_block_anchor, anchor);
        
        
        
        			if (!mounted) {
        
        				dispose = listen(input, "change", /*handleCheck*/ ctx[2]);
        
        				mounted = true;
        
        			}
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (dirty & /*checked*/ 2) {
        
        				input.checked = /*checked*/ ctx[1];
        
        			}
        
        
        
        			if (/*label*/ ctx[0]) {
        
        				if (if_block) {
        
        					if_block.p(ctx, dirty);
        
        				} else {
        
        					if_block = create_if_block$2(ctx);
        
        					if_block.c();
        
        					if_block.m(if_block_anchor.parentNode, if_block_anchor);
        
        				}
        
        			} else if (if_block) {
        
        				if_block.d(1);
        
        				if_block = null;
        
        			}
        
        		},
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(input);
        
        				detach(t);
        
        				detach(if_block_anchor);
        
        			}
        
        
        
        			if (if_block) if_block.d(detaching);
        
        			mounted = false;
        
        			dispose();
        
        		}
        
        	};
        
        }
        
        
        
        function instance$3($$self, $$props, $$invalidate) {
        
        	let { store } = $$props;
        
        	let { label } = $$props;
        
        	let checked = false;
        
        	let unsubscribe;
        
        
        
        	// S'abonner au store lors du montage du composant
        
        	onMount(() => {
        
        		if (store) {
        
        			unsubscribe = store.subscribe(value => {
        
        				$$invalidate(1, checked = value);
        
        			});
        
        		}
        
        	});
        
        
        
        	// Désabonnement lors de la destruction du composant pour nettoyer
        
        	onDestroy(() => {
        
        		if (unsubscribe) unsubscribe();
        
        	});
        
        
        
        	// Gérer le changement de la case à cocher
        
        	// et mettre à jour le store si nécessaire
        
        	function handleCheck() {
        
        		$$invalidate(1, checked = !checked);
        
        		if (store) store.set(checked);
        
        	}
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('store' in $$props) $$invalidate(3, store = $$props.store);
        
        		if ('label' in $$props) $$invalidate(0, label = $$props.label);
        
        	};
        
        
        
        	return [label, checked, handleCheck, store];
        
        }
        
        
        
        class CheckBox extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$3, create_fragment$3, safe_not_equal, { store: 3, label: 0 });
        
        	}
        
        }
        
        
        
        var css_248z = ".action-link.svelte-161w8sp{cursor:pointer;text-decoration:underline;color:#007bff}.action-link.svelte-161w8sp:hover{color:#0056b3}";
        
        styleInject(css_248z);
        
        
        
        /* assets\components\ActionElement.svelte generated by Svelte v4.2.12 */
        
        
        
        function create_dynamic_element(ctx) {
        
        	let svelte_element;
        
        	let t;
        
        	let svelte_element_class_value;
        
        	let mounted;
        
        	let dispose;
        
        
        
        	let svelte_element_levels = [
        
        		{
        
        			class: svelte_element_class_value = "" + (null_to_empty(/*type*/ ctx[1] == 'a' ? 'action-link' : 'action-button') + " svelte-161w8sp")
        
        		},
        
        		{ tabindex: "0" }
        
        	];
        
        
        
        	let svelte_element_data = {};
        
        
        
        	for (let i = 0; i < svelte_element_levels.length; i += 1) {
        
        		svelte_element_data = assign(svelte_element_data, svelte_element_levels[i]);
        
        	}
        
        
        
        	return {
        
        		c() {
        
        			svelte_element = element(/*type*/ ctx[1]);
        
        			t = text$2(/*text*/ ctx[0]);
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			svelte_element = claim_element(nodes, (/*type*/ ctx[1] || 'null').toUpperCase(), { class: true, tabindex: true });
        
        			var svelte_element_nodes = children(svelte_element);
        
        			t = claim_text(svelte_element_nodes, /*text*/ ctx[0]);
        
        			svelte_element_nodes.forEach(detach);
        
        			this.h();
        
        		},
        
        		h() {
        
        			set_dynamic_element_data(/*type*/ ctx[1])(svelte_element, svelte_element_data);
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, svelte_element, anchor);
        
        			append_hydration(svelte_element, t);
        
        
        
        			if (!mounted) {
        
        				dispose = listen(svelte_element, "click", /*handleClick*/ ctx[2]);
        
        				mounted = true;
        
        			}
        
        		},
        
        		p(ctx, dirty) {
        
        			if (dirty & /*text*/ 1) set_data(t, /*text*/ ctx[0]);
        
        
        
        			set_dynamic_element_data(/*type*/ ctx[1])(svelte_element, svelte_element_data = get_spread_update(svelte_element_levels, [
        
        				dirty & /*type*/ 2 && svelte_element_class_value !== (svelte_element_class_value = "" + (null_to_empty(/*type*/ ctx[1] == 'a' ? 'action-link' : 'action-button') + " svelte-161w8sp")) && { class: svelte_element_class_value },
        
        				{ tabindex: "0" }
        
        			]));
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(svelte_element);
        
        			}
        
        
        
        			mounted = false;
        
        			dispose();
        
        		}
        
        	};
        
        }
        
        
        
        function create_fragment$2(ctx) {
        
        	let previous_tag = /*type*/ ctx[1];
        
        	let svelte_element_anchor;
        
        	let svelte_element = /*type*/ ctx[1] && create_dynamic_element(ctx);
        
        
        
        	return {
        
        		c() {
        
        			if (svelte_element) svelte_element.c();
        
        			svelte_element_anchor = empty();
        
        		},
        
        		l(nodes) {
        
        			if (svelte_element) svelte_element.l(nodes);
        
        			svelte_element_anchor = empty();
        
        		},
        
        		m(target, anchor) {
        
        			if (svelte_element) svelte_element.m(target, anchor);
        
        			insert_hydration(target, svelte_element_anchor, anchor);
        
        		},
        
        		p(ctx, [dirty]) {
        
        			if (/*type*/ ctx[1]) {
        
        				if (!previous_tag) {
        
        					svelte_element = create_dynamic_element(ctx);
        
        					previous_tag = /*type*/ ctx[1];
        
        					svelte_element.c();
        
        					svelte_element.m(svelte_element_anchor.parentNode, svelte_element_anchor);
        
        				} else if (safe_not_equal(previous_tag, /*type*/ ctx[1])) {
        
        					svelte_element.d(1);
        
        					svelte_element = create_dynamic_element(ctx);
        
        					previous_tag = /*type*/ ctx[1];
        
        					svelte_element.c();
        
        					svelte_element.m(svelte_element_anchor.parentNode, svelte_element_anchor);
        
        				} else {
        
        					svelte_element.p(ctx, dirty);
        
        				}
        
        			} else if (previous_tag) {
        
        				svelte_element.d(1);
        
        				svelte_element = null;
        
        				previous_tag = /*type*/ ctx[1];
        
        			}
        
        		},
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(svelte_element_anchor);
        
        			}
        
        
        
        			if (svelte_element) svelte_element.d(detaching);
        
        		}
        
        	};
        
        }
        
        
        
        function instance$2($$self, $$props, $$invalidate) {
        
        	const dispatch = createEventDispatcher();
        
        	let { text = "Cliquez-moi" } = $$props;
        
        	let { type = "a" } = $$props;
        
        
        
        	function handleClick() {
        
        		dispatch('action');
        
        	}
        
        
        
        	$$self.$$set = $$props => {
        
        		if ('text' in $$props) $$invalidate(0, text = $$props.text);
        
        		if ('type' in $$props) $$invalidate(1, type = $$props.type);
        
        	};
        
        
        
        	return [text, type, handleClick];
        
        }
        
        
        
        class ActionElement extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$2, create_fragment$2, safe_not_equal, { text: 0, type: 1 });
        
        	}
        
        }
        
        
        
        function vonKoch(p5) {
        
          let initialSize;
        
          let lSize;
        
          let pKochIterations;
        
        
        
          function substring(string) {
        
            let ns = "";
        
            for(let i = 0; i < string.length; i++) {
        
              if(string.charAt(i) == 'l')
        
                ns += "l+l-l+l";
        
              else
        
                ns += string.charAt(i);
        
            }
        
            return ns;
        
          }
        
        
        
          const drawSnowflake = (initiator, iterations) => {
        
            console.log(`Petit appel à drawSnowflakes qui va bien cousin. kochIterations vaut ${iterations} et est de type ${typeof this.kochIterations}`);
        
            lSize = iterations == 0 ? initialSize : initialSize / p5.pow(3, iterations);
        
            pKochIterations = iterations;
        
            // Generate the drawing procedure
        
            for(let i = 0; i < iterations; i++) {
        
              initiator = substring(initiator);
        
            }
        
        
        
            p5.background(248);
        
            p5.stroke(0);
        
            p5.fill(255);
        
            p5.rect(0, 0, p5.width - 1, p5.height - 1);
        
            p5.translate(p5.width / 2 - initialSize / 2, p5.height / 2 -  p5.sqrt(3) / 2 * (initialSize / 3));
        
        
        
            for(let i = 0; i < initiator.length; i++) {
        
              switch(initiator.charAt(i)) {
        
                case 'l':
        
                  p5.line(0, 0, lSize, 0);
        
                  p5.ellipse(lSize, 0, 2, 2);
        
                  p5.translate(lSize, 0);
        
                break;
        
                case '+':
        
                  p5.rotate(p5.radians(-60));
        
                break;
        
                case '-':
        
                  p5.rotate(p5.radians(120));
        
                break;
        
              }
        
            }
        
          };
        
        
        
          p5.setup = () => {
        
            initialSize = p5.width / 1.5;
        
            drawSnowflake("l-l-l", this.kochIterations);
        
            p5.noLoop();
        
          };
        
        
        
          p5.draw = () => {
        
            if(pKochIterations != this.kochIterations) {
        
               drawSnowflake("l-l-l", this.kochIterations);
        
               pKochIterations = this.kochIterations;
        
            }
        
          };
        
        }
        
        
        
        function singleHexagon(p5) {
        
          let pProgressAngle;
        
        
        
          p5.setup = () => {
        
            pProgressAngle = this.progressAngle;
        
            drawProgressiveHexagon();
        
          };
        
        
        
          const drawProgressiveHexagon = () => {
        
            let size = 100;
        
            let progress = this.progressAngle;
        
            let hexagonFull = false;
        
        
        
            if(progress == 0)
        
              progress = 0.001;
        
            if(progress > p5.TWO_PI)
        
              progress = p5.TWO_PI;
        
        
        
            p5.background(255);
        
            p5.translate(p5.width / 2, p5.height / 2);
        
        
        
            p5.push();
        
              p5.stroke(0);
        
              p5.strokeWeight(2);
        
              p5.arc(0, 0, 2 * size, 2 * size, 0, progress);
        
              p5.line(0, 0, size * p5.cos(progress), size * p5.sin(progress));
        
            p5.pop();
        
        
        
            p5.fill(255);
        
        
        
            p5.push();
        
            p5.fill(0, 108, 189, 100);
        
            p5.beginShape();
        
              let currentAngle = 0;
        
              for(let i = 0; i < p5.floor(progress / (p5.TWO_PI / 6)) + 1; i++) {
        
                hexagonFull = i == 6 ? true : false;
        
                if(hexagonFull) {
        
                  p5.noFill();
        
                  p5.strokeWeight(1);
        
                  p5.stroke(0);
        
                  // Signe de l'angle droit
        
                  p5.rect(0, -p5.sqrt(3)/ 2 * size, 10, 10);
        
                  p5.fill(0, 108, 189, 100);
        
                  p5.strokeWeight(4);
        
                  p5.stroke(0, 108, 189);
        
                } else {
        
                  p5.noStroke();
        
                }
        
        
        
                let a = size * p5.cos(currentAngle);
        
                let b = size * p5.sin(currentAngle);
        
        
        
                p5.vertex(a, b);
        
        
        
                p5.push();
        
                  p5.stroke(0, 108, 189, 100);
        
                  p5.strokeWeight(2);
        
                  p5.line(0, 0, size * p5.cos(currentAngle), size * p5.sin(currentAngle));
        
                p5.pop();
        
        
        
                p5.push();
        
                  p5.noStroke();
        
                  p5.fill(0, 108, 189);          p5.ellipse(a, b, 10, 10);
        
                p5.pop();
        
        
        
                currentAngle += p5.TWO_PI / 6;
        
              }
        
            p5.endShape();
        
        
        
            if(hexagonFull) {
        
              p5.push();
        
                p5.strokeWeight(1);
        
                p5.stroke(0);
        
                p5.line(-size / 4 + 2, (-p5.sqrt(3)/ 2 * size) - 5, -size / 4 - 2, (-p5.sqrt(3)/ 2 * size) + 5);
        
                p5.line(-size / 4 + 2 + 5, (-p5.sqrt(3)/ 2 * size) - 5, -size / 4 - 2 + 5, (-p5.sqrt(3)/ 2 * size) + 5);
        
        
        
                p5.line(size / 4 + 2, (-p5.sqrt(3)/ 2 * size) - 5, size / 4 - 2, (-p5.sqrt(3)/ 2 * size) + 5);
        
                p5.line(size / 4 + 2 - 5, (-p5.sqrt(3)/ 2 * size) - 5, size / 4 - 2 - 5, (-p5.sqrt(3)/ 2 * size) + 5);
        
        
        
              p5.pop();
        
              p5.strokeWeight(3);
        
              p5.strokeCap(p5.ROUND);
        
              p5.stroke(255 - 0, 255 - 108, 255 - 189);
        
              p5.line(0, -2, 0, -p5.sqrt(3)/ 2 * size + 2);
        
            } else {
        
              p5.noStroke();
        
            }
        
        
        
            p5.pop();
        
          };
        
        
        
          p5.draw = () => {
        
            if(pProgressAngle != this.progressAngle) {
        
              drawProgressiveHexagon();
        
              pProgressAngle = this.progressAngle;
        
            }
        
          };
        
        }
        
        
        
        // Sketch des cercles de Kepler !
        
        function keplerCircles(p5) {
        
          let drawnCircles;
        
          let pCircleLayers;
        
        
        
          p5.setup = () => {
        
            pCircleLayers = this.circleLayers;
        
            console.log(`kochIterations = ${this.kochIterations}`);
        
            drawCircleLayers();
        
          };
        
        
        
          const arrayContainsPoint = (point, array) => {
        
            if(array != null) {
        
              for(let i = 0; i < array.length; i++) {
        
                if(array[i].x == point.x && array[i].y == point.y)
        
                  return true;
        
              }
        
            }
        
        
        
            return false;
        
          };
        
        
        
          const touchingCircles = (o, iterations, radius) => {
        
            if(!arrayContainsPoint(o, drawnCircles)) {
        
              p5.ellipse(o.x, o.y, radius, radius);
        
              drawnCircles.push(o);
        
            }
        
        
        
            if(iterations > 0) {
        
              for(let i = 0; i < 6; i++) {
        
                let no = p5.createVector(
        
                  Number((o.x + p5.cos(i * p5.TWO_PI / 6) * radius).toFixed(1)),
        
                  Number((o.y + p5.sin(i * p5.TWO_PI / 6) * radius).toFixed(1))
        
                );
        
        
        
                touchingCircles(no, iterations - 1, radius);
        
              }
        
            }
        
          };
        
        
        
          const drawCircleLayers = () => {
        
            drawnCircles = new Array();
        
            let baseRadius = p5.height - 30;
        
            //let iterations = p5.constrain(p5.round(p5.map(p5.mouseX, 0, p5.width, 0, 6)), 0, 6);
        
            let iterations = this.circleLayers;
        
            let computedRadius = baseRadius / (2 * iterations + 1);
        
        
        
            p5.background(250, 246, 234);
        
            //p5.stroke(0, 108, 189);
        
            p5.stroke(145, 31, 30);
        
            p5.strokeWeight(2);
        
            p5.translate(p5.width / 2, p5.height / 2);
        
            p5.fill(255, 238, 224);
        
            let origin = p5.createVector(0, 0);
        
            touchingCircles(origin, iterations, computedRadius);
        
          };
        
        
        
          p5.draw = () => {
        
            if(pCircleLayers != this.circleLayers) {
        
              drawCircleLayers();
        
              pCircleLayers = this.circleLayers;
        
             //console.log("draw called. Optimized !")
        
            }
        
          };
        
        }
        
        
        
        // Second sketch : A hexagonal grid
        
        function hexagonalGrid(p5) {
        
          let side;
        
          let h;
        
          let tilesPerCols;
        
          let grid;
        
          let pProgressGrid;
        
          let pToggleMeasures;
        
          let pToggleHexaGrid;
        
          let pTilesPerRow;
        
        
        
          p5.setup = () => {
        
            pProgressGrid = this.progressGrid;
        
            pToggleMeasures = this.toggleMeasures;
        
            pToggleHexaGrid = this.toggleHexaGrid;
        
            pTilesPerRow = this.hexaGridTilesPerRow;
        
            drawProgressiveGrid();
        
          };
        
        
        
          const drawProgressiveGrid = () => {
        
            p5.noFill();
        
            p5.strokeWeight(3);
        
            p5.stroke(0, 108, 189);
        
        
        
            side = p5.width * (2.0 / (this.hexaGridTilesPerRow * 3.0));
        
            h = side * p5.sqrt(3) / 2.0;
        
            tilesPerCols = p5.floor(p5.height / (2.0 * h));
        
        
        
            // Main grid
        
            grid = new Array(this.hexaGridTilesPerRow + 1);
        
            for(let i = 0; i < this.hexaGridTilesPerRow + 1; i++) {
        
              grid[i] = new Array(p5.ceil(tilesPerCols) + 1);
        
              for(let j = 0; j < tilesPerCols + 1; j++) {
        
                grid[i][j] = 0.5;
        
              }
        
            }
        
        
        
            p5.background(248);
        
        
        
            let progress = p5.map(this.progressGrid, 0, 100, 0, grid.length * grid[0].length);
        
            drawHexagonalGrid(grid, 10, progress);
        
            pProgressGrid = this.progressGrid;
        
            pToggleHexaGrid = this.toggleHexaGrid;
        
            pToggleMeasures = this.toggleMeasures;
        
            pTilesPerRow = this.hexaGridTilesPerRow;
        
          };
        
        
        
          p5.draw = () => {
        
            if(this.hexaGridTilesPerRow != pTilesPerRow || this.progressGrid != pProgressGrid || this.toggleMeasures != pToggleMeasures || this.toggleHexaGrid != pToggleHexaGrid) {
        
              drawProgressiveGrid();
        
            }
        
          };
        
        
        
          const hexagon = (cx, cy, side) => {
        
            let currentAngle = 0;
        
            p5.beginShape();
        
              for(let i = 0; i < 6; i++) {
        
                let a = cx + side * p5.cos(currentAngle);
        
                let b = cy + side * p5.sin(currentAngle);
        
                p5.vertex(a, b);
        
                currentAngle += p5.PI / 3;
        
              }
        
            p5.endShape(p5.CLOSE);
        
          };
        
        
        
          
        
          const drawHexagonalGrid = (g, maxValue, progress) => {
        
            // Center of the hexagon tile
        
            let cx = 0;
        
            let cy = h;
        
          
        
            let pcx = cx;
        
            let pcy = cy;
        
          
        
            let sign = false;
        
            let counter = 0;
        
            let angle;
        
          
        
            for(let i = 0; i < this.hexaGridTilesPerRow + 1; i++)
        
            {
        
              if(counter > progress)
        
                break;
        
          
        
              for(let j = 0; j < p5.ceil(tilesPerCols) + 1; j++)
        
              {
        
                if(counter < progress) {
        
                  if(this.toggleHexaGrid)
        
                    hexagon(cx, cy, side);
        
          
        
                  if(this.toggleMeasures) {
        
                    p5.push(); // Début des réglages de style pour les mesures
        
                      p5.strokeWeight(1);
        
                      p5.stroke(255, 255 - 108, 255 - 189);
        
                      p5.line(cx, cy - h + 2, cx, cy + h);
        
                    p5.pop(); // Fin des réglages de style pour les mesures
        
                  }
        
          
        
                  pcy = sign ? cy + h : cy - h;
        
          
        
                  if(this.toggleMeasures && i > 0) {
        
                    p5.push(); // Début des réglages de style pour les lignes de mesure supplémentaires
        
                      p5.strokeWeight(1);
        
                      p5.strokeCap(p5.SQUARE);
        
          
        
                      p5.stroke(255, 0, 0);
        
                      p5.line(pcx, pcy, cx, cy);
        
          
        
                      p5.stroke(0, 255, 0);
        
                      p5.line(cx, cy + h, cx - side * 3.0 / 2.0, cy + h);
        
                    p5.pop(); // Fin des réglages de style pour les lignes de mesure supplémentaires
        
                  }
        
          
        
                  cy += 2 * h;
        
          
        
                  counter++;
        
                } else {
        
                  break;
        
                }
        
              }
        
          
        
              sign = !sign;
        
              angle = sign ? -p5.PI / 6.0 : 0;
        
              cy = h;
        
          
        
              pcx = cx;
        
              pcy = cy;
        
          
        
              if(angle != 0) {
        
                //cx += cos(angle) * h * 2; =
        
                cx += side * 3.0 / 2.0;
        
                cy += p5.sin(angle) * h * 2;
        
              } else {
        
                cx += side * 3.0 / 2.0;
        
              }
        
          
        
            }
        
          };
        
          
        
        }
        
        
        
        function fieldsDistinction(p5) {
        
          let unitVectors;
        
          let drawn_hexs;
        
        
        
          p5.preload = () => {
        
            p5.___inconsolata = p5.loadFont("/fonts/RedHatText-Medium.ttf");
        
          };
        
        
        
          const hexagon = (x, y, z, side, waterLevel, type) => {
        
            let currentAngle = 0;
        
            p5.sqrt(3) / 2 * side;
        
        
        
            if(this.displayColours) {
        
              if(type == "frozen")
        
                p5.fill(236, 254, 254);
        
              else if(type == "gray")
        
                p5.fill(220, 220, 220);
        
              else if(type == "frozenNeighbour")
        
                        p5.fill(202, 250, 252);
        
                //p5.fill(232, 247, 251);
        
              else if(type == "vapour")
        
                //p5.fill(48, 152, 255);
        
                p5.fill(48, 118, 187);
        
            }
        
            else {
        
              p5.fill(255);
        
            }
        
        
        
            let pos =
        
            p5.createVector((x * unitVectors[0].x +
        
                          y * unitVectors[1].x +
        
                          z * unitVectors[2].x) * side,
        
                        (x * unitVectors[0].y +
        
                         y * unitVectors[1].y +
        
                         z * unitVectors[2].y) * side);
        
        
        
            p5.beginShape();
        
              for(let i = 0; i < 6; i++) {
        
                let a = pos.x + side * p5.cos(currentAngle);
        
                let b = pos.y + side * p5.sin(currentAngle);
        
                p5.vertex(a, b);
        
                currentAngle += p5.TWO_PI / 6;
        
              }
        
            p5.endShape(p5.CLOSE);
        
        
        
            p5.push();
        
                p5.fill(0);
        
                let ts = 12;
        
                p5.textSize(ts);
        
                p5.textFont(p5.___inconsolata);
        
                p5.noStroke();
        
                let textContent;
        
        
        
                if(type == "gray") {
        
                  waterLevel = "0";
        
                }
        
        
        
                textContent = waterLevel;
        
        
        
                let tw = p5.textWidth(textContent);
        
                p5.text(textContent, pos.x - tw / 2, pos.y + ts / 2);
        
              p5.pop();
        
        };
        
        
        
          const findIndexOf = (pos, array) => {
        
            for(let i = 0; i < array.length; i++)
        
              if(array[i].pos.equals(pos))
        
                return i;
        
        
        
            return -1;
        
          };
        
        
        
          const frozenNeighbours = (pos, array) => {
        
            let neighboursOffsets = [
        
                p5.createVector(0, 1, -1),
        
                p5.createVector(-1, 1, 0),
        
                p5.createVector(-1, 0, 1),
        
                p5.createVector(0, -1, 1),
        
                p5.createVector(1, -1, 0),
        
                p5.createVector(1, 0, -1)
        
            ];
        
        
        
            for(let i = 0; i < neighboursOffsets.length; i++) {
        
              let cursor = p5.createVector(pos.x + neighboursOffsets[i].x, pos.y + neighboursOffsets[i].y, pos.z + neighboursOffsets[i].z);
        
              let index = findIndexOf(cursor, array);
        
        
        
              // If a position is found in the array
        
              if(index != -1) {
        
                if(array[index].waterLevel >= 1) {
        
                  return true;
        
                }
        
              }
        
            }
        
        
        
            return false;
        
          };
        
        
        
          p5.setup = () => {
        
        
        
          };
        
        
        
          p5.draw = () => {
        
              let radius = 4;
        
              let side = 24.0;
        
              let selectedType;
        
              p5.sqrt(3) / 2 * side;
        
        
        
              drawn_hexs = new Array();
        
              p5.randomSeed(this.randomGrid);
        
        
        
              for(let i = -radius; i <= radius; i++) {
        
                for(let j = -radius; j <= radius; j++) {
        
                  for(let k = -radius; k <= radius; k++) {
        
                    if(i + j + k == 0) {
        
                      let pos = p5.createVector(i, j, k);
        
                      let water = p5.random(0, this.maxHumidity).toFixed(1);              drawn_hexs.push({pos:pos, waterLevel:water});
        
                    }
        
                  }
        
                }
        
              }
        
        
        
              unitVectors = [
        
                p5.createVector(1, 0), // x axis
        
                p5.createVector(p5.cos(-2 * p5.PI / 3), p5.sin(-2 * p5.PI / 3)), // y axis
        
                p5.createVector(p5.cos(2 * p5.PI / 3), p5.sin(2 * p5.PI / 3)) // z axis
        
              ];
        
        
        
              p5.push();
        
                p5.translate(p5.width / 2 - side * (radius + 1), p5.height / 2);
        
                //p5.stroke(0, 108, 189);
        
                p5.stroke(0);
        
                p5.background(255);
        
                p5.fill(255);
        
                p5.strokeWeight(1);
        
        
        
                // First grid
        
                for(let i = 0; i < drawn_hexs.length; i++) {
        
                  let current = drawn_hexs[i];
        
                  if(current.waterLevel >= 1)
        
                    selectedType = "frozen";
        
                    // If neighbours are frozon
        
                  else if(frozenNeighbours(current.pos, drawn_hexs))
        
                    selectedType = "frozenNeighbour";
        
                  else
        
                    selectedType = "vapour";
        
        
        
                  hexagon(current.pos.x, current.pos.y, current.pos.z, side, current.waterLevel, selectedType);
        
                }
        
        
        
            p5.pop();
        
        
        
            let initSide = side;
        
            p5.push();
        
              p5.noStroke();
        
              p5.translate(p5.width - 5/3 * initSide * (radius - 1), p5.height / 4);
        
              side *= 0.6;
        
        
        
              // Receptive grid
        
              for(let i = 0; i < drawn_hexs.length; i++) {
        
                let current = drawn_hexs[i];
        
                if(current.waterLevel >= 1 || frozenNeighbours(current.pos, drawn_hexs))
        
                  selectedType = "frozen";
        
                else
        
                  selectedType = "gray";
        
        
        
                hexagon(current.pos.x, current.pos.y, current.pos.z, side, current.waterLevel, selectedType);
        
              }
        
            p5.pop();
        
        
        
            p5.push();
        
              p5.noStroke();
        
              p5.translate(p5.width - 5/3 * initSide * (radius - 1), p5.height - p5.height / 4);
        
        
        
              // Non-receptive grid
        
              for(let i = 0; i < drawn_hexs.length; i++) {
        
                let current = drawn_hexs[i];
        
                if(current.waterLevel >= 1 || frozenNeighbours(current.pos, drawn_hexs))
        
                  selectedType = "gray";
        
                else
        
                  selectedType = "vapour";
        
        
        
                hexagon(current.pos.x, current.pos.y, current.pos.z, side, current.waterLevel, selectedType);
        
              }
        
            p5.pop();
        
          };
        
        }
        
        
        
        function waterDiffusion(p5) {
        
          let unitVectors;
        
          let drawn_hexs;
        
          let radius = 3;
        
          let side = 25.0;
        
          let pMaxHumidityBis;
        
          let pRandomGridBis;
        
        
        
          let neighboursOffsets  = [
        
            p5.createVector(0, 1, -1),
        
            p5.createVector(-1, 1, 0),
        
            p5.createVector(-1, 0, 1),
        
            p5.createVector(0, -1, 1),
        
            p5.createVector(1, -1, 0),
        
            p5.createVector(1, 0, -1)
        
          ];
        
        
        
          const formatedFraction = (pos, a, b, tsize) => {
        
              p5.push();
        
                p5.stroke(0);
        
                p5.fill(0);
        
                p5.textSize(tsize);
        
                p5.textFont(p5.___mathsFont);
        
        
        
                let margin = 7;
        
                let _twa = p5.textWidth("" + a);
        
                let _twb = p5.textWidth("" + b);
        
        
        
                let larger = _twa > _twb ? a : b;
        
                let smaller = _twa < _twb ? a : b;
        
        
        
                p5.strokeWeight(2);
        
                p5.line(pos.x, pos.y, pos.x + (larger == a ? _twa : _twb) + margin, pos.y);
        
                p5.strokeWeight(1);
        
        
        
                smaller == a ? p5.text(a, pos.x + (_twb + margin) / 2 - _twa / 2, pos.y - tsize / 2) : p5.text(a, pos.x + margin / 2, pos.y - tsize / 2);
        
                larger == b ? p5.text(b, pos.x + margin / 2, pos.y + tsize + 2) : p5.text(b, pos.x + (_twb + margin) / 2 - _twa / 2 , pos.y + tsize + 2);
        
        
        
              p5.pop();
        
        
        
              return (larger == a ? _twa : _twb) + margin;
        
            };
        
        
        
          p5.preload = () => {
        
            p5.___inconsolata = p5.loadFont("/fonts/RedHatText-Medium.otf");
        
            p5.___mathsFont = p5.loadFont("/fonts/latinmodern-math.otf");
        
          };
        
        
        
          p5.setup = () => {
        
            pRandomGridBis = this.randomGridBis;
        
            pMaxHumidityBis = this.maxHumidityBis;
        
            drawSketch();
        
          };
        
        
        
          const hexagon = (x, y, z, side, waterLevel, type) => {
        
            let currentAngle = 0;
        
            let insideGrid = true;
        
        
        
            let selectedIndex = findIndexOf(p5.createVector(x, y, z), drawn_hexs);
        
            if(selectedIndex >= 0 && type == undefined)
        
              type = drawn_hexs[selectedIndex].hexType;
        
            else if(selectedIndex == -1)
        
              insideGrid = false;
        
        
        
            if(type == "frozen")
        
              p5.fill(153, 217, 234);
        
            else if(type == "gray")
        
              p5.fill(220, 220, 220);
        
            else if(type == "frozenNeighbour")
        
              p5.fill(232, 247, 251);
        
            else if(type == "vapour")
        
              p5.fill(48, 118, 187);
        
            else if(type == "uncoloured")
        
              p5.fill(255);
        
            else if(type == "selection")
        
              p5.fill(220, 235, 254);
        
            else if(type == "selectionNeighbourhood")
        
              p5.fill(220, 235, 254, 100);
        
        
        
            let pos =
        
            p5.createVector((x * unitVectors[0].x +
        
                          y * unitVectors[1].x +
        
                          z * unitVectors[2].x) * side,
        
                        (x * unitVectors[0].y +
        
                         y * unitVectors[1].y +
        
                         z * unitVectors[2].y) * side);
        
        
        
            p5.beginShape();
        
              for(let i = 0; i < 6; i++) {
        
                let a = pos.x + side * p5.cos(currentAngle);
        
                let b = pos.y + side * p5.sin(currentAngle);
        
                p5.vertex(a, b);
        
                currentAngle += p5.TWO_PI / 6;
        
              }
        
            p5.endShape(p5.CLOSE);
        
        
        
            p5.push();
        
                p5.fill(0);
        
                let ts = 12;
        
                p5.textSize(ts);
        
                p5.textFont(p5.___inconsolata);
        
                p5.noStroke();
        
                let textContent;
        
        
        
                if(type == "gray") {
        
                  let selectedIndex = findIndexOf(p5.createVector(x, y, z), drawn_hexs);
        
                  drawn_hexs[selectedIndex] = {pos:p5.createVector(x, y, z), waterLevel:"0", hexType:drawn_hexs[selectedIndex].hexType};
        
                  waterLevel = "0";
        
                }
        
        
        
                textContent = waterLevel;
        
                let tw = p5.textWidth(textContent);
        
        
        
                if(type != "selectionNeighbourhood" && insideGrid)
        
                  p5.text(textContent, pos.x - tw / 2, pos.y + ts / 2);
        
              p5.pop();
        
          };
        
        
        
          const findIndexOf = (pos, array) => {
        
            for(let i = 0; i < array.length; i++)
        
              if(array[i].pos.equals(pos))
        
                return i;
        
        
        
            return -1;
        
          };
        
        
        
          const nearestNeighbours = (pos) => {
        
            let neighboursArray = new Array();
        
        
        
            if(findIndexOf(pos, drawn_hexs) != -1) {
        
              for(let i = 0; i < neighboursOffsets.length; i++) {
        
                let cursor = p5.createVector(pos.x + neighboursOffsets[i].x, pos.y + neighboursOffsets[i].y, pos.z + neighboursOffsets[i].z);
        
        
        
                let index = findIndexOf(cursor, drawn_hexs);
        
        
        
                // If a position is found in the array
        
                if(index != -1)
        
                  neighboursArray.push({pos:cursor, waterLevel:drawn_hexs[index].waterLevel});
        
              }
        
            }
        
            return neighboursArray;
        
          };
        
        
        
          const frozenNeighbours = (pos, array) => {
        
            for(let i = 0; i < neighboursOffsets.length; i++) {
        
              let cursor = p5.createVector(pos.x + neighboursOffsets[i].x, pos.y + neighboursOffsets[i].y, pos.z + neighboursOffsets[i].z);
        
              let index = findIndexOf(cursor, array);
        
              // If a position is found in the array
        
              if(index != -1) {
        
                if(array[index].waterLevel >= 1) {
        
                  //console.log("match ! " + index + " is close to " + i + " which is frozen");
        
                  return true;
        
                }
        
              }
        
            }
        
            return false;
        
          };
        
        
        
          const drawSketch = () => {
        
            p5.randomSeed(this.randomGridBis);
        
        
        
            // Array initialization
        
            drawn_hexs = new Array();
        
        
        
            for(let i = -radius; i <= radius; i++) {
        
              for(let j = -radius; j <= radius; j++) {
        
                for(let k = -radius; k <= radius; k++) {
        
                  if(i + j + k == 0) {
        
                    let pos = p5.createVector(i, j, k);
        
                    let water = p5.random(0, this.maxHumidityBis).toFixed(1);            drawn_hexs.push({pos:pos, waterLevel:water});
        
                  }
        
                }
        
              }
        
            }
        
        
        
            let type;
        
            for(let i = 0; i < drawn_hexs.length; i++) {
        
              if(drawn_hexs[i].waterLevel >= 1 || frozenNeighbours(drawn_hexs[i].pos, drawn_hexs))
        
                type = "gray";
        
              else
        
                type = "vapour";
        
        
        
              drawn_hexs[i] = {pos:drawn_hexs[i].pos, waterLevel:drawn_hexs[i].waterLevel, hexType:type};
        
            }
        
        
        
            p5.line(0, 10 , 100, 10);
        
            unitVectors = [
        
              p5.createVector(1, 0), // x axis
        
              p5.createVector(p5.cos(-2 * p5.PI / 3),p5. sin(-2 * p5.PI / 3)), // y axis
        
              p5.createVector(p5.cos(2 * p5.PI / 3), p5.sin(2 * p5.PI / 3)) // z axis
        
            ];
        
        
        
            p5.push();
        
              p5.translate(p5.width / 2, p5.height / 1.8);
        
              //p5.stroke(0, 108, 189);
        
              p5.stroke(0);
        
              p5.background(255);
        
              p5.fill(255);
        
              p5.strokeWeight(1);
        
        
        
              for(let i = 0; i < drawn_hexs.length; i++) {
        
                let current = drawn_hexs[i];
        
        
        
                hexagon(current.pos.x, current.pos.y, current.pos.z, side, current.waterLevel);
        
              }
        
            p5.pop();
        
        
        
            p5.translate(p5.width / 2, p5.height / 1.8);
        
            p5.fill(17, 121, 249);
        
            p5.stroke(17, 121, 249);
        
        
        
            let nmx = p5.mouseX - p5.width / 2;
        
            let nmy = p5.mouseY - p5.height / 1.8;
        
        
        
            // Coordonnées obtenues grâce au calcul de la matrice
        
            let converted = p5.createVector((2 * nmx) / 3 / side,
        
                                         (-nmx / 3 + p5.sqrt(3) * nmy / 3) / side);
        
        
        
            // Ok, ça fonctionne. Mais POURQUOI ? Comprendre vraiment. Relire cours algèbre linéaire ?
        
            let q = p5.round(converted.x);
        
            let r = p5.round(converted.y);
        
            let s = -q - r;
        
        
        
            let selectedIndex = findIndexOf(p5.createVector(q, s, r), drawn_hexs);
        
            let neighbours = nearestNeighbours(p5.createVector(q, s, r));
        
        
        
            if(selectedIndex >= 0) {
        
              let nbsum = 0;
        
              let textPos = p5.createVector(-p5.width / 2.5, -radius * side * 2.75);
        
        
        
              // Affichage de l'équation dynamique
        
              p5.push();
        
                p5.stroke(0);
        
                p5.fill(0);
        
                p5.textSize(17);
        
                p5.textFont(p5.___mathsFont);
        
        
        
                textPos.x += formatedFraction(textPos, 1, 12, 17);
        
                textPos.y += 17 / 4.0;
        
                p5.text(" " + String.fromCharCode(215) + " (", textPos.x, textPos.y);
        
                textPos.x += p5.textWidth(" " + String.fromCharCode(215) + " (");
        
        
        
                for(let i = 0; i < neighbours.length; i++) {
        
                  let lastCharacters = i == neighbours.length - 1 ?  ") " :  " + ";
        
                  p5.fill(115, 164, 214);
        
                  p5.stroke(115, 164, 214);
        
                  p5.text("" + neighbours[i].waterLevel, textPos.x, textPos.y);
        
                  textPos.x += p5.textWidth(neighbours[i].waterLevel);
        
                  p5.fill(0);
        
                  p5.stroke(0);
        
                  p5.text(lastCharacters, textPos.x, textPos.y);
        
                  textPos.x += p5.textWidth(lastCharacters);
        
                  nbsum += parseFloat(neighbours[i].waterLevel);
        
                }
        
        
        
                p5.text("+ ", textPos.x, textPos.y);
        
                textPos.x += p5.textWidth("+ ");
        
                textPos.x += formatedFraction(p5.createVector(textPos.x, textPos.y - 17 / 4.0), 1, 2, 17);
        
                p5.text(" " + String.fromCharCode(215) + " " + drawn_hexs[selectedIndex].waterLevel, textPos.x, textPos.y);
        
                textPos.x += p5.textWidth(" " + String.fromCharCode(215) + " " + drawn_hexs[selectedIndex].waterLevel);
        
        
        
                nbsum *= 1/12;
        
                nbsum += drawn_hexs[selectedIndex].waterLevel / 2;
        
                p5.text(" " + String.fromCharCode(8776) + " ", textPos.x, textPos.y);
        
                textPos.x += p5.textWidth(" " + String.fromCharCode(8776) + " ");
        
                p5.fill(172, 208, 253);
        
                p5.stroke(172, 208, 253);
        
                p5.text(nbsum.toFixed(2), textPos.x, textPos.y);
        
                p5.fill(0);
        
              p5.pop();
        
        
        
              hexagon(q, s, r, side, nbsum.toFixed(2), "selection");
        
            } else {
        
              hexagon(q, s, r, side, 0, "selection");
        
            }
        
        
        
            for(let i = 0; i < neighbours.length; i++)
        
              hexagon(neighbours[i].pos.x, neighbours[i].pos.y, neighbours[i].pos.z, side, 0, "selectionNeighbourhood");
        
          };
        
        
        
          p5.draw = () => {
        
            if(p5.mouseX > 0 && p5.mouseX < p5.width &&  p5.mouseY > 0 && p5.mouseY < p5.height && (p5.pMouseX != p5.mouseX || p5.mouseY != p5.mouseY)) {
        
              drawSketch();
        
            }
        
        
        
            if(pMaxHumidityBis != this.maxHumidityBis || pRandomGridBis != this.randomGridBis) {
        
              pRandomGridBis = this.randomGridBis;
        
              pMaxHumidityBis = this.maxHumidityBis;
        
              drawSketch();
        
             //console.log("optimized");
        
            }
        
          };
        
        
        
          p5.mousePressed = () => {
        
            let nmx = p5.mouseX - p5.width / 2;
        
            let nmy = p5.mouseY - p5.width / 2;
        
        
        
            p5.atan2(nmy, nmx);
        
            // Coordonnées obtenues grâce au calcul de la matrice
        
            let converted = p5.createVector((2 * nmx) / 3 / side,
        
                                         (-nmx / 3 + p5.sqrt(3) * nmy / 3) / side);
        
        
        
            // Ok, ça fonctionne. Mais POURQUOI ? Comprendre vraiment. Relire cours algèbre linéaire ?
        
            let q = p5.round(converted.x);
        
            let r = p5.round(converted.y);
        
            let s = -q - r;
        
        
        
            findIndexOf(p5.createVector(q, s, r), drawn_hexs);
        
           //console.log("q : " + q + " r : " + r + " s : " + s);
        
           //console.log("Type : " + drawn_hexs[selectedIndex].hexType + ", Water : " + drawn_hexs[selectedIndex].waterLevel)
        
          };
        
        }
        
        
        
        function gameOfLife(p5) {
        
          p5.setup = () => {
        
        
        
            p5.params = {
        
              resolution: 60.0,
        
              gol_grid:undefined,
        
              pGolReset:this.gol_reset,
        
              n: 0,
        
              pGolIterate:this.gol_iterate
        
            };
        
        
        
            p5.background(255);
        
            p5.noStroke();
        
            p5.fill(255);
        
        
        
            p5.params.n = p5.width / p5.params.resolution;
        
        
        
            p5.params.gol_grid = new Array(p5.params.resolution);
        
            for(let i = 0; i < p5.params.resolution; i++) {
        
              p5.params.gol_grid[i] = new Array(p5.params.resolution);
        
            }
        
        
        
            for(let i = 0; i < p5.params.resolution; i++) {
        
              for(let j = 0; j < p5.params.resolution; j++) {
        
                p5.params.gol_grid[i][j] = p5.floor(p5.random(0, 1.4));
        
              }
        
            }
        
        
        
            drawGrid();
        
          };
        
        
        
          p5.draw = () => {
        
            if(p5.params.pGolIterate < this.gol_iterate) {
        
              p5.params.gol_grid = gol_iteration();
        
              drawGrid();
        
              p5.params.pGolIterate = this.gol_iterate;
        
            }
        
        
        
            if(p5.params.pGolReset < this.gol_reset) {
        
              resetSketch();
        
              drawGrid();
        
              p5.params.pGolReset = this.gol_reset;
        
            }
        
          };
        
        
        
          const drawGrid = () => {
        
            p5.background(0);
        
            for(let i = 0; i < p5.params.resolution; i++) {
        
              for(let j = 0; j < p5.params.resolution; j++) {
        
                if(p5.params.gol_grid[i][j] == 0)
        
                  p5.fill(0);
        
                else if(p5.params.gol_grid[i][j] == 1)
        
                  p5.fill(255);
        
                else if((p5.params.gol_grid[i][j] == 2))
        
                  p5.fill(255, 0, 0);
        
        
        
                p5.rect(i * p5.params.n, j * p5.params.n, p5.params.n, p5.params.n);
        
              }
        
            }
        
          };
        
        
        
          const gol_iteration = () => {
        
        
        
            if(p5.params.gol_grid == undefined)
        
              console.log("apulagrid");
        
        
        
            let newGrid = new Array(p5.params.resolution);
        
            for(let i = 0; i < p5.params.resolution; i++)
        
              newGrid[i] = new Array(p5.params.resolution);
        
        
        
            for(let i = 0; i < p5.params.resolution; i++) {
        
              for(let j = 0; j < p5.params.resolution; j++) {
        
                let aliveCounter = 0;
        
                // Voisins
        
                for(let k = -1; k <= 1; k++) {
        
                  for(let l = -1; l <= 1; l++) {
        
                    if(i + k < 0 || i + k >= p5.params.resolution || j + l < 0 || j + l >= p5.params.resolution) {
        
                      aliveCounter = -1;
        
                      newGrid[i][j] = 0;
        
                      break;
        
                    } else {
        
                      aliveCounter += p5.params.gol_grid[i + k][j + l];
        
                    }
        
                  }
        
                }
        
        
        
                aliveCounter -= p5.params.gol_grid[i][j];
        
        
        
                if(aliveCounter == this.nbBirth || (aliveCounter == this.nbStay && p5.params.gol_grid[i][j] == 1))
        
                  newGrid[i][j] = 1;
        
                else
        
                  newGrid[i][j] = 0;
        
              }
        
            }
        
        
        
            return newGrid;
        
          };
        
        
        
          const resetSketch = () => {
        
            p5.randomSeed(this.gol_reset);
        
            for(let i = 0; i < p5.params.resolution; i++)
        
              for(let j = 0; j < p5.params.resolution; j++)
        
                p5.params.gol_grid[i][j] = p5.floor(p5.random(0, 1.4));
        
          };
        
        
        
          p5.mousePressed = () => {
        
            let i = p5.floor(p5.params.resolution * p5.mouseX / p5.width);
        
            let j = p5.floor(p5.params.resolution * p5.mouseY / p5.height);
        
        
        
            if(p5.mouseX >= 0 && p5.mouseX <= p5.width && p5.mouseY >= 0 && p5.mouseY <= p5.width) {
        
              p5.params.gol_grid[i][j] = p5.params.gol_grid[i][j] == 1 ? 0 : 1;
        
            }
        
        
        
            drawGrid();
        
          };
        
        }
        
        
        
        function colorPicker$1(p5) {
        
          p5.setup = () => {
        
        
        
          };
        
          
        
          p5.draw = () => {
        
            p5.stroke(0);
        
            p5.strokeWeight(2);
        
            p5.fill(this.red, this.green, this.blue);
        
            p5.rect(0, 0, p5.width, p5.height);
        
          };
        
        }
        
        
        
        function finalSimulation(p5) {
        
          let side = 0;
        
          let h = 0;
        
          let tilesPerCols = 0;
        
          let grid = 0;
        
          let currentMaxValue = 1;
        
          let pIterate = 0;
        
          let pReset;
        
          let pTilesPerRow;
        
          let pBeta;
        
          
        
          let neighboursOffsets = [
        
            [ p5.createVector(-1, -1),
        
              p5.createVector(0, -1),
        
              p5.createVector(1, -1),
        
              p5.createVector(1, 0),
        
              p5.createVector(0, 1),
        
              p5.createVector(-1, 0)
        
            ],
        
            [ p5.createVector(0, -1),
        
              p5.createVector(-1, 0),
        
              p5.createVector(0, 1),
        
              p5.createVector(1, 1),
        
              p5.createVector(1, 0),
        
              p5.createVector(-1, 1)
        
            ]
        
          ];
        
        
        
          p5.setup = () => {
        
            pTilesPerRow = this.tilesPerRow;
        
            pReset = this.resetSimulation;
        
            pBeta = this.humidity;
        
        
        
            console.log(`final sketch setup called\nthis.tilesPerRow : ${this.tilesPerRow}\npTilesPerRow : ${pTilesPerRow}`);
        
            side = p5.width * (2.0 / (this.tilesPerRow * 3.0));
        
            h = side * p5.sqrt(3) / 2.0;
        
            tilesPerCols = p5.floor(p5.height / (2.0 * h));
        
        
        
            // Main grid
        
            grid = new Array(this.tilesPerRow + 1);
        
            for(let i = 0; i < this.tilesPerRow + 1; i++) {
        
              grid[i] = new Array(p5.ceil(tilesPerCols) + 1);
        
              for(let j = 0; j < tilesPerCols + 1; j++) {
        
                grid[i][j] = this.humidity;
        
              }
        
            }
        
        
        
            // Initialize a first spot of ice
        
            grid[p5.ceil(this.tilesPerRow / 2)][p5.ceil(tilesPerCols / 2)] = 1.0;
        
        
        
            //console.log(grid);
        
        
        
            drawSketch();
        
          };
        
        
        
          const drawSketch = () => {
        
            p5.fill(200);
        
        
        
            if(this.displayTiles) {
        
              p5.strokeWeight(1);
        
              p5.stroke(0);
        
            } else {
        
              p5.noStroke();
        
            }
        
        
        
            p5.background(211);
        
        
        
            //console.log(grid);
        
            drawHexagonalGrid(grid, currentMaxValue);
        
        
        
            //console.log("iterate: " + iterate + " pIterate: " + pIterate);
        
        
        
            // Iterate the grid on click to the button below
        
            if(this.iterate > pIterate) {
        
              for(let i = 0; i < this.iterationsPerClick; i++) {
        
                let result = iterateOnGrid(grid);
        
                grid = result.newGrid;
        
                currentMaxValue = result.maxValue;
        
              }
        
        
        
              pIterate = this.iterate;
        
              pTilesPerRow = this.tilesPerRow;
        
              pBeta = this.humidity;
        
            }
        
          };
        
        
        
          p5.draw = () => {
        
            if(pReset < this.resetSimulation || pTilesPerRow != this.tilesPerRow || pBeta != this.humidity)
        
              p5.setup();
        
        
        
              drawSketch();
        
          };
        
        
        
          const hexagon = (cx, cy, side) => {
        
            let currentAngle = 0;
        
            p5.beginShape();
        
              for(let i = 0; i < 6; i++) {
        
                let a = cx + side * p5.cos(currentAngle);
        
                let b = cy + side * p5.sin(currentAngle);
        
                p5.vertex(a, b);
        
                currentAngle += p5.PI / 3;
        
              }
        
            p5.endShape(p5.CLOSE);
        
        
        
          };
        
        
        
          const drawHexagonalGrid = (g, maxValue) => {
        
            // Colours
        
            let dry = p5.color(this.color_ase_red, this.color_ase_green, this.color_ase_blue);
        
            let saturate = p5.color(this.color_asa_red, this.color_asa_green, this.color_asa_blue);
        
            let freshIce = p5.color(this.color_gf_red, this.color_gf_green, this.color_gf_blue);
        
            let oldIce = p5.color(this.color_ga_red, this.color_ga_green, this.color_ga_blue);
        
        
        
            // Center of the hexagon tile
        
            let cx = 0;
        
            let cy = h;
        
        
        
            let sign = false;
        
            let angle;
        
        
        
            for(let i = 0; i < this.tilesPerRow + 1; i++)
        
            {
        
              for(let j = 0; j < p5.ceil(tilesPerCols) + 1; j++)
        
              {
        
                // Color selection
        
                if(g[i][j] >= 1.0) {
        
                  // If the case is ice
        
                  let amount = g[i][j] / maxValue;
        
                  p5.fill(p5.lerpColor(freshIce, oldIce, amount));
        
                }
        
                else {
        
                  p5.fill(p5.lerpColor(dry, saturate, g[i][j]));
        
                }
        
        
        
                hexagon(cx, cy, side);
        
                cy += 2 * h;
        
              }
        
        
        
              sign = !sign;
        
              angle = sign ? -p5.PI / 6.0 : 0;
        
              cy = h;
        
        
        
              if(angle != 0) {
        
                cx += p5.cos(angle) * h * 2;
        
                cy += p5.sin(angle) * h * 2;
        
              } else {
        
                cx += side * 3.0 / 2.0;
        
              }
        
            }
        
          };
        
        
        
        
        
          const iterateOnGrid = (g) => {
        
            // Declaration and initialisation of data arrays
        
            let receptiveGrid = new Array(this.tilesPerRow + 1);
        
            for(let i = 0; i < this.tilesPerRow + 1; i++)
        
              receptiveGrid[i] = new Array(p5.ceil(tilesPerCols) + 1);
        
        
        
            let nonReceptiveGrid = new Array(this.tilesPerRow + 1);
        
              for(let i = 0; i < this.tilesPerRow + 1; i++)
        
                nonReceptiveGrid[i] = new Array(p5.ceil(tilesPerCols) + 1);
        
        
        
            // FIRST LEVEL - Distinguish receptive sites from non-receptive sites.
        
            for(let i = 0; i < this.tilesPerRow + 1; i++) {
        
              for(let j = 0; j < p5.ceil(tilesPerCols) + 1; j++) {
        
                let currentCase = g[i][j];
        
                let receptiveSite = currentCase >= 1.0; // boolean
        
        
        
                if(!receptiveSite) {
        
                  // ...Look at all the neighbours of hexagon (i, j)
        
                  for(let k = 0; k < 6; k++) {
        
                    let parity = i % 2 == 0 ? 1 : 0;
        
                    let offsetX = p5.int(neighboursOffsets[parity][k].x);
        
                    let offsetY = p5.int(neighboursOffsets[parity][k].y);
        
        
        
                    if(i + offsetX > 0 && j + offsetY > 0 && i + offsetX < this.tilesPerRow && j + offsetY < tilesPerCols) {
        
                      if(g[i + offsetX][j + offsetY] >= 1.0) {
        
                        receptiveSite = true;
        
                      }
        
                    }
        
                  }
        
                }
        
        
        
                // Add the constant added water parameter to the receptive sites.
        
                receptiveGrid[i][j] = receptiveSite ? currentCase + this.addedWater : 0.0;
        
                nonReceptiveGrid[i][j] = receptiveSite ? 0.0 : currentCase;
        
              }
        
            }
        
        
        
            // SECOND LEVEL - Diffusion. (Laplacian on nonReceptiveGrid)
        
            // If we update directly the values on the first grid, already computed cells will affect the computation of other cells, and we do not want that.
        
            let workingGrid = new Array(this.tilesPerRow + 1);
        
              for(let i = 0; i < this.tilesPerRow + 1; i++)
        
                workingGrid[i] = new Array(p5.ceil(tilesPerCols) + 1);
        
        
        
            for(let i = 0; i < this.tilesPerRow + 1; i++) {
        
              for(let j = 0; j < p5.ceil(tilesPerCols) + 1; j++) {
        
        
        
                let value = 1 / 2.0 * nonReceptiveGrid[i][j];
        
        
        
                for(let k = 0; k < 6; k++) {
        
                  let parity = i % 2 == 0 ? 1 : 0;
        
                  let offsetX = p5.int(neighboursOffsets[parity][k].x);
        
                  let offsetY = p5.int(neighboursOffsets[parity][k].y);
        
        
        
                  if(i + offsetX > 0 && j + offsetY > 0 && i + offsetX < this.tilesPerRow && j + offsetY < tilesPerCols) {
        
                    value += 1 / 12.0 * nonReceptiveGrid[i + offsetX][j + offsetY];
        
                  }
        
                }
        
        
        
                // The computed value is stored inside the working grid.
        
                workingGrid[i][j] = value;
        
              }
        
            }
        
        
        
            // THIRD LEVEL - Add the two grids together, and return the maximum water value.
        
            let maxValue = Number.NEGATIVE_INFINITY;
        
        
        
            for(let i = 0; i < this.tilesPerRow + 1; i++) {
        
              for(let j = 0; j < p5.ceil(tilesPerCols) + 1; j++) {
        
                g[i][j] = receptiveGrid[i][j] + workingGrid[i][j];
        
                maxValue = p5.max(maxValue, g[i][j]);
        
              }
        
            }
        
        
        
            return { "newGrid": g, "maxValue": maxValue };
        
          };
        
        }
        
        
        
        /* content\posts\snowflakes\index.mdsvx generated by Svelte v4.2.12 */
        
        
        
        function create_else_block$1(ctx) {
        
        	let equation;
        
        	let current;
        
        
        
        	equation = new Equation({
        
        			props: { type: "block", markup: `\\ldots` }
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation.$$.fragment);
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation.$$.fragment, nodes);
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation, target, anchor);
        
        			current = true;
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			destroy_component(equation, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (139:0) {#if $showCalculationDetails}
        
        function create_if_block$1(ctx) {
        
        	let equation0;
        
        	let t0;
        
        	let equation1;
        
        	let t1;
        
        	let equation2;
        
        	let t2;
        
        	let equation3;
        
        	let t3;
        
        	let equation4;
        
        	let current;
        
        
        
        	equation0 = new Equation({
        
        			props: {
        
        				type: "block",
        
        				markup: `hauteur^2 = côté^2 - (\\frac{côté}{2})^2`
        
        			}
        
        		});
        
        
        
        	equation1 = new Equation({
        
        			props: {
        
        				type: "block",
        
        				markup: `hauteur = \\sqrt{côté^2 - \\frac{côté^2}{4}}`
        
        			}
        
        		});
        
        
        
        	equation2 = new Equation({
        
        			props: {
        
        				type: "block",
        
        				markup: `hauteur = \\sqrt{ \\frac{4 \\cdot côté^2}{4} - \\frac{côté^2}{4}}`
        
        			}
        
        		});
        
        
        
        	equation3 = new Equation({
        
        			props: {
        
        				type: "block",
        
        				markup: `hauteur = \\sqrt{\\frac{3 \\cdot côté^2}{4}}`
        
        			}
        
        		});
        
        
        
        	equation4 = new Equation({
        
        			props: {
        
        				type: "block",
        
        				markup: `hauteur = \\frac{ \\sqrt{3} \\cdot \\sqrt{ côté^2 } } { \\sqrt{4} }`
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation0.$$.fragment);
        
        			t0 = space();
        
        			create_component(equation1.$$.fragment);
        
        			t1 = space();
        
        			create_component(equation2.$$.fragment);
        
        			t2 = space();
        
        			create_component(equation3.$$.fragment);
        
        			t3 = space();
        
        			create_component(equation4.$$.fragment);
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation0.$$.fragment, nodes);
        
        			t0 = claim_space(nodes);
        
        			claim_component(equation1.$$.fragment, nodes);
        
        			t1 = claim_space(nodes);
        
        			claim_component(equation2.$$.fragment, nodes);
        
        			t2 = claim_space(nodes);
        
        			claim_component(equation3.$$.fragment, nodes);
        
        			t3 = claim_space(nodes);
        
        			claim_component(equation4.$$.fragment, nodes);
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation0, target, anchor);
        
        			insert_hydration(target, t0, anchor);
        
        			mount_component(equation1, target, anchor);
        
        			insert_hydration(target, t1, anchor);
        
        			mount_component(equation2, target, anchor);
        
        			insert_hydration(target, t2, anchor);
        
        			mount_component(equation3, target, anchor);
        
        			insert_hydration(target, t3, anchor);
        
        			mount_component(equation4, target, anchor);
        
        			current = true;
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation0.$$.fragment, local);
        
        			transition_in(equation1.$$.fragment, local);
        
        			transition_in(equation2.$$.fragment, local);
        
        			transition_in(equation3.$$.fragment, local);
        
        			transition_in(equation4.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation0.$$.fragment, local);
        
        			transition_out(equation1.$$.fragment, local);
        
        			transition_out(equation2.$$.fragment, local);
        
        			transition_out(equation3.$$.fragment, local);
        
        			transition_out(equation4.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t0);
        
        				detach(t1);
        
        				detach(t2);
        
        				detach(t3);
        
        			}
        
        
        
        			destroy_component(equation0, detaching);
        
        			destroy_component(equation1, detaching);
        
        			destroy_component(equation2, detaching);
        
        			destroy_component(equation3, detaching);
        
        			destroy_component(equation4, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (213:135) <Equation>
        
        function create_default_slot_8$1(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\gamma");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\gamma");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (213:183) <Equation>
        
        function create_default_slot_7$1(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\beta");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\beta");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (215:19) <Equation>
        
        function create_default_slot_6$1(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\geqslant 1");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\geqslant 1");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (226:42) <Equation>
        
        function create_default_slot_5$1(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\beta");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\beta");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (226:287) <Equation>
        
        function create_default_slot_4$1(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("1");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "1");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (226:901) <Equation>
        
        function create_default_slot_3$1(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\beta");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\beta");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (229:55) <Equation>
        
        function create_default_slot_2$1(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\gamma");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\gamma");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (236:298) <Equation>
        
        function create_default_slot_1$1(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (236:792) <Equation>
        
        function create_default_slot$1(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("1");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "1");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        function create_fragment$1(ctx) {
        
        	let h10;
        
        	let textContent = "Introduction";
        
        	let t1;
        
        	let p0;
        
        	let textContent_1 = "J’ai toujours été fasciné par la neige et toutes ses manifestations.\nComme beaucoup d’enfants, je m’émerveillais devant les photographies au microscope de ses constituants « élémentaires », rencontrées ça et là dans mes manuels scolaires.\nQue chacun de ses flocons, naissant d’une « impureté » originaire (comme un grain de poussière dans l’atmosphère) puisse être aussi unique — sans jamais être parfait — s’habiller de formes aux multiples aspérités, tout en s’agglomérant aux autres en un manteau doux, uni et pur, en dessous duquel les paysages s’indifférencient avait à mes yeux quelque chose de profondément mystérieux.\nEn réalité, la neige m’apparaissait comme le lieu d’une étrange union des opposés.";
        
        	let t3;
        
        	let p1;
        
        
        
        	let textContent_2 = `J’aime l’impression paradoxale de chaleur qui s’en dégage, qu’exprime parfaitement le mot de « manteau », en dépit de son froid, cruel pour qui aurait à l’affronter par nécessité ou se laisserait saisir trop imprudemment par ses charmes secrets. Est-ce un hasard qu’elle protège réellement certaines plantes contre les frimats ?
        
        J’aime le doux son craquelé des pas que l’on y fait, même si, après la poudreuse, je n’aime pas en faire ! Qui serais-je pour oser abîmer cette noble unité à peine créée et comme suspendue, de mes semelles striées de tard-venu ?
        
        Je l’aimais d’autant plus qu’elle était rare : la région bordelaise, où j’ai grandi, est très peu encline à tout épisode neigeux durable. Il y règne un climat qui accentue son impermanence, et qui exhortait à être <em>là</em> quand elle décidait, capricieuse déjouant les prédictions météorologiques, à apparaître enfin.
        
        J’aime aussi, bien sûr, que l’on puisse la considérer comme une <em>matière</em> façonnable à notre fantaisie : elle n’impose à vrai dire guère d’autre résistance que notre propre capacité à mobiliser des mains bientôt gelées !
        
        Enfin, elle dévoile un équilibre exemplaire entre le <em>flux</em> et son opposée, la <em>stase</em>, dans une temporalité que notre conscience enfantine peut appréhender : nos montagnes — ou bonhommes — de neige, « immobiles » le matin, à moitié fondus le lendemain !
        
        Spéculer sur le temps durant lequel nos créations éphémères pourront se maintenir est même une activité millénaire ! Les <em>Notes de Chevet</em> de Sei Shonagon, écrites à l’époque Heian (794–1185) en offrent un exemple particulièrement réjouissant. Au §43, <em>Choses qui semblent éveiller la mélancolie</em>,
        
        le sort d’une montagne de neige, érigée ensemble par les nobles et les serviteurs du palais impérial de Kyoto, devint même l’objet principal des soucis de l’autrice durant plus d’un mois, au point qu’elle en perde le sommeil ! Avec une sollicitude obsessionnelle — qui amusa tout le palais — elle prit soin de la protéger contre tout accident risquant de précipiter sa fonte naturelle, et ainsi la perte d’un pari engagé avec l’Impératrice en personne !`;
        
        
        
        	let t17;
        
        	let sketch0;
        
        	let t18;
        
        	let p2;
        
        	let em6;
        
        	let t19;
        
        	let dynamic0;
        
        	let t20;
        
        	let t21;
        
        	let p3;
        
        
        
        	let textContent_3 = `C’est en lisant récemment le petit livre du mathématicien <a href="http://perso.ens-lyon.fr/ghys/accueil/" rel="nofollow">Étienne Ghys</a>, <em>La petite histoire des flocons de neige</em> (2021), que l’idée de cet article m’est venue. Je sens ici la méfiance du lecteur : « va-t-il nous proposer une énième fois un algorithme récursif pour générer l’éternellement décevant <em>Flocon de Von Koch</em>, courbe fractale qui n’est un flocon, il faut bien le dire, que dans l’imagination de quelques mathématiciens un brin forceurs ? »
        
        Je vous rassure d’emblée : il sera ici question de quelque chose de bien plus intéressant ! A la toute fin de son livre, Étienne Ghys présente un vrai modèle mathématique de la <em>croissance</em> des flocons de neige (en deux dimensions), une méthode élaborée par <a href="https://www.sciencedirect.com/science/article/abs/pii/S0960077904003741" rel="nofollow">Clifford A. Reiter</a>.
        
        Cependant, la restitution malheureusement trop succinte — et incomplète — qu’il en donne ne permet pas de recréer fidèlement les rendus de ce chercheur.
        
        Ne pouvant m’arrêter sur cette frustration, j’ai donc lu l’article original, et je propose de vous dévoiler ici pas à pas l’algorithme aux moyens de petits exemples interactifs, auxquels je me réfèrerai par le nom de <em>sketchs</em>. C’est le nom particulier que prennent les programmes développés avec bibliothèque graphique <a href="https://processing.org/" rel="nofollow">Processing</a> dont je me suis ici servi de la déclinaison Javascript, <a href="https://p5js.org/" rel="nofollow">P5.js</a>, pour réaliser ces animations. Le <em>Flocon de Von Koch</em> tout juste mentionné est un bon alibi pour vous introduire ce dont il s’agit ! Cliquez sur le nombre souligné ci-contre, puis faites glisser votre souris (ou votre doigt) de droite à gauche pour modifier sa valeur. Observez le résultat.
        
        Ainsi introduit, j’espère que chaque lecteur pourra à son tour créer, s’il le désire, sa propre machine à flocons virtuels dans la lignée d’Ukichiro Nakaya, le premier scientifique à avoir réussi à recréer de vrais flocons en laboratoire, contribuant au passage formidablement à notre compréhension de ces derniers.`;
        
        
        
        	let t41;
        
        	let sketch1;
        
        	let t42;
        
        	let p4;
        
        	let em12;
        
        	let textContent_4 = `Démonstration interactive de l’<a href="https://fr.wikipedia.org/wiki/Empilement_compact#Arrangement_compact_de_cercles_dans_un_plan" rel="nofollow">arrangement compact</a> de cercles mentionné par Kepler`;
        
        	let t46;
        
        	let dynamic1;
        
        	let t47;
        
        	let t48;
        
        	let h11;
        
        	let textContent_5 = "Connaissances mathématiques requises";
        
        	let t50;
        
        	let ul0;
        
        	let textContent_6 = `<li>Trigonométrie basique</li> <li>Vecteurs (addition, multiplication)</li>`;
        
        	let t54;
        
        	let h12;
        
        	let textContent_7 = "Le Cristal de glace";
        
        	let t56;
        
        	let p5;
        
        
        
        	let textContent_8 = `Les flocons de neiges présentent une symétrie d’<em>ordre 6</em>. Cela veut dire, tout simplement, que si nous les tournons d’un sixième de tour sur eux-mêmes, nous retrouvons la même figure.
        
        Cette régularité — qui participe bien sûr à leur beauté ! — est très intrigante, et fascina l’immense Johannes Kepler, qui écrivit même à leur propos un petit opuscule d’une vingtaine de pages, <em>Strena seu de Nive Sexangula</em> (1610), comme cadeau à un de ses amis pour la nouvelle année !
        
        Avec beaucoup de perspicacité, il relia ce phénomène à la structure des alvéoles des ruches d’abeilles dans le domaine de l’expérience, mais aussi au monde des idées géométriques : le cercle, cette figure parfaite, peut être entouré <em>exactement</em> de 6 cercles identiques, et tend à former un <em>hexagone</em> — figure <em>par excellence</em> d’une telle symétrie — si on entoure à leur tour ces derniers, et ainsi de suite indéfiniment.
        
        (<em>cf.</em> ci-contre) Se pourrait-il que les flocons soient composés d’un aggrégat de minuscules disques, se demandait-il alors ?`;
        
        
        
        	let t70;
        
        	let p6;
        
        	let textContent_9 = `Aujourd’hui, nous pouvons expliquer cette symétrie par la structure cristalline que prend la glace dans nos conditions « terrestres » standards (nommée glace I<sub>h</sub>) : les molécules d’eau s’y arrangent naturellement en treillis hexagonaux.`;
        
        	let t74;
        
        	let p7;
        
        	let textContent_10 = `Ne pouvant bien sûr reproduire aux moyens de l’informatique des phénomènes naturels aussi complexes et d’une telle échelle, nous nous contenterons de les <em>mimer</em>, et c’est sans doute là tout ce que cette technologie pourra jamais espérer faire, contrairement à ce que fantasment certains. Nous utiliserons en conséquence une petite idéalisation, une sorte de « raccourci » pour viser un résultat assez fidèle : une <em>grille hexagonale</em> sur laquelle croîtront nos flocons virtuels, nos <em>snowfakes</em> comme diraient les anglais !`;
        
        	let t82;
        
        	let h13;
        
        	let textContent_11 = "Hexagones";
        
        	let t84;
        
        	let p8;
        
        	let textContent_12 = "Pour dessiner une telle grille, il faut avoir les idées claires sur la construction de sa cellule élémentaire !";
        
        	let t86;
        
        	let sketch2;
        
        	let t87;
        
        	let p9;
        
        	let textContent_13 = `<em>Construisez l’hexagone inscrit avec le slider :</em>`;
        
        	let t89;
        
        	let equation0;
        
        	let range0;
        
        	let t90;
        
        	let equation1;
        
        	let t91;
        
        	let p10;
        
        
        
        	let textContent_14 = `La taille verticale de l’hexagone est égale, comme nous le voyons, au <strong>double</strong> de la <strong>hauteur</strong> d’un des triangles équilatéraux formés.
        
        Par simple application du théorème de Pythagore, nous pouvons déduire sa valeur.`;
        
        
        
        	let t97;
        
        	let checkbox0;
        
        	let t98;
        
        	let equation2;
        
        	let t99;
        
        	let current_block_type_index;
        
        	let if_block;
        
        	let t100;
        
        	let equation3;
        
        	let t101;
        
        	let p11;
        
        
        
        	let textContent_15 = `Si l’on implémente ces principes avec P5.js, cela donne en quelques lignes la fonction suivante.
        
        <code>currentAngle</code> représente la position actuelle sur cercle trigonométrique et <code>side</code> la taille d’un côté de l’hexagone, qui vaut autant que le rayon du cercle. Quant à <code>cx</code> et <code>cy</code>, il s’agit des coordonnées du centre du cercle, et par conséquent, du centre de l’hexagone qui s’y inscrit.`;
        
        
        
        	let t111;
        
        	let pre0;
        
        	let html_tag;
        
        
        
        	let raw0_value = `<code class="language-js"><span class="token keyword">function</span> <span class="token function">hexagon</span><span class="token punctuation">(</span><span class="token parameter">cx<span class="token punctuation">,</span> cy<span class="token punctuation">,</span> side</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
          <span class="token keyword">let</span> currentAngle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        
          <span class="token function">beginShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
              <span class="token keyword">let</span> a <span class="token operator">=</span> cx <span class="token operator">+</span> side <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span>currentAngle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
              <span class="token keyword">let</span> b <span class="token operator">=</span> cy <span class="token operator">+</span> side <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span>currentAngle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
              <span class="token function">vertex</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
              currentAngle <span class="token operator">+=</span> <span class="token constant">TWO_PI</span> <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">;</span>
        
            <span class="token punctuation">&#125;</span>
        
          <span class="token function">endShape</span><span class="token punctuation">(</span><span class="token constant">CLOSE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token punctuation">&#125;</span></code>` + "";
        
        
        
        	let t112;
        
        	let h14;
        
        	let textContent_16 = "Grille hexagonale";
        
        	let t114;
        
        	let p12;
        
        	let textContent_17 = `Maintenant que nous savons dessiner un hexagone simple, nous devons en recouvrir le plan tout entier pour former notre grille ! En termes mathématiques plus rigoureux, il s’agit de réaliser un <strong>pavage du plan</strong>.`;
        
        	let t118;
        
        	let p13;
        
        
        
        	let textContent_18 = `Pour ce faire, de nombreuses méthodes sont possibles. Je vous présente ici est celle qui m’est apparue comme la plus évidente, mais sentez-vous libre d’essayer votre propre solution ou d’en rechercher des plus optimisées.
        
        Pour les curieux, cet <a href="https://www.redblobgames.com/grids/hexagons/" rel="nofollow">article interactif</a> très détaillé d’Amit Patel (en anglais) sera une excellente ressource à cette fin.`;
        
        
        
        	let t122;
        
        	let sketch3;
        
        	let t123;
        
        	let p14;
        
        	let t124;
        
        	let dynamic2;
        
        	let t125;
        
        	let em23;
        
        	let textContent_19 = "complets";
        
        	let t127;
        
        	let t128;
        
        	let p15;
        
        	let t129;
        
        	let range1;
        
        	let t130;
        
        	let t131;
        
        	let t132;
        
        	let t133;
        
        	let checkbox1;
        
        	let t134;
        
        	let checkbox2;
        
        	let t135;
        
        	let p16;
        
        	let textContent_20 = "Lorsque vous affichez les règles :";
        
        	let t137;
        
        	let ul1;
        
        	let li2;
        
        	let p17;
        
        	let t138;
        
        	let span0;
        
        	let textContent_21 = `<strong>————</strong>`;
        
        	let t140;
        
        	let code4;
        
        	let textContent_22 = "sign";
        
        	let t142;
        
        	let equation4;
        
        	let t143;
        
        	let equation5;
        
        	let t144;
        
        	let t145;
        
        	let li3;
        
        	let textContent_23 = `<p>La ligne <span style="color: #ff9342"><strong>————</strong></span> est la taille <em>verticale</em> d’un seul hexagone (que nous appelons, dans ce contexte, une <em>tuile</em> du plan) et vaut, comme nous l’avons vu, <strong>deux hauteurs</strong> d’un des 6 triangles équilatéraux composant celui-ci. Nous utilisons cette mesure pour décaler la valeur <code>cy</code> à chaque fois que l’algorithme itère au sein d’une même colonne. Nous nous servons aussi de sa <strong>moitié</strong> pour décaler vers le bas les premières tuiles une colonne sur deux (quand <code>sign</code> vaut <code>false</code>) C’est le cas par exemple du tout premier hexagone en haut à gauche !</p>`;
        
        	let t163;
        
        	let li4;
        
        	let p19;
        
        	let t164;
        
        	let span2;
        
        	let textContent_24 = `<strong>————</strong>`;
        
        	let t166;
        
        	let em26;
        
        	let textContent_25 = "horizontale";
        
        	let t168;
        
        	let span3;
        
        	let textContent_26 = `<strong>————</strong>`;
        
        	let t170;
        
        	let equation6;
        
        	let t171;
        
        	let t172;
        
        	let pre1;
        
        	let html_tag_1;
        
        
        
        	let raw1_value = `<code class="language-js"><span class="token keyword">function</span> <span class="token function">drawHexagonalGrid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
          <span class="token comment">// Position du centre de la tuile hexagonale</span>
        
          <span class="token keyword">let</span> cx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        
          <span class="token keyword">let</span> cy <span class="token operator">=</span> h<span class="token punctuation">;</span>
        
        
        
          <span class="token keyword">let</span> sign <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        
          <span class="token keyword">let</span> angle<span class="token punctuation">;</span>
        
        
        
          <span class="token comment">// Colonnes</span>
        
          <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tilesPerRow <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
            <span class="token comment">// Lignes</span>
        
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> tilesPerCols <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
              <span class="token function">hexagon</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> cy<span class="token punctuation">,</span> side<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
              cy <span class="token operator">+=</span> <span class="token number">2</span> <span class="token operator">*</span> h<span class="token punctuation">;</span>
        
            <span class="token punctuation">&#125;</span>
        
        
        
            sign <span class="token operator">=</span> <span class="token operator">!</span>sign<span class="token punctuation">;</span> <span class="token comment">// Inversion du signe à chaque changement de colonne</span>
        
            angle <span class="token operator">=</span> sign <span class="token operator">?</span> <span class="token operator">-</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">6.0</span> <span class="token operator">:</span> <span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">6.0</span><span class="token punctuation">;</span> <span class="token comment">// Sélection de l'angle selon la valeur de sign</span>
        
        
        
            <span class="token comment">// Calcul de la position du prochain hexagone</span>
        
            cx <span class="token operator">+=</span> <span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> h <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
        
            cy <span class="token operator">=</span> sign <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> h <span class="token comment">// Nous revenons en haut de l'écran à la fin d'une colonne, mais avec quel décalage ? Cela dépend de sign.</span>
        
        <span class="token punctuation">&#125;</span></code>` + "";
        
        
        
        	let t173;
        
        	let h15;
        
        	let textContent_27 = "Algorithme du flocon";
        
        	let t175;
        
        	let p20;
        
        	let t176;
        
        	let strong9;
        
        	let textContent_28 = "température";
        
        	let t178;
        
        	let strong10;
        
        	let textContent_29 = "humidité";
        
        	let t180;
        
        	let equation7;
        
        	let t181;
        
        	let em27;
        
        	let textContent_30 = "gamma";
        
        	let t183;
        
        	let equation8;
        
        	let t184;
        
        	let em28;
        
        	let textContent_31 = "beta";
        
        	let t186;
        
        	let strong11;
        
        	let textContent_32 = "quantité d’eau";
        
        	let t188;
        
        	let equation9;
        
        	let t189;
        
        	let em29;
        
        	let textContent_33 = "gelées";
        
        	let t191;
        
        	let t192;
        
        	let h20;
        
        	let textContent_34 = "Déroulement";
        
        	let t194;
        
        	let p21;
        
        	let textContent_35 = `Chaque itération de l’algorithme se déroule en <strong>3</strong> étapes :`;
        
        	let t198;
        
        	let ol0;
        
        
        
        	let textContent_36 = `<li><strong>Distinction entre les cellules dites <em>réceptrices</em> et les <em>non-réceptrices</em>.</strong>
        
        Les <em>réceptrices</em> sont les cellules <strong>gelées</strong> ou celles qui ont une <strong>voisine immédiate qui est gelée</strong> (<em>cf.</em> ci-contre les méthodes pour identifier les coordonnées des cellules voisines). Cette étape est très importante, puisque toute cellule réceptrice capture de manière <strong>permanente</strong> l’eau qui y entre : sa valeur ne peut qu’augmenter au fil du temps. Bien que non gelées, on pourrait dire très informellement que l’eau des cellules voisines est sous une forme « quasi liquide » ou « quasi solide », puisqu’elle ne peut plus se diffuser dans les cellules environnantes. (<em>Important :</em> Il faut encore une fois souligner qu’il s’agit d’un modèle mathématique idéalisé, et qu’aucun de ses composants ne correspond <em>vraiment</em> à quelque chose de physiquement réel) Par négatif, toutes les autres cellules formeront le champ des cellules <strong>non-réceptrices</strong>. La valeur de toutes les cellules que ces deux champs excluent (les <em>non-réceptrices</em> pour le champ des <em>réceptrices</em> et inversement) sera mise à 0 au sein de ceux-ci.</li>`;
        
        
        
        	let t225;
        
        	let p22;
        
        	let t226;
        
        	let strong18;
        
        	let textContent_37 = "cases gelées";
        
        	let t228;
        
        	let strong19;
        
        	let textContent_38 = "voisines";
        
        	let t230;
        
        	let em38;
        
        	let textContent_39 = "réceptrices";
        
        	let t232;
        
        	let strong20;
        
        	let textContent_40 = "autres";
        
        	let t234;
        
        	let em39;
        
        	let textContent_41 = "non-réceptrices";
        
        	let t236;
        
        	let dynamic3;
        
        	let t237;
        
        	let sketch4;
        
        	let t238;
        
        	let checkbox3;
        
        	let t239;
        
        	let p23;
        
        	let t240;
        
        	let equation10;
        
        	let t241;
        
        	let em40;
        
        	let textContent_42 = "toutes les cases auront la même valeur initiale";
        
        	let t243;
        
        	let em41;
        
        	let textContent_43 = "seule";
        
        	let t245;
        
        	let equation11;
        
        	let t246;
        
        	let em42;
        
        	let textContent_44 = "surfusion";
        
        	let t248;
        
        	let equation12;
        
        	let t249;
        
        	let t250;
        
        	let ol1;
        
        	let li6;
        
        	let strong21;
        
        	let textContent_45 = "Modification de la quantité d’eau dans les deux champs isolément.";
        
        	let t252;
        
        	let em43;
        
        	let textContent_46 = "réceptrices";
        
        	let t254;
        
        	let equation13;
        
        	let t255;
        
        	let t256;
        
        	let p24;
        
        	let t257;
        
        	let em44;
        
        	let textContent_47 = "non-réceptrices";
        
        	let t259;
        
        	let strong22;
        
        	let textContent_48 = "diffusion";
        
        	let t261;
        
        	let em45;
        
        	let textContent_49 = "non-réceptrices";
        
        	let t263;
        
        	let equation14;
        
        	let t264;
        
        	let equation15;
        
        	let t265;
        
        	let code8;
        
        	let textContent_50 = "randomGridBis++";
        
        	let t267;
        
        	let dynamic4;
        
        	let t268;
        
        	let t269;
        
        	let sketch5;
        
        	let t270;
        
        	let ol2;
        
        	let li7;
        
        	let strong23;
        
        	let textContent_51 = "Addition des deux champs modifiés.";
        
        	let t272;
        
        	let em46;
        
        	let textContent_52 = "non-réceptrices";
        
        	let t274;
        
        	let em47;
        
        	let textContent_53 = "réceptrices";
        
        	let t276;
        
        	let em48;
        
        	let textContent_54 = "non-réceptrices";
        
        	let t278;
        
        	let equation16;
        
        	let t279;
        
        	let equation17;
        
        	let t280;
        
        	let t281;
        
        	let h21;
        
        	let textContent_55 = "Confusion possible";
        
        	let t283;
        
        	let p25;
        
        	let textContent_56 = `Une petite précision finale s’impose : bien que ce que nous venons de voir pourra sembler à juste titre analogue à un <strong>automate cellulaire</strong>, il n’en s’agit pas d’un strictement parlant.`;
        
        	let t287;
        
        	let p26;
        
        
        
        	let textContent_57 = `Les automates cellulaires sont un type d’algorithme où un espace est divisé en de multiples cellules, unités de calcul toutes identiques possédant chacune un <em>état</em> (<em>par ex. :</em> blanc ou noir) variable et une <em>règle de transition</em> fixe (<em>par ex.</em> si trois voisines sont blanches, le nouvel état sera blanc, sinon noir).
        
        Un exemple paradigmatique est le <em>Jeu de la Vie</em> de John Conway, implémenté ci-contre. Dans notre cas, chaque tuile isolée ne possède pas en elle-même la totalité du calcul : il est nécessaire d’effectuer des opérations « de l’extérieur » sur la totalité des cellules à la fois, comme nous l’avons vu. Peut-être est-il possible, cependant, de factoriser tout le code de telle manière à ce qu’il rentre dans cette catégorie ?`;
        
        
        
        	let t299;
        
        	let sketch6;
        
        	let t300;
        
        	let p27;
        
        	let em54;
        
        	let t301;
        
        	let dynamic5;
        
        	let t302;
        
        	let dynamic6;
        
        	let t303;
        
        	let t304;
        
        	let incrementer0;
        
        	let t305;
        
        	let incrementer1;
        
        	let t306;
        
        	let h22;
        
        	let textContent_58 = "Démonstration";
        
        	let t308;
        
        	let p28;
        
        
        
        	let textContent_59 = `Avant toute chose, commencez par <em>dégeler le sketch</em> en cliquant sur le bouton ci-dessous. Étant gourmand en ressources computationnelles, il a été mis en pause jusqu’à présent pour votre confort de navigation.\\
        
        Vous pourrez le remettre en pause cliquant à nouveau sur ce bouton si besoin.`;
        
        
        
        	let t312;
        
        	let h3;
        
        	let textContent_60 = "Panneau de contrôle";
        
        	let t314;
        
        	let h40;
        
        	let textContent_61 = "Couleurs";
        
        	let t316;
        
        	let p29;
        
        
        
        	let textContent_62 = `Pour obtenir un joli flocon, les chiffres de la grille ne doivent évidemment pas rester de simples chiffres ! Il faut associer à chacun une couleur, pour distinguer (1) La vapeur et ses différentes concentrations, et (2) La glace et son ancienneté.
        
        Nous aurons par conséquent besoin de <strong>4</strong> couleurs, et je vous laisse libres de les choisir à votre guise !`;
        
        
        
        	let t320;
        
        	let ul2;
        
        	let li8;
        
        	let sketch7;
        
        	let t321;
        
        	let b0;
        
        	let textContent_63 = "atmosphère sèche";
        
        	let t323;
        
        	let span4;
        
        	let textContent_64 = "R";
        
        	let t325;
        
        	let dynamic7;
        
        	let t326;
        
        	let span5;
        
        	let textContent_65 = "V";
        
        	let t328;
        
        	let dynamic8;
        
        	let t329;
        
        	let span6;
        
        	let textContent_66 = "B";
        
        	let t331;
        
        	let dynamic9;
        
        	let t332;
        
        	let li9;
        
        	let sketch8;
        
        	let t333;
        
        	let b1;
        
        	let textContent_67 = "atmosphère saturée";
        
        	let t335;
        
        	let span7;
        
        	let textContent_68 = "R";
        
        	let t337;
        
        	let dynamic10;
        
        	let t338;
        
        	let span8;
        
        	let textContent_69 = "V";
        
        	let t340;
        
        	let dynamic11;
        
        	let t341;
        
        	let span9;
        
        	let textContent_70 = "B";
        
        	let t343;
        
        	let dynamic12;
        
        	let t344;
        
        	let li10;
        
        	let sketch9;
        
        	let t345;
        
        	let b2;
        
        	let textContent_71 = "glace fraîche";
        
        	let t347;
        
        	let span10;
        
        	let textContent_72 = "R";
        
        	let t349;
        
        	let dynamic13;
        
        	let t350;
        
        	let span11;
        
        	let textContent_73 = "V";
        
        	let t352;
        
        	let dynamic14;
        
        	let t353;
        
        	let span12;
        
        	let textContent_74 = "B";
        
        	let t355;
        
        	let dynamic15;
        
        	let t356;
        
        	let li11;
        
        	let sketch10;
        
        	let t357;
        
        	let b3;
        
        	let textContent_75 = "glace agée";
        
        	let t359;
        
        	let span13;
        
        	let textContent_76 = "R";
        
        	let t361;
        
        	let dynamic16;
        
        	let t362;
        
        	let span14;
        
        	let textContent_77 = "V";
        
        	let t364;
        
        	let dynamic17;
        
        	let t365;
        
        	let span15;
        
        	let textContent_78 = "B";
        
        	let t367;
        
        	let dynamic18;
        
        	let t368;
        
        	let h41;
        
        	let textContent_79 = "Paramètres";
        
        	let t370;
        
        	let p30;
        
        	let textContent_80 = `N’hésitez pas à <em>geler le sketch</em> avant de modifier ces paramètres si les performances sont mauvaises.`;
        
        	let t374;
        
        	let equation18;
        
        	let t375;
        
        	let i0;
        
        	let textContent_81 = "gamma";
        
        	let t377;
        
        	let range2;
        
        	let t378;
        
        	let t379;
        
        	let t380;
        
        	let br0;
        
        	let t381;
        
        	let equation19;
        
        	let t382;
        
        	let i1;
        
        	let textContent_82 = "beta";
        
        	let t384;
        
        	let range3;
        
        	let t385;
        
        	let t386;
        
        	let t387;
        
        	let br1;
        
        	let t388;
        
        	let br2;
        
        	let t389;
        
        	let checkbox4;
        
        	let t390;
        
        	let br3;
        
        	let t391;
        
        	let p31;
        
        	let strong26;
        
        	let textContent_83 = "Nombre de tuiles par ligne :";
        
        	let t393;
        
        	let range4;
        
        	let t394;
        
        	let t395;
        
        	let t396;
        
        	let br4;
        
        	let t397;
        
        	let span16;
        
        	let textContent_84 = "(Attention ! Plus le nombre sera élevé, plus la page sera ralentie.)";
        
        	let t399;
        
        	let p32;
        
        	let strong27;
        
        	let textContent_85 = "Vitesse de croissance :";
        
        	let t401;
        
        	let range5;
        
        	let t402;
        
        	let t403;
        
        	let t404;
        
        	let br5;
        
        	let t405;
        
        	let span17;
        
        	let textContent_86 = "(Nombre de passes de l'algorithme sur la grille par clic sur le bouton « Itération ! »)";
        
        	let t407;
        
        	let sketch11;
        
        	let t408;
        
        	let incrementer2;
        
        	let t409;
        
        	let incrementer3;
        
        	let t410;
        
        	let p33;
        
        	let textContent_87 = `Pour conclure, vous observerez peut-être qu’étrangement, l’« unité des opposés » dont je parlais en introduction se retrouve aussi à l’échelle de la formation des cristaux ! En effet, Étienne Ghys note que deux processus inverses — voire contradictoires — semblent concourir à la formation du flocon :  <strong>(1)</strong> le <em>facettage</em> et <strong>(2)</strong> la formation de <em>dendrites</em>.`;
        
        	let t420;
        
        	let ol3;
        
        
        
        	let textContent_88 = `<li><em>Plus</em> une case est entourée de voisines gelées, plus elle va geler rapidement. Cela tend à lisser le flocon.</li> <li><em>Moins</em> une case est entourée de voisines gelées (et donc, plus elle est entourée de « vapeur d’eau »), plus elle va geler rapidement aussi ! Cela tend à faire poindre autour du flocon des sortes d’excroissances que l’on nomme des dendrites.
        
        Ces deux principes n’ont absolument pas été programmés par nos soins, mais émergent tous deux, naturellement, des règles de l’algorithme.</li>`;
        
        
        
        	let current;
        
        
        
        	sketch0 = new Sketch({
        
        			props: {
        
        				width: 400,
        
        				height: 400,
        
        				kochIterations: /*kochIterations*/ ctx[6],
        
        				sketch: vonKoch
        
        			}
        
        		});
        
        
        
        	dynamic0 = new Dynamic({
        
        			props: {
        
        				store: /*kochIterations*/ ctx[6],
        
        				min: 1,
        
        				max: 5,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	sketch1 = new Sketch({
        
        			props: {
        
        				width: 250,
        
        				height: 250,
        
        				circleLayers: /*circleLayers*/ ctx[8],
        
        				sketch: keplerCircles
        
        			}
        
        		});
        
        
        
        	dynamic1 = new Dynamic({
        
        			props: {
        
        				store: /*circleLayers*/ ctx[8],
        
        				min: 1,
        
        				max: 7,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	sketch2 = new Sketch({
        
        			props: {
        
        				width: 250,
        
        				height: 250,
        
        				progressAngle: /*progressAngle*/ ctx[7],
        
        				sketch: singleHexagon
        
        			}
        
        		});
        
        
        
        	equation0 = new Equation({ props: { type: "inline", markup: `0` } });
        
        
        
        	range0 = new Range({
        
        			props: {
        
        				min: 0,
        
        				max: Math.PI * 2 + 0.001,
        
        				step: 0.001,
        
        				store: /*progressAngle*/ ctx[7]
        
        			}
        
        		});
        
        
        
        	equation1 = new Equation({
        
        			props: { type: "inline", markup: `2\\pi` }
        
        		});
        
        
        
        	checkbox0 = new CheckBox({
        
        			props: {
        
        				store: /*showCalculationDetails*/ ctx[41],
        
        				label: "Afficher les détails du calcul"
        
        			}
        
        		});
        
        
        
        	equation2 = new Equation({
        
        			props: {
        
        				type: "block",
        
        				markup: `\\textcolor{#006CBD}{côté}^2 = \\textcolor{#DE8500}{hauteur}^2 + (\\frac{\\textcolor{#006CBD}{côté}}{2})^2`
        
        			}
        
        		});
        
        
        
        	const if_block_creators = [create_if_block$1, create_else_block$1];
        
        	const if_blocks = [];
        
        
        
        	function select_block_type(ctx, dirty) {
        
        		if (/*$showCalculationDetails*/ ctx[0]) return 0;
        
        		return 1;
        
        	}
        
        
        
        	current_block_type_index = select_block_type(ctx);
        
        	if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
        
        
        
        	equation3 = new Equation({
        
        			props: {
        
        				type: "block",
        
        				markup: `\\textcolor{#DE8500}{hauteur} = \\frac{\\sqrt{3}}{2} \\times \\textcolor{#006CBD}{côté}`
        
        			}
        
        		});
        
        
        
        	sketch3 = new Sketch({
        
        			props: {
        
        				width: 1000,
        
        				height: 500,
        
        				hexaGridTilesPerRow: /*hexaGridTilesPerRow*/ ctx[12],
        
        				toggleMeasures: /*toggleMeasures*/ ctx[10],
        
        				toggleHexaGrid: /*toggleHexaGrid*/ ctx[11],
        
        				progressGrid: /*progressGrid*/ ctx[9],
        
        				sketch: hexagonalGrid
        
        			}
        
        		});
        
        
        
        	dynamic2 = new Dynamic({
        
        			props: {
        
        				store: /*hexaGridTilesPerRow*/ ctx[12],
        
        				min: 4,
        
        				max: 60,
        
        				step: 2
        
        			}
        
        		});
        
        
        
        	range1 = new Range({
        
        			props: {
        
        				min: 0,
        
        				max: 100,
        
        				step: 1,
        
        				store: /*progressGrid*/ ctx[9]
        
        			}
        
        		});
        
        
        
        	checkbox1 = new CheckBox({
        
        			props: {
        
        				store: /*toggleMeasures*/ ctx[10],
        
        				label: "Afficher les règles"
        
        			}
        
        		});
        
        
        
        	checkbox2 = new CheckBox({
        
        			props: {
        
        				store: /*toggleHexaGrid*/ ctx[11],
        
        				label: "Afficher les hexagones"
        
        			}
        
        		});
        
        
        
        	equation4 = new Equation({
        
        			props: {
        
        				type: "inline",
        
        				markup: /*angle1*/ ctx[43]
        
        			}
        
        		});
        
        
        
        	equation5 = new Equation({
        
        			props: {
        
        				type: "inline",
        
        				markup: /*angle2*/ ctx[44]
        
        			}
        
        		});
        
        
        
        	equation6 = new Equation({
        
        			props: { type: "inline", markup: /*eqn*/ ctx[42] }
        
        		});
        
        
        
        	equation7 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_8$1] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation8 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_7$1] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation9 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_6$1] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	dynamic3 = new Dynamic({
        
        			props: {
        
        				store: /*maxHumidity*/ ctx[14],
        
        				min: 0,
        
        				max: 2,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	sketch4 = new Sketch({
        
        			props: {
        
        				width: 600,
        
        				height: 550,
        
        				displayColours: /*displayColours*/ ctx[13],
        
        				maxHumidity: /*maxHumidity*/ ctx[14],
        
        				randomGrid: /*randomGrid*/ ctx[15],
        
        				sketch: fieldsDistinction
        
        			}
        
        		});
        
        
        
        	checkbox3 = new CheckBox({
        
        			props: {
        
        				store: /*displayColours*/ ctx[13],
        
        				label: "Afficher les couleurs"
        
        			}
        
        		});
        
        
        
        	equation10 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_5$1] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation11 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_4$1] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation12 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_3$1] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation13 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_2$1] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation14 = new Equation({
        
        			props: {
        
        				type: "inline",
        
        				markup: /*oneHalf*/ ctx[45]
        
        			}
        
        		});
        
        
        
        	equation15 = new Equation({
        
        			props: {
        
        				type: "inline",
        
        				markup: /*oneTwelfth*/ ctx[46]
        
        			}
        
        		});
        
        
        
        	dynamic4 = new Dynamic({
        
        			props: {
        
        				store: /*maxHumidityBis*/ ctx[17],
        
        				min: 0,
        
        				max: 2,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	sketch5 = new Sketch({
        
        			props: {
        
        				width: 600,
        
        				height: 450,
        
        				maxHumidityBis: /*maxHumidityBis*/ ctx[17],
        
        				randomGridBis: /*randomGridBis*/ ctx[16],
        
        				sketch: waterDiffusion
        
        			}
        
        		});
        
        
        
        	equation16 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_1$1] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation17 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot$1] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	sketch6 = new Sketch({
        
        			props: {
        
        				width: 400,
        
        				height: 400,
        
        				gol_iterate: /*gol_iterate*/ ctx[18],
        
        				gol_reset: /*gol_reset*/ ctx[19],
        
        				nbBirth: /*nbBirth*/ ctx[20],
        
        				nbStay: /*nbStay*/ ctx[21],
        
        				sketch: gameOfLife
        
        			}
        
        		});
        
        
        
        	dynamic5 = new Dynamic({
        
        			props: {
        
        				store: /*nbBirth*/ ctx[20],
        
        				min: 0,
        
        				max: 8,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic6 = new Dynamic({
        
        			props: {
        
        				store: /*nbStay*/ ctx[21],
        
        				min: 0,
        
        				max: 8,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	incrementer0 = new Incrementer({
        
        			props: {
        
        				store: /*gol_iterate*/ ctx[18],
        
        				label: "Itérer !"
        
        			}
        
        		});
        
        
        
        	incrementer1 = new Incrementer({
        
        			props: {
        
        				store: /*gol_reset*/ ctx[19],
        
        				label: "Reset"
        
        			}
        
        		});
        
        
        
        	sketch7 = new Sketch({
        
        			props: {
        
        				display: "inline",
        
        				width: 45,
        
        				height: 23,
        
        				red: /*color_ase_red*/ ctx[34],
        
        				green: /*color_ase_green*/ ctx[35],
        
        				blue: /*color_ase_blue*/ ctx[36],
        
        				sketch: colorPicker$1
        
        			}
        
        		});
        
        
        
        	dynamic7 = new Dynamic({
        
        			props: {
        
        				store: /*color_ase_red*/ ctx[34],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic8 = new Dynamic({
        
        			props: {
        
        				store: /*color_ase_green*/ ctx[35],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic9 = new Dynamic({
        
        			props: {
        
        				store: /*color_ase_blue*/ ctx[36],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	sketch8 = new Sketch({
        
        			props: {
        
        				display: "inline",
        
        				width: 45,
        
        				height: 23,
        
        				red: /*color_asa_red*/ ctx[37],
        
        				green: /*color_asa_green*/ ctx[38],
        
        				blue: /*color_asa_blue*/ ctx[39],
        
        				sketch: colorPicker$1
        
        			}
        
        		});
        
        
        
        	dynamic10 = new Dynamic({
        
        			props: {
        
        				store: /*color_asa_red*/ ctx[37],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic11 = new Dynamic({
        
        			props: {
        
        				store: /*color_asa_green*/ ctx[38],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic12 = new Dynamic({
        
        			props: {
        
        				store: /*color_asa_blue*/ ctx[39],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	sketch9 = new Sketch({
        
        			props: {
        
        				display: "inline",
        
        				width: 45,
        
        				height: 23,
        
        				red: /*color_gf_red*/ ctx[28],
        
        				green: /*color_gf_green*/ ctx[29],
        
        				blue: /*color_gf_blue*/ ctx[30],
        
        				sketch: colorPicker$1
        
        			}
        
        		});
        
        
        
        	dynamic13 = new Dynamic({
        
        			props: {
        
        				store: /*color_gf_red*/ ctx[28],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic14 = new Dynamic({
        
        			props: {
        
        				store: /*color_gf_green*/ ctx[29],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic15 = new Dynamic({
        
        			props: {
        
        				store: /*color_gf_blue*/ ctx[30],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	sketch10 = new Sketch({
        
        			props: {
        
        				display: "inline",
        
        				width: 45,
        
        				height: 23,
        
        				red: /*color_ga_red*/ ctx[31],
        
        				green: /*color_ga_green*/ ctx[32],
        
        				blue: /*color_ga_blue*/ ctx[33],
        
        				sketch: colorPicker$1
        
        			}
        
        		});
        
        
        
        	dynamic16 = new Dynamic({
        
        			props: {
        
        				store: /*color_ga_red*/ ctx[31],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic17 = new Dynamic({
        
        			props: {
        
        				store: /*color_ga_green*/ ctx[32],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic18 = new Dynamic({
        
        			props: {
        
        				store: /*color_ga_blue*/ ctx[33],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	equation18 = new Equation({
        
        			props: {
        
        				display: "inline",
        
        				markup: `\\boldsymbol{\\gamma}`
        
        			}
        
        		});
        
        
        
        	range2 = new Range({
        
        			props: {
        
        				store: /*addedWater*/ ctx[24],
        
        				min: 0,
        
        				max: 1,
        
        				step: 0.001
        
        			}
        
        		});
        
        
        
        	equation19 = new Equation({
        
        			props: { markup: `\\boldsymbol{\\beta}` }
        
        		});
        
        
        
        	range3 = new Range({
        
        			props: {
        
        				store: /*humidity*/ ctx[23],
        
        				min: 0,
        
        				max: 1,
        
        				step: 0.001
        
        			}
        
        		});
        
        
        
        	checkbox4 = new CheckBox({
        
        			props: {
        
        				store: /*displayTiles*/ ctx[27],
        
        				label: "Marquer les tuiles"
        
        			}
        
        		});
        
        
        
        	range4 = new Range({
        
        			props: {
        
        				store: /*tilesPerRow*/ ctx[26],
        
        				min: 12,
        
        				max: 300,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	range5 = new Range({
        
        			props: {
        
        				store: /*iterationsPerClick*/ ctx[25],
        
        				min: 1,
        
        				max: 200,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	sketch11 = new Sketch({
        
        			props: {
        
        				width: 600,
        
        				height: 600,
        
        				humidity: /*humidity*/ ctx[23],
        
        				addedWater: /*addedWater*/ ctx[24],
        
        				iterationsPerClick: /*iterationsPerClick*/ ctx[25],
        
        				tilesPerRow: /*tilesPerRow*/ ctx[26],
        
        				displayTiles: /*displayTiles*/ ctx[27],
        
        				color_gf_red: /*color_gf_red*/ ctx[28],
        
        				color_gf_green: /*color_gf_green*/ ctx[29],
        
        				color_gf_blue: /*color_gf_blue*/ ctx[30],
        
        				color_ga_red: /*color_ga_red*/ ctx[31],
        
        				color_ga_green: /*color_ga_green*/ ctx[32],
        
        				color_ga_blue: /*color_ga_blue*/ ctx[33],
        
        				color_ase_red: /*color_ase_red*/ ctx[34],
        
        				color_ase_green: /*color_ase_green*/ ctx[35],
        
        				color_ase_blue: /*color_ase_blue*/ ctx[36],
        
        				color_asa_red: /*color_asa_red*/ ctx[37],
        
        				color_asa_green: /*color_asa_green*/ ctx[38],
        
        				color_asa_blue: /*color_asa_blue*/ ctx[39],
        
        				iterate: /*iterate*/ ctx[40],
        
        				resetSimulation: /*resetSimulation*/ ctx[22],
        
        				sketch: finalSimulation
        
        			}
        
        		});
        
        
        
        	incrementer2 = new Incrementer({
        
        			props: {
        
        				store: /*iterate*/ ctx[40],
        
        				label: "Itération !"
        
        			}
        
        		});
        
        
        
        	incrementer3 = new Incrementer({
        
        			props: {
        
        				store: /*resetSimulation*/ ctx[22],
        
        				label: "Reset"
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			h10 = element("h1");
        
        			h10.textContent = textContent;
        
        			t1 = space();
        
        			p0 = element("p");
        
        			p0.textContent = textContent_1;
        
        			t3 = space();
        
        			p1 = element("p");
        
        			p1.innerHTML = textContent_2;
        
        			t17 = space();
        
        			create_component(sketch0.$$.fragment);
        
        			t18 = space();
        
        			p2 = element("p");
        
        			em6 = element("em");
        
        			t19 = text$2("Flocon de Von Koch d’une profondeur de ");
        
        			create_component(dynamic0.$$.fragment);
        
        			t20 = text$2(" itérations.");
        
        			t21 = space();
        
        			p3 = element("p");
        
        			p3.innerHTML = textContent_3;
        
        			t41 = space();
        
        			create_component(sketch1.$$.fragment);
        
        			t42 = space();
        
        			p4 = element("p");
        
        			em12 = element("em");
        
        			em12.innerHTML = textContent_4;
        
        			t46 = text$2(". Ici, le cercle initial est entouré ");
        
        			create_component(dynamic1.$$.fragment);
        
        			t47 = text$2(" fois.");
        
        			t48 = space();
        
        			h11 = element("h1");
        
        			h11.textContent = textContent_5;
        
        			t50 = space();
        
        			ul0 = element("ul");
        
        			ul0.innerHTML = textContent_6;
        
        			t54 = space();
        
        			h12 = element("h1");
        
        			h12.textContent = textContent_7;
        
        			t56 = space();
        
        			p5 = element("p");
        
        			p5.innerHTML = textContent_8;
        
        			t70 = space();
        
        			p6 = element("p");
        
        			p6.innerHTML = textContent_9;
        
        			t74 = space();
        
        			p7 = element("p");
        
        			p7.innerHTML = textContent_10;
        
        			t82 = space();
        
        			h13 = element("h1");
        
        			h13.textContent = textContent_11;
        
        			t84 = space();
        
        			p8 = element("p");
        
        			p8.textContent = textContent_12;
        
        			t86 = space();
        
        			create_component(sketch2.$$.fragment);
        
        			t87 = space();
        
        			p9 = element("p");
        
        			p9.innerHTML = textContent_13;
        
        			t89 = space();
        
        			create_component(equation0.$$.fragment);
        
        			create_component(range0.$$.fragment);
        
        			t90 = space();
        
        			create_component(equation1.$$.fragment);
        
        			t91 = space();
        
        			p10 = element("p");
        
        			p10.innerHTML = textContent_14;
        
        			t97 = space();
        
        			create_component(checkbox0.$$.fragment);
        
        			t98 = space();
        
        			create_component(equation2.$$.fragment);
        
        			t99 = space();
        
        			if_block.c();
        
        			t100 = space();
        
        			create_component(equation3.$$.fragment);
        
        			t101 = space();
        
        			p11 = element("p");
        
        			p11.innerHTML = textContent_15;
        
        			t111 = space();
        
        			pre0 = element("pre");
        
        			html_tag = new HtmlTagHydration(false);
        
        			t112 = space();
        
        			h14 = element("h1");
        
        			h14.textContent = textContent_16;
        
        			t114 = space();
        
        			p12 = element("p");
        
        			p12.innerHTML = textContent_17;
        
        			t118 = space();
        
        			p13 = element("p");
        
        			p13.innerHTML = textContent_18;
        
        			t122 = space();
        
        			create_component(sketch3.$$.fragment);
        
        			t123 = space();
        
        			p14 = element("p");
        
        			t124 = text$2("Il y a actuellement ");
        
        			create_component(dynamic2.$$.fragment);
        
        			t125 = text$2(" hexagones ");
        
        			em23 = element("em");
        
        			em23.textContent = textContent_19;
        
        			t127 = text$2(" par ligne.");
        
        			t128 = space();
        
        			p15 = element("p");
        
        			t129 = text$2("Faites progresser l’algorithme de dessin de la grille : ");
        
        			create_component(range1.$$.fragment);
        
        			t130 = space();
        
        			t131 = text$2(/*$progressGrid*/ ctx[1]);
        
        			t132 = text$2("%");
        
        			t133 = space();
        
        			create_component(checkbox1.$$.fragment);
        
        			t134 = space();
        
        			create_component(checkbox2.$$.fragment);
        
        			t135 = space();
        
        			p16 = element("p");
        
        			p16.textContent = textContent_20;
        
        			t137 = space();
        
        			ul1 = element("ul");
        
        			li2 = element("li");
        
        			p17 = element("p");
        
        			t138 = text$2("La ligne oblique ");
        
        			span0 = element("span");
        
        			span0.innerHTML = textContent_21;
        
        			t140 = text$2(" représente le décalage entre les centres des hexagones situés à une colonne d’intervalle. Son sens varie, et est codé dans la variable booléenne ");
        
        			code4 = element("code");
        
        			code4.textContent = textContent_22;
        
        			t142 = text$2(" dans le code ci-dessous. Les angles qu’elle forme valent alternativement ");
        
        			create_component(equation4.$$.fragment);
        
        			t143 = text$2(" et ");
        
        			create_component(equation5.$$.fragment);
        
        			t144 = text$2(" radians.");
        
        			t145 = space();
        
        			li3 = element("li");
        
        			li3.innerHTML = textContent_23;
        
        			t163 = space();
        
        			li4 = element("li");
        
        			p19 = element("p");
        
        			t164 = text$2("La ligne ");
        
        			span2 = element("span");
        
        			span2.innerHTML = textContent_24;
        
        			t166 = text$2(", enfin, vient former le côté adjacent d’un nouveau triangle rectangle, qui vaut la distance ");
        
        			em26 = element("em");
        
        			em26.textContent = textContent_25;
        
        			t168 = text$2(" entre deux hexagones d’une même ligne. ");
        
        			span3 = element("span");
        
        			span3.innerHTML = textContent_26;
        
        			t170 = text$2(" = ");
        
        			create_component(equation6.$$.fragment);
        
        			t171 = text$2(".\nUne fois implémenté, cela donne la fonction suivante :");
        
        			t172 = space();
        
        			pre1 = element("pre");
        
        			html_tag_1 = new HtmlTagHydration(false);
        
        			t173 = space();
        
        			h15 = element("h1");
        
        			h15.textContent = textContent_27;
        
        			t175 = space();
        
        			p20 = element("p");
        
        			t176 = text$2("L’algorithme est assez simple, ce qui est remarquable au vu de la complexité de ses résultats!\nDans la machine de Nakaya brièvement présentée, la diversité des flocons était atteinte grâce à la variation de seulement 2 paramètres : la ");
        
        			strong9 = element("strong");
        
        			strong9.textContent = textContent_28;
        
        			t178 = text$2(" (toujours sous le seuil de congélation bien sûr !) et l’");
        
        			strong10 = element("strong");
        
        			strong10.textContent = textContent_29;
        
        			t180 = text$2(" (la quantité de vapeur d’eau en suspension dans l’air).\nIci, seuls 2 paramètres sont également nécessaires, bien qu’ils n’aient pas d’analogues physiques vraiment clairs. Nous les appelerons ");
        
        			create_component(equation7.$$.fragment);
        
        			t181 = text$2(" (");
        
        			em27 = element("em");
        
        			em27.textContent = textContent_30;
        
        			t183 = text$2(") et ");
        
        			create_component(equation8.$$.fragment);
        
        			t184 = text$2(" (");
        
        			em28 = element("em");
        
        			em28.textContent = textContent_31;
        
        			t186 = text$2("), et leur rôle sera bientôt précisé.\nA chaque cellule hexagonale est associé un nombre réel, qui représente la ");
        
        			strong11 = element("strong");
        
        			strong11.textContent = textContent_32;
        
        			t188 = text$2(" présente à cet endroit précis de la grille.\nToutes les valeurs ");
        
        			create_component(equation9.$$.fragment);
        
        			t189 = text$2(" sont immédiatement considérées comme ");
        
        			em29 = element("em");
        
        			em29.textContent = textContent_33;
        
        			t191 = text$2(".");
        
        			t192 = space();
        
        			h20 = element("h2");
        
        			h20.textContent = textContent_34;
        
        			t194 = space();
        
        			p21 = element("p");
        
        			p21.innerHTML = textContent_35;
        
        			t198 = space();
        
        			ol0 = element("ol");
        
        			ol0.innerHTML = textContent_36;
        
        			t225 = space();
        
        			p22 = element("p");
        
        			t226 = text$2("Observez la grille ci-dessous. Vous pouvez la colorer pour mettre en évidence les ");
        
        			strong18 = element("strong");
        
        			strong18.textContent = textContent_37;
        
        			t228 = text$2(" et leurs ");
        
        			strong19 = element("strong");
        
        			strong19.textContent = textContent_38;
        
        			t230 = text$2(" formant ensemble le champ des cellules ");
        
        			em38 = element("em");
        
        			em38.textContent = textContent_39;
        
        			t232 = text$2(" (en haut à droite), les ");
        
        			strong20 = element("strong");
        
        			strong20.textContent = textContent_40;
        
        			t234 = text$2(" comptant dans le champ des ");
        
        			em39 = element("em");
        
        			em39.textContent = textContent_41;
        
        			t236 = text$2(" (en bas à droite). Sentez-vous libres de changer les valeurs. Le taux maximum d’humidité par case est de ");
        
        			create_component(dynamic3.$$.fragment);
        
        			t237 = space();
        
        			create_component(sketch4.$$.fragment);
        
        			t238 = space();
        
        			create_component(checkbox3.$$.fragment);
        
        			t239 = space();
        
        			p23 = element("p");
        
        			t240 = text$2("C’est ici qu’interviendra le paramètre ");
        
        			create_component(equation10.$$.fragment);
        
        			t241 = text$2(". Dans l’algorithme final, tout sera plus simple que sur cette grille : ");
        
        			em40 = element("em");
        
        			em40.textContent = textContent_42;
        
        			t243 = text$2(" à l’exception d’une ");
        
        			em41 = element("em");
        
        			em41.textContent = textContent_43;
        
        			t245 = text$2(" cellule, la « graine de glace », dont la valeur sera à ");
        
        			create_component(equation11.$$.fragment);
        
        			t246 = text$2(". En effet, les vrais flocons se forment toujours à partir d’un élément perturbateur, un « trouble » venant initier le processus de congélation, comme un grain de poussière. Ceci est dû à un phénomène physique que l’on appelle la ");
        
        			em42 = element("em");
        
        			em42.textContent = textContent_44;
        
        			t248 = text$2(", une phase intermédiaire où l’eau peut se maintenir liquide en dessous de sa température de congélation. Les flocons artificiels de la machine d’Ukichiro Nakaya grandissaient quant à eux à partir d’un petit poil de lapin ! C’est ce que cette « graine » représentera. Mis à part celle-ci, La valeur de toutes les autres cases sera donc égale à ");
        
        			create_component(equation12.$$.fragment);
        
        			t249 = text$2(", le « taux d’humidité global » de notre « nuage virtuel ».");
        
        			t250 = space();
        
        			ol1 = element("ol");
        
        			li6 = element("li");
        
        			strong21 = element("strong");
        
        			strong21.textContent = textContent_45;
        
        			t252 = text$2("\nPour les ");
        
        			em43 = element("em");
        
        			em43.textContent = textContent_46;
        
        			t254 = text$2(" : On ajoute le paramètre ");
        
        			create_component(equation13.$$.fragment);
        
        			t255 = text$2(", simple constante arbitaire, une quantité d’eau « gratuite » supplémentaire. (Reiter dit qu’elle rend compte très grossièrement du fait que de « l’eau est disponible en dehors du plan de croissance » du flocon).");
        
        			t256 = space();
        
        			p24 = element("p");
        
        			t257 = text$2("Pour les ");
        
        			em44 = element("em");
        
        			em44.textContent = textContent_47;
        
        			t259 = text$2(" : On calcule leur ");
        
        			strong22 = element("strong");
        
        			strong22.textContent = textContent_48;
        
        			t261 = text$2(" dans les alentours immédiats : la valeur de chaque cellule vaudra la quantité d’eau totale que chacune de ses voisines lui aura transmise, moins celle qu’elle leur aura elle-même cédée. Cette valeur est obtenue grâce à une moyenne pondérée calculée sur chaque cellule du champ des ");
        
        			em45 = element("em");
        
        			em45.textContent = textContent_49;
        
        			t263 = text$2(", dont les poids pourront varier en vue de complexifier l’algorithme. Néanmoins, un poids de ");
        
        			create_component(equation14.$$.fragment);
        
        			t264 = text$2(" pour la valeur de la cellule courante et de ");
        
        			create_component(equation15.$$.fragment);
        
        			t265 = text$2(" pour celles environnantes est la solution la plus simple. Le sketch ci-dessous illustre ce processus pour une cellule au choix. Comme pour le précédent, vous pouvez [action onClick:");
        
        			code8 = element("code");
        
        			code8.textContent = textContent_50;
        
        			t267 = text$2("]rafraîchir les valeurs[/action] et modifier le taux maximum d’humidité. Ici, il est à ");
        
        			create_component(dynamic4.$$.fragment);
        
        			t268 = text$2(".");
        
        			t269 = space();
        
        			create_component(sketch5.$$.fragment);
        
        			t270 = space();
        
        			ol2 = element("ol");
        
        			li7 = element("li");
        
        			strong23 = element("strong");
        
        			strong23.textContent = textContent_51;
        
        			t272 = text$2("\nC’est la dernière étape. L’intérêt de la diffusion, comme nous l’avons vu, est surtout que la vapeur d’eau des cellules ");
        
        			em46 = element("em");
        
        			em46.textContent = textContent_52;
        
        			t274 = text$2(" déborde dans les cellules ");
        
        			em47 = element("em");
        
        			em47.textContent = textContent_53;
        
        			t276 = text$2(". L’opération a déjà été faite : certaines des cellules du champ des ");
        
        			em48 = element("em");
        
        			em48.textContent = textContent_54;
        
        			t278 = text$2(" qui valaient ");
        
        			create_component(equation16.$$.fragment);
        
        			t279 = text$2("  auparavant (puisque situées dans l’autre champ) ont désormais une valeur non-nulle : c’est la quantité d’eau prête à y déborder. (Pointez une cellule grise en bordure d’une cellule non nulle dans le sketch précédent !) Une simple addition de la valeur des cellules des deux champs unes à unes complète l’itération de l’algorithme, et donne le nouvel état complet de la grille, qui contiendra potentiellement de nouvelles cellules gelées (si leur nouvelle valeur dépasse ");
        
        			create_component(equation17.$$.fragment);
        
        			t280 = text$2("  ) agglomérées au cristal !");
        
        			t281 = space();
        
        			h21 = element("h2");
        
        			h21.textContent = textContent_55;
        
        			t283 = space();
        
        			p25 = element("p");
        
        			p25.innerHTML = textContent_56;
        
        			t287 = space();
        
        			p26 = element("p");
        
        			p26.innerHTML = textContent_57;
        
        			t299 = space();
        
        			create_component(sketch6.$$.fragment);
        
        			t300 = space();
        
        			p27 = element("p");
        
        			em54 = element("em");
        
        			t301 = text$2("Jeu de la Vie, John Conway. Les règles sont les suivantes : Si une cellule a ");
        
        			create_component(dynamic5.$$.fragment);
        
        			t302 = text$2(" voisines vivantes, elle nait. Si elle a ");
        
        			create_component(dynamic6.$$.fragment);
        
        			t303 = text$2(" voisines vivantes, elle reste en vie, sinon, elle meurt");
        
        			t304 = space();
        
        			create_component(incrementer0.$$.fragment);
        
        			t305 = space();
        
        			create_component(incrementer1.$$.fragment);
        
        			t306 = space();
        
        			h22 = element("h2");
        
        			h22.textContent = textContent_58;
        
        			t308 = space();
        
        			p28 = element("p");
        
        			p28.innerHTML = textContent_59;
        
        			t312 = space();
        
        			h3 = element("h3");
        
        			h3.textContent = textContent_60;
        
        			t314 = space();
        
        			h40 = element("h4");
        
        			h40.textContent = textContent_61;
        
        			t316 = space();
        
        			p29 = element("p");
        
        			p29.innerHTML = textContent_62;
        
        			t320 = space();
        
        			ul2 = element("ul");
        
        			li8 = element("li");
        
        			create_component(sketch7.$$.fragment);
        
        			t321 = text$2(" La couleur de l'");
        
        			b0 = element("b");
        
        			b0.textContent = textContent_63;
        
        			t323 = text$2(". ");
        
        			span4 = element("span");
        
        			span4.textContent = textContent_64;
        
        			t325 = text$2(" : ");
        
        			create_component(dynamic7.$$.fragment);
        
        			t326 = text$2(", ");
        
        			span5 = element("span");
        
        			span5.textContent = textContent_65;
        
        			t328 = text$2(" : ");
        
        			create_component(dynamic8.$$.fragment);
        
        			t329 = text$2(", ");
        
        			span6 = element("span");
        
        			span6.textContent = textContent_66;
        
        			t331 = text$2(": ");
        
        			create_component(dynamic9.$$.fragment);
        
        			t332 = space();
        
        			li9 = element("li");
        
        			create_component(sketch8.$$.fragment);
        
        			t333 = text$2(" La couleur de l'");
        
        			b1 = element("b");
        
        			b1.textContent = textContent_67;
        
        			t335 = text$2(". ");
        
        			span7 = element("span");
        
        			span7.textContent = textContent_68;
        
        			t337 = text$2(" : ");
        
        			create_component(dynamic10.$$.fragment);
        
        			t338 = text$2(", ");
        
        			span8 = element("span");
        
        			span8.textContent = textContent_69;
        
        			t340 = text$2(" : ");
        
        			create_component(dynamic11.$$.fragment);
        
        			t341 = text$2(", ");
        
        			span9 = element("span");
        
        			span9.textContent = textContent_70;
        
        			t343 = text$2(": ");
        
        			create_component(dynamic12.$$.fragment);
        
        			t344 = space();
        
        			li10 = element("li");
        
        			create_component(sketch9.$$.fragment);
        
        			t345 = text$2(" La couleur de la ");
        
        			b2 = element("b");
        
        			b2.textContent = textContent_71;
        
        			t347 = text$2(". ");
        
        			span10 = element("span");
        
        			span10.textContent = textContent_72;
        
        			t349 = text$2(" : ");
        
        			create_component(dynamic13.$$.fragment);
        
        			t350 = text$2(", ");
        
        			span11 = element("span");
        
        			span11.textContent = textContent_73;
        
        			t352 = text$2(" : ");
        
        			create_component(dynamic14.$$.fragment);
        
        			t353 = text$2(", ");
        
        			span12 = element("span");
        
        			span12.textContent = textContent_74;
        
        			t355 = text$2(": ");
        
        			create_component(dynamic15.$$.fragment);
        
        			t356 = space();
        
        			li11 = element("li");
        
        			create_component(sketch10.$$.fragment);
        
        			t357 = text$2(" La couleur de la ");
        
        			b3 = element("b");
        
        			b3.textContent = textContent_75;
        
        			t359 = text$2(". ");
        
        			span13 = element("span");
        
        			span13.textContent = textContent_76;
        
        			t361 = text$2(" : ");
        
        			create_component(dynamic16.$$.fragment);
        
        			t362 = text$2(", ");
        
        			span14 = element("span");
        
        			span14.textContent = textContent_77;
        
        			t364 = text$2(" : ");
        
        			create_component(dynamic17.$$.fragment);
        
        			t365 = text$2(", ");
        
        			span15 = element("span");
        
        			span15.textContent = textContent_78;
        
        			t367 = text$2(": ");
        
        			create_component(dynamic18.$$.fragment);
        
        			t368 = space();
        
        			h41 = element("h4");
        
        			h41.textContent = textContent_79;
        
        			t370 = space();
        
        			p30 = element("p");
        
        			p30.innerHTML = textContent_80;
        
        			t374 = space();
        
        			create_component(equation18.$$.fragment);
        
        			t375 = text$2(" (");
        
        			i0 = element("i");
        
        			i0.textContent = textContent_81;
        
        			t377 = text$2(") : ");
        
        			create_component(range2.$$.fragment);
        
        			t378 = space();
        
        			t379 = text$2(/*$addedWater*/ ctx[2]);
        
        			t380 = space();
        
        			br0 = element("br");
        
        			t381 = space();
        
        			create_component(equation19.$$.fragment);
        
        			t382 = text$2(" (");
        
        			i1 = element("i");
        
        			i1.textContent = textContent_82;
        
        			t384 = text$2(") : ");
        
        			create_component(range3.$$.fragment);
        
        			t385 = space();
        
        			t386 = text$2(/*$humidity*/ ctx[3]);
        
        			t387 = space();
        
        			br1 = element("br");
        
        			t388 = space();
        
        			br2 = element("br");
        
        			t389 = space();
        
        			create_component(checkbox4.$$.fragment);
        
        			t390 = space();
        
        			br3 = element("br");
        
        			t391 = space();
        
        			p31 = element("p");
        
        			strong26 = element("strong");
        
        			strong26.textContent = textContent_83;
        
        			t393 = space();
        
        			create_component(range4.$$.fragment);
        
        			t394 = space();
        
        			t395 = text$2(/*$tilesPerRow*/ ctx[4]);
        
        			t396 = space();
        
        			br4 = element("br");
        
        			t397 = space();
        
        			span16 = element("span");
        
        			span16.textContent = textContent_84;
        
        			t399 = space();
        
        			p32 = element("p");
        
        			strong27 = element("strong");
        
        			strong27.textContent = textContent_85;
        
        			t401 = space();
        
        			create_component(range5.$$.fragment);
        
        			t402 = space();
        
        			t403 = text$2(/*$iterationsPerClick*/ ctx[5]);
        
        			t404 = space();
        
        			br5 = element("br");
        
        			t405 = space();
        
        			span17 = element("span");
        
        			span17.textContent = textContent_86;
        
        			t407 = space();
        
        			create_component(sketch11.$$.fragment);
        
        			t408 = space();
        
        			create_component(incrementer2.$$.fragment);
        
        			t409 = space();
        
        			create_component(incrementer3.$$.fragment);
        
        			t410 = space();
        
        			p33 = element("p");
        
        			p33.innerHTML = textContent_87;
        
        			t420 = space();
        
        			ol3 = element("ol");
        
        			ol3.innerHTML = textContent_88;
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			h10 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h10) !== "svelte-v1pk48") h10.textContent = textContent;
        
        			t1 = claim_space(nodes);
        
        			p0 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p0) !== "svelte-ubt9e1") p0.textContent = textContent_1;
        
        			t3 = claim_space(nodes);
        
        			p1 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p1) !== "svelte-3y595o") p1.innerHTML = textContent_2;
        
        			t17 = claim_space(nodes);
        
        			claim_component(sketch0.$$.fragment, nodes);
        
        			t18 = claim_space(nodes);
        
        			p2 = claim_element(nodes, "P", {});
        
        			var p2_nodes = children(p2);
        
        			em6 = claim_element(p2_nodes, "EM", {});
        
        			var em6_nodes = children(em6);
        
        			t19 = claim_text(em6_nodes, "Flocon de Von Koch d’une profondeur de ");
        
        			claim_component(dynamic0.$$.fragment, em6_nodes);
        
        			t20 = claim_text(em6_nodes, " itérations.");
        
        			em6_nodes.forEach(detach);
        
        			p2_nodes.forEach(detach);
        
        			t21 = claim_space(nodes);
        
        			p3 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p3) !== "svelte-1sazdry") p3.innerHTML = textContent_3;
        
        			t41 = claim_space(nodes);
        
        			claim_component(sketch1.$$.fragment, nodes);
        
        			t42 = claim_space(nodes);
        
        			p4 = claim_element(nodes, "P", {});
        
        			var p4_nodes = children(p4);
        
        			em12 = claim_element(p4_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em12) !== "svelte-9stq5m") em12.innerHTML = textContent_4;
        
        			t46 = claim_text(p4_nodes, ". Ici, le cercle initial est entouré ");
        
        			claim_component(dynamic1.$$.fragment, p4_nodes);
        
        			t47 = claim_text(p4_nodes, " fois.");
        
        			p4_nodes.forEach(detach);
        
        			t48 = claim_space(nodes);
        
        			h11 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h11) !== "svelte-1iwx2zb") h11.textContent = textContent_5;
        
        			t50 = claim_space(nodes);
        
        			ul0 = claim_element(nodes, "UL", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(ul0) !== "svelte-1if3uhy") ul0.innerHTML = textContent_6;
        
        			t54 = claim_space(nodes);
        
        			h12 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h12) !== "svelte-ijtlj0") h12.textContent = textContent_7;
        
        			t56 = claim_space(nodes);
        
        			p5 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p5) !== "svelte-oyop54") p5.innerHTML = textContent_8;
        
        			t70 = claim_space(nodes);
        
        			p6 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p6) !== "svelte-1dkpz7u") p6.innerHTML = textContent_9;
        
        			t74 = claim_space(nodes);
        
        			p7 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p7) !== "svelte-168583i") p7.innerHTML = textContent_10;
        
        			t82 = claim_space(nodes);
        
        			h13 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h13) !== "svelte-5kt8a6") h13.textContent = textContent_11;
        
        			t84 = claim_space(nodes);
        
        			p8 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p8) !== "svelte-1mcmdv8") p8.textContent = textContent_12;
        
        			t86 = claim_space(nodes);
        
        			claim_component(sketch2.$$.fragment, nodes);
        
        			t87 = claim_space(nodes);
        
        			p9 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p9) !== "svelte-1l4ozap") p9.innerHTML = textContent_13;
        
        			t89 = claim_space(nodes);
        
        			claim_component(equation0.$$.fragment, nodes);
        
        			claim_component(range0.$$.fragment, nodes);
        
        			t90 = claim_space(nodes);
        
        			claim_component(equation1.$$.fragment, nodes);
        
        			t91 = claim_space(nodes);
        
        			p10 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p10) !== "svelte-6d20z9") p10.innerHTML = textContent_14;
        
        			t97 = claim_space(nodes);
        
        			claim_component(checkbox0.$$.fragment, nodes);
        
        			t98 = claim_space(nodes);
        
        			claim_component(equation2.$$.fragment, nodes);
        
        			t99 = claim_space(nodes);
        
        			if_block.l(nodes);
        
        			t100 = claim_space(nodes);
        
        			claim_component(equation3.$$.fragment, nodes);
        
        			t101 = claim_space(nodes);
        
        			p11 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p11) !== "svelte-t5g010") p11.innerHTML = textContent_15;
        
        			t111 = claim_space(nodes);
        
        			pre0 = claim_element(nodes, "PRE", { class: true });
        
        			var pre0_nodes = children(pre0);
        
        			html_tag = claim_html_tag(pre0_nodes, false);
        
        			pre0_nodes.forEach(detach);
        
        			t112 = claim_space(nodes);
        
        			h14 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h14) !== "svelte-fomfjt") h14.textContent = textContent_16;
        
        			t114 = claim_space(nodes);
        
        			p12 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p12) !== "svelte-1p9llgb") p12.innerHTML = textContent_17;
        
        			t118 = claim_space(nodes);
        
        			p13 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p13) !== "svelte-9q4s00") p13.innerHTML = textContent_18;
        
        			t122 = claim_space(nodes);
        
        			claim_component(sketch3.$$.fragment, nodes);
        
        			t123 = claim_space(nodes);
        
        			p14 = claim_element(nodes, "P", {});
        
        			var p14_nodes = children(p14);
        
        			t124 = claim_text(p14_nodes, "Il y a actuellement ");
        
        			claim_component(dynamic2.$$.fragment, p14_nodes);
        
        			t125 = claim_text(p14_nodes, " hexagones ");
        
        			em23 = claim_element(p14_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em23) !== "svelte-lai14n") em23.textContent = textContent_19;
        
        			t127 = claim_text(p14_nodes, " par ligne.");
        
        			p14_nodes.forEach(detach);
        
        			t128 = claim_space(nodes);
        
        			p15 = claim_element(nodes, "P", {});
        
        			var p15_nodes = children(p15);
        
        			t129 = claim_text(p15_nodes, "Faites progresser l’algorithme de dessin de la grille : ");
        
        			claim_component(range1.$$.fragment, p15_nodes);
        
        			t130 = claim_space(p15_nodes);
        
        			t131 = claim_text(p15_nodes, /*$progressGrid*/ ctx[1]);
        
        			t132 = claim_text(p15_nodes, "%");
        
        			p15_nodes.forEach(detach);
        
        			t133 = claim_space(nodes);
        
        			claim_component(checkbox1.$$.fragment, nodes);
        
        			t134 = claim_space(nodes);
        
        			claim_component(checkbox2.$$.fragment, nodes);
        
        			t135 = claim_space(nodes);
        
        			p16 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p16) !== "svelte-1y12ekl") p16.textContent = textContent_20;
        
        			t137 = claim_space(nodes);
        
        			ul1 = claim_element(nodes, "UL", {});
        
        			var ul1_nodes = children(ul1);
        
        			li2 = claim_element(ul1_nodes, "LI", {});
        
        			var li2_nodes = children(li2);
        
        			p17 = claim_element(li2_nodes, "P", {});
        
        			var p17_nodes = children(p17);
        
        			t138 = claim_text(p17_nodes, "La ligne oblique ");
        
        			span0 = claim_element(p17_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span0) !== "svelte-2vhe3v") span0.innerHTML = textContent_21;
        
        			t140 = claim_text(p17_nodes, " représente le décalage entre les centres des hexagones situés à une colonne d’intervalle. Son sens varie, et est codé dans la variable booléenne ");
        
        			code4 = claim_element(p17_nodes, "CODE", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(code4) !== "svelte-12kfv1x") code4.textContent = textContent_22;
        
        			t142 = claim_text(p17_nodes, " dans le code ci-dessous. Les angles qu’elle forme valent alternativement ");
        
        			claim_component(equation4.$$.fragment, p17_nodes);
        
        			t143 = claim_text(p17_nodes, " et ");
        
        			claim_component(equation5.$$.fragment, p17_nodes);
        
        			t144 = claim_text(p17_nodes, " radians.");
        
        			p17_nodes.forEach(detach);
        
        			li2_nodes.forEach(detach);
        
        			t145 = claim_space(ul1_nodes);
        
        			li3 = claim_element(ul1_nodes, "LI", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(li3) !== "svelte-wo7bct") li3.innerHTML = textContent_23;
        
        			t163 = claim_space(ul1_nodes);
        
        			li4 = claim_element(ul1_nodes, "LI", {});
        
        			var li4_nodes = children(li4);
        
        			p19 = claim_element(li4_nodes, "P", {});
        
        			var p19_nodes = children(p19);
        
        			t164 = claim_text(p19_nodes, "La ligne ");
        
        			span2 = claim_element(p19_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span2) !== "svelte-1d2135t") span2.innerHTML = textContent_24;
        
        			t166 = claim_text(p19_nodes, ", enfin, vient former le côté adjacent d’un nouveau triangle rectangle, qui vaut la distance ");
        
        			em26 = claim_element(p19_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em26) !== "svelte-pnonef") em26.textContent = textContent_25;
        
        			t168 = claim_text(p19_nodes, " entre deux hexagones d’une même ligne. ");
        
        			span3 = claim_element(p19_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span3) !== "svelte-1d2135t") span3.innerHTML = textContent_26;
        
        			t170 = claim_text(p19_nodes, " = ");
        
        			claim_component(equation6.$$.fragment, p19_nodes);
        
        			t171 = claim_text(p19_nodes, ".\nUne fois implémenté, cela donne la fonction suivante :");
        
        			p19_nodes.forEach(detach);
        
        			li4_nodes.forEach(detach);
        
        			ul1_nodes.forEach(detach);
        
        			t172 = claim_space(nodes);
        
        			pre1 = claim_element(nodes, "PRE", { class: true });
        
        			var pre1_nodes = children(pre1);
        
        			html_tag_1 = claim_html_tag(pre1_nodes, false);
        
        			pre1_nodes.forEach(detach);
        
        			t173 = claim_space(nodes);
        
        			h15 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h15) !== "svelte-zygxa8") h15.textContent = textContent_27;
        
        			t175 = claim_space(nodes);
        
        			p20 = claim_element(nodes, "P", {});
        
        			var p20_nodes = children(p20);
        
        			t176 = claim_text(p20_nodes, "L’algorithme est assez simple, ce qui est remarquable au vu de la complexité de ses résultats!\nDans la machine de Nakaya brièvement présentée, la diversité des flocons était atteinte grâce à la variation de seulement 2 paramètres : la ");
        
        			strong9 = claim_element(p20_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong9) !== "svelte-mv006o") strong9.textContent = textContent_28;
        
        			t178 = claim_text(p20_nodes, " (toujours sous le seuil de congélation bien sûr !) et l’");
        
        			strong10 = claim_element(p20_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong10) !== "svelte-jozud5") strong10.textContent = textContent_29;
        
        			t180 = claim_text(p20_nodes, " (la quantité de vapeur d’eau en suspension dans l’air).\nIci, seuls 2 paramètres sont également nécessaires, bien qu’ils n’aient pas d’analogues physiques vraiment clairs. Nous les appelerons ");
        
        			claim_component(equation7.$$.fragment, p20_nodes);
        
        			t181 = claim_text(p20_nodes, " (");
        
        			em27 = claim_element(p20_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em27) !== "svelte-v7wp5d") em27.textContent = textContent_30;
        
        			t183 = claim_text(p20_nodes, ") et ");
        
        			claim_component(equation8.$$.fragment, p20_nodes);
        
        			t184 = claim_text(p20_nodes, " (");
        
        			em28 = claim_element(p20_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em28) !== "svelte-67a0os") em28.textContent = textContent_31;
        
        			t186 = claim_text(p20_nodes, "), et leur rôle sera bientôt précisé.\nA chaque cellule hexagonale est associé un nombre réel, qui représente la ");
        
        			strong11 = claim_element(p20_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong11) !== "svelte-1bsnvax") strong11.textContent = textContent_32;
        
        			t188 = claim_text(p20_nodes, " présente à cet endroit précis de la grille.\nToutes les valeurs ");
        
        			claim_component(equation9.$$.fragment, p20_nodes);
        
        			t189 = claim_text(p20_nodes, " sont immédiatement considérées comme ");
        
        			em29 = claim_element(p20_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em29) !== "svelte-4h1r6t") em29.textContent = textContent_33;
        
        			t191 = claim_text(p20_nodes, ".");
        
        			p20_nodes.forEach(detach);
        
        			t192 = claim_space(nodes);
        
        			h20 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h20) !== "svelte-11aaqce") h20.textContent = textContent_34;
        
        			t194 = claim_space(nodes);
        
        			p21 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p21) !== "svelte-mihxot") p21.innerHTML = textContent_35;
        
        			t198 = claim_space(nodes);
        
        			ol0 = claim_element(nodes, "OL", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(ol0) !== "svelte-3b9ujx") ol0.innerHTML = textContent_36;
        
        			t225 = claim_space(nodes);
        
        			p22 = claim_element(nodes, "P", {});
        
        			var p22_nodes = children(p22);
        
        			t226 = claim_text(p22_nodes, "Observez la grille ci-dessous. Vous pouvez la colorer pour mettre en évidence les ");
        
        			strong18 = claim_element(p22_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong18) !== "svelte-1pp34vw") strong18.textContent = textContent_37;
        
        			t228 = claim_text(p22_nodes, " et leurs ");
        
        			strong19 = claim_element(p22_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong19) !== "svelte-1isykkg") strong19.textContent = textContent_38;
        
        			t230 = claim_text(p22_nodes, " formant ensemble le champ des cellules ");
        
        			em38 = claim_element(p22_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em38) !== "svelte-depab9") em38.textContent = textContent_39;
        
        			t232 = claim_text(p22_nodes, " (en haut à droite), les ");
        
        			strong20 = claim_element(p22_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong20) !== "svelte-euragc") strong20.textContent = textContent_40;
        
        			t234 = claim_text(p22_nodes, " comptant dans le champ des ");
        
        			em39 = claim_element(p22_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em39) !== "svelte-18fgsjj") em39.textContent = textContent_41;
        
        			t236 = claim_text(p22_nodes, " (en bas à droite). Sentez-vous libres de changer les valeurs. Le taux maximum d’humidité par case est de ");
        
        			claim_component(dynamic3.$$.fragment, p22_nodes);
        
        			p22_nodes.forEach(detach);
        
        			t237 = claim_space(nodes);
        
        			claim_component(sketch4.$$.fragment, nodes);
        
        			t238 = claim_space(nodes);
        
        			claim_component(checkbox3.$$.fragment, nodes);
        
        			t239 = claim_space(nodes);
        
        			p23 = claim_element(nodes, "P", {});
        
        			var p23_nodes = children(p23);
        
        			t240 = claim_text(p23_nodes, "C’est ici qu’interviendra le paramètre ");
        
        			claim_component(equation10.$$.fragment, p23_nodes);
        
        			t241 = claim_text(p23_nodes, ". Dans l’algorithme final, tout sera plus simple que sur cette grille : ");
        
        			em40 = claim_element(p23_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em40) !== "svelte-9nf29i") em40.textContent = textContent_42;
        
        			t243 = claim_text(p23_nodes, " à l’exception d’une ");
        
        			em41 = claim_element(p23_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em41) !== "svelte-10zkh7y") em41.textContent = textContent_43;
        
        			t245 = claim_text(p23_nodes, " cellule, la « graine de glace », dont la valeur sera à ");
        
        			claim_component(equation11.$$.fragment, p23_nodes);
        
        			t246 = claim_text(p23_nodes, ". En effet, les vrais flocons se forment toujours à partir d’un élément perturbateur, un « trouble » venant initier le processus de congélation, comme un grain de poussière. Ceci est dû à un phénomène physique que l’on appelle la ");
        
        			em42 = claim_element(p23_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em42) !== "svelte-1pm4r70") em42.textContent = textContent_44;
        
        			t248 = claim_text(p23_nodes, ", une phase intermédiaire où l’eau peut se maintenir liquide en dessous de sa température de congélation. Les flocons artificiels de la machine d’Ukichiro Nakaya grandissaient quant à eux à partir d’un petit poil de lapin ! C’est ce que cette « graine » représentera. Mis à part celle-ci, La valeur de toutes les autres cases sera donc égale à ");
        
        			claim_component(equation12.$$.fragment, p23_nodes);
        
        			t249 = claim_text(p23_nodes, ", le « taux d’humidité global » de notre « nuage virtuel ».");
        
        			p23_nodes.forEach(detach);
        
        			t250 = claim_space(nodes);
        
        			ol1 = claim_element(nodes, "OL", { start: true });
        
        			var ol1_nodes = children(ol1);
        
        			li6 = claim_element(ol1_nodes, "LI", {});
        
        			var li6_nodes = children(li6);
        
        			strong21 = claim_element(li6_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong21) !== "svelte-5q56wh") strong21.textContent = textContent_45;
        
        			t252 = claim_text(li6_nodes, "\nPour les ");
        
        			em43 = claim_element(li6_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em43) !== "svelte-depab9") em43.textContent = textContent_46;
        
        			t254 = claim_text(li6_nodes, " : On ajoute le paramètre ");
        
        			claim_component(equation13.$$.fragment, li6_nodes);
        
        			t255 = claim_text(li6_nodes, ", simple constante arbitaire, une quantité d’eau « gratuite » supplémentaire. (Reiter dit qu’elle rend compte très grossièrement du fait que de « l’eau est disponible en dehors du plan de croissance » du flocon).");
        
        			li6_nodes.forEach(detach);
        
        			ol1_nodes.forEach(detach);
        
        			t256 = claim_space(nodes);
        
        			p24 = claim_element(nodes, "P", {});
        
        			var p24_nodes = children(p24);
        
        			t257 = claim_text(p24_nodes, "Pour les ");
        
        			em44 = claim_element(p24_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em44) !== "svelte-18fgsjj") em44.textContent = textContent_47;
        
        			t259 = claim_text(p24_nodes, " : On calcule leur ");
        
        			strong22 = claim_element(p24_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong22) !== "svelte-2fyoz") strong22.textContent = textContent_48;
        
        			t261 = claim_text(p24_nodes, " dans les alentours immédiats : la valeur de chaque cellule vaudra la quantité d’eau totale que chacune de ses voisines lui aura transmise, moins celle qu’elle leur aura elle-même cédée. Cette valeur est obtenue grâce à une moyenne pondérée calculée sur chaque cellule du champ des ");
        
        			em45 = claim_element(p24_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em45) !== "svelte-18fgsjj") em45.textContent = textContent_49;
        
        			t263 = claim_text(p24_nodes, ", dont les poids pourront varier en vue de complexifier l’algorithme. Néanmoins, un poids de ");
        
        			claim_component(equation14.$$.fragment, p24_nodes);
        
        			t264 = claim_text(p24_nodes, " pour la valeur de la cellule courante et de ");
        
        			claim_component(equation15.$$.fragment, p24_nodes);
        
        			t265 = claim_text(p24_nodes, " pour celles environnantes est la solution la plus simple. Le sketch ci-dessous illustre ce processus pour une cellule au choix. Comme pour le précédent, vous pouvez [action onClick:");
        
        			code8 = claim_element(p24_nodes, "CODE", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(code8) !== "svelte-1a68fhd") code8.textContent = textContent_50;
        
        			t267 = claim_text(p24_nodes, "]rafraîchir les valeurs[/action] et modifier le taux maximum d’humidité. Ici, il est à ");
        
        			claim_component(dynamic4.$$.fragment, p24_nodes);
        
        			t268 = claim_text(p24_nodes, ".");
        
        			p24_nodes.forEach(detach);
        
        			t269 = claim_space(nodes);
        
        			claim_component(sketch5.$$.fragment, nodes);
        
        			t270 = claim_space(nodes);
        
        			ol2 = claim_element(nodes, "OL", { start: true });
        
        			var ol2_nodes = children(ol2);
        
        			li7 = claim_element(ol2_nodes, "LI", {});
        
        			var li7_nodes = children(li7);
        
        			strong23 = claim_element(li7_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong23) !== "svelte-8wo2qm") strong23.textContent = textContent_51;
        
        			t272 = claim_text(li7_nodes, "\nC’est la dernière étape. L’intérêt de la diffusion, comme nous l’avons vu, est surtout que la vapeur d’eau des cellules ");
        
        			em46 = claim_element(li7_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em46) !== "svelte-18fgsjj") em46.textContent = textContent_52;
        
        			t274 = claim_text(li7_nodes, " déborde dans les cellules ");
        
        			em47 = claim_element(li7_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em47) !== "svelte-depab9") em47.textContent = textContent_53;
        
        			t276 = claim_text(li7_nodes, ". L’opération a déjà été faite : certaines des cellules du champ des ");
        
        			em48 = claim_element(li7_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em48) !== "svelte-18fgsjj") em48.textContent = textContent_54;
        
        			t278 = claim_text(li7_nodes, " qui valaient ");
        
        			claim_component(equation16.$$.fragment, li7_nodes);
        
        			t279 = claim_text(li7_nodes, "  auparavant (puisque situées dans l’autre champ) ont désormais une valeur non-nulle : c’est la quantité d’eau prête à y déborder. (Pointez une cellule grise en bordure d’une cellule non nulle dans le sketch précédent !) Une simple addition de la valeur des cellules des deux champs unes à unes complète l’itération de l’algorithme, et donne le nouvel état complet de la grille, qui contiendra potentiellement de nouvelles cellules gelées (si leur nouvelle valeur dépasse ");
        
        			claim_component(equation17.$$.fragment, li7_nodes);
        
        			t280 = claim_text(li7_nodes, "  ) agglomérées au cristal !");
        
        			li7_nodes.forEach(detach);
        
        			ol2_nodes.forEach(detach);
        
        			t281 = claim_space(nodes);
        
        			h21 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h21) !== "svelte-f2gvqd") h21.textContent = textContent_55;
        
        			t283 = claim_space(nodes);
        
        			p25 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p25) !== "svelte-1xkjjti") p25.innerHTML = textContent_56;
        
        			t287 = claim_space(nodes);
        
        			p26 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p26) !== "svelte-1ierl8a") p26.innerHTML = textContent_57;
        
        			t299 = claim_space(nodes);
        
        			claim_component(sketch6.$$.fragment, nodes);
        
        			t300 = claim_space(nodes);
        
        			p27 = claim_element(nodes, "P", {});
        
        			var p27_nodes = children(p27);
        
        			em54 = claim_element(p27_nodes, "EM", {});
        
        			var em54_nodes = children(em54);
        
        			t301 = claim_text(em54_nodes, "Jeu de la Vie, John Conway. Les règles sont les suivantes : Si une cellule a ");
        
        			claim_component(dynamic5.$$.fragment, em54_nodes);
        
        			t302 = claim_text(em54_nodes, " voisines vivantes, elle nait. Si elle a ");
        
        			claim_component(dynamic6.$$.fragment, em54_nodes);
        
        			t303 = claim_text(em54_nodes, " voisines vivantes, elle reste en vie, sinon, elle meurt");
        
        			em54_nodes.forEach(detach);
        
        			p27_nodes.forEach(detach);
        
        			t304 = claim_space(nodes);
        
        			claim_component(incrementer0.$$.fragment, nodes);
        
        			t305 = claim_space(nodes);
        
        			claim_component(incrementer1.$$.fragment, nodes);
        
        			t306 = claim_space(nodes);
        
        			h22 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h22) !== "svelte-1cxe793") h22.textContent = textContent_58;
        
        			t308 = claim_space(nodes);
        
        			p28 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p28) !== "svelte-1xnn1yx") p28.innerHTML = textContent_59;
        
        			t312 = claim_space(nodes);
        
        			h3 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h3) !== "svelte-5ektcy") h3.textContent = textContent_60;
        
        			t314 = claim_space(nodes);
        
        			h40 = claim_element(nodes, "H4", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h40) !== "svelte-rv6cx0") h40.textContent = textContent_61;
        
        			t316 = claim_space(nodes);
        
        			p29 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p29) !== "svelte-6fjgk6") p29.innerHTML = textContent_62;
        
        			t320 = claim_space(nodes);
        
        			ul2 = claim_element(nodes, "UL", {});
        
        			var ul2_nodes = children(ul2);
        
        			li8 = claim_element(ul2_nodes, "LI", {});
        
        			var li8_nodes = children(li8);
        
        			claim_component(sketch7.$$.fragment, li8_nodes);
        
        			t321 = claim_text(li8_nodes, " La couleur de l'");
        
        			b0 = claim_element(li8_nodes, "B", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(b0) !== "svelte-1t6hvm0") b0.textContent = textContent_63;
        
        			t323 = claim_text(li8_nodes, ". ");
        
        			span4 = claim_element(li8_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span4) !== "svelte-1rkoifg") span4.textContent = textContent_64;
        
        			t325 = claim_text(li8_nodes, " : ");
        
        			claim_component(dynamic7.$$.fragment, li8_nodes);
        
        			t326 = claim_text(li8_nodes, ", ");
        
        			span5 = claim_element(li8_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span5) !== "svelte-y9gcq0") span5.textContent = textContent_65;
        
        			t328 = claim_text(li8_nodes, " : ");
        
        			claim_component(dynamic8.$$.fragment, li8_nodes);
        
        			t329 = claim_text(li8_nodes, ", ");
        
        			span6 = claim_element(li8_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span6) !== "svelte-1lujv21") span6.textContent = textContent_66;
        
        			t331 = claim_text(li8_nodes, ": ");
        
        			claim_component(dynamic9.$$.fragment, li8_nodes);
        
        			li8_nodes.forEach(detach);
        
        			t332 = claim_space(ul2_nodes);
        
        			li9 = claim_element(ul2_nodes, "LI", {});
        
        			var li9_nodes = children(li9);
        
        			claim_component(sketch8.$$.fragment, li9_nodes);
        
        			t333 = claim_text(li9_nodes, " La couleur de l'");
        
        			b1 = claim_element(li9_nodes, "B", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(b1) !== "svelte-bd3wg6") b1.textContent = textContent_67;
        
        			t335 = claim_text(li9_nodes, ". ");
        
        			span7 = claim_element(li9_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span7) !== "svelte-1rkoifg") span7.textContent = textContent_68;
        
        			t337 = claim_text(li9_nodes, " : ");
        
        			claim_component(dynamic10.$$.fragment, li9_nodes);
        
        			t338 = claim_text(li9_nodes, ", ");
        
        			span8 = claim_element(li9_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span8) !== "svelte-y9gcq0") span8.textContent = textContent_69;
        
        			t340 = claim_text(li9_nodes, " : ");
        
        			claim_component(dynamic11.$$.fragment, li9_nodes);
        
        			t341 = claim_text(li9_nodes, ", ");
        
        			span9 = claim_element(li9_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span9) !== "svelte-1lujv21") span9.textContent = textContent_70;
        
        			t343 = claim_text(li9_nodes, ": ");
        
        			claim_component(dynamic12.$$.fragment, li9_nodes);
        
        			li9_nodes.forEach(detach);
        
        			t344 = claim_space(ul2_nodes);
        
        			li10 = claim_element(ul2_nodes, "LI", {});
        
        			var li10_nodes = children(li10);
        
        			claim_component(sketch9.$$.fragment, li10_nodes);
        
        			t345 = claim_text(li10_nodes, " La couleur de la ");
        
        			b2 = claim_element(li10_nodes, "B", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(b2) !== "svelte-1gz77kh") b2.textContent = textContent_71;
        
        			t347 = claim_text(li10_nodes, ". ");
        
        			span10 = claim_element(li10_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span10) !== "svelte-1rkoifg") span10.textContent = textContent_72;
        
        			t349 = claim_text(li10_nodes, " : ");
        
        			claim_component(dynamic13.$$.fragment, li10_nodes);
        
        			t350 = claim_text(li10_nodes, ", ");
        
        			span11 = claim_element(li10_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span11) !== "svelte-y9gcq0") span11.textContent = textContent_73;
        
        			t352 = claim_text(li10_nodes, " : ");
        
        			claim_component(dynamic14.$$.fragment, li10_nodes);
        
        			t353 = claim_text(li10_nodes, ", ");
        
        			span12 = claim_element(li10_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span12) !== "svelte-1lujv21") span12.textContent = textContent_74;
        
        			t355 = claim_text(li10_nodes, ": ");
        
        			claim_component(dynamic15.$$.fragment, li10_nodes);
        
        			li10_nodes.forEach(detach);
        
        			t356 = claim_space(ul2_nodes);
        
        			li11 = claim_element(ul2_nodes, "LI", {});
        
        			var li11_nodes = children(li11);
        
        			claim_component(sketch10.$$.fragment, li11_nodes);
        
        			t357 = claim_text(li11_nodes, " La couleur de la ");
        
        			b3 = claim_element(li11_nodes, "B", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(b3) !== "svelte-4znec8") b3.textContent = textContent_75;
        
        			t359 = claim_text(li11_nodes, ". ");
        
        			span13 = claim_element(li11_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span13) !== "svelte-1rkoifg") span13.textContent = textContent_76;
        
        			t361 = claim_text(li11_nodes, " : ");
        
        			claim_component(dynamic16.$$.fragment, li11_nodes);
        
        			t362 = claim_text(li11_nodes, ", ");
        
        			span14 = claim_element(li11_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span14) !== "svelte-y9gcq0") span14.textContent = textContent_77;
        
        			t364 = claim_text(li11_nodes, " : ");
        
        			claim_component(dynamic17.$$.fragment, li11_nodes);
        
        			t365 = claim_text(li11_nodes, ", ");
        
        			span15 = claim_element(li11_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span15) !== "svelte-1lujv21") span15.textContent = textContent_78;
        
        			t367 = claim_text(li11_nodes, ": ");
        
        			claim_component(dynamic18.$$.fragment, li11_nodes);
        
        			li11_nodes.forEach(detach);
        
        			ul2_nodes.forEach(detach);
        
        			t368 = claim_space(nodes);
        
        			h41 = claim_element(nodes, "H4", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h41) !== "svelte-1472r2j") h41.textContent = textContent_79;
        
        			t370 = claim_space(nodes);
        
        			p30 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p30) !== "svelte-ky6nv9") p30.innerHTML = textContent_80;
        
        			t374 = claim_space(nodes);
        
        			claim_component(equation18.$$.fragment, nodes);
        
        			t375 = claim_text(nodes, " (");
        
        			i0 = claim_element(nodes, "I", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(i0) !== "svelte-4m1nan") i0.textContent = textContent_81;
        
        			t377 = claim_text(nodes, ") : ");
        
        			claim_component(range2.$$.fragment, nodes);
        
        			t378 = claim_space(nodes);
        
        			t379 = claim_text(nodes, /*$addedWater*/ ctx[2]);
        
        			t380 = claim_space(nodes);
        
        			br0 = claim_element(nodes, "BR", {});
        
        			t381 = claim_space(nodes);
        
        			claim_component(equation19.$$.fragment, nodes);
        
        			t382 = claim_text(nodes, " (");
        
        			i1 = claim_element(nodes, "I", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(i1) !== "svelte-17cy85a") i1.textContent = textContent_82;
        
        			t384 = claim_text(nodes, ") : ");
        
        			claim_component(range3.$$.fragment, nodes);
        
        			t385 = claim_space(nodes);
        
        			t386 = claim_text(nodes, /*$humidity*/ ctx[3]);
        
        			t387 = claim_space(nodes);
        
        			br1 = claim_element(nodes, "BR", {});
        
        			t388 = claim_space(nodes);
        
        			br2 = claim_element(nodes, "BR", {});
        
        			t389 = claim_space(nodes);
        
        			claim_component(checkbox4.$$.fragment, nodes);
        
        			t390 = claim_space(nodes);
        
        			br3 = claim_element(nodes, "BR", {});
        
        			t391 = claim_space(nodes);
        
        			p31 = claim_element(nodes, "P", {});
        
        			var p31_nodes = children(p31);
        
        			strong26 = claim_element(p31_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong26) !== "svelte-u8aacq") strong26.textContent = textContent_83;
        
        			t393 = claim_space(p31_nodes);
        
        			claim_component(range4.$$.fragment, p31_nodes);
        
        			t394 = claim_space(p31_nodes);
        
        			t395 = claim_text(p31_nodes, /*$tilesPerRow*/ ctx[4]);
        
        			t396 = claim_space(p31_nodes);
        
        			br4 = claim_element(p31_nodes, "BR", {});
        
        			p31_nodes.forEach(detach);
        
        			t397 = claim_space(nodes);
        
        			span16 = claim_element(nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span16) !== "svelte-7a4fz7") span16.textContent = textContent_84;
        
        			t399 = claim_space(nodes);
        
        			p32 = claim_element(nodes, "P", {});
        
        			var p32_nodes = children(p32);
        
        			strong27 = claim_element(p32_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong27) !== "svelte-112rhq6") strong27.textContent = textContent_85;
        
        			t401 = claim_space(p32_nodes);
        
        			claim_component(range5.$$.fragment, p32_nodes);
        
        			t402 = claim_space(p32_nodes);
        
        			t403 = claim_text(p32_nodes, /*$iterationsPerClick*/ ctx[5]);
        
        			t404 = claim_space(p32_nodes);
        
        			br5 = claim_element(p32_nodes, "BR", {});
        
        			p32_nodes.forEach(detach);
        
        			t405 = claim_space(nodes);
        
        			span17 = claim_element(nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span17) !== "svelte-a4y19s") span17.textContent = textContent_86;
        
        			t407 = claim_space(nodes);
        
        			claim_component(sketch11.$$.fragment, nodes);
        
        			t408 = claim_space(nodes);
        
        			claim_component(incrementer2.$$.fragment, nodes);
        
        			t409 = claim_space(nodes);
        
        			claim_component(incrementer3.$$.fragment, nodes);
        
        			t410 = claim_space(nodes);
        
        			p33 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p33) !== "svelte-1uxpr0g") p33.innerHTML = textContent_87;
        
        			t420 = claim_space(nodes);
        
        			ol3 = claim_element(nodes, "OL", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(ol3) !== "svelte-5apzxe") ol3.innerHTML = textContent_88;
        
        			this.h();
        
        		},
        
        		h() {
        
        			html_tag.a = null;
        
        			attr(pre0, "class", "language-js");
        
        			set_style(span0, "color", "red");
        
        			set_style(span2, "color", "#00ff00");
        
        			set_style(span3, "color", "#00ff00");
        
        			html_tag_1.a = null;
        
        			attr(pre1, "class", "language-js");
        
        			attr(ol1, "start", "2");
        
        			attr(ol2, "start", "3");
        
        			set_style(span4, "color", "red");
        
        			set_style(span4, "font-style", "bold");
        
        			set_style(span5, "color", "green");
        
        			set_style(span5, "font-style", "bold");
        
        			set_style(span6, "color", "blue");
        
        			set_style(span6, "font-style", "bold");
        
        			set_style(span7, "color", "red");
        
        			set_style(span7, "font-style", "bold");
        
        			set_style(span8, "color", "green");
        
        			set_style(span8, "font-style", "bold");
        
        			set_style(span9, "color", "blue");
        
        			set_style(span9, "font-style", "bold");
        
        			set_style(span10, "color", "red");
        
        			set_style(span10, "font-style", "bold");
        
        			set_style(span11, "color", "green");
        
        			set_style(span11, "font-style", "bold");
        
        			set_style(span12, "color", "blue");
        
        			set_style(span12, "font-style", "bold");
        
        			set_style(span13, "color", "red");
        
        			set_style(span13, "font-style", "bold");
        
        			set_style(span14, "color", "green");
        
        			set_style(span14, "font-style", "bold");
        
        			set_style(span15, "color", "blue");
        
        			set_style(span15, "font-style", "bold");
        
        			set_style(span16, "font-size", "0.8em");
        
        			set_style(span16, "font-style", "italic");
        
        			set_style(span17, "font-size", "0.8em");
        
        			set_style(span17, "font-style", "italic");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, h10, anchor);
        
        			insert_hydration(target, t1, anchor);
        
        			insert_hydration(target, p0, anchor);
        
        			insert_hydration(target, t3, anchor);
        
        			insert_hydration(target, p1, anchor);
        
        			insert_hydration(target, t17, anchor);
        
        			mount_component(sketch0, target, anchor);
        
        			insert_hydration(target, t18, anchor);
        
        			insert_hydration(target, p2, anchor);
        
        			append_hydration(p2, em6);
        
        			append_hydration(em6, t19);
        
        			mount_component(dynamic0, em6, null);
        
        			append_hydration(em6, t20);
        
        			insert_hydration(target, t21, anchor);
        
        			insert_hydration(target, p3, anchor);
        
        			insert_hydration(target, t41, anchor);
        
        			mount_component(sketch1, target, anchor);
        
        			insert_hydration(target, t42, anchor);
        
        			insert_hydration(target, p4, anchor);
        
        			append_hydration(p4, em12);
        
        			append_hydration(p4, t46);
        
        			mount_component(dynamic1, p4, null);
        
        			append_hydration(p4, t47);
        
        			insert_hydration(target, t48, anchor);
        
        			insert_hydration(target, h11, anchor);
        
        			insert_hydration(target, t50, anchor);
        
        			insert_hydration(target, ul0, anchor);
        
        			insert_hydration(target, t54, anchor);
        
        			insert_hydration(target, h12, anchor);
        
        			insert_hydration(target, t56, anchor);
        
        			insert_hydration(target, p5, anchor);
        
        			insert_hydration(target, t70, anchor);
        
        			insert_hydration(target, p6, anchor);
        
        			insert_hydration(target, t74, anchor);
        
        			insert_hydration(target, p7, anchor);
        
        			insert_hydration(target, t82, anchor);
        
        			insert_hydration(target, h13, anchor);
        
        			insert_hydration(target, t84, anchor);
        
        			insert_hydration(target, p8, anchor);
        
        			insert_hydration(target, t86, anchor);
        
        			mount_component(sketch2, target, anchor);
        
        			insert_hydration(target, t87, anchor);
        
        			insert_hydration(target, p9, anchor);
        
        			insert_hydration(target, t89, anchor);
        
        			mount_component(equation0, target, anchor);
        
        			mount_component(range0, target, anchor);
        
        			insert_hydration(target, t90, anchor);
        
        			mount_component(equation1, target, anchor);
        
        			insert_hydration(target, t91, anchor);
        
        			insert_hydration(target, p10, anchor);
        
        			insert_hydration(target, t97, anchor);
        
        			mount_component(checkbox0, target, anchor);
        
        			insert_hydration(target, t98, anchor);
        
        			mount_component(equation2, target, anchor);
        
        			insert_hydration(target, t99, anchor);
        
        			if_blocks[current_block_type_index].m(target, anchor);
        
        			insert_hydration(target, t100, anchor);
        
        			mount_component(equation3, target, anchor);
        
        			insert_hydration(target, t101, anchor);
        
        			insert_hydration(target, p11, anchor);
        
        			insert_hydration(target, t111, anchor);
        
        			insert_hydration(target, pre0, anchor);
        
        			html_tag.m(raw0_value, pre0);
        
        			insert_hydration(target, t112, anchor);
        
        			insert_hydration(target, h14, anchor);
        
        			insert_hydration(target, t114, anchor);
        
        			insert_hydration(target, p12, anchor);
        
        			insert_hydration(target, t118, anchor);
        
        			insert_hydration(target, p13, anchor);
        
        			insert_hydration(target, t122, anchor);
        
        			mount_component(sketch3, target, anchor);
        
        			insert_hydration(target, t123, anchor);
        
        			insert_hydration(target, p14, anchor);
        
        			append_hydration(p14, t124);
        
        			mount_component(dynamic2, p14, null);
        
        			append_hydration(p14, t125);
        
        			append_hydration(p14, em23);
        
        			append_hydration(p14, t127);
        
        			insert_hydration(target, t128, anchor);
        
        			insert_hydration(target, p15, anchor);
        
        			append_hydration(p15, t129);
        
        			mount_component(range1, p15, null);
        
        			append_hydration(p15, t130);
        
        			append_hydration(p15, t131);
        
        			append_hydration(p15, t132);
        
        			insert_hydration(target, t133, anchor);
        
        			mount_component(checkbox1, target, anchor);
        
        			insert_hydration(target, t134, anchor);
        
        			mount_component(checkbox2, target, anchor);
        
        			insert_hydration(target, t135, anchor);
        
        			insert_hydration(target, p16, anchor);
        
        			insert_hydration(target, t137, anchor);
        
        			insert_hydration(target, ul1, anchor);
        
        			append_hydration(ul1, li2);
        
        			append_hydration(li2, p17);
        
        			append_hydration(p17, t138);
        
        			append_hydration(p17, span0);
        
        			append_hydration(p17, t140);
        
        			append_hydration(p17, code4);
        
        			append_hydration(p17, t142);
        
        			mount_component(equation4, p17, null);
        
        			append_hydration(p17, t143);
        
        			mount_component(equation5, p17, null);
        
        			append_hydration(p17, t144);
        
        			append_hydration(ul1, t145);
        
        			append_hydration(ul1, li3);
        
        			append_hydration(ul1, t163);
        
        			append_hydration(ul1, li4);
        
        			append_hydration(li4, p19);
        
        			append_hydration(p19, t164);
        
        			append_hydration(p19, span2);
        
        			append_hydration(p19, t166);
        
        			append_hydration(p19, em26);
        
        			append_hydration(p19, t168);
        
        			append_hydration(p19, span3);
        
        			append_hydration(p19, t170);
        
        			mount_component(equation6, p19, null);
        
        			append_hydration(p19, t171);
        
        			insert_hydration(target, t172, anchor);
        
        			insert_hydration(target, pre1, anchor);
        
        			html_tag_1.m(raw1_value, pre1);
        
        			insert_hydration(target, t173, anchor);
        
        			insert_hydration(target, h15, anchor);
        
        			insert_hydration(target, t175, anchor);
        
        			insert_hydration(target, p20, anchor);
        
        			append_hydration(p20, t176);
        
        			append_hydration(p20, strong9);
        
        			append_hydration(p20, t178);
        
        			append_hydration(p20, strong10);
        
        			append_hydration(p20, t180);
        
        			mount_component(equation7, p20, null);
        
        			append_hydration(p20, t181);
        
        			append_hydration(p20, em27);
        
        			append_hydration(p20, t183);
        
        			mount_component(equation8, p20, null);
        
        			append_hydration(p20, t184);
        
        			append_hydration(p20, em28);
        
        			append_hydration(p20, t186);
        
        			append_hydration(p20, strong11);
        
        			append_hydration(p20, t188);
        
        			mount_component(equation9, p20, null);
        
        			append_hydration(p20, t189);
        
        			append_hydration(p20, em29);
        
        			append_hydration(p20, t191);
        
        			insert_hydration(target, t192, anchor);
        
        			insert_hydration(target, h20, anchor);
        
        			insert_hydration(target, t194, anchor);
        
        			insert_hydration(target, p21, anchor);
        
        			insert_hydration(target, t198, anchor);
        
        			insert_hydration(target, ol0, anchor);
        
        			insert_hydration(target, t225, anchor);
        
        			insert_hydration(target, p22, anchor);
        
        			append_hydration(p22, t226);
        
        			append_hydration(p22, strong18);
        
        			append_hydration(p22, t228);
        
        			append_hydration(p22, strong19);
        
        			append_hydration(p22, t230);
        
        			append_hydration(p22, em38);
        
        			append_hydration(p22, t232);
        
        			append_hydration(p22, strong20);
        
        			append_hydration(p22, t234);
        
        			append_hydration(p22, em39);
        
        			append_hydration(p22, t236);
        
        			mount_component(dynamic3, p22, null);
        
        			insert_hydration(target, t237, anchor);
        
        			mount_component(sketch4, target, anchor);
        
        			insert_hydration(target, t238, anchor);
        
        			mount_component(checkbox3, target, anchor);
        
        			insert_hydration(target, t239, anchor);
        
        			insert_hydration(target, p23, anchor);
        
        			append_hydration(p23, t240);
        
        			mount_component(equation10, p23, null);
        
        			append_hydration(p23, t241);
        
        			append_hydration(p23, em40);
        
        			append_hydration(p23, t243);
        
        			append_hydration(p23, em41);
        
        			append_hydration(p23, t245);
        
        			mount_component(equation11, p23, null);
        
        			append_hydration(p23, t246);
        
        			append_hydration(p23, em42);
        
        			append_hydration(p23, t248);
        
        			mount_component(equation12, p23, null);
        
        			append_hydration(p23, t249);
        
        			insert_hydration(target, t250, anchor);
        
        			insert_hydration(target, ol1, anchor);
        
        			append_hydration(ol1, li6);
        
        			append_hydration(li6, strong21);
        
        			append_hydration(li6, t252);
        
        			append_hydration(li6, em43);
        
        			append_hydration(li6, t254);
        
        			mount_component(equation13, li6, null);
        
        			append_hydration(li6, t255);
        
        			insert_hydration(target, t256, anchor);
        
        			insert_hydration(target, p24, anchor);
        
        			append_hydration(p24, t257);
        
        			append_hydration(p24, em44);
        
        			append_hydration(p24, t259);
        
        			append_hydration(p24, strong22);
        
        			append_hydration(p24, t261);
        
        			append_hydration(p24, em45);
        
        			append_hydration(p24, t263);
        
        			mount_component(equation14, p24, null);
        
        			append_hydration(p24, t264);
        
        			mount_component(equation15, p24, null);
        
        			append_hydration(p24, t265);
        
        			append_hydration(p24, code8);
        
        			append_hydration(p24, t267);
        
        			mount_component(dynamic4, p24, null);
        
        			append_hydration(p24, t268);
        
        			insert_hydration(target, t269, anchor);
        
        			mount_component(sketch5, target, anchor);
        
        			insert_hydration(target, t270, anchor);
        
        			insert_hydration(target, ol2, anchor);
        
        			append_hydration(ol2, li7);
        
        			append_hydration(li7, strong23);
        
        			append_hydration(li7, t272);
        
        			append_hydration(li7, em46);
        
        			append_hydration(li7, t274);
        
        			append_hydration(li7, em47);
        
        			append_hydration(li7, t276);
        
        			append_hydration(li7, em48);
        
        			append_hydration(li7, t278);
        
        			mount_component(equation16, li7, null);
        
        			append_hydration(li7, t279);
        
        			mount_component(equation17, li7, null);
        
        			append_hydration(li7, t280);
        
        			insert_hydration(target, t281, anchor);
        
        			insert_hydration(target, h21, anchor);
        
        			insert_hydration(target, t283, anchor);
        
        			insert_hydration(target, p25, anchor);
        
        			insert_hydration(target, t287, anchor);
        
        			insert_hydration(target, p26, anchor);
        
        			insert_hydration(target, t299, anchor);
        
        			mount_component(sketch6, target, anchor);
        
        			insert_hydration(target, t300, anchor);
        
        			insert_hydration(target, p27, anchor);
        
        			append_hydration(p27, em54);
        
        			append_hydration(em54, t301);
        
        			mount_component(dynamic5, em54, null);
        
        			append_hydration(em54, t302);
        
        			mount_component(dynamic6, em54, null);
        
        			append_hydration(em54, t303);
        
        			insert_hydration(target, t304, anchor);
        
        			mount_component(incrementer0, target, anchor);
        
        			insert_hydration(target, t305, anchor);
        
        			mount_component(incrementer1, target, anchor);
        
        			insert_hydration(target, t306, anchor);
        
        			insert_hydration(target, h22, anchor);
        
        			insert_hydration(target, t308, anchor);
        
        			insert_hydration(target, p28, anchor);
        
        			insert_hydration(target, t312, anchor);
        
        			insert_hydration(target, h3, anchor);
        
        			insert_hydration(target, t314, anchor);
        
        			insert_hydration(target, h40, anchor);
        
        			insert_hydration(target, t316, anchor);
        
        			insert_hydration(target, p29, anchor);
        
        			insert_hydration(target, t320, anchor);
        
        			insert_hydration(target, ul2, anchor);
        
        			append_hydration(ul2, li8);
        
        			mount_component(sketch7, li8, null);
        
        			append_hydration(li8, t321);
        
        			append_hydration(li8, b0);
        
        			append_hydration(li8, t323);
        
        			append_hydration(li8, span4);
        
        			append_hydration(li8, t325);
        
        			mount_component(dynamic7, li8, null);
        
        			append_hydration(li8, t326);
        
        			append_hydration(li8, span5);
        
        			append_hydration(li8, t328);
        
        			mount_component(dynamic8, li8, null);
        
        			append_hydration(li8, t329);
        
        			append_hydration(li8, span6);
        
        			append_hydration(li8, t331);
        
        			mount_component(dynamic9, li8, null);
        
        			append_hydration(ul2, t332);
        
        			append_hydration(ul2, li9);
        
        			mount_component(sketch8, li9, null);
        
        			append_hydration(li9, t333);
        
        			append_hydration(li9, b1);
        
        			append_hydration(li9, t335);
        
        			append_hydration(li9, span7);
        
        			append_hydration(li9, t337);
        
        			mount_component(dynamic10, li9, null);
        
        			append_hydration(li9, t338);
        
        			append_hydration(li9, span8);
        
        			append_hydration(li9, t340);
        
        			mount_component(dynamic11, li9, null);
        
        			append_hydration(li9, t341);
        
        			append_hydration(li9, span9);
        
        			append_hydration(li9, t343);
        
        			mount_component(dynamic12, li9, null);
        
        			append_hydration(ul2, t344);
        
        			append_hydration(ul2, li10);
        
        			mount_component(sketch9, li10, null);
        
        			append_hydration(li10, t345);
        
        			append_hydration(li10, b2);
        
        			append_hydration(li10, t347);
        
        			append_hydration(li10, span10);
        
        			append_hydration(li10, t349);
        
        			mount_component(dynamic13, li10, null);
        
        			append_hydration(li10, t350);
        
        			append_hydration(li10, span11);
        
        			append_hydration(li10, t352);
        
        			mount_component(dynamic14, li10, null);
        
        			append_hydration(li10, t353);
        
        			append_hydration(li10, span12);
        
        			append_hydration(li10, t355);
        
        			mount_component(dynamic15, li10, null);
        
        			append_hydration(ul2, t356);
        
        			append_hydration(ul2, li11);
        
        			mount_component(sketch10, li11, null);
        
        			append_hydration(li11, t357);
        
        			append_hydration(li11, b3);
        
        			append_hydration(li11, t359);
        
        			append_hydration(li11, span13);
        
        			append_hydration(li11, t361);
        
        			mount_component(dynamic16, li11, null);
        
        			append_hydration(li11, t362);
        
        			append_hydration(li11, span14);
        
        			append_hydration(li11, t364);
        
        			mount_component(dynamic17, li11, null);
        
        			append_hydration(li11, t365);
        
        			append_hydration(li11, span15);
        
        			append_hydration(li11, t367);
        
        			mount_component(dynamic18, li11, null);
        
        			insert_hydration(target, t368, anchor);
        
        			insert_hydration(target, h41, anchor);
        
        			insert_hydration(target, t370, anchor);
        
        			insert_hydration(target, p30, anchor);
        
        			insert_hydration(target, t374, anchor);
        
        			mount_component(equation18, target, anchor);
        
        			insert_hydration(target, t375, anchor);
        
        			insert_hydration(target, i0, anchor);
        
        			insert_hydration(target, t377, anchor);
        
        			mount_component(range2, target, anchor);
        
        			insert_hydration(target, t378, anchor);
        
        			insert_hydration(target, t379, anchor);
        
        			insert_hydration(target, t380, anchor);
        
        			insert_hydration(target, br0, anchor);
        
        			insert_hydration(target, t381, anchor);
        
        			mount_component(equation19, target, anchor);
        
        			insert_hydration(target, t382, anchor);
        
        			insert_hydration(target, i1, anchor);
        
        			insert_hydration(target, t384, anchor);
        
        			mount_component(range3, target, anchor);
        
        			insert_hydration(target, t385, anchor);
        
        			insert_hydration(target, t386, anchor);
        
        			insert_hydration(target, t387, anchor);
        
        			insert_hydration(target, br1, anchor);
        
        			insert_hydration(target, t388, anchor);
        
        			insert_hydration(target, br2, anchor);
        
        			insert_hydration(target, t389, anchor);
        
        			mount_component(checkbox4, target, anchor);
        
        			insert_hydration(target, t390, anchor);
        
        			insert_hydration(target, br3, anchor);
        
        			insert_hydration(target, t391, anchor);
        
        			insert_hydration(target, p31, anchor);
        
        			append_hydration(p31, strong26);
        
        			append_hydration(p31, t393);
        
        			mount_component(range4, p31, null);
        
        			append_hydration(p31, t394);
        
        			append_hydration(p31, t395);
        
        			append_hydration(p31, t396);
        
        			append_hydration(p31, br4);
        
        			insert_hydration(target, t397, anchor);
        
        			insert_hydration(target, span16, anchor);
        
        			insert_hydration(target, t399, anchor);
        
        			insert_hydration(target, p32, anchor);
        
        			append_hydration(p32, strong27);
        
        			append_hydration(p32, t401);
        
        			mount_component(range5, p32, null);
        
        			append_hydration(p32, t402);
        
        			append_hydration(p32, t403);
        
        			append_hydration(p32, t404);
        
        			append_hydration(p32, br5);
        
        			insert_hydration(target, t405, anchor);
        
        			insert_hydration(target, span17, anchor);
        
        			insert_hydration(target, t407, anchor);
        
        			mount_component(sketch11, target, anchor);
        
        			insert_hydration(target, t408, anchor);
        
        			mount_component(incrementer2, target, anchor);
        
        			insert_hydration(target, t409, anchor);
        
        			mount_component(incrementer3, target, anchor);
        
        			insert_hydration(target, t410, anchor);
        
        			insert_hydration(target, p33, anchor);
        
        			insert_hydration(target, t420, anchor);
        
        			insert_hydration(target, ol3, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			let previous_block_index = current_block_type_index;
        
        			current_block_type_index = select_block_type(ctx);
        
        
        
        			if (current_block_type_index !== previous_block_index) {
        
        				group_outros();
        
        
        
        				transition_out(if_blocks[previous_block_index], 1, 1, () => {
        
        					if_blocks[previous_block_index] = null;
        
        				});
        
        
        
        				check_outros();
        
        				if_block = if_blocks[current_block_type_index];
        
        
        
        				if (!if_block) {
        
        					if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
        
        					if_block.c();
        
        				}
        
        
        
        				transition_in(if_block, 1);
        
        				if_block.m(t100.parentNode, t100);
        
        			}
        
        
        
        			if (!current || dirty[0] & /*$progressGrid*/ 2) set_data(t131, /*$progressGrid*/ ctx[1]);
        
        			const equation7_changes = {};
        
        
        
        			if (dirty[1] & /*$$scope*/ 65536) {
        
        				equation7_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation7.$set(equation7_changes);
        
        			const equation8_changes = {};
        
        
        
        			if (dirty[1] & /*$$scope*/ 65536) {
        
        				equation8_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation8.$set(equation8_changes);
        
        			const equation9_changes = {};
        
        
        
        			if (dirty[1] & /*$$scope*/ 65536) {
        
        				equation9_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation9.$set(equation9_changes);
        
        			const equation10_changes = {};
        
        
        
        			if (dirty[1] & /*$$scope*/ 65536) {
        
        				equation10_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation10.$set(equation10_changes);
        
        			const equation11_changes = {};
        
        
        
        			if (dirty[1] & /*$$scope*/ 65536) {
        
        				equation11_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation11.$set(equation11_changes);
        
        			const equation12_changes = {};
        
        
        
        			if (dirty[1] & /*$$scope*/ 65536) {
        
        				equation12_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation12.$set(equation12_changes);
        
        			const equation13_changes = {};
        
        
        
        			if (dirty[1] & /*$$scope*/ 65536) {
        
        				equation13_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation13.$set(equation13_changes);
        
        			const equation16_changes = {};
        
        
        
        			if (dirty[1] & /*$$scope*/ 65536) {
        
        				equation16_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation16.$set(equation16_changes);
        
        			const equation17_changes = {};
        
        
        
        			if (dirty[1] & /*$$scope*/ 65536) {
        
        				equation17_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation17.$set(equation17_changes);
        
        			if (!current || dirty[0] & /*$addedWater*/ 4) set_data(t379, /*$addedWater*/ ctx[2]);
        
        			if (!current || dirty[0] & /*$humidity*/ 8) set_data(t386, /*$humidity*/ ctx[3]);
        
        			if (!current || dirty[0] & /*$tilesPerRow*/ 16) set_data(t395, /*$tilesPerRow*/ ctx[4]);
        
        			if (!current || dirty[0] & /*$iterationsPerClick*/ 32) set_data(t403, /*$iterationsPerClick*/ ctx[5]);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(sketch0.$$.fragment, local);
        
        			transition_in(dynamic0.$$.fragment, local);
        
        			transition_in(sketch1.$$.fragment, local);
        
        			transition_in(dynamic1.$$.fragment, local);
        
        			transition_in(sketch2.$$.fragment, local);
        
        			transition_in(equation0.$$.fragment, local);
        
        			transition_in(range0.$$.fragment, local);
        
        			transition_in(equation1.$$.fragment, local);
        
        			transition_in(checkbox0.$$.fragment, local);
        
        			transition_in(equation2.$$.fragment, local);
        
        			transition_in(if_block);
        
        			transition_in(equation3.$$.fragment, local);
        
        			transition_in(sketch3.$$.fragment, local);
        
        			transition_in(dynamic2.$$.fragment, local);
        
        			transition_in(range1.$$.fragment, local);
        
        			transition_in(checkbox1.$$.fragment, local);
        
        			transition_in(checkbox2.$$.fragment, local);
        
        			transition_in(equation4.$$.fragment, local);
        
        			transition_in(equation5.$$.fragment, local);
        
        			transition_in(equation6.$$.fragment, local);
        
        			transition_in(equation7.$$.fragment, local);
        
        			transition_in(equation8.$$.fragment, local);
        
        			transition_in(equation9.$$.fragment, local);
        
        			transition_in(dynamic3.$$.fragment, local);
        
        			transition_in(sketch4.$$.fragment, local);
        
        			transition_in(checkbox3.$$.fragment, local);
        
        			transition_in(equation10.$$.fragment, local);
        
        			transition_in(equation11.$$.fragment, local);
        
        			transition_in(equation12.$$.fragment, local);
        
        			transition_in(equation13.$$.fragment, local);
        
        			transition_in(equation14.$$.fragment, local);
        
        			transition_in(equation15.$$.fragment, local);
        
        			transition_in(dynamic4.$$.fragment, local);
        
        			transition_in(sketch5.$$.fragment, local);
        
        			transition_in(equation16.$$.fragment, local);
        
        			transition_in(equation17.$$.fragment, local);
        
        			transition_in(sketch6.$$.fragment, local);
        
        			transition_in(dynamic5.$$.fragment, local);
        
        			transition_in(dynamic6.$$.fragment, local);
        
        			transition_in(incrementer0.$$.fragment, local);
        
        			transition_in(incrementer1.$$.fragment, local);
        
        			transition_in(sketch7.$$.fragment, local);
        
        			transition_in(dynamic7.$$.fragment, local);
        
        			transition_in(dynamic8.$$.fragment, local);
        
        			transition_in(dynamic9.$$.fragment, local);
        
        			transition_in(sketch8.$$.fragment, local);
        
        			transition_in(dynamic10.$$.fragment, local);
        
        			transition_in(dynamic11.$$.fragment, local);
        
        			transition_in(dynamic12.$$.fragment, local);
        
        			transition_in(sketch9.$$.fragment, local);
        
        			transition_in(dynamic13.$$.fragment, local);
        
        			transition_in(dynamic14.$$.fragment, local);
        
        			transition_in(dynamic15.$$.fragment, local);
        
        			transition_in(sketch10.$$.fragment, local);
        
        			transition_in(dynamic16.$$.fragment, local);
        
        			transition_in(dynamic17.$$.fragment, local);
        
        			transition_in(dynamic18.$$.fragment, local);
        
        			transition_in(equation18.$$.fragment, local);
        
        			transition_in(range2.$$.fragment, local);
        
        			transition_in(equation19.$$.fragment, local);
        
        			transition_in(range3.$$.fragment, local);
        
        			transition_in(checkbox4.$$.fragment, local);
        
        			transition_in(range4.$$.fragment, local);
        
        			transition_in(range5.$$.fragment, local);
        
        			transition_in(sketch11.$$.fragment, local);
        
        			transition_in(incrementer2.$$.fragment, local);
        
        			transition_in(incrementer3.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(sketch0.$$.fragment, local);
        
        			transition_out(dynamic0.$$.fragment, local);
        
        			transition_out(sketch1.$$.fragment, local);
        
        			transition_out(dynamic1.$$.fragment, local);
        
        			transition_out(sketch2.$$.fragment, local);
        
        			transition_out(equation0.$$.fragment, local);
        
        			transition_out(range0.$$.fragment, local);
        
        			transition_out(equation1.$$.fragment, local);
        
        			transition_out(checkbox0.$$.fragment, local);
        
        			transition_out(equation2.$$.fragment, local);
        
        			transition_out(if_block);
        
        			transition_out(equation3.$$.fragment, local);
        
        			transition_out(sketch3.$$.fragment, local);
        
        			transition_out(dynamic2.$$.fragment, local);
        
        			transition_out(range1.$$.fragment, local);
        
        			transition_out(checkbox1.$$.fragment, local);
        
        			transition_out(checkbox2.$$.fragment, local);
        
        			transition_out(equation4.$$.fragment, local);
        
        			transition_out(equation5.$$.fragment, local);
        
        			transition_out(equation6.$$.fragment, local);
        
        			transition_out(equation7.$$.fragment, local);
        
        			transition_out(equation8.$$.fragment, local);
        
        			transition_out(equation9.$$.fragment, local);
        
        			transition_out(dynamic3.$$.fragment, local);
        
        			transition_out(sketch4.$$.fragment, local);
        
        			transition_out(checkbox3.$$.fragment, local);
        
        			transition_out(equation10.$$.fragment, local);
        
        			transition_out(equation11.$$.fragment, local);
        
        			transition_out(equation12.$$.fragment, local);
        
        			transition_out(equation13.$$.fragment, local);
        
        			transition_out(equation14.$$.fragment, local);
        
        			transition_out(equation15.$$.fragment, local);
        
        			transition_out(dynamic4.$$.fragment, local);
        
        			transition_out(sketch5.$$.fragment, local);
        
        			transition_out(equation16.$$.fragment, local);
        
        			transition_out(equation17.$$.fragment, local);
        
        			transition_out(sketch6.$$.fragment, local);
        
        			transition_out(dynamic5.$$.fragment, local);
        
        			transition_out(dynamic6.$$.fragment, local);
        
        			transition_out(incrementer0.$$.fragment, local);
        
        			transition_out(incrementer1.$$.fragment, local);
        
        			transition_out(sketch7.$$.fragment, local);
        
        			transition_out(dynamic7.$$.fragment, local);
        
        			transition_out(dynamic8.$$.fragment, local);
        
        			transition_out(dynamic9.$$.fragment, local);
        
        			transition_out(sketch8.$$.fragment, local);
        
        			transition_out(dynamic10.$$.fragment, local);
        
        			transition_out(dynamic11.$$.fragment, local);
        
        			transition_out(dynamic12.$$.fragment, local);
        
        			transition_out(sketch9.$$.fragment, local);
        
        			transition_out(dynamic13.$$.fragment, local);
        
        			transition_out(dynamic14.$$.fragment, local);
        
        			transition_out(dynamic15.$$.fragment, local);
        
        			transition_out(sketch10.$$.fragment, local);
        
        			transition_out(dynamic16.$$.fragment, local);
        
        			transition_out(dynamic17.$$.fragment, local);
        
        			transition_out(dynamic18.$$.fragment, local);
        
        			transition_out(equation18.$$.fragment, local);
        
        			transition_out(range2.$$.fragment, local);
        
        			transition_out(equation19.$$.fragment, local);
        
        			transition_out(range3.$$.fragment, local);
        
        			transition_out(checkbox4.$$.fragment, local);
        
        			transition_out(range4.$$.fragment, local);
        
        			transition_out(range5.$$.fragment, local);
        
        			transition_out(sketch11.$$.fragment, local);
        
        			transition_out(incrementer2.$$.fragment, local);
        
        			transition_out(incrementer3.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(h10);
        
        				detach(t1);
        
        				detach(p0);
        
        				detach(t3);
        
        				detach(p1);
        
        				detach(t17);
        
        				detach(t18);
        
        				detach(p2);
        
        				detach(t21);
        
        				detach(p3);
        
        				detach(t41);
        
        				detach(t42);
        
        				detach(p4);
        
        				detach(t48);
        
        				detach(h11);
        
        				detach(t50);
        
        				detach(ul0);
        
        				detach(t54);
        
        				detach(h12);
        
        				detach(t56);
        
        				detach(p5);
        
        				detach(t70);
        
        				detach(p6);
        
        				detach(t74);
        
        				detach(p7);
        
        				detach(t82);
        
        				detach(h13);
        
        				detach(t84);
        
        				detach(p8);
        
        				detach(t86);
        
        				detach(t87);
        
        				detach(p9);
        
        				detach(t89);
        
        				detach(t90);
        
        				detach(t91);
        
        				detach(p10);
        
        				detach(t97);
        
        				detach(t98);
        
        				detach(t99);
        
        				detach(t100);
        
        				detach(t101);
        
        				detach(p11);
        
        				detach(t111);
        
        				detach(pre0);
        
        				detach(t112);
        
        				detach(h14);
        
        				detach(t114);
        
        				detach(p12);
        
        				detach(t118);
        
        				detach(p13);
        
        				detach(t122);
        
        				detach(t123);
        
        				detach(p14);
        
        				detach(t128);
        
        				detach(p15);
        
        				detach(t133);
        
        				detach(t134);
        
        				detach(t135);
        
        				detach(p16);
        
        				detach(t137);
        
        				detach(ul1);
        
        				detach(t172);
        
        				detach(pre1);
        
        				detach(t173);
        
        				detach(h15);
        
        				detach(t175);
        
        				detach(p20);
        
        				detach(t192);
        
        				detach(h20);
        
        				detach(t194);
        
        				detach(p21);
        
        				detach(t198);
        
        				detach(ol0);
        
        				detach(t225);
        
        				detach(p22);
        
        				detach(t237);
        
        				detach(t238);
        
        				detach(t239);
        
        				detach(p23);
        
        				detach(t250);
        
        				detach(ol1);
        
        				detach(t256);
        
        				detach(p24);
        
        				detach(t269);
        
        				detach(t270);
        
        				detach(ol2);
        
        				detach(t281);
        
        				detach(h21);
        
        				detach(t283);
        
        				detach(p25);
        
        				detach(t287);
        
        				detach(p26);
        
        				detach(t299);
        
        				detach(t300);
        
        				detach(p27);
        
        				detach(t304);
        
        				detach(t305);
        
        				detach(t306);
        
        				detach(h22);
        
        				detach(t308);
        
        				detach(p28);
        
        				detach(t312);
        
        				detach(h3);
        
        				detach(t314);
        
        				detach(h40);
        
        				detach(t316);
        
        				detach(p29);
        
        				detach(t320);
        
        				detach(ul2);
        
        				detach(t368);
        
        				detach(h41);
        
        				detach(t370);
        
        				detach(p30);
        
        				detach(t374);
        
        				detach(t375);
        
        				detach(i0);
        
        				detach(t377);
        
        				detach(t378);
        
        				detach(t379);
        
        				detach(t380);
        
        				detach(br0);
        
        				detach(t381);
        
        				detach(t382);
        
        				detach(i1);
        
        				detach(t384);
        
        				detach(t385);
        
        				detach(t386);
        
        				detach(t387);
        
        				detach(br1);
        
        				detach(t388);
        
        				detach(br2);
        
        				detach(t389);
        
        				detach(t390);
        
        				detach(br3);
        
        				detach(t391);
        
        				detach(p31);
        
        				detach(t397);
        
        				detach(span16);
        
        				detach(t399);
        
        				detach(p32);
        
        				detach(t405);
        
        				detach(span17);
        
        				detach(t407);
        
        				detach(t408);
        
        				detach(t409);
        
        				detach(t410);
        
        				detach(p33);
        
        				detach(t420);
        
        				detach(ol3);
        
        			}
        
        
        
        			destroy_component(sketch0, detaching);
        
        			destroy_component(dynamic0);
        
        			destroy_component(sketch1, detaching);
        
        			destroy_component(dynamic1);
        
        			destroy_component(sketch2, detaching);
        
        			destroy_component(equation0, detaching);
        
        			destroy_component(range0, detaching);
        
        			destroy_component(equation1, detaching);
        
        			destroy_component(checkbox0, detaching);
        
        			destroy_component(equation2, detaching);
        
        			if_blocks[current_block_type_index].d(detaching);
        
        			destroy_component(equation3, detaching);
        
        			destroy_component(sketch3, detaching);
        
        			destroy_component(dynamic2);
        
        			destroy_component(range1);
        
        			destroy_component(checkbox1, detaching);
        
        			destroy_component(checkbox2, detaching);
        
        			destroy_component(equation4);
        
        			destroy_component(equation5);
        
        			destroy_component(equation6);
        
        			destroy_component(equation7);
        
        			destroy_component(equation8);
        
        			destroy_component(equation9);
        
        			destroy_component(dynamic3);
        
        			destroy_component(sketch4, detaching);
        
        			destroy_component(checkbox3, detaching);
        
        			destroy_component(equation10);
        
        			destroy_component(equation11);
        
        			destroy_component(equation12);
        
        			destroy_component(equation13);
        
        			destroy_component(equation14);
        
        			destroy_component(equation15);
        
        			destroy_component(dynamic4);
        
        			destroy_component(sketch5, detaching);
        
        			destroy_component(equation16);
        
        			destroy_component(equation17);
        
        			destroy_component(sketch6, detaching);
        
        			destroy_component(dynamic5);
        
        			destroy_component(dynamic6);
        
        			destroy_component(incrementer0, detaching);
        
        			destroy_component(incrementer1, detaching);
        
        			destroy_component(sketch7);
        
        			destroy_component(dynamic7);
        
        			destroy_component(dynamic8);
        
        			destroy_component(dynamic9);
        
        			destroy_component(sketch8);
        
        			destroy_component(dynamic10);
        
        			destroy_component(dynamic11);
        
        			destroy_component(dynamic12);
        
        			destroy_component(sketch9);
        
        			destroy_component(dynamic13);
        
        			destroy_component(dynamic14);
        
        			destroy_component(dynamic15);
        
        			destroy_component(sketch10);
        
        			destroy_component(dynamic16);
        
        			destroy_component(dynamic17);
        
        			destroy_component(dynamic18);
        
        			destroy_component(equation18, detaching);
        
        			destroy_component(range2, detaching);
        
        			destroy_component(equation19, detaching);
        
        			destroy_component(range3, detaching);
        
        			destroy_component(checkbox4, detaching);
        
        			destroy_component(range4);
        
        			destroy_component(range5);
        
        			destroy_component(sketch11, detaching);
        
        			destroy_component(incrementer2, detaching);
        
        			destroy_component(incrementer3, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        function instance$1($$self, $$props, $$invalidate) {
        
        	let $showCalculationDetails;
        
        	let $progressGrid;
        
        	let $addedWater;
        
        	let $humidity;
        
        	let $tilesPerRow;
        
        	let $iterationsPerClick;
        
        	let kochIterations = writable(1);
        
        
        
        	// keplerCircles.js
        
        	let progressAngle = writable(0);
        
        
        
        	let circleLayers = writable(1);
        
        
        
        	// hexagonalGrid.js
        
        	let progressGrid = writable(20);
        
        
        
        	component_subscribe($$self, progressGrid, value => $$invalidate(1, $progressGrid = value));
        
        	let toggleMeasures = writable(true);
        
        	let toggleHexaGrid = writable(true);
        
        	let hexaGridTilesPerRow = writable(20);
        
        
        
        	// fieldsDistinction.js
        
        	let displayColours = writable(true);
        
        
        
        	let maxHumidity = writable(1.20);
        
        	let randomGrid = writable(1);
        
        
        
        	// waterDiffusion.js
        
        	let randomGridBis = writable(0);
        
        
        
        	let maxHumidityBis = writable(1.0);
        
        
        
        	// gameOfLife.js
        
        	let gol_iterate = writable(0);
        
        
        
        	let gol_reset = writable(0);
        
        	let nbBirth = writable(3);
        
        	let nbStay = writable(2);
        
        
        
        	// finalSimulation.js
        
        	let resetSimulation = writable(0);
        
        
        
        	let humidity = writable(0.5);
        
        	component_subscribe($$self, humidity, value => $$invalidate(3, $humidity = value));
        
        	let addedWater = writable(0.001);
        
        	component_subscribe($$self, addedWater, value => $$invalidate(2, $addedWater = value));
        
        	let iterationsPerClick = writable(5);
        
        	component_subscribe($$self, iterationsPerClick, value => $$invalidate(5, $iterationsPerClick = value));
        
        	let tilesPerRow = writable(55);
        
        	component_subscribe($$self, tilesPerRow, value => $$invalidate(4, $tilesPerRow = value));
        
        	let displayTiles = writable(false);
        
        	let color_gf_red = writable(255);
        
        	let color_gf_green = writable(255);
        
        	let color_gf_blue = writable(255);
        
        	let color_ga_red = writable(2);
        
        	let color_ga_green = writable(2);
        
        	let color_ga_blue = writable(98);
        
        	let color_ase_red = writable(2);
        
        	let color_ase_green = writable(2);
        
        	let color_ase_blue = writable(98);
        
        	let color_asa_red = writable(255);
        
        	let color_asa_green = writable(255);
        
        	let color_asa_blue = writable(255);
        
        	let iterate = writable(0);
        
        
        
        	// Flow controls
        
        	let showCalculationDetails = writable(false);
        
        
        
        	component_subscribe($$self, showCalculationDetails, value => $$invalidate(0, $showCalculationDetails = value));
        
        
        
        	// Equations. (Pour une raison que j'ignore, le parseur s'emmêle les pinceaux lorsqu'il y a des {} inline. ) 
        
        	let eqn = `\\cos(\\frac{2}{12}) \\times 2(\\textcolor{#DE8500}{hauteur}) = \\frac{3}{2} \\times \\textcolor{#006CBD}{côté}`;
        
        
        
        	let angle1 = `-\\frac{2\\pi}{12}`;
        
        	let angle2 = `\\frac{2\\pi}{12}`;
        
        	let oneHalf = `\\frac{1}{2}`;
        
        	let oneTwelfth = `\\frac{1}{12}`;
        
        
        
        	return [
        
        		$showCalculationDetails,
        
        		$progressGrid,
        
        		$addedWater,
        
        		$humidity,
        
        		$tilesPerRow,
        
        		$iterationsPerClick,
        
        		kochIterations,
        
        		progressAngle,
        
        		circleLayers,
        
        		progressGrid,
        
        		toggleMeasures,
        
        		toggleHexaGrid,
        
        		hexaGridTilesPerRow,
        
        		displayColours,
        
        		maxHumidity,
        
        		randomGrid,
        
        		randomGridBis,
        
        		maxHumidityBis,
        
        		gol_iterate,
        
        		gol_reset,
        
        		nbBirth,
        
        		nbStay,
        
        		resetSimulation,
        
        		humidity,
        
        		addedWater,
        
        		iterationsPerClick,
        
        		tilesPerRow,
        
        		displayTiles,
        
        		color_gf_red,
        
        		color_gf_green,
        
        		color_gf_blue,
        
        		color_ga_red,
        
        		color_ga_green,
        
        		color_ga_blue,
        
        		color_ase_red,
        
        		color_ase_green,
        
        		color_ase_blue,
        
        		color_asa_red,
        
        		color_asa_green,
        
        		color_asa_blue,
        
        		iterate,
        
        		showCalculationDetails,
        
        		eqn,
        
        		angle1,
        
        		angle2,
        
        		oneHalf,
        
        		oneTwelfth
        
        	];
        
        }
        
        
        
        class Snowflakes extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance$1, create_fragment$1, safe_not_equal, {}, null, [-1, -1]);
        
        	}
        
        }
        
        
        
        function colorPicker(p5) {
        
            p5.setup = () => {
        
          
        
            };
        
            
        
            p5.draw = () => {
        
              p5.stroke(0);
        
              p5.strokeWeight(2);
        
              p5.fill(this.red, this.green, this.blue);
        
              p5.rect(0, 0, p5.width, p5.height);
        
            };
        
          }
        
        
        
        function trigonometricCircle (p5) {
        
        
        
            let radius;
        
            let fSize = 16;
        
            let cosx, sinx;
        
        
        
            p5.preload = () => {
        
                p5.params = {
        
                    mathFont: p5.loadFont("/fonts/latinmodern-math.otf"),
        
                    previousCos: this.cosinusx,
        
                    previousSin: this.sinusx
        
                };
        
            };
        
        
        
            p5.setup = () => {
        
                radius = p5.width / 2 - p5.width / 6;
        
            };
        
        
        
            function formatedFraction(pos, a, b, tsize, color) {
        
                p5.push();
        
                p5.stroke(color);
        
                p5.fill(color);
        
                p5.textSize(tsize);
        
                p5.textFont(p5.params.mathFont);
        
        
        
                let margin = 7;
        
                let _twa = p5.textWidth("" + a);
        
                let _twb = p5.textWidth("" + b);
        
        
        
                let larger = _twa > _twb ? a : b;
        
                let smaller = _twa < _twb ? a : b;
        
        
        
                p5.strokeWeight(1);
        
                p5.line(pos.x, pos.y, pos.x + (larger == a ? _twa : _twb) + margin, pos.y);
        
                p5.strokeWeight(1);
        
                p5.noStroke();
        
        
        
                smaller == a ? p5.text(a, pos.x + (_twb + margin) / 2 - _twa / 2, pos.y - tsize / 2) : p5.text(a, pos.x + margin / 2, pos.y - tsize / 2);
        
                smaller == b ? p5.text(b, pos.x + (_twa + margin) / 2 - _twb / 2, pos.y + tsize + 2) : p5.text(b, pos.x + (_twb + margin) / 2 - _twb / 2, pos.y + tsize + 2);
        
        
        
                p5.pop();
        
        
        
                return (larger == a ? _twa : _twb) + margin;
        
            }
        
        
        
            function pgcd(a, b) {
        
                if (b) {
        
                    return pgcd(b, a % b);
        
                } else {
        
                    return Math.abs(a);
        
                }
        
            }
        
        
        
            p5.draw = () => {
        
                p5.ellipseMode(p5.CENTER);
        
                p5.background(20);
        
                p5.stroke(255);
        
                p5.noFill();
        
                p5.ellipse(p5.width / 2, p5.height / 2, 2 * radius, 2 * radius);
        
        
        
                if (p5.params.previousCos != this.cosinusx) {
        
                    cosx = this.cosinusx;
        
                    sinx = this.computed_sinusx;
        
                    p5.params.previousCos = this.cosinusx;
        
                }
        
                else if (p5.params.previousSin != this.sinusx) {
        
                    sinx = this.sinusx;
        
                    cosx = this.computed_cosinusx;
        
                    p5.params.previousSin = this.sinusx;
        
                }
        
        
        
                p5.translate(p5.width / 2, p5.height / 2);
        
        
        
                for(let i = 0; i < 12; i++) {
        
                    p5.push();
        
                    p5.rotate((i) * -p5.TWO_PI / 12);
        
                    p5.translate(radius, 0);
        
                    p5.drawingContext.setLineDash([5, 3]);
        
                    p5.stroke(100);
        
                    p5.line(0, 0, -radius, 0);
        
                    p5.drawingContext.setLineDash([]);
        
                    p5.rotate(p5.HALF_PI);
        
                    if (i == 0) {
        
                        p5.noStroke();
        
                        p5.fill(255);
        
                        p5.textSize(fSize);
        
                        p5.textFont(p5.params.mathFont);
        
                        p5.text("0", -6, -10);
        
                    }
        
                    else if (i == 6) {
        
                        p5.noStroke();
        
                        p5.fill(255);
        
                        p5.textSize(fSize);
        
                        p5.textFont(p5.params.mathFont);
        
                        p5.text("π", -6, -10);
        
                    }
        
                    else {
        
                        let d = pgcd(12, i * 2);
        
                        let num = i * 2 / d;
        
                        let dem = 12 / d;
        
        
        
                        formatedFraction(p5.createVector(-13, -30), (num != 1 ? num : "") + "π", dem, fSize, p5.color(255));
        
                    }
        
                    p5.pop();
        
                }
        
        
        
                p5.line(0, radius, 0, -radius);
        
                p5.line(radius, 0, -radius, 0);
        
        
        
                p5.strokeWeight(3);
        
                p5.stroke(255, 0, 0);
        
                p5.line(0, 0, cosx * radius, 0);
        
                p5.drawingContext.setLineDash([5, 5]);
        
                p5.line(0, -sinx * radius, cosx * radius, -sinx * radius);
        
                p5.drawingContext.setLineDash([]);
        
                p5.stroke(0, 0, 255);
        
                p5.line(0, 0, 0, -sinx * radius);
        
                p5.drawingContext.setLineDash([5, 5]);
        
                p5.line(cosx * radius, 0, cosx * radius, -sinx * radius);
        
                p5.drawingContext.setLineDash([]);
        
                p5.strokeWeight(1);
        
        
        
                p5.push();
        
                p5.noFill();
        
                p5.stroke(0, 255, 0);
        
                p5.strokeWeight(4);
        
                p5.arc(0, 0, radius * 2, radius * 2, p5.acos(cosx) * -sinx / p5.abs(-sinx), 0);
        
                p5.stroke(255);
        
                p5.fill(255);
        
                p5.ellipse(radius * cosx, radius * -sinx, 10, 10);
        
                p5.pop();
        
            };
        
        }
        
        
        
        function simpleVector(p5) {
        
            let tilesPerRow = 20;
        
            let tileSize;
        
            let sf = 1;
        
          
        
            // for performance
        
            let pDirection;
        
            let pMagnitude;
        
            let p_displayTrig;
        
          
        
            p5.setup = () => {
        
              tileSize = p5.width / tilesPerRow;
        
              drawSketch();
        
            };
        
          
        
            const drawSketch = () => {
        
              sf = this.magnitude;
        
              p5.background(254, 248, 226);
        
              drawGrid();
        
              p5.translate(p5.width / 2, p5.height / 2);
        
              arrow(p5.createVector(p5.cos(this.direction * -p5.PI), p5.sin(this.direction * -p5.PI)));
        
            };
        
          
        
            function setLineDash(list) {
        
              p5.drawingContext.setLineDash(list);
        
            }
        
          
        
            function drawGrid() {
        
              p5.push();
        
                p5.stroke(0, 100);
        
                p5.strokeCap(p5.ROUND);
        
          
        
                p5.translate(p5.width / 2, (p5.height / 2));
        
                p5.line(0, -(p5.height / 2), 0, (p5.height / 2));
        
                p5.line(-p5.width / 2, 0, p5.width / 2, 0);
        
          
        
                setLineDash([3, 2]);
        
                p5.strokeWeight(0.5);
        
          
        
                for(let k = 0; k < 2; k++) {
        
                  let maxSize = k % 2 == 0 ? p5.width / (tilesPerRow / 2) : p5.width / (tilesPerRow / 4);
        
                  // Positive this.direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                  for(let i = 1; i < maxSize; i++) {
        
                    k % 2 == 0 ?
        
                      p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                      p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                  }
        
          
        
                  // Negative this.direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                  for(let i = -1; i > -maxSize; i--) {
        
                    k % 2 == 0 ?
        
                      p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                      p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                  }
        
                }
        
              p5.pop();
        
            }
        
          
        
            const drawTrigLines = (vector) => {
        
              p5.push();
        
                p5.strokeWeight(2);
        
                p5.stroke(0, 0, 255); // x
        
                p5.line(0, vector.y, vector.x, vector.y);
        
                p5.stroke(255, 0, 0); // y
        
                p5.line(vector.x, 0, vector.x, vector.y);
        
          
        
                p5.noStroke();
        
                p5.fill(128, 128);
        
          
        
                //console.log(vector.heading() + " " + angle);
        
                if(p5.abs(vector.heading()) > 0.01) {
        
                  if(this.direction > 0)
        
                    p5.arc(0, 0, vector.mag() / 2, vector.mag() / 2, -this.direction * p5.PI, 0);
        
                  else
        
                    p5.arc(0, 0, vector.mag() / 2, vector.mag() / 2, 0, -this.direction * p5.PI);
        
                }
        
          
        
          
        
              p5.pop();
        
            };
        
          
        
            const arrow = (vector) => {
        
              vector = vector.mult(sf * tileSize);
        
              if(this.displayTrig)
        
                drawTrigLines(vector);
        
          
        
              let len = vector.mag();
        
              let tipAngle = p5.PI / 8;
        
              let tipRatio = 1 / 5.0;
        
              let tipSize = tipRatio * p5.log(0.8 * sf + 1) * tileSize * 1.8;
        
          
        
              p5.push();
        
                p5.strokeWeight(3);
        
                p5.strokeCap(p5.ROUND);
        
                p5.fill(3);
        
                p5.rotate(vector.heading());
        
                p5.line(0, 0, len - tipSize, 0);
        
          
        
                p5.beginShape();
        
                  p5.vertex(len, 0);
        
                  p5.vertex(len - tipSize * p5.cos(-tipAngle), p5.sin(-tipAngle) * tipSize);
        
                  p5.vertex(len - tipSize  * p5.cos(tipAngle), p5.sin(tipAngle) * tipSize);
        
                p5.endShape(p5.CLOSE);
        
              p5.pop();
        
            };
        
          
        
            p5.draw = () => {
        
              if(p_displayTrig != this.displayTrig || pDirection != this.direction || pMagnitude != this.magnitude) {
        
                drawSketch();
        
                pDirection = this.direction;
        
                pMagnitude = this.magnitude;
        
                p_displayTrig = this.displayTrig;
        
              }
        
            };
        
          }
        
        
        
        function simpleVectorCoords(p5) {
        
            let tilesPerRow = 20;
        
            let tileSize;
        
            let sf = 1;
        
        
        
            // for performance
        
            let p_posx;
        
            let p_posy;
        
            let p_displayTrig;
        
          
        
            p5.setup = () => {
        
              tileSize = p5.width / tilesPerRow;
        
              drawSketch();
        
            };
        
          
        
            const drawSketch = () => {
        
              p5.background(254, 248, 226);
        
              drawGrid();
        
              p5.translate(p5.width / 2, p5.height / 2);
        
              arrow(p5.createVector(this.posx * tileSize, -this.posy * tileSize));
        
            };
        
          
        
            const setLineDash = (list) => {
        
              p5.drawingContext.setLineDash(list);
        
            };
        
          
        
            const drawGrid = () => {
        
              p5.push();
        
                p5.stroke(0, 100);
        
                p5.strokeCap(p5.ROUND);
        
          
        
                p5.translate(p5.width / 2, (p5.height / 2));
        
                p5.line(0, -(p5.height / 2), 0, (p5.height / 2));
        
                p5.line(-p5.width / 2, 0, p5.width / 2, 0);
        
          
        
                setLineDash([3, 2]);
        
                p5.strokeWeight(0.5);
        
          
        
                for(let k = 0; k < 2; k++) {
        
                  let maxSize = k % 2 == 0 ? p5.width / (tilesPerRow / 2) : p5.width / (tilesPerRow / 4);
        
                  // Positive this.direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                  for(let i = 1; i < maxSize; i++) {
        
                    k % 2 == 0 ?
        
                      p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                      p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                  }
        
          
        
                  // Negative this.direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                  for(let i = -1; i > -maxSize; i--) {
        
                    k % 2 == 0 ?
        
                      p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                      p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                  }
        
                }
        
              p5.pop();
        
            };
        
          
        
            const drawTrigLines = (vector) => {
        
              p5.push();
        
                p5.strokeWeight(2);
        
                p5.stroke(0, 0, 255); // x
        
                p5.line(0, vector.y, vector.x, vector.y);
        
                p5.stroke(255, 0, 0); // y
        
                p5.line(vector.x, 0, vector.x, vector.y);
        
          
        
                p5.noStroke();
        
                p5.fill(128, 128);
        
          
        
                if(p5.abs(vector.heading()) > 0.01) {
        
                  if(vector.heading() < 0)
        
                    p5.arc(0, 0, vector.mag() / 2, vector.mag() / 2, vector.heading(), 0);
        
                  else
        
                    p5.arc(0, 0, vector.mag() / 2, vector.mag() / 2, 0, vector.heading());
        
                }
        
          
        
              p5.pop();
        
            };
        
          
        
            const arrow = (vector) => {
        
              if(this.displayTrig)
        
                drawTrigLines(vector);
        
          
        
              let len = vector.mag();
        
              sf = len / tileSize;
        
              let tipAngle = p5.PI / 8;
        
              let tipRatio = 1 / 5.0;
        
              let tipSize = tipRatio * p5.log(0.8 * sf + 1) * tileSize * 1.8;
        
          
        
              p5.push();
        
                p5.strokeWeight(3);
        
                p5.strokeCap(p5.ROUND);
        
                p5.fill(3);
        
                p5.rotate(vector.heading());
        
                p5.line(0, 0, len - tipSize, 0);
        
          
        
                p5.beginShape();
        
                  p5.vertex(len, 0);
        
                  p5.vertex(len - tipSize * p5.cos(-tipAngle), p5.sin(-tipAngle) * tipSize);
        
                  p5.vertex(len - tipSize  * p5.cos(tipAngle), p5.sin(tipAngle) * tipSize);
        
                p5.endShape(p5.CLOSE);
        
              p5.pop();
        
            };
        
          
        
            p5.draw = () => {
        
              if(p_displayTrig != this.displayTrig || p_posx != this.posx || p_posy != this.posy) {
        
                drawSketch();
        
                p_posx = this.posx;
        
                p_posy = this.posy;
        
                p_displayTrig = this.displayTrig;
        
              }
        
            };
        
          }
        
        
        
        function vectorAddition (p5) {
        
            let tilesPerRow = 20;
        
            let tileSize;
        
            let sf = 1;
        
        
        
            // for performance
        
            let p_posx;
        
            let p_posy;
        
            let p_posx_two;
        
            let p_posy_two;
        
            let p_tip_to_tail;
        
        
        
            p5.setup = () => {
        
                tileSize =  p5.width / tilesPerRow;
        
                drawSketch();
        
            };
        
        
        
            const drawSketch = () => {
        
                p5.background(254, 248, 226);
        
                drawGrid();
        
                p5.translate(p5.width / 2, p5.height / 2);
        
                p5.stroke(0, 255, 0);
        
                p5.fill(0, 255, 0);
        
                arrow(p5.createVector((this.posx + this.posx_two) * tileSize, -(this.posy + this.posy_two) * tileSize));
        
                p5.push();
        
                if (this.tipToTail)
        
                    p5.translate(this.posx * tileSize, -this.posy * tileSize);
        
                p5.stroke(255, 0, 0);
        
                p5.fill(255, 0, 0);
        
                arrow(p5.createVector(this.posx_two * tileSize, -this.posy_two * tileSize));
        
                p5.pop();
        
                p5.stroke(0, 0, 255);
        
                p5.fill(0, 0, 255);
        
                arrow(p5.createVector(this.posx * tileSize, -this.posy * tileSize));
        
            };
        
        
        
            function setLineDash(list) {
        
                p5.drawingContext.setLineDash(list);
        
            }
        
        
        
            const drawGrid = () => {
        
                p5.push();
        
                p5.stroke(0, 100);
        
                p5.strokeCap(p5.ROUND);
        
        
        
                p5.translate(p5.width / 2, (p5.height / 2));
        
                p5.line(0, -(p5.height / 2), 0, (p5.height / 2));
        
                p5.line(-p5.width / 2, 0, p5.width / 2, 0);
        
        
        
                setLineDash([3, 2]);
        
                p5.strokeWeight(0.5);
        
        
        
                for (let k = 0; k < 2; k++) {
        
                    let maxSize = k % 2 == 0 ? p5.width / (tilesPerRow / 2) : p5.width / (tilesPerRow / 4);
        
                    // Positive direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                    for (let i = 1; i < maxSize; i++) {
        
                        k % 2 == 0 ?
        
                            p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                            p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                    }
        
        
        
                    // Negative direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                    for (let i = -1; i > -maxSize; i--) {
        
                        k % 2 == 0 ?
        
                            p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                            p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                    }
        
                }
        
                p5.pop();
        
            };
        
        
        
            const arrow = (vector) => {
        
                let len = vector.mag();
        
                sf = len / tileSize;
        
                let tipAngle = p5.PI / 8;
        
                let tipRatio = 1 / 5.0;
        
                //let tipSize = sf < thresold ? tipRatio * (sf * tileSize) * (p5.log(len) + 1) : tipRatio * (thresold * tileSize) * 1.2;
        
                let tipSize = tipRatio * p5.log(0.8 * sf + 1) * tileSize * 1.8;
        
                //console.log("log :" + (p5.log(10 * sf + 1)));
        
        
        
                p5.push();
        
                p5.strokeWeight(3);
        
                p5.strokeCap(p5.ROUND);
        
                p5.rotate(vector.heading());
        
                p5.line(0, 0, len - tipSize, 0);
        
        
        
                p5.beginShape();
        
                p5.vertex(len, 0);
        
                p5.vertex(len - tipSize * p5.cos(-tipAngle), p5.sin(-tipAngle) * tipSize);
        
                p5.vertex(len - tipSize * p5.cos(tipAngle), p5.sin(tipAngle) * tipSize);
        
                p5.endShape(p5.CLOSE);
        
                p5.pop();
        
            };
        
        
        
            p5.draw = () => {
        
                if (p_posx != this.posx || p_posy != this.posy || p_posx_two != this.posx_two || p_posy_two != this.posy_two || p_tip_to_tail != this.tipToTail) {
        
                    drawSketch();
        
                    p_posx = this.posx;
        
                    p_posy = this.posy;
        
                    p_posx_two = this.posx_two;
        
                    p_posy_two = this.posy_two;
        
                    p_tip_to_tail = this.tipToTail;
        
                }
        
            };
        
        
        
        }
        
        
        
        function scalarMultiplication (p5) {
        
            let tilesPerRow = 20;
        
            let tileSize;
        
            let sf = 1;
        
        
        
            // for performance
        
            let p_posx;
        
            let p_posy;
        
            let p_scalar;
        
            let p_tip_to_tail;
        
        
        
            p5.setup = () => {
        
                tileSize = p5.width / tilesPerRow;
        
                drawSketch();
        
            };
        
        
        
            const drawSketch = () => {
        
                //p5.background(254, 244, 214);
        
                p5.background(254, 248, 226);
        
                drawGrid();
        
                p5.translate(p5.width / 2, p5.height / 2);
        
                p5.stroke(p5.map(p5.abs(this.scalar), 0, 5, 0, 255), p5.map(p5.abs(this.scalar), 0, 5, 255, 0), 0);
        
                p5.fill(p5.map(p5.abs(this.scalar), 0, 5, 0, 255), p5.map(p5.abs(this.scalar), 0, 5, 255, 0), 0);
        
                arrow(p5.createVector(this.posx * this.scalar * tileSize, -this.posy * this.scalar * tileSize));
        
                //p5.noStroke();
        
                //p5.ellipse(p5.mouseX, p5.mouseY, 10, 10);
        
            };
        
        
        
            function setLineDash(list) {
        
                p5.drawingContext.setLineDash(list);
        
            }
        
        
        
            const drawGrid = () => {
        
                p5.push();
        
                p5.stroke(0, 100);
        
                p5.strokeCap(p5.ROUND);
        
        
        
                p5.translate(p5.width / 2, (p5.height / 2));
        
                p5.line(0, -(p5.height / 2), 0, (p5.height / 2));
        
                p5.line(-p5.width / 2, 0, p5.width / 2, 0);
        
        
        
                setLineDash([3, 2]);
        
                p5.strokeWeight(0.5);
        
        
        
                for (let k = 0; k < 2; k++) {
        
                    let maxSize = k % 2 == 0 ? p5.width / (tilesPerRow / 2) : p5.width / (tilesPerRow / 4);
        
                    // Positive direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                    for (let i = 1; i < maxSize; i++) {
        
                        k % 2 == 0 ?
        
                            p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                            p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                    }
        
        
        
                    // Negative direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                    for (let i = -1; i > -maxSize; i--) {
        
                        k % 2 == 0 ?
        
                            p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                            p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                    }
        
                }
        
                p5.pop();
        
            };
        
        
        
            const arrow = (vector) => {
        
                //if(displayTrig)
        
                //drawTrigLines(vector);
        
        
        
                let len = vector.mag();
        
                sf = len / tileSize;
        
                let tipAngle = p5.PI / 8;
        
                let tipRatio = 1 / 5.0;
        
                //let tipSize = sf < thresold ? tipRatio * (sf * tileSize) * (p5.log(len) + 1) : tipRatio * (thresold * tileSize) * 1.2;
        
                let tipSize = tipRatio * p5.log(0.8 * sf + 1) * tileSize * 1.8;
        
                //console.log("log :" + (p5.log(10 * sf + 1)));
        
        
        
                p5.push();
        
                p5.strokeWeight(3);
        
                p5.strokeCap(p5.ROUND);
        
                p5.rotate(vector.heading());
        
                p5.line(0, 0, len - tipSize, 0);
        
        
        
                p5.beginShape();
        
                p5.vertex(len, 0);
        
                p5.vertex(len - tipSize * p5.cos(-tipAngle), p5.sin(-tipAngle) * tipSize);
        
                p5.vertex(len - tipSize * p5.cos(tipAngle), p5.sin(tipAngle) * tipSize);
        
                p5.endShape(p5.CLOSE);
        
                p5.pop();
        
            };
        
        
        
            p5.draw = () => {
        
                if (p_posx != this.posx || p_posy != this.posy || p_scalar != this.scalar || p_tip_to_tail != this.p_tip_to_tail) {
        
                    drawSketch();
        
                    p_posx = this.posx;
        
                    p_posy = this.posy;
        
                    p_scalar = this.scalar;
        
                    p_tip_to_tail = this.p_tip_to_tail;
        
                }
        
            };
        
        }
        
        
        
        // function (.*?)\((.*?)\)
        
        // const $1 = ($2) =>
        
        
        
        function dotProduct(p5) {
        
            let tilesPerRow = 20;
        
            let tileSize;
        
            let sf = 1;
        
          
        
            // for performance
        
            let p_posx;
        
            let p_posy;
        
            let p_posx_two;
        
            let p_posy_two;
        
          
        
            p5.setup = () => {
        
              tileSize = p5.width / tilesPerRow;
        
              drawSketch();
        
            };
        
          
        
            const projectedVector = (a, b) => {
        
              let x = a.mag() * p5.cos(a.angleBetween(b)) * p5.cos(b.heading());
        
              let y = a.mag() * p5.cos(a.angleBetween(b)) * p5.sin(b.heading());
        
          
        
              let projection = p5.createVector(x, y);
        
              //console.log("Projection de a = ("+a.x+", "+a.y+") sur b = ("+b.x+", "+b.y+") = ("+projection.x+", "+projection.y+")" + projection);
        
              return projection;
        
            };
        
          
        
            const drawSketch = () => {
        
              let v1 = p5.createVector(this.posx * tileSize, -this.posy * tileSize);
        
              let v2 = p5.createVector(this.posx_two * tileSize, -this.posy_two * tileSize);
        
              let projected = projectedVector(v1, v2);
        
              p5.background(254, 248, 226);
        
              drawGrid();
        
              p5.push();
        
              p5.translate(p5.width / 2, p5.height / 2);
        
          
        
              if(v1.x * v2.x + v1.y * v2.y < 0) {
        
                p5.stroke(14, 62, 218);
        
                p5.fill(14, 62, 218, 70);
        
              }
        
              else {
        
                p5.stroke(244, 115, 185);
        
                p5.fill(244, 115, 185, 70);
        
              }
        
              // Draw rect
        
              p5.beginShape();
        
              p5.vertex(0, 0);
        
              p5.vertex(v2.x, v2.y);
        
              p5.vertex(v2.x + projected.mag() * p5.cos(p5.HALF_PI + projected.heading()), v2.y + projected.mag() * p5.sin(p5.HALF_PI + projected.heading()));
        
              p5.vertex(projected.mag() * p5.cos(p5.HALF_PI + projected.heading()), projected.mag() * p5.sin(p5.HALF_PI + projected.heading()));
        
              p5.endShape(p5.CLOSE);
        
          
        
              // Draw projection line
        
              //p5.stroke(255, 201, 88);
        
              p5.strokeWeight(2);
        
          
        
              p5.stroke(p5.lerpColor(p5.color(0, 255, 0), p5.color(0, 0, 255), 0.5));
        
              setLineDash([5, 5]);
        
              p5.line(v1.x, v1.y, projected.x, projected.y);
        
              setLineDash([0, 0]);
        
          
        
              p5.stroke(255, 0, 0);
        
              p5.fill(255, 0, 0);
        
              arrow(v2);
        
              p5.stroke(0, 0, 255);
        
              p5.fill(0, 0, 255);
        
              arrow(v1);
        
              p5.stroke(0, 255, 0);
        
              p5.fill(0, 255, 0);
        
              arrow(projected);
        
              p5.pop();
        
              //p5.noStroke();
        
              //p5.ellipse(p5.mouseX, p5.mouseY, 10, 10);
        
            };
        
          
        
          
        
            const setLineDash = (list) => {
        
              p5.drawingContext.setLineDash(list);
        
            };
        
          
        
            const drawGrid = () => {
        
              p5.push();
        
                p5.stroke(0, 100);
        
                p5.strokeCap(p5.ROUND);
        
          
        
                p5.translate(p5.width / 2, (p5.height / 2));
        
                p5.line(0, -(p5.height / 2), 0, (p5.height / 2));
        
                p5.line(-p5.width / 2, 0, p5.width / 2, 0);
        
          
        
                setLineDash([3, 2]);
        
                p5.strokeWeight(0.5);
        
          
        
                for(let k = 0; k < 2; k++) {
        
                  let maxSize = k % 2 == 0 ? p5.width / (tilesPerRow / 2) : p5.width / (tilesPerRow / 4);
        
                  // Positive direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                  for(let i = 1; i < maxSize; i++) {
        
                    k % 2 == 0 ?
        
                      p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                      p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                  }
        
          
        
                  // Negative direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                  for(let i = -1; i > -maxSize; i--) {
        
                    k % 2 == 0 ?
        
                      p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                      p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                  }
        
                }
        
              p5.pop();
        
            };
        
          
        
            const arrow = (vector) => {
        
              //if(displayTrig)
        
                //drawTrigLines(vector);
        
              let len = vector.mag();
        
              sf = len / tileSize;
        
              let tipAngle = p5.PI / 8;
        
              let tipRatio = 1 / 5.0;
        
              //let tipSize = sf < thresold ? tipRatio * (sf * tileSize) * (p5.log(len) + 1) : tipRatio * (thresold * tileSize) * 1.2;
        
              let tipSize = tipRatio * p5.log(0.8 * sf + 1) * tileSize * 1.8;
        
              //console.log("log :" + (p5.log(10 * sf + 1)));
        
          
        
              p5.push();
        
                p5.strokeWeight(3);
        
                p5.strokeCap(p5.ROUND);
        
                p5.rotate(vector.heading());
        
                p5.line(0, 0, len - tipSize, 0);
        
          
        
                p5.beginShape();
        
                  p5.vertex(len, 0);
        
                  p5.vertex(len - tipSize * p5.cos(-tipAngle), p5.sin(-tipAngle) * tipSize);
        
                  p5.vertex(len - tipSize  * p5.cos(tipAngle), p5.sin(tipAngle) * tipSize);
        
                p5.endShape(p5.CLOSE);
        
              p5.pop();
        
            };
        
          
        
            p5.draw = () => {
        
              if(p_posx != this.posx || p_posy != this.posy || p_posx_two != this.posx_two || p_posy_two != this.posy_two) {
        
                drawSketch();
        
                p_posx = this.posx;
        
                p_posy = this.posy;
        
                p_posx_two = this.posx_two;
        
                p_posy_two = this.posy_two;
        
              }
        
            };
        
          }
        
        
        
        function simpleDerivatives (p5) {
        
            let dx;
        
            let tilesPerRow;
        
            let tileSize;
        
        
        
            p5.setup = () => {
        
                p5.background(0);
        
                tilesPerRow = 20;
        
            };
        
        
        
            const setLineDash = (list) => {
        
                p5.drawingContext.setLineDash(list);
        
            };
        
        
        
            const drawSketch = () => {
        
                p5.background(254, 248, 226);
        
                drawGrid();
        
                p5.translate(p5.width / 2, p5.height / 2);
        
                let col = p5.color(p5.map(this.derivative_h, 0, 5, 0, 255), p5.map(this.derivative_h, 0, 5, 255, 0), 0);
        
        
        
                let activeFunction;
        
                switch (this.selectedFunction) {
        
                    case "f1":
        
                        activeFunction = func;
        
                        break;
        
                    case "f2":
        
                        activeFunction = func2;
        
                        break;
        
                    case "f3":
        
                        activeFunction = func3;
        
                        break;
        
                }
        
        
        
                drawFunction(activeFunction, 0);
        
                drawDerivative(activeFunction, dx, col);
        
            };
        
        
        
            const drawGrid = () => {
        
                p5.push();
        
                p5.stroke(0, 100);
        
                p5.strokeCap(p5.ROUND);
        
        
        
                p5.translate(p5.width / 2, (p5.height / 2));
        
                p5.line(0, -(p5.height / 2), 0, (p5.height / 2));
        
                p5.line(-p5.width / 2, 0, p5.width / 2, 0);
        
        
        
                setLineDash([3, 2]);
        
                p5.strokeWeight(0.5);
        
        
        
                for (let k = 0; k < 2; k++) {
        
                    let maxSize = k % 2 == 0 ? p5.width / (tilesPerRow / 2) : p5.width / (tilesPerRow / 4);
        
                    // Positive direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                    for (let i = 1; i < maxSize; i++) {
        
                        k % 2 == 0 ?
        
                            p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                            p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                    }
        
        
        
                    // Negative direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                    for (let i = -1; i > -maxSize; i--) {
        
                        k % 2 == 0 ?
        
                            p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                            p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                    }
        
                }
        
                p5.pop();
        
            };
        
        
        
            const drawDerivative = (f, dx, color) => {
        
                let pointedX = (p5.mouseX - p5.width / 2) / tileSize;
        
                let a = pointedX;
        
                let b = pointedX + dx;
        
                let c = (f(b) - f(a)) / (b - a);
        
                let derivative = x => f(a) + c * (x - a);
        
        
        
                color = p5.color(p5.map(c, -4, 4, 255, 0), p5.map(c, -4, 4, 0, 255), 0);
        
        
        
                drawFunction(derivative, color);
        
                p5.push();
        
                p5.fill(0);
        
                p5.stroke(7, 131, 131);
        
                p5.strokeWeight(3);
        
                if (f(b) / f(a) > 0) {
        
                    if (p5.abs(f(b)) < p5.abs(f(a)))
        
                        p5.line(a * tileSize, -f(b) * tileSize, b * tileSize, -f(b) * tileSize);
        
                    else
        
                        p5.line(a * tileSize, -f(a) * tileSize, b * tileSize, -f(a) * tileSize);
        
                }
        
                else
        
                    p5.line(a * tileSize, 0, b * tileSize, 0);
        
                p5.fill(0);
        
        
        
                setLineDash([3, 3]);
        
                p5.strokeWeight(2);
        
                p5.stroke(244, 0, 185);
        
                p5.line(a * tileSize, 0, a * tileSize, -f(a) * tileSize);
        
                p5.stroke(14, 4, 218);
        
                p5.line(b * tileSize, 0, b * tileSize, -f(b) * tileSize);
        
        
        
                p5.stroke(0);
        
                p5.strokeWeight(1);
        
                p5.ellipse(a * tileSize, -f(a) * tileSize, 6, 6);
        
                p5.ellipse(b * tileSize, -f(b) * tileSize, 6, 6);
        
                p5.pop();
        
            };
        
        
        
        
        
            const drawFunction = (f, color, drawCircle) => {
        
                p5.push();
        
                p5.stroke(color);
        
                p5.noFill();
        
                p5.strokeWeight(2);
        
                p5.beginShape();
        
                for (let i = -tileSize / 2; i < tileSize / 2; i += 0.01) {
        
                    p5.curveVertex(i * tileSize, -f(i) * tileSize);
        
                }
        
                p5.endShape();
        
                p5.fill(color);
        
        
        
                if (drawCircle)
        
                    p5.ellipse(mouseX - p5.width / 2, -f((p5.mouseX - p5.width / 2) / tileSize) * tileSize, 5, 5);
        
                p5.pop();
        
            };
        
        
        
            let func = x => (p5.pow(x - 3, 3) / 10 + p5.pow(x - 3, 2) + x - 8) * 0.5;
        
            let func2 = x => p5.cos(x);
        
            let func3 = x => 3 * p5.cos(x);
        
        
        
            p5.draw = () => {
        
                dx = this.derivative_h;
        
                tileSize = p5.width / tilesPerRow;
        
                drawSketch();
        
            };
        
        
        
        }
        
        
        
        function gradient (p5) {
        
            let tilesPerRow;
        
            let tileSize;
        
        
        
            p5.setup = () => {
        
                p5.background(0);
        
                tilesPerRow = 2 * this.gradient_bounds;
        
                tileSize = p5.width / tilesPerRow;
        
            };
        
        
        
            const drawGrad2D = (f) => {
        
                p5.push();
        
        
        
                p5.stroke(58, 176, 255);
        
                p5.beginShape(p5.POINTS);
        
                for (let k = 0; k < p5.pow(this.resolutionFunction, 2); k++) {
        
                    let x = p5.floor(k / this.resolutionFunction) * tilesPerRow / this.resolutionFunction - tilesPerRow / 2;
        
                    let y = p5.round(k % this.resolutionFunction) * tilesPerRow / this.resolutionFunction - tilesPerRow / 2;
        
                    let z = f(x, y);
        
                    p5.vertex(x * tileSize, z * tileSize, y * tileSize);
        
                }
        
                p5.endShape();
        
                p5.pop();
        
            };
        
        
        
            const getGradient = (x, y) => {
        
                return p5.createVector(p5.cos(x) * p5.cos(y), -p5.sin(x) * p5.sin(y))
        
            };
        
        
        
            const drawGrid = () => {
        
                p5.push();
        
                p5.strokeWeight(4);
        
                p5.stroke(255, 0, 0);
        
                p5.line(0, -p5.height / 2, 0, 0, p5.height / 2, 0);
        
                p5.stroke(0, 255, 0);
        
                p5.line(-p5.height / 2, 0, 0, p5.height / 2, 0, 0);
        
                p5.stroke(0, 0, 255);
        
                p5.line(0, 0, -p5.height / 2, 0, 0, p5.height / 2);
        
                p5.noFill();
        
                p5.stroke(0);
        
                p5.strokeWeight(2);
        
                p5.box(p5.width);
        
                p5.strokeWeight(0.5);
        
        
        
                for (let i = -tilesPerRow / 2; i < tilesPerRow / 2; i++) {
        
                    // x
        
                    for (let j = -tilesPerRow / 2; j < tilesPerRow / 2; j++) {
        
                        // y
        
                        for (let k = -tilesPerRow / 2; k < tilesPerRow / 2; k++) {
        
                            // z
        
                            p5.push();
        
                            p5.stroke('rgba(' + p5.ceil(p5.map(i, -tilesPerRow / 2, tilesPerRow / 2, 0, 255)) + ',' + p5.ceil(p5.map(j, -tilesPerRow / 2, tilesPerRow / 2, 255, 0)) + ',' + p5.ceil(p5.map(k, -tilesPerRow / 2, tilesPerRow / 2, 0, 255)) + ',0.2)');
        
                            p5.translate(i * tileSize + tileSize / 2, j * tileSize + tileSize / 2, + k * tileSize + tileSize / 2);
        
                            p5.box(tileSize);
        
                            p5.pop();
        
                        }
        
                    }
        
                }
        
                p5.pop();
        
            };
        
        
        
            p5.draw = () => {
        
                p5.orbitControl();
        
                p5.background(254, 248, 226);
        
        
        
                // DRAW GRADIENT ARROW
        
                let ty = p5.sin(this.x_grad_arrow) * p5.cos(this.y_grad_arrow);
        
                let posGrad = getGradient(this.x_grad_arrow, this.y_grad_arrow).mult(tileSize);
        
        
        
                p5.push();
        
                p5.stroke(0);
        
                p5.strokeWeight(5);
        
                p5.translate(this.x_grad_arrow * tileSize, ty * tileSize, this.y_grad_arrow * tileSize);
        
                p5.line(0, 0, 0, posGrad.x, 0, posGrad.y);
        
                p5.pop();
        
        
        
                p5.push();
        
                p5.fill(0);
        
                p5.noStroke();
        
                p5.translate(this.x_grad_arrow * tileSize + posGrad.x, ty * tileSize, this.y_grad_arrow * tileSize + posGrad.y);
        
                p5.rotateY(-posGrad.heading() - p5.HALF_PI);
        
                p5.rotateX(-p5.HALF_PI);
        
                p5.cone(10 * posGrad.mag() * 0.01, 50 * posGrad.mag() * 0.01, 10, 10);
        
                p5.pop();
        
        
        
                if (this.drawGrid_grad)
        
                    drawGrid();
        
        
        
                p5.stroke(255, 0, 0);
        
                p5.strokeWeight(3);
        
        
        
                drawGrad2D((x, y) => p5.constrain(p5.sin(x) * p5.cos(y), -tilesPerRow / 2, tilesPerRow / 2));
        
            };
        
        }
        
        
        
        function vectorField(p5) 
        
        {
        
            let size;
        
            let tilesPerRow = 20;
        
            let tileSize;
        
            let sf = 2.5;
        
            let pA;
        
            let pB;
        
            let pF;
        
        
        
            let needToRefresh = true;
        
        
        
            p5.setup = () => {
        
                size = p5.width;
        
                tileSize = size / tilesPerRow;
        
            };
        
          
        
            const setLineDash = (list) => {
        
              p5.drawingContext.setLineDash(list);
        
            };
        
          
        
            const drawVectorField = () => {
        
              for(let i = 1; i <= tilesPerRow; i++) {
        
                for(let j = 1; j <= tilesPerRow; j++) {
        
                  p5.push();
        
                    p5.translate(i * tileSize - tileSize / 2, j * tileSize - tileSize / 2);
        
                    let vector;
        
                    if(this.selectedField == "f1")
        
                      vector = p5.createVector(this.param_a * (-j + tilesPerRow / 2 + 0.5), this.param_b * (i - tilesPerRow / 2 - 0.5));
        
                    else if(this.selectedField == "f2")
        
                      vector = p5.createVector(this.param_a * (i - tilesPerRow / 2 - 0.5), this.param_b * (j - tilesPerRow / 2 - 0.5));
        
                    arrow(vector);
        
                  p5.pop();
        
                }
        
              }
        
            };
        
          
        
            const drawGrid = () => {
        
              p5.push();
        
                p5.stroke(0, 100);
        
                p5.strokeCap(p5.ROUND);
        
          
        
                p5.translate(p5.width / 2, (p5.height / 2));
        
                p5.line(0, -(p5.height / 2), 0, (p5.height / 2));
        
                p5.line(-p5.width / 2, 0, p5.width / 2, 0);
        
          
        
                setLineDash([3, 2]);
        
                p5.strokeWeight(0.5);
        
          
        
                for(let k = 0; k < 2; k++) {
        
                  let maxSize = k % 2 == 0 ? p5.width / (tilesPerRow / 2) : p5.width / (tilesPerRow / 4);
        
                  // Positive direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                  for(let i = 1; i < maxSize; i++) {
        
                    k % 2 == 0 ?
        
                      p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                      p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                  }
        
          
        
                  // Negative direction (2 loops to avoid mismatch between the first 2 plain lignes and the dotted lines)
        
                  for(let i = -1; i > -maxSize; i--) {
        
                    k % 2 == 0 ?
        
                      p5.line(i * tileSize, -(p5.height / 2), i * tileSize, (p5.height / 2)) :
        
                      p5.line(-p5.width / 2, i * tileSize, p5.width / 2, i * tileSize);
        
                  }
        
                }
        
              p5.pop();
        
            };
        
          
        
            const arrow = (vector) => {
        
              vector = vector.mult(sf);
        
              let len = vector.mag();
        
              let tipAngle = p5.PI / 8;
        
              let tipRatio = 1 / 5.0;
        
              let tipSize = tipRatio * len;
        
          
        
              p5.push();
        
                p5.strokeWeight(3);
        
                p5.strokeCap(p5.ROUND);
        
                p5.fill(3);
        
                p5.rotate(vector.heading());
        
                p5.line(0, 0, len, 0);
        
          
        
                p5.beginShape();
        
                  p5.vertex(len, 0);
        
                  p5.vertex(len - tipSize * p5.cos(-tipAngle), p5.sin(-tipAngle) * tipSize);
        
                  p5.vertex(len - tipSize  * p5.cos(tipAngle), p5.sin(tipAngle) * tipSize);
        
                p5.endShape(p5.CLOSE);
        
              p5.pop();
        
            };
        
          
        
            const dottedCircle = (cx, cy, r, l) => {
        
              p5.push();
        
              p5.noFill();
        
              for(let i = 0; i < p5.TWO_PI * r / l; i++) {
        
                if(i % 2 == 0)
        
                  p5.arc(cx, cy, 2 * r, 2 * r, i * (l / r), (i + 1) * (l / r));
        
              }
        
              p5.pop();
        
            };
        
          
        
            p5.draw = () => {
        
              if(this.param_a != pA || this.param_b != pB || this.selectedField != pF) {
        
                p5.background(254, 248, 226);
        
                drawGrid();
        
                drawVectorField();
        
          
        
                pA = this.param_a;
        
                pB = this.param_b;
        
                pF = this.selectedField;
        
              }
        
          
        
              if(p5.mouseX > 0 && p5.mouseX < p5.width && p5.mouseY > 0 && p5.mouseY < p5.height) {
        
                needToRefresh = true;
        
                drawGrid();
        
                drawVectorField();
        
                p5.fill(255, 200);
        
                p5.rect(0, 0, p5.width, p5.height);
        
                p5.translate(p5.width / 2, p5.height / 2);
        
          
        
                switch(this.fieldHoverType) {
        
                  case "vector" :
        
                    let vector;
        
                    if(this.selectedField == "f1")
        
                      vector = p5.createVector(this.param_a * (-p5.mouseY / tileSize + tilesPerRow / 2), this.param_b * (p5.mouseX / tileSize - tilesPerRow / 2));
        
                    else if(this.selectedField == "f2")
        
                      vector = p5.createVector(this.param_a * (p5.mouseX / tileSize - tilesPerRow / 2), this.param_b * (p5.mouseY / tileSize - tilesPerRow / 2));
        
          
        
                    arrow(vector);
        
                  break;
        
          
        
                  case "divergence" :
        
                    let divergence = this.selectedField == "f2" ? (this.param_b + this.param_a) : 0;
        
          
        
                    for(let i = 0; i < tilesPerRow * 2; i++)
        
                      dottedCircle(p5.mouseX - p5.width / 2, p5.mouseY - p5.height / 2, i * tileSize, 5);
        
          
        
                    p5.push();
        
                      p5.noStroke();
        
          
        
                      p5.fill(divergence < 0 ? p5.color(0, 0, 200) : p5.color(200, 0, 0));
        
                      p5.ellipse(p5.mouseX - p5.width / 2, p5.mouseY - p5.height / 2, divergence * tileSize, divergence * tileSize);
        
                    p5.pop();
        
                    //console.log(divergence);
        
                  break;
        
          
        
                  case "curl" :
        
                    let curlZ = this.selectedField == "f1" ? (this.param_b + this.param_a) : 0;
        
                    console.log(curlZ);
        
                    let radius = (curlZ * tileSize) / 2;
        
                    let position_x = p5.mouseX - p5.width / 2;
        
                    let position_y =  p5.mouseY - p5.height / 2;
        
          
        
                    for(let i = 0; i < tilesPerRow * 2; i++)
        
                      dottedCircle(position_x, position_y, i * tileSize, 5);
        
          
        
                    p5.push();
        
                      p5.stroke(curlZ < 0 ? p5.color(0, 0, 200) : p5.color(200, 0, 0));
        
                      p5.strokeWeight(2);
        
                      p5.noFill();
        
          
        
                      p5.ellipse(position_x, position_y, 2 * radius, 2 * radius);
        
                      for(let i = 0; i < p5.TWO_PI; i+= p5.PI / 3) {
        
                        p5.push();
        
                          p5.translate(position_x, position_y);
        
                          p5.rotate(i);
        
                          p5.translate(0, -radius);
        
                          p5.fill(curlZ < 0 ? p5.color(0, 0, 200) : p5.color(200, 0, 0));
        
          
        
                          if(curlZ > 0)
        
                            p5.triangle(0, 0, -radius / 8, -radius / 8, -radius / 8, radius / 8);
        
                          else
        
                            p5.triangle(0, 0, radius / 8, -radius / 8, radius / 8, radius / 8);
        
          
        
                        p5.pop();
        
                      }
        
                    p5.pop();
        
          
        
                    console.log(curlZ);
        
                  break;
        
                }
        
              } else if(needToRefresh) {
        
                // Refresh the field if the mouse leaves the sketch window
        
                needToRefresh = false;
        
                p5.background(254, 248, 226);
        
                drawGrid();
        
                drawVectorField();
        
              }
        
            };
        
          
        
          }
        
        
        
        function helmhotzHodge(p5) {
        
            let N = 18; // Number of tiles
        
            let baseHeight;
        
            let marginHeight = 50;
        
            let tileSize;
        
            let dt = 1;
        
            let margin;
        
        
        
            let velocityX, velocityY;
        
        
        
            // Irrotational field (after project routine)
        
            let velocityX_irr, velocityY_irr;
        
        
        
            // Gradient field
        
            let gradField;
        
        
        
            let latinModernMath;
        
        
        
            p5.preload = () => {
        
                latinModernMath = p5.loadFont('/fonts/latinmodern-math.otf');
        
            };
        
        
        
            p5.setup = () => {
        
              p5.background(255);
        
              baseHeight = p5.height;
        
              tileSize = (baseHeight - marginHeight) / (N + 2);
        
              margin = 2 * tileSize;
        
        
        
              velocityX = new Array((N + 2) * (N + 2));
        
              velocityY = new Array((N + 2) * (N + 2));
        
        
        
              initGrid(velocityX);
        
              initGrid(velocityY);
        
        
        
              p5.textSize(tileSize);
        
              p5.textFont(latinModernMath);
        
        
        
              step();
        
            };
        
        
        
            const index = (i, j) => {
        
              return i + j * (N + 2);
        
            };
        
        
        
            const duplicateGrid = (grid) => {
        
              let newGrid = new Array(grid.length);
        
        
        
              for(let i = 0; i < newGrid.length; i++)
        
                newGrid[i] = grid[i];
        
        
        
              return newGrid;
        
            };
        
        
        
            const setBounds = (grid, type) => {
        
              for(let i = 0; i < N + 2; i++) {
        
                for(let j = 0; j < N + 2; j++) {
        
                  if(i == 0 || i == N + 1) {
        
                    if(type == 'v')
        
                      grid[index(i, j)] = 0;
        
                    if(type == 'u')
        
                      grid[index(i, j)] = i == 0 ? 0.5 : -0.5;
        
                  }
        
        
        
                  if(j == 0 || j == N + 1) {
        
                    if(type == 'u')
        
                      grid[index(i, j)] = 0;
        
                    if(type == 'v')
        
                      grid[index(i, j)] = j == 0 ? 0.5 : -0.5;
        
                  }
        
                }
        
              }
        
        
        
              grid[index(0, 0)] = 0.5 * (grid[index(1, 0)] + grid[index(0, 1)]);
        
              grid[index(0, N + 1)] = 0.5 * (grid[index(1, N + 1)] + grid[index(0, N)]);
        
              grid[index(N + 1, 0)] = 0.5 * (grid[index(N, 0)] + grid[index(N + 1, 1)]);
        
              grid[index(N + 1, N + 1)] = 0.5 * (grid[index(N, N + 1)] + grid[index(N + 1, N)]);
        
        
        
            };
        
        
        
            const initGrid = (grid) => {
        
              // Init velocity
        
              for(let i = 0; i < N + 2; i++) {
        
                for(let j = 0; j < N + 2; j++) {
        
                  //grid[index(i, j)] = p5.noise(i * 0.1, j * 0.1) * 10;
        
                  grid[index(i, j)] = p5.random(-1, 1) * 10;
        
                }
        
              }
        
            };
        
        
        
            const addForce = (x, y, amount, timeStep, grid) => {
        
              grid[index(x, y)] += amount * timeStep;
        
            };
        
        
        
            //   const projection = (velocityX, velocityY, velocityX_irr, velocityY_irr, gradX, gradY) =>
        
            const projection = (vX, vY) => {
        
              let divergence = new Array(vX.length).fill(0);
        
              let p = new Array(vX.length).fill(0);
        
              let h = 1.0;
        
        
        
              for(let i = 1; i <= N; i++) {
        
                for(let j = 1; j <= N; j++) {
        
                  divergence[index(i, j)] = -0.5 * h * (vX[index(i + 1, j)] - vX[index(i - 1, j)] + vY[index(i, j + 1)] - vY[index(i, j - 1)]); // check
        
        
        
                  p[index(i, j)] = 0;
        
                }
        
              }
        
        
        
              for(let k = 0; k < 20; k++) {
        
                for(let i = 1; i <= N; i++) {
        
                  for(let j = 1; j <= N; j++) {
        
                    let inter = (divergence[index(i, j)] + p[index(i - 1, j)] + p[index(i + 1, j)] + p[index(i, j - 1)] + p[index(i, j + 1)]);
        
                    p[index(i, j)] = 1/4.0 * inter; // Laplacien discret ?
        
                  }
        
                }
        
              }
        
        
        
        
        
              // The gradient field is returned by the function
        
              let gradField = new Array(p.length).fill(0);
        
        
        
              for(let i = 1; i <= N; i++) {
        
                for(let j = 1; j <= N; j++) {
        
                   vX[index(i, j)] -= 0.5 * (p[index(i + 1, j)] - p[index(i - 1, j)]) / h;
        
                   vY[index(i, j)] -= 0.5 * (p[index(i, j + 1)] - p[index(i, j - 1)]) / h;
        
        
        
                  gradField[index(i, j)] = p5.createVector(0.5 * (p[index(i + 1, j)] - p[index(i - 1, j)]), 0.5 * (p[index(i, j + 1)] - p[index(i, j - 1)]));
        
                }
        
              }
        
        
        
              setBounds(vX, 'u');
        
              setBounds(vY, 'v');
        
        
        
              return gradField;
        
            };
        
        
        
            const diffusion = (grid, timeStep, d, type) => {
        
              let previousGrid = duplicateGrid(grid);
        
              let iterations = 20;
        
        
        
              for(let k = 0; k < iterations; k++) {
        
                for(let i = 1; i <= N; i++) {
        
                  for(let j = 1; j <= N; j++) {
        
                    grid[index(i, j)] = (previousGrid[index(i, j)] + (d * timeStep) * (grid[index(i - 1, j)] + grid[index(i + 1, j)] + grid[index(i, j - 1)] + grid[index(i, j + 1)])) / (1 + 4 * d * timeStep);
        
                  }
        
                }
        
              }
        
        
        
              setBounds(grid, type);
        
            };
        
        
        
            const advection = (vx, vy, timeStep, verbose, grid, type) => {
        
              let previousGrid = duplicateGrid(grid);
        
        
        
              for(let i = 1; i <= N; i++) {
        
                for(let j = 1; j <= N; j++) {
        
                  let x = p5.constrain(i - timeStep * vx[index(i, j)], 0.5, N + 0.5);
        
                  let y = p5.constrain(j - timeStep * vy[index(i, j)], 0.5, N + 0.5);
        
        
        
                  let pi = p5.int(x);
        
                  let pj = p5.int(y);
        
        
        
                  // Coefficients d'interpolation
        
                  let s1 = x - pi;
        
                  let s0 = 1 - s1;
        
        
        
                  let t1 = y - pj;
        
                  let t0 = 1 - t1;
        
        
        
        
        
                  grid[index(i, j)] = s0 * (t0 * previousGrid[index(pi, pj)] + t1 * previousGrid[index(pi, pj + 1)])
        
                                      + s1 * (t0 * previousGrid[index(pi + 1, pj)] + t1 * previousGrid[index(pi + 1, pj + 1)]);
        
                }
        
              }
        
        
        
              setBounds(grid, type);
        
            };
        
        
        
            const drawArrow = (cx, cy, len, angle, col) => {
        
              p5.push();
        
                p5.translate(cx, cy);
        
                p5.rotate(angle);
        
                p5.stroke(col);
        
                p5.strokeWeight(1);
        
                p5.line(0, 0, len, 0);
        
                p5.fill(col);
        
        
        
                p5.triangle(len, 0, len - (len / 4.0), -len / 12.0, len - (len / 4.0), len / 12.0);
        
              p5.pop();
        
            };
        
        
        
            p5.draw = () => {
        
                p5.background(255);
        
        
        
                p5.translate((p5.width / 2) - (tileSize * (N + 2) * 3 + margin * 2) / 2, 0);
        
                step();
        
                drawField(velocityX, velocityY, -1, "champ arbitraire");
        
        
        
                p5.translate(tileSize * (N + 2) + margin, 0);
        
        
        
                let equalSymb = "=";
        
                let equalSymbTs = p5.textWidth(equalSymb);
        
                let addSymb = "+";
        
                let addSymbTs = p5.textWidth(addSymb);
        
        
        
                p5.text(equalSymb, - margin / 2 - equalSymbTs / 4, tileSize / 2 * (N + 2));
        
                drawField(velocityX_irr, velocityY_irr, -1, "champ solénoïdal");
        
        
        
                p5.translate(tileSize * (N + 2) + margin, 0);
        
        
        
                p5.text(addSymb, - margin / 2 - addSymbTs / 4, tileSize / 2 * (N + 2));
        
                drawField(0, 0, gradField, "champ irrotationnel");
        
            };
        
        
        
            const step = () => {
        
              // FORCE TO ADD
        
              let npv = p5.createVector(p5.mouseX - p5.pmouseX, p5.mouseY - p5.pmouseY).mult(2);
        
              let tileX = p5.int(p5.constrain(p5.mouseX, 0, p5.width) / p5.float(p5.height) * (N + 2));
        
              let tileY = p5.int(p5.constrain(p5.mouseY, 0, tileSize * (N + 2)) / p5.float(p5.height) * (N + 2));
        
        
        
              //console.log(npv);
        
        
        
              // UPDATE VELOCITY FIELD
        
              addForce(tileX, tileY, npv.x, dt, velocityX);
        
              addForce(tileX, tileY, npv.y, dt, velocityY);
        
        
        
              velocityX_irr = duplicateGrid(velocityX);
        
              velocityY_irr = duplicateGrid(velocityY);
        
        
        
              diffusion(velocityX, dt, 0.001, 'u');
        
              diffusion(velocityY, dt, 0.001, 'v');
        
        
        
              diffusion(velocityX_irr, dt, 0.001, 'u');
        
              diffusion(velocityY_irr, dt, 0.001, 'v');
        
        
        
              //projection(velocityX, velocityY);
        
              projection(velocityX_irr, velocityY_irr);
        
        
        
              advection(velocityX, velocityY, dt, false, velocityX, 'u');
        
              advection(velocityX, velocityY, dt, false, velocityY, 'v');
        
        
        
              advection(velocityX_irr, velocityY_irr, dt, false, velocityX_irr, 'u');
        
              advection(velocityX_irr, velocityY_irr, dt, false, velocityY_irr, 'v');
        
        
        
              gradField = projection(velocityX_irr, velocityY_irr);
        
            };
        
        
        
            const drawField = (grid_x, grid_y, vectorField, label) => {
        
              for(let i = 1; i <= N; i++) {
        
                for(let j = 1; j <= N; j++) {
        
                  let v = vectorField != (-1) ? p5.createVector(vectorField[index(i, j)].x, vectorField[index(i, j)].y) : p5.createVector(grid_x[index(i, j)], grid_y[index(i, j)]);
        
        
        
                  //console.log(v.mag())
        
        
        
                  let col = p5.color(p5.map(v.mag(), 0, 4, 14, 244), p5.map(v.mag(), 0, 4, 62, 115, 0), p5.map(v.mag(), 0, 4, 218, 185));
        
                  let arrowLength =  tileSize / 4 + tileSize * p5.log(0.5 * v.mag() + 1);
        
                    //let arrowLength = map(v.mag(), 0, 10, tileSize / 6, tileSize * 1.5);
        
                  drawArrow(i * tileSize + tileSize / 2, j * tileSize + tileSize / 2, arrowLength, v.heading() , col);
        
                }
        
              }
        
        
        
              if(label != undefined) {
        
                p5.textSize(tileSize * 1.4);
        
                let tw = p5.textWidth(label);
        
                p5.text(label, tileSize * (N + 2) / 2 - tw / 2, tileSize * (N + 2) + marginHeight / 2);
        
              }
        
            };
        
        
        
        
        
            p5.keyPressed = () => {
        
              if(p5.key == 's')
        
                step();
        
            };
        
        
        
          }
        
        
        
        function gaussSiedel (p5) {
        
            let size;
        
            let tilesPerRow = 6;
        
            let tileSize;
        
            let coeffMatrix;
        
            let lambda;
        
        
        
            const line = (x1, y1, z1, x2, y2, z2) => {
        
                p5.beginShape(p5.LINES);
        
                p5.vertex(x1, y1, z1);
        
                p5.vertex(x2, y2, z2);
        
                p5.endShape();
        
            };
        
        
        
            const setupCamera = () => {
        
                p5.customCamera = p5.createCamera();
        
                p5.customCamera.setPosition(size / 4, size / 4, size);
        
                p5.customCamera.lookAt(0, 0, 0);
        
            };
        
        
        
            p5.setup = () => {
        
                size = p5.width;
        
                tileSize = p5.width / tilesPerRow;
        
                p5.previousGeneration = this.generateGaussSiedel;
        
                setupCamera();
        
            };
        
        
        
            const drawGrid = () => {
        
                p5.push();
        
                p5.fill(255);
        
                p5.strokeWeight(4);
        
                p5.stroke(255, 0, 0);
        
                line(0, -p5.height / 2, 0, 0, p5.height / 2, 0);
        
                p5.stroke(0, 255, 0);
        
                line(-p5.height / 2, 0, 0, p5.height / 2, 0, 0);
        
                p5.stroke(0, 0, 255);
        
                line(0, 0, -p5.height / 2, 0, 0, p5.height / 2);
        
                p5.noFill();
        
                p5.stroke(0);
        
                p5.box(size);
        
                p5.strokeWeight(0.5);
        
        
        
                for (let i = -tilesPerRow / 2; i < tilesPerRow / 2; i++) {
        
                    // x
        
                    for (let j = -tilesPerRow / 2; j < tilesPerRow / 2; j++) {
        
                        // y
        
                        for (let k = -tilesPerRow / 2; k < tilesPerRow / 2; k++) {
        
                            // z
        
                            p5.push();
        
                            p5.stroke('rgba(' + p5.ceil(p5.map(i, -tilesPerRow / 2, tilesPerRow / 2, 0, 255)) + ',' + p5.ceil(p5.map(j, -tilesPerRow / 2, tilesPerRow / 2, 255, 0)) + ',' + p5.ceil(p5.map(k, -tilesPerRow / 2, tilesPerRow / 2, 0, 255)) + ',0.2)');
        
                            p5.translate(i * tileSize + tileSize / 2, j * tileSize + tileSize / 2, + k * tileSize + tileSize / 2);
        
                            p5.box(tileSize);
        
                            p5.pop();
        
                        }
        
                    }
        
                }
        
                p5.pop();
        
            };
        
        
        
            const drawPlane = (a, b, c, d, col) => {
        
                let points = [];
        
        
        
                let findX = function (y, z) {
        
                    return -(b * y + c * z + d) / a
        
                };
        
        
        
                let findY = function (x, z) {
        
                    return -(a * x + c * z + d) / b
        
                };
        
        
        
                let findZ = function (x, y) {
        
                    return -(a * x + b * y + d) / c
        
                };
        
        
        
                let bound = tilesPerRow / 2;
        
        
        
                for (let xs = -1; xs <= 1; xs += 2) {
        
                    for (let ys = -1; ys <= 1; ys += 2) {
        
                        let z_found = findZ(xs * bound, ys * bound);
        
                        if (z_found <= bound && z_found >= -bound)
        
                            points.push(p5.createVector(xs * bound * tileSize, -ys * bound * tileSize, z_found * tileSize));
        
                    }
        
                }
        
        
        
                for (let zs = -1; zs <= 1; zs += 2) {
        
                    for (let ys = -1; ys <= 1; ys += 2) {
        
                        let x_found = findX(ys * bound, zs * bound);
        
                        if (x_found <= bound && x_found >= -bound)
        
                            points.push(p5.createVector(x_found * tileSize, -ys * bound * tileSize, zs * bound * tileSize));
        
                    }
        
                }
        
        
        
                for (let zs = -1; zs <= 1; zs += 2) {
        
                    for (let xs = -1; xs <= 1; xs += 2) {
        
                        let y_found = findY(xs * bound, zs * bound);
        
                        if (y_found <= bound && y_found >= -bound)
        
                            points.push(p5.createVector(xs * bound * tileSize, -y_found * tileSize, zs * bound * tileSize));
        
                    }
        
                }
        
        
        
                p5.push();
        
                //p5.stroke(col);
        
                p5.noStroke();
        
                p5.fill(p5.red(col), p5.green(col), p5.blue(col), 100);
        
                p5.beginShape(p5.TRIANGLE_FAN);
        
        
        
                sortPointsArray(points);
        
        
        
                for (const p of points) {
        
                    p5.vertex(p.x, p.y, p.z);
        
                }
        
        
        
                p5.endShape(p5.CLOSE);
        
                p5.pop();
        
        
        
                // Maintenant, dessinez les contours extérieurs en réutilisant les points du périmètre
        
                p5.push();
        
                p5.stroke(col);
        
                p5.strokeWeight(10);
        
                p5.noFill(); // Pas de remplissage pour les lignes de contour
        
        
        
                p5.beginShape();
        
        
        
                // Dessinez seulement les contours extérieurs
        
                // Vous devrez peut-être ajuster cette logique si certains points ne font pas partie du contour extérieur.
        
                for (const p of points) {
        
                    p5.vertex(p.x, p.y, p.z);
        
                }
        
        
        
                // Connectez le dernier point au premier pour fermer le contour
        
                p5.vertex(points[0].x, points[0].y, points[0].z);
        
        
        
                p5.endShape();
        
                p5.pop();
        
            };
        
        
        
            const sortPointsArray = (points) => {
        
                if (points.length < 3) {
        
                    throw new Error('Au moins trois points sont nécessaires pour définir un plan.');
        
                }
        
            
        
                // Sélectionner trois points pour définir le plan
        
                const p1 = points[0];
        
                const p2 = points[1];
        
                const p3 = points[2];
        
            
        
                // Calculer deux vecteurs sur le plan
        
                const v1 = p5.createVector(p2.x - p1.x, p2.y - p1.y, p2.z - p1.z);
        
                const v2 = p5.createVector(p3.x - p1.x, p3.y - p1.y, p3.z - p1.z);
        
            
        
                // Trouver la normale du plan par produit vectoriel de v1 et v2
        
                const normal = v1.cross(v2);
        
            
        
                // Calculer le centre du plan
        
                const center = points.reduce((acc, p) => ({
        
                    x: acc.x + p.x / points.length,
        
                    y: acc.y + p.y / points.length,
        
                    z: acc.z + p.z / points.length
        
                }), { x: 0, y: 0, z: 0 });
        
            
        
                // Trier les points en fonction de leur angle autour du centre par rapport à la normale
        
                points.sort((a, b) => {
        
                    const va = p5.createVector(a.x - center.x, a.y - center.y, a.z - center.z);
        
                    const vb = p5.createVector(b.x - center.x, b.y - center.y, b.z - center.z);
        
                    const crossA = va.cross(normal);
        
                    const crossB = vb.cross(normal);
        
                    const dotA = crossA.dot(v1);
        
                    const dotB = crossB.dot(v1);
        
                    return Math.atan2(dotA, va.dot(v1)) - Math.atan2(dotB, vb.dot(v1));
        
                });
        
            
        
                return points;
        
            };
        
            
        
            
        
        
        
            const gaussSiedel = (iterations, coeffsMatrix, constants) => {
        
                let successivePoints = [
        
                    [this.init_vector_x, this.init_vector_y, this.init_vector_z]
        
                ];
        
        
        
                for (let k = 1; k <= iterations; k++) {
        
                    successivePoints.push([]);
        
                    for (let i = 0; i < coeffsMatrix.length; i++) {
        
                        let sum = 0;
        
        
        
                        for (let j = 0; j < coeffsMatrix[i].length; j++) {
        
                            if (j < i)
        
                                sum += coeffsMatrix[i][j] * successivePoints[k][j];
        
                            else if (j > i)
        
                                sum += coeffsMatrix[i][j] * successivePoints[k - 1][j];
        
                        }
        
        
        
                        successivePoints[k][i] = 1 / coeffsMatrix[i][i] * (constants[i] - sum);
        
                    }
        
                }
        
        
        
                return successivePoints;
        
            };
        
        
        
            p5.draw = () => {
        
                setupCamera();
        
                coeffMatrix = [
        
                    [this.a1, this.b1, this.c1],
        
                    [this.a2, this.b2, this.c2],
        
                    [this.a3, this.b3, this.c3]
        
                ];
        
        
        
                lambda = [-this.d1, -this.d2, -this.d3];
        
        
        
                // Handle events
        
                if (this.generateGaussSiedel != p5.previousGeneration) {
        
                    p5.gaussSiedelSeries = gaussSiedel(this.iterationsGS, coeffMatrix, lambda);
        
                    p5.previousGeneration = this.generateGaussSiedel;
        
                    console.log(this.generateGaussSiedel + "--" + p5.previousGeneration);
        
                }
        
        
        
                p5.background(254, 248, 226);
        
        
        
                if (this.drawCoords)
        
                    drawGrid();
        
        
        
                p5.stroke(255, 0, 0);
        
                //p5.camera(size / 4 * p5.cos(p5.frameCount * 0.01), size / 4 * p5.sin(p5.frameCount * 0.01), size, 0, 0, 0);
        
                if (this.automaticRotation) {
        
                    p5.ortho(-size + 160, size - 160, -size + 160, size - 160, -1000, 2000);
        
                    p5.customCamera.setPosition(size / 4 * p5.cos(p5.frameCount * 0.01), size / 4 * p5.sin(p5.frameCount * 0.01), size);
        
                    p5.customCamera.lookAt(0, 0, 0);
        
                } else {
        
                    p5.orbitControl();
        
                }
        
        
        
                let col1 = p5.color(255, 200, 0);
        
                let col2 = p5.color(0, 255, 200);
        
                let col3 = p5.color(200, 0, 255);
        
        
        
                p5.strokeWeight(3);
        
        
        
                let coloration = [col1, col2, col3];
        
        
        
                for (let i = 0; i < coeffMatrix.length; i++) {
        
                    if (this.drawPlanes) {
        
                        if (!((i == 0 && !this.drawPlane1) || (i == 1 && !this.drawPlane2) || (i == 2 && !this.drawPlane3)))
        
                            drawPlane(coeffMatrix[i][0], coeffMatrix[i][1], coeffMatrix[i][2], -lambda[i], coloration[i]);
        
                    }
        
                }
        
        
        
                if (p5.gaussSiedelSeries != undefined && this.drawGaussSiedel) {
        
                    for (let i = 1; i < p5.gaussSiedelSeries.length; i++) {
        
                        p5.push();
        
                        p5.colorMode(p5.HSB, this.iterationsGS * 2, 100, 100);
        
                        p5.fill(255);
        
                        p5.strokeWeight(5);
        
                        p5.stroke((this.iterationsGS * 2) - i - 1, 100, 100);
        
                        line(p5.gaussSiedelSeries[i - 1][0] * tileSize, -p5.gaussSiedelSeries[i - 1][1] * tileSize, p5.gaussSiedelSeries[i - 1][2] * tileSize, p5.gaussSiedelSeries[i][0] * tileSize, -p5.gaussSiedelSeries[i][1] * tileSize, p5.gaussSiedelSeries[i][2] * tileSize);
        
                        p5.translate(p5.gaussSiedelSeries[i - 1][0] * tileSize, -p5.gaussSiedelSeries[i - 1][1] * tileSize, p5.gaussSiedelSeries[i - 1][2] * tileSize);
        
                        p5.fill(i - 1, 100, 100);
        
                        p5.sphere(3);
        
                        p5.pop();
        
                    }
        
                }
        
            };
        
        
        
            p5.keyPressed = () => {
        
                if (p5.key == 'd') {
        
                    console.log(p5.gaussSiedelSeries);
        
                }
        
            };
        
        }
        
        
        
        function diffusionStable (p5) {
        
            let N = 3; // Number of tiles
        
            let tileSize;
        
            let t_anim = 0;
        
            let animSpeed = 2;
        
            let density;
        
            let isPlaying = false;
        
            let s_x, s_y;
        
            let diffuseCoeff;
        
            let previousFreeze;
        
            let latinModernMath;
        
            let backwards;
        
        
        
            p5.setup = () => {
        
                previousFreeze = -1; // Check if the reactive variable has updated
        
                diffuseCoeff = this.coeff_diff_demo;
        
                loadFonts();
        
                p5.background(255);
        
                tileSize = p5.width / (N + 2);
        
                density = new Array((N + 2) * (N + 2));
        
                density.fill(0);
        
        
        
                for (let i = 0; i < N + 2; i++) {
        
                    for (let j = 0; j < N + 2; j++) {
        
                        density[index(i, j)] = p5.noise(i, j);
        
                    }
        
                }
        
            };
        
        
        
            const index = (i, j) => {
        
                return i + j * (N + 2);
        
            };
        
        
        
            const loadFonts = () => {
        
                latinModernMath = p5.loadFont('/fonts/latinmodern-math.otf');
        
            };
        
        
        
            // (x, y) : position, r : radius, d : displacement, s : speed, t : time
        
            const fluidParticle = (x, y, r, d, s, resolution, t, seed) => {
        
                p5.noiseSeed(seed);
        
                let points = [];
        
                // Compute points location
        
                for (let i = 2; i < p5.TWO_PI + 2; i += p5.TWO_PI / resolution) {
        
                    points.push(p5.createVector(x + p5.cos(i) * r + p5.noise(-t * s * i) * d, y + p5.sin(i) * r + p5.noise((t + 1000) * s * i) * d));
        
                }
        
        
        
                // Draw shape
        
                p5.beginShape();
        
                for (let i = 0; i < 1.5 * points.length; i++) {
        
                    p5.curveVertex(points[i % points.length].x, points[i % points.length].y);
        
                }
        
                p5.endShape();
        
            };
        
        
        
            const drawGrid = () => {
        
                p5.push();
        
                p5.stroke(0, 50);
        
                for (let i = 1; i < N + 2; i++) {
        
                    p5.line(i * tileSize, 0, i * tileSize, p5.height);
        
                }
        
        
        
                for (let j = 1; j < N + 2; j++) {
        
                    p5.line(0, j * tileSize, p5.width, j * tileSize);
        
                }
        
        
        
                p5.pop();
        
            };
        
        
        
            const drawDiffuseGrid = () => {
        
                p5.noStroke();
        
                for (let i = 0; i < N + 2; i++) {
        
                    for (let j = 0; j < N + 2; j++) {
        
                        let col = p5.color(p5.map(density[index(i, j)], 0, 1, 14, 244), p5.map(density[index(i, j)], 0, 1, 62, 115, 0), p5.map(density[index(i, j)], 0, 1, 218, 185));
        
                        if (s_x != i || s_y != j) {
        
                            p5.fill(col);
        
                            fluidParticle(i * tileSize + tileSize / 2, j * tileSize + tileSize / 2, p5.map(density[index(i, j)], 0, 1, 0, tileSize * 0.5), p5.map(density[index(i, j)], 0, 1, 0, tileSize * 0.5) * 0.2, 0.008, 10, p5.frameCount, i * 3 + j * 5);
        
                        }
        
                    }
        
                }
        
        
        
                if (s_x != undefined && s_y != undefined && !isPlaying) {
        
                    p5.fill(245, 190);
        
                    p5.rect(0, 0, p5.width, p5.height);
        
                    let col = p5.color(p5.map(density[index(s_x, s_y)], 0, 1, 14, 244), p5.map(density[index(s_x, s_y)], 0, 1, 62, 115, 0), p5.map(density[index(s_x, s_y)], 0, 1, 218, 185));
        
                    p5.fill(255);
        
                    p5.noStroke();
        
                    p5.square(s_x * tileSize, s_y * tileSize, tileSize);
        
        
        
                    p5.fill(col);
        
                    fluidParticle(s_x * tileSize + tileSize / 2, s_y * tileSize + tileSize / 2, p5.map(density[index(s_x, s_y)], 0, 1, 0, tileSize * 0.5), p5.map(density[index(s_x, s_y)], 0, 1, 0, tileSize * 0.5) * 0.2, 0.008, 10, p5.frameCount, -23);
        
                }
        
            };
        
        
        
            const animate = (t) => {
        
                // Semi opaque screen
        
                p5.fill(245, 190);
        
                p5.rect(0, 0, p5.width, p5.height);
        
        
        
                let bulletSize = 3;
        
                let bulletSpacing = 2 * bulletSize;
        
        
        
                let col = p5.color(p5.map(density[index(s_x, s_y)], 0, 1, 14, 244), p5.map(density[index(s_x, s_y)], 0, 1, 62, 115, 0), p5.map(density[index(s_x, s_y)], 0, 1, 218, 185));
        
        
        
                let radius = p5.map(density[index(s_x, s_y)], 0, 1, 0, tileSize * 0.25);
        
        
        
                p5.push();
        
                let surroundingCasesVectors = [
        
                    p5.createVector(0, 1),
        
                    p5.createVector(0, -1),
        
                    p5.createVector(1, 0),
        
                    p5.createVector(-1, 0),
        
                ];
        
        
        
                // For each case
        
                for (let i = 0; i < surroundingCasesVectors.length; i++) {
        
                    let currentPosition = p5.createVector(s_x + 0.5, s_y + 0.5);
        
                    let currentCase = p5.createVector(currentPosition.x + surroundingCasesVectors[i].x, currentPosition.y + surroundingCasesVectors[i].y);
        
        
        
                    let displacement = p5.sqrt(p5.pow((currentCase.x - currentPosition.x) * tileSize, 2) + p5.pow((currentCase.y - currentPosition.y) * tileSize, 2));
        
        
        
                    let currentTime = p5.constrain(t, 0, displacement);
        
        
        
                    if (!backwards) {
        
                        p5.fill(0);
        
                        for (let arcl = 0; arcl <= currentTime; arcl += bulletSpacing) {
        
                            let interp = arcl / displacement;
        
                            p5.ellipse(((1 - interp) * currentPosition.x + interp * currentCase.x) * tileSize, ((1 - interp) * currentPosition.y + interp * currentCase.y) * tileSize, bulletSize, bulletSize);
        
        
        
                            // Compute the radius of the subparticles, whose area is 1/4 the area of the big one
        
                            let area = p5.pow(radius, 2) * p5.PI;
        
                            let newRadius = p5.sqrt(diffuseCoeff * area / 4 / p5.PI);
        
        
        
                            let fx = ((1 - (currentTime / displacement)) * currentPosition.x + (currentTime / displacement) * currentCase.x) * tileSize;
        
                            let fy = ((1 - (currentTime / displacement)) * currentPosition.y + (currentTime / displacement) * currentCase.y) * tileSize;
        
                            p5.fill(col);
        
                            fluidParticle(fx, fy, newRadius * 2, p5.map(density[index(s_x, s_y)], 0, 1, 0, tileSize * 0.5) / 2 * 0.2, 0.008, 10, p5.frameCount, -24);
        
                        }
        
                    } else {
        
                        p5.fill(0);
        
                        for (let arcl = currentTime; arcl <= displacement; arcl += bulletSpacing) {
        
                            let interp = arcl / displacement;
        
                            p5.ellipse(((interp) * currentPosition.x + (1 - interp) * currentCase.x) * tileSize, ((interp) * currentPosition.y + (1 - interp) * currentCase.y) * tileSize, bulletSize, bulletSize);
        
        
        
                            // Compute the radius of the subparticles, whose area is 1/4 the area of the big one
        
                            p5.pow(radius, 2) * p5.PI;
        
                            //let newRadius = sqrt(diffuseCoeff * area / 4 / PI);
        
                            let newRadius = tileSize / 4;
        
        
        
                            if (currentTime / displacement < 1.0) {
        
                                let fx = (((currentTime / displacement)) * currentPosition.x + (1 - (currentTime / displacement)) * currentCase.x) * tileSize;
        
                                let fy = (((currentTime / displacement)) * currentPosition.y + (1 - (currentTime / displacement)) * currentCase.y) * tileSize;
        
                                p5.fill(0);
        
                                fluidParticle(fx, fy, newRadius, p5.map(density[index(s_x, s_y)], 0, 1, 0, tileSize * 0.5) / 2 * 0.2, 0.008, 10, p5.frameCount, -24);
        
                                p5.textFont(latinModernMath);
        
                                p5.fill(255);
        
                                p5.textSize(newRadius);
        
                                p5.textStyle(p5.BOLD);
        
                                let tsize = p5.textWidth("t");
        
                                p5.text("?", fx - tsize / 2, fy + tsize / 2);
        
                                p5.fill(0);
        
                            }
        
                        }
        
                    }
        
                }
        
        
        
                p5.fill(col);
        
                let dynamicRadius = backwards ? p5.map(p5.constrain(t / tileSize, 0, 1), 0, 1, 0, radius * 2) : p5.map(p5.constrain(t / tileSize * diffuseCoeff, 0, diffuseCoeff), 0, 1, radius * 2, 0);
        
                // Central particle
        
                fluidParticle(s_x * tileSize + tileSize / 2, s_y * tileSize + tileSize / 2, dynamicRadius, dynamicRadius * 0.2, 0.008, 10, p5.frameCount, -25);
        
                p5.pop();
        
            };
        
        
        
            p5.draw = () => {
        
                if (diffuseCoeff != this.coeff_diff_demo) {
        
                    diffuseCoeff = this.coeff_diff_demo;
        
                    loadFonts();
        
                }
        
        
        
                if (this.backwards_diff == "1")
        
                    backwards = false;
        
                else if (this.backwards_diff == "2")
        
                    backwards = true;
        
        
        
                if (previousFreeze != -1)
        
                    p5.setup();
        
        
        
                p5.background(255);
        
                drawGrid();
        
                drawDiffuseGrid();
        
        
        
                if (s_x != undefined && s_y != undefined && isPlaying) {
        
                    //console.log("animate")
        
                    animate(t_anim);
        
                }
        
        
        
                if (isPlaying)
        
                    t_anim += animSpeed;
        
        
        
            };
        
        
        
            p5.mouseClicked = () => {
        
                t_anim = 0;
        
                isPlaying = false;
        
        
        
                if (s_x == p5.int((p5.mouseX / p5.float(p5.width)) * (N + 2)) && s_y == p5.int((p5.mouseY / p5.float(p5.width)) * (N + 2))) {
        
                    s_x = undefined;
        
                    s_y = undefined;
        
                } else {
        
                    s_x = p5.int((p5.mouseX / p5.float(p5.width)) * (N + 2));
        
                    s_y = p5.int((p5.mouseY / p5.float(p5.width)) * (N + 2));
        
                    isPlaying = true;
        
                }
        
            };
        
        
        
            p5.keyPressed = () => {
        
                if (s_x != undefined && s_y != undefined && p5.key == 'd') ;
        
            };
        
        
        
        }
        
        
        
        function advectionBacktracing (p5) {
        
            let N = 10; // Number of tiles
        
            let tileSize;
        
            let dt = 1;
        
            let t_anim = 0;
        
            let animSpeed = 3.0;
        
        
        
            let velocityX, velocityY;
        
        
        
            /* Array containing all the different density distributions. The sum of all the values across the different distributions must be 1 for a single position : this is the value for saturation. */
        
            let densities;
        
            // This array must be the same length of the previous and stores the colours of each density.
        
            let densities_colours;
        
        
        
            let density;
        
        
        
            let selectedX, selectedY;
        
            let previousReset;
        
        
        
            p5.setup = () => {
        
                p5.background(255);
        
                previousReset = this.reset_advection_step;
        
                densities_colours = [p5.color(0, 0, 0)];
        
        
        
                tileSize = p5.width / (N + 2);
        
                velocityX = new Array((N + 2) * (N + 2));
        
                velocityY = new Array((N + 2) * (N + 2));
        
                density = new Array((N + 2) * (N + 2));
        
        
        
                densities = new Array(densities_colours.length);
        
                for (let i = 0; i < densities.length; i++) {
        
                    densities[i] = new Array((N + 2) * (N + 2)).fill(0);
        
                }
        
        
        
                initGrid(velocityX);
        
                initGrid(velocityY);
        
        
        
                density.fill(0);
        
        
        
                for (let k = 0; k <= 5; k++)
        
                    fluidStep();
        
            };
        
        
        
            const index = (i, j) => {
        
                return i + j * (N + 2);
        
            };
        
        
        
            const duplicateGrid = (grid) => {
        
                let newGrid = new Array(grid.length);
        
                for (let i = 0; i < newGrid.length; i++)
        
                    newGrid[i] = grid[i];
        
        
        
                return newGrid;
        
            };
        
        
        
            const setBounds = (grid, type) => {
        
                for (let i = 0; i < N + 2; i++) {
        
                    for (let j = 0; j < N + 2; j++) {
        
                        if (i == 0 || i == N + 1) {
        
                            if (type == "v") grid[index(i, j)] = 0;
        
                            if (type == "u") grid[index(i, j)] = i == 0 ? 0.5 : -0.5;
        
                        }
        
        
        
                        if (j == 0 || j == N + 1) {
        
                            if (type == "u") grid[index(i, j)] = 0;
        
                            if (type == "v") grid[index(i, j)] = j == 0 ? 0.5 : -0.5;
        
                        }
        
                    }
        
                }
        
        
        
                grid[index(0, 0)] = 0.5 * (grid[index(1, 0)] + grid[index(0, 1)]);
        
                grid[index(0, N + 1)] = 0.5 * (grid[index(1, N + 1)] + grid[index(0, N)]);
        
                grid[index(N + 1, 0)] = 0.5 * (grid[index(N, 0)] + grid[index(N + 1, 1)]);
        
                grid[index(N + 1, N + 1)] =
        
                    0.5 * (grid[index(N, N + 1)] + grid[index(N + 1, N)]);
        
            };
        
        
        
            const initGrid = (grid) => {
        
                // Init velocity
        
                p5.noiseSeed(this.reset_advection_step);
        
                for (let i = 0; i < N + 2; i++) {
        
                    for (let j = 0; j < N + 2; j++) {
        
                        grid[index(i, j)] = (p5.noise(i, j) * 2 - 1) * 30;
        
                    }
        
                }
        
            };
        
        
        
            const addForce = (x, y, amount, timeStep, grid) => {
        
                grid[index(x, y)] += amount * timeStep;
        
            };
        
        
        
            const projection = (velocityX, velocityY) => {
        
                let divergence = new Array(velocityX.length).fill(0);
        
                let p = new Array(velocityX.length).fill(0);
        
                let h = 1.0;
        
        
        
                for (let i = 1; i <= N; i++) {
        
                    for (let j = 1; j <= N; j++) {
        
                        divergence[index(i, j)] =
        
                            -0.5 *
        
                            h *
        
                            (velocityX[index(i + 1, j)] -
        
                                velocityX[index(i - 1, j)] +
        
                                velocityY[index(i, j + 1)] -
        
                                velocityY[index(i, j - 1)]); // check
        
        
        
                        p[index(i, j)] = 0;
        
                    }
        
                }
        
        
        
                for (let k = 0; k < 20; k++) {
        
                    for (let i = 1; i <= N; i++) {
        
                        for (let j = 1; j <= N; j++) {
        
                            let inter =
        
                                divergence[index(i, j)] +
        
                                p[index(i - 1, j)] +
        
                                p[index(i + 1, j)] +
        
                                p[index(i, j - 1)] +
        
                                p[index(i, j + 1)];
        
                            p[index(i, j)] = (1 / 4.0) * inter; // Laplacien discret ?
        
                        }
        
                    }
        
                }
        
        
        
                for (let i = 1; i <= N; i++) {
        
                    for (let j = 1; j <= N; j++) {
        
                        velocityX[index(i, j)] -=
        
                            (0.5 * (p[index(i + 1, j)] - p[index(i - 1, j)])) / h;
        
                        velocityY[index(i, j)] -=
        
                            (0.5 * (p[index(i, j + 1)] - p[index(i, j - 1)])) / h;
        
                    }
        
                }
        
        
        
                setBounds(velocityX, "u");
        
                setBounds(velocityY, "v");
        
            };
        
        
        
            const diffusion = (grid, timeStep, d, type) => {
        
                let previousGrid = duplicateGrid(grid);
        
                let iterations = 20;
        
        
        
                for (let k = 0; k < iterations; k++) {
        
                    for (let i = 1; i <= N; i++) {
        
                        for (let j = 1; j <= N; j++) {
        
                            grid[index(i, j)] =
        
                                (previousGrid[index(i, j)] +
        
                                    d *
        
                                    timeStep *
        
                                    (grid[index(i - 1, j)] +
        
                                        grid[index(i + 1, j)] +
        
                                        grid[index(i, j - 1)] +
        
                                        grid[index(i, j + 1)])) /
        
                                (1 + 4 * d * timeStep);
        
                        }
        
                    }
        
                }
        
        
        
                setBounds(grid, type);
        
            };
        
        
        
            const advection = (vx, vy, timeStep, verbose, grid, type) => {
        
                let previousGrid = duplicateGrid(grid);
        
        
        
                for (let i = 1; i <= N; i++) {
        
                    for (let j = 1; j <= N; j++) {
        
                        // x et y sont les nouvelles coordonnées une fois qu'on a backtrace (-) le velocity field au cours d'un temps dt
        
                        let x = p5.constrain(i - timeStep * vx[index(i, j)], 0.5, N + 0.5);
        
                        let y = p5.constrain(j - timeStep * vy[index(i, j)], 0.5, N + 0.5);
        
        
        
                        let pi = p5.int(x);
        
                        let pj = p5.int(y);
        
        
        
                        // Coefficients d'interpolation
        
                        let s1 = x - pi; // Comment x "déborde de la case" ? Moins c'est c'est "centre de la case", plus le coefficient est important
        
                        let s0 = 1 - s1; // l'inverse de s1
        
        
        
                        let t1 = y - pj; // Comment y "déborde de la case" ? Moins c'est c'est "centre de la case", plus le coefficient est important
        
                        let t0 = 1 - t1;
        
        
        
                        grid[index(i, j)] =
        
                            s0 *
        
                            (t0 * previousGrid[index(pi, pj)] +
        
                                t1 * previousGrid[index(pi, pj + 1)]) +
        
                            s1 *
        
                            (t0 * previousGrid[index(pi + 1, pj)] +
        
                                t1 * previousGrid[index(pi + 1, pj + 1)]);
        
                    }
        
                }
        
        
        
                setBounds(grid, type);
        
            };
        
        
        
            const fade = (grid, amount, timeStep) => {
        
                for (let i = 0; i < N + 2; i++) {
        
                    for (let j = 0; j < N + 2; j++) {
        
                        grid[index(i, j)] = p5.constrain(
        
                            grid[index(i, j)] - amount * timeStep,
        
                            0,
        
                            10
        
                        );
        
                    }
        
                }
        
            };
        
        
        
            const fluidStep = () => {
        
                diffusion(velocityX, dt, 0.1, "u");
        
                diffusion(velocityY, dt, 0.1, "v");
        
        
        
                projection(velocityX, velocityY);
        
        
        
                advection(velocityX, velocityY, dt, false, velocityX, "u");
        
                advection(velocityX, velocityY, dt, false, velocityY, "v");
        
        
        
                projection(velocityX, velocityY);
        
            };
        
        
        
            const drawGrid = () => {
        
                p5.push();
        
                p5.stroke(0, 50);
        
                for (let i = 0; i < N + 2; i++) {
        
                    if (i == N + 1)
        
                        p5.line(i * tileSize, 0, i * tileSize - 3, p5.height - 3);
        
                    else
        
                        p5.line(i * tileSize, 0, i * tileSize, p5.height);
        
                }
        
        
        
                for (let j = 0; j < N + 2; j++) {
        
                    if (j == N + 1)
        
                        p5.line(0, j * tileSize, p5.width - 3, j * tileSize - 3);
        
                    else
        
                        p5.line(0, j * tileSize, p5.width, j * tileSize);
        
                }
        
        
        
                p5.pop();
        
            };
        
        
        
            const drawArrow = (cx, cy, len, angle, col) => {
        
                p5.push();
        
                p5.translate(cx, cy);
        
                p5.rotate(angle);
        
                p5.stroke(col);
        
                p5.strokeWeight(1);
        
                p5.line(0, 0, len, 0);
        
                p5.fill(col);
        
        
        
                p5.triangle(len, 0, len - (len / 4.0), -len / 12.0, len - (len / 4.0), len / 12.0);
        
                p5.pop();
        
            };
        
        
        
            const drawArrowGrid = () => {
        
                for (let i = 1; i <= N; i++) {
        
                    for (let j = 1; j <= N; j++) {
        
        
        
                        let v = p5.createVector(velocityX[index(i, j)], velocityY[index(i, j)]);
        
                        let col = p5.color(p5.map(v.mag(), 0, 4, 14, 244), p5.map(v.mag(), 0, 4, 62, 115, 0), p5.map(v.mag(), 0, 4, 218, 185));
        
                        let arrowLength = tileSize / 4 + tileSize * p5.log(0.5 * v.mag() + 1);
        
                        //let arrowLength = map(v.mag(), 0, 10, tileSize / 6, tileSize * 1.5);
        
                        drawArrow(i * tileSize + tileSize / 2, j * tileSize + tileSize / 2, arrowLength, v.heading(), col);
        
                    }
        
                }
        
        
        
                if (selectedX != undefined && selectedY != undefined) {
        
                    p5.fill(245, 190);
        
                    p5.rect(0, 0, p5.width, p5.height);
        
                    p5.fill(255);
        
                    p5.noStroke();
        
                    p5.square(selectedX * tileSize, selectedY * tileSize, tileSize);
        
                    let v = p5.createVector(velocityX[index(selectedX, selectedY)], velocityY[index(selectedX, selectedY)]);
        
                    let col = p5.color(p5.map(v.mag(), 0, 4, 14, 244), p5.map(v.mag(), 0, 4, 62, 115, 0), p5.map(v.mag(), 0, 4, 218, 185));
        
                    let arrowLength = tileSize / 4 + tileSize * p5.log(0.5 * v.mag() + 1);
        
                    //let arrowLength = map(v.mag(), 0, 10, tileSize / 6, tileSize * 1.5);
        
                    drawArrow(selectedX * tileSize + tileSize / 2, selectedY * tileSize + tileSize / 2, arrowLength, v.heading(), col);
        
                }
        
            };
        
        
        
            const animateSketch = (t) => {
        
                // Advection parameters
        
                let x = p5.constrain(selectedX + 0.5 - 3 * dt * velocityX[index(selectedX, selectedY)], 0.5, N + 0.5);
        
                let y = p5.constrain(selectedY + 0.5 - 3 * dt * velocityY[index(selectedX, selectedY)], 0.5, N + 0.5);
        
        
        
                let caseVector = p5.createVector(x - (selectedX + 0.5), y - (selectedY + 0.5)).mult(tileSize);
        
                let bulletSize = 3;
        
                let bulletSpacing = 2 * bulletSize;
        
        
        
                t = p5.constrain(t, 0, caseVector.mag());
        
        
        
                let pi = p5.floor(x);
        
                let pj = p5.floor(y);
        
        
        
                p5.push();
        
                p5.fill(244, 0, 185, 100);
        
        
        
                // If the dotted line animation has ended, draw the squares on screen
        
                if (t >= caseVector.mag()) {
        
                    // Target square
        
                    p5.square(pi * tileSize, pj * tileSize, tileSize);
        
                    // surrounding squares
        
                    p5.fill(14, 4, 218, 100);
        
                    p5.square((pi + 1) * tileSize, pj * tileSize, tileSize);
        
                    p5.square(pi * tileSize, (pj + 1) * tileSize, tileSize);
        
                    p5.square((pi + 1) * tileSize, (pj + 1) * tileSize, tileSize);
        
                    p5.stroke(244, 0, 185);
        
                    p5.line((p5.floor(x)) * tileSize, (p5.floor(y)) * tileSize, x * tileSize, y * tileSize);
        
                }
        
        
        
                p5.noStroke();
        
        
        
                // Dotted line
        
                for (let arcl = 0; arcl <= t; arcl += bulletSpacing) {
        
                    p5.fill(0);
        
                    let interp = arcl / caseVector.mag();
        
                    p5.ellipse(((1 - interp) * (selectedX + 0.5) + interp * x) * tileSize, ((1 - interp) * (selectedY + 0.5) + interp * y) * tileSize, bulletSize, bulletSize);
        
        
        
                    if (t >= caseVector.mag()) {
        
                        p5.fill(255);
        
                        p5.ellipse(x * tileSize, y * tileSize, bulletSize * 2, bulletSize * 2);
        
                    }
        
                }
        
        
        
                p5.pop();
        
            };
        
        
        
            p5.draw = () => {
        
        
        
                if(previousReset != this.reset_advection_step) {
        
                    p5.setup();
        
                    previousReset = this.reset_advection_step;
        
                }
        
        
        
        
        
                p5.background(255);
        
        
        
                // FORCE TO ADD
        
                p5.createVector(p5.mouseX - p5.pmouseX, p5.mouseY - p5.pmouseY).mult(2);
        
                let tileX = p5.int((p5.mouseX / p5.float(p5.width)) * (N + 2));
        
                let tileY = p5.int((p5.mouseY / p5.float(p5.width)) * (N + 2));
        
        
        
        
        
                // UPDATE EACH DENSITY
        
                for (let i = 0; i < densities.length; i++) {
        
                    if (i == 0) addForce(tileX, tileY, 4, dt, densities[i]);
        
        
        
                    diffusion(densities[i], dt, 0.001, "d");
        
                    advection(velocityX, velocityY, dt, false, densities[i], "d");
        
                    fade(density, 0.0001, dt);
        
        
        
                    drawGrid();
        
                    drawArrowGrid();
        
        
        
                }
        
        
        
                if (selectedX != undefined && selectedY != undefined)
        
                    animateSketch(t_anim);
        
                //zoom(tileX, tileY, 3);
        
                t_anim += animSpeed;
        
            };
        
        
        
            p5.mouseClicked = () => {
        
                t_anim = 0;
        
                if (selectedX == p5.int((p5.mouseX / p5.float(p5.width)) * (N + 2)) && selectedY == p5.int((p5.mouseY / p5.float(p5.width)) * (N + 2))) {
        
                    selectedX = undefined;
        
                    selectedY = undefined;
        
                } else {
        
                    selectedX = p5.int((p5.mouseX / p5.float(p5.width)) * (N + 2));
        
                    selectedY = p5.int((p5.mouseY / p5.float(p5.width)) * (N + 2));
        
                }
        
            
        
                p5.constrain(selectedX + 0.5 - 3 * dt * velocityX[index(selectedX, selectedY)], 0.5, N + 0.5);
        
                p5.constrain(selectedY + 0.5 - 3 * dt * velocityY[index(selectedX, selectedY)], 0.5, N + 0.5);
        
            };
        
        }
        
        
        
        function fluidSimulation (p5) {
        
            let N; // Number of tiles
        
            let tileSize;
        
            let dt;
        
            let velocityX;
        
            // For marbling simulation : amount of substance for which pressure is insufficiant to break surface tension
        
            let velocityY;
        
            /* Array containing all the different density distributions. The sum of all the values across the different distributions must be 1 for a single position : this is the value for saturation. */
        
            let densities;
        
            // This array must be the same length of the previous and stores the colours of each density.
        
            let densities_colours;
        
            let density;
        
            let pNt;
        
        
        
            p5.setup = () => {
        
                N = this.numberTilesTwo;
        
                pNt = N;
        
                tileSize = 0;
        
                dt = 1.0;
        
                velocityX = [];
        
                velocityY = [];
        
                densities = [];
        
                densities_colours = [];
        
        
        
                densities_colours = [
        
                    p5.color(this.color_one_red, this.color_one_green, this.color_one_blue)
        
                ];
        
        
        
                let size = N;
        
                tileSize = p5.width / (size + 2);
        
                velocityX = new Array((size + 2) * (size + 2));
        
                velocityY = new Array((size + 2) * (size + 2));
        
                density = new Array((size + 2) * (size + 2));
        
                densities = new Array(densities_colours.length);
        
        
        
                for (let i = 0; i < densities.length; i++) {
        
                    densities[i] = new Array((size + 2) * (size + 2)).fill(0);
        
                }
        
        
        
                initGrid(velocityX);
        
                initGrid(velocityY);
        
        
        
                density.fill(0);
        
            };
        
        
        
            const index = (i, j) => {
        
                return i + j * (N + 2);
        
            };
        
        
        
            /* const duplicateGrid = (grid) => {
        
                if (!Array.isArray(grid)) {
        
                    console.error('duplicateGrid was called with a non-array argument:', grid);
        
                    return []; // Retourne un tableau vide pour éviter des erreurs en aval
        
                }
        
        
        
                // Crée une copie du tableau en utilisant la méthode slice() qui crée une copie superficielle du tableau original.
        
                // Notez que cela fonctionne bien ici car nous supposons que `grid` est un tableau d'éléments primitifs (nombres).
        
                let newGrid = grid.slice();
        
        
        
                return newGrid;
        
            } */
        
        
        
            const duplicateGrid = (grid) => {
        
                let newGrid = new Array(grid.length);
        
            
        
                for (let i = 0; i < newGrid.length; i++)
        
                    newGrid[i] = grid[i];
        
            
        
                return newGrid;
        
            };
        
        
        
            const setBounds = (grid, type) => {
        
                for (let i = 1; i <= N; i++) {
        
                    grid[index(0, i)] = (type === 'u') ? -grid[index(1, i)] : grid[index(1, i)];
        
                    grid[index(N + 1, i)] = (type === 'u') ? -grid[index(N, i)] : grid[index(N, i)];
        
                    grid[index(i, 0)] = (type === 'v') ? -grid[index(i, 1)] : grid[index(i, 1)];
        
                    grid[index(i, N + 1)] = (type === 'v') ? -grid[index(i, N)] : grid[index(i, N)];
        
                }
        
        
        
                grid[index(0, 0)] = 0.5 * (grid[index(1, 0)] + grid[index(0, 1)]);
        
                grid[index(0, N + 1)] = 0.5 * (grid[index(1, N + 1)] + grid[index(0, N)]);
        
                grid[index(N + 1, 0)] = 0.5 * (grid[index(N, 0)] + grid[index(N + 1, 1)]);
        
                grid[index(N + 1, N + 1)] = 0.5 * (grid[index(N, N + 1)] + grid[index(N + 1, N)]);
        
            };
        
        
        
            // PREVIOUS UNOPTIMIZED VERSION (and presumably not behaving as expected)
        
            /* const setBounds = (grid, type) => {
        
                for (let i = 0; i < N + 2; i++) {
        
                    for (let j = 0; j < N + 2; j++) {
        
                        if (i == 0 || i == N + 1) {
        
                            if (type == 'v')
        
                                grid[index(i, j)] = 0;
        
                            if (type == 'u')
        
                                grid[index(i, j)] = i == 0 ? 0.5 : -0.5;
        
                        }
        
        
        
                        if (j == 0 || j == N + 1) {
        
                            if (type == 'u')
        
                                grid[index(i, j)] = 0;
        
                            if (type == 'v')
        
                                grid[index(i, j)] = j == 0 ? 0.5 : -0.5;
        
                        }
        
                    }
        
                }
        
        
        
                grid[index(0, 0)] = 0.5 * (grid[index(1, 0)] + grid[index(0, 1)]);
        
                grid[index(0, N + 1)] = 0.5 * (grid[index(1, N + 1)] + grid[index(0, N)]);
        
                grid[index(N + 1, 0)] = 0.5 * (grid[index(N, 0)] + grid[index(N + 1, 1)]);
        
                grid[index(N + 1, N + 1)] = 0.5 * (grid[index(N, N + 1)] + grid[index(N + 1, N)]);
        
        
        
            }
        
            */
        
        
        
        
        
            const initGrid = (grid, type) => {
        
                // Init velocity
        
                for (let i = 0; i < N + 2; i++) {
        
                    for (let j = 0; j < N + 2; j++) {
        
                        grid[index(i, j)] = p5.random(-1, 1) * 0.0001;
        
                    }
        
                }
        
        
        
                setBounds(grid, type);
        
            };
        
        
        
        
        
            const addForce = (x, y, amount, timeStep, grid) => {
        
                grid[index(x, y)] += amount * timeStep;
        
            };
        
        
        
            const projection = (velocityX, velocityY) => {
        
                let divergence = new Array(velocityX.length).fill(0);
        
                let p = new Array(velocityX.length).fill(0);
        
                let h = 1.0;
        
        
        
                for (let i = 1; i <= N; i++) {
        
                    for (let j = 1; j <= N; j++) {
        
                        divergence[index(i, j)] = -0.5 * h * (velocityX[index(i + 1, j)] - velocityX[index(i - 1, j)] + velocityY[index(i, j + 1)] - velocityY[index(i, j - 1)]); // check
        
        
        
                        p[index(i, j)] = 0;
        
                    }
        
                }
        
        
        
                for (let k = 0; k < 20; k++) {
        
                    for (let i = 1; i <= N; i++) {
        
                        for (let j = 1; j <= N; j++) {
        
                            let inter = (divergence[index(i, j)] + p[index(i - 1, j)] + p[index(i + 1, j)] + p[index(i, j - 1)] + p[index(i, j + 1)]);
        
                            p[index(i, j)] = 1 / 4.0 * inter; // Laplacien discret ?
        
                        }
        
                    }
        
                }
        
        
        
                for (let i = 1; i <= N; i++) {
        
                    for (let j = 1; j <= N; j++) {
        
                        velocityX[index(i, j)] -= 0.5 * (p[index(i + 1, j)] - p[index(i - 1, j)]) / h;
        
                        velocityY[index(i, j)] -= 0.5 * (p[index(i, j + 1)] - p[index(i, j - 1)]) / h;
        
                    }
        
                }
        
        
        
                setBounds(velocityX, 'u');
        
                setBounds(velocityY, 'v');
        
            };
        
        
        
            const diffusion = (grid, timeStep, d, type) => {
        
                let previousGrid = duplicateGrid(grid);
        
                let iterations = 20;
        
        
        
                if (type == 'd' && this.stopDiffuse > 0) {
        
                    // Simple routine
        
                    for (let i = 1; i <= N; i++) {
        
                        for (let j = 1; j <= N; j++) {
        
                            if (previousGrid[index(i, j)] > this.stopDiffuse) {
        
                                grid[index(i, j)] -= previousGrid[index(i, j)] / 2 * d * timeStep;
        
                                grid[index(i - 1, j)] += previousGrid[index(i, j)] / 8 * d * timeStep;
        
                                grid[index(i + 1, j)] += previousGrid[index(i, j)] / 8 * d * timeStep;
        
                                grid[index(i, j - 1)] += previousGrid[index(i, j)] / 8 * d * timeStep;
        
                                grid[index(i, j + 1)] += previousGrid[index(i, j)] / 8 * d * timeStep;
        
                            }
        
                        }
        
                    }
        
                }
        
        
        
                else {
        
                    // Gauss Siedel
        
                    for (let k = 0; k < iterations; k++) {
        
                        for (let i = 1; i <= N; i++) {
        
                            for (let j = 1; j <= N; j++) {
        
                                grid[index(i, j)] = (previousGrid[index(i, j)] + (d * timeStep) * (grid[index(i - 1, j)] + grid[index(i + 1, j)] + grid[index(i, j - 1)] + grid[index(i, j + 1)])) / (1 + 4 * d * timeStep);
        
                            }
        
                        }
        
                    }
        
                }
        
        
        
                setBounds(grid, type);
        
            };
        
        
        
            const advection = (vx, vy, timeStep, grid, type) => {
        
                let previousGrid = duplicateGrid(grid);
        
        
        
                for (let i = 1; i <= N; i++) {
        
                    for (let j = 1; j <= N; j++) {
        
                        let x = p5.constrain(i - timeStep * vx[index(i, j)], 0.5, N + 0.5);
        
                        let y = p5.constrain(j - timeStep * vy[index(i, j)], 0.5, N + 0.5);
        
        
        
                        let pi = p5.int(x);
        
                        let pj = p5.int(y);
        
        
        
                        // Coefficients d'interpolation
        
                        let s1 = x - pi;
        
                        let s0 = 1 - s1;
        
        
        
                        let t1 = y - pj;
        
                        let t0 = 1 - t1;
        
        
        
                        grid[index(i, j)] = s0 * (t0 * previousGrid[index(pi, pj)] + t1 * previousGrid[index(pi, pj + 1)])
        
                            + s1 * (t0 * previousGrid[index(pi + 1, pj)] + t1 * previousGrid[index(pi + 1, pj + 1)]);
        
                    }
        
                }
        
        
        
                setBounds(grid, type);
        
            };
        
        
        
            /*
        
            const advection = (vx, vy, timeStep, grid, type) => {
        
        
        
                let previousGrid = duplicateGrid(grid); // Assurez-vous que grid est bien un tableau avant cette ligne.
        
        
        
                for (let i = 1; i <= N; i++) {
        
                    for (let j = 1; j <= N; j++) {
        
                        let x = i - (timeStep * vx[index(i, j)]);
        
                        let y = j - (timeStep * vy[index(i, j)]);
        
        
        
                        x = Math.max(0.5, Math.min(x, N + 0.5));
        
                        y = Math.max(0.5, Math.min(y, N + 0.5));
        
        
        
                        let pi = Math.floor(x);
        
                        let pj = Math.floor(y);
        
        
        
                        let s1 = x - pi;
        
                        let s0 = 1 - s1;
        
                        let t1 = y - pj;
        
                        let t0 = 1 - t1;
        
        
        
                        grid[index(i, j)] =
        
                            s0 * (t0 * previousGrid[index(pi, pj)] + t1 * previousGrid[index(pi, pj + 1)]) +
        
                            s1 * (t0 * previousGrid[index(pi + 1, pj)] + t1 * previousGrid[index(pi + 1, pj + 1)]);
        
                    }
        
                }
        
        
        
                setBounds(grid, type);
        
            } */
        
        
        
            const fade = (grid, amount, timeStep) => {
        
                for (let i = 0; i < N + 2; i++) {
        
                    for (let j = 0; j < N + 2; j++) {
        
                        grid[index(i, j)] = p5.constrain(grid[index(i, j)] - amount * timeStep, 0, 10);
        
                    }
        
                }
        
            };
        
        
        
            const drawDensity = (density, colour) => {
        
                p5.push();
        
                p5.noStroke();
        
                for (let i = 0; i < N + 2; i++) {
        
                    for (let j = 0; j < N + 2; j++) {
        
                        p5.fill(p5.red(colour), p5.green(colour), p5.blue(colour), p5.map(density[index(i, j)], 0, 1, 0, 255));
        
                        p5.rect(i * tileSize, j * tileSize, tileSize, tileSize);
        
                    }
        
                }
        
                p5.pop();
        
            };
        
        
        
            p5.draw = () => {
        
                if (pNt != this.numberTilesTwo)
        
                    p5.setup();
        
        
        
                p5.background(this.color_fl_red, this.color_fl_green, this.color_fl_blue);
        
        
        
                densities_colours = [
        
                    p5.color(this.color_one_red, this.color_one_green, this.color_one_blue)
        
                ];
        
        
        
                // FORCE TO ADD
        
                let tileX = p5.int(p5.mouseX / p5.float(p5.width) * (N + 2));
        
                let tileY = p5.int(p5.mouseY / p5.float(p5.height) * (N + 2));
        
        
        
                // UPDATE VELOCITY FIELD
        
                addForce(tileX, tileY, (p5.mouseX - p5.pmouseX) / 4, dt, velocityX);
        
                addForce(tileX, tileY, (p5.mouseY - p5.pmouseY) / 4, dt, velocityY);
        
        
        
                diffusion(velocityX, dt, this.fluid_viscosity, 'u');
        
                diffusion(velocityY, dt, this.fluid_viscosity, 'v');
        
        
        
                projection(velocityX, velocityY);
        
        
        
                advection(velocityX, velocityY, dt, velocityX, 'u');
        
                advection(velocityX, velocityY, dt, velocityY, 'v');
        
        
        
                projection(velocityX, velocityY);
        
        
        
                // UPDATE EACH DENSITY
        
                for (let i = 0; i < densities.length; i++) {
        
                    //console.log("N : " + p5.N + "tx : " + tileX + "ty : " + tileY + "test : " + (tileX > 0 && tileY > 0 && tileY < (N + 1) && tileX < (N + 1)));
        
                    if ((p5.keyIsDown(p5.LEFT_ARROW) || p5.mouseIsPressed) && (tileX > 0 && tileY > 0 && tileY < (N + 1) && tileX < (N + 1))) {
        
                        addForce(tileX, tileY, 4, dt, densities[0]);
        
                    }
        
        
        
                    //createEmitter(ceil(N / 2 + (N / 4) * cos(i * TAU / densities_colours.length)),ceil(N / 2 + (N / 4) * sin(i * TAU / densities_colours.length)), 20, 200, 0);
        
        
        
                    diffusion(densities[i], dt, this.ink_diffusion, 'd');
        
                    advection(velocityX, velocityY, dt, densities[i], 'd');
        
        
        
                    fade(density, 0.01, dt);
        
                    drawDensity(densities[i], densities_colours[i]);
        
                }
        
            };
        
        
        
            p5.mouseClicked = () => {
        
        
        
            };
        
        }
        
        
        
        /* content\posts\marbling\index.mdsvx generated by Svelte v4.2.12 */
        
        
        
        function create_default_slot_126(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t + \\Delta t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t + \\Delta t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (427:659) <Equation>
        
        function create_default_slot_125(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (427:723) <Equation>
        
        function create_default_slot_124(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\Delta t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\Delta t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (440:230) <Equation>
        
        function create_default_slot_123(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\theta");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\theta");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (441:98) <Equation>
        
        function create_default_slot_122(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\space \\cos (x)^2 +  \\sin (x)^2 = 1");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\space \\cos (x)^2 +  \\sin (x)^2 = 1");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (442:0) <Equation>
        
        function create_default_slot_121(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\\\cos (\\\\theta)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\\\cos (\\\\theta)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (444:0) <Equation>
        
        function create_default_slot_120(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\\\sin (\\\\theta)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\\\sin (\\\\theta)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (451:97) <Equation>
        
        function create_default_slot_119(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("-\\pi");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "-\\pi");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (451:126) <Equation>
        
        function create_default_slot_118(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\pi");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\pi");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (451:155) <Equation>
        
        function create_default_slot_117(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (451:181) <Equation>
        
        function create_default_slot_116(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("2\\pi");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "2\\pi");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (454:23) <Equation>
        
        function create_default_slot_115(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\theta");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\theta");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (454:54) <Equation>
        
        function create_default_slot_114(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("-\\pi \\space");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "-\\pi \\space");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (454:146) <Equation>
        
        function create_default_slot_113(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\pi");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\pi");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (455:23) <Equation>
        
        function create_default_slot_112(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("m");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "m");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (459:134) <Equation>
        
        function create_default_slot_111(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("(0, 0)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "(0, 0)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (463:0) {:else}
        
        function create_else_block_7(ctx) {
        
        	let equation;
        
        	let current;
        
        
        
        	equation = new Equation({
        
        			props: { markup: /*vector_uncolored*/ ctx[27] }
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation.$$.fragment);
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation.$$.fragment, nodes);
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation, target, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation_changes = {};
        
        			if (dirty[0] & /*vector_uncolored*/ 134217728) equation_changes.markup = /*vector_uncolored*/ ctx[27];
        
        			equation.$set(equation_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			destroy_component(equation, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (461:0) {#if $colourEq}
        
        function create_if_block_10(ctx) {
        
        	let equation;
        
        	let current;
        
        
        
        	equation = new Equation({
        
        			props: { markup: /*vector_colored*/ ctx[26] }
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation.$$.fragment);
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation.$$.fragment, nodes);
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation, target, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation_changes = {};
        
        			if (dirty[0] & /*vector_colored*/ 67108864) equation_changes.markup = /*vector_colored*/ ctx[26];
        
        			equation.$set(equation_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			destroy_component(equation, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (467:0) <Equation>
        
        function create_default_slot_110(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("x");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "x");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (468:0) <Equation>
        
        function create_default_slot_109(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\enspace\\enspace y");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\enspace\\enspace y");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (473:0) {:else}
        
        function create_else_block_6(ctx) {
        
        	let equation;
        
        	let current;
        
        
        
        	equation = new Equation({
        
        			props: { markup: /*magnitude_uncolored*/ ctx[25] }
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation.$$.fragment);
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation.$$.fragment, nodes);
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation, target, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation_changes = {};
        
        			if (dirty[0] & /*magnitude_uncolored*/ 33554432) equation_changes.markup = /*magnitude_uncolored*/ ctx[25];
        
        			equation.$set(equation_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			destroy_component(equation, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (471:0) {#if $colourEq}
        
        function create_if_block_9(ctx) {
        
        	let equation;
        
        	let current;
        
        
        
        	equation = new Equation({
        
        			props: { markup: /*magnitude_colored*/ ctx[24] }
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation.$$.fragment);
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation.$$.fragment, nodes);
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation, target, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation_changes = {};
        
        			if (dirty[0] & /*magnitude_colored*/ 16777216) equation_changes.markup = /*magnitude_colored*/ ctx[24];
        
        			equation.$set(equation_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			destroy_component(equation, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (480:0) {:else}
        
        function create_else_block_5(ctx) {
        
        	let equation0;
        
        	let t0;
        
        	let br;
        
        	let t1;
        
        	let equation1;
        
        	let current;
        
        
        
        	equation0 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*direction1_uncolored*/ ctx[23]
        
        			}
        
        		});
        
        
        
        	equation1 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*direction2_uncolored*/ ctx[22]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation0.$$.fragment);
        
        			t0 = space();
        
        			br = element("br");
        
        			t1 = space();
        
        			create_component(equation1.$$.fragment);
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation0.$$.fragment, nodes);
        
        			t0 = claim_space(nodes);
        
        			br = claim_element(nodes, "BR", {});
        
        			t1 = claim_space(nodes);
        
        			claim_component(equation1.$$.fragment, nodes);
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation0, target, anchor);
        
        			insert_hydration(target, t0, anchor);
        
        			insert_hydration(target, br, anchor);
        
        			insert_hydration(target, t1, anchor);
        
        			mount_component(equation1, target, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation0_changes = {};
        
        			if (dirty[0] & /*direction1_uncolored*/ 8388608) equation0_changes.markup = /*direction1_uncolored*/ ctx[23];
        
        			equation0.$set(equation0_changes);
        
        			const equation1_changes = {};
        
        			if (dirty[0] & /*direction2_uncolored*/ 4194304) equation1_changes.markup = /*direction2_uncolored*/ ctx[22];
        
        			equation1.$set(equation1_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation0.$$.fragment, local);
        
        			transition_in(equation1.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation0.$$.fragment, local);
        
        			transition_out(equation1.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t0);
        
        				detach(br);
        
        				detach(t1);
        
        			}
        
        
        
        			destroy_component(equation0, detaching);
        
        			destroy_component(equation1, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (477:0) {#if $colourEq}
        
        function create_if_block_8(ctx) {
        
        	let equation0;
        
        	let t0;
        
        	let br;
        
        	let t1;
        
        	let equation1;
        
        	let current;
        
        
        
        	equation0 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*direction1_colored*/ ctx[21]
        
        			}
        
        		});
        
        
        
        	equation1 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*direction2_colored*/ ctx[20]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation0.$$.fragment);
        
        			t0 = space();
        
        			br = element("br");
        
        			t1 = space();
        
        			create_component(equation1.$$.fragment);
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation0.$$.fragment, nodes);
        
        			t0 = claim_space(nodes);
        
        			br = claim_element(nodes, "BR", {});
        
        			t1 = claim_space(nodes);
        
        			claim_component(equation1.$$.fragment, nodes);
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation0, target, anchor);
        
        			insert_hydration(target, t0, anchor);
        
        			insert_hydration(target, br, anchor);
        
        			insert_hydration(target, t1, anchor);
        
        			mount_component(equation1, target, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation0_changes = {};
        
        			if (dirty[0] & /*direction1_colored*/ 2097152) equation0_changes.markup = /*direction1_colored*/ ctx[21];
        
        			equation0.$set(equation0_changes);
        
        			const equation1_changes = {};
        
        			if (dirty[0] & /*direction2_colored*/ 1048576) equation1_changes.markup = /*direction2_colored*/ ctx[20];
        
        			equation1.$set(equation1_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation0.$$.fragment, local);
        
        			transition_in(equation1.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation0.$$.fragment, local);
        
        			transition_out(equation1.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t0);
        
        				detach(br);
        
        				detach(t1);
        
        			}
        
        
        
        			destroy_component(equation0, detaching);
        
        			destroy_component(equation1, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (484:17) <Equation>
        
        function create_default_slot_108(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\arcsin(x)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\arcsin(x)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (484:52) <Equation>
        
        function create_default_slot_107(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\arccos(x)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\arccos(x)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (484:206) <Equation>
        
        function create_default_slot_106(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\sin(x)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\sin(x)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (484:238) <Equation>
        
        function create_default_slot_105(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\cos(x)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\cos(x)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (484:702) <Equation>
        
        function create_default_slot_104(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("x");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "x");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (484:728) <Equation>
        
        function create_default_slot_103(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("-x");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "-x");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (484:954) <Equation>
        
        function create_default_slot_102(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\theta");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\theta");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (484:999) <Equation>
        
        function create_default_slot_101(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("-\\theta");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "-\\theta");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (486:473) <Equation>
        
        function create_default_slot_100(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\cdot");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\cdot");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (486:664) <Equation>
        
        function create_default_slot_99(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\times");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\times");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (500:0) {:else}
        
        function create_else_block_4(ctx) {
        
        	let equation;
        
        	let t;
        
        	let br;
        
        	let current;
        
        
        
        	equation = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*vectorAddition_uncolored*/ ctx[19]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation.$$.fragment);
        
        			t = space();
        
        			br = element("br");
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation.$$.fragment, nodes);
        
        			t = claim_space(nodes);
        
        			br = claim_element(nodes, "BR", {});
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation, target, anchor);
        
        			insert_hydration(target, t, anchor);
        
        			insert_hydration(target, br, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation_changes = {};
        
        			if (dirty[0] & /*vectorAddition_uncolored*/ 524288) equation_changes.markup = /*vectorAddition_uncolored*/ ctx[19];
        
        			equation.$set(equation_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        				detach(br);
        
        			}
        
        
        
        			destroy_component(equation, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (498:0) {#if $colourEq}
        
        function create_if_block_7(ctx) {
        
        	let equation;
        
        	let t;
        
        	let br;
        
        	let current;
        
        
        
        	equation = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*vectorAddition_colored*/ ctx[18]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation.$$.fragment);
        
        			t = space();
        
        			br = element("br");
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation.$$.fragment, nodes);
        
        			t = claim_space(nodes);
        
        			br = claim_element(nodes, "BR", {});
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation, target, anchor);
        
        			insert_hydration(target, t, anchor);
        
        			insert_hydration(target, br, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation_changes = {};
        
        			if (dirty[0] & /*vectorAddition_colored*/ 262144) equation_changes.markup = /*vectorAddition_colored*/ ctx[18];
        
        			equation.$set(equation_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        				detach(br);
        
        			}
        
        
        
        			destroy_component(equation, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (507:216) <Equation>
        
        function create_default_slot_98(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("2");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "2");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (513:0) {:else}
        
        function create_else_block_3(ctx) {
        
        	let equation;
        
        	let t;
        
        	let br;
        
        	let current;
        
        
        
        	equation = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*scalarMultiplication_uncolored*/ ctx[17]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation.$$.fragment);
        
        			t = space();
        
        			br = element("br");
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation.$$.fragment, nodes);
        
        			t = claim_space(nodes);
        
        			br = claim_element(nodes, "BR", {});
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation, target, anchor);
        
        			insert_hydration(target, t, anchor);
        
        			insert_hydration(target, br, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation_changes = {};
        
        			if (dirty[0] & /*scalarMultiplication_uncolored*/ 131072) equation_changes.markup = /*scalarMultiplication_uncolored*/ ctx[17];
        
        			equation.$set(equation_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        				detach(br);
        
        			}
        
        
        
        			destroy_component(equation, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (511:0) {#if $colourEq}
        
        function create_if_block_6(ctx) {
        
        	let equation;
        
        	let t;
        
        	let br;
        
        	let current;
        
        
        
        	equation = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*scalarMultiplication_colored*/ ctx[16]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation.$$.fragment);
        
        			t = space();
        
        			br = element("br");
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation.$$.fragment, nodes);
        
        			t = claim_space(nodes);
        
        			br = claim_element(nodes, "BR", {});
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation, target, anchor);
        
        			insert_hydration(target, t, anchor);
        
        			insert_hydration(target, br, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation_changes = {};
        
        			if (dirty[0] & /*scalarMultiplication_colored*/ 65536) equation_changes.markup = /*scalarMultiplication_colored*/ ctx[16];
        
        			equation.$set(equation_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        				detach(br);
        
        			}
        
        
        
        			destroy_component(equation, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (538:68) <Equation>
        
        function create_default_slot_97(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\theta");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\theta");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (541:0) {:else}
        
        function create_else_block_2(ctx) {
        
        	let equation;
        
        	let t;
        
        	let br;
        
        	let current;
        
        
        
        	equation = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*dotProductGeometric_uncolored*/ ctx[15]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation.$$.fragment);
        
        			t = space();
        
        			br = element("br");
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation.$$.fragment, nodes);
        
        			t = claim_space(nodes);
        
        			br = claim_element(nodes, "BR", {});
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation, target, anchor);
        
        			insert_hydration(target, t, anchor);
        
        			insert_hydration(target, br, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation_changes = {};
        
        			if (dirty[0] & /*dotProductGeometric_uncolored*/ 32768) equation_changes.markup = /*dotProductGeometric_uncolored*/ ctx[15];
        
        			equation.$set(equation_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        				detach(br);
        
        			}
        
        
        
        			destroy_component(equation, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (539:0) {#if $colourEq}
        
        function create_if_block_5(ctx) {
        
        	let equation;
        
        	let t;
        
        	let br;
        
        	let current;
        
        
        
        	equation = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*dotProductGeometric_colored*/ ctx[14]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation.$$.fragment);
        
        			t = space();
        
        			br = element("br");
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation.$$.fragment, nodes);
        
        			t = claim_space(nodes);
        
        			br = claim_element(nodes, "BR", {});
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation, target, anchor);
        
        			insert_hydration(target, t, anchor);
        
        			insert_hydration(target, br, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation_changes = {};
        
        			if (dirty[0] & /*dotProductGeometric_colored*/ 16384) equation_changes.markup = /*dotProductGeometric_colored*/ ctx[14];
        
        			equation.$set(equation_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        				detach(br);
        
        			}
        
        
        
        			destroy_component(equation, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (548:0) {:else}
        
        function create_else_block_1(ctx) {
        
        	let equation0;
        
        	let t0;
        
        	let br0;
        
        	let t1;
        
        	let equation1;
        
        	let t2;
        
        	let br1;
        
        	let current;
        
        
        
        	equation0 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*dotProductAlgebric1_uncolored*/ ctx[13]
        
        			}
        
        		});
        
        
        
        	equation1 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*dotProductAlgebric2_uncolored*/ ctx[11]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation0.$$.fragment);
        
        			t0 = space();
        
        			br0 = element("br");
        
        			t1 = space();
        
        			create_component(equation1.$$.fragment);
        
        			t2 = space();
        
        			br1 = element("br");
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation0.$$.fragment, nodes);
        
        			t0 = claim_space(nodes);
        
        			br0 = claim_element(nodes, "BR", {});
        
        			t1 = claim_space(nodes);
        
        			claim_component(equation1.$$.fragment, nodes);
        
        			t2 = claim_space(nodes);
        
        			br1 = claim_element(nodes, "BR", {});
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation0, target, anchor);
        
        			insert_hydration(target, t0, anchor);
        
        			insert_hydration(target, br0, anchor);
        
        			insert_hydration(target, t1, anchor);
        
        			mount_component(equation1, target, anchor);
        
        			insert_hydration(target, t2, anchor);
        
        			insert_hydration(target, br1, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation0_changes = {};
        
        			if (dirty[0] & /*dotProductAlgebric1_uncolored*/ 8192) equation0_changes.markup = /*dotProductAlgebric1_uncolored*/ ctx[13];
        
        			equation0.$set(equation0_changes);
        
        			const equation1_changes = {};
        
        			if (dirty[0] & /*dotProductAlgebric2_uncolored*/ 2048) equation1_changes.markup = /*dotProductAlgebric2_uncolored*/ ctx[11];
        
        			equation1.$set(equation1_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation0.$$.fragment, local);
        
        			transition_in(equation1.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation0.$$.fragment, local);
        
        			transition_out(equation1.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t0);
        
        				detach(br0);
        
        				detach(t1);
        
        				detach(t2);
        
        				detach(br1);
        
        			}
        
        
        
        			destroy_component(equation0, detaching);
        
        			destroy_component(equation1, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (545:0) {#if $colourEq}
        
        function create_if_block_4(ctx) {
        
        	let equation0;
        
        	let t0;
        
        	let br0;
        
        	let t1;
        
        	let equation1;
        
        	let t2;
        
        	let br1;
        
        	let current;
        
        
        
        	equation0 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*dotProductAlgebric1_colored*/ ctx[12]
        
        			}
        
        		});
        
        
        
        	equation1 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*dotProductAlgebric2_colored*/ ctx[10]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation0.$$.fragment);
        
        			t0 = space();
        
        			br0 = element("br");
        
        			t1 = space();
        
        			create_component(equation1.$$.fragment);
        
        			t2 = space();
        
        			br1 = element("br");
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation0.$$.fragment, nodes);
        
        			t0 = claim_space(nodes);
        
        			br0 = claim_element(nodes, "BR", {});
        
        			t1 = claim_space(nodes);
        
        			claim_component(equation1.$$.fragment, nodes);
        
        			t2 = claim_space(nodes);
        
        			br1 = claim_element(nodes, "BR", {});
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation0, target, anchor);
        
        			insert_hydration(target, t0, anchor);
        
        			insert_hydration(target, br0, anchor);
        
        			insert_hydration(target, t1, anchor);
        
        			mount_component(equation1, target, anchor);
        
        			insert_hydration(target, t2, anchor);
        
        			insert_hydration(target, br1, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation0_changes = {};
        
        			if (dirty[0] & /*dotProductAlgebric1_colored*/ 4096) equation0_changes.markup = /*dotProductAlgebric1_colored*/ ctx[12];
        
        			equation0.$set(equation0_changes);
        
        			const equation1_changes = {};
        
        			if (dirty[0] & /*dotProductAlgebric2_colored*/ 1024) equation1_changes.markup = /*dotProductAlgebric2_colored*/ ctx[10];
        
        			equation1.$set(equation1_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation0.$$.fragment, local);
        
        			transition_in(equation1.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation0.$$.fragment, local);
        
        			transition_out(equation1.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t0);
        
        				detach(br0);
        
        				detach(t1);
        
        				detach(t2);
        
        				detach(br1);
        
        			}
        
        
        
        			destroy_component(equation0, detaching);
        
        			destroy_component(equation1, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (555:118) <Equation>
        
        function create_default_slot_96(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("hauteur = f(position)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "hauteur = f(position)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (559:178) <Equation>
        
        function create_default_slot_95(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("1");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "1");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (559:218) <Equation>
        
        function create_default_slot_94(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("0.5");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "0.5");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (559:261) <Equation>
        
        function create_default_slot_93(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("0.00001");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "0.00001");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (559:356) <Equation>
        
        function create_default_slot_92(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (559:486) <Equation>
        
        function create_default_slot_91(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (559:709) <Equation>
        
        function create_default_slot_90(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (560:296) <Equation>
        
        function create_default_slot_89(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("cos(x)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "cos(x)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (561:52) <Equation>
        
        function create_default_slot_88(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("dx");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "dx");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (561:116) <Equation>
        
        function create_default_slot_87(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("d");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "d");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (561:180) <Equation>
        
        function create_default_slot_86(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("x");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "x");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (561:294) <Equation>
        
        function create_default_slot_85(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("dx");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "dx");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (561:332) <Equation>
        
        function create_default_slot_84(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (562:0) <Equation>
        
        function create_default_slot_83(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("dx\\space");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "dx\\space");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (566:31) <Equation>
        
        function create_default_slot_82(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("a");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "a");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (575:48) <Equation>
        
        function create_default_slot_81(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("f’(x)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "f’(x)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (575:132) <Equation>
        
        function create_default_slot_80(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("f(x)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "f(x)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (579:96) <Equation>
        
        function create_default_slot_79(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("f(x, t)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "f(x, t)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (579:341) <Equation>
        
        function create_default_slot_78(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\partial x");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\partial x");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (579:463) <Equation>
        
        function create_default_slot_77(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\partial t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\partial t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (579:560) <Equation>
        
        function create_default_slot_76(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\partial");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\partial");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (579:632) <Equation>
        
        function create_default_slot_75(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("d");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "d");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (580:30) <Equation>
        
        function create_default_slot_74(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("f(x, y)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "f(x, y)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (580:136) <Equation>
        
        function create_default_slot_73(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("f(x, y, z)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "f(x, y, z)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (581:176) <Equation>
        
        function create_default_slot_72(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("f(x, y) = sin(x)cos(y)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "f(x, y) = sin(x)cos(y)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (582:27) <Equation>
        
        function create_default_slot_71(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("x");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "x");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (582:56) <Equation>
        
        function create_default_slot_70(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("y");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "y");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (586:18) <Equation>
        
        function create_default_slot_69(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("x");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "x");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (586:153) <Equation>
        
        function create_default_slot_68(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\space \\space");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\space \\space");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (587:18) <Equation>
        
        function create_default_slot_67(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("y");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "y");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (597:102) <Equation>
        
        function create_default_slot_66(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("(x, y)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "(x, y)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (597:158) <Equation>
        
        function create_default_slot_65(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("(-ay, bx)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "(-ay, bx)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (597:209) <Equation>
        
        function create_default_slot_64(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("(ax, by)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "(ax, by)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (598:59) <Equation>
        
        function create_default_slot_63(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("a");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "a");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (598:85) <Equation>
        
        function create_default_slot_62(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("b");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "b");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (600:0) <Equation>
        
        function create_default_slot_61(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("a");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "a");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (601:0) <Equation>
        
        function create_default_slot_60(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\enspace\\enspace b");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\enspace\\enspace b");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (607:189) <Equation>
        
        function create_default_slot_59(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\nabla");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\nabla");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (609:128) <Equation>
        
        function create_default_slot_58(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\partial");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\partial");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (611:0) <Equation>
        
        function create_default_slot_57(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\nabla");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\nabla");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (612:90) <Equation>
        
        function create_default_slot_56(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("f(x, y)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "f(x, y)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (612:171) <Equation>
        
        function create_default_slot_55(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("f(x, y)\\space");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "f(x, y)\\space");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (614:133) <Equation>
        
        function create_default_slot_54(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\partial \\space");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\partial \\space");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (639:36) <Equation>
        
        function create_default_slot_53(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\nabla q");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\nabla q");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (640:9) <Equation>
        
        function create_default_slot_52(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("q");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "q");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (640:213) <Equation>
        
        function create_default_slot_51(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\nabla");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\nabla");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (641:0) <Equation>
        
        function create_default_slot_50(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\nabla q");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\nabla q");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (642:63) <Equation>
        
        function create_default_slot_49(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("q");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "q");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (642:228) <Equation>
        
        function create_default_slot_48(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("q");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "q");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (642:282) <Equation>
        
        function create_default_slot_47(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("x");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "x");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (642:325) <Equation>
        
        function create_default_slot_46(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("q");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "q");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (642:377) <Equation>
        
        function create_default_slot_45(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("y");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "y");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (647:168) <Equation>
        
        function create_default_slot_44(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("\\nabla^2 \\Rightarrow \\Delta");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "\\nabla^2 \\Rightarrow \\Delta");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (651:169) <Equation>
        
        function create_default_slot_43(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("q");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "q");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (654:145) <Equation>
        
        function create_default_slot_42(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (656:416) <Equation>
        
        function create_default_slot_41(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("u");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "u");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (656:483) <Equation>
        
        function create_default_slot_40(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (675:92) <Equation>
        
        function create_default_slot_39(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("x = 3y - 9");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "x = 3y - 9");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (675:143) <Equation>
        
        function create_default_slot_38(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("x\\space");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "x\\space");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (675:211) <Equation>
        
        function create_default_slot_37(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("y");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "y");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (677:225) <Equation>
        
        function create_default_slot_36(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("(x, y, z)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "(x, y, z)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (678:70) <Equation>
        
        function create_default_slot_35(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("ax + by + c = 0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "ax + by + c = 0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (678:135) <Equation>
        
        function create_default_slot_34(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("y = mx + d");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "y = mx + d");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (678:355) <Equation>
        
        function create_default_slot_33(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("ax + by + cz + d = 0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "ax + by + cz + d = 0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (678:537) <Equation>
        
        function create_default_slot_32(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("ax + by + cz + dw + e = 0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "ax + by + cz + dw + e = 0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (679:228) <Equation>
        
        function create_default_slot_31(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("a");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "a");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (679:252) <Equation>
        
        function create_default_slot_30(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("b");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "b");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (679:276) <Equation>
        
        function create_default_slot_29(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("c");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "c");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (679:325) <Equation>
        
        function create_default_slot_28(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("d");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "d");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (718:0) {:else}
        
        function create_else_block(ctx) {
        
        	let p;
        
        	let t0;
        
        	let dynamic;
        
        	let t1;
        
        	let equation0;
        
        	let t2;
        
        	let range;
        
        	let t3;
        
        	let equation1;
        
        	let t4;
        
        	let current_block_type_index;
        
        	let if_block;
        
        	let if_block_anchor;
        
        	let current;
        
        
        
        	dynamic = new Dynamic({
        
        			props: {
        
        				store: /*iterationGS_current*/ ctx[113],
        
        				min: 1,
        
        				max: /*$iterationsGS*/ ctx[45],
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic.$on("change", /*change_handler*/ ctx[146]);
        
        
        
        	equation0 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_27] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range = new Range({
        
        			props: {
        
        				store: /*GS_lineNumber*/ ctx[114],
        
        				min: 1,
        
        				max: 3,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	equation1 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_26] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	const if_block_creators = [create_if_block_1, create_if_block_2, create_if_block_3];
        
        	const if_blocks = [];
        
        
        
        	function select_block_type_8(ctx, dirty) {
        
        		if (/*$GS_lineNumber*/ ctx[56] == 1) return 0;
        
        		if (/*$GS_lineNumber*/ ctx[56] == 2) return 1;
        
        		if (/*$GS_lineNumber*/ ctx[56] == 3) return 2;
        
        		return -1;
        
        	}
        
        
        
        	if (~(current_block_type_index = select_block_type_8(ctx))) {
        
        		if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
        
        	}
        
        
        
        	return {
        
        		c() {
        
        			p = element("p");
        
        			t0 = text$2("Numéro d’itération : ");
        
        			create_component(dynamic.$$.fragment);
        
        			t1 = text$2("\nNuméro de ligne : ");
        
        			create_component(equation0.$$.fragment);
        
        			t2 = space();
        
        			create_component(range.$$.fragment);
        
        			t3 = space();
        
        			create_component(equation1.$$.fragment);
        
        			t4 = space();
        
        			if (if_block) if_block.c();
        
        			if_block_anchor = empty();
        
        		},
        
        		l(nodes) {
        
        			p = claim_element(nodes, "P", {});
        
        			var p_nodes = children(p);
        
        			t0 = claim_text(p_nodes, "Numéro d’itération : ");
        
        			claim_component(dynamic.$$.fragment, p_nodes);
        
        			t1 = claim_text(p_nodes, "\nNuméro de ligne : ");
        
        			claim_component(equation0.$$.fragment, p_nodes);
        
        			t2 = claim_space(p_nodes);
        
        			claim_component(range.$$.fragment, p_nodes);
        
        			t3 = claim_space(p_nodes);
        
        			claim_component(equation1.$$.fragment, p_nodes);
        
        			p_nodes.forEach(detach);
        
        			t4 = claim_space(nodes);
        
        			if (if_block) if_block.l(nodes);
        
        			if_block_anchor = empty();
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, p, anchor);
        
        			append_hydration(p, t0);
        
        			mount_component(dynamic, p, null);
        
        			append_hydration(p, t1);
        
        			mount_component(equation0, p, null);
        
        			append_hydration(p, t2);
        
        			mount_component(range, p, null);
        
        			append_hydration(p, t3);
        
        			mount_component(equation1, p, null);
        
        			insert_hydration(target, t4, anchor);
        
        
        
        			if (~current_block_type_index) {
        
        				if_blocks[current_block_type_index].m(target, anchor);
        
        			}
        
        
        
        			insert_hydration(target, if_block_anchor, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const dynamic_changes = {};
        
        			if (dirty[1] & /*$iterationsGS*/ 16384) dynamic_changes.max = /*$iterationsGS*/ ctx[45];
        
        			dynamic.$set(dynamic_changes);
        
        			const equation0_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation0_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation0.$set(equation0_changes);
        
        			const equation1_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation1_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation1.$set(equation1_changes);
        
        			let previous_block_index = current_block_type_index;
        
        			current_block_type_index = select_block_type_8(ctx);
        
        
        
        			if (current_block_type_index === previous_block_index) {
        
        				if (~current_block_type_index) {
        
        					if_blocks[current_block_type_index].p(ctx, dirty);
        
        				}
        
        			} else {
        
        				if (if_block) {
        
        					group_outros();
        
        
        
        					transition_out(if_blocks[previous_block_index], 1, 1, () => {
        
        						if_blocks[previous_block_index] = null;
        
        					});
        
        
        
        					check_outros();
        
        				}
        
        
        
        				if (~current_block_type_index) {
        
        					if_block = if_blocks[current_block_type_index];
        
        
        
        					if (!if_block) {
        
        						if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
        
        						if_block.c();
        
        					} else {
        
        						if_block.p(ctx, dirty);
        
        					}
        
        
        
        					transition_in(if_block, 1);
        
        					if_block.m(if_block_anchor.parentNode, if_block_anchor);
        
        				} else {
        
        					if_block = null;
        
        				}
        
        			}
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(dynamic.$$.fragment, local);
        
        			transition_in(equation0.$$.fragment, local);
        
        			transition_in(range.$$.fragment, local);
        
        			transition_in(equation1.$$.fragment, local);
        
        			transition_in(if_block);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(dynamic.$$.fragment, local);
        
        			transition_out(equation0.$$.fragment, local);
        
        			transition_out(range.$$.fragment, local);
        
        			transition_out(equation1.$$.fragment, local);
        
        			transition_out(if_block);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(p);
        
        				detach(t4);
        
        				detach(if_block_anchor);
        
        			}
        
        
        
        			destroy_component(dynamic);
        
        			destroy_component(equation0);
        
        			destroy_component(range);
        
        			destroy_component(equation1);
        
        
        
        			if (~current_block_type_index) {
        
        				if_blocks[current_block_type_index].d(detaching);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (716:0) {#if GS_Vectors.length == 0 }
        
        function create_if_block(ctx) {
        
        	let p;
        
        	let textContent = "Générez une suite de Gauss-Siedel pour avoir accès au déroulement.";
        
        
        
        	return {
        
        		c() {
        
        			p = element("p");
        
        			p.textContent = textContent;
        
        		},
        
        		l(nodes) {
        
        			p = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p) !== "svelte-1kndhda") p.textContent = textContent;
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, p, anchor);
        
        		},
        
        		p: noop,
        
        		i: noop,
        
        		o: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(p);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (720:18) <Equation>
        
        function create_default_slot_27(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("1\\space");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "1\\space");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (720:104) <Equation>
        
        function create_default_slot_26(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("3");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "3");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (737:32) 
        
        function create_if_block_3(ctx) {
        
        	let equation0;
        
        	let t0;
        
        	let p;
        
        	let t1;
        
        	let strong;
        
        	let textContent = "troisième";
        
        	let t3;
        
        	let equation1;
        
        	let t4;
        
        	let t5;
        
        	let equation2;
        
        	let t6;
        
        	let br;
        
        	let t7;
        
        	let equation3;
        
        	let t8;
        
        	let equation4;
        
        	let t9;
        
        	let equation5;
        
        	let t10;
        
        	let equation6;
        
        	let current;
        
        
        
        	equation0 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_3_1*/ ctx[34]
        
        			}
        
        		});
        
        
        
        	equation1 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_25] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation2 = new Equation({
        
        			props: { display: "block", markup: gs_ln_3_2 }
        
        		});
        
        
        
        	equation3 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_3_3*/ ctx[33]
        
        			}
        
        		});
        
        
        
        	equation4 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_3_4*/ ctx[32]
        
        			}
        
        		});
        
        
        
        	equation5 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_3_5*/ ctx[31]
        
        			}
        
        		});
        
        
        
        	equation6 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_3_6*/ ctx[30]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation0.$$.fragment);
        
        			t0 = space();
        
        			p = element("p");
        
        			t1 = text$2("Nous nous servons ici de la ");
        
        			strong = element("strong");
        
        			strong.textContent = textContent;
        
        			t3 = text$2(" équation du système pour calculer la composante ");
        
        			create_component(equation1.$$.fragment);
        
        			t4 = text$2(" de l’itéré en cours.");
        
        			t5 = space();
        
        			create_component(equation2.$$.fragment);
        
        			t6 = space();
        
        			br = element("br");
        
        			t7 = space();
        
        			create_component(equation3.$$.fragment);
        
        			t8 = space();
        
        			create_component(equation4.$$.fragment);
        
        			t9 = space();
        
        			create_component(equation5.$$.fragment);
        
        			t10 = space();
        
        			create_component(equation6.$$.fragment);
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation0.$$.fragment, nodes);
        
        			t0 = claim_space(nodes);
        
        			p = claim_element(nodes, "P", {});
        
        			var p_nodes = children(p);
        
        			t1 = claim_text(p_nodes, "Nous nous servons ici de la ");
        
        			strong = claim_element(p_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong) !== "svelte-5qinem") strong.textContent = textContent;
        
        			t3 = claim_text(p_nodes, " équation du système pour calculer la composante ");
        
        			claim_component(equation1.$$.fragment, p_nodes);
        
        			t4 = claim_text(p_nodes, " de l’itéré en cours.");
        
        			p_nodes.forEach(detach);
        
        			t5 = claim_space(nodes);
        
        			claim_component(equation2.$$.fragment, nodes);
        
        			t6 = claim_space(nodes);
        
        			br = claim_element(nodes, "BR", {});
        
        			t7 = claim_space(nodes);
        
        			claim_component(equation3.$$.fragment, nodes);
        
        			t8 = claim_space(nodes);
        
        			claim_component(equation4.$$.fragment, nodes);
        
        			t9 = claim_space(nodes);
        
        			claim_component(equation5.$$.fragment, nodes);
        
        			t10 = claim_space(nodes);
        
        			claim_component(equation6.$$.fragment, nodes);
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation0, target, anchor);
        
        			insert_hydration(target, t0, anchor);
        
        			insert_hydration(target, p, anchor);
        
        			append_hydration(p, t1);
        
        			append_hydration(p, strong);
        
        			append_hydration(p, t3);
        
        			mount_component(equation1, p, null);
        
        			append_hydration(p, t4);
        
        			insert_hydration(target, t5, anchor);
        
        			mount_component(equation2, target, anchor);
        
        			insert_hydration(target, t6, anchor);
        
        			insert_hydration(target, br, anchor);
        
        			insert_hydration(target, t7, anchor);
        
        			mount_component(equation3, target, anchor);
        
        			insert_hydration(target, t8, anchor);
        
        			mount_component(equation4, target, anchor);
        
        			insert_hydration(target, t9, anchor);
        
        			mount_component(equation5, target, anchor);
        
        			insert_hydration(target, t10, anchor);
        
        			mount_component(equation6, target, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation0_changes = {};
        
        			if (dirty[1] & /*gs_ln_3_1*/ 8) equation0_changes.markup = /*gs_ln_3_1*/ ctx[34];
        
        			equation0.$set(equation0_changes);
        
        			const equation1_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation1_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation1.$set(equation1_changes);
        
        			const equation3_changes = {};
        
        			if (dirty[1] & /*gs_ln_3_3*/ 4) equation3_changes.markup = /*gs_ln_3_3*/ ctx[33];
        
        			equation3.$set(equation3_changes);
        
        			const equation4_changes = {};
        
        			if (dirty[1] & /*gs_ln_3_4*/ 2) equation4_changes.markup = /*gs_ln_3_4*/ ctx[32];
        
        			equation4.$set(equation4_changes);
        
        			const equation5_changes = {};
        
        			if (dirty[1] & /*gs_ln_3_5*/ 1) equation5_changes.markup = /*gs_ln_3_5*/ ctx[31];
        
        			equation5.$set(equation5_changes);
        
        			const equation6_changes = {};
        
        			if (dirty[0] & /*gs_ln_3_6*/ 1073741824) equation6_changes.markup = /*gs_ln_3_6*/ ctx[30];
        
        			equation6.$set(equation6_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation0.$$.fragment, local);
        
        			transition_in(equation1.$$.fragment, local);
        
        			transition_in(equation2.$$.fragment, local);
        
        			transition_in(equation3.$$.fragment, local);
        
        			transition_in(equation4.$$.fragment, local);
        
        			transition_in(equation5.$$.fragment, local);
        
        			transition_in(equation6.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation0.$$.fragment, local);
        
        			transition_out(equation1.$$.fragment, local);
        
        			transition_out(equation2.$$.fragment, local);
        
        			transition_out(equation3.$$.fragment, local);
        
        			transition_out(equation4.$$.fragment, local);
        
        			transition_out(equation5.$$.fragment, local);
        
        			transition_out(equation6.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t0);
        
        				detach(p);
        
        				detach(t5);
        
        				detach(t6);
        
        				detach(br);
        
        				detach(t7);
        
        				detach(t8);
        
        				detach(t9);
        
        				detach(t10);
        
        			}
        
        
        
        			destroy_component(equation0, detaching);
        
        			destroy_component(equation1);
        
        			destroy_component(equation2, detaching);
        
        			destroy_component(equation3, detaching);
        
        			destroy_component(equation4, detaching);
        
        			destroy_component(equation5, detaching);
        
        			destroy_component(equation6, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (729:32) 
        
        function create_if_block_2(ctx) {
        
        	let equation0;
        
        	let t0;
        
        	let p;
        
        	let t1;
        
        	let strong;
        
        	let textContent = "deuxième";
        
        	let t3;
        
        	let equation1;
        
        	let t4;
        
        	let t5;
        
        	let equation2;
        
        	let t6;
        
        	let br;
        
        	let t7;
        
        	let equation3;
        
        	let t8;
        
        	let equation4;
        
        	let t9;
        
        	let equation5;
        
        	let t10;
        
        	let equation6;
        
        	let current;
        
        
        
        	equation0 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_2_1*/ ctx[39]
        
        			}
        
        		});
        
        
        
        	equation1 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_24] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation2 = new Equation({
        
        			props: { display: "block", markup: gs_ln_2_2 }
        
        		});
        
        
        
        	equation3 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_2_3*/ ctx[38]
        
        			}
        
        		});
        
        
        
        	equation4 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_2_4*/ ctx[37]
        
        			}
        
        		});
        
        
        
        	equation5 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_2_5*/ ctx[36]
        
        			}
        
        		});
        
        
        
        	equation6 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_2_6*/ ctx[35]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation0.$$.fragment);
        
        			t0 = space();
        
        			p = element("p");
        
        			t1 = text$2("Nous nous servons ici de la ");
        
        			strong = element("strong");
        
        			strong.textContent = textContent;
        
        			t3 = text$2(" équation du système pour calculer la composante ");
        
        			create_component(equation1.$$.fragment);
        
        			t4 = text$2(" de l’itéré en cours.");
        
        			t5 = space();
        
        			create_component(equation2.$$.fragment);
        
        			t6 = space();
        
        			br = element("br");
        
        			t7 = space();
        
        			create_component(equation3.$$.fragment);
        
        			t8 = space();
        
        			create_component(equation4.$$.fragment);
        
        			t9 = space();
        
        			create_component(equation5.$$.fragment);
        
        			t10 = space();
        
        			create_component(equation6.$$.fragment);
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation0.$$.fragment, nodes);
        
        			t0 = claim_space(nodes);
        
        			p = claim_element(nodes, "P", {});
        
        			var p_nodes = children(p);
        
        			t1 = claim_text(p_nodes, "Nous nous servons ici de la ");
        
        			strong = claim_element(p_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong) !== "svelte-137hii5") strong.textContent = textContent;
        
        			t3 = claim_text(p_nodes, " équation du système pour calculer la composante ");
        
        			claim_component(equation1.$$.fragment, p_nodes);
        
        			t4 = claim_text(p_nodes, " de l’itéré en cours.");
        
        			p_nodes.forEach(detach);
        
        			t5 = claim_space(nodes);
        
        			claim_component(equation2.$$.fragment, nodes);
        
        			t6 = claim_space(nodes);
        
        			br = claim_element(nodes, "BR", {});
        
        			t7 = claim_space(nodes);
        
        			claim_component(equation3.$$.fragment, nodes);
        
        			t8 = claim_space(nodes);
        
        			claim_component(equation4.$$.fragment, nodes);
        
        			t9 = claim_space(nodes);
        
        			claim_component(equation5.$$.fragment, nodes);
        
        			t10 = claim_space(nodes);
        
        			claim_component(equation6.$$.fragment, nodes);
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation0, target, anchor);
        
        			insert_hydration(target, t0, anchor);
        
        			insert_hydration(target, p, anchor);
        
        			append_hydration(p, t1);
        
        			append_hydration(p, strong);
        
        			append_hydration(p, t3);
        
        			mount_component(equation1, p, null);
        
        			append_hydration(p, t4);
        
        			insert_hydration(target, t5, anchor);
        
        			mount_component(equation2, target, anchor);
        
        			insert_hydration(target, t6, anchor);
        
        			insert_hydration(target, br, anchor);
        
        			insert_hydration(target, t7, anchor);
        
        			mount_component(equation3, target, anchor);
        
        			insert_hydration(target, t8, anchor);
        
        			mount_component(equation4, target, anchor);
        
        			insert_hydration(target, t9, anchor);
        
        			mount_component(equation5, target, anchor);
        
        			insert_hydration(target, t10, anchor);
        
        			mount_component(equation6, target, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation0_changes = {};
        
        			if (dirty[1] & /*gs_ln_2_1*/ 256) equation0_changes.markup = /*gs_ln_2_1*/ ctx[39];
        
        			equation0.$set(equation0_changes);
        
        			const equation1_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation1_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation1.$set(equation1_changes);
        
        			const equation3_changes = {};
        
        			if (dirty[1] & /*gs_ln_2_3*/ 128) equation3_changes.markup = /*gs_ln_2_3*/ ctx[38];
        
        			equation3.$set(equation3_changes);
        
        			const equation4_changes = {};
        
        			if (dirty[1] & /*gs_ln_2_4*/ 64) equation4_changes.markup = /*gs_ln_2_4*/ ctx[37];
        
        			equation4.$set(equation4_changes);
        
        			const equation5_changes = {};
        
        			if (dirty[1] & /*gs_ln_2_5*/ 32) equation5_changes.markup = /*gs_ln_2_5*/ ctx[36];
        
        			equation5.$set(equation5_changes);
        
        			const equation6_changes = {};
        
        			if (dirty[1] & /*gs_ln_2_6*/ 16) equation6_changes.markup = /*gs_ln_2_6*/ ctx[35];
        
        			equation6.$set(equation6_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation0.$$.fragment, local);
        
        			transition_in(equation1.$$.fragment, local);
        
        			transition_in(equation2.$$.fragment, local);
        
        			transition_in(equation3.$$.fragment, local);
        
        			transition_in(equation4.$$.fragment, local);
        
        			transition_in(equation5.$$.fragment, local);
        
        			transition_in(equation6.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation0.$$.fragment, local);
        
        			transition_out(equation1.$$.fragment, local);
        
        			transition_out(equation2.$$.fragment, local);
        
        			transition_out(equation3.$$.fragment, local);
        
        			transition_out(equation4.$$.fragment, local);
        
        			transition_out(equation5.$$.fragment, local);
        
        			transition_out(equation6.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t0);
        
        				detach(p);
        
        				detach(t5);
        
        				detach(t6);
        
        				detach(br);
        
        				detach(t7);
        
        				detach(t8);
        
        				detach(t9);
        
        				detach(t10);
        
        			}
        
        
        
        			destroy_component(equation0, detaching);
        
        			destroy_component(equation1);
        
        			destroy_component(equation2, detaching);
        
        			destroy_component(equation3, detaching);
        
        			destroy_component(equation4, detaching);
        
        			destroy_component(equation5, detaching);
        
        			destroy_component(equation6, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (721:2) {#if $GS_lineNumber == 1}
        
        function create_if_block_1(ctx) {
        
        	let equation0;
        
        	let t0;
        
        	let p;
        
        	let t1;
        
        	let strong;
        
        	let textContent = "première";
        
        	let t3;
        
        	let equation1;
        
        	let t4;
        
        	let t5;
        
        	let equation2;
        
        	let t6;
        
        	let br;
        
        	let t7;
        
        	let equation3;
        
        	let t8;
        
        	let equation4;
        
        	let t9;
        
        	let equation5;
        
        	let t10;
        
        	let equation6;
        
        	let current;
        
        
        
        	equation0 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_1_1*/ ctx[44]
        
        			}
        
        		});
        
        
        
        	equation1 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_23] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation2 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_1_2*/ ctx[132]
        
        			}
        
        		});
        
        
        
        	equation3 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_1_3*/ ctx[43]
        
        			}
        
        		});
        
        
        
        	equation4 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_1_4*/ ctx[42]
        
        			}
        
        		});
        
        
        
        	equation5 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_1_5*/ ctx[41]
        
        			}
        
        		});
        
        
        
        	equation6 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_ln_1_6*/ ctx[40]
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			create_component(equation0.$$.fragment);
        
        			t0 = space();
        
        			p = element("p");
        
        			t1 = text$2("Nous nous servons ici de la ");
        
        			strong = element("strong");
        
        			strong.textContent = textContent;
        
        			t3 = text$2(" équation du système pour calculer la composante ");
        
        			create_component(equation1.$$.fragment);
        
        			t4 = text$2(" de l’itéré en cours.");
        
        			t5 = space();
        
        			create_component(equation2.$$.fragment);
        
        			t6 = space();
        
        			br = element("br");
        
        			t7 = space();
        
        			create_component(equation3.$$.fragment);
        
        			t8 = space();
        
        			create_component(equation4.$$.fragment);
        
        			t9 = space();
        
        			create_component(equation5.$$.fragment);
        
        			t10 = space();
        
        			create_component(equation6.$$.fragment);
        
        		},
        
        		l(nodes) {
        
        			claim_component(equation0.$$.fragment, nodes);
        
        			t0 = claim_space(nodes);
        
        			p = claim_element(nodes, "P", {});
        
        			var p_nodes = children(p);
        
        			t1 = claim_text(p_nodes, "Nous nous servons ici de la ");
        
        			strong = claim_element(p_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong) !== "svelte-1fox2sk") strong.textContent = textContent;
        
        			t3 = claim_text(p_nodes, " équation du système pour calculer la composante ");
        
        			claim_component(equation1.$$.fragment, p_nodes);
        
        			t4 = claim_text(p_nodes, " de l’itéré en cours.");
        
        			p_nodes.forEach(detach);
        
        			t5 = claim_space(nodes);
        
        			claim_component(equation2.$$.fragment, nodes);
        
        			t6 = claim_space(nodes);
        
        			br = claim_element(nodes, "BR", {});
        
        			t7 = claim_space(nodes);
        
        			claim_component(equation3.$$.fragment, nodes);
        
        			t8 = claim_space(nodes);
        
        			claim_component(equation4.$$.fragment, nodes);
        
        			t9 = claim_space(nodes);
        
        			claim_component(equation5.$$.fragment, nodes);
        
        			t10 = claim_space(nodes);
        
        			claim_component(equation6.$$.fragment, nodes);
        
        		},
        
        		m(target, anchor) {
        
        			mount_component(equation0, target, anchor);
        
        			insert_hydration(target, t0, anchor);
        
        			insert_hydration(target, p, anchor);
        
        			append_hydration(p, t1);
        
        			append_hydration(p, strong);
        
        			append_hydration(p, t3);
        
        			mount_component(equation1, p, null);
        
        			append_hydration(p, t4);
        
        			insert_hydration(target, t5, anchor);
        
        			mount_component(equation2, target, anchor);
        
        			insert_hydration(target, t6, anchor);
        
        			insert_hydration(target, br, anchor);
        
        			insert_hydration(target, t7, anchor);
        
        			mount_component(equation3, target, anchor);
        
        			insert_hydration(target, t8, anchor);
        
        			mount_component(equation4, target, anchor);
        
        			insert_hydration(target, t9, anchor);
        
        			mount_component(equation5, target, anchor);
        
        			insert_hydration(target, t10, anchor);
        
        			mount_component(equation6, target, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation0_changes = {};
        
        			if (dirty[1] & /*gs_ln_1_1*/ 8192) equation0_changes.markup = /*gs_ln_1_1*/ ctx[44];
        
        			equation0.$set(equation0_changes);
        
        			const equation1_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation1_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation1.$set(equation1_changes);
        
        			const equation3_changes = {};
        
        			if (dirty[1] & /*gs_ln_1_3*/ 4096) equation3_changes.markup = /*gs_ln_1_3*/ ctx[43];
        
        			equation3.$set(equation3_changes);
        
        			const equation4_changes = {};
        
        			if (dirty[1] & /*gs_ln_1_4*/ 2048) equation4_changes.markup = /*gs_ln_1_4*/ ctx[42];
        
        			equation4.$set(equation4_changes);
        
        			const equation5_changes = {};
        
        			if (dirty[1] & /*gs_ln_1_5*/ 1024) equation5_changes.markup = /*gs_ln_1_5*/ ctx[41];
        
        			equation5.$set(equation5_changes);
        
        			const equation6_changes = {};
        
        			if (dirty[1] & /*gs_ln_1_6*/ 512) equation6_changes.markup = /*gs_ln_1_6*/ ctx[40];
        
        			equation6.$set(equation6_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation0.$$.fragment, local);
        
        			transition_in(equation1.$$.fragment, local);
        
        			transition_in(equation2.$$.fragment, local);
        
        			transition_in(equation3.$$.fragment, local);
        
        			transition_in(equation4.$$.fragment, local);
        
        			transition_in(equation5.$$.fragment, local);
        
        			transition_in(equation6.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation0.$$.fragment, local);
        
        			transition_out(equation1.$$.fragment, local);
        
        			transition_out(equation2.$$.fragment, local);
        
        			transition_out(equation3.$$.fragment, local);
        
        			transition_out(equation4.$$.fragment, local);
        
        			transition_out(equation5.$$.fragment, local);
        
        			transition_out(equation6.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t0);
        
        				detach(p);
        
        				detach(t5);
        
        				detach(t6);
        
        				detach(br);
        
        				detach(t7);
        
        				detach(t8);
        
        				detach(t9);
        
        				detach(t10);
        
        			}
        
        
        
        			destroy_component(equation0, detaching);
        
        			destroy_component(equation1);
        
        			destroy_component(equation2, detaching);
        
        			destroy_component(equation3, detaching);
        
        			destroy_component(equation4, detaching);
        
        			destroy_component(equation5, detaching);
        
        			destroy_component(equation6, detaching);
        
        		}
        
        	};
        
        }
        
        
        
        // (739:108) <Equation>
        
        function create_default_slot_25(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("z");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "z");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (731:107) <Equation>
        
        function create_default_slot_24(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("y");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "y");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (723:107) <Equation>
        
        function create_default_slot_23(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("x");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "x");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (749:194) <Equation>
        
        function create_default_slot_22(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (749:258) <Equation>
        
        function create_default_slot_21(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t + \\Delta t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t + \\Delta t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (754:105) <Equation>
        
        function create_default_slot_20(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("(x, y)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "(x, y)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (766:0) <StaticContainer>
        
        function create_default_slot_19(ctx) {
        
        	let html_tag;
        
        	let raw_value = "{{< youtube BdNKbNypoVs >}}" + "";
        
        	let html_anchor;
        
        
        
        	return {
        
        		c() {
        
        			html_tag = new HtmlTagHydration(false);
        
        			html_anchor = empty();
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			html_tag = claim_html_tag(nodes, false);
        
        			html_anchor = empty();
        
        			this.h();
        
        		},
        
        		h() {
        
        			html_tag.a = html_anchor;
        
        		},
        
        		m(target, anchor) {
        
        			html_tag.m(raw_value, target, anchor);
        
        			insert_hydration(target, html_anchor, anchor);
        
        		},
        
        		p: noop,
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(html_anchor);
        
        				html_tag.d();
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (778:107) <Equation>
        
        function create_default_slot_18(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (778:316) <Equation>
        
        function create_default_slot_17(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (794:53) <Equation>
        
        function create_default_slot_16(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t + 1");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t + 1");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (794:191) <Equation>
        
        function create_default_slot_15(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t + 1");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t + 1");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (794:379) <Equation>
        
        function create_default_slot_14(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (806:92) <Equation>
        
        function create_default_slot_13(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("N = 3");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "N = 3");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (807:98) <Equation>
        
        function create_default_slot_12(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("N = 200");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "N = 200");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (810:147) <Equation>
        
        function create_default_slot_11(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (811:32) <Equation>
        
        function create_default_slot_10(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (839:180) <Equation>
        
        function create_default_slot_9(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (850:74) <Equation>
        
        function create_default_slot_8(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("(x, y)");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "(x, y)");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (850:114) <Equation>
        
        function create_default_slot_7(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t + 1");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t + 1");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (850:216) <Equation>
        
        function create_default_slot_6(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (850:341) <Equation>
        
        function create_default_slot_5(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("dt");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "dt");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (850:462) <Equation>
        
        function create_default_slot_4(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t - 1");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t - 1");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (850:706) <Equation>
        
        function create_default_slot_3(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("t + 1\\space");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "t + 1\\space");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (851:159) <Equation>
        
        function create_default_slot_2(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("dt");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "dt");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (896:192) <Equation>
        
        function create_default_slot_1(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("1");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "1");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        // (953:191) <Equation>
        
        function create_default_slot(ctx) {
        
        	let t;
        
        
        
        	return {
        
        		c() {
        
        			t = text$2("0");
        
        		},
        
        		l(nodes) {
        
        			t = claim_text(nodes, "0");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, t, anchor);
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(t);
        
        			}
        
        		}
        
        	};
        
        }
        
        
        
        function create_fragment(ctx) {
        
        	let p0;
        
        
        
        	let textContent = `<em>À Pascal et Aurélie de Kuro Café</em>,
        
        <em>À Éric C. qui, grâce au Jeu des Perles de Verre, m’a éveillé le goût de croiser les disciplines</em>,
        
        <em>À Tahra S.</em>`;
        
        
        
        	let t5;
        
        	let h10;
        
        	let textContent_1 = "Introduction.";
        
        	let t7;
        
        	let blockquote0;
        
        
        
        	let textContent_2 = `<p>Si la nécessité d’opérer sur certains signes rend l’abord des mathématiques difficile à bon nombre d’entre nous, en revanche, dès qu’il a surmonté l’obstacle, l’esprit se meut dans ce domaine avec une aisance qu’il n’a nulle part ailleurs, l’évidence étant ici immédiate et théoriquement instantanée, l’effort pour comprendre existant le plus souvent en fait mais non en droit.
        
        — Henri Bergson, <em>La Pensée et le Mouvant</em>, pp. 35–36</p>`;
        
        
        
        	let t11;
        
        	let p2;
        
        
        
        	let textContent_3 = `Après ma précédente exploration algorithmique de la glace solide et de ses cristaux bien ordonnés et symétriques, c’est à présent au tour des phases liquides et gazeuses de recevoir notre attention !
        
        Les premiers paraissaient peut-être trop rigide aux yeux de certains esprits turbulents, qui leur préféreront les phénomènes d’apparence plus fluides et chaotiques. Je les imagine plus touchés par la fumée qui s’envole doucement d’une cigarette incandescente, plus émerveillés devant le ciel tourbillonnant de la <em>Nuit Etoilée</em> de Van Gogh que par la dentelle géométrique ciselée sur la façade des cathédrales (mis à part, peut-être, celles dans le style flamboyant !)`;
        
        
        
        	let t15;
        
        	let p3;
        
        	let textContent_4 = `Ces derniers mois, j’ai pris l’habitude d’aller lire dans des cafés bordelais. En admirant longuement les motifs de <em>latte art</em>, dessinés en mousse de lait par la main habile de mes baristi préférés — bien aidés, certes, par les lois de la mécanique des fluides — l’envie de faire cet article, qui trottait dans ma tête depuis un moment, s’est ravivée.`;
        
        	let t19;
        
        	let p4;
        
        	let textContent_5 = `N’est-il pas fascinant que les mêmes phénomènes se retrouvent tant à l’échelle de l’eau de notre bain brassée par nos mains qu’à celles des mouvements titanesques tourmentant l’atmosphère des géantes gazeuses ? N’est-il pas vertigineux que le petit tourbillon évanescent de la baignoire et l’inépuisable tornade que l’on appelle la « tache » de Jupiter soient tous décrits par les <em>mêmes</em> équations ?`;
        
        	let t23;
        
        	let p5;
        
        	let textContent_6 = `Il se trouve que les intriguantes volutes que la nature forme dans ces circonstances ont inspiré, depuis l’Orient, les artistes à travers les cultures et les âges, qui ont vu en elles un fabuleux moyen d’ornementation. Quoi d’étonnant à ce que la sensibilité japonaise fut la première à s’en saisir ? L’art du <em>suminagashi</em> (de <em>sumi</em> « encre » et <em>nagashi</em> « qui flotte sur l’eau en mouvement »), remontant à l’époque Heian, apprivoisa ces forces douces pour la première fois. Les motifs uniques qui en découlent, jamais reproductibles à l’identique, illustreront les poèmes de l’aristocratie, les textes sacrés, mais orneront également des objets plus prosaïques, utilisés au quotidien.`;
        
        	let t31;
        
        	let p6;
        
        
        
        	let textContent_7 = `Art ésotérique suivant une logique d’initiation maître-élève et réservé, durant la majeure partie de son histoire, aux hautes sphères sociales, il servit parfois même à estampiller du sceau de l’authenticité (et de l’unicité) certains documents officiels.
        
        On raconte qu’au XVII<sup>e</sup> siècle, on colmatait chaque petit trou, chaque interstice entre les planches de la façade des ateliers, de crainte que des regards indiscrets ne tentent d’en dérober le secret ! Les patrons les plus scrupuleux allaient jusqu’à imposer une stricte division du travail entre leurs employés, experts dans une seule étape du processus, pour qu’aucun ne puisse se sentir pousser des ailes et aller ouvrir un atelier concurrent !`;
        
        
        
        	let t35;
        
        	let p7;
        
        	let textContent_8 = `A la suite à d’échanges culturels vers l’Ouest via la route de la soie, les musulmans du Moyen-Âge se l’approprièrent et en perfectionnèrent la technique. Transitant par la Perse, il devient l’<em>abrī</em>, où l’innovation fût de mélanger des agents épaississant à l’eau, qui, augmentant sa viscosité, augmentait en raison directe le nombre de pigments dont on pouvait se servir — les plus lourds ne coulaient plus — tout autant que le contrôle que l’on exerçait sur eux, puisqu’ils se diffusaient moins ! Son caractère non explicitement figuratif se mariait parfaitement avec la frilosité islamique envers toute dépiction d’êtres vivants qui, déjà, rendirent cette civilisation maîtresse de l’ornementation géométrique en contrepartie. Arrivé en Turquie à la fin du XV<sup>e</sup> siècle, il prit la forme relativement fixe de l’<em>ebrû</em>, l’« art des nuages », fierté nationale inscrite au patrimoine immatériel de l’UNESCO depuis 2014. Certains religieux d’alors iront jusqu’à lui attribuer une signification mystique, croyant voir dans cette pratique un parfait exemple d’harmonie entre la volonté divine (<em>külli rade</em>), exprimée par le mouvement de l’eau, et le libre arbitre humain (<em>cüzi irade</em>) décidant de l’instant opportun pour y adjoindre l’encre. Les papiers <em>ebrû</em> devinrent alors, ici aussi, un support de prédilection pour les écritures saintes.`;
        
        	let t49;
        
        	let p8;
        
        	let textContent_9 = `Tardivement, la découverte de cette technique par les chrétiens occidentaux, qu’ils pensaient être à l’imitation du marbre, la matière noble de leurs propres arts, la popularisa sous le nom de « marbrure ». Nous parlerons donc de « papier marbré » pour qualifier ses productions, dont le succès dans l’art de la reliure d’ouvrages sera immense. Dans la tradition soufie, qui considérait au contraire le <em>qalam</em> (un instrument en roseau taillé servant à écrire et dessiner) comme l’une des premières créations de Dieu — dont un usage vertueux par l’Homme ne pouvait que permettre de s’en rapprocher — un étonnant motif pictural de cheval décharné zébré de marbures fut ainsi, semble-t-il, symbole du mariage de l’éveil spirituel avec la vie profane.`;
        
        	let t53;
        
        	let p9;
        
        
        
        	let textContent_10 = `Depuis les ouvrages synthétiques de l’anglais Charles Woolnough <em>The Whole Art of Marbling as Applied to Paper</em> (1851) et de Josef Halfer, <em>The Progress of the Marbling Art</em> (1893), dont la publication provoqua le scandale des initiés, cet art a presque entièrement perdu son halo de mystère.
        
        Cependant, loin d’en démocratiser l’usage, ils accompagnèrent sa progressive désuétude, ces papiers se trouvant remplacés par les motifs standardisés, sans âme mais bien moins coûteux de l’industrialisation naissante.
        
        Aujourd’hui, il existerait moins d’une dizaine de marbreurs actifs en France, et la situation n’est guère plus enviable au Royaume-Uni : cet artisanat figure sur la liste rouge des savoir-faire en danger de la Heritage Crafts Association.
        
        Il me semble cependant qu’un regain d’intérêt contemporain envers cette pratique — outre le mien ! — soit en train de poindre. Parmi les signaux faibles qui l’attestent, les deux ouvrages précédemment cités ont par exemple fait l’objet d’une réédition en 2019. Mais tout cela reste à confirmer !`;
        
        
        
        	let t59;
        
        	let p10;
        
        	let textContent_11 = "Dans cet article, nous apprendrons pas à pas les étapes pour simuler numériquement ces phénomènes fluides dans un contexte artistique. Nous nous servirons de notre compréhension nouvelle pour réaliser deux projets :";
        
        	let t61;
        
        	let ul0;
        
        	let textContent_12 = `<li>Un simulateur de marbrure, imitant (approximativement) le procédé ;</li> <li>Un projet synesthésique qui associera les paramètres d’une simulation de vapeur, à quelques propriétés acoustico-perceptives d’une musique de votre choix, évoluant au rythme de l’écoute de celle-ci ! De quoi ravir les amateurs de v a p o r w a v e. Je me baserai sur les données extraites de l’analyse acoustique de Spotify, vous aurez donc besoin d’un compte pour y avoir accès. Il vous suffira simplement de vous connecter depuis cette page, nous nous chargeons automatiquement du reste !</li>`;
        
        	let t65;
        
        	let p11;
        
        	let textContent_13 = `Pourquoi vouloir « informatiser » la marbrure ? Est-ce là une tentative de l’enfermer, elle aussi, dans ce que les philosophes nomment parfois la <em>mathesis universalis</em> ? Ne trouvez-vous pas qu’il y a une affinité secrète entre cet art millénaire et les expérimentations contemporaines de <a href="https://simontlg.io/art-generatif-et-emotions-esthetiques/" rel="nofollow">l’art génératif</a> ?`;
        
        	let t71;
        
        	let p12;
        
        
        
        	let textContent_14 = `Au cœur de la pensée informatique, dont on vilipende souvent à raison les aspirations au « contrôle », se loge pourtant un certain idéal de passivité, de laisser-faire, qui n’est pas moins épargné de critiques. Citons par exemple Jonathan Swift, qui se moquait, dans <em>Les Voyages de Gulliver</em> (1726) de tout « système combinatoire », qu’il s’agisse de celui de Raymond Lulle, un des premiers de l’Histoire, ou du projet de jeunesse de « <a href="https://fr.wikipedia.org/wiki/Caract%C3%A9ristique_universelle" rel="nofollow">caractéristique universelle</a> » du philosophe Leibniz, dont on peut dire que l’informatique, avec ses « raisonnements automatiques » hérite en partie. Leurs champions rêveraient secrètement de parvenir, par leur moyen, à écrire de la poésie, de la philosophie ou des mathématiques, sans faire le moindre usage de génie créatif, par crainte — sans aucun doute infondée — d’en être dépourvu.
        
        Laisser l’enchaînement des « lois de la nature », ou des étapes de l’algorithme confectionné par le programmeur expert (filtres Instagram, modèles génératifs Texte-Image comme <a href="https://openai.com/dall-e-3/" rel="nofollow">DALL-E</a> d’OpenAI), réaliser le gros du travail, n’apportant de soi-même à l’ouvrage qu’une légère « perturbation » initiale peu coûteuse pour ensuite s’en réclamer l’auteur, n’est-ce pas là un rêve difficilement avouable qu’auraient en commun leurs différents adeptes ? Les marbreurs, en tout cas, s’en défendent. Ils ne cessent d’insister sur les heures innombrables d’apprentissage nécessaires à la maîtrise de leurs gestes, et nous voulons bien les croire ! Ne pouvons-nous pas plutôt, dans une analyse bien moins suspicieuse, considérer que la marbrure serait comme une <em>aventure</em> en minature ? En effet, qu’est-ce une aventure sinon la décision consciente, après quelque « prise de position » (l’achat d’un billet d’avion, une invitation à boire un café, …), d’oser aller rencontrer l’imprévu, le mouvant du monde, toujours sur le point de nous emporter et de nous déstabiliser ? De ce point de vue, cet art pourrait être lu comme un symbole capturant parfaitement la réelle puissance de notre humaine volonté : alors que nous introduisions cet article avec les mots Henri Bergson, admirez maintenant comme ceux de l’un de ses plus illustres disciples viennent merveilleusement à propos !`;
        
        
        
        	let t81;
        
        	let blockquote1;
        
        
        
        	let textContent_15 = `<p>L’homme n’est qu’un demi dieu, comme sa liberté n’est que demie liberté, comme sa puissance est non pas toute-puissance, mais moitié de puissance : le <em>fiat</em> initial est seul entre ses mains, et seulement pour l’amorçage d’une entreprise qui se déroule ensuite toute seule.
        
        Vladimir Jankélévitch, <em>L’aventure, l’ennui, le sérieux</em>, p. 21</p>`;
        
        
        
        	let t87;
        
        	let p14;
        
        	let textContent_16 = "Quant à l’informatique, ne serait-elle pas de son côté une sorte de « cristallisation » et d’« extériorisation » d’habitudes longuement conquises au préalable par un esprit actif ?\nMais nous nous égarons, et nous avons malheureusement déjà bien trop disserté sur ces fascinantes questions, qui mériteraient de bien nombreuses distinctions, et ce n’est pas ici le lieu de telles réflexions. Laissons les donc de côté, et abandonnons toute tentative de justification, puisque dans tous les cas, notre projet ici est, tout simplement, très amusant. Bien souvent, c’est amplement suffisant !";
        
        	let t89;
        
        	let p15;
        
        	let t90;
        
        	let a3_1;
        
        	let textContent_17 = "l’article sur les flocons de neige";
        
        	let t92;
        
        	let a4;
        
        	let textContent_18 = "P5.js";
        
        	let t94;
        
        	let em23;
        
        	let textContent_19 = "temps réel";
        
        	let t96;
        
        	let em24;
        
        	let textContent_20 = "entièrement";
        
        	let t98;
        
        	let equation0;
        
        	let t99;
        
        	let equation1;
        
        	let t100;
        
        	let equation2;
        
        	let t101;
        
        	let t102;
        
        	let p16;
        
        	let textContent_21 = "A ce stade, peut-être vous dites-vous quelque chose de ce genre : « la mécanique des fluides » — la simple invocation de cet intitulé suffit à faire s’enfuir plus d’un — a la réputation d’être un sujet très difficile. Comment alors une innovation aussi « récente » autour de ce domaine pourrait-elle être accessible aux débutants ?";
        
        	let t104;
        
        	let p17;
        
        
        
        	let textContent_22 = `<strong>Mon but sera de vous démontrer que c’est le cas.</strong> C’est pourquoi j’ai essayé de penser ce module aussi <em>auto-contenu</em> que faire se peut, en partant des « premiers principes ». Mon sentiment, c’est que la compréhension nécessaire à la reproduction de ces effets spectaculaires est accessible à un lycéen en classe de terminale motivé, moyennant bien sûr quelques bases d’algorithmie. C’est aujourd’hui, fort heureusement, une chose de plus en plus répandue !
        
        Les seules notions à maîtriser au préalable sont la <strong>résolution de systèmes d’équations linéaires</strong>, les <strong>vecteurs</strong>, la <strong>trigonométrie</strong>, et l’idée de <strong>dérivation</strong>. Je construirai les quelques notions plus avancées dont nous aurons besoin progressivement depuis ce socle, en expliquant, à chaque fois, le strict nécessaire à notre but. La difficulté principale ne sera pas, à mon sens, conceptuelle, mais découlera de la <em>combinaison</em> de toutes ces notions qu’à ce stade, l’étudiant n’aura surtout connues qu’en chapitres séparés !`;
        
        
        
        	let t119;
        
        	let p18;
        
        	let textContent_23 = "Les premières sections seront consacrées à des rappels concernant ces notions fondamentales qu’il sera possible aux lecteurs plus avancés de sauter. Cependant, je les traiterai via des modèles jouables, une manière qui, je l’espère, les rendront agréables à réviser.";
        
        	let t121;
        
        	let h11;
        
        	let textContent_24 = "Vue d’ensemble";
        
        	let t123;
        
        	let h12;
        
        	let textContent_25 = "Vecteurs et trigonométrie";
        
        	let t125;
        
        	let h20;
        
        	let textContent_26 = "Élements de base";
        
        	let t127;
        
        	let sketch0;
        
        	let t128;
        
        	let p19;
        
        	let t129;
        
        	let strong5;
        
        	let textContent_27 = "cercle trigonométrique";
        
        	let t131;
        
        	let strong6;
        
        	let textContent_28 = "Faites varier";
        
        	let t133;
        
        	let em27;
        
        	let textContent_29 = "cosinus";
        
        	let t135;
        
        	let span0;
        
        	let textContent_30 = "───";
        
        	let t137;
        
        	let em28;
        
        	let textContent_31 = "sinus";
        
        	let t139;
        
        	let span1;
        
        	let textContent_32 = "───";
        
        	let t141;
        
        	let equation3;
        
        	let t142;
        
        	let em29;
        
        	let textContent_33 = "radians";
        
        	let t144;
        
        	let span2;
        
        	let textContent_34 = "───";
        
        	let t146;
        
        	let equation4;
        
        	let t147;
        
        	let t148;
        
        	let equation5;
        
        	let t149;
        
        	let dynamic0;
        
        	let t150;
        
        	let p20;
        
        	let t151;
        
        	let em30;
        
        	let textContent_35 = "sinus";
        
        	let t153;
        
        	let strong7;
        
        	let t154_value = /*$computed_sinusx*/ ctx[46].toFixed(3) + "";
        
        	let t154;
        
        	let t155;
        
        	let equation6;
        
        	let t156;
        
        	let dynamic1;
        
        	let t157;
        
        	let p21;
        
        	let t158;
        
        	let em31;
        
        	let textContent_36 = "cosinus";
        
        	let t160;
        
        	let strong8;
        
        	let t161_value = /*$computed_cosinusx*/ ctx[47].toFixed(3) + "";
        
        	let t161;
        
        	let t162;
        
        	let p22;
        
        
        
        	let textContent_37 = `S’il y a une notion fondamentale à maîtriser pour ce qui suit, c’est celle-ci !
        
        On nous apprend en classe de seconde qu’un <em>vecteur</em>, terme bien intimidant, est un « déplacement » et qu’il est <em>indépendant</em> d’une position donnée dans l’espace, que nous représenterons ici par un repère de coordonnées cartésiennes.
        
        Il faut reconnaître que cette première rencontre est assez déstabilisante. Après avoir passé toutes nos années de collège à manipuler des « nombres », en quoi un « déplacement » aurait-il le moindre sens mathématique ?
        
        Reprenons ensemble les bases sans y faire allusion et voyons ensuite en quoi cette notion de « déplacement » pourrait être éclairée par les vecteurs.`;
        
        
        
        	let t168;
        
        	let p23;
        
        	let t169;
        
        	let em34;
        
        	let textContent_38 = "quantité";
        
        	let t171;
        
        	let em35;
        
        	let textContent_39 = "quantité";
        
        	let t173;
        
        	let em36;
        
        	let textContent_40 = "direction";
        
        	let t175;
        
        	let em37;
        
        	let textContent_41 = "magnitude";
        
        	let t177;
        
        	let em38;
        
        	let textContent_42 = "intensité";
        
        	let t179;
        
        	let equation7;
        
        	let t180;
        
        	let equation8;
        
        	let t181;
        
        	let equation9;
        
        	let t182;
        
        	let equation10;
        
        	let t183;
        
        	let equation11;
        
        	let t184;
        
        	let t185;
        
        	let p24;
        
        	let textContent_43 = "Manipulez ces deux composantes et observez le vecteur résultant dans le petit graphique ci-dessous !";
        
        	let t187;
        
        	let p25;
        
        	let em39;
        
        	let textContent_44 = "Direction";
        
        	let t189;
        
        	let equation12;
        
        	let t190;
        
        	let equation13;
        
        	let t191;
        
        	let range0;
        
        	let t192;
        
        	let equation14;
        
        	let t193;
        
        	let t194;
        
        	let t195;
        
        	let t196;
        
        	let p26;
        
        	let em40;
        
        	let textContent_45 = "Magnitude";
        
        	let t198;
        
        	let equation15;
        
        	let t199;
        
        	let range1;
        
        	let t200;
        
        	let t201;
        
        	let t202;
        
        	let t203;
        
        	let checkbox0;
        
        	let t204;
        
        	let checkbox1;
        
        	let t205;
        
        	let sketch1;
        
        	let t206;
        
        	let p27;
        
        	let t207;
        
        	let em41;
        
        	let textContent_46 = "ne dépendant pas";
        
        	let t209;
        
        	let equation16;
        
        	let t210;
        
        	let t211;
        
        	let current_block_type_index;
        
        	let if_block0;
        
        	let t212;
        
        	let p28;
        
        	let textContent_47 = `Manipulez donc maintenant uniquement les coordonnées de ce point, et voyez comment nous pouvons, grâce à ces seules informations, retrouver à l’inverse la <em>magnitude</em> et la <em>direction</em> du vecteur qu’il définit.`;
        
        	let t218;
        
        	let equation17;
        
        	let t219;
        
        	let range2;
        
        	let t220;
        
        	let t221;
        
        	let t222;
        
        	let equation18;
        
        	let t223;
        
        	let range3;
        
        	let t224;
        
        	let t225;
        
        	let t226;
        
        	let sketch2;
        
        	let t227;
        
        	let h40;
        
        	let textContent_48 = "Magnitude :";
        
        	let t229;
        
        	let current_block_type_index_1;
        
        	let if_block1;
        
        	let t230;
        
        	let h41;
        
        	let textContent_49 = "Direction :";
        
        	let t232;
        
        	let current_block_type_index_2;
        
        	let if_block2;
        
        	let t233;
        
        	let p29;
        
        	let t234;
        
        	let equation19;
        
        	let t235;
        
        	let equation20;
        
        	let t236;
        
        	let equation21;
        
        	let t237;
        
        	let equation22;
        
        	let t238;
        
        	let em44;
        
        	let textContent_50 = "inverses";
        
        	let t240;
        
        	let equation23;
        
        	let t241;
        
        	let equation24;
        
        	let t242;
        
        	let equation25;
        
        	let t243;
        
        	let equation26;
        
        	let t244;
        
        	let equation27;
        
        	let t245;
        
        	let equation28;
        
        	let t246;
        
        	let em45;
        
        	let textContent_51 = "ensemble";
        
        	let t248;
        
        	let equation29;
        
        	let t249;
        
        	let em46;
        
        	let textContent_52 = "signe";
        
        	let t251;
        
        	let equation30;
        
        	let t252;
        
        	let t253;
        
        	let h21;
        
        	let textContent_53 = "Opérations basiques sur les vecteurs";
        
        	let t255;
        
        	let p30;
        
        	let t256;
        
        	let strong9;
        
        	let textContent_54 = "addition";
        
        	let t258;
        
        	let strong10;
        
        	let textContent_55 = "multiplication par un scalaire";
        
        	let t260;
        
        	let em47;
        
        	let textContent_56 = "produit scalaire";
        
        	let t262;
        
        	let em48;
        
        	let textContent_57 = "produit vectoriel";
        
        	let t264;
        
        	let em49;
        
        	let textContent_58 = "scalaire";
        
        	let t266;
        
        	let equation31;
        
        	let t267;
        
        	let em50;
        
        	let textContent_59 = "vectoriel";
        
        	let t269;
        
        	let equation32;
        
        	let t270;
        
        	let t271;
        
        	let h30;
        
        	let textContent_60 = "Addition";
        
        	let t273;
        
        	let p31;
        
        
        
        	let textContent_61 = `Nous retrouvons ici en <span style="color: blue; font-style: bold;">bleu</span> le vecteur que vous avez dessiné un peu plus haut, et nous en définissons un deuxième en <span style="color: red; font-style: bold;">rouge</span> dont vous pouvez également ajuster les coordonnées. Le vecteur <span style="color: lightgreen; font-style: bold;">vert</span> est le résultat de l’addition de ces deux vecteurs !
        
        Pour apprécier la façon dont il se construit sur notre graphique, cochez la case « bout à bout » !`;
        
        
        
        	let t281;
        
        	let equation33;
        
        	let t282;
        
        	let range4;
        
        	let t283;
        
        	let t284;
        
        	let t285;
        
        	let equation34;
        
        	let t286;
        
        	let range5;
        
        	let t287;
        
        	let t288;
        
        	let t289;
        
        	let br0;
        
        	let t290;
        
        	let equation35;
        
        	let t291;
        
        	let range6;
        
        	let t292;
        
        	let t293;
        
        	let t294;
        
        	let equation36;
        
        	let t295;
        
        	let range7;
        
        	let t296;
        
        	let t297;
        
        	let t298;
        
        	let br1;
        
        	let t299;
        
        	let br2;
        
        	let t300;
        
        	let checkbox2;
        
        	let t301;
        
        	let checkbox3;
        
        	let t302;
        
        	let sketch3;
        
        	let t303;
        
        	let p32;
        
        	let textContent_62 = "Algébriquement, les coordonnées du vecteur résultant se calculent ainsi, en additionnant simplement terme-à-terme les coordonnées des deux vecteurs :";
        
        	let t305;
        
        	let current_block_type_index_3;
        
        	let if_block3;
        
        	let t306;
        
        	let p33;
        
        	let textContent_63 = `Admirez comme cela prend sens lorsque nous considérons bel et bien l’idée de vecteur comme un <strong>déplacement</strong>. Se déplacer en suivant le vecteur <span style="color: blue; font-style: bold;">bleu</span>, puis ensuite, à partir de la position que nous atteignons, se déplacer en suivant le vecteur <span style="color: red; font-style: bold;">rouge</span>, cela revient exactement au même que si nous nous étions déplacés en suivant le vecteur <span style="color: lightgreen; font-style: bold;">vert</span> de depuis notre position initiale ! La somme de ces deux « mouvements » est donc équivalent à l’unique mouvement que désigne le vecteur <span style="color: lightgreen; font-style: bold;">vert</span>, ce que nous voyons bien en mettant les vecteurs bout à bout !`;
        
        	let t318;
        
        	let h31;
        
        	let textContent_64 = "Multiplication par un scalaire";
        
        	let t320;
        
        	let p34;
        
        	let t321;
        
        	let em51;
        
        	let textContent_65 = "scalaire";
        
        	let t323;
        
        	let em52;
        
        	let textContent_66 = "scale";
        
        	let t325;
        
        	let em53;
        
        	let textContent_67 = "scala";
        
        	let t327;
        
        	let em54;
        
        	let textContent_68 = "to scale";
        
        	let t329;
        
        	let em55;
        
        	let textContent_69 = "mettre à l’échelle";
        
        	let t331;
        
        	let em56;
        
        	let textContent_70 = "mis à l’échelle";
        
        	let t333;
        
        	let equation37;
        
        	let t334;
        
        	let t335;
        
        	let p35;
        
        	let em57;
        
        	let textContent_71 = "Scalaire";
        
        	let t337;
        
        	let range8;
        
        	let t338;
        
        	let t339;
        
        	let t340;
        
        	let t341;
        
        	let sketch4;
        
        	let t342;
        
        	let br3;
        
        	let t343;
        
        	let current_block_type_index_4;
        
        	let if_block4;
        
        	let t344;
        
        	let p36;
        
        	let textContent_72 = `Au passage, vous trouverez ici expliqué pourquoi on emploie les termes de <em>produit scalaire</em> et de <em>produit vectoriel</em> pour désigner les deux manières usuelles de combiner deux vecteurs entre eux. Comme leur nom le suggère, dans le premier cas le résultat de l’opération sera un <em>scalaire</em>, tandis que dans le second cas il s’agira d’un <em>vecteur</em>.`;
        
        	let t354;
        
        	let h32;
        
        	let textContent_73 = "Produit scalaire";
        
        	let t356;
        
        	let p37;
        
        
        
        	let textContent_74 = `Nous pouvons approcher le produit scalaire de manière géométrique ou de manière algébrique. La dernière ravira tous les amateurs de formules « simples » à appliquer sans réfléchir, mais nous illustrerons ici la première pour bien en saisir le sens !
        
        Par soucis de succinteté, je n’expliciterai pas l’enchaînement logique qui permet de passer de l’une à l’autre, mais pour ceux que cela intéresse, sachez qu’il existe plusieurs perspectives : à ma connaissance, l’une implique le <a href="https://fr.wikipedia.org/wiki/Produit_scalaire#Loi_des_cosinus" rel="nofollow">théorème de Pythagore généralisé</a>, et l’autre les <a href="https://www.youtube.com/watch?v=LyGKycYT2v0&amp;ab_channel=3Blue1Brown" rel="nofollow">transformations linéaires</a>.`;
        
        
        
        	let t362;
        
        	let h42;
        
        	let textContent_75 = "Approche géométrique";
        
        	let t364;
        
        	let equation38;
        
        	let t365;
        
        	let equation39;
        
        	let t366;
        
        	let range9;
        
        	let t367;
        
        	let t368;
        
        	let t369;
        
        	let equation40;
        
        	let t370;
        
        	let range10;
        
        	let t371;
        
        	let t372;
        
        	let t373;
        
        	let br4;
        
        	let t374;
        
        	let equation41;
        
        	let t375;
        
        	let equation42;
        
        	let t376;
        
        	let range11;
        
        	let t377;
        
        	let t378;
        
        	let t379;
        
        	let equation43;
        
        	let t380;
        
        	let range12;
        
        	let t381;
        
        	let t382;
        
        	let t383;
        
        	let sketch5;
        
        	let t384;
        
        	let p38;
        
        	let textContent_76 = `La ligne <span style="color: #008080; font-style: bold">-----</span> représente la <strong>projection orthogonale</strong> (comme la trajectoire du « rayon d’un soleil » situé à l’infini de cette droite) du vecteur <span style="color: #0000FF; font-style: bold"><strong>──►</strong></span> sur la droite où se situe le vecteur <span style="color: #FF0000; font-style: bold"><strong>──►</strong></span>, créant alors un nouveau vecteur <span style="color: #00FF00; font-style: bold"><strong>──►</strong></span> (« l’ombre » de <span style="color: #0000FF; font-style: bold"><strong>──►</strong></span> projetée par le soleil) aligné sur la droite que dirige <span style="color: #FF0000; font-style: bold"><strong>──►</strong></span> (la « surface » sur laquelle s’imprime l’ombre).`;
        
        	let t400;
        
        	let p39;
        
        
        
        	let textContent_77 = `Le produit scalaire désigne alors la <strong>multiplication</strong> de la magnitude de <span style="color: #00FF00; font-style: bold"><strong>──►</strong></span> avec la magnitude de <span style="color: #FF0000; font-style: bold"><strong>──►</strong></span> soit l’équivalent de l’aire du rectangle que vous pouvez voir se dessiner sur le sketch ! Observez comme la couleur de ce dernier change parfois du bleu au rosé : la raison est que lorsque ces deux vecteurs se trouvent dans des directions opposées, le produit scalaire est <strong>négatif</strong>.
        
        L’hésitez pas à jouer un moment avec les paramètres ci-dessus pour bien intégrer ces concepts.`;
        
        
        
        	let t410;
        
        	let p40;
        
        	let textContent_78 = `Le produit scalaire, comme tous les produits ordinaires, est <strong>commutatif</strong> : c’est-à-dire que sa valeur serait identique si, à l’inverse, nous avions ici projeté le vecteur <span style="color: #FF0000; font-style: bold">——►</span> sur le vecteur <span style="color: #0000FF; font-style: bold">——►</span>.`;
        
        	let t418;
        
        	let p41;
        
        	let t419;
        
        	let equation44;
        
        	let t420;
        
        	let t421;
        
        	let current_block_type_index_5;
        
        	let if_block5;
        
        	let t422;
        
        	let h43;
        
        	let textContent_79 = "Calcul algébrique";
        
        	let t424;
        
        	let current_block_type_index_6;
        
        	let if_block6;
        
        	let t425;
        
        	let h13;
        
        	let textContent_80 = "Rappels sur les dérivées";
        
        	let t427;
        
        	let h22;
        
        	let textContent_81 = "Le paradoxe de la « variation instantanée »";
        
        	let t429;
        
        	let p42;
        
        	let t430;
        
        	let em62;
        
        	let textContent_82 = "en fonction";
        
        	let t432;
        
        	let equation45;
        
        	let t433;
        
        	let t434;
        
        	let p43;
        
        	let t435;
        
        	let em63;
        
        	let textContent_83 = "dérivation";
        
        	let t437;
        
        	let em64;
        
        	let textContent_84 = "pente";
        
        	let t439;
        
        	let em65;
        
        	let textContent_85 = "comparant";
        
        	let t441;
        
        	let em66;
        
        	let textContent_86 = "différence";
        
        	let t443;
        
        	let em67;
        
        	let textContent_87 = "différence";
        
        	let t445;
        
        	let em68;
        
        	let textContent_88 = "dérivée de la position par rapport au temps";
        
        	let t447;
        
        	let em69;
        
        	let textContent_89 = "chaque instant";
        
        	let t449;
        
        	let equation46;
        
        	let t450;
        
        	let equation47;
        
        	let t451;
        
        	let equation48;
        
        	let t452;
        
        	let em70;
        
        	let textContent_90 = "tend vers";
        
        	let t454;
        
        	let equation49;
        
        	let t455;
        
        	let equation50;
        
        	let t456;
        
        	let strong23;
        
        	let textContent_91 = "L’idée de vitesse ne ferait donc plus aucun sens.";
        
        	let t458;
        
        	let em71;
        
        	let textContent_92 = "tend vers";
        
        	let t460;
        
        	let equation51;
        
        	let t461;
        
        	let em72;
        
        	let textContent_93 = "infinitésimal";
        
        	let t463;
        
        	let em73;
        
        	let textContent_94 = "infiniment petit";
        
        	let t465;
        
        	let sup2;
        
        	let textContent_95 = "e";
        
        	let t467;
        
        	let t468;
        
        	let p44;
        
        	let t469;
        
        	let strong24;
        
        	let textContent_96 = "vue en coupe de notre dune";
        
        	let t471;
        
        	let equation52;
        
        	let t472;
        
        	let equation53;
        
        	let t473;
        
        	let equation54;
        
        	let t474;
        
        	let em74;
        
        	let textContent_97 = "différence";
        
        	let t476;
        
        	let equation55;
        
        	let t477;
        
        	let equation56;
        
        	let t478;
        
        	let equation57;
        
        	let t479;
        
        	let t480;
        
        	let equation58;
        
        	let t481;
        
        	let range13;
        
        	let t482;
        
        	let t483;
        
        	let t484;
        
        	let select0;
        
        	let t485;
        
        	let sketch6;
        
        	let t486;
        
        	let p45;
        
        	let t487;
        
        	let strong25;
        
        	let textContent_98 = "tangente";
        
        	let t489;
        
        	let em75;
        
        	let textContent_99 = "nombre dérivé";
        
        	let t491;
        
        	let equation59;
        
        	let t492;
        
        	let t493;
        
        	let p46;
        
        	let textContent_100 = `(<em>Cliquez sur la carte ci-dessous pour intervertir entre l’équation « graphique » et l’équation classique, simple une traduction de tout ce que j’exprimais en langage informel !</em>)`;
        
        	let t497;
        
        	let p47;
        
        	let t498;
        
        	let em77;
        
        	let textContent_101 = "fonction dérivée";
        
        	let t500;
        
        	let equation60;
        
        	let t501;
        
        	let equation61;
        
        	let t502;
        
        	let em78;
        
        	let textContent_102 = "ex :";
        
        	let t504;
        
        	let em79;
        
        	let textContent_103 = "ex :";
        
        	let t506;
        
        	let t507;
        
        	let h23;
        
        	let textContent_104 = `En plusieurs dimensions : le <em>gradient</em>`;
        
        	let t510;
        
        	let p48;
        
        	let textContent_105 = "Ne nous contentons pas d’une simple vue en coupe de notre dune ! Une fois l’idée précédente bien comprise, elle se généralise facilement à des dimensions supérieures.";
        
        	let t512;
        
        	let p49;
        
        	let t513;
        
        	let em81;
        
        	let textContent_106 = "gradient";
        
        	let t515;
        
        	let strong26;
        
        	let textContent_107 = "le nombre dérivé selon toutes les variables dont dépend une fonction !";
        
        	let t517;
        
        	let equation62;
        
        	let t518;
        
        	let equation63;
        
        	let t519;
        
        	let equation64;
        
        	let t520;
        
        	let equation65;
        
        	let t521;
        
        	let equation66;
        
        	let t522;
        
        	let em82;
        
        	let textContent_108 = "différence";
        
        	let t524;
        
        	let em83;
        
        	let textContent_109 = "plusieurs";
        
        	let t526;
        
        	let t527;
        
        	let p50;
        
        	let t528;
        
        	let equation67;
        
        	let t529;
        
        	let equation68;
        
        	let t530;
        
        	let t531;
        
        	let p51;
        
        	let t532;
        
        	let equation69;
        
        	let t533;
        
        	let t534;
        
        	let p52;
        
        	let t535;
        
        	let equation70;
        
        	let t536;
        
        	let equation71;
        
        	let t537;
        
        	let em84;
        
        	let textContent_110 = "change le plus";
        
        	let t539;
        
        	let strong27;
        
        	let textContent_111 = "la pente la plus raide";
        
        	let t541;
        
        	let t542;
        
        	let p53;
        
        	let em85;
        
        	let textContent_112 = "Résolution";
        
        	let t544;
        
        	let range14;
        
        	let t545;
        
        	let t546;
        
        	let t547;
        
        	let em86;
        
        	let textContent_113 = "Valeurs extrêmes";
        
        	let t549;
        
        	let range15;
        
        	let t550;
        
        	let t551;
        
        	let t552;
        
        	let br5;
        
        	let t553;
        
        	let em87;
        
        	let textContent_114 = "Position";
        
        	let t555;
        
        	let equation72;
        
        	let t556;
        
        	let range16;
        
        	let t557;
        
        	let t558;
        
        	let t559;
        
        	let equation73;
        
        	let t560;
        
        	let em88;
        
        	let textContent_115 = "Position";
        
        	let t562;
        
        	let equation74;
        
        	let t563;
        
        	let range17;
        
        	let t564;
        
        	let t565;
        
        	let t566;
        
        	let t567;
        
        	let checkbox4;
        
        	let t568;
        
        	let sketch7;
        
        	let t569;
        
        	let p54;
        
        	let textContent_116 = "Nous avons donc ici deux nombres dérivés, un par variable, stockés dans un vecteur qui se note alors précisément :";
        
        	let t571;
        
        	let equation75;
        
        	let t572;
        
        	let p55;
        
        	let textContent_117 = "Vous aurez observé que tout en haut des crêtes, ou en bas des creux, la pente est nulle : là où c’est plat, ça ne varie pas !";
        
        	let t574;
        
        	let h14;
        
        	let textContent_118 = "Champs de Vecteurs";
        
        	let t576;
        
        	let p56;
        
        	let t577;
        
        	let em89;
        
        	let textContent_119 = "dépendants";
        
        	let t579;
        
        	let em90;
        
        	let textContent_120 = "vecteur";
        
        	let t581;
        
        	let em91;
        
        	let textContent_121 = "point";
        
        	let t583;
        
        	let equation76;
        
        	let t584;
        
        	let equation77;
        
        	let t585;
        
        	let equation78;
        
        	let t586;
        
        	let t587;
        
        	let h24;
        
        	let textContent_122 = "Introduction";
        
        	let t589;
        
        	let p57;
        
        	let t590;
        
        	let em92;
        
        	let textContent_123 = "point";
        
        	let t592;
        
        	let equation79;
        
        	let t593;
        
        	let em93;
        
        	let textContent_124 = "vecteur";
        
        	let t595;
        
        	let equation80;
        
        	let t596;
        
        	let equation81;
        
        	let t597;
        
        	let t598;
        
        	let p58;
        
        	let t599;
        
        	let equation82;
        
        	let t600;
        
        	let equation83;
        
        	let t601;
        
        	let t602;
        
        	let equation84;
        
        	let t603;
        
        	let range18;
        
        	let t604;
        
        	let t605;
        
        	let t606;
        
        	let equation85;
        
        	let t607;
        
        	let range19;
        
        	let t608;
        
        	let t609;
        
        	let t610;
        
        	let select1;
        
        	let t611;
        
        	let sketch8;
        
        	let t612;
        
        	let h25;
        
        	let textContent_125 = "Divergence et Rotationnel.";
        
        	let t614;
        
        	let p59;
        
        
        
        	let textContent_126 = `Sans rentrer dans le détail des calculs, il faut mentionner ici brièvement <strong>deux informations fondamentales</strong> que l’on peut extraire de <strong>tout</strong> champ de vecteurs. Elles trouvent toutes des applications dans les principales branches de la physique, que ce soit l’électromagnétisme, la gravitation, … et bien sûr, la mécanique des fluides !
        
        Elles sont indispensables à notre but et relativement intuitives. Une compréhension « en gros » de ces concepts sera largement suffisante ici, mais sachez toutefois que leur sens est profond et s’étend bien au délà de ce que je vais vous présenter !`;
        
        
        
        	let t620;
        
        	let p60;
        
        	let t621;
        
        	let strong30;
        
        	let textContent_127 = "nabla";
        
        	let t623;
        
        	let equation86;
        
        	let t624;
        
        	let equation87;
        
        	let t625;
        
        	let p61;
        
        	let t626;
        
        	let em94;
        
        	let textContent_128 = "gradient";
        
        	let t628;
        
        	let equation88;
        
        	let t629;
        
        	let em95;
        
        	let textContent_129 = "différence";
        
        	let t631;
        
        	let t632;
        
        	let equation89;
        
        	let t633;
        
        	let equation90;
        
        	let t634;
        
        	let equation91;
        
        	let t635;
        
        	let equation92;
        
        	let t636;
        
        	let p62;
        
        	let t637;
        
        	let equation93;
        
        	let t638;
        
        	let strong31;
        
        	let textContent_130 = "comme n’importe quel terme normal !";
        
        	let t640;
        
        	let p63;
        
        	let textContent_131 = "Voyons à présent les deux autres « styles de musique » qui nous intéressent !";
        
        	let t642;
        
        	let h33;
        
        	let textContent_132 = "Divergence";
        
        	let t644;
        
        	let p64;
        
        	let t645;
        
        	let strong32;
        
        	let textContent_133 = "divergence";
        
        	let t647;
        
        	let em96;
        
        	let textContent_134 = "pointer en sa direction";
        
        	let t649;
        
        	let em97;
        
        	let textContent_135 = "à l’opposé de sa direction";
        
        	let t651;
        
        	let equation94;
        
        	let t652;
        
        	let equation95;
        
        	let t653;
        
        	let t654;
        
        	let p65;
        
        	let t655;
        
        	let actionelement0;
        
        	let t656;
        
        	let actionelement1;
        
        	let t657;
        
        	let t658;
        
        	let p66;
        
        	let textContent_136 = `Elle sera représentée par un <span style="color: red; font-style: bold;">⬤</span> ou un <span style="color: blue; font-style: bold;">⬤</span> selon si sa valeur est positive ou négative, plus ou moins grand en fonction de son intensité.`;
        
        	let t664;
        
        	let p67;
        
        	let t665;
        
        	let equation96;
        
        	let t666;
        
        	let equation97;
        
        	let t667;
        
        	let t668;
        
        	let h34;
        
        	let textContent_137 = "Rotationnel";
        
        	let t670;
        
        	let p68;
        
        	let textContent_138 = `Le <strong>rotationnel</strong> en un point du champ exprime la tendance qu’ont les vecteurs aux alentours à <em>tourner autour de ce point</em>. (Comme le vent autour de l’œil d’un cyclone !)`;
        
        	let t676;
        
        	let p69;
        
        	let t677;
        
        	let actionelement2;
        
        	let t678;
        
        	let actionelement3;
        
        	let t679;
        
        	let t680;
        
        	let p70;
        
        	let t681;
        
        	let equation98;
        
        	let t682;
        
        	let equation99;
        
        	let t683;
        
        	let t684;
        
        	let p71;
        
        	let t685;
        
        	let equation100;
        
        	let t686;
        
        	let equation101;
        
        	let t687;
        
        	let t688;
        
        	let h26;
        
        	let textContent_139 = "Décomposition de Helmhotz-Hodge";
        
        	let t690;
        
        	let p72;
        
        	let textContent_140 = `Une découverte mathématique extrêmement importante dans le domaine du calcul vectoriel est à la source de la nouvelle technique développée par Joe Stam et son équipe : <strong>la décomposition de Helmhotz-Hodge</strong>.`;
        
        	let t694;
        
        	let p73;
        
        	let textContent_141 = `Cette dernière stipule qu’un champ de vecteurs arbitraire peut <em>toujours</em> être décomposé en deux autres champs dont il est la somme :`;
        
        	let t698;
        
        	let ul1;
        
        	let textContent_142 = `<li>un champ <em>solénoïdal</em> (c’est-à-dire à <strong>divergence</strong> nulle) ;</li> <li>et un champ <em>irrotationnel</em> (c’est-à-dire à <strong>rotationnel</strong> nul).</li>`;
        
        	let t710;
        
        	let sketch9;
        
        	let t711;
        
        	let p74;
        
        	let textContent_143 = "Visuellement, c’est bien plus intuitif ! Cependant, les mathématiciens l’écrivent de cette manière : (n’ayez pas peur, prenez le temps, et laissez vous guider !)";
        
        	let t713;
        
        	let equation102;
        
        	let t714;
        
        	let p75;
        
        	let t715;
        
        	let equation103;
        
        	let t716;
        
        	let equation104;
        
        	let t717;
        
        	let strong37;
        
        	let textContent_144 = "scalaire";
        
        	let t719;
        
        	let strong38;
        
        	let textContent_145 = "nombre";
        
        	let t721;
        
        	let equation105;
        
        	let t722;
        
        	let strong39;
        
        	let textContent_146 = "gradient";
        
        	let t724;
        
        	let t725;
        
        	let equation106;
        
        	let t726;
        
        	let p76;
        
        	let t727;
        
        	let equation107;
        
        	let t728;
        
        	let equation108;
        
        	let t729;
        
        	let equation109;
        
        	let t730;
        
        	let equation110;
        
        	let t731;
        
        	let equation111;
        
        	let t732;
        
        	let equation112;
        
        	let t733;
        
        	let t734;
        
        	let p77;
        
        	let textContent_147 = "Essayons de simplifier cette lourde équation.";
        
        	let t736;
        
        	let p78;
        
        	let textContent_148 = "Nous savons que par définition, la divergence du champ solénoïdal est nulle. Prenons donc la divergence des deux côtés de l’équation :";
        
        	let t738;
        
        	let equation113;
        
        	let t739;
        
        	let equation114;
        
        	let t740;
        
        	let p79;
        
        	let t741;
        
        	let equation115;
        
        	let t742;
        
        	let t743;
        
        	let p80;
        
        	let t744;
        
        	let strong40;
        
        	let textContent_149 = "intervalle";
        
        	let t746;
        
        	let strong41;
        
        	let textContent_150 = "Laplacien";
        
        	let t748;
        
        	let strong42;
        
        	let textContent_151 = "secondes";
        
        	let t750;
        
        	let equation116;
        
        	let t751;
        
        	let t752;
        
        	let p81;
        
        	let textContent_152 = `Nous nous retrouvons, finalement, avec cette belle équation, que l’on appelle une <strong>équation de Poisson</strong>, ce qui n’a malheureusement aucun rapport avec le fait qu’elle importe dans notre quête pour recréer les mouvements de l’eau !`;
        
        	let t756;
        
        	let equation117;
        
        	let t757;
        
        	let p82;
        
        	let t758;
        
        	let equation118;
        
        	let t759;
        
        	let equation119;
        
        	let t760;
        
        	let equation120;
        
        	let t761;
        
        	let strong44;
        
        	let textContent_153 = "champ solénoïdal incompressible";
        
        	let t763;
        
        	let t764;
        
        	let p83;
        
        	let textContent_154 = "Encore une équation à résoudre, me direz-vous. Et bien, nous allons voir une technique très efficace pour le faire.";
        
        	let t766;
        
        	let h15;
        
        	let textContent_155 = "Équation de Navier-Stokes";
        
        	let t768;
        
        	let p84;
        
        	let t769;
        
        	let em102;
        
        	let textContent_156 = "modèle";
        
        	let t771;
        
        	let equation121;
        
        	let t772;
        
        	let em103;
        
        	let textContent_157 = "vitesse";
        
        	let t774;
        
        	let t775;
        
        	let p85;
        
        	let t776;
        
        	let em104;
        
        	let textContent_158 = "évolution";
        
        	let t778;
        
        	let strong45;
        
        	let textContent_159 = "équation différentielle";
        
        	let t780;
        
        	let strong46;
        
        	let textContent_160 = "variation";
        
        	let t782;
        
        	let em105;
        
        	let textContent_161 = "vitesse";
        
        	let t784;
        
        	let equation122;
        
        	let t785;
        
        	let em106;
        
        	let textContent_162 = "temps";
        
        	let t787;
        
        	let equation123;
        
        	let t788;
        
        	let t789;
        
        	let p86;
        
        	let textContent_163 = `<strong>Cliquez sur la carte</strong> ci-dessous pour la retourner et découvrir l’expression en langage mathématique formel !`;
        
        	let t792;
        
        	let p87;
        
        	let textContent_164 = `<strong>Passez ensuite votre souris</strong> sur ses différents termes pour comprendre ce à quoi chacun correspond.`;
        
        	let t795;
        
        	let h35;
        
        	let textContent_165 = "Incompressibilité.";
        
        	let t797;
        
        	let p88;
        
        	let textContent_166 = "L’équation de Navier-Stokes s’écrit ordinairement sous une forme un petit peu plus complexe, mais il y a une raison tout à fait valable à cette simplification.";
        
        	let t799;
        
        	let p89;
        
        
        
        	let textContent_167 = `Imaginez vous dans une piscine ou dans votre baignoire, et posez vous cette question : avec-vous déjà réussi à <em>compresser</em> de l’eau ? (Si vous n’êtes pas certains, prenez un récipient rempli d’eau et essayez de le comprimer !)
        
        On peut facilement comprimer de l’air, de nombreux outils, jouets dans notre vie quotidienne fonctionnent de cette manière. Mais un liquide ?
        
        Eh bien, c’est (dans la grande majorité des cas) très difficile ! A peine essayons-nous que l’eau nous file entre les doigts, ou modifie la forme du récipient qui la contient, compensant ainsi la déformation que nous lui appliquons. On dit que l’eau peut être considérée comme un fluide <em>incompressible</em>.`;
        
        
        
        	let t805;
        
        	let p90;
        
        
        
        	let textContent_168 = `Ces fluides sont les tout premiers pour lesquels la science moderne réussit à découvrir des lois. Ainsi, en 1821, le français <strong>Henri Navier</strong>, presque un siècle après les premiers essais de Leonhard Euler, offrit au monde une équation régissant les fluides incompressibles et visqueux.
        
        Trente-cinq ans plus tard, ces équations furent améliorées et décrirent enfin les fluides <em>compressible</em>, visqueux et conducteurs de chaleur, forgeant par là un des outils les plus puissants que possèdent des physiciens. Nous les connaissons sous le nom complet d’équations de Navier-Stokes-Fourier.`;
        
        
        
        	let t811;
        
        	let p91;
        
        
        
        	let textContent_169 = `Il s’agit cependant bien sûr d’une grosse simplification : aucun fluide n’est <strong>réellement</strong> complètement incompressible, mais considérer que c’est le cas simplifie grandement le problème. Comme nous recherchons un <em>bel effet</em> visuel, et absolument pas la précision mathématique la plus fine pour calculer le comportement aérodynamique de missiles hypersoniques, c’est même amplement suffisant !
        
        Même si nous parlons de Navier-Stokes donc, c’est surtout l’équation de Navier seul que nous manipulons donc ici.`;
        
        
        
        	let t817;
        
        	let p92;
        
        	let t818;
        
        	let em111;
        
        	let textContent_170 = "contraction";
        
        	let t820;
        
        	let em112;
        
        	let textContent_171 = "dilatation";
        
        	let t822;
        
        	let equation124;
        
        	let t823;
        
        	let t824;
        
        	let p93;
        
        	let textContent_172 = `On appelle cette dernière équation l’<strong>équation de conservation de la masse</strong>.`;
        
        	let t828;
        
        	let h16;
        
        	let textContent_173 = "La méthode de relaxation de Gauss-Siedel";
        
        	let t830;
        
        	let p94;
        
        	let textContent_174 = "Il ne s’agit bien évidemment pas de la nouvelle technique de méditation à la mode chez les charlatans. Tout au contraire : ici, non seulement il faudra se concentrer un petit peu plus que lors des sections précédentes, mais en plus cela fonctionne véritablement !";
        
        	let t832;
        
        	let p95;
        
        	let t833;
        
        	let em113;
        
        	let textContent_175 = "contraintes";
        
        	let t835;
        
        	let em114;
        
        	let textContent_176 = "dépendance";
        
        	let t837;
        
        	let equation125;
        
        	let t838;
        
        	let equation126;
        
        	let t839;
        
        	let em115;
        
        	let textContent_177 = "dépend";
        
        	let t841;
        
        	let equation127;
        
        	let t842;
        
        	let em116;
        
        	let textContent_178 = "inconnue";
        
        	let t844;
        
        	let em117;
        
        	let textContent_179 = "connue";
        
        	let t846;
        
        	let t847;
        
        	let p96;
        
        	let t848;
        
        	let strong52;
        
        	let textContent_180 = "automatiquement";
        
        	let t850;
        
        	let equation128;
        
        	let t851;
        
        	let t852;
        
        	let p97;
        
        	let t853;
        
        	let equation129;
        
        	let t854;
        
        	let equation130;
        
        	let t855;
        
        	let equation131;
        
        	let t856;
        
        	let equation132;
        
        	let t857;
        
        	let em118;
        
        	let textContent_181 = "couper en deux";
        
        	let t859;
        
        	let equation133;
        
        	let t860;
        
        	let equation134;
        
        	let t861;
        
        	let em119;
        
        	let textContent_182 = "trois";
        
        	let t863;
        
        	let equation135;
        
        	let t864;
        
        	let equation136;
        
        	let t865;
        
        	let em120;
        
        	let textContent_183 = "quatre";
        
        	let t867;
        
        	let equation137;
        
        	let t868;
        
        	let t869;
        
        	let p98;
        
        	let t870;
        
        	let em121;
        
        	let textContent_184 = "coefficients";
        
        	let t872;
        
        	let equation138;
        
        	let t873;
        
        	let equation139;
        
        	let t874;
        
        	let equation140;
        
        	let t875;
        
        	let em122;
        
        	let textContent_185 = "constante";
        
        	let t877;
        
        	let equation141;
        
        	let t878;
        
        	let equation142;
        
        	let t879;
        
        	let em123;
        
        	let textContent_186 = "droite";
        
        	let t881;
        
        	let em124;
        
        	let textContent_187 = "point";
        
        	let t883;
        
        	let t884;
        
        	let p99;
        
        	let textContent_188 = "Cochez ou décochez les cases à gauche des paramètres pour afficher ou masquer le plan associé dans le sketch.";
        
        	let t886;
        
        	let checkbox5;
        
        	let t887;
        
        	let equation143;
        
        	let t888;
        
        	let dynamic2;
        
        	let t889;
        
        	let equation144;
        
        	let t890;
        
        	let dynamic3;
        
        	let t891;
        
        	let equation145;
        
        	let t892;
        
        	let dynamic4;
        
        	let t893;
        
        	let equation146;
        
        	let t894;
        
        	let dynamic5;
        
        	let t895;
        
        	let br6;
        
        	let t896;
        
        	let checkbox6;
        
        	let t897;
        
        	let equation147;
        
        	let t898;
        
        	let dynamic6;
        
        	let t899;
        
        	let equation148;
        
        	let t900;
        
        	let dynamic7;
        
        	let t901;
        
        	let equation149;
        
        	let t902;
        
        	let dynamic8;
        
        	let t903;
        
        	let equation150;
        
        	let t904;
        
        	let dynamic9;
        
        	let t905;
        
        	let br7;
        
        	let t906;
        
        	let checkbox7;
        
        	let t907;
        
        	let equation151;
        
        	let t908;
        
        	let dynamic10;
        
        	let t909;
        
        	let equation152;
        
        	let t910;
        
        	let dynamic11;
        
        	let t911;
        
        	let equation153;
        
        	let t912;
        
        	let dynamic12;
        
        	let t913;
        
        	let equation154;
        
        	let t914;
        
        	let dynamic13;
        
        	let t915;
        
        	let br8;
        
        	let t916;
        
        	let p100;
        
        	let textContent_189 = "Ce qui nous donne le système d’équations suivant :";
        
        	let t918;
        
        	let equation155;
        
        	let t919;
        
        	let p101;
        
        	let textContent_190 = `Pour les lecteurs familiers avec la notation <em>matricielle</em>, nous pouvons aussi l’écrire ainsi :`;
        
        	let t923;
        
        	let equation156;
        
        	let t924;
        
        	let h36;
        
        	let textContent_191 = "Visualisation";
        
        	let t926;
        
        	let sketch10;
        
        	let t927;
        
        	let span22;
        
        	let textContent_192 = ``;
        
        	let t928;
        
        	let h44;
        
        	let textContent_193 = "Affichage";
        
        	let t930;
        
        	let checkbox8;
        
        	let t931;
        
        	let br9;
        
        	let t932;
        
        	let checkbox9;
        
        	let t933;
        
        	let br10;
        
        	let t934;
        
        	let checkbox10;
        
        	let t935;
        
        	let br11;
        
        	let t936;
        
        	let h45;
        
        	let textContent_194 = "Itérations";
        
        	let t938;
        
        	let p102;
        
        	let em126;
        
        	let textContent_195 = "Nombre d’itérés";
        
        	let t940;
        
        	let range20;
        
        	let t941;
        
        	let t942;
        
        	let t943;
        
        	let t944;
        
        	let checkbox11;
        
        	let t945;
        
        	let br12;
        
        	let t946;
        
        	let br13;
        
        	let t947;
        
        	let actionelement4;
        
        	let t948;
        
        	let h37;
        
        	let textContent_196 = "Déroulement";
        
        	let t950;
        
        	let current_block_type_index_7;
        
        	let if_block7;
        
        	let t951;
        
        	let h17;
        
        	let textContent_197 = "Étapes de l’algorithme";
        
        	let t953;
        
        	let p103;
        
        	let textContent_198 = "Nous avons maintenant enfin toutes les clés en main pour réaliser le fameux algorithme !";
        
        	let t955;
        
        	let p104;
        
        	let t956;
        
        	let strong53;
        
        	let textContent_199 = "boucle infinie";
        
        	let t958;
        
        	let equation157;
        
        	let t959;
        
        	let equation158;
        
        	let t960;
        
        	let t961;
        
        	let p105;
        
        
        
        	let textContent_200 = `<strong>Les trois premières respectent strictement les trois parties à droite de l’équation de Navier-Stokes</strong>  que nous avons vu précédemment, il s’agira alors de moyens « détournés » ou « à peu près » (sachez qu’il existe une intelligence de l’« à peu près » !) pour calculer les termes que l’équation mathématique nous donne précisément. La dernière, nommée <em>projection</em>, est spécifique à la méthode de Joe Stam. Chaque étape consiste alors
        
        en une modification intermédiaire du champ de vecteurs, sur laquelle l’étape suivante se basera pour effectuer la tâche qui lui est propre. Je les présente ici par ordre de complexité croissante.`;
        
        
        
        	let t966;
        
        	let h27;
        
        	let textContent_201 = "1. Ajout de forces extérieures";
        
        	let t968;
        
        	let p106;
        
        	let t969;
        
        	let code0;
        
        	let textContent_202 = "N * N";
        
        	let t971;
        
        	let equation159;
        
        	let t972;
        
        	let t973;
        
        	let pre0;
        
        	let html_tag;
        
        
        
        	let raw0_value = `<code class="language-js"><span class="token keyword">function</span> <span class="token function">addForce</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> timeStep<span class="token punctuation">,</span> grid</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
          grid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+=</span> amount <span class="token operator">*</span> timeStep<span class="token punctuation">;</span>
        
        <span class="token punctuation">&#125;</span></code>` + "";
        
        
        
        	let t974;
        
        	let p107;
        
        
        
        	let textContent_203 = `Puisqu’une force est un <em>vecteur</em>, elle comporte dans le cas d’une simulation à deux dimensions deux composantes : la vitesse <em>horizontale</em> et la vitesse <em>verticale</em>.
        
        Nous appliquerons alors simplement deux fois cette méthode, une pour la composante verticale et une pour la composante horizontale.`;
        
        
        
        	let t982;
        
        	let p108;
        
        	let textContent_204 = "Cela sous-entend de les garder en mémoire dans deux grilles différentes, chacune représentant un champ scalaire pour chaque composante du champ de vecteurs : du point de vue computationnel (efficacité des calculs), c’est souvent mieux.";
        
        	let t984;
        
        	let h28;
        
        	let textContent_205 = "2. Diffusion";
        
        	let t986;
        
        	let p109;
        
        
        
        	let textContent_206 = `Cette seconde partie vise à calculer le terme que nous avons nommé « viscosité » dans l’équation de Navier-Stokes, mais son usage, très heureusement pour nous, sera <em>double</em>.
        
        Comme nous l’avons vu, la viscosité peut être pensée comme une sorte de « dispersion » de forces, celle que les vecteurs vitesse du champ appliquent aux particules du fluide. A chaque passe de l’algorithme, les vecteurs vitesse en tous points disperseront donc un peu de la quantité qu’ils représentent (leur énergie) aux cases des alentours, plus ou moins fortement selon le coefficient de viscosité que nous aurons choisi.`;
        
        
        
        	let t990;
        
        	let p110;
        
        
        
        	let textContent_207 = `Or, cette idée générale de dispersion nous est très utile pour un second cas de figure qui nous intéresse grandement : la <em>dispersion de l’encre dans l’eau</em> !
        
        Dans la vidéo ci-dessous, vous observerz qu’à chaque fois que le pinceau entre en contact avec le bac d’eau, l’encre se diffuse. Le point initial très concentré s’agrandit progressivement en un disque moins dense. Avec la même routine informatique, que nous allons mantenant expliciter, nous allons donc faire d’une pierre deux ricochets !`;
        
        
        
        	let t994;
        
        	let staticcontainer;
        
        	let t995;
        
        	let p111;
        
        
        
        	let textContent_208 = `Les options suivantes vous offrent le choix entre une méthode dite « instable » et une méthode « stable ». Qu’est-ce que cela veut dire ?
        
        Si vous avez eu la curiosité de jeter un œil au titre du papier de Joe Stam, vous aurez remarqué que sa méthode porte le nom de « <em>Stable</em> fluids ». Ce n’est absolument pas un hasard !
        
        La méthode « instable » est la méthode dite « naïve », c’est-à-dire la plus simple et évidente à laquelle on peut penser pour résoudre ce problème. Cependant, elle présente un inconvénient de taille, mais nous devons au préalable la comprendre pour accéder à la méthode stable.`;
        
        
        
        	let t999;
        
        	let p112;
        
        	let textContent_209 = `<strong>Cliquez sur la substance contenue dans la case de votre choix</strong> pour la voir se disperser !`;
        
        	let t1002;
        
        	let radio;
        
        	let t1003;
        
        	let t1004;
        
        	let t1005;
        
        	let p113;
        
        	let em134;
        
        	let textContent_210 = "Coefficient de diffusion";
        
        	let t1007;
        
        	let range21;
        
        	let t1008;
        
        	let sketch11;
        
        	let t1009;
        
        	let h38;
        
        	let textContent_211 = "Méthode instable";
        
        	let t1011;
        
        	let p114;
        
        	let textContent_212 = `Voici donc ce qui se passe pour la méthode <strong>naïve</strong> et <strong>instable</strong>, premièrement en <strong>français</strong>, deuxièmement en <strong>Javascript</strong> :`;
        
        	let t1021;
        
        	let h50;
        
        	let textContent_213 = "Français";
        
        	let t1023;
        
        	let p115;
        
        	let t1024;
        
        	let em135;
        
        	let textContent_214 = "nouvelle";
        
        	let t1026;
        
        	let equation160;
        
        	let t1027;
        
        	let equation161;
        
        	let t1028;
        
        	let equation162;
        
        	let t1029;
        
        	let t1030;
        
        	let h51;
        
        	let textContent_215 = "Javascript";
        
        	let t1032;
        
        	let pre1;
        
        	let html_tag_1;
        
        
        
        	let raw1_value = `<code class="language-js"><span class="token comment">// Pour chaque case de la nouvelle grille</span>
        
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
            newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span> coeffDiff <span class="token operator">*</span> <span class="token punctuation">(</span>
        
                  previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// GAUCHE</span>
        
                  <span class="token operator">+</span> previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// DROITE</span>
        
                  <span class="token operator">+</span> previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// HAUT</span>
        
                  <span class="token operator">+</span> previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// BAS</span>
        
                  <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">*</span> previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
          <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">&#125;</span>
        
        </code>` + "";
        
        
        
        	let t1033;
        
        	let h39;
        
        	let textContent_216 = "Méthode stable";
        
        	let t1035;
        
        	let p116;
        
        	let t1036;
        
        	let em136;
        
        	let textContent_217 = "à l’envers !";
        
        	let t1038;
        
        	let equation163;
        
        	let t1039;
        
        	let strong60;
        
        	let textContent_218 = "partir";
        
        	let t1041;
        
        	let equation164;
        
        	let t1042;
        
        	let strong61;
        
        	let textContent_219 = "inconnues";
        
        	let t1044;
        
        	let equation165;
        
        	let t1045;
        
        	let t1046;
        
        	let pre2;
        
        	let html_tag_2;
        
        
        
        	let raw2_value = `<code class="language-js">previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-</span> coeffDiff <span class="token operator">*</span> <span class="token punctuation">(</span>
        
                                        newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span>
        
                                        <span class="token operator">+</span> newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span>
        
                                        <span class="token operator">+</span> newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        
                                        <span class="token operator">+</span> newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        
                                        <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">*</span> newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span>
        
                                    <span class="token punctuation">)</span><span class="token punctuation">;</span></code>` + "";
        
        
        
        	let t1047;
        
        	let p117;
        
        	let textContent_220 = "L’intérêt de procéder de la sorte est que cela évite la propagation en cascade de petites erreurs de calcul qui, justement, étaient la cause de l’instabilité de la méthode naïve. Au bout d’un certain temps, la simulation explosait, et le résultat visuel devenait absurde.";
        
        	let t1049;
        
        	let p118;
        
        	let textContent_221 = `Ici cependant, nous n’avons bien sûr connaissance d’aucune des valeurs de <code>newGrid</code>. Cela nous fait donc <strong>cinq inconnues</strong> ! Alors, que faire de cette expression, inutilisable comme telle ?`;
        
        	let t1055;
        
        	let p119;
        
        	let textContent_222 = `C’est ici que nous allons devoir invoquer notre <strong>méthode de relaxation préférée</strong> ! N’hésitez pas à rejeter un coup d’œil à la section sur Gauss-Siedel si la magie de cette dernière n’est pas encore démystifiée dans votre esprit !`;
        
        	let t1059;
        
        	let equation166;
        
        	let t1060;
        
        	let p120;
        
        	let strong64;
        
        	let textContent_223 = "Système d’équations implicite";
        
        	let t1062;
        
        	let equation167;
        
        	let t1063;
        
        	let equation168;
        
        	let t1064;
        
        	let t1065;
        
        	let p121;
        
        	let strong65;
        
        	let textContent_224 = "Décryptage";
        
        	let t1067;
        
        	let equation169;
        
        	let t1068;
        
        	let equation170;
        
        	let t1069;
        
        	let equation171;
        
        	let t1070;
        
        	let em137;
        
        	let textContent_225 = "même ligne";
        
        	let t1072;
        
        	let equation172;
        
        	let t1073;
        
        	let equation173;
        
        	let t1074;
        
        	let em138;
        
        	let textContent_226 = "matrice creuse";
        
        	let t1076;
        
        	let t1077;
        
        	let p122;
        
        	let textContent_227 = `Une fois l’équation réexprimée et simplifiée pour avoir à gauche le terme <code>newGrid[index(i, j)]</code> que nous cherchons à calculer, nous sommes en mesure d’écrire le code pour résoudre ce système d’équation, et ainsi conclure l’étape de diffusion :`;
        
        	let t1081;
        
        	let pre3;
        
        	let html_tag_3;
        
        
        
        	let raw3_value = `<code class="language-js"><span class="token keyword">function</span> <span class="token function">diffusion</span><span class="token punctuation">(</span><span class="token parameter">newGrid<span class="token punctuation">,</span> timeStep<span class="token punctuation">,</span> coeffDiff</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
          <span class="token keyword">let</span> previousGrid <span class="token operator">=</span> <span class="token function">duplicateGrid</span><span class="token punctuation">(</span>newGrid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Peu importe la valeur initiale de newGrid : ici, c'est toujours l'ancienne grille qui est passée en paramètre et qui sera modifiée par la fonction pour devenir la nouvelle.</span>
        
          <span class="token comment">// Nombre d'itérations de Gauss-Siedel</span>
        
          <span class="token keyword">let</span> iterations <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
        
          <span class="token comment">// On met le tout à l'échelle selon la taille de l'intervalle de temps : plus du temps a passé, plus le changement sera important.</span>
        
          coeffDiff <span class="token operator">*=</span> timeStep<span class="token punctuation">;</span>
        
        
        
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> iterations<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
            <span class="token comment">// Pour chaque case</span>
        
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
              <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
                newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span>
        
                  <span class="token punctuation">(</span>previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span> coeffDiff <span class="token operator">*</span> <span class="token punctuation">(</span>
        
                      <span class="token operator">+</span> newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// GAUCHE</span>
        
                      <span class="token operator">+</span> newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// DROITE</span>
        
                      <span class="token operator">+</span> newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// HAUT</span>
        
                      <span class="token operator">+</span> newGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// BAS</span>
        
                    <span class="token punctuation">)</span><span class="token punctuation">)</span>
        
                  <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">*</span> coeffDiff<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
              <span class="token punctuation">&#125;</span>
        
            <span class="token punctuation">&#125;</span>
        
          <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">&#125;</span>
        
        </code>` + "";
        
        
        
        	let t1082;
        
        	let p123;
        
        	let textContent_228 = "Au final, cela fait peu de lignes d’un code d’apparence assez simple. Mais voyez l’ingéniosité qui se cache derrière cette succinteté !";
        
        	let t1084;
        
        	let h29;
        
        	let textContent_229 = "3. Advection";
        
        	let t1086;
        
        	let p124;
        
        	let t1087;
        
        	let strong66;
        
        	let textContent_230 = "deux";
        
        	let t1089;
        
        	let equation174;
        
        	let t1090;
        
        	let em139;
        
        	let textContent_231 = "auto-advection";
        
        	let t1092;
        
        	let em140;
        
        	let textContent_232 = "densité de l’encre";
        
        	let t1094;
        
        	let t1095;
        
        	let p125;
        
        
        
        	let textContent_233 = `Resoulignons le ici : procéder à l’envers est le <em>leitmotiv</em> de cette méthode dite stable, et ce motif se retrouve probablement dans de nombreux autres problèmes de simulation, bien que je n’en aie pas vraiment connaissance. Des commentaires éclairés, de la part de lecteurs informés plus informés sur cette question seraient vraiment les bienvenus !
        
        Il se trouve qu’il est au cœur de cette étape également !`;
        
        
        
        	let t1099;
        
        	let p126;
        
        	let t1100;
        
        	let equation175;
        
        	let t1101;
        
        	let equation176;
        
        	let t1102;
        
        	let equation177;
        
        	let t1103;
        
        	let em142;
        
        	let textContent_234 = "à l’envers";
        
        	let t1105;
        
        	let equation178;
        
        	let t1106;
        
        	let equation179;
        
        	let t1107;
        
        	let em143;
        
        	let textContent_235 = "backtracing";
        
        	let t1109;
        
        	let strong67;
        
        	let textContent_236 = "moyenne";
        
        	let t1111;
        
        	let equation180;
        
        	let t1112;
        
        	let t1113;
        
        	let p127;
        
        	let strong68;
        
        	let textContent_237 = "Cliquez sur une des cases";
        
        	let t1115;
        
        	let em144;
        
        	let textContent_238 = "bracktracing";
        
        	let t1117;
        
        	let equation181;
        
        	let t1118;
        
        	let equation182;
        
        	let t1119;
        
        	let sketch12;
        
        	let t1120;
        
        	let actionelement5;
        
        	let t1121;
        
        	let p128;
        
        	let textContent_239 = "Et voici le code complet pour cette étape :";
        
        	let t1123;
        
        	let pre4;
        
        	let html_tag_4;
        
        
        
        	let raw4_value = `<code class="language-js"><span class="token keyword">function</span> <span class="token function">advection</span><span class="token punctuation">(</span><span class="token parameter">vx<span class="token punctuation">,</span> vy<span class="token punctuation">,</span> timeStep<span class="token punctuation">,</span> verbose<span class="token punctuation">,</span> grid<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
          <span class="token keyword">let</span> previousGrid <span class="token operator">=</span> <span class="token function">duplicateGrid</span><span class="token punctuation">(</span>grid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        
        
          <span class="token comment">// Pour chaque case</span>
        
          <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
              <span class="token comment">// Backtracing</span>
        
              <span class="token keyword">let</span> x <span class="token operator">=</span> p5<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span>i <span class="token operator">-</span> timeStep <span class="token operator">*</span> vx<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token constant">N</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
              <span class="token keyword">let</span> y <span class="token operator">=</span> p5<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span>j <span class="token operator">-</span> timeStep <span class="token operator">*</span> vy<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token constant">N</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        
        
              <span class="token keyword">let</span> pi <span class="token operator">=</span> p5<span class="token punctuation">.</span><span class="token function">int</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Origine en x de la case où l'on atterrit</span>
        
              <span class="token keyword">let</span> pj <span class="token operator">=</span> p5<span class="token punctuation">.</span><span class="token function">int</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Origine en y de la case où l'on atterrit</span>
        
        
        
              <span class="token comment">// Coefficients d'interpolation (calcul de poids relatif des cases environnantes)</span>
        
              <span class="token keyword">let</span> s1 <span class="token operator">=</span> x <span class="token operator">-</span> pi<span class="token punctuation">;</span> <span class="token comment">// Décalage par rapport à l'origine en x</span>
        
              <span class="token keyword">let</span> s0 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> s1<span class="token punctuation">;</span> <span class="token comment">// Inverse de ce décalage</span>
        
        
        
              <span class="token keyword">let</span> t1 <span class="token operator">=</span> y <span class="token operator">-</span> pj<span class="token punctuation">;</span> <span class="token comment">// Décalage par rapport à l'origine en y</span>
        
              <span class="token keyword">let</span> t0 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> t1<span class="token punctuation">;</span> <span class="token comment">// Inverse de ce décalage</span>
        
        
        
              <span class="token comment">// Interpolation et assignation de la nouvelle valeur</span>
        
              grid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> s0 <span class="token operator">*</span> <span class="token punctuation">(</span>t0 <span class="token operator">*</span> previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>pi<span class="token punctuation">,</span> pj<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span> t1 <span class="token operator">*</span> previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>pi<span class="token punctuation">,</span> pj <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        
                                  <span class="token operator">+</span> s1 <span class="token operator">*</span> <span class="token punctuation">(</span>t0 <span class="token operator">*</span> previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>pi <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> pj<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span> t1 <span class="token operator">*</span> previousGrid<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>pi <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> pj <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            <span class="token punctuation">&#125;</span>
        
          <span class="token punctuation">&#125;</span>
        
        
        
          <span class="token function">setBounds</span><span class="token punctuation">(</span>grid<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token punctuation">&#125;</span></code>` + "";
        
        
        
        	let t1124;
        
        	let h210;
        
        	let textContent_240 = "4. Projection";
        
        	let t1126;
        
        	let p129;
        
        	let textContent_241 = "C’est la dernière ligne droite ! Cette étape est la plus dense conceptuellement parlant, mais c’est aussi celle sur laquelle je m’attarderai le moins en explications car elle consistera simplement à implémenter les calculs de résolution de l’équation de Poisson dont nous avons étudié le sens dans la section sur la décomposition de Helmhotz-Hodge. N’hésitez pas à faire des va-et-viens entre cette partie mathématique et l’implémentation informatique que vous trouverez ici !\nVous savez maintenant programmer une routine de Gauss-Siedel, donc cette partie du code ne devrait plus vous paraître mystérieuse.\nLe seul point d’ombre qu’il reste, c’est le calcul de la divergence et du Laplacien, qui impliquent des dérivées.";
        
        	let t1128;
        
        	let p130;
        
        
        
        	let textContent_242 = `Dans l’univers numérique, nous n’avons jamais vraiment affaire à des fonctions continues, mais toujours à des entités <em>discrètes</em> : des données séparées. Dans ce contexte, on approche la dérivée en calculant <em>la plus petite différence</em> qu’il nous est possible d’atteindre : ici, ce sera <strong>celle entre deux cases élémentaires successives d’une grille</strong>. Parfois, on peut aussi prendre la différence entre la case suivante et la case précédent une case donnée.
        
        C’est pourquoi la divergence :`;
        
        
        
        	let t1136;
        
        	let equation183;
        
        	let t1137;
        
        	let p131;
        
        
        
        	let textContent_243 = `Peut être approchée de la manière suivante :
        
        <code>(velocityX[index(i + 1, j)] - velocityX[index(i - 1, j)]) + (velocityY[index(i, j + 1)] - velocityY[index(i, j - 1)]))</code>`;
        
        
        
        	let t1140;
        
        	let p132;
        
        	let t1141;
        
        	let em147;
        
        	let textContent_244 = "discret";
        
        	let t1143;
        
        	let equation184;
        
        	let t1144;
        
        	let t1145;
        
        	let equation185;
        
        	let t1146;
        
        	let br14;
        
        	let t1147;
        
        	let equation186;
        
        	let t1148;
        
        	let p133;
        
        	let textContent_245 = "Le code complet de cette dernière étape implémentant toutes les formules ci-dessus, est le suivant :";
        
        	let t1150;
        
        	let pre5;
        
        	let html_tag_5;
        
        
        
        	let raw5_value = `<code class="language-js"><span class="token keyword">function</span> <span class="token function">projection</span><span class="token punctuation">(</span><span class="token parameter">velocityX<span class="token punctuation">,</span> velocityY</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
          <span class="token keyword">let</span> divergence <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>velocityX<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
          <span class="token keyword">let</span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>velocityX<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        
        
          <span class="token comment">// Calcul de la divergence en chaque point du champ de vecteur vitesse (velocityX, velocityY). Cela crée un champ scalaire stocké dans la grille "divergence"</span>
        
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
              divergence<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span>
        
                <span class="token operator">-</span><span class="token number">0.5</span> <span class="token operator">*</span>
        
                <span class="token punctuation">(</span>velocityX<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-</span>
        
                  velocityX<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span>
        
                  velocityY<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-</span>
        
                  velocityY<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            <span class="token punctuation">&#125;</span>
        
          <span class="token punctuation">&#125;</span>
        
        
        
          <span class="token comment">// Gauss-Siedel : Résolution de l'équation de Poisson pour calculer le champ scalaire inconnu "q"</span>
        
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
              <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
                <span class="token keyword">let</span> inter <span class="token operator">=</span>
        
                  divergence<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span>
        
                  q<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span>
        
                  q<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span>
        
                  q<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span>
        
                  q<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        
        
                q<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">4.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> inter<span class="token punctuation">;</span> <span class="token comment">// Laplacien discret de q</span>
        
              <span class="token punctuation">&#125;</span>
        
            <span class="token punctuation">&#125;</span>
        
          <span class="token punctuation">&#125;</span>
        
        
        
          <span class="token comment">// Une fois que nous connaissons q, on calcule son gradient, puis on le soustrait au champ de vecteurs vitesse pour obtenir sa projection solénoïdale.</span>
        
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        
              velocityX<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-=</span>
        
                <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>q<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-</span> q<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
              velocityY<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-=</span>
        
                <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>q<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-</span> q<span class="token punctuation">[</span><span class="token function">index</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            <span class="token punctuation">&#125;</span>
        
          <span class="token punctuation">&#125;</span>
        
        
        
          <span class="token comment">// On réinitialise les bords de la simulation</span>
        
          <span class="token function">setBounds</span><span class="token punctuation">(</span>velocityX<span class="token punctuation">,</span> <span class="token string">"u"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
          <span class="token function">setBounds</span><span class="token punctuation">(</span>velocityY<span class="token punctuation">,</span> <span class="token string">"v"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token punctuation">&#125;</span></code>` + "";
        
        
        
        	let t1151;
        
        	let h18;
        
        	let textContent_246 = "Simulation complète";
        
        	let t1153;
        
        	let p134;
        
        	let textContent_247 = `<strong>Cliquez dans la zone</strong> pour y déposer de l’encre, et <strong>bougez votre souris</strong> pour appliquer une force !`;
        
        	let t1158;
        
        	let sketch13;
        
        	let t1159;
        
        	let p135;
        
        	let em148;
        
        	let textContent_248 = "Résolution de la grille :";
        
        	let t1161;
        
        	let range22;
        
        	let t1162;
        
        	let p136;
        
        	let em149;
        
        	let textContent_249 = "Viscosité du fluide :";
        
        	let t1164;
        
        	let dynamic14;
        
        	let t1165;
        
        	let p137;
        
        	let em150;
        
        	let textContent_250 = "Diffusion de l’encre :";
        
        	let t1167;
        
        	let dynamic15;
        
        	let t1168;
        
        	let p138;
        
        	let em151;
        
        	let textContent_251 = "Seuil d’arrêt de diffusion :";
        
        	let t1170;
        
        	let dynamic16;
        
        	let t1171;
        
        	let span23;
        
        	let t1172;
        
        	let equation187;
        
        	let t1173;
        
        	let t1174;
        
        	let br15;
        
        	let t1175;
        
        	let sketch14;
        
        	let t1176;
        
        	let span24;
        
        	let textContent_252 = "R";
        
        	let t1178;
        
        	let dynamic17;
        
        	let t1179;
        
        	let span25;
        
        	let textContent_253 = "V";
        
        	let t1181;
        
        	let dynamic18;
        
        	let t1182;
        
        	let span26;
        
        	let textContent_254 = "B";
        
        	let t1184;
        
        	let dynamic19;
        
        	let t1185;
        
        	let br16;
        
        	let t1186;
        
        	let sketch15;
        
        	let t1187;
        
        	let span27;
        
        	let textContent_255 = "R";
        
        	let t1189;
        
        	let dynamic20;
        
        	let t1190;
        
        	let span28;
        
        	let textContent_256 = "V";
        
        	let t1192;
        
        	let dynamic21;
        
        	let t1193;
        
        	let span29;
        
        	let textContent_257 = "B";
        
        	let t1195;
        
        	let dynamic22;
        
        	let t1196;
        
        	let br17;
        
        	let current;
        
        
        
        	equation0 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_126] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation1 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_125] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation2 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_124] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	sketch0 = new Sketch({
        
        			props: {
        
        				width: 400,
        
        				height: 400,
        
        				cosinusx: /*cosinusx*/ ctx[60],
        
        				sinusx: /*sinusx*/ ctx[59],
        
        				computed_sinusx: /*computed_sinusx*/ ctx[61],
        
        				computed_cosinusx: /*computed_cosinusx*/ ctx[62],
        
        				sketch: trigonometricCircle
        
        			}
        
        		});
        
        
        
        	equation3 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_123] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation4 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_122] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation5 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_121] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	dynamic0 = new Dynamic({
        
        			props: {
        
        				store: /*cosinusx*/ ctx[60],
        
        				min: -1,
        
        				max: 1,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation6 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_120] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	dynamic1 = new Dynamic({
        
        			props: {
        
        				store: /*sinusx*/ ctx[59],
        
        				min: -1,
        
        				max: 1,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation7 = new Equation({ props: { markup: r_sq } });
        
        
        
        	equation8 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_119] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation9 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_118] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation10 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_117] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation11 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_116] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation12 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_115] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation13 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_114] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range0 = new Range({
        
        			props: {
        
        				store: /*direction*/ ctx[63],
        
        				min: -1,
        
        				max: 1,
        
        				step: 0.001
        
        			}
        
        		});
        
        
        
        	equation14 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_113] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation15 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_112] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range1 = new Range({
        
        			props: {
        
        				store: /*magnitude*/ ctx[64],
        
        				min: 0,
        
        				max: 10,
        
        				step: 0.1
        
        			}
        
        		});
        
        
        
        	checkbox0 = new CheckBox({
        
        			props: { store: /*displayTrig*/ ctx[65] }
        
        		});
        
        
        
        	checkbox1 = new CheckBox({ props: { store: /*colourEq*/ ctx[66] } });
        
        
        
        	sketch1 = new Sketch({
        
        			props: {
        
        				displayTrig: /*displayTrig*/ ctx[65],
        
        				magnitude: /*magnitude*/ ctx[64],
        
        				direction: /*direction*/ ctx[63],
        
        				ratio: "2/1",
        
        				sketch: simpleVector
        
        			}
        
        		});
        
        
        
        	equation16 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_111] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	const if_block_creators = [create_if_block_10, create_else_block_7];
        
        	const if_blocks = [];
        
        
        
        	function select_block_type(ctx, dirty) {
        
        		if (/*$colourEq*/ ctx[48]) return 0;
        
        		return 1;
        
        	}
        
        
        
        	current_block_type_index = select_block_type(ctx);
        
        	if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
        
        
        
        	equation17 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_110] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range2 = new Range({
        
        			props: {
        
        				store: /*posx*/ ctx[67],
        
        				min: -10,
        
        				max: 10,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation18 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_109] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range3 = new Range({
        
        			props: {
        
        				store: /*posy*/ ctx[68],
        
        				min: -5,
        
        				max: 5,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	sketch2 = new Sketch({
        
        			props: {
        
        				displayTrig: /*displayTrig*/ ctx[65],
        
        				posx: /*posx*/ ctx[67],
        
        				posy: /*posy*/ ctx[68],
        
        				ratio: "2/1",
        
        				sketch: simpleVectorCoords
        
        			}
        
        		});
        
        
        
        	const if_block_creators_1 = [create_if_block_9, create_else_block_6];
        
        	const if_blocks_1 = [];
        
        
        
        	function select_block_type_1(ctx, dirty) {
        
        		if (/*$colourEq*/ ctx[48]) return 0;
        
        		return 1;
        
        	}
        
        
        
        	current_block_type_index_1 = select_block_type_1(ctx);
        
        	if_block1 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx);
        
        	const if_block_creators_2 = [create_if_block_8, create_else_block_5];
        
        	const if_blocks_2 = [];
        
        
        
        	function select_block_type_2(ctx, dirty) {
        
        		if (/*$colourEq*/ ctx[48]) return 0;
        
        		return 1;
        
        	}
        
        
        
        	current_block_type_index_2 = select_block_type_2(ctx);
        
        	if_block2 = if_blocks_2[current_block_type_index_2] = if_block_creators_2[current_block_type_index_2](ctx);
        
        
        
        	equation19 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_108] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation20 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_107] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation21 = new Equation({ props: { markup: inv_cos } });
        
        	equation22 = new Equation({ props: { markup: inv_sin } });
        
        
        
        	equation23 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_106] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation24 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_105] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation25 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_104] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation26 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_103] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation27 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_102] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation28 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_101] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation29 = new Equation({ props: { markup: frac_x_m } });
        
        	equation30 = new Equation({ props: { markup: frac_x_m } });
        
        
        
        	equation31 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_100] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation32 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_99] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation33 = new Equation({ props: { markup: x_1 } });
        
        
        
        	range4 = new Range({
        
        			props: {
        
        				store: /*posx*/ ctx[67],
        
        				min: -10,
        
        				max: 10,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation34 = new Equation({ props: { markup: y_1 } });
        
        
        
        	range5 = new Range({
        
        			props: {
        
        				store: /*posy*/ ctx[68],
        
        				min: -5,
        
        				max: 5,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation35 = new Equation({ props: { markup: x_2 } });
        
        
        
        	range6 = new Range({
        
        			props: {
        
        				store: /*posx_two*/ ctx[69],
        
        				min: -10,
        
        				max: 10,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation36 = new Equation({ props: { markup: y_2 } });
        
        
        
        	range7 = new Range({
        
        			props: {
        
        				store: /*posy_two*/ ctx[70],
        
        				min: -5,
        
        				max: 5,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	checkbox2 = new CheckBox({ props: { store: /*tipToTail*/ ctx[71] } });
        
        	checkbox3 = new CheckBox({ props: { store: /*colourEq*/ ctx[66] } });
        
        
        
        	sketch3 = new Sketch({
        
        			props: {
        
        				tipToTail: /*tipToTail*/ ctx[71],
        
        				posx: /*posx*/ ctx[67],
        
        				posy: /*posy*/ ctx[68],
        
        				posx_two: /*posx_two*/ ctx[69],
        
        				posy_two: /*posy_two*/ ctx[70],
        
        				ratio: "2/1",
        
        				sketch: vectorAddition
        
        			}
        
        		});
        
        
        
        	const if_block_creators_3 = [create_if_block_7, create_else_block_4];
        
        	const if_blocks_3 = [];
        
        
        
        	function select_block_type_3(ctx, dirty) {
        
        		if (/*$colourEq*/ ctx[48]) return 0;
        
        		return 1;
        
        	}
        
        
        
        	current_block_type_index_3 = select_block_type_3(ctx);
        
        	if_block3 = if_blocks_3[current_block_type_index_3] = if_block_creators_3[current_block_type_index_3](ctx);
        
        
        
        	equation37 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_98] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range8 = new Range({
        
        			props: {
        
        				store: /*scalar*/ ctx[72],
        
        				min: -5,
        
        				max: 5,
        
        				step: 0.1
        
        			}
        
        		});
        
        
        
        	sketch4 = new Sketch({
        
        			props: {
        
        				tipToTail: /*tipToTail*/ ctx[71],
        
        				posx: /*posx*/ ctx[67],
        
        				posy: /*posy*/ ctx[68],
        
        				scalar: /*scalar*/ ctx[72],
        
        				ratio: "2/1",
        
        				sketch: scalarMultiplication
        
        			}
        
        		});
        
        
        
        	const if_block_creators_4 = [create_if_block_6, create_else_block_3];
        
        	const if_blocks_4 = [];
        
        
        
        	function select_block_type_4(ctx, dirty) {
        
        		if (/*$colourEq*/ ctx[48]) return 0;
        
        		return 1;
        
        	}
        
        
        
        	current_block_type_index_4 = select_block_type_4(ctx);
        
        	if_block4 = if_blocks_4[current_block_type_index_4] = if_block_creators_4[current_block_type_index_4](ctx);
        
        	equation38 = new Equation({ props: { markup: v_1 } });
        
        	equation39 = new Equation({ props: { markup: x_1 } });
        
        
        
        	range9 = new Range({
        
        			props: {
        
        				store: /*posx*/ ctx[67],
        
        				min: -10,
        
        				max: 10,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation40 = new Equation({ props: { markup: y_1 } });
        
        
        
        	range10 = new Range({
        
        			props: {
        
        				store: /*posy*/ ctx[68],
        
        				min: -5,
        
        				max: 5,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation41 = new Equation({ props: { markup: v_2 } });
        
        	equation42 = new Equation({ props: { markup: x_2 } });
        
        
        
        	range11 = new Range({
        
        			props: {
        
        				store: /*posx_two*/ ctx[69],
        
        				min: -10,
        
        				max: 10,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation43 = new Equation({ props: { markup: y_2 } });
        
        
        
        	range12 = new Range({
        
        			props: {
        
        				store: /*posy_two*/ ctx[70],
        
        				min: -5,
        
        				max: 5,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	sketch5 = new Sketch({
        
        			props: {
        
        				posx: /*posx*/ ctx[67],
        
        				posy: /*posy*/ ctx[68],
        
        				posx_two: /*posx_two*/ ctx[69],
        
        				posy_two: /*posy_two*/ ctx[70],
        
        				ratio: "2/1",
        
        				sketch: dotProduct
        
        			}
        
        		});
        
        
        
        	equation44 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_97] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	const if_block_creators_5 = [create_if_block_5, create_else_block_2];
        
        	const if_blocks_5 = [];
        
        
        
        	function select_block_type_5(ctx, dirty) {
        
        		if (/*$colourEq*/ ctx[48]) return 0;
        
        		return 1;
        
        	}
        
        
        
        	current_block_type_index_5 = select_block_type_5(ctx);
        
        	if_block5 = if_blocks_5[current_block_type_index_5] = if_block_creators_5[current_block_type_index_5](ctx);
        
        	const if_block_creators_6 = [create_if_block_4, create_else_block_1];
        
        	const if_blocks_6 = [];
        
        
        
        	function select_block_type_6(ctx, dirty) {
        
        		if (/*$colourEq*/ ctx[48]) return 0;
        
        		return 1;
        
        	}
        
        
        
        	current_block_type_index_6 = select_block_type_6(ctx);
        
        	if_block6 = if_blocks_6[current_block_type_index_6] = if_block_creators_6[current_block_type_index_6](ctx);
        
        
        
        	equation45 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_96] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation46 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_95] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation47 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_94] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation48 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_93] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation49 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_92] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation50 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_91] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation51 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_90] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation52 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_89] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation53 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_88] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation54 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_87] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation55 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_86] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation56 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_85] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation57 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_84] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation58 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_83] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range13 = new Range({
        
        			props: {
        
        				store: /*derivative_h*/ ctx[58],
        
        				min: 0.0001,
        
        				max: 5,
        
        				step: 0.1
        
        			}
        
        		});
        
        
        
        	select0 = new Select({
        
        			props: {
        
        				valueStore: /*selectedFunction*/ ctx[73],
        
        				options: /*options*/ ctx[74]
        
        			}
        
        		});
        
        
        
        	sketch6 = new Sketch({
        
        			props: {
        
        				selectedFunction: /*selectedFunction*/ ctx[73],
        
        				derivative_h: /*derivative_h*/ ctx[58],
        
        				ratio: "3/2",
        
        				sketch: simpleDerivatives
        
        			}
        
        		});
        
        
        
        	equation59 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_82] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation60 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_81] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation61 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_80] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation62 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_79] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation63 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_78] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation64 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_77] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation65 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_76] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation66 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_75] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation67 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_74] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation68 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_73] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation69 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_72] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation70 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_71] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation71 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_70] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range14 = new Range({
        
        			props: {
        
        				store: /*resolutionFunction*/ ctx[75],
        
        				min: 10,
        
        				max: 200,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	range15 = new Range({
        
        			props: {
        
        				store: /*gradient_bounds*/ ctx[76],
        
        				min: 1,
        
        				max: 10,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	equation72 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_69] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range16 = new Range({
        
        			props: {
        
        				store: /*x_grad_arrow*/ ctx[78],
        
        				min: -/*$gradient_bounds*/ ctx[51],
        
        				max: /*$gradient_bounds*/ ctx[51],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation73 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_68] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation74 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_67] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range17 = new Range({
        
        			props: {
        
        				store: /*y_grad_arrow*/ ctx[79],
        
        				min: -/*$gradient_bounds*/ ctx[51],
        
        				max: /*$gradient_bounds*/ ctx[51],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	checkbox4 = new CheckBox({
        
        			props: { store: /*drawGrid_grad*/ ctx[77] }
        
        		});
        
        
        
        	sketch7 = new Sketch({
        
        			props: {
        
        				webGl: true,
        
        				ratio: "1/1",
        
        				gradient_bounds: /*gradient_bounds*/ ctx[76],
        
        				resolutionFunction: /*resolutionFunction*/ ctx[75],
        
        				drawGrid_grad: /*drawGrid_grad*/ ctx[77],
        
        				x_grad_arrow: /*x_grad_arrow*/ ctx[78],
        
        				y_grad_arrow: /*y_grad_arrow*/ ctx[79],
        
        				sketch: gradient
        
        			}
        
        		});
        
        
        
        	equation75 = new Equation({
        
        			props: { display: "block", markup: gradient_eqn }
        
        		});
        
        
        
        	equation76 = new Equation({ props: { markup: r_n } });
        
        	equation77 = new Equation({ props: { markup: r_n } });
        
        	equation78 = new Equation({ props: { markup: r_sq_la } });
        
        
        
        	equation79 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_66] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation80 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_65] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation81 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_64] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation82 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_63] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation83 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_62] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation84 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_61] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range18 = new Range({
        
        			props: {
        
        				store: /*param_a*/ ctx[80],
        
        				min: -5,
        
        				max: 5,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation85 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_60] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	range19 = new Range({
        
        			props: {
        
        				store: /*param_b*/ ctx[81],
        
        				min: -5,
        
        				max: 5,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	select1 = new Select({
        
        			props: {
        
        				valueStore: /*selectedField*/ ctx[83],
        
        				options: /*options2*/ ctx[84]
        
        			}
        
        		});
        
        
        
        	sketch8 = new Sketch({
        
        			props: {
        
        				ratio: "1/1",
        
        				fieldHoverType: /*fieldHoverType*/ ctx[82],
        
        				selectedField: /*selectedField*/ ctx[83],
        
        				param_a: /*param_a*/ ctx[80],
        
        				param_b: /*param_b*/ ctx[81],
        
        				sketch: vectorField
        
        			}
        
        		});
        
        
        
        	equation86 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_59] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation87 = new Equation({ props: { markup: nabla } });
        
        
        
        	equation88 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_58] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation89 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_57] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation90 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_56] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation91 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_55] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation92 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: nabla_applicated
        
        			}
        
        		});
        
        
        
        	equation93 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_54] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation94 = new Equation({ props: { markup: "< 0" } });
        
        	equation95 = new Equation({ props: { markup: "> 0" } });
        
        
        
        	actionelement0 = new ActionElement({
        
        			props: {
        
        				type: "a",
        
        				text: "valeur de la divergence"
        
        			}
        
        		});
        
        
        
        	actionelement0.$on("action", /*setToDivergence*/ ctx[85]);
        
        
        
        	actionelement1 = new ActionElement({
        
        			props: { type: "a", text: "vecteur en ce point" }
        
        		});
        
        
        
        	actionelement1.$on("action", /*setToVector*/ ctx[86]);
        
        	equation96 = new Equation({ props: { markup: divergence } });
        
        	equation97 = new Equation({ props: { markup: vf_u } });
        
        
        
        	actionelement2 = new ActionElement({
        
        			props: { type: "a", text: "valeur du rotationnel" }
        
        		});
        
        
        
        	actionelement2.$on("action", /*setToCurl*/ ctx[87]);
        
        
        
        	actionelement3 = new ActionElement({
        
        			props: { type: "a", text: "vecteur en ce point" }
        
        		});
        
        
        
        	actionelement3.$on("action", /*setToVector*/ ctx[86]);
        
        	equation98 = new Equation({ props: { markup: red_right_arrow } });
        
        	equation99 = new Equation({ props: { markup: blue_left_arrow } });
        
        	equation100 = new Equation({ props: { markup: curl } });
        
        	equation101 = new Equation({ props: { markup: vf_u } });
        
        
        
        	sketch9 = new Sketch({
        
        			props: {
        
        				width: 1000,
        
        				height: 250,
        
        				ratio: "2.7/1",
        
        				sketch: helmhotzHodge
        
        			}
        
        		});
        
        
        
        	equation102 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: helmhotz_hodge_eqn
        
        			}
        
        		});
        
        
        
        	equation103 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_53] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation104 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_52] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation105 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_51] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation106 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_50] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation107 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_49] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation108 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_48] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation109 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_47] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation110 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_46] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation111 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_45] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation112 = new Equation({ props: { markup: gradient_field } });
        
        
        
        	equation113 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: hhe_simplification1
        
        			}
        
        		});
        
        
        
        	equation114 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: hhe_simplification2
        
        			}
        
        		});
        
        
        
        	equation115 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_44] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation116 = new Equation({ props: { markup: laplacian } });
        
        
        
        	equation117 = new Equation({
        
        			props: { display: "block", markup: poisson_eqn }
        
        		});
        
        
        
        	equation118 = new Equation({ props: { markup: deducted_from_hhe } });
        
        
        
        	equation119 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_43] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation120 = new Equation({ props: { markup: vf_w } });
        
        
        
        	equation121 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_42] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation122 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_41] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation123 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_40] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation124 = new Equation({ props: { markup: null_divergence } });
        
        
        
        	equation125 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_39] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation126 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_38] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation127 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_37] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation128 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_36] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation129 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_35] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation130 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_34] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation131 = new Equation({ props: { markup: line_eqn_m } });
        
        	equation132 = new Equation({ props: { markup: line_eqn_d } });
        
        	equation133 = new Equation({ props: { markup: r_sq } });
        
        
        
        	equation134 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_33] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation135 = new Equation({ props: { markup: r_pow3 } });
        
        
        
        	equation136 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_32] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation137 = new Equation({ props: { markup: r_pow4 } });
        
        
        
        	equation138 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_31] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation139 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_30] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation140 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_29] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation141 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_28] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation142 = new Equation({
        
        			props: { markup: /*gs_interval*/ ctx[9] }
        
        		});
        
        
        
        	checkbox5 = new CheckBox({ props: { store: /*drawPlane1*/ ctx[89] } });
        
        	equation143 = new Equation({ props: { markup: a_1 } });
        
        
        
        	dynamic2 = new Dynamic({
        
        			props: {
        
        				store: /*a1*/ ctx[92],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation144 = new Equation({ props: { markup: b_1 } });
        
        
        
        	dynamic3 = new Dynamic({
        
        			props: {
        
        				store: /*b1*/ ctx[95],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation145 = new Equation({ props: { markup: c_1 } });
        
        
        
        	dynamic4 = new Dynamic({
        
        			props: {
        
        				store: /*c1*/ ctx[98],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation146 = new Equation({ props: { markup: d_1 } });
        
        
        
        	dynamic5 = new Dynamic({
        
        			props: {
        
        				store: /*d1*/ ctx[101],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	checkbox6 = new CheckBox({ props: { store: /*drawPlane2*/ ctx[90] } });
        
        	equation147 = new Equation({ props: { markup: a_2 } });
        
        
        
        	dynamic6 = new Dynamic({
        
        			props: {
        
        				store: /*a2*/ ctx[93],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation148 = new Equation({ props: { markup: b_2 } });
        
        
        
        	dynamic7 = new Dynamic({
        
        			props: {
        
        				store: /*b2*/ ctx[96],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation149 = new Equation({ props: { markup: c_2 } });
        
        
        
        	dynamic8 = new Dynamic({
        
        			props: {
        
        				store: /*c2*/ ctx[99],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation150 = new Equation({ props: { markup: d_2 } });
        
        
        
        	dynamic9 = new Dynamic({
        
        			props: {
        
        				store: /*d2*/ ctx[102],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	checkbox7 = new CheckBox({ props: { store: /*drawPlane3*/ ctx[91] } });
        
        	equation151 = new Equation({ props: { markup: a_3 } });
        
        
        
        	dynamic10 = new Dynamic({
        
        			props: {
        
        				store: /*a3*/ ctx[94],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation152 = new Equation({ props: { markup: b_3 } });
        
        
        
        	dynamic11 = new Dynamic({
        
        			props: {
        
        				store: /*b3*/ ctx[97],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation153 = new Equation({ props: { markup: c_3 } });
        
        
        
        	dynamic12 = new Dynamic({
        
        			props: {
        
        				store: /*c3*/ ctx[100],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation154 = new Equation({ props: { markup: d_3 } });
        
        
        
        	dynamic13 = new Dynamic({
        
        			props: {
        
        				store: /*d3*/ ctx[103],
        
        				min: -/*$abs_bound*/ ctx[1],
        
        				max: /*$abs_bound*/ ctx[1],
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	equation155 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_equation_system*/ ctx[29]
        
        			}
        
        		});
        
        
        
        	equation156 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*gs_system_matrice*/ ctx[28]
        
        			}
        
        		});
        
        
        
        	sketch10 = new Sketch({
        
        			props: {
        
        				webGl: true,
        
        				ratio: "1/1",
        
        				init_vector_x: /*init_vector_x*/ ctx[110],
        
        				init_vector_y: /*init_vector_y*/ ctx[111],
        
        				init_vector_z: /*init_vector_z*/ ctx[112],
        
        				iterationsGS: /*iterationsGS*/ ctx[108],
        
        				generateGaussSiedel: /*generateGaussSiedel*/ ctx[109],
        
        				drawPlanes: /*drawPlanes*/ ctx[104],
        
        				drawPlane1: /*drawPlane1*/ ctx[89],
        
        				drawPlane2: /*drawPlane2*/ ctx[90],
        
        				drawPlane3: /*drawPlane3*/ ctx[91],
        
        				drawCoords: /*drawCoords*/ ctx[105],
        
        				drawGaussSiedel: /*drawGaussSiedel*/ ctx[106],
        
        				automaticRotation: /*automaticRotation*/ ctx[107],
        
        				a1: /*a1*/ ctx[92],
        
        				a2: /*a2*/ ctx[93],
        
        				a3: /*a3*/ ctx[94],
        
        				b1: /*b1*/ ctx[95],
        
        				b2: /*b2*/ ctx[96],
        
        				b3: /*b3*/ ctx[97],
        
        				c1: /*c1*/ ctx[98],
        
        				c2: /*c2*/ ctx[99],
        
        				c3: /*c3*/ ctx[100],
        
        				d1: /*d1*/ ctx[101],
        
        				d2: /*d2*/ ctx[102],
        
        				d3: /*d3*/ ctx[103],
        
        				sketch: gaussSiedel
        
        			}
        
        		});
        
        
        
        	checkbox8 = new CheckBox({
        
        			props: { store: /*drawPlanes*/ ctx[104] }
        
        		});
        
        
        
        	checkbox9 = new CheckBox({
        
        			props: { store: /*drawCoords*/ ctx[105] }
        
        		});
        
        
        
        	checkbox10 = new CheckBox({
        
        			props: { store: /*automaticRotation*/ ctx[107] }
        
        		});
        
        
        
        	range20 = new Range({
        
        			props: {
        
        				store: /*iterationsGS*/ ctx[108],
        
        				min: 1,
        
        				max: 100,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	checkbox11 = new CheckBox({
        
        			props: { store: /*drawGaussSiedel*/ ctx[106] }
        
        		});
        
        
        
        	actionelement4 = new ActionElement({
        
        			props: {
        
        				type: "button",
        
        				text: "Générer une suite de Gauss-Siedel"
        
        			}
        
        		});
        
        
        
        	actionelement4.$on("action", /*generateGaussSiedelFn*/ ctx[115]);
        
        	const if_block_creators_7 = [create_if_block, create_else_block];
        
        	const if_blocks_7 = [];
        
        
        
        	function select_block_type_7(ctx, dirty) {
        
        		if (/*GS_Vectors*/ ctx[0].length == 0) return 0;
        
        		return 1;
        
        	}
        
        
        
        	current_block_type_index_7 = select_block_type_7(ctx);
        
        	if_block7 = if_blocks_7[current_block_type_index_7] = if_block_creators_7[current_block_type_index_7](ctx);
        
        
        
        	equation157 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_22] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation158 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_21] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation159 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_20] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	staticcontainer = new StaticContainer({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_19] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	radio = new Radio({
        
        			props: {
        
        				store: /*backwards_diff*/ ctx[116],
        
        				options: /*radioOptions*/ ctx[118]
        
        			}
        
        		});
        
        
        
        	range21 = new Range({
        
        			props: {
        
        				store: /*coeff_diff_demo*/ ctx[117],
        
        				min: 0,
        
        				max: 1,
        
        				step: 0.01
        
        			}
        
        		});
        
        
        
        	sketch11 = new Sketch({
        
        			props: {
        
        				coeff_diff_demo: /*coeff_diff_demo*/ ctx[117],
        
        				backwards_diff: /*backwards_diff*/ ctx[116],
        
        				ratio: "1/1",
        
        				sketch: diffusionStable
        
        			}
        
        		});
        
        
        
        	equation160 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_18] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation161 = new Equation({ props: { markup: frac_1_4 } });
        
        
        
        	equation162 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_17] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation163 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_16] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation164 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_15] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation165 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_14] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation166 = new Equation({
        
        			props: {
        
        				display: "block",
        
        				markup: /*big_matrice*/ ctx[131]
        
        			}
        
        		});
        
        
        
        	equation167 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_13] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation168 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_12] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation169 = new Equation({ props: { markup: bold_4 } });
        
        	equation170 = new Equation({ props: { markup: x_t_i } });
        
        	equation171 = new Equation({ props: { markup: bold_1 } });
        
        
        
        	equation172 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_11] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation173 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_10] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation174 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_9] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation175 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_8] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation176 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_7] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation177 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_6] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation178 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_5] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation179 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_4] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation180 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_3] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation181 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_2] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation182 = new Equation({ props: { markup: huge } });
        
        
        
        	sketch12 = new Sketch({
        
        			props: {
        
        				ratio: "1/1",
        
        				reset_advection_step: /*reset_advection_step*/ ctx[119],
        
        				sketch: advectionBacktracing
        
        			}
        
        		});
        
        
        
        	actionelement5 = new ActionElement({
        
        			props: {
        
        				type: "button",
        
        				text: "Nouveau champ de vecteurs"
        
        			}
        
        		});
        
        
        
        	actionelement5.$on("action", /*resetAdvectionStep*/ ctx[120]);
        
        
        
        	equation183 = new Equation({
        
        			props: { display: "true", markup: divergence_eqn }
        
        		});
        
        
        
        	equation184 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot_1] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	equation185 = new Equation({
        
        			props: {
        
        				display: "true",
        
        				markup: discrete_laplacian_1
        
        			}
        
        		});
        
        
        
        	equation186 = new Equation({
        
        			props: {
        
        				display: "true",
        
        				markup: discrete_laplacian_2
        
        			}
        
        		});
        
        
        
        	sketch13 = new Sketch({
        
        			props: {
        
        				numberTilesTwo: /*numberTilesTwo*/ ctx[130],
        
        				stopDiffuse: /*stopDiffuse*/ ctx[129],
        
        				ink_diffusion: /*ink_diffusion*/ ctx[128],
        
        				fluid_viscosity: /*fluid_viscosity*/ ctx[127],
        
        				color_one_red: /*color_one_red*/ ctx[121],
        
        				color_one_green: /*color_one_green*/ ctx[122],
        
        				color_one_blue: /*color_one_blue*/ ctx[123],
        
        				color_fl_red: /*color_fl_red*/ ctx[124],
        
        				color_fl_green: /*color_fl_green*/ ctx[125],
        
        				color_fl_blue: /*color_fl_blue*/ ctx[126],
        
        				ratio: "1/1",
        
        				sketch: fluidSimulation
        
        			}
        
        		});
        
        
        
        	range22 = new Range({
        
        			props: {
        
        				store: /*numberTilesTwo*/ ctx[130],
        
        				min: 8,
        
        				max: 200,
        
        				step: 2
        
        			}
        
        		});
        
        
        
        	dynamic14 = new Dynamic({
        
        			props: {
        
        				store: /*fluid_viscosity*/ ctx[127],
        
        				min: 0.001,
        
        				max: 2,
        
        				step: 0.001
        
        			}
        
        		});
        
        
        
        	dynamic15 = new Dynamic({
        
        			props: {
        
        				store: /*ink_diffusion*/ ctx[128],
        
        				min: 0.001,
        
        				max: 2,
        
        				step: 0.001
        
        			}
        
        		});
        
        
        
        	dynamic16 = new Dynamic({
        
        			props: {
        
        				store: /*stopDiffuse*/ ctx[129],
        
        				min: 0.001,
        
        				max: 5,
        
        				step: 0.001
        
        			}
        
        		});
        
        
        
        	equation187 = new Equation({
        
        			props: {
        
        				$$slots: { default: [create_default_slot] },
        
        				$$scope: { ctx }
        
        			}
        
        		});
        
        
        
        	sketch14 = new Sketch({
        
        			props: {
        
        				display: "inline",
        
        				width: 45,
        
        				height: 23,
        
        				red: /*color_fl_red*/ ctx[124],
        
        				green: /*color_fl_green*/ ctx[125],
        
        				blue: /*color_fl_blue*/ ctx[126],
        
        				sketch: colorPicker
        
        			}
        
        		});
        
        
        
        	dynamic17 = new Dynamic({
        
        			props: {
        
        				store: /*color_fl_red*/ ctx[124],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic18 = new Dynamic({
        
        			props: {
        
        				store: /*color_fl_green*/ ctx[125],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic19 = new Dynamic({
        
        			props: {
        
        				store: /*color_fl_blue*/ ctx[126],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	sketch15 = new Sketch({
        
        			props: {
        
        				display: "inline",
        
        				width: 45,
        
        				height: 23,
        
        				red: /*color_one_red*/ ctx[121],
        
        				green: /*color_one_green*/ ctx[122],
        
        				blue: /*color_one_blue*/ ctx[123],
        
        				sketch: colorPicker
        
        			}
        
        		});
        
        
        
        	dynamic20 = new Dynamic({
        
        			props: {
        
        				store: /*color_one_red*/ ctx[121],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic21 = new Dynamic({
        
        			props: {
        
        				store: /*color_one_green*/ ctx[122],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	dynamic22 = new Dynamic({
        
        			props: {
        
        				store: /*color_one_blue*/ ctx[123],
        
        				min: 0,
        
        				max: 255,
        
        				step: 1
        
        			}
        
        		});
        
        
        
        	return {
        
        		c() {
        
        			p0 = element("p");
        
        			p0.innerHTML = textContent;
        
        			t5 = space();
        
        			h10 = element("h1");
        
        			h10.textContent = textContent_1;
        
        			t7 = space();
        
        			blockquote0 = element("blockquote");
        
        			blockquote0.innerHTML = textContent_2;
        
        			t11 = space();
        
        			p2 = element("p");
        
        			p2.innerHTML = textContent_3;
        
        			t15 = space();
        
        			p3 = element("p");
        
        			p3.innerHTML = textContent_4;
        
        			t19 = space();
        
        			p4 = element("p");
        
        			p4.innerHTML = textContent_5;
        
        			t23 = space();
        
        			p5 = element("p");
        
        			p5.innerHTML = textContent_6;
        
        			t31 = space();
        
        			p6 = element("p");
        
        			p6.innerHTML = textContent_7;
        
        			t35 = space();
        
        			p7 = element("p");
        
        			p7.innerHTML = textContent_8;
        
        			t49 = space();
        
        			p8 = element("p");
        
        			p8.innerHTML = textContent_9;
        
        			t53 = space();
        
        			p9 = element("p");
        
        			p9.innerHTML = textContent_10;
        
        			t59 = space();
        
        			p10 = element("p");
        
        			p10.textContent = textContent_11;
        
        			t61 = space();
        
        			ul0 = element("ul");
        
        			ul0.innerHTML = textContent_12;
        
        			t65 = space();
        
        			p11 = element("p");
        
        			p11.innerHTML = textContent_13;
        
        			t71 = space();
        
        			p12 = element("p");
        
        			p12.innerHTML = textContent_14;
        
        			t81 = space();
        
        			blockquote1 = element("blockquote");
        
        			blockquote1.innerHTML = textContent_15;
        
        			t87 = space();
        
        			p14 = element("p");
        
        			p14.textContent = textContent_16;
        
        			t89 = space();
        
        			p15 = element("p");
        
        			t90 = text$2("À l’instar de ");
        
        			a3_1 = element("a");
        
        			a3_1.textContent = textContent_17;
        
        			t92 = text$2(", j’utiliserai pour mes exemples interactifs et les quelques démonstrations de code la bibliothèque javascript ");
        
        			a4 = element("a");
        
        			a4.textContent = textContent_18;
        
        			t94 = text$2(". Je me baserai presque entièrement sur des papiers révolutionnaires de Joe Stam, influent chercheur en infographie néerlandais. Ceux-ci ont bouleversé le monde des effets spéciaux dans le cinéma et les jeux vidéos au début des années 2000, en rendant possible la simulation de fluides en ");
        
        			em23 = element("em");
        
        			em23.textContent = textContent_19;
        
        			t96 = text$2(".\nL’apport fondamental de sa méthode est qu’elle repose ");
        
        			em24 = element("em");
        
        			em24.textContent = textContent_20;
        
        			t98 = text$2(" sur les équations de Navier-Stokes. Il s’agit du meilleur modèle physique dont nous disposons pour étudier et simuler ces phénomènes fascinants. Utilisées en météorologie, aéronautique, aérospatial, … elles sont un classique des études supérieures de physique. Avant ses travaux, cet exploit était impensable compte tenu de la différence radicale entre la puissance de calcul nécessaire à cette tâche et la capacité des processeurs. Il fallait souvent des heures pour calculer l’évolution d’un fluide à l’instant ");
        
        			create_component(equation0.$$.fragment);
        
        			t99 = text$2(" compte tenu de son état à un instant ");
        
        			create_component(equation1.$$.fragment);
        
        			t100 = text$2(", et de très petits intervalles de temps (");
        
        			create_component(equation2.$$.fragment);
        
        			t101 = text$2(") entre ces deux états successifs pour que la simulation reste fidèle à l’observation (et donc utile). Le monde des effets spéciaux employait alors d’autres méthodes, plus complexes et moins liées au monde physique pour tenter simuler cascades, explosions, fumée, … et nuages.");
        
        			t102 = space();
        
        			p16 = element("p");
        
        			p16.textContent = textContent_21;
        
        			t104 = space();
        
        			p17 = element("p");
        
        			p17.innerHTML = textContent_22;
        
        			t119 = space();
        
        			p18 = element("p");
        
        			p18.textContent = textContent_23;
        
        			t121 = space();
        
        			h11 = element("h1");
        
        			h11.textContent = textContent_24;
        
        			t123 = space();
        
        			h12 = element("h1");
        
        			h12.textContent = textContent_25;
        
        			t125 = space();
        
        			h20 = element("h2");
        
        			h20.textContent = textContent_26;
        
        			t127 = space();
        
        			create_component(sketch0.$$.fragment);
        
        			t128 = space();
        
        			p19 = element("p");
        
        			t129 = text$2("Rappels importants concernant le ");
        
        			strong5 = element("strong");
        
        			strong5.textContent = textContent_27;
        
        			t131 = text$2(".\n");
        
        			strong6 = element("strong");
        
        			strong6.textContent = textContent_28;
        
        			t133 = text$2(" les valeurs de ");
        
        			em27 = element("em");
        
        			em27.textContent = textContent_29;
        
        			t135 = text$2(" (");
        
        			span0 = element("span");
        
        			span0.textContent = textContent_30;
        
        			t137 = text$2(") ou de ");
        
        			em28 = element("em");
        
        			em28.textContent = textContent_31;
        
        			t139 = text$2(" (");
        
        			span1 = element("span");
        
        			span1.textContent = textContent_32;
        
        			t141 = text$2(") ci-dessous et observez l’angle ");
        
        			create_component(equation3.$$.fragment);
        
        			t142 = text$2(" correspondant en ");
        
        			em29 = element("em");
        
        			em29.textContent = textContent_33;
        
        			t144 = text$2(" (");
        
        			span2 = element("span");
        
        			span2.textContent = textContent_34;
        
        			t146 = text$2(").\nAu sein du cercle trigonométrique, ils doivent respecter la contrainte du théorème de Pythagore : ");
        
        			create_component(equation4.$$.fragment);
        
        			t147 = text$2(". C’est pourquoi à chaque changement de l’un, l’autre est également affecté.");
        
        			t148 = space();
        
        			create_component(equation5.$$.fragment);
        
        			t149 = text$2(" : ");
        
        			create_component(dynamic0.$$.fragment);
        
        			t150 = space();
        
        			p20 = element("p");
        
        			t151 = text$2("Valeur de ");
        
        			em30 = element("em");
        
        			em30.textContent = textContent_35;
        
        			t153 = text$2(" calculée : ");
        
        			strong7 = element("strong");
        
        			t154 = text$2(t154_value);
        
        			t155 = space();
        
        			create_component(equation6.$$.fragment);
        
        			t156 = text$2(" : ");
        
        			create_component(dynamic1.$$.fragment);
        
        			t157 = space();
        
        			p21 = element("p");
        
        			t158 = text$2("Valeur de ");
        
        			em31 = element("em");
        
        			em31.textContent = textContent_36;
        
        			t160 = text$2(" calculée : ");
        
        			strong8 = element("strong");
        
        			t161 = text$2(t161_value);
        
        			t162 = space();
        
        			p22 = element("p");
        
        			p22.innerHTML = textContent_37;
        
        			t168 = space();
        
        			p23 = element("p");
        
        			t169 = text$2("Un vecteur, comme un nombre, est un objet mathématique. Alors que le nombre représente une seule information, une ");
        
        			em34 = element("em");
        
        			em34.textContent = textContent_38;
        
        			t171 = text$2(", un vecteur en contient deux : une ");
        
        			em35 = element("em");
        
        			em35.textContent = textContent_39;
        
        			t173 = text$2(" et une ");
        
        			em36 = element("em");
        
        			em36.textContent = textContent_40;
        
        			t175 = text$2(". Dans leur contexte, cette quantité est appelée ");
        
        			em37 = element("em");
        
        			em37.textContent = textContent_41;
        
        			t177 = text$2(", car, comme nous le verrons, elle sera la plupart du temps utilisée pour véhiculer une idée d’");
        
        			em38 = element("em");
        
        			em38.textContent = textContent_42;
        
        			t179 = text$2(".\nLa direction sera, dans le plan à 2 dimensions, (noté ");
        
        			create_component(equation7.$$.fragment);
        
        			t180 = text$2(") un angle entre ");
        
        			create_component(equation8.$$.fragment);
        
        			t181 = text$2(" et ");
        
        			create_component(equation9.$$.fragment);
        
        			t182 = text$2(" (ou ");
        
        			create_component(equation10.$$.fragment);
        
        			t183 = text$2(" et ");
        
        			create_component(equation11.$$.fragment);
        
        			t184 = text$2(") : à partir d’un point quelconque dessiné sur une feuille de papier parfaitement plane, il n’y a pas d’autres directions possibles que celles indiquées par le compas, c’est-à-dire le cercle centré en ce point.\nCompte tenu de cette définition, la façon la plus naturelle pour nous de dessiner un vecteur est donc d’utiliser une flèche ! Elle sera plus ou moins longue selon sa magnitude, et pointera dans la direction souhaitée.");
        
        			t185 = space();
        
        			p24 = element("p");
        
        			p24.textContent = textContent_43;
        
        			t187 = space();
        
        			p25 = element("p");
        
        			em39 = element("em");
        
        			em39.textContent = textContent_44;
        
        			t189 = text$2(" (");
        
        			create_component(equation12.$$.fragment);
        
        			t190 = text$2(") : ");
        
        			create_component(equation13.$$.fragment);
        
        			t191 = space();
        
        			create_component(range0.$$.fragment);
        
        			t192 = space();
        
        			create_component(equation14.$$.fragment);
        
        			t193 = text$2(" (");
        
        			t194 = text$2(/*$direction*/ ctx[8]);
        
        			t195 = text$2(")");
        
        			t196 = space();
        
        			p26 = element("p");
        
        			em40 = element("em");
        
        			em40.textContent = textContent_45;
        
        			t198 = text$2(" (");
        
        			create_component(equation15.$$.fragment);
        
        			t199 = text$2(") : ");
        
        			create_component(range1.$$.fragment);
        
        			t200 = text$2(" (");
        
        			t201 = text$2(/*$magnitude*/ ctx[7]);
        
        			t202 = text$2(")");
        
        			t203 = space();
        
        			create_component(checkbox0.$$.fragment);
        
        			t204 = text$2(" Afficher trigonométrie\n");
        
        			create_component(checkbox1.$$.fragment);
        
        			t205 = text$2(" Colorer les équations\n");
        
        			create_component(sketch1.$$.fragment);
        
        			t206 = space();
        
        			p27 = element("p");
        
        			t207 = text$2("Remarquez qu’un vecteur ");
        
        			em41 = element("em");
        
        			em41.textContent = textContent_46;
        
        			t209 = text$2(" de sa position dans l’espace, il est complètement défini par rapport à l’origine ");
        
        			create_component(equation16.$$.fragment);
        
        			t210 = text$2(" du repère, qui correspond à la position de sa « queue ». Algébriquement, nous pouvons donc simplement écrire ce dernier à la manière d’un point dans l’espace : celui qui est touché par l’extrémité de la flèche !\nVoyez ci-dessous les coordonnées du vecteur que vous avez défini plus haut :");
        
        			t211 = space();
        
        			if_block0.c();
        
        			t212 = space();
        
        			p28 = element("p");
        
        			p28.innerHTML = textContent_47;
        
        			t218 = space();
        
        			create_component(equation17.$$.fragment);
        
        			t219 = text$2(" : ");
        
        			create_component(range2.$$.fragment);
        
        			t220 = text$2(" (");
        
        			t221 = text$2(/*$posx*/ ctx[5]);
        
        			t222 = text$2(")\n");
        
        			create_component(equation18.$$.fragment);
        
        			t223 = text$2(" : ");
        
        			create_component(range3.$$.fragment);
        
        			t224 = text$2(" (");
        
        			t225 = text$2(/*$posy*/ ctx[3]);
        
        			t226 = text$2(")\n");
        
        			create_component(sketch2.$$.fragment);
        
        			t227 = space();
        
        			h40 = element("h4");
        
        			h40.textContent = textContent_48;
        
        			t229 = space();
        
        			if_block1.c();
        
        			t230 = space();
        
        			h41 = element("h4");
        
        			h41.textContent = textContent_49;
        
        			t232 = space();
        
        			if_block2.c();
        
        			t233 = space();
        
        			p29 = element("p");
        
        			t234 = text$2("Les fonctions ");
        
        			create_component(equation19.$$.fragment);
        
        			t235 = text$2(" et ");
        
        			create_component(equation20.$$.fragment);
        
        			t236 = text$2(" (également notées ");
        
        			create_component(equation21.$$.fragment);
        
        			t237 = text$2(" et ");
        
        			create_component(equation22.$$.fragment);
        
        			t238 = text$2(") sont les fonctions ");
        
        			em44 = element("em");
        
        			em44.textContent = textContent_50;
        
        			t240 = text$2(" de ");
        
        			create_component(equation23.$$.fragment);
        
        			t241 = text$2(" et ");
        
        			create_component(equation24.$$.fragment);
        
        			t242 = text$2(". Elles permettent donc de retrouver un angle lorsque nous ne connaissons que la valeur de sinus et de cosinus qui lui sont associées. C’est exactement ce que la racine carrée est au carré, par exemple : cette dernière permet de retrouver le nombre inconnu qui, élevé au carré, produit un nombre que nous connaissons déjà. Et de la même manière que deux nombres différents possèdent le même carré (un nombre et son opposé, c’est à dire ");
        
        			create_component(equation25.$$.fragment);
        
        			t243 = text$2(" et ");
        
        			create_component(equation26.$$.fragment);
        
        			t244 = text$2("), il est clair, en observant le cercle trigonométrique, que deux angles différents sont toujours associés à une même unique valeur de sinus ou de cosinus. (dans le cas du cosinus, il s’agit d’un angle (");
        
        			create_component(equation27.$$.fragment);
        
        			t245 = text$2(" et de son opposé ");
        
        			create_component(equation28.$$.fragment);
        
        			t246 = text$2(") Nous avons donc besoin d’utiliser ");
        
        			em45 = element("em");
        
        			em45.textContent = textContent_51;
        
        			t248 = text$2(" ces deux informations pour restreindre les possibilités à un angle unique. C’est ce que la formule ci-dessus réalise : ");
        
        			create_component(equation29.$$.fragment);
        
        			t249 = text$2(" est la valeur du cosinus de l’angle que nous recherchons. C’est ensuite le ");
        
        			em46 = element("em");
        
        			em46.textContent = textContent_52;
        
        			t251 = text$2(" du sinus (");
        
        			create_component(equation30.$$.fragment);
        
        			t252 = text$2(") qui nous permettra de trancher le bon signe de notre angle.");
        
        			t253 = space();
        
        			h21 = element("h2");
        
        			h21.textContent = textContent_53;
        
        			t255 = space();
        
        			p30 = element("p");
        
        			t256 = text$2("Une fois encore, nous nous contenterons strictement ici de ce dont nous aurons besoin : l’");
        
        			strong9 = element("strong");
        
        			strong9.textContent = textContent_54;
        
        			t258 = text$2(" de vecteurs et leur ");
        
        			strong10 = element("strong");
        
        			strong10.textContent = textContent_55;
        
        			t260 = text$2(". Le produit de deux vecteurs entre eux, contrairement à la « multiplication » classique de deux nombres, peut exister sous plusieurs formes : les plus usuelles étant le ");
        
        			em47 = element("em");
        
        			em47.textContent = textContent_56;
        
        			t262 = text$2(" et le ");
        
        			em48 = element("em");
        
        			em48.textContent = textContent_57;
        
        			t264 = text$2(". Seule la connaissance du produit ");
        
        			em49 = element("em");
        
        			em49.textContent = textContent_58;
        
        			t266 = text$2(" (noté ");
        
        			create_component(equation31.$$.fragment);
        
        			t267 = text$2(") est essentielle pour programmer l’algorithme, qui aura besoin d’en calculer un à une étape particulière. Quant au produit ");
        
        			em50 = element("em");
        
        			em50.textContent = textContent_59;
        
        			t269 = text$2(" (noté avec le symbole ");
        
        			create_component(equation32.$$.fragment);
        
        			t270 = text$2("), sa connaissance est utile pour mieux comprendre les différentes idées impliquées dans son fonctionnement, mais non indispensable. Je vous en épargnerai donc les détails, et vous verrez plus loin quelle notion lui est associée.");
        
        			t271 = space();
        
        			h30 = element("h3");
        
        			h30.textContent = textContent_60;
        
        			t273 = space();
        
        			p31 = element("p");
        
        			p31.innerHTML = textContent_61;
        
        			t281 = space();
        
        			create_component(equation33.$$.fragment);
        
        			t282 = text$2(" : ");
        
        			create_component(range4.$$.fragment);
        
        			t283 = text$2(" (");
        
        			t284 = text$2(/*$posx*/ ctx[5]);
        
        			t285 = text$2(")\n");
        
        			create_component(equation34.$$.fragment);
        
        			t286 = text$2(" : ");
        
        			create_component(range5.$$.fragment);
        
        			t287 = text$2(" (");
        
        			t288 = text$2(/*$posy*/ ctx[3]);
        
        			t289 = text$2(") ");
        
        			br0 = element("br");
        
        			t290 = space();
        
        			create_component(equation35.$$.fragment);
        
        			t291 = text$2(" : ");
        
        			create_component(range6.$$.fragment);
        
        			t292 = text$2(" (");
        
        			t293 = text$2(/*$posx_two*/ ctx[4]);
        
        			t294 = text$2(")\n");
        
        			create_component(equation36.$$.fragment);
        
        			t295 = text$2(" : ");
        
        			create_component(range7.$$.fragment);
        
        			t296 = text$2(" (");
        
        			t297 = text$2(/*$posy_two*/ ctx[2]);
        
        			t298 = text$2(") ");
        
        			br1 = element("br");
        
        			t299 = space();
        
        			br2 = element("br");
        
        			t300 = space();
        
        			create_component(checkbox2.$$.fragment);
        
        			t301 = text$2(" Bout à bout ?\n");
        
        			create_component(checkbox3.$$.fragment);
        
        			t302 = text$2(" Colorer les équations\n");
        
        			create_component(sketch3.$$.fragment);
        
        			t303 = space();
        
        			p32 = element("p");
        
        			p32.textContent = textContent_62;
        
        			t305 = space();
        
        			if_block3.c();
        
        			t306 = space();
        
        			p33 = element("p");
        
        			p33.innerHTML = textContent_63;
        
        			t318 = space();
        
        			h31 = element("h3");
        
        			h31.textContent = textContent_64;
        
        			t320 = space();
        
        			p34 = element("p");
        
        			t321 = text$2("Le terme ");
        
        			em51 = element("em");
        
        			em51.textContent = textContent_65;
        
        			t323 = text$2(" a une signification très simple. Dans le contexte des vecteurs, c’est une autre manière d’appeler un nombre. Mais pourquoi diable employer un terme différent de celui dont nous avons l’habitude ?\nUn petit passage par la langue anglaise et le latin sera ici éclairant. Remarquez que « scalaire » a la même racine que l’anglais ");
        
        			em52 = element("em");
        
        			em52.textContent = textContent_66;
        
        			t325 = text$2(", dérivé du latin ");
        
        			em53 = element("em");
        
        			em53.textContent = textContent_67;
        
        			t327 = text$2(", qui signifie échelle. Le verbe ");
        
        			em54 = element("em");
        
        			em54.textContent = textContent_68;
        
        			t329 = text$2(" signifiera alors ");
        
        			em55 = element("em");
        
        			em55.textContent = textContent_69;
        
        			t331 = text$2(".\nC’est exactement ce qui se passe lorsque l’on multiplie un vecteur par un nombre, comme le sketch ci-dessous l’illustre : il est ");
        
        			em56 = element("em");
        
        			em56.textContent = textContent_70;
        
        			t333 = text$2(" du scalaire qui le multiplie. Par exemple, si ce dernier vaut ");
        
        			create_component(equation37.$$.fragment);
        
        			t334 = text$2(" alors la magnitude du vecteur résultant vaudra le double de la magnitude du vecteur initial.\nEssayez donc de multiplier le vecteur que vous avez défini plus haut par le scalaire de votre choix, de l’intervalle ci-dessous :");
        
        			t335 = space();
        
        			p35 = element("p");
        
        			em57 = element("em");
        
        			em57.textContent = textContent_71;
        
        			t337 = text$2(" : ");
        
        			create_component(range8.$$.fragment);
        
        			t338 = text$2(" (");
        
        			t339 = text$2(/*$scalar*/ ctx[6]);
        
        			t340 = text$2(")");
        
        			t341 = space();
        
        			create_component(sketch4.$$.fragment);
        
        			t342 = space();
        
        			br3 = element("br");
        
        			t343 = space();
        
        			if_block4.c();
        
        			t344 = space();
        
        			p36 = element("p");
        
        			p36.innerHTML = textContent_72;
        
        			t354 = space();
        
        			h32 = element("h3");
        
        			h32.textContent = textContent_73;
        
        			t356 = space();
        
        			p37 = element("p");
        
        			p37.innerHTML = textContent_74;
        
        			t362 = space();
        
        			h42 = element("h4");
        
        			h42.textContent = textContent_75;
        
        			t364 = space();
        
        			create_component(equation38.$$.fragment);
        
        			t365 = text$2(": ");
        
        			create_component(equation39.$$.fragment);
        
        			t366 = text$2(" : ");
        
        			create_component(range9.$$.fragment);
        
        			t367 = text$2(" (");
        
        			t368 = text$2(/*$posx*/ ctx[5]);
        
        			t369 = text$2(")\n");
        
        			create_component(equation40.$$.fragment);
        
        			t370 = text$2(" : ");
        
        			create_component(range10.$$.fragment);
        
        			t371 = text$2(" (");
        
        			t372 = text$2(/*$posy*/ ctx[3]);
        
        			t373 = text$2(") \n");
        
        			br4 = element("br");
        
        			t374 = space();
        
        			create_component(equation41.$$.fragment);
        
        			t375 = text$2(" : ");
        
        			create_component(equation42.$$.fragment);
        
        			t376 = text$2(" : ");
        
        			create_component(range11.$$.fragment);
        
        			t377 = text$2(" (");
        
        			t378 = text$2(/*$posx_two*/ ctx[4]);
        
        			t379 = text$2(")\n");
        
        			create_component(equation43.$$.fragment);
        
        			t380 = text$2(" : ");
        
        			create_component(range12.$$.fragment);
        
        			t381 = text$2(" (");
        
        			t382 = text$2(/*$posy_two*/ ctx[2]);
        
        			t383 = text$2(")\n");
        
        			create_component(sketch5.$$.fragment);
        
        			t384 = space();
        
        			p38 = element("p");
        
        			p38.innerHTML = textContent_76;
        
        			t400 = space();
        
        			p39 = element("p");
        
        			p39.innerHTML = textContent_77;
        
        			t410 = space();
        
        			p40 = element("p");
        
        			p40.innerHTML = textContent_78;
        
        			t418 = space();
        
        			p41 = element("p");
        
        			t419 = text$2("Nous pouvons donc écrire sa formule de la manière suivante, avec ");
        
        			create_component(equation44.$$.fragment);
        
        			t420 = text$2(" l’angle formé entre les deux vecteurs :");
        
        			t421 = space();
        
        			if_block5.c();
        
        			t422 = space();
        
        			h43 = element("h4");
        
        			h43.textContent = textContent_79;
        
        			t424 = space();
        
        			if_block6.c();
        
        			t425 = space();
        
        			h13 = element("h1");
        
        			h13.textContent = textContent_80;
        
        			t427 = space();
        
        			h22 = element("h2");
        
        			h22.textContent = textContent_81;
        
        			t429 = space();
        
        			p42 = element("p");
        
        			t430 = text$2("Imaginez-vous gambader sur une dune très vallonnée proche de l’océan. A différents endroits de votre balade, vous vous trouverez à une hauteur différente par rapport au niveau de la mer.\nOn peut dire que votre hauteur change ");
        
        			em62 = element("em");
        
        			em62.textContent = textContent_82;
        
        			t432 = text$2(" de votre position. En langage mathématique, on peut écrire ");
        
        			create_component(equation45.$$.fragment);
        
        			t433 = text$2("\nMais ce qui vous plait secrètement le plus, loin de la paisible flânerie, c’est de dévaler les pentes, de courir et vous laisser glisser jusqu’à vous écrouler dans le sable chaud ! Il serait bien pratique si vous aviez en main une carte vous permettant de localiser facilement les endroits de la dune où les pentes sont les plus adaptée à cette joyeuse occupation, tout en vous permettant, éventuellement, de contourner les endroits où ça grimpe dur !");
        
        			t434 = space();
        
        			p43 = element("p");
        
        			t435 = text$2("Et bien c’est exactement ce que nous permet la ");
        
        			em63 = element("em");
        
        			em63.textContent = textContent_83;
        
        			t437 = text$2(" : avec pour seule information la hauteur de la dune en chaque point, nous pouvons connaître la ");
        
        			em64 = element("em");
        
        			em64.textContent = textContent_84;
        
        			t439 = text$2(" en chaque point. Comment me diriez vous ? Et bien tout simplement en ");
        
        			em65 = element("em");
        
        			em65.textContent = textContent_85;
        
        			t441 = text$2(" deux points séparés d’un intervalle entre eux, en prenant leur ");
        
        			em66 = element("em");
        
        			em66.textContent = textContent_86;
        
        			t443 = text$2(".\nJusque là, rien de bien complexe : vous faites exactement la même chose pour calculer votre vitesse. Vous enregistrez votre position à un certain instant, puis après un intervalle de durée fixe, disons une seconde, vous notez où vous vous retrouvez. Si en prenant la ");
        
        			em67 = element("em");
        
        			em67.textContent = textContent_87;
        
        			t445 = text$2(" entre ces deux positions, vous vous rendez compte que vous avez parcouru 10 mètres, votre vitesse sera de 10 mètres par seconde, soit 36 km/h. On dit que la vitesse est la ");
        
        			em68 = element("em");
        
        			em68.textContent = textContent_88;
        
        			t447 = text$2(".\nMais comment faire si vous vouliez connaître votre vitesse à ");
        
        			em69 = element("em");
        
        			em69.textContent = textContent_89;
        
        			t449 = text$2(" ? Là intervient l’idée fondamentale de la dérivation : non pas prendre deux points séparés d’");
        
        			create_component(equation46.$$.fragment);
        
        			t450 = text$2(" seconde, ni même ");
        
        			create_component(equation47.$$.fragment);
        
        			t451 = text$2(" secondes, ni même ");
        
        			create_component(equation48.$$.fragment);
        
        			t452 = text$2(" secondes, mais de considérer un intervalle qui ");
        
        			em70 = element("em");
        
        			em70.textContent = textContent_90;
        
        			t454 = space();
        
        			create_component(equation49.$$.fragment);
        
        			t455 = text$2(" secondes. C’est vertigineux, voire complètement paradoxal ! Vous ne trouvez pas ? Si l’intervalle était de ");
        
        			create_component(equation50.$$.fragment);
        
        			t456 = text$2(" secondes, alors il n’y aurait pas d’intervalle du tout ! ");
        
        			strong23 = element("strong");
        
        			strong23.textContent = textContent_91;
        
        			t458 = text$2(" C’est pourquoi il faut absolument souligner l’expression ");
        
        			em71 = element("em");
        
        			em71.textContent = textContent_92;
        
        			t460 = space();
        
        			create_component(equation51.$$.fragment);
        
        			t461 = text$2(". On traite l’intervalle comme s’il était complètement négligeable, mais en même temps, il n’est pas nul ! On parle d’intervalle ");
        
        			em72 = element("em");
        
        			em72.textContent = textContent_93;
        
        			t463 = text$2(", ou ");
        
        			em73 = element("em");
        
        			em73.textContent = textContent_94;
        
        			t465 = text$2(". C’est une manière de penser tout simplement révolutionnaire aux implications prodigieuses. Il n’est pas étonnant qu’elle n’apparaisse que tardivement dans l’histoire des mathématiques, au XVII");
        
        			sup2 = element("sup");
        
        			sup2.textContent = textContent_95;
        
        			t467 = text$2(" siècle, sous l’impulsion des génies de Newton et de Leibniz, et sur le terreau des idées philosophiques de leur temps. S’il vous intéresse de creuser cette idée, je vous conseille par exemple ce livre très accessible de Steven Strogatz :");
        
        			t468 = space();
        
        			p44 = element("p");
        
        			t469 = text$2("Dans le sketch ci-dessous, vous voyez une fonction : imaginez qu’il s’agit d’une ");
        
        			strong24 = element("strong");
        
        			strong24.textContent = textContent_96;
        
        			t471 = text$2(" (certes, très pentue) ! Pour compléter notre paysage et rappeler sa proximité avec l’océan, je vous ai rajouté quelques vagues mathématiques (dessinées par la fonction ");
        
        			create_component(equation52.$$.fragment);
        
        			t472 = text$2(") de différentes intensités !\nL’intervalle dont je parlais, dans ce cas, se nomme ");
        
        			create_component(equation53.$$.fragment);
        
        			t473 = text$2(" puisqu’il compare différentes position (");
        
        			create_component(equation54.$$.fragment);
        
        			t474 = text$2(" comme ");
        
        			em74 = element("em");
        
        			em74.textContent = textContent_97;
        
        			t476 = text$2(") sur l’axe des ");
        
        			create_component(equation55.$$.fragment);
        
        			t477 = text$2(". Vous pouvez le faire varier à souhait et observer le résultat. Que remarquez-vous lorsque ");
        
        			create_component(equation56.$$.fragment);
        
        			t478 = text$2(" s’approche de ");
        
        			create_component(equation57.$$.fragment);
        
        			t479 = text$2(" ?");
        
        			t480 = space();
        
        			create_component(equation58.$$.fragment);
        
        			t481 = text$2(" : ");
        
        			create_component(range13.$$.fragment);
        
        			t482 = text$2(" (");
        
        			t483 = text$2(/*$derivative_h*/ ctx[49]);
        
        			t484 = text$2(")\n");
        
        			create_component(select0.$$.fragment);
        
        			t485 = space();
        
        			create_component(sketch6.$$.fragment);
        
        			t486 = space();
        
        			p45 = element("p");
        
        			t487 = text$2("La droite qui se forme devient alors la ");
        
        			strong25 = element("strong");
        
        			strong25.textContent = textContent_98;
        
        			t489 = text$2(" à la courbe ! Elle représente donc la « pente en ce point ». Son intensité, indiquée ici par sa couleur, est donc la valeur du coefficient directeur de cette droite, et on l’appelle le ");
        
        			em75 = element("em");
        
        			em75.textContent = textContent_99;
        
        			t491 = text$2(".\nCe dernier vaut, pour un point ");
        
        			create_component(equation59.$$.fragment);
        
        			t492 = text$2(" arbitraire :");
        
        			t493 = space();
        
        			p46 = element("p");
        
        			p46.innerHTML = textContent_100;
        
        			t497 = space();
        
        			p47 = element("p");
        
        			t498 = text$2("On appelera ");
        
        			em77 = element("em");
        
        			em77.textContent = textContent_101;
        
        			t500 = text$2(", notée ");
        
        			create_component(equation60.$$.fragment);
        
        			t501 = text$2(", la fonction qui donnera, en chaque point d’une fonction ");
        
        			create_component(equation61.$$.fragment);
        
        			t502 = text$2(" (");
        
        			em78 = element("em");
        
        			em78.textContent = textContent_102;
        
        			t504 = text$2(" la hauteur), son nombre dérivé. (");
        
        			em79 = element("em");
        
        			em79.textContent = textContent_103;
        
        			t506 = text$2(" la pente)");
        
        			t507 = space();
        
        			h23 = element("h2");
        
        			h23.innerHTML = textContent_104;
        
        			t510 = space();
        
        			p48 = element("p");
        
        			p48.textContent = textContent_105;
        
        			t512 = space();
        
        			p49 = element("p");
        
        			t513 = text$2("On appelle le ");
        
        			em81 = element("em");
        
        			em81.textContent = textContent_106;
        
        			t515 = text$2(" le vecteur qui contient, en chaque point, ");
        
        			strong26 = element("strong");
        
        			strong26.textContent = textContent_107;
        
        			t517 = text$2(" Chacun des nombres qui le composent, ses « coordonnées » considèrent donc des intervalles de nature différente :\nImaginons une fonction qui associe une certaine hauteur en fonction d’une position et du temps, ");
        
        			create_component(equation62.$$.fragment);
        
        			t518 = text$2(", comme par exemple l’observation d’une section de rivière fixe que vient traverser une vague. Prendre son gradient consistera à regarder, en chaque point, la variation de la valeur de la fonction selon un intervalle ");
        
        			create_component(equation63.$$.fragment);
        
        			t519 = text$2(" qui compare la hauteur par rapport aux points d’à côté, puis un autre selon un intervalle ");
        
        			create_component(equation64.$$.fragment);
        
        			t520 = text$2(" par rapport au même point au temps d’après. Notez que le symbole ");
        
        			create_component(equation65.$$.fragment);
        
        			t521 = text$2(" veut dire exactement la même chose que le ");
        
        			create_component(equation66.$$.fragment);
        
        			t522 = text$2(", à savoir ");
        
        			em82 = element("em");
        
        			em82.textContent = textContent_108;
        
        			t524 = text$2(", mais on le préfère lorsqu’il y a ");
        
        			em83 = element("em");
        
        			em83.textContent = textContent_109;
        
        			t526 = text$2(" nombres dérivés. On parle alors de « dérivées partielles », mais c’est un point de détail.");
        
        			t527 = space();
        
        			p50 = element("p");
        
        			t528 = text$2("Le gradient d’une fonction ");
        
        			create_component(equation67.$$.fragment);
        
        			t529 = text$2(" contiendra deux nombres (vecteur à deux dimensions), et celui d’une fonction ");
        
        			create_component(equation68.$$.fragment);
        
        			t530 = text$2(" trois nombres.");
        
        			t531 = space();
        
        			p51 = element("p");
        
        			t532 = text$2("Dans le sketch ci dessous, nous avons quelque chose qui ressemble encore un petit peu plus à une dune ! Ce Pyla mathématique est obtenu grâce à la petite formule suivante : ");
        
        			create_component(equation69.$$.fragment);
        
        			t533 = text$2(".");
        
        			t534 = space();
        
        			p52 = element("p");
        
        			t535 = text$2("Modifiez la position en ");
        
        			create_component(equation70.$$.fragment);
        
        			t536 = text$2(" et en ");
        
        			create_component(equation71.$$.fragment);
        
        			t537 = text$2(" et voyez comment le vecteur de gradient — la flèche — évolue !\nIl représente la direction vers laquelle la hauteur ");
        
        			em84 = element("em");
        
        			em84.textContent = textContent_110;
        
        			t539 = text$2(", soit ");
        
        			strong27 = element("strong");
        
        			strong27.textContent = textContent_111;
        
        			t541 = text$2(". Idéal pour savoir où dévaler !");
        
        			t542 = space();
        
        			p53 = element("p");
        
        			em85 = element("em");
        
        			em85.textContent = textContent_112;
        
        			t544 = text$2(" : ");
        
        			create_component(range14.$$.fragment);
        
        			t545 = text$2(" (");
        
        			t546 = text$2(/*$resolutionFunction*/ ctx[50]);
        
        			t547 = text$2(")\n");
        
        			em86 = element("em");
        
        			em86.textContent = textContent_113;
        
        			t549 = text$2(" : ");
        
        			create_component(range15.$$.fragment);
        
        			t550 = text$2(" (");
        
        			t551 = text$2(/*$gradient_bounds*/ ctx[51]);
        
        			t552 = text$2(") ");
        
        			br5 = element("br");
        
        			t553 = space();
        
        			em87 = element("em");
        
        			em87.textContent = textContent_114;
        
        			t555 = space();
        
        			create_component(equation72.$$.fragment);
        
        			t556 = text$2(" : ");
        
        			create_component(range16.$$.fragment);
        
        			t557 = text$2(" (");
        
        			t558 = text$2(/*$x_grad_arrow*/ ctx[52]);
        
        			t559 = text$2(") ");
        
        			create_component(equation73.$$.fragment);
        
        			t560 = space();
        
        			em88 = element("em");
        
        			em88.textContent = textContent_115;
        
        			t562 = space();
        
        			create_component(equation74.$$.fragment);
        
        			t563 = text$2(" : ");
        
        			create_component(range17.$$.fragment);
        
        			t564 = text$2(" (");
        
        			t565 = text$2(/*$y_grad_arrow*/ ctx[53]);
        
        			t566 = text$2(")");
        
        			t567 = space();
        
        			create_component(checkbox4.$$.fragment);
        
        			t568 = text$2(" Dessiner le repère\n");
        
        			create_component(sketch7.$$.fragment);
        
        			t569 = space();
        
        			p54 = element("p");
        
        			p54.textContent = textContent_116;
        
        			t571 = space();
        
        			create_component(equation75.$$.fragment);
        
        			t572 = space();
        
        			p55 = element("p");
        
        			p55.textContent = textContent_117;
        
        			t574 = space();
        
        			h14 = element("h1");
        
        			h14.textContent = textContent_118;
        
        			t576 = space();
        
        			p56 = element("p");
        
        			t577 = text$2("Par rapport aux vecteurs, un champ de vecteurs introduit une contrainte unique que ces derniers ne possédaient pas : il les rend ");
        
        			em89 = element("em");
        
        			em89.textContent = textContent_119;
        
        			t579 = text$2(" d’un point de l’espace !\nCela veut simplement dire qu’il associe un unique ");
        
        			em90 = element("em");
        
        			em90.textContent = textContent_120;
        
        			t581 = text$2(" à chaque ");
        
        			em91 = element("em");
        
        			em91.textContent = textContent_121;
        
        			t583 = text$2(" de l’espace. En termes mathématiques plus formels, on dit que c’est une application de ");
        
        			create_component(equation76.$$.fragment);
        
        			t584 = text$2(" dans ");
        
        			create_component(equation77.$$.fragment);
        
        			t585 = text$2(" (");
        
        			create_component(equation78.$$.fragment);
        
        			t586 = text$2(" dans le cas du plan)");
        
        			t587 = space();
        
        			h24 = element("h2");
        
        			h24.textContent = textContent_122;
        
        			t589 = space();
        
        			p57 = element("p");
        
        			t590 = text$2("L’exemple ci-dessous vous donne un aperçu du champ de vecteurs qui associe à chaque ");
        
        			em92 = element("em");
        
        			em92.textContent = textContent_123;
        
        			t592 = space();
        
        			create_component(equation79.$$.fragment);
        
        			t593 = text$2(" ou bien le ");
        
        			em93 = element("em");
        
        			em93.textContent = textContent_124;
        
        			t595 = space();
        
        			create_component(equation80.$$.fragment);
        
        			t596 = text$2(", ou bien le vecteur ");
        
        			create_component(equation81.$$.fragment);
        
        			t597 = text$2(" pour un certain échantillon de points. Le choix est vôtre ! (Attention à bien distinguer les deux idées ici !) Nous prendrons pour chaque case du repère le point correspondant à son centre.");
        
        			t598 = space();
        
        			p58 = element("p");
        
        			t599 = text$2("Vous avez la possibilité de faire varier les paramètres ");
        
        			create_component(equation82.$$.fragment);
        
        			t600 = text$2(" et ");
        
        			create_component(equation83.$$.fragment);
        
        			t601 = text$2(" et d’observer le résultat.\nLorsque vous passerez votre souris sur le sketch, le vecteur correspondant à sa position dans le repère se dessinera à l’origine. De cette manière, vous aurez accès à une représentation plus « continue » du champ.");
        
        			t602 = space();
        
        			create_component(equation84.$$.fragment);
        
        			t603 = text$2(" : ");
        
        			create_component(range18.$$.fragment);
        
        			t604 = text$2(" (");
        
        			t605 = text$2(/*$param_a*/ ctx[54]);
        
        			t606 = text$2(")\n");
        
        			create_component(equation85.$$.fragment);
        
        			t607 = text$2(" : ");
        
        			create_component(range19.$$.fragment);
        
        			t608 = text$2(" (");
        
        			t609 = text$2(/*$param_b*/ ctx[55]);
        
        			t610 = text$2(")\n");
        
        			create_component(select1.$$.fragment);
        
        			t611 = space();
        
        			create_component(sketch8.$$.fragment);
        
        			t612 = space();
        
        			h25 = element("h2");
        
        			h25.textContent = textContent_125;
        
        			t614 = space();
        
        			p59 = element("p");
        
        			p59.innerHTML = textContent_126;
        
        			t620 = space();
        
        			p60 = element("p");
        
        			t621 = text$2("Dans les deux cas, la formule qui les définit implique un drôle de triangle renversé, censé être à l’image d’une lyre antique, un opérateur que l’on appelle ");
        
        			strong30 = element("strong");
        
        			strong30.textContent = textContent_127;
        
        			t623 = text$2(", noté ");
        
        			create_component(equation86.$$.fragment);
        
        			t624 = text$2(".\nIl symbolise un bien étrange vecteur, qui vous surprendra sûrement. ");
        
        			create_component(equation87.$$.fragment);
        
        			t625 = space();
        
        			p61 = element("p");
        
        			t626 = text$2("Vous remarquez comme ce vecteur ressemble au ");
        
        			em94 = element("em");
        
        			em94.textContent = textContent_128;
        
        			t628 = text$2(" que nous avons défini plus haut ? A la différence près que le ");
        
        			create_component(equation88.$$.fragment);
        
        			t629 = text$2(" au numérateur est seul ..!\nMais puisque ce symbole veut dire ");
        
        			em95 = element("em");
        
        			em95.textContent = textContent_129;
        
        			t631 = text$2(" et qu’une différence est une comparaison entre deux termes, pourquoi diable est-il tout seul ? Vous posez les bonnes questions !");
        
        			t632 = space();
        
        			create_component(equation89.$$.fragment);
        
        			t633 = text$2(", comme un véritable instrument, ne vaut pas grand chose s'il est laissé à lui-même. Il lui faut un musicien et une partition !\nSi comme musicien nous choisissons la **multiplication**, et comme partition une fonction ");
        
        			create_component(equation90.$$.fragment);
        
        			t634 = text$2(", la musique que nous entendrons sera le gradient de ");
        
        			create_component(equation91.$$.fragment);
        
        			t635 = text$2(" !\n");
        
        			create_component(equation92.$$.fragment);
        
        			t636 = space();
        
        			p62 = element("p");
        
        			t637 = text$2("Nous avons ici strictement appliqué les règles propres de la multiplication d’un vecteur avec un scalaire, en traitant le symbole ");
        
        			create_component(equation93.$$.fragment);
        
        			t638 = space();
        
        			strong31 = element("strong");
        
        			strong31.textContent = textContent_130;
        
        			t640 = space();
        
        			p63 = element("p");
        
        			p63.textContent = textContent_131;
        
        			t642 = space();
        
        			h33 = element("h3");
        
        			h33.textContent = textContent_132;
        
        			t644 = space();
        
        			p64 = element("p");
        
        			t645 = text$2("La ");
        
        			strong32 = element("strong");
        
        			strong32.textContent = textContent_133;
        
        			t647 = text$2(" en un point du champ exprime la tendance qu’on les vecteurs aux alentours de ce point à ");
        
        			em96 = element("em");
        
        			em96.textContent = textContent_134;
        
        			t649 = text$2(" (comme si le champ se « contractait » en ce point) ou ");
        
        			em97 = element("em");
        
        			em97.textContent = textContent_135;
        
        			t651 = text$2(" (comme si le champ se « dilatait » depuis ce point).\nDans le premier cas, la divergence est ");
        
        			create_component(equation94.$$.fragment);
        
        			t652 = text$2(" et dans le second cas, elle est ");
        
        			create_component(equation95.$$.fragment);
        
        			t653 = text$2(". Dans le cas où elle serait nulle, il n’y a ni contraction ni dilatation.");
        
        			t654 = space();
        
        			p65 = element("p");
        
        			t655 = text$2("Si vous cliquez sur ce les mots soulignés directement ci-après, le sketch précédent affichera la ");
        
        			create_component(actionelement0.$$.fragment);
        
        			t656 = text$2(" à l’endroit pointé par la souris, au lieu du ");
        
        			create_component(actionelement1.$$.fragment);
        
        			t657 = text$2(" comme c’était le cas tout à l’heure.\nVous remarquerez alors que pour un des deux champs, la divergence est nulle en tout point.");
        
        			t658 = space();
        
        			p66 = element("p");
        
        			p66.innerHTML = textContent_136;
        
        			t664 = space();
        
        			p67 = element("p");
        
        			t665 = text$2("Sa formule est ");
        
        			create_component(equation96.$$.fragment);
        
        			t666 = text$2(" (produit scalaire) où ");
        
        			create_component(equation97.$$.fragment);
        
        			t667 = text$2(" est un champ de vecteurs.");
        
        			t668 = space();
        
        			h34 = element("h3");
        
        			h34.textContent = textContent_137;
        
        			t670 = space();
        
        			p68 = element("p");
        
        			p68.innerHTML = textContent_138;
        
        			t676 = space();
        
        			p69 = element("p");
        
        			t677 = text$2("Si vous cliquez sur ce les mots soulignés directement ci-après, le sketch précédent affichera la ");
        
        			create_component(actionelement2.$$.fragment);
        
        			t678 = text$2(" à l’endroit pointé par la souris, au lieu du ");
        
        			create_component(actionelement3.$$.fragment);
        
        			t679 = text$2(" comme c’était le cas tout à l’heure.\nVous remarquerez alors que pour un des deux champs, le rotationnel est nul en tout point.");
        
        			t680 = space();
        
        			p70 = element("p");
        
        			t681 = text$2("Elle sera représentée par un ");
        
        			create_component(equation98.$$.fragment);
        
        			t682 = text$2(" si sa valeur est positive ou un ");
        
        			create_component(equation99.$$.fragment);
        
        			t683 = text$2(" si sa valeur est négative, plus ou moins grand selon de son intensité.");
        
        			t684 = space();
        
        			p71 = element("p");
        
        			t685 = text$2("Sa formule est ");
        
        			create_component(equation100.$$.fragment);
        
        			t686 = text$2(" (produit vectoriel) où ");
        
        			create_component(equation101.$$.fragment);
        
        			t687 = text$2(" est un champ de vecteurs.");
        
        			t688 = space();
        
        			h26 = element("h2");
        
        			h26.textContent = textContent_139;
        
        			t690 = space();
        
        			p72 = element("p");
        
        			p72.innerHTML = textContent_140;
        
        			t694 = space();
        
        			p73 = element("p");
        
        			p73.innerHTML = textContent_141;
        
        			t698 = space();
        
        			ul1 = element("ul");
        
        			ul1.innerHTML = textContent_142;
        
        			t710 = space();
        
        			create_component(sketch9.$$.fragment);
        
        			t711 = space();
        
        			p74 = element("p");
        
        			p74.textContent = textContent_143;
        
        			t713 = space();
        
        			create_component(equation102.$$.fragment);
        
        			t714 = space();
        
        			p75 = element("p");
        
        			t715 = text$2("Que vient donc faire cet étrange ");
        
        			create_component(equation103.$$.fragment);
        
        			t716 = text$2(" ici ? Pourquoi n’est-il pas écrit comme les autres champs de vecteurs ?\nEn fait, ");
        
        			create_component(equation104.$$.fragment);
        
        			t717 = text$2(" est un champ ");
        
        			strong37 = element("strong");
        
        			strong37.textContent = textContent_144;
        
        			t719 = text$2(", c’est-à-dire un champ qui fait correspondre un ");
        
        			strong38 = element("strong");
        
        			strong38.textContent = textContent_145;
        
        			t721 = text$2(" à chaque point plutôt qu’un vecteur. Lorsque nous le multiplions par ");
        
        			create_component(equation105.$$.fragment);
        
        			t722 = text$2(", nous obtenons son ");
        
        			strong39 = element("strong");
        
        			strong39.textContent = textContent_146;
        
        			t724 = text$2(", qui lui, par contre, est un champ de vecteurs !");
        
        			t725 = space();
        
        			create_component(equation106.$$.fragment);
        
        			t726 = text$2(" est donc un **champ gradient**, ce qui n'est pas le cas de tous les autres champs.\n");
        
        			p76 = element("p");
        
        			t727 = text$2("Les vecteurs qu’il contient correspondent à la variation de ");
        
        			create_component(equation107.$$.fragment);
        
        			t728 = text$2(" dans toutes les directions de l’espace. Dans les deux dimensions qui nous intéressent ici, ses coordonnées correspondent donc à la dérivée de ");
        
        			create_component(equation108.$$.fragment);
        
        			t729 = text$2(" selon la direction horizontale ");
        
        			create_component(equation109.$$.fragment);
        
        			t730 = text$2(", et à la dérivée de ");
        
        			create_component(equation110.$$.fragment);
        
        			t731 = text$2(" selon la direction verticale ");
        
        			create_component(equation111.$$.fragment);
        
        			t732 = text$2(", c’est-à-dire à ");
        
        			create_component(equation112.$$.fragment);
        
        			t733 = text$2(".");
        
        			t734 = space();
        
        			p77 = element("p");
        
        			p77.textContent = textContent_147;
        
        			t736 = space();
        
        			p78 = element("p");
        
        			p78.textContent = textContent_148;
        
        			t738 = space();
        
        			create_component(equation113.$$.fragment);
        
        			t739 = space();
        
        			create_component(equation114.$$.fragment);
        
        			t740 = space();
        
        			p79 = element("p");
        
        			t741 = text$2("Si nous consentons à une petite coquetterie d’écriture, sachez que les mathématiciens aiment bien « retourner le triangle » lorsque ce dernier est élevé au carré ! (");
        
        			create_component(equation115.$$.fragment);
        
        			t742 = text$2(")");
        
        			t743 = space();
        
        			p80 = element("p");
        
        			t744 = text$2("Ne confondez-donc surtout pas sa signification ici avec le « delta » qui, habituellement, dénote un ");
        
        			strong40 = element("strong");
        
        			strong40.textContent = textContent_149;
        
        			t746 = text$2(" : ce delta là dénote ce que l’on appelle le ");
        
        			strong41 = element("strong");
        
        			strong41.textContent = textContent_150;
        
        			t748 = text$2(" : il prend, dans toutes les directions de l’espace, les dérivées ");
        
        			strong42 = element("strong");
        
        			strong42.textContent = textContent_151;
        
        			t750 = text$2(" en chaque point : ");
        
        			create_component(equation116.$$.fragment);
        
        			t751 = text$2(".");
        
        			t752 = space();
        
        			p81 = element("p");
        
        			p81.innerHTML = textContent_152;
        
        			t756 = space();
        
        			create_component(equation117.$$.fragment);
        
        			t757 = space();
        
        			p82 = element("p");
        
        			t758 = text$2("Puisque nous déduisons, grâce à la toute première équation, que ");
        
        			create_component(equation118.$$.fragment);
        
        			t759 = text$2(" nous n’avons qu’à résoudre l’équation de Poisson pour trouver ");
        
        			create_component(equation119.$$.fragment);
        
        			t760 = text$2(", calculer son gradient, puis soustraire le tout au champ ");
        
        			create_component(equation120.$$.fragment);
        
        			t761 = text$2(" pour obtenir enfin notre ");
        
        			strong44 = element("strong");
        
        			strong44.textContent = textContent_153;
        
        			t763 = text$2(" tant désiré !");
        
        			t764 = space();
        
        			p83 = element("p");
        
        			p83.textContent = textContent_154;
        
        			t766 = space();
        
        			h15 = element("h1");
        
        			h15.textContent = textContent_155;
        
        			t768 = space();
        
        			p84 = element("p");
        
        			t769 = text$2("Si nous avons introduit les champs de vecteurs, c’est qu’ils nous servent de ");
        
        			em102 = element("em");
        
        			em102.textContent = textContent_156;
        
        			t771 = text$2(" pour représenter l’état d’un fluide à un instant ");
        
        			create_component(equation121.$$.fragment);
        
        			t772 = text$2(". Ce dernier ne sera rien d’autre qu’un champ de vecteurs ");
        
        			em103 = element("em");
        
        			em103.textContent = textContent_157;
        
        			t774 = text$2(" : la vitesse de déplacement d’une particule du fluide à chaque point de ce dernier.\nToute son évolution au cours du temps, son « écoulement », sera une modification continue de ces vitesses en fonction de différentes contraintes que nous allons voir tout de suite !");
        
        			t775 = space();
        
        			p85 = element("p");
        
        			t776 = text$2("Dès que vous comprenez qu’une équation doit traduire l’");
        
        			em104 = element("em");
        
        			em104.textContent = textContent_158;
        
        			t778 = text$2(" de quelque chose, immédiatement, il faut vous dire qu’il s’agira dans tous les cas d’une ");
        
        			strong45 = element("strong");
        
        			strong45.textContent = textContent_159;
        
        			t780 = text$2(", impliquant des dérivées. En effet, la dérivée nous renseigne toujours de ");
        
        			strong46 = element("strong");
        
        			strong46.textContent = textContent_160;
        
        			t782 = text$2(" d’une certaine valeur en fonction d’une autre dont elle dépend. Ici, il s’agira donc de la ");
        
        			em105 = element("em");
        
        			em105.textContent = textContent_161;
        
        			t784 = space();
        
        			create_component(equation122.$$.fragment);
        
        			t785 = text$2("  en chaque point au cours du ");
        
        			em106 = element("em");
        
        			em106.textContent = textContent_162;
        
        			t787 = space();
        
        			create_component(equation123.$$.fragment);
        
        			t788 = text$2(" .\nC’est ainsi qu’il faut lire les équations de Navier-Stokes. J’ai essayé de la rendre moins intimidante en l’enrichissant de quelques animations.");
        
        			t789 = space();
        
        			p86 = element("p");
        
        			p86.innerHTML = textContent_163;
        
        			t792 = space();
        
        			p87 = element("p");
        
        			p87.innerHTML = textContent_164;
        
        			t795 = space();
        
        			h35 = element("h3");
        
        			h35.textContent = textContent_165;
        
        			t797 = space();
        
        			p88 = element("p");
        
        			p88.textContent = textContent_166;
        
        			t799 = space();
        
        			p89 = element("p");
        
        			p89.innerHTML = textContent_167;
        
        			t805 = space();
        
        			p90 = element("p");
        
        			p90.innerHTML = textContent_168;
        
        			t811 = space();
        
        			p91 = element("p");
        
        			p91.innerHTML = textContent_169;
        
        			t817 = space();
        
        			p92 = element("p");
        
        			t818 = text$2("A ce stade de l’article, arrivez vous à apercevoir quelle condition mathématique régit ces fluides incompressibles ? Pas de compression implique l’absence de toute ");
        
        			em111 = element("em");
        
        			em111.textContent = textContent_170;
        
        			t820 = text$2(" et de toute ");
        
        			em112 = element("em");
        
        			em112.textContent = textContent_171;
        
        			t822 = text$2(" ! La masse par unité de volume du fluide doit donc rester constante. Dans ces cas là, la divergence, ");
        
        			create_component(equation124.$$.fragment);
        
        			t823 = text$2(" !");
        
        			t824 = space();
        
        			p93 = element("p");
        
        			p93.innerHTML = textContent_172;
        
        			t828 = space();
        
        			h16 = element("h1");
        
        			h16.textContent = textContent_173;
        
        			t830 = space();
        
        			p94 = element("p");
        
        			p94.textContent = textContent_174;
        
        			t832 = space();
        
        			p95 = element("p");
        
        			t833 = text$2("Il y a tout de même une logique à un tel nom. A l’instar de la relaxation musculaire qui cherche à apaiser certaines tensions, certaines ");
        
        			em113 = element("em");
        
        			em113.textContent = textContent_175;
        
        			t835 = text$2(" mécaniques logées dans nos muscles, la relaxation d’un problème mathématique consiste aussi à supprimer certaines des contraintes qu’il impose.\nLa relation de ");
        
        			em114 = element("em");
        
        			em114.textContent = textContent_176;
        
        			t837 = text$2(" en est une, par exemple. Dans une équation simple, comme ");
        
        			create_component(equation125.$$.fragment);
        
        			t838 = text$2(" La valeur inconnue ");
        
        			create_component(equation126.$$.fragment);
        
        			t839 = space();
        
        			em115 = element("em");
        
        			em115.textContent = textContent_177;
        
        			t841 = text$2(" d’une autre inconnue : ");
        
        			create_component(equation127.$$.fragment);
        
        			t842 = text$2(". La relaxation visera à supprimer cette dépendance, en transformant intelligemment une valeur ");
        
        			em116 = element("em");
        
        			em116.textContent = textContent_178;
        
        			t844 = text$2(" en valeur ");
        
        			em117 = element("em");
        
        			em117.textContent = textContent_179;
        
        			t846 = text$2(".\nC’est précisément l’enjeu de la méthode que nous allons explorer maintenant !");
        
        			t847 = space();
        
        			p96 = element("p");
        
        			t848 = text$2("Avec son aide, nous allons ici résoudre ");
        
        			strong52 = element("strong");
        
        			strong52.textContent = textContent_180;
        
        			t850 = text$2(" un système d’équation simple : 3 équations de plans à 3 inconnues. La solution d’un tel système nous informe des coordonnées du point d’intersection ");
        
        			create_component(equation128.$$.fragment);
        
        			t851 = text$2(" de ces plans entre eux.");
        
        			t852 = space();
        
        			p97 = element("p");
        
        			t853 = text$2("De même qu’une droite, dont l’équation est de toujours de la forme ");
        
        			create_component(equation129.$$.fragment);
        
        			t854 = text$2(" (équivalent au traditionnel ");
        
        			create_component(equation130.$$.fragment);
        
        			t855 = text$2(" que l’on voit en seconde avec ");
        
        			create_component(equation131.$$.fragment);
        
        			t856 = text$2(" et ");
        
        			create_component(equation132.$$.fragment);
        
        			t857 = text$2(") vient ");
        
        			em118 = element("em");
        
        			em118.textContent = textContent_181;
        
        			t859 = text$2(" le plan (");
        
        			create_component(equation133.$$.fragment);
        
        			t860 = text$2("), un plan, d’équation ");
        
        			create_component(equation134.$$.fragment);
        
        			t861 = text$2(" vient pour sa part couper en deux l’espace à ");
        
        			em119 = element("em");
        
        			em119.textContent = textContent_182;
        
        			t863 = text$2(" dimensions (");
        
        			create_component(equation135.$$.fragment);
        
        			t864 = text$2("). En extrapolant ce motif, l’hyperplan ");
        
        			create_component(equation136.$$.fragment);
        
        			t865 = text$2(" viendrait quant à lui séparer en deux l’espace à ");
        
        			em120 = element("em");
        
        			em120.textContent = textContent_183;
        
        			t867 = text$2(" dimensions (");
        
        			create_component(equation137.$$.fragment);
        
        			t868 = text$2(") et ainsi de suite.");
        
        			t869 = space();
        
        			p98 = element("p");
        
        			t870 = text$2("Ainsi, dans l’espace à trois dimensions, nous pouvons tracer un plan arbitraire en faisant varier ces quatre paramètres, et c’est ce que je vous propose de faire maintenant ! Ils se décomposent en trois ");
        
        			em121 = element("em");
        
        			em121.textContent = textContent_184;
        
        			t872 = space();
        
        			create_component(equation138.$$.fragment);
        
        			t873 = text$2(", ");
        
        			create_component(equation139.$$.fragment);
        
        			t874 = text$2(", ");
        
        			create_component(equation140.$$.fragment);
        
        			t875 = text$2(" et une ");
        
        			em122 = element("em");
        
        			em122.textContent = textContent_185;
        
        			t877 = space();
        
        			create_component(equation141.$$.fragment);
        
        			t878 = text$2(", que nous ferons varier ici (arbitrairement) sur l’intervalle ");
        
        			create_component(equation142.$$.fragment);
        
        			t879 = text$2(".\nSi nous avons bel et bien besoin de trois plans pour notre problème, c’est que l’intersection de deux plans est toujours une ");
        
        			em123 = element("em");
        
        			em123.textContent = textContent_186;
        
        			t881 = text$2(", et celle de trois plans un ");
        
        			em124 = element("em");
        
        			em124.textContent = textContent_187;
        
        			t883 = text$2(".");
        
        			t884 = space();
        
        			p99 = element("p");
        
        			p99.textContent = textContent_188;
        
        			t886 = space();
        
        			create_component(checkbox5.$$.fragment);
        
        			t887 = space();
        
        			create_component(equation143.$$.fragment);
        
        			t888 = space();
        
        			create_component(dynamic2.$$.fragment);
        
        			t889 = space();
        
        			create_component(equation144.$$.fragment);
        
        			t890 = space();
        
        			create_component(dynamic3.$$.fragment);
        
        			t891 = space();
        
        			create_component(equation145.$$.fragment);
        
        			t892 = space();
        
        			create_component(dynamic4.$$.fragment);
        
        			t893 = space();
        
        			create_component(equation146.$$.fragment);
        
        			t894 = space();
        
        			create_component(dynamic5.$$.fragment);
        
        			t895 = space();
        
        			br6 = element("br");
        
        			t896 = space();
        
        			create_component(checkbox6.$$.fragment);
        
        			t897 = space();
        
        			create_component(equation147.$$.fragment);
        
        			t898 = space();
        
        			create_component(dynamic6.$$.fragment);
        
        			t899 = space();
        
        			create_component(equation148.$$.fragment);
        
        			t900 = space();
        
        			create_component(dynamic7.$$.fragment);
        
        			t901 = space();
        
        			create_component(equation149.$$.fragment);
        
        			t902 = space();
        
        			create_component(dynamic8.$$.fragment);
        
        			t903 = space();
        
        			create_component(equation150.$$.fragment);
        
        			t904 = space();
        
        			create_component(dynamic9.$$.fragment);
        
        			t905 = space();
        
        			br7 = element("br");
        
        			t906 = space();
        
        			create_component(checkbox7.$$.fragment);
        
        			t907 = space();
        
        			create_component(equation151.$$.fragment);
        
        			t908 = space();
        
        			create_component(dynamic10.$$.fragment);
        
        			t909 = space();
        
        			create_component(equation152.$$.fragment);
        
        			t910 = space();
        
        			create_component(dynamic11.$$.fragment);
        
        			t911 = space();
        
        			create_component(equation153.$$.fragment);
        
        			t912 = space();
        
        			create_component(dynamic12.$$.fragment);
        
        			t913 = space();
        
        			create_component(equation154.$$.fragment);
        
        			t914 = space();
        
        			create_component(dynamic13.$$.fragment);
        
        			t915 = space();
        
        			br8 = element("br");
        
        			t916 = space();
        
        			p100 = element("p");
        
        			p100.textContent = textContent_189;
        
        			t918 = space();
        
        			create_component(equation155.$$.fragment);
        
        			t919 = space();
        
        			p101 = element("p");
        
        			p101.innerHTML = textContent_190;
        
        			t923 = space();
        
        			create_component(equation156.$$.fragment);
        
        			t924 = space();
        
        			h36 = element("h3");
        
        			h36.textContent = textContent_191;
        
        			t926 = space();
        
        			create_component(sketch10.$$.fragment);
        
        			t927 = space();
        
        			span22 = element("span");
        
        			span22.innerHTML = textContent_192;
        
        			t928 = space();
        
        			h44 = element("h4");
        
        			h44.textContent = textContent_193;
        
        			t930 = space();
        
        			create_component(checkbox8.$$.fragment);
        
        			t931 = text$2(" Dessiner les plans ");
        
        			br9 = element("br");
        
        			t932 = space();
        
        			create_component(checkbox9.$$.fragment);
        
        			t933 = text$2(" Dessiner le repère ");
        
        			br10 = element("br");
        
        			t934 = space();
        
        			create_component(checkbox10.$$.fragment);
        
        			t935 = text$2(" Rotation automatique ");
        
        			br11 = element("br");
        
        			t936 = space();
        
        			h45 = element("h4");
        
        			h45.textContent = textContent_194;
        
        			t938 = space();
        
        			p102 = element("p");
        
        			em126 = element("em");
        
        			em126.textContent = textContent_195;
        
        			t940 = text$2(" : ");
        
        			create_component(range20.$$.fragment);
        
        			t941 = text$2(" (");
        
        			t942 = text$2(/*$iterationsGS*/ ctx[45]);
        
        			t943 = text$2(")");
        
        			t944 = space();
        
        			create_component(checkbox11.$$.fragment);
        
        			t945 = text$2(" Dessiner les itérés ");
        
        			br12 = element("br");
        
        			t946 = space();
        
        			br13 = element("br");
        
        			t947 = space();
        
        			create_component(actionelement4.$$.fragment);
        
        			t948 = space();
        
        			h37 = element("h3");
        
        			h37.textContent = textContent_196;
        
        			t950 = space();
        
        			if_block7.c();
        
        			t951 = space();
        
        			h17 = element("h1");
        
        			h17.textContent = textContent_197;
        
        			t953 = space();
        
        			p103 = element("p");
        
        			p103.textContent = textContent_198;
        
        			t955 = space();
        
        			p104 = element("p");
        
        			t956 = text$2("Ce dernier consiste en une ");
        
        			strong53 = element("strong");
        
        			strong53.textContent = textContent_199;
        
        			t958 = text$2(" répétant inlassablement quatre étapes, aboutissant à la modification du champ de vecteurs représentant l’état du fluide à l’instant ");
        
        			create_component(equation157.$$.fragment);
        
        			t959 = text$2(" afin qu’il représente l’état à l’instant ");
        
        			create_component(equation158.$$.fragment);
        
        			t960 = text$2(".");
        
        			t961 = space();
        
        			p105 = element("p");
        
        			p105.innerHTML = textContent_200;
        
        			t966 = space();
        
        			h27 = element("h2");
        
        			h27.textContent = textContent_201;
        
        			t968 = space();
        
        			p106 = element("p");
        
        			t969 = text$2("Puisqu’il s’agit ici de la routine la plus simple, nous ne nous y attarderons que peu !\nDans une grille de résolution ");
        
        			code0 = element("code");
        
        			code0.textContent = textContent_202;
        
        			t971 = text$2(", nous voulons ajouter une certaine quantité en une case ");
        
        			create_component(equation159.$$.fragment);
        
        			t972 = text$2(" donnée.");
        
        			t973 = space();
        
        			pre0 = element("pre");
        
        			html_tag = new HtmlTagHydration(false);
        
        			t974 = space();
        
        			p107 = element("p");
        
        			p107.innerHTML = textContent_203;
        
        			t982 = space();
        
        			p108 = element("p");
        
        			p108.textContent = textContent_204;
        
        			t984 = space();
        
        			h28 = element("h2");
        
        			h28.textContent = textContent_205;
        
        			t986 = space();
        
        			p109 = element("p");
        
        			p109.innerHTML = textContent_206;
        
        			t990 = space();
        
        			p110 = element("p");
        
        			p110.innerHTML = textContent_207;
        
        			t994 = space();
        
        			create_component(staticcontainer.$$.fragment);
        
        			t995 = space();
        
        			p111 = element("p");
        
        			p111.innerHTML = textContent_208;
        
        			t999 = space();
        
        			p112 = element("p");
        
        			p112.innerHTML = textContent_209;
        
        			t1002 = space();
        
        			create_component(radio.$$.fragment);
        
        			t1003 = text$2("\n(");
        
        			t1004 = text$2(/*$coeff_diff_demo*/ ctx[57]);
        
        			t1005 = text$2(")\n");
        
        			p113 = element("p");
        
        			em134 = element("em");
        
        			em134.textContent = textContent_210;
        
        			t1007 = text$2(" : ");
        
        			create_component(range21.$$.fragment);
        
        			t1008 = space();
        
        			create_component(sketch11.$$.fragment);
        
        			t1009 = space();
        
        			h38 = element("h3");
        
        			h38.textContent = textContent_211;
        
        			t1011 = space();
        
        			p114 = element("p");
        
        			p114.innerHTML = textContent_212;
        
        			t1021 = space();
        
        			h50 = element("h5");
        
        			h50.textContent = textContent_213;
        
        			t1023 = space();
        
        			p115 = element("p");
        
        			t1024 = text$2("Pour chaque ");
        
        			em135 = element("em");
        
        			em135.textContent = textContent_214;
        
        			t1026 = text$2(" case, on lui confère premièrement la valeur qu’elle possédait à l’instant ");
        
        			create_component(equation160.$$.fragment);
        
        			t1027 = text$2(", puis lui ajoute la somme des parts qu’elle reçoit de ses cases environnantes, chacune lui offrant ");
        
        			create_component(equation161.$$.fragment);
        
        			t1028 = text$2(" de son don total, calculé selon leur valeur à l’instant ");
        
        			create_component(equation162.$$.fragment);
        
        			t1029 = text$2(". La taille de ces parts est fonction du coefficient de diffusion. On lui retranche finalement son propre don total, et nous obtenons sa nouvelle valeur.");
        
        			t1030 = space();
        
        			h51 = element("h5");
        
        			h51.textContent = textContent_215;
        
        			t1032 = space();
        
        			pre1 = element("pre");
        
        			html_tag_1 = new HtmlTagHydration(false);
        
        			t1033 = space();
        
        			h39 = element("h3");
        
        			h39.textContent = textContent_216;
        
        			t1035 = space();
        
        			p116 = element("p");
        
        			t1036 = text$2("La méthode stable ne diffère pas radicalement de celle-ci dans son esprit, à une différence de taille : elle procède ");
        
        			em136 = element("em");
        
        			em136.textContent = textContent_217;
        
        			t1038 = text$2("\nAu lieu de calculer unes à unes la nouvelle valeur à ");
        
        			create_component(equation163.$$.fragment);
        
        			t1039 = text$2(" de chaque case en leur donnant la part qui leur revient, on va ce coup-ci ");
        
        			strong60 = element("strong");
        
        			strong60.textContent = textContent_218;
        
        			t1041 = text$2(" de l’instant ");
        
        			create_component(equation164.$$.fragment);
        
        			t1042 = text$2(", dont nous traiterons la valeurs des cases comme les ");
        
        			strong61 = element("strong");
        
        			strong61.textContent = textContent_219;
        
        			t1044 = text$2(" d’une équation, pour « remonter le temps » vers les valeurs connues de l’instant ");
        
        			create_component(equation165.$$.fragment);
        
        			t1045 = text$2(".");
        
        			t1046 = space();
        
        			pre2 = element("pre");
        
        			html_tag_2 = new HtmlTagHydration(false);
        
        			t1047 = space();
        
        			p117 = element("p");
        
        			p117.textContent = textContent_220;
        
        			t1049 = space();
        
        			p118 = element("p");
        
        			p118.innerHTML = textContent_221;
        
        			t1055 = space();
        
        			p119 = element("p");
        
        			p119.innerHTML = textContent_222;
        
        			t1059 = space();
        
        			create_component(equation166.$$.fragment);
        
        			t1060 = space();
        
        			p120 = element("p");
        
        			strong64 = element("strong");
        
        			strong64.textContent = textContent_223;
        
        			t1062 = text$2(" pour une très petite grille de résolution ");
        
        			create_component(equation167.$$.fragment);
        
        			t1063 = text$2(".\nSelon la puissance de votre carte graphique, vous pourrez atteindre des résolutions supérieures à ");
        
        			create_component(equation168.$$.fragment);
        
        			t1064 = text$2(" dans cette page.\nImaginez la taille du système qui en découle, et que cette méthode résout automatiquement !");
        
        			t1065 = space();
        
        			p121 = element("p");
        
        			strong65 = element("strong");
        
        			strong65.textContent = textContent_224;
        
        			t1067 = text$2(" : Les ");
        
        			create_component(equation169.$$.fragment);
        
        			t1068 = text$2(" dans la diagonale sont à la position de la case qui nous intéresse (l’itéré ");
        
        			create_component(equation170.$$.fragment);
        
        			t1069 = text$2(" en cours), et les ");
        
        			create_component(equation171.$$.fragment);
        
        			t1070 = text$2(" dispersés ça et là dans la ");
        
        			em137 = element("em");
        
        			em137.textContent = textContent_225;
        
        			t1072 = text$2(" sont ses cases environnantes.\nToutes les autres cases de la grille n’ayant aucun poids dans le calcul de la nouvelle valeur de la case en cours, on leur assigne donc un facteur ");
        
        			create_component(equation172.$$.fragment);
        
        			t1073 = text$2(".\nUne matrice contenant autant de ");
        
        			create_component(equation173.$$.fragment);
        
        			t1074 = text$2(" s’appelle une ");
        
        			em138 = element("em");
        
        			em138.textContent = textContent_226;
        
        			t1076 = text$2(", et c’est typiquement le genre de matrice avec laquelle la méthode de Gauss-Siedel fonctionne bien !");
        
        			t1077 = space();
        
        			p122 = element("p");
        
        			p122.innerHTML = textContent_227;
        
        			t1081 = space();
        
        			pre3 = element("pre");
        
        			html_tag_3 = new HtmlTagHydration(false);
        
        			t1082 = space();
        
        			p123 = element("p");
        
        			p123.textContent = textContent_228;
        
        			t1084 = space();
        
        			h29 = element("h2");
        
        			h29.textContent = textContent_229;
        
        			t1086 = space();
        
        			p124 = element("p");
        
        			t1087 = text$2("L’advection étant le transport d’une quantité le long d’un champ de vitesse, nous travaillons ici avec ");
        
        			strong66 = element("strong");
        
        			strong66.textContent = textContent_230;
        
        			t1089 = text$2(" champs. Le champ de vitesse en question à l’instant ");
        
        			create_component(equation174.$$.fragment);
        
        			t1090 = text$2(", et le champ (scalaire ou vectoriel) de la quantité que nous souhaitons transporter.\nCe dernier peut très bien être le champ de vitesse lui-même, ce qui se fera d’ailleurs : souvenez vous que l’");
        
        			em139 = element("em");
        
        			em139.textContent = textContent_231;
        
        			t1092 = text$2(" est sans doute la composante la plus importante de la mécanique des fluides : c’est à elle qu’on doit l’existence des tourbillons hypnotisants ! Nous transporterons également la quantité scalaire de la ");
        
        			em140 = element("em");
        
        			em140.textContent = textContent_232;
        
        			t1094 = text$2(" en chaque point du fluide.");
        
        			t1095 = space();
        
        			p125 = element("p");
        
        			p125.innerHTML = textContent_233;
        
        			t1099 = space();
        
        			p126 = element("p");
        
        			t1100 = text$2("Ici, pour calculer la quantité transportée par advection dans une case ");
        
        			create_component(equation175.$$.fragment);
        
        			t1101 = text$2(" à l’instant ");
        
        			create_component(equation176.$$.fragment);
        
        			t1102 = text$2(", on va commencer par regarder le vecteur vitesse en cette case à l’instant ");
        
        			create_component(equation177.$$.fragment);
        
        			t1103 = text$2(". Ensuite, puis on va tracer sa trajectoire ");
        
        			em142 = element("em");
        
        			em142.textContent = textContent_234;
        
        			t1105 = text$2(" au cours d’une petite période de temps ");
        
        			create_component(equation178.$$.fragment);
        
        			t1106 = text$2(" pour deviner « à peu près » en quelle case ce vecteur aurait dû se trouver à l’instant précédent ");
        
        			create_component(equation179.$$.fragment);
        
        			t1107 = text$2(". On nommera cette opération ");
        
        			em143 = element("em");
        
        			em143.textContent = textContent_235;
        
        			t1109 = text$2(". On prend ensuite la ");
        
        			strong67 = element("strong");
        
        			strong67.textContent = textContent_236;
        
        			t1111 = text$2(" des quantités présentes dans les cases immédiatement voisines, et on assigne cette valeur à la case de la grille suivante ");
        
        			create_component(equation180.$$.fragment);
        
        			t1112 = text$2(", en imaginant qu’il s’agira là « à peu près » la quantité qui s’y retrouvera ! Toutes les cases voisines ne contribuent pas de la même manière à cette moyenne : on considère le léger décalage par rapport à l’origine de la case où l’on atterrit pour calculer le poids relatif de chacune. (voir ci-contre) Et ça fonctionne plutôt bien.");
        
        			t1113 = space();
        
        			p127 = element("p");
        
        			strong68 = element("strong");
        
        			strong68.textContent = textContent_237;
        
        			t1115 = text$2(" du champ de vecteur pour voir l’opération de ");
        
        			em144 = element("em");
        
        			em144.textContent = textContent_238;
        
        			t1117 = text$2(" au cœur de cette étape. L’intervalle de temps ");
        
        			create_component(equation181.$$.fragment);
        
        			t1118 = text$2(" est représenté par la ligne ");
        
        			create_component(equation182.$$.fragment);
        
        			t1119 = space();
        
        			create_component(sketch12.$$.fragment);
        
        			t1120 = space();
        
        			create_component(actionelement5.$$.fragment);
        
        			t1121 = space();
        
        			p128 = element("p");
        
        			p128.textContent = textContent_239;
        
        			t1123 = space();
        
        			pre4 = element("pre");
        
        			html_tag_4 = new HtmlTagHydration(false);
        
        			t1124 = space();
        
        			h210 = element("h2");
        
        			h210.textContent = textContent_240;
        
        			t1126 = space();
        
        			p129 = element("p");
        
        			p129.textContent = textContent_241;
        
        			t1128 = space();
        
        			p130 = element("p");
        
        			p130.innerHTML = textContent_242;
        
        			t1136 = space();
        
        			create_component(equation183.$$.fragment);
        
        			t1137 = space();
        
        			p131 = element("p");
        
        			p131.innerHTML = textContent_243;
        
        			t1140 = space();
        
        			p132 = element("p");
        
        			t1141 = text$2("Il en va exactement de même pour les dérivées secondes, et donc pour le calcul du Laplacien ");
        
        			em147 = element("em");
        
        			em147.textContent = textContent_244;
        
        			t1143 = text$2(" dont voici la formule si nous considérons le pas « infinitésimal » comme valant ");
        
        			create_component(equation184.$$.fragment);
        
        			t1144 = text$2(" :");
        
        			t1145 = space();
        
        			create_component(equation185.$$.fragment);
        
        			t1146 = space();
        
        			br14 = element("br");
        
        			t1147 = space();
        
        			create_component(equation186.$$.fragment);
        
        			t1148 = space();
        
        			p133 = element("p");
        
        			p133.textContent = textContent_245;
        
        			t1150 = space();
        
        			pre5 = element("pre");
        
        			html_tag_5 = new HtmlTagHydration(false);
        
        			t1151 = space();
        
        			h18 = element("h1");
        
        			h18.textContent = textContent_246;
        
        			t1153 = space();
        
        			p134 = element("p");
        
        			p134.innerHTML = textContent_247;
        
        			t1158 = space();
        
        			create_component(sketch13.$$.fragment);
        
        			t1159 = space();
        
        			p135 = element("p");
        
        			em148 = element("em");
        
        			em148.textContent = textContent_248;
        
        			t1161 = space();
        
        			create_component(range22.$$.fragment);
        
        			t1162 = space();
        
        			p136 = element("p");
        
        			em149 = element("em");
        
        			em149.textContent = textContent_249;
        
        			t1164 = space();
        
        			create_component(dynamic14.$$.fragment);
        
        			t1165 = space();
        
        			p137 = element("p");
        
        			em150 = element("em");
        
        			em150.textContent = textContent_250;
        
        			t1167 = space();
        
        			create_component(dynamic15.$$.fragment);
        
        			t1168 = space();
        
        			p138 = element("p");
        
        			em151 = element("em");
        
        			em151.textContent = textContent_251;
        
        			t1170 = space();
        
        			create_component(dynamic16.$$.fragment);
        
        			t1171 = space();
        
        			span23 = element("span");
        
        			t1172 = text$2("(Il s'agit d'un moyen simpliste pour recréer un semblant de *tension de surface*. Pour ne pas prendre en compte ce paramètre additionnel, laissez la valeur à ");
        
        			create_component(equation187.$$.fragment);
        
        			t1173 = text$2(")");
        
        			t1174 = space();
        
        			br15 = element("br");
        
        			t1175 = space();
        
        			create_component(sketch14.$$.fragment);
        
        			t1176 = text$2(" La couleur du fluide : ");
        
        			span24 = element("span");
        
        			span24.textContent = textContent_252;
        
        			t1178 = text$2(" : ");
        
        			create_component(dynamic17.$$.fragment);
        
        			t1179 = text$2(", ");
        
        			span25 = element("span");
        
        			span25.textContent = textContent_253;
        
        			t1181 = text$2(" : ");
        
        			create_component(dynamic18.$$.fragment);
        
        			t1182 = text$2(", ");
        
        			span26 = element("span");
        
        			span26.textContent = textContent_254;
        
        			t1184 = text$2(": ");
        
        			create_component(dynamic19.$$.fragment);
        
        			t1185 = space();
        
        			br16 = element("br");
        
        			t1186 = space();
        
        			create_component(sketch15.$$.fragment);
        
        			t1187 = text$2(" La couleur de l'encre : ");
        
        			span27 = element("span");
        
        			span27.textContent = textContent_255;
        
        			t1189 = text$2(" : ");
        
        			create_component(dynamic20.$$.fragment);
        
        			t1190 = text$2(", ");
        
        			span28 = element("span");
        
        			span28.textContent = textContent_256;
        
        			t1192 = text$2(" : ");
        
        			create_component(dynamic21.$$.fragment);
        
        			t1193 = text$2(", ");
        
        			span29 = element("span");
        
        			span29.textContent = textContent_257;
        
        			t1195 = text$2(": ");
        
        			create_component(dynamic22.$$.fragment);
        
        			t1196 = space();
        
        			br17 = element("br");
        
        			this.h();
        
        		},
        
        		l(nodes) {
        
        			p0 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p0) !== "svelte-1u78bch") p0.innerHTML = textContent;
        
        			t5 = claim_space(nodes);
        
        			h10 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h10) !== "svelte-ecidd4") h10.textContent = textContent_1;
        
        			t7 = claim_space(nodes);
        
        			blockquote0 = claim_element(nodes, "BLOCKQUOTE", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(blockquote0) !== "svelte-1yiuji4") blockquote0.innerHTML = textContent_2;
        
        			t11 = claim_space(nodes);
        
        			p2 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p2) !== "svelte-890yru") p2.innerHTML = textContent_3;
        
        			t15 = claim_space(nodes);
        
        			p3 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p3) !== "svelte-1g7j27f") p3.innerHTML = textContent_4;
        
        			t19 = claim_space(nodes);
        
        			p4 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p4) !== "svelte-16842ye") p4.innerHTML = textContent_5;
        
        			t23 = claim_space(nodes);
        
        			p5 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p5) !== "svelte-1805wu4") p5.innerHTML = textContent_6;
        
        			t31 = claim_space(nodes);
        
        			p6 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p6) !== "svelte-p4o39j") p6.innerHTML = textContent_7;
        
        			t35 = claim_space(nodes);
        
        			p7 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p7) !== "svelte-e3e8jk") p7.innerHTML = textContent_8;
        
        			t49 = claim_space(nodes);
        
        			p8 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p8) !== "svelte-61eicc") p8.innerHTML = textContent_9;
        
        			t53 = claim_space(nodes);
        
        			p9 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p9) !== "svelte-mxk7l4") p9.innerHTML = textContent_10;
        
        			t59 = claim_space(nodes);
        
        			p10 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p10) !== "svelte-1h45pc3") p10.textContent = textContent_11;
        
        			t61 = claim_space(nodes);
        
        			ul0 = claim_element(nodes, "UL", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(ul0) !== "svelte-126pi15") ul0.innerHTML = textContent_12;
        
        			t65 = claim_space(nodes);
        
        			p11 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p11) !== "svelte-1lwu6nt") p11.innerHTML = textContent_13;
        
        			t71 = claim_space(nodes);
        
        			p12 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p12) !== "svelte-j32i4m") p12.innerHTML = textContent_14;
        
        			t81 = claim_space(nodes);
        
        			blockquote1 = claim_element(nodes, "BLOCKQUOTE", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(blockquote1) !== "svelte-10fuxa4") blockquote1.innerHTML = textContent_15;
        
        			t87 = claim_space(nodes);
        
        			p14 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p14) !== "svelte-1a8w5i") p14.textContent = textContent_16;
        
        			t89 = claim_space(nodes);
        
        			p15 = claim_element(nodes, "P", {});
        
        			var p15_nodes = children(p15);
        
        			t90 = claim_text(p15_nodes, "À l’instar de ");
        
        
        
        			a3_1 = claim_element(p15_nodes, "A", {
        
        				href: true,
        
        				rel: true,
        
        				["data-svelte-h"]: true
        
        			});
        
        
        
        			if (get_svelte_dataset(a3_1) !== "svelte-1c1s3cd") a3_1.textContent = textContent_17;
        
        			t92 = claim_text(p15_nodes, ", j’utiliserai pour mes exemples interactifs et les quelques démonstrations de code la bibliothèque javascript ");
        
        
        
        			a4 = claim_element(p15_nodes, "A", {
        
        				href: true,
        
        				rel: true,
        
        				["data-svelte-h"]: true
        
        			});
        
        
        
        			if (get_svelte_dataset(a4) !== "svelte-16txkjy") a4.textContent = textContent_18;
        
        			t94 = claim_text(p15_nodes, ". Je me baserai presque entièrement sur des papiers révolutionnaires de Joe Stam, influent chercheur en infographie néerlandais. Ceux-ci ont bouleversé le monde des effets spéciaux dans le cinéma et les jeux vidéos au début des années 2000, en rendant possible la simulation de fluides en ");
        
        			em23 = claim_element(p15_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em23) !== "svelte-1d8vqb3") em23.textContent = textContent_19;
        
        			t96 = claim_text(p15_nodes, ".\nL’apport fondamental de sa méthode est qu’elle repose ");
        
        			em24 = claim_element(p15_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em24) !== "svelte-1dfzksx") em24.textContent = textContent_20;
        
        			t98 = claim_text(p15_nodes, " sur les équations de Navier-Stokes. Il s’agit du meilleur modèle physique dont nous disposons pour étudier et simuler ces phénomènes fascinants. Utilisées en météorologie, aéronautique, aérospatial, … elles sont un classique des études supérieures de physique. Avant ses travaux, cet exploit était impensable compte tenu de la différence radicale entre la puissance de calcul nécessaire à cette tâche et la capacité des processeurs. Il fallait souvent des heures pour calculer l’évolution d’un fluide à l’instant ");
        
        			claim_component(equation0.$$.fragment, p15_nodes);
        
        			t99 = claim_text(p15_nodes, " compte tenu de son état à un instant ");
        
        			claim_component(equation1.$$.fragment, p15_nodes);
        
        			t100 = claim_text(p15_nodes, ", et de très petits intervalles de temps (");
        
        			claim_component(equation2.$$.fragment, p15_nodes);
        
        			t101 = claim_text(p15_nodes, ") entre ces deux états successifs pour que la simulation reste fidèle à l’observation (et donc utile). Le monde des effets spéciaux employait alors d’autres méthodes, plus complexes et moins liées au monde physique pour tenter simuler cascades, explosions, fumée, … et nuages.");
        
        			p15_nodes.forEach(detach);
        
        			t102 = claim_space(nodes);
        
        			p16 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p16) !== "svelte-1ivfsyc") p16.textContent = textContent_21;
        
        			t104 = claim_space(nodes);
        
        			p17 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p17) !== "svelte-158gc04") p17.innerHTML = textContent_22;
        
        			t119 = claim_space(nodes);
        
        			p18 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p18) !== "svelte-1ekmslo") p18.textContent = textContent_23;
        
        			t121 = claim_space(nodes);
        
        			h11 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h11) !== "svelte-159idik") h11.textContent = textContent_24;
        
        			t123 = claim_space(nodes);
        
        			h12 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h12) !== "svelte-e3rv68") h12.textContent = textContent_25;
        
        			t125 = claim_space(nodes);
        
        			h20 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h20) !== "svelte-1d796ef") h20.textContent = textContent_26;
        
        			t127 = claim_space(nodes);
        
        			claim_component(sketch0.$$.fragment, nodes);
        
        			t128 = claim_space(nodes);
        
        			p19 = claim_element(nodes, "P", {});
        
        			var p19_nodes = children(p19);
        
        			t129 = claim_text(p19_nodes, "Rappels importants concernant le ");
        
        			strong5 = claim_element(p19_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong5) !== "svelte-18o7tz0") strong5.textContent = textContent_27;
        
        			t131 = claim_text(p19_nodes, ".\n");
        
        			strong6 = claim_element(p19_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong6) !== "svelte-1t8ov4v") strong6.textContent = textContent_28;
        
        			t133 = claim_text(p19_nodes, " les valeurs de ");
        
        			em27 = claim_element(p19_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em27) !== "svelte-1jyg1kq") em27.textContent = textContent_29;
        
        			t135 = claim_text(p19_nodes, " (");
        
        			span0 = claim_element(p19_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span0) !== "svelte-qfri5b") span0.textContent = textContent_30;
        
        			t137 = claim_text(p19_nodes, ") ou de ");
        
        			em28 = claim_element(p19_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em28) !== "svelte-1b9n7m4") em28.textContent = textContent_31;
        
        			t139 = claim_text(p19_nodes, " (");
        
        			span1 = claim_element(p19_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span1) !== "svelte-euz15q") span1.textContent = textContent_32;
        
        			t141 = claim_text(p19_nodes, ") ci-dessous et observez l’angle ");
        
        			claim_component(equation3.$$.fragment, p19_nodes);
        
        			t142 = claim_text(p19_nodes, " correspondant en ");
        
        			em29 = claim_element(p19_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em29) !== "svelte-upd3w0") em29.textContent = textContent_33;
        
        			t144 = claim_text(p19_nodes, " (");
        
        			span2 = claim_element(p19_nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span2) !== "svelte-ranq3k") span2.textContent = textContent_34;
        
        			t146 = claim_text(p19_nodes, ").\nAu sein du cercle trigonométrique, ils doivent respecter la contrainte du théorème de Pythagore : ");
        
        			claim_component(equation4.$$.fragment, p19_nodes);
        
        			t147 = claim_text(p19_nodes, ". C’est pourquoi à chaque changement de l’un, l’autre est également affecté.");
        
        			p19_nodes.forEach(detach);
        
        			t148 = claim_space(nodes);
        
        			claim_component(equation5.$$.fragment, nodes);
        
        			t149 = claim_text(nodes, " : ");
        
        			claim_component(dynamic0.$$.fragment, nodes);
        
        			t150 = claim_space(nodes);
        
        			p20 = claim_element(nodes, "P", {});
        
        			var p20_nodes = children(p20);
        
        			t151 = claim_text(p20_nodes, "Valeur de ");
        
        			em30 = claim_element(p20_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em30) !== "svelte-1b9n7m4") em30.textContent = textContent_35;
        
        			t153 = claim_text(p20_nodes, " calculée : ");
        
        			strong7 = claim_element(p20_nodes, "STRONG", {});
        
        			var strong7_nodes = children(strong7);
        
        			t154 = claim_text(strong7_nodes, t154_value);
        
        			strong7_nodes.forEach(detach);
        
        			p20_nodes.forEach(detach);
        
        			t155 = claim_space(nodes);
        
        			claim_component(equation6.$$.fragment, nodes);
        
        			t156 = claim_text(nodes, " : ");
        
        			claim_component(dynamic1.$$.fragment, nodes);
        
        			t157 = claim_space(nodes);
        
        			p21 = claim_element(nodes, "P", {});
        
        			var p21_nodes = children(p21);
        
        			t158 = claim_text(p21_nodes, "Valeur de ");
        
        			em31 = claim_element(p21_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em31) !== "svelte-1jyg1kq") em31.textContent = textContent_36;
        
        			t160 = claim_text(p21_nodes, " calculée : ");
        
        			strong8 = claim_element(p21_nodes, "STRONG", {});
        
        			var strong8_nodes = children(strong8);
        
        			t161 = claim_text(strong8_nodes, t161_value);
        
        			strong8_nodes.forEach(detach);
        
        			p21_nodes.forEach(detach);
        
        			t162 = claim_space(nodes);
        
        			p22 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p22) !== "svelte-109wo6s") p22.innerHTML = textContent_37;
        
        			t168 = claim_space(nodes);
        
        			p23 = claim_element(nodes, "P", {});
        
        			var p23_nodes = children(p23);
        
        			t169 = claim_text(p23_nodes, "Un vecteur, comme un nombre, est un objet mathématique. Alors que le nombre représente une seule information, une ");
        
        			em34 = claim_element(p23_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em34) !== "svelte-1o08ghz") em34.textContent = textContent_38;
        
        			t171 = claim_text(p23_nodes, ", un vecteur en contient deux : une ");
        
        			em35 = claim_element(p23_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em35) !== "svelte-1o08ghz") em35.textContent = textContent_39;
        
        			t173 = claim_text(p23_nodes, " et une ");
        
        			em36 = claim_element(p23_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em36) !== "svelte-7wsw4d") em36.textContent = textContent_40;
        
        			t175 = claim_text(p23_nodes, ". Dans leur contexte, cette quantité est appelée ");
        
        			em37 = claim_element(p23_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em37) !== "svelte-19i4uos") em37.textContent = textContent_41;
        
        			t177 = claim_text(p23_nodes, ", car, comme nous le verrons, elle sera la plupart du temps utilisée pour véhiculer une idée d’");
        
        			em38 = claim_element(p23_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em38) !== "svelte-1biiyhl") em38.textContent = textContent_42;
        
        			t179 = claim_text(p23_nodes, ".\nLa direction sera, dans le plan à 2 dimensions, (noté ");
        
        			claim_component(equation7.$$.fragment, p23_nodes);
        
        			t180 = claim_text(p23_nodes, ") un angle entre ");
        
        			claim_component(equation8.$$.fragment, p23_nodes);
        
        			t181 = claim_text(p23_nodes, " et ");
        
        			claim_component(equation9.$$.fragment, p23_nodes);
        
        			t182 = claim_text(p23_nodes, " (ou ");
        
        			claim_component(equation10.$$.fragment, p23_nodes);
        
        			t183 = claim_text(p23_nodes, " et ");
        
        			claim_component(equation11.$$.fragment, p23_nodes);
        
        			t184 = claim_text(p23_nodes, ") : à partir d’un point quelconque dessiné sur une feuille de papier parfaitement plane, il n’y a pas d’autres directions possibles que celles indiquées par le compas, c’est-à-dire le cercle centré en ce point.\nCompte tenu de cette définition, la façon la plus naturelle pour nous de dessiner un vecteur est donc d’utiliser une flèche ! Elle sera plus ou moins longue selon sa magnitude, et pointera dans la direction souhaitée.");
        
        			p23_nodes.forEach(detach);
        
        			t185 = claim_space(nodes);
        
        			p24 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p24) !== "svelte-1nvaj29") p24.textContent = textContent_43;
        
        			t187 = claim_space(nodes);
        
        			p25 = claim_element(nodes, "P", {});
        
        			var p25_nodes = children(p25);
        
        			em39 = claim_element(p25_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em39) !== "svelte-7gazct") em39.textContent = textContent_44;
        
        			t189 = claim_text(p25_nodes, " (");
        
        			claim_component(equation12.$$.fragment, p25_nodes);
        
        			t190 = claim_text(p25_nodes, ") : ");
        
        			claim_component(equation13.$$.fragment, p25_nodes);
        
        			t191 = claim_space(p25_nodes);
        
        			claim_component(range0.$$.fragment, p25_nodes);
        
        			t192 = claim_space(p25_nodes);
        
        			claim_component(equation14.$$.fragment, p25_nodes);
        
        			t193 = claim_text(p25_nodes, " (");
        
        			t194 = claim_text(p25_nodes, /*$direction*/ ctx[8]);
        
        			t195 = claim_text(p25_nodes, ")");
        
        			p25_nodes.forEach(detach);
        
        			t196 = claim_space(nodes);
        
        			p26 = claim_element(nodes, "P", {});
        
        			var p26_nodes = children(p26);
        
        			em40 = claim_element(p26_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em40) !== "svelte-1a0whvg") em40.textContent = textContent_45;
        
        			t198 = claim_text(p26_nodes, " (");
        
        			claim_component(equation15.$$.fragment, p26_nodes);
        
        			t199 = claim_text(p26_nodes, ") : ");
        
        			claim_component(range1.$$.fragment, p26_nodes);
        
        			t200 = claim_text(p26_nodes, " (");
        
        			t201 = claim_text(p26_nodes, /*$magnitude*/ ctx[7]);
        
        			t202 = claim_text(p26_nodes, ")");
        
        			p26_nodes.forEach(detach);
        
        			t203 = claim_space(nodes);
        
        			claim_component(checkbox0.$$.fragment, nodes);
        
        			t204 = claim_text(nodes, " Afficher trigonométrie\n");
        
        			claim_component(checkbox1.$$.fragment, nodes);
        
        			t205 = claim_text(nodes, " Colorer les équations\n");
        
        			claim_component(sketch1.$$.fragment, nodes);
        
        			t206 = claim_space(nodes);
        
        			p27 = claim_element(nodes, "P", {});
        
        			var p27_nodes = children(p27);
        
        			t207 = claim_text(p27_nodes, "Remarquez qu’un vecteur ");
        
        			em41 = claim_element(p27_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em41) !== "svelte-1acyfw8") em41.textContent = textContent_46;
        
        			t209 = claim_text(p27_nodes, " de sa position dans l’espace, il est complètement défini par rapport à l’origine ");
        
        			claim_component(equation16.$$.fragment, p27_nodes);
        
        			t210 = claim_text(p27_nodes, " du repère, qui correspond à la position de sa « queue ». Algébriquement, nous pouvons donc simplement écrire ce dernier à la manière d’un point dans l’espace : celui qui est touché par l’extrémité de la flèche !\nVoyez ci-dessous les coordonnées du vecteur que vous avez défini plus haut :");
        
        			p27_nodes.forEach(detach);
        
        			t211 = claim_space(nodes);
        
        			if_block0.l(nodes);
        
        			t212 = claim_space(nodes);
        
        			p28 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p28) !== "svelte-ak3se0") p28.innerHTML = textContent_47;
        
        			t218 = claim_space(nodes);
        
        			claim_component(equation17.$$.fragment, nodes);
        
        			t219 = claim_text(nodes, " : ");
        
        			claim_component(range2.$$.fragment, nodes);
        
        			t220 = claim_text(nodes, " (");
        
        			t221 = claim_text(nodes, /*$posx*/ ctx[5]);
        
        			t222 = claim_text(nodes, ")\n");
        
        			claim_component(equation18.$$.fragment, nodes);
        
        			t223 = claim_text(nodes, " : ");
        
        			claim_component(range3.$$.fragment, nodes);
        
        			t224 = claim_text(nodes, " (");
        
        			t225 = claim_text(nodes, /*$posy*/ ctx[3]);
        
        			t226 = claim_text(nodes, ")\n");
        
        			claim_component(sketch2.$$.fragment, nodes);
        
        			t227 = claim_space(nodes);
        
        			h40 = claim_element(nodes, "H4", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h40) !== "svelte-1o0f6i") h40.textContent = textContent_48;
        
        			t229 = claim_space(nodes);
        
        			if_block1.l(nodes);
        
        			t230 = claim_space(nodes);
        
        			h41 = claim_element(nodes, "H4", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h41) !== "svelte-isngxb") h41.textContent = textContent_49;
        
        			t232 = claim_space(nodes);
        
        			if_block2.l(nodes);
        
        			t233 = claim_space(nodes);
        
        			p29 = claim_element(nodes, "P", {});
        
        			var p29_nodes = children(p29);
        
        			t234 = claim_text(p29_nodes, "Les fonctions ");
        
        			claim_component(equation19.$$.fragment, p29_nodes);
        
        			t235 = claim_text(p29_nodes, " et ");
        
        			claim_component(equation20.$$.fragment, p29_nodes);
        
        			t236 = claim_text(p29_nodes, " (également notées ");
        
        			claim_component(equation21.$$.fragment, p29_nodes);
        
        			t237 = claim_text(p29_nodes, " et ");
        
        			claim_component(equation22.$$.fragment, p29_nodes);
        
        			t238 = claim_text(p29_nodes, ") sont les fonctions ");
        
        			em44 = claim_element(p29_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em44) !== "svelte-xvjm4n") em44.textContent = textContent_50;
        
        			t240 = claim_text(p29_nodes, " de ");
        
        			claim_component(equation23.$$.fragment, p29_nodes);
        
        			t241 = claim_text(p29_nodes, " et ");
        
        			claim_component(equation24.$$.fragment, p29_nodes);
        
        			t242 = claim_text(p29_nodes, ". Elles permettent donc de retrouver un angle lorsque nous ne connaissons que la valeur de sinus et de cosinus qui lui sont associées. C’est exactement ce que la racine carrée est au carré, par exemple : cette dernière permet de retrouver le nombre inconnu qui, élevé au carré, produit un nombre que nous connaissons déjà. Et de la même manière que deux nombres différents possèdent le même carré (un nombre et son opposé, c’est à dire ");
        
        			claim_component(equation25.$$.fragment, p29_nodes);
        
        			t243 = claim_text(p29_nodes, " et ");
        
        			claim_component(equation26.$$.fragment, p29_nodes);
        
        			t244 = claim_text(p29_nodes, "), il est clair, en observant le cercle trigonométrique, que deux angles différents sont toujours associés à une même unique valeur de sinus ou de cosinus. (dans le cas du cosinus, il s’agit d’un angle (");
        
        			claim_component(equation27.$$.fragment, p29_nodes);
        
        			t245 = claim_text(p29_nodes, " et de son opposé ");
        
        			claim_component(equation28.$$.fragment, p29_nodes);
        
        			t246 = claim_text(p29_nodes, ") Nous avons donc besoin d’utiliser ");
        
        			em45 = claim_element(p29_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em45) !== "svelte-h2g1hl") em45.textContent = textContent_51;
        
        			t248 = claim_text(p29_nodes, " ces deux informations pour restreindre les possibilités à un angle unique. C’est ce que la formule ci-dessus réalise : ");
        
        			claim_component(equation29.$$.fragment, p29_nodes);
        
        			t249 = claim_text(p29_nodes, " est la valeur du cosinus de l’angle que nous recherchons. C’est ensuite le ");
        
        			em46 = claim_element(p29_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em46) !== "svelte-1ob53sq") em46.textContent = textContent_52;
        
        			t251 = claim_text(p29_nodes, " du sinus (");
        
        			claim_component(equation30.$$.fragment, p29_nodes);
        
        			t252 = claim_text(p29_nodes, ") qui nous permettra de trancher le bon signe de notre angle.");
        
        			p29_nodes.forEach(detach);
        
        			t253 = claim_space(nodes);
        
        			h21 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h21) !== "svelte-bqs1r0") h21.textContent = textContent_53;
        
        			t255 = claim_space(nodes);
        
        			p30 = claim_element(nodes, "P", {});
        
        			var p30_nodes = children(p30);
        
        			t256 = claim_text(p30_nodes, "Une fois encore, nous nous contenterons strictement ici de ce dont nous aurons besoin : l’");
        
        			strong9 = claim_element(p30_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong9) !== "svelte-r4c2k") strong9.textContent = textContent_54;
        
        			t258 = claim_text(p30_nodes, " de vecteurs et leur ");
        
        			strong10 = claim_element(p30_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong10) !== "svelte-1l1ijlc") strong10.textContent = textContent_55;
        
        			t260 = claim_text(p30_nodes, ". Le produit de deux vecteurs entre eux, contrairement à la « multiplication » classique de deux nombres, peut exister sous plusieurs formes : les plus usuelles étant le ");
        
        			em47 = claim_element(p30_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em47) !== "svelte-1uzrixx") em47.textContent = textContent_56;
        
        			t262 = claim_text(p30_nodes, " et le ");
        
        			em48 = claim_element(p30_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em48) !== "svelte-ilol6s") em48.textContent = textContent_57;
        
        			t264 = claim_text(p30_nodes, ". Seule la connaissance du produit ");
        
        			em49 = claim_element(p30_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em49) !== "svelte-fr88ca") em49.textContent = textContent_58;
        
        			t266 = claim_text(p30_nodes, " (noté ");
        
        			claim_component(equation31.$$.fragment, p30_nodes);
        
        			t267 = claim_text(p30_nodes, ") est essentielle pour programmer l’algorithme, qui aura besoin d’en calculer un à une étape particulière. Quant au produit ");
        
        			em50 = claim_element(p30_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em50) !== "svelte-1m8dap7") em50.textContent = textContent_59;
        
        			t269 = claim_text(p30_nodes, " (noté avec le symbole ");
        
        			claim_component(equation32.$$.fragment, p30_nodes);
        
        			t270 = claim_text(p30_nodes, "), sa connaissance est utile pour mieux comprendre les différentes idées impliquées dans son fonctionnement, mais non indispensable. Je vous en épargnerai donc les détails, et vous verrez plus loin quelle notion lui est associée.");
        
        			p30_nodes.forEach(detach);
        
        			t271 = claim_space(nodes);
        
        			h30 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h30) !== "svelte-41tfy8") h30.textContent = textContent_60;
        
        			t273 = claim_space(nodes);
        
        			p31 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p31) !== "svelte-b5q9l5") p31.innerHTML = textContent_61;
        
        			t281 = claim_space(nodes);
        
        			claim_component(equation33.$$.fragment, nodes);
        
        			t282 = claim_text(nodes, " : ");
        
        			claim_component(range4.$$.fragment, nodes);
        
        			t283 = claim_text(nodes, " (");
        
        			t284 = claim_text(nodes, /*$posx*/ ctx[5]);
        
        			t285 = claim_text(nodes, ")\n");
        
        			claim_component(equation34.$$.fragment, nodes);
        
        			t286 = claim_text(nodes, " : ");
        
        			claim_component(range5.$$.fragment, nodes);
        
        			t287 = claim_text(nodes, " (");
        
        			t288 = claim_text(nodes, /*$posy*/ ctx[3]);
        
        			t289 = claim_text(nodes, ") ");
        
        			br0 = claim_element(nodes, "BR", {});
        
        			t290 = claim_space(nodes);
        
        			claim_component(equation35.$$.fragment, nodes);
        
        			t291 = claim_text(nodes, " : ");
        
        			claim_component(range6.$$.fragment, nodes);
        
        			t292 = claim_text(nodes, " (");
        
        			t293 = claim_text(nodes, /*$posx_two*/ ctx[4]);
        
        			t294 = claim_text(nodes, ")\n");
        
        			claim_component(equation36.$$.fragment, nodes);
        
        			t295 = claim_text(nodes, " : ");
        
        			claim_component(range7.$$.fragment, nodes);
        
        			t296 = claim_text(nodes, " (");
        
        			t297 = claim_text(nodes, /*$posy_two*/ ctx[2]);
        
        			t298 = claim_text(nodes, ") ");
        
        			br1 = claim_element(nodes, "BR", {});
        
        			t299 = claim_space(nodes);
        
        			br2 = claim_element(nodes, "BR", {});
        
        			t300 = claim_space(nodes);
        
        			claim_component(checkbox2.$$.fragment, nodes);
        
        			t301 = claim_text(nodes, " Bout à bout ?\n");
        
        			claim_component(checkbox3.$$.fragment, nodes);
        
        			t302 = claim_text(nodes, " Colorer les équations\n");
        
        			claim_component(sketch3.$$.fragment, nodes);
        
        			t303 = claim_space(nodes);
        
        			p32 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p32) !== "svelte-s19g38") p32.textContent = textContent_62;
        
        			t305 = claim_space(nodes);
        
        			if_block3.l(nodes);
        
        			t306 = claim_space(nodes);
        
        			p33 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p33) !== "svelte-1vuxr3m") p33.innerHTML = textContent_63;
        
        			t318 = claim_space(nodes);
        
        			h31 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h31) !== "svelte-1nodtcc") h31.textContent = textContent_64;
        
        			t320 = claim_space(nodes);
        
        			p34 = claim_element(nodes, "P", {});
        
        			var p34_nodes = children(p34);
        
        			t321 = claim_text(p34_nodes, "Le terme ");
        
        			em51 = claim_element(p34_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em51) !== "svelte-fr88ca") em51.textContent = textContent_65;
        
        			t323 = claim_text(p34_nodes, " a une signification très simple. Dans le contexte des vecteurs, c’est une autre manière d’appeler un nombre. Mais pourquoi diable employer un terme différent de celui dont nous avons l’habitude ?\nUn petit passage par la langue anglaise et le latin sera ici éclairant. Remarquez que « scalaire » a la même racine que l’anglais ");
        
        			em52 = claim_element(p34_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em52) !== "svelte-n793p4") em52.textContent = textContent_66;
        
        			t325 = claim_text(p34_nodes, ", dérivé du latin ");
        
        			em53 = claim_element(p34_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em53) !== "svelte-1i92rxo") em53.textContent = textContent_67;
        
        			t327 = claim_text(p34_nodes, ", qui signifie échelle. Le verbe ");
        
        			em54 = claim_element(p34_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em54) !== "svelte-1sj38yd") em54.textContent = textContent_68;
        
        			t329 = claim_text(p34_nodes, " signifiera alors ");
        
        			em55 = claim_element(p34_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em55) !== "svelte-1y7pgoi") em55.textContent = textContent_69;
        
        			t331 = claim_text(p34_nodes, ".\nC’est exactement ce qui se passe lorsque l’on multiplie un vecteur par un nombre, comme le sketch ci-dessous l’illustre : il est ");
        
        			em56 = claim_element(p34_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em56) !== "svelte-474bd2") em56.textContent = textContent_70;
        
        			t333 = claim_text(p34_nodes, " du scalaire qui le multiplie. Par exemple, si ce dernier vaut ");
        
        			claim_component(equation37.$$.fragment, p34_nodes);
        
        			t334 = claim_text(p34_nodes, " alors la magnitude du vecteur résultant vaudra le double de la magnitude du vecteur initial.\nEssayez donc de multiplier le vecteur que vous avez défini plus haut par le scalaire de votre choix, de l’intervalle ci-dessous :");
        
        			p34_nodes.forEach(detach);
        
        			t335 = claim_space(nodes);
        
        			p35 = claim_element(nodes, "P", {});
        
        			var p35_nodes = children(p35);
        
        			em57 = claim_element(p35_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em57) !== "svelte-g9zvfe") em57.textContent = textContent_71;
        
        			t337 = claim_text(p35_nodes, " : ");
        
        			claim_component(range8.$$.fragment, p35_nodes);
        
        			t338 = claim_text(p35_nodes, " (");
        
        			t339 = claim_text(p35_nodes, /*$scalar*/ ctx[6]);
        
        			t340 = claim_text(p35_nodes, ")");
        
        			p35_nodes.forEach(detach);
        
        			t341 = claim_space(nodes);
        
        			claim_component(sketch4.$$.fragment, nodes);
        
        			t342 = claim_space(nodes);
        
        			br3 = claim_element(nodes, "BR", {});
        
        			t343 = claim_space(nodes);
        
        			if_block4.l(nodes);
        
        			t344 = claim_space(nodes);
        
        			p36 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p36) !== "svelte-1f0fjnc") p36.innerHTML = textContent_72;
        
        			t354 = claim_space(nodes);
        
        			h32 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h32) !== "svelte-19c0i4z") h32.textContent = textContent_73;
        
        			t356 = claim_space(nodes);
        
        			p37 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p37) !== "svelte-snyasi") p37.innerHTML = textContent_74;
        
        			t362 = claim_space(nodes);
        
        			h42 = claim_element(nodes, "H4", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h42) !== "svelte-1b3w9vx") h42.textContent = textContent_75;
        
        			t364 = claim_space(nodes);
        
        			claim_component(equation38.$$.fragment, nodes);
        
        			t365 = claim_text(nodes, ": ");
        
        			claim_component(equation39.$$.fragment, nodes);
        
        			t366 = claim_text(nodes, " : ");
        
        			claim_component(range9.$$.fragment, nodes);
        
        			t367 = claim_text(nodes, " (");
        
        			t368 = claim_text(nodes, /*$posx*/ ctx[5]);
        
        			t369 = claim_text(nodes, ")\n");
        
        			claim_component(equation40.$$.fragment, nodes);
        
        			t370 = claim_text(nodes, " : ");
        
        			claim_component(range10.$$.fragment, nodes);
        
        			t371 = claim_text(nodes, " (");
        
        			t372 = claim_text(nodes, /*$posy*/ ctx[3]);
        
        			t373 = claim_text(nodes, ") \n");
        
        			br4 = claim_element(nodes, "BR", {});
        
        			t374 = claim_space(nodes);
        
        			claim_component(equation41.$$.fragment, nodes);
        
        			t375 = claim_text(nodes, " : ");
        
        			claim_component(equation42.$$.fragment, nodes);
        
        			t376 = claim_text(nodes, " : ");
        
        			claim_component(range11.$$.fragment, nodes);
        
        			t377 = claim_text(nodes, " (");
        
        			t378 = claim_text(nodes, /*$posx_two*/ ctx[4]);
        
        			t379 = claim_text(nodes, ")\n");
        
        			claim_component(equation43.$$.fragment, nodes);
        
        			t380 = claim_text(nodes, " : ");
        
        			claim_component(range12.$$.fragment, nodes);
        
        			t381 = claim_text(nodes, " (");
        
        			t382 = claim_text(nodes, /*$posy_two*/ ctx[2]);
        
        			t383 = claim_text(nodes, ")\n");
        
        			claim_component(sketch5.$$.fragment, nodes);
        
        			t384 = claim_space(nodes);
        
        			p38 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p38) !== "svelte-8uh64") p38.innerHTML = textContent_76;
        
        			t400 = claim_space(nodes);
        
        			p39 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p39) !== "svelte-1qm1y5s") p39.innerHTML = textContent_77;
        
        			t410 = claim_space(nodes);
        
        			p40 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p40) !== "svelte-10bybm4") p40.innerHTML = textContent_78;
        
        			t418 = claim_space(nodes);
        
        			p41 = claim_element(nodes, "P", {});
        
        			var p41_nodes = children(p41);
        
        			t419 = claim_text(p41_nodes, "Nous pouvons donc écrire sa formule de la manière suivante, avec ");
        
        			claim_component(equation44.$$.fragment, p41_nodes);
        
        			t420 = claim_text(p41_nodes, " l’angle formé entre les deux vecteurs :");
        
        			p41_nodes.forEach(detach);
        
        			t421 = claim_space(nodes);
        
        			if_block5.l(nodes);
        
        			t422 = claim_space(nodes);
        
        			h43 = claim_element(nodes, "H4", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h43) !== "svelte-fnscdl") h43.textContent = textContent_79;
        
        			t424 = claim_space(nodes);
        
        			if_block6.l(nodes);
        
        			t425 = claim_space(nodes);
        
        			h13 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h13) !== "svelte-19wow32") h13.textContent = textContent_80;
        
        			t427 = claim_space(nodes);
        
        			h22 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h22) !== "svelte-vfr6ig") h22.textContent = textContent_81;
        
        			t429 = claim_space(nodes);
        
        			p42 = claim_element(nodes, "P", {});
        
        			var p42_nodes = children(p42);
        
        			t430 = claim_text(p42_nodes, "Imaginez-vous gambader sur une dune très vallonnée proche de l’océan. A différents endroits de votre balade, vous vous trouverez à une hauteur différente par rapport au niveau de la mer.\nOn peut dire que votre hauteur change ");
        
        			em62 = claim_element(p42_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em62) !== "svelte-kctern") em62.textContent = textContent_82;
        
        			t432 = claim_text(p42_nodes, " de votre position. En langage mathématique, on peut écrire ");
        
        			claim_component(equation45.$$.fragment, p42_nodes);
        
        			t433 = claim_text(p42_nodes, "\nMais ce qui vous plait secrètement le plus, loin de la paisible flânerie, c’est de dévaler les pentes, de courir et vous laisser glisser jusqu’à vous écrouler dans le sable chaud ! Il serait bien pratique si vous aviez en main une carte vous permettant de localiser facilement les endroits de la dune où les pentes sont les plus adaptée à cette joyeuse occupation, tout en vous permettant, éventuellement, de contourner les endroits où ça grimpe dur !");
        
        			p42_nodes.forEach(detach);
        
        			t434 = claim_space(nodes);
        
        			p43 = claim_element(nodes, "P", {});
        
        			var p43_nodes = children(p43);
        
        			t435 = claim_text(p43_nodes, "Et bien c’est exactement ce que nous permet la ");
        
        			em63 = claim_element(p43_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em63) !== "svelte-z0qeif") em63.textContent = textContent_83;
        
        			t437 = claim_text(p43_nodes, " : avec pour seule information la hauteur de la dune en chaque point, nous pouvons connaître la ");
        
        			em64 = claim_element(p43_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em64) !== "svelte-1kucyni") em64.textContent = textContent_84;
        
        			t439 = claim_text(p43_nodes, " en chaque point. Comment me diriez vous ? Et bien tout simplement en ");
        
        			em65 = claim_element(p43_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em65) !== "svelte-h062ut") em65.textContent = textContent_85;
        
        			t441 = claim_text(p43_nodes, " deux points séparés d’un intervalle entre eux, en prenant leur ");
        
        			em66 = claim_element(p43_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em66) !== "svelte-1x3qslh") em66.textContent = textContent_86;
        
        			t443 = claim_text(p43_nodes, ".\nJusque là, rien de bien complexe : vous faites exactement la même chose pour calculer votre vitesse. Vous enregistrez votre position à un certain instant, puis après un intervalle de durée fixe, disons une seconde, vous notez où vous vous retrouvez. Si en prenant la ");
        
        			em67 = claim_element(p43_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em67) !== "svelte-1x3qslh") em67.textContent = textContent_87;
        
        			t445 = claim_text(p43_nodes, " entre ces deux positions, vous vous rendez compte que vous avez parcouru 10 mètres, votre vitesse sera de 10 mètres par seconde, soit 36 km/h. On dit que la vitesse est la ");
        
        			em68 = claim_element(p43_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em68) !== "svelte-6zv0fp") em68.textContent = textContent_88;
        
        			t447 = claim_text(p43_nodes, ".\nMais comment faire si vous vouliez connaître votre vitesse à ");
        
        			em69 = claim_element(p43_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em69) !== "svelte-1mu1y8g") em69.textContent = textContent_89;
        
        			t449 = claim_text(p43_nodes, " ? Là intervient l’idée fondamentale de la dérivation : non pas prendre deux points séparés d’");
        
        			claim_component(equation46.$$.fragment, p43_nodes);
        
        			t450 = claim_text(p43_nodes, " seconde, ni même ");
        
        			claim_component(equation47.$$.fragment, p43_nodes);
        
        			t451 = claim_text(p43_nodes, " secondes, ni même ");
        
        			claim_component(equation48.$$.fragment, p43_nodes);
        
        			t452 = claim_text(p43_nodes, " secondes, mais de considérer un intervalle qui ");
        
        			em70 = claim_element(p43_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em70) !== "svelte-1suqn1p") em70.textContent = textContent_90;
        
        			t454 = claim_space(p43_nodes);
        
        			claim_component(equation49.$$.fragment, p43_nodes);
        
        			t455 = claim_text(p43_nodes, " secondes. C’est vertigineux, voire complètement paradoxal ! Vous ne trouvez pas ? Si l’intervalle était de ");
        
        			claim_component(equation50.$$.fragment, p43_nodes);
        
        			t456 = claim_text(p43_nodes, " secondes, alors il n’y aurait pas d’intervalle du tout ! ");
        
        			strong23 = claim_element(p43_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong23) !== "svelte-18g611r") strong23.textContent = textContent_91;
        
        			t458 = claim_text(p43_nodes, " C’est pourquoi il faut absolument souligner l’expression ");
        
        			em71 = claim_element(p43_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em71) !== "svelte-1suqn1p") em71.textContent = textContent_92;
        
        			t460 = claim_space(p43_nodes);
        
        			claim_component(equation51.$$.fragment, p43_nodes);
        
        			t461 = claim_text(p43_nodes, ". On traite l’intervalle comme s’il était complètement négligeable, mais en même temps, il n’est pas nul ! On parle d’intervalle ");
        
        			em72 = claim_element(p43_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em72) !== "svelte-hyfkzw") em72.textContent = textContent_93;
        
        			t463 = claim_text(p43_nodes, ", ou ");
        
        			em73 = claim_element(p43_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em73) !== "svelte-1g3cvb5") em73.textContent = textContent_94;
        
        			t465 = claim_text(p43_nodes, ". C’est une manière de penser tout simplement révolutionnaire aux implications prodigieuses. Il n’est pas étonnant qu’elle n’apparaisse que tardivement dans l’histoire des mathématiques, au XVII");
        
        			sup2 = claim_element(p43_nodes, "SUP", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(sup2) !== "svelte-1020qr7") sup2.textContent = textContent_95;
        
        			t467 = claim_text(p43_nodes, " siècle, sous l’impulsion des génies de Newton et de Leibniz, et sur le terreau des idées philosophiques de leur temps. S’il vous intéresse de creuser cette idée, je vous conseille par exemple ce livre très accessible de Steven Strogatz :");
        
        			p43_nodes.forEach(detach);
        
        			t468 = claim_space(nodes);
        
        			p44 = claim_element(nodes, "P", {});
        
        			var p44_nodes = children(p44);
        
        			t469 = claim_text(p44_nodes, "Dans le sketch ci-dessous, vous voyez une fonction : imaginez qu’il s’agit d’une ");
        
        			strong24 = claim_element(p44_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong24) !== "svelte-1qydqm") strong24.textContent = textContent_96;
        
        			t471 = claim_text(p44_nodes, " (certes, très pentue) ! Pour compléter notre paysage et rappeler sa proximité avec l’océan, je vous ai rajouté quelques vagues mathématiques (dessinées par la fonction ");
        
        			claim_component(equation52.$$.fragment, p44_nodes);
        
        			t472 = claim_text(p44_nodes, ") de différentes intensités !\nL’intervalle dont je parlais, dans ce cas, se nomme ");
        
        			claim_component(equation53.$$.fragment, p44_nodes);
        
        			t473 = claim_text(p44_nodes, " puisqu’il compare différentes position (");
        
        			claim_component(equation54.$$.fragment, p44_nodes);
        
        			t474 = claim_text(p44_nodes, " comme ");
        
        			em74 = claim_element(p44_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em74) !== "svelte-1x3qslh") em74.textContent = textContent_97;
        
        			t476 = claim_text(p44_nodes, ") sur l’axe des ");
        
        			claim_component(equation55.$$.fragment, p44_nodes);
        
        			t477 = claim_text(p44_nodes, ". Vous pouvez le faire varier à souhait et observer le résultat. Que remarquez-vous lorsque ");
        
        			claim_component(equation56.$$.fragment, p44_nodes);
        
        			t478 = claim_text(p44_nodes, " s’approche de ");
        
        			claim_component(equation57.$$.fragment, p44_nodes);
        
        			t479 = claim_text(p44_nodes, " ?");
        
        			p44_nodes.forEach(detach);
        
        			t480 = claim_space(nodes);
        
        			claim_component(equation58.$$.fragment, nodes);
        
        			t481 = claim_text(nodes, " : ");
        
        			claim_component(range13.$$.fragment, nodes);
        
        			t482 = claim_text(nodes, " (");
        
        			t483 = claim_text(nodes, /*$derivative_h*/ ctx[49]);
        
        			t484 = claim_text(nodes, ")\n");
        
        			claim_component(select0.$$.fragment, nodes);
        
        			t485 = claim_space(nodes);
        
        			claim_component(sketch6.$$.fragment, nodes);
        
        			t486 = claim_space(nodes);
        
        			p45 = claim_element(nodes, "P", {});
        
        			var p45_nodes = children(p45);
        
        			t487 = claim_text(p45_nodes, "La droite qui se forme devient alors la ");
        
        			strong25 = claim_element(p45_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong25) !== "svelte-8mm4yg") strong25.textContent = textContent_98;
        
        			t489 = claim_text(p45_nodes, " à la courbe ! Elle représente donc la « pente en ce point ». Son intensité, indiquée ici par sa couleur, est donc la valeur du coefficient directeur de cette droite, et on l’appelle le ");
        
        			em75 = claim_element(p45_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em75) !== "svelte-akrnse") em75.textContent = textContent_99;
        
        			t491 = claim_text(p45_nodes, ".\nCe dernier vaut, pour un point ");
        
        			claim_component(equation59.$$.fragment, p45_nodes);
        
        			t492 = claim_text(p45_nodes, " arbitraire :");
        
        			p45_nodes.forEach(detach);
        
        			t493 = claim_space(nodes);
        
        			p46 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p46) !== "svelte-1r54db4") p46.innerHTML = textContent_100;
        
        			t497 = claim_space(nodes);
        
        			p47 = claim_element(nodes, "P", {});
        
        			var p47_nodes = children(p47);
        
        			t498 = claim_text(p47_nodes, "On appelera ");
        
        			em77 = claim_element(p47_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em77) !== "svelte-2afobu") em77.textContent = textContent_101;
        
        			t500 = claim_text(p47_nodes, ", notée ");
        
        			claim_component(equation60.$$.fragment, p47_nodes);
        
        			t501 = claim_text(p47_nodes, ", la fonction qui donnera, en chaque point d’une fonction ");
        
        			claim_component(equation61.$$.fragment, p47_nodes);
        
        			t502 = claim_text(p47_nodes, " (");
        
        			em78 = claim_element(p47_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em78) !== "svelte-7sowdp") em78.textContent = textContent_102;
        
        			t504 = claim_text(p47_nodes, " la hauteur), son nombre dérivé. (");
        
        			em79 = claim_element(p47_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em79) !== "svelte-7sowdp") em79.textContent = textContent_103;
        
        			t506 = claim_text(p47_nodes, " la pente)");
        
        			p47_nodes.forEach(detach);
        
        			t507 = claim_space(nodes);
        
        			h23 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h23) !== "svelte-1txbgpa") h23.innerHTML = textContent_104;
        
        			t510 = claim_space(nodes);
        
        			p48 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p48) !== "svelte-x86vrz") p48.textContent = textContent_105;
        
        			t512 = claim_space(nodes);
        
        			p49 = claim_element(nodes, "P", {});
        
        			var p49_nodes = children(p49);
        
        			t513 = claim_text(p49_nodes, "On appelle le ");
        
        			em81 = claim_element(p49_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em81) !== "svelte-1btqp4i") em81.textContent = textContent_106;
        
        			t515 = claim_text(p49_nodes, " le vecteur qui contient, en chaque point, ");
        
        			strong26 = claim_element(p49_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong26) !== "svelte-7ka8xb") strong26.textContent = textContent_107;
        
        			t517 = claim_text(p49_nodes, " Chacun des nombres qui le composent, ses « coordonnées » considèrent donc des intervalles de nature différente :\nImaginons une fonction qui associe une certaine hauteur en fonction d’une position et du temps, ");
        
        			claim_component(equation62.$$.fragment, p49_nodes);
        
        			t518 = claim_text(p49_nodes, ", comme par exemple l’observation d’une section de rivière fixe que vient traverser une vague. Prendre son gradient consistera à regarder, en chaque point, la variation de la valeur de la fonction selon un intervalle ");
        
        			claim_component(equation63.$$.fragment, p49_nodes);
        
        			t519 = claim_text(p49_nodes, " qui compare la hauteur par rapport aux points d’à côté, puis un autre selon un intervalle ");
        
        			claim_component(equation64.$$.fragment, p49_nodes);
        
        			t520 = claim_text(p49_nodes, " par rapport au même point au temps d’après. Notez que le symbole ");
        
        			claim_component(equation65.$$.fragment, p49_nodes);
        
        			t521 = claim_text(p49_nodes, " veut dire exactement la même chose que le ");
        
        			claim_component(equation66.$$.fragment, p49_nodes);
        
        			t522 = claim_text(p49_nodes, ", à savoir ");
        
        			em82 = claim_element(p49_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em82) !== "svelte-1x3qslh") em82.textContent = textContent_108;
        
        			t524 = claim_text(p49_nodes, ", mais on le préfère lorsqu’il y a ");
        
        			em83 = claim_element(p49_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em83) !== "svelte-11ui07o") em83.textContent = textContent_109;
        
        			t526 = claim_text(p49_nodes, " nombres dérivés. On parle alors de « dérivées partielles », mais c’est un point de détail.");
        
        			p49_nodes.forEach(detach);
        
        			t527 = claim_space(nodes);
        
        			p50 = claim_element(nodes, "P", {});
        
        			var p50_nodes = children(p50);
        
        			t528 = claim_text(p50_nodes, "Le gradient d’une fonction ");
        
        			claim_component(equation67.$$.fragment, p50_nodes);
        
        			t529 = claim_text(p50_nodes, " contiendra deux nombres (vecteur à deux dimensions), et celui d’une fonction ");
        
        			claim_component(equation68.$$.fragment, p50_nodes);
        
        			t530 = claim_text(p50_nodes, " trois nombres.");
        
        			p50_nodes.forEach(detach);
        
        			t531 = claim_space(nodes);
        
        			p51 = claim_element(nodes, "P", {});
        
        			var p51_nodes = children(p51);
        
        			t532 = claim_text(p51_nodes, "Dans le sketch ci dessous, nous avons quelque chose qui ressemble encore un petit peu plus à une dune ! Ce Pyla mathématique est obtenu grâce à la petite formule suivante : ");
        
        			claim_component(equation69.$$.fragment, p51_nodes);
        
        			t533 = claim_text(p51_nodes, ".");
        
        			p51_nodes.forEach(detach);
        
        			t534 = claim_space(nodes);
        
        			p52 = claim_element(nodes, "P", {});
        
        			var p52_nodes = children(p52);
        
        			t535 = claim_text(p52_nodes, "Modifiez la position en ");
        
        			claim_component(equation70.$$.fragment, p52_nodes);
        
        			t536 = claim_text(p52_nodes, " et en ");
        
        			claim_component(equation71.$$.fragment, p52_nodes);
        
        			t537 = claim_text(p52_nodes, " et voyez comment le vecteur de gradient — la flèche — évolue !\nIl représente la direction vers laquelle la hauteur ");
        
        			em84 = claim_element(p52_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em84) !== "svelte-tyzvwj") em84.textContent = textContent_110;
        
        			t539 = claim_text(p52_nodes, ", soit ");
        
        			strong27 = claim_element(p52_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong27) !== "svelte-15p9k5t") strong27.textContent = textContent_111;
        
        			t541 = claim_text(p52_nodes, ". Idéal pour savoir où dévaler !");
        
        			p52_nodes.forEach(detach);
        
        			t542 = claim_space(nodes);
        
        			p53 = claim_element(nodes, "P", {});
        
        			var p53_nodes = children(p53);
        
        			em85 = claim_element(p53_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em85) !== "svelte-p1oypc") em85.textContent = textContent_112;
        
        			t544 = claim_text(p53_nodes, " : ");
        
        			claim_component(range14.$$.fragment, p53_nodes);
        
        			t545 = claim_text(p53_nodes, " (");
        
        			t546 = claim_text(p53_nodes, /*$resolutionFunction*/ ctx[50]);
        
        			t547 = claim_text(p53_nodes, ")\n");
        
        			em86 = claim_element(p53_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em86) !== "svelte-43nb2a") em86.textContent = textContent_113;
        
        			t549 = claim_text(p53_nodes, " : ");
        
        			claim_component(range15.$$.fragment, p53_nodes);
        
        			t550 = claim_text(p53_nodes, " (");
        
        			t551 = claim_text(p53_nodes, /*$gradient_bounds*/ ctx[51]);
        
        			t552 = claim_text(p53_nodes, ") ");
        
        			br5 = claim_element(p53_nodes, "BR", {});
        
        			t553 = claim_space(p53_nodes);
        
        			em87 = claim_element(p53_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em87) !== "svelte-1yye8hh") em87.textContent = textContent_114;
        
        			t555 = claim_space(p53_nodes);
        
        			claim_component(equation72.$$.fragment, p53_nodes);
        
        			t556 = claim_text(p53_nodes, " : ");
        
        			claim_component(range16.$$.fragment, p53_nodes);
        
        			t557 = claim_text(p53_nodes, " (");
        
        			t558 = claim_text(p53_nodes, /*$x_grad_arrow*/ ctx[52]);
        
        			t559 = claim_text(p53_nodes, ") ");
        
        			claim_component(equation73.$$.fragment, p53_nodes);
        
        			t560 = claim_space(p53_nodes);
        
        			em88 = claim_element(p53_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em88) !== "svelte-1yye8hh") em88.textContent = textContent_115;
        
        			t562 = claim_space(p53_nodes);
        
        			claim_component(equation74.$$.fragment, p53_nodes);
        
        			t563 = claim_text(p53_nodes, " : ");
        
        			claim_component(range17.$$.fragment, p53_nodes);
        
        			t564 = claim_text(p53_nodes, " (");
        
        			t565 = claim_text(p53_nodes, /*$y_grad_arrow*/ ctx[53]);
        
        			t566 = claim_text(p53_nodes, ")");
        
        			p53_nodes.forEach(detach);
        
        			t567 = claim_space(nodes);
        
        			claim_component(checkbox4.$$.fragment, nodes);
        
        			t568 = claim_text(nodes, " Dessiner le repère\n");
        
        			claim_component(sketch7.$$.fragment, nodes);
        
        			t569 = claim_space(nodes);
        
        			p54 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p54) !== "svelte-lhup6h") p54.textContent = textContent_116;
        
        			t571 = claim_space(nodes);
        
        			claim_component(equation75.$$.fragment, nodes);
        
        			t572 = claim_space(nodes);
        
        			p55 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p55) !== "svelte-x3lgte") p55.textContent = textContent_117;
        
        			t574 = claim_space(nodes);
        
        			h14 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h14) !== "svelte-170u0ki") h14.textContent = textContent_118;
        
        			t576 = claim_space(nodes);
        
        			p56 = claim_element(nodes, "P", {});
        
        			var p56_nodes = children(p56);
        
        			t577 = claim_text(p56_nodes, "Par rapport aux vecteurs, un champ de vecteurs introduit une contrainte unique que ces derniers ne possédaient pas : il les rend ");
        
        			em89 = claim_element(p56_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em89) !== "svelte-1pr6kiq") em89.textContent = textContent_119;
        
        			t579 = claim_text(p56_nodes, " d’un point de l’espace !\nCela veut simplement dire qu’il associe un unique ");
        
        			em90 = claim_element(p56_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em90) !== "svelte-1v7cjtk") em90.textContent = textContent_120;
        
        			t581 = claim_text(p56_nodes, " à chaque ");
        
        			em91 = claim_element(p56_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em91) !== "svelte-pluqk") em91.textContent = textContent_121;
        
        			t583 = claim_text(p56_nodes, " de l’espace. En termes mathématiques plus formels, on dit que c’est une application de ");
        
        			claim_component(equation76.$$.fragment, p56_nodes);
        
        			t584 = claim_text(p56_nodes, " dans ");
        
        			claim_component(equation77.$$.fragment, p56_nodes);
        
        			t585 = claim_text(p56_nodes, " (");
        
        			claim_component(equation78.$$.fragment, p56_nodes);
        
        			t586 = claim_text(p56_nodes, " dans le cas du plan)");
        
        			p56_nodes.forEach(detach);
        
        			t587 = claim_space(nodes);
        
        			h24 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h24) !== "svelte-1ukekoe") h24.textContent = textContent_122;
        
        			t589 = claim_space(nodes);
        
        			p57 = claim_element(nodes, "P", {});
        
        			var p57_nodes = children(p57);
        
        			t590 = claim_text(p57_nodes, "L’exemple ci-dessous vous donne un aperçu du champ de vecteurs qui associe à chaque ");
        
        			em92 = claim_element(p57_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em92) !== "svelte-pluqk") em92.textContent = textContent_123;
        
        			t592 = claim_space(p57_nodes);
        
        			claim_component(equation79.$$.fragment, p57_nodes);
        
        			t593 = claim_text(p57_nodes, " ou bien le ");
        
        			em93 = claim_element(p57_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em93) !== "svelte-1v7cjtk") em93.textContent = textContent_124;
        
        			t595 = claim_space(p57_nodes);
        
        			claim_component(equation80.$$.fragment, p57_nodes);
        
        			t596 = claim_text(p57_nodes, ", ou bien le vecteur ");
        
        			claim_component(equation81.$$.fragment, p57_nodes);
        
        			t597 = claim_text(p57_nodes, " pour un certain échantillon de points. Le choix est vôtre ! (Attention à bien distinguer les deux idées ici !) Nous prendrons pour chaque case du repère le point correspondant à son centre.");
        
        			p57_nodes.forEach(detach);
        
        			t598 = claim_space(nodes);
        
        			p58 = claim_element(nodes, "P", {});
        
        			var p58_nodes = children(p58);
        
        			t599 = claim_text(p58_nodes, "Vous avez la possibilité de faire varier les paramètres ");
        
        			claim_component(equation82.$$.fragment, p58_nodes);
        
        			t600 = claim_text(p58_nodes, " et ");
        
        			claim_component(equation83.$$.fragment, p58_nodes);
        
        			t601 = claim_text(p58_nodes, " et d’observer le résultat.\nLorsque vous passerez votre souris sur le sketch, le vecteur correspondant à sa position dans le repère se dessinera à l’origine. De cette manière, vous aurez accès à une représentation plus « continue » du champ.");
        
        			p58_nodes.forEach(detach);
        
        			t602 = claim_space(nodes);
        
        			claim_component(equation84.$$.fragment, nodes);
        
        			t603 = claim_text(nodes, " : ");
        
        			claim_component(range18.$$.fragment, nodes);
        
        			t604 = claim_text(nodes, " (");
        
        			t605 = claim_text(nodes, /*$param_a*/ ctx[54]);
        
        			t606 = claim_text(nodes, ")\n");
        
        			claim_component(equation85.$$.fragment, nodes);
        
        			t607 = claim_text(nodes, " : ");
        
        			claim_component(range19.$$.fragment, nodes);
        
        			t608 = claim_text(nodes, " (");
        
        			t609 = claim_text(nodes, /*$param_b*/ ctx[55]);
        
        			t610 = claim_text(nodes, ")\n");
        
        			claim_component(select1.$$.fragment, nodes);
        
        			t611 = claim_space(nodes);
        
        			claim_component(sketch8.$$.fragment, nodes);
        
        			t612 = claim_space(nodes);
        
        			h25 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h25) !== "svelte-cuiksm") h25.textContent = textContent_125;
        
        			t614 = claim_space(nodes);
        
        			p59 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p59) !== "svelte-1j8x4yt") p59.innerHTML = textContent_126;
        
        			t620 = claim_space(nodes);
        
        			p60 = claim_element(nodes, "P", {});
        
        			var p60_nodes = children(p60);
        
        			t621 = claim_text(p60_nodes, "Dans les deux cas, la formule qui les définit implique un drôle de triangle renversé, censé être à l’image d’une lyre antique, un opérateur que l’on appelle ");
        
        			strong30 = claim_element(p60_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong30) !== "svelte-13g1ios") strong30.textContent = textContent_127;
        
        			t623 = claim_text(p60_nodes, ", noté ");
        
        			claim_component(equation86.$$.fragment, p60_nodes);
        
        			t624 = claim_text(p60_nodes, ".\nIl symbolise un bien étrange vecteur, qui vous surprendra sûrement. ");
        
        			claim_component(equation87.$$.fragment, p60_nodes);
        
        			p60_nodes.forEach(detach);
        
        			t625 = claim_space(nodes);
        
        			p61 = claim_element(nodes, "P", {});
        
        			var p61_nodes = children(p61);
        
        			t626 = claim_text(p61_nodes, "Vous remarquez comme ce vecteur ressemble au ");
        
        			em94 = claim_element(p61_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em94) !== "svelte-1btqp4i") em94.textContent = textContent_128;
        
        			t628 = claim_text(p61_nodes, " que nous avons défini plus haut ? A la différence près que le ");
        
        			claim_component(equation88.$$.fragment, p61_nodes);
        
        			t629 = claim_text(p61_nodes, " au numérateur est seul ..!\nMais puisque ce symbole veut dire ");
        
        			em95 = claim_element(p61_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em95) !== "svelte-1x3qslh") em95.textContent = textContent_129;
        
        			t631 = claim_text(p61_nodes, " et qu’une différence est une comparaison entre deux termes, pourquoi diable est-il tout seul ? Vous posez les bonnes questions !");
        
        			p61_nodes.forEach(detach);
        
        			t632 = claim_space(nodes);
        
        			claim_component(equation89.$$.fragment, nodes);
        
        			t633 = claim_text(nodes, ", comme un véritable instrument, ne vaut pas grand chose s'il est laissé à lui-même. Il lui faut un musicien et une partition !\nSi comme musicien nous choisissons la **multiplication**, et comme partition une fonction ");
        
        			claim_component(equation90.$$.fragment, nodes);
        
        			t634 = claim_text(nodes, ", la musique que nous entendrons sera le gradient de ");
        
        			claim_component(equation91.$$.fragment, nodes);
        
        			t635 = claim_text(nodes, " !\n");
        
        			claim_component(equation92.$$.fragment, nodes);
        
        			t636 = claim_space(nodes);
        
        			p62 = claim_element(nodes, "P", {});
        
        			var p62_nodes = children(p62);
        
        			t637 = claim_text(p62_nodes, "Nous avons ici strictement appliqué les règles propres de la multiplication d’un vecteur avec un scalaire, en traitant le symbole ");
        
        			claim_component(equation93.$$.fragment, p62_nodes);
        
        			t638 = claim_space(p62_nodes);
        
        			strong31 = claim_element(p62_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong31) !== "svelte-1ix0y38") strong31.textContent = textContent_130;
        
        			p62_nodes.forEach(detach);
        
        			t640 = claim_space(nodes);
        
        			p63 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p63) !== "svelte-aphby") p63.textContent = textContent_131;
        
        			t642 = claim_space(nodes);
        
        			h33 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h33) !== "svelte-1ce3w7a") h33.textContent = textContent_132;
        
        			t644 = claim_space(nodes);
        
        			p64 = claim_element(nodes, "P", {});
        
        			var p64_nodes = children(p64);
        
        			t645 = claim_text(p64_nodes, "La ");
        
        			strong32 = claim_element(p64_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong32) !== "svelte-11hymh2") strong32.textContent = textContent_133;
        
        			t647 = claim_text(p64_nodes, " en un point du champ exprime la tendance qu’on les vecteurs aux alentours de ce point à ");
        
        			em96 = claim_element(p64_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em96) !== "svelte-1k3qudl") em96.textContent = textContent_134;
        
        			t649 = claim_text(p64_nodes, " (comme si le champ se « contractait » en ce point) ou ");
        
        			em97 = claim_element(p64_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em97) !== "svelte-18n9zff") em97.textContent = textContent_135;
        
        			t651 = claim_text(p64_nodes, " (comme si le champ se « dilatait » depuis ce point).\nDans le premier cas, la divergence est ");
        
        			claim_component(equation94.$$.fragment, p64_nodes);
        
        			t652 = claim_text(p64_nodes, " et dans le second cas, elle est ");
        
        			claim_component(equation95.$$.fragment, p64_nodes);
        
        			t653 = claim_text(p64_nodes, ". Dans le cas où elle serait nulle, il n’y a ni contraction ni dilatation.");
        
        			p64_nodes.forEach(detach);
        
        			t654 = claim_space(nodes);
        
        			p65 = claim_element(nodes, "P", {});
        
        			var p65_nodes = children(p65);
        
        			t655 = claim_text(p65_nodes, "Si vous cliquez sur ce les mots soulignés directement ci-après, le sketch précédent affichera la ");
        
        			claim_component(actionelement0.$$.fragment, p65_nodes);
        
        			t656 = claim_text(p65_nodes, " à l’endroit pointé par la souris, au lieu du ");
        
        			claim_component(actionelement1.$$.fragment, p65_nodes);
        
        			t657 = claim_text(p65_nodes, " comme c’était le cas tout à l’heure.\nVous remarquerez alors que pour un des deux champs, la divergence est nulle en tout point.");
        
        			p65_nodes.forEach(detach);
        
        			t658 = claim_space(nodes);
        
        			p66 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p66) !== "svelte-1bupbvu") p66.innerHTML = textContent_136;
        
        			t664 = claim_space(nodes);
        
        			p67 = claim_element(nodes, "P", {});
        
        			var p67_nodes = children(p67);
        
        			t665 = claim_text(p67_nodes, "Sa formule est ");
        
        			claim_component(equation96.$$.fragment, p67_nodes);
        
        			t666 = claim_text(p67_nodes, " (produit scalaire) où ");
        
        			claim_component(equation97.$$.fragment, p67_nodes);
        
        			t667 = claim_text(p67_nodes, " est un champ de vecteurs.");
        
        			p67_nodes.forEach(detach);
        
        			t668 = claim_space(nodes);
        
        			h34 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h34) !== "svelte-vrwbk5") h34.textContent = textContent_137;
        
        			t670 = claim_space(nodes);
        
        			p68 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p68) !== "svelte-1dghbcv") p68.innerHTML = textContent_138;
        
        			t676 = claim_space(nodes);
        
        			p69 = claim_element(nodes, "P", {});
        
        			var p69_nodes = children(p69);
        
        			t677 = claim_text(p69_nodes, "Si vous cliquez sur ce les mots soulignés directement ci-après, le sketch précédent affichera la ");
        
        			claim_component(actionelement2.$$.fragment, p69_nodes);
        
        			t678 = claim_text(p69_nodes, " à l’endroit pointé par la souris, au lieu du ");
        
        			claim_component(actionelement3.$$.fragment, p69_nodes);
        
        			t679 = claim_text(p69_nodes, " comme c’était le cas tout à l’heure.\nVous remarquerez alors que pour un des deux champs, le rotationnel est nul en tout point.");
        
        			p69_nodes.forEach(detach);
        
        			t680 = claim_space(nodes);
        
        			p70 = claim_element(nodes, "P", {});
        
        			var p70_nodes = children(p70);
        
        			t681 = claim_text(p70_nodes, "Elle sera représentée par un ");
        
        			claim_component(equation98.$$.fragment, p70_nodes);
        
        			t682 = claim_text(p70_nodes, " si sa valeur est positive ou un ");
        
        			claim_component(equation99.$$.fragment, p70_nodes);
        
        			t683 = claim_text(p70_nodes, " si sa valeur est négative, plus ou moins grand selon de son intensité.");
        
        			p70_nodes.forEach(detach);
        
        			t684 = claim_space(nodes);
        
        			p71 = claim_element(nodes, "P", {});
        
        			var p71_nodes = children(p71);
        
        			t685 = claim_text(p71_nodes, "Sa formule est ");
        
        			claim_component(equation100.$$.fragment, p71_nodes);
        
        			t686 = claim_text(p71_nodes, " (produit vectoriel) où ");
        
        			claim_component(equation101.$$.fragment, p71_nodes);
        
        			t687 = claim_text(p71_nodes, " est un champ de vecteurs.");
        
        			p71_nodes.forEach(detach);
        
        			t688 = claim_space(nodes);
        
        			h26 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h26) !== "svelte-xj9mn3") h26.textContent = textContent_139;
        
        			t690 = claim_space(nodes);
        
        			p72 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p72) !== "svelte-7deu0f") p72.innerHTML = textContent_140;
        
        			t694 = claim_space(nodes);
        
        			p73 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p73) !== "svelte-3vd41f") p73.innerHTML = textContent_141;
        
        			t698 = claim_space(nodes);
        
        			ul1 = claim_element(nodes, "UL", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(ul1) !== "svelte-zdpzti") ul1.innerHTML = textContent_142;
        
        			t710 = claim_space(nodes);
        
        			claim_component(sketch9.$$.fragment, nodes);
        
        			t711 = claim_space(nodes);
        
        			p74 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p74) !== "svelte-1ro516u") p74.textContent = textContent_143;
        
        			t713 = claim_space(nodes);
        
        			claim_component(equation102.$$.fragment, nodes);
        
        			t714 = claim_space(nodes);
        
        			p75 = claim_element(nodes, "P", {});
        
        			var p75_nodes = children(p75);
        
        			t715 = claim_text(p75_nodes, "Que vient donc faire cet étrange ");
        
        			claim_component(equation103.$$.fragment, p75_nodes);
        
        			t716 = claim_text(p75_nodes, " ici ? Pourquoi n’est-il pas écrit comme les autres champs de vecteurs ?\nEn fait, ");
        
        			claim_component(equation104.$$.fragment, p75_nodes);
        
        			t717 = claim_text(p75_nodes, " est un champ ");
        
        			strong37 = claim_element(p75_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong37) !== "svelte-w7e9xs") strong37.textContent = textContent_144;
        
        			t719 = claim_text(p75_nodes, ", c’est-à-dire un champ qui fait correspondre un ");
        
        			strong38 = claim_element(p75_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong38) !== "svelte-91c9c1") strong38.textContent = textContent_145;
        
        			t721 = claim_text(p75_nodes, " à chaque point plutôt qu’un vecteur. Lorsque nous le multiplions par ");
        
        			claim_component(equation105.$$.fragment, p75_nodes);
        
        			t722 = claim_text(p75_nodes, ", nous obtenons son ");
        
        			strong39 = claim_element(p75_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong39) !== "svelte-5mcxg8") strong39.textContent = textContent_146;
        
        			t724 = claim_text(p75_nodes, ", qui lui, par contre, est un champ de vecteurs !");
        
        			p75_nodes.forEach(detach);
        
        			t725 = claim_space(nodes);
        
        			claim_component(equation106.$$.fragment, nodes);
        
        			t726 = claim_text(nodes, " est donc un **champ gradient**, ce qui n'est pas le cas de tous les autres champs.\n");
        
        			p76 = claim_element(nodes, "P", {});
        
        			var p76_nodes = children(p76);
        
        			t727 = claim_text(p76_nodes, "Les vecteurs qu’il contient correspondent à la variation de ");
        
        			claim_component(equation107.$$.fragment, p76_nodes);
        
        			t728 = claim_text(p76_nodes, " dans toutes les directions de l’espace. Dans les deux dimensions qui nous intéressent ici, ses coordonnées correspondent donc à la dérivée de ");
        
        			claim_component(equation108.$$.fragment, p76_nodes);
        
        			t729 = claim_text(p76_nodes, " selon la direction horizontale ");
        
        			claim_component(equation109.$$.fragment, p76_nodes);
        
        			t730 = claim_text(p76_nodes, ", et à la dérivée de ");
        
        			claim_component(equation110.$$.fragment, p76_nodes);
        
        			t731 = claim_text(p76_nodes, " selon la direction verticale ");
        
        			claim_component(equation111.$$.fragment, p76_nodes);
        
        			t732 = claim_text(p76_nodes, ", c’est-à-dire à ");
        
        			claim_component(equation112.$$.fragment, p76_nodes);
        
        			t733 = claim_text(p76_nodes, ".");
        
        			p76_nodes.forEach(detach);
        
        			t734 = claim_space(nodes);
        
        			p77 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p77) !== "svelte-1ap9lda") p77.textContent = textContent_147;
        
        			t736 = claim_space(nodes);
        
        			p78 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p78) !== "svelte-101hpws") p78.textContent = textContent_148;
        
        			t738 = claim_space(nodes);
        
        			claim_component(equation113.$$.fragment, nodes);
        
        			t739 = claim_space(nodes);
        
        			claim_component(equation114.$$.fragment, nodes);
        
        			t740 = claim_space(nodes);
        
        			p79 = claim_element(nodes, "P", {});
        
        			var p79_nodes = children(p79);
        
        			t741 = claim_text(p79_nodes, "Si nous consentons à une petite coquetterie d’écriture, sachez que les mathématiciens aiment bien « retourner le triangle » lorsque ce dernier est élevé au carré ! (");
        
        			claim_component(equation115.$$.fragment, p79_nodes);
        
        			t742 = claim_text(p79_nodes, ")");
        
        			p79_nodes.forEach(detach);
        
        			t743 = claim_space(nodes);
        
        			p80 = claim_element(nodes, "P", {});
        
        			var p80_nodes = children(p80);
        
        			t744 = claim_text(p80_nodes, "Ne confondez-donc surtout pas sa signification ici avec le « delta » qui, habituellement, dénote un ");
        
        			strong40 = claim_element(p80_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong40) !== "svelte-qtef5e") strong40.textContent = textContent_149;
        
        			t746 = claim_text(p80_nodes, " : ce delta là dénote ce que l’on appelle le ");
        
        			strong41 = claim_element(p80_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong41) !== "svelte-fe2w0p") strong41.textContent = textContent_150;
        
        			t748 = claim_text(p80_nodes, " : il prend, dans toutes les directions de l’espace, les dérivées ");
        
        			strong42 = claim_element(p80_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong42) !== "svelte-qua2x8") strong42.textContent = textContent_151;
        
        			t750 = claim_text(p80_nodes, " en chaque point : ");
        
        			claim_component(equation116.$$.fragment, p80_nodes);
        
        			t751 = claim_text(p80_nodes, ".");
        
        			p80_nodes.forEach(detach);
        
        			t752 = claim_space(nodes);
        
        			p81 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p81) !== "svelte-dmu2ax") p81.innerHTML = textContent_152;
        
        			t756 = claim_space(nodes);
        
        			claim_component(equation117.$$.fragment, nodes);
        
        			t757 = claim_space(nodes);
        
        			p82 = claim_element(nodes, "P", {});
        
        			var p82_nodes = children(p82);
        
        			t758 = claim_text(p82_nodes, "Puisque nous déduisons, grâce à la toute première équation, que ");
        
        			claim_component(equation118.$$.fragment, p82_nodes);
        
        			t759 = claim_text(p82_nodes, " nous n’avons qu’à résoudre l’équation de Poisson pour trouver ");
        
        			claim_component(equation119.$$.fragment, p82_nodes);
        
        			t760 = claim_text(p82_nodes, ", calculer son gradient, puis soustraire le tout au champ ");
        
        			claim_component(equation120.$$.fragment, p82_nodes);
        
        			t761 = claim_text(p82_nodes, " pour obtenir enfin notre ");
        
        			strong44 = claim_element(p82_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong44) !== "svelte-h66l32") strong44.textContent = textContent_153;
        
        			t763 = claim_text(p82_nodes, " tant désiré !");
        
        			p82_nodes.forEach(detach);
        
        			t764 = claim_space(nodes);
        
        			p83 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p83) !== "svelte-odzz47") p83.textContent = textContent_154;
        
        			t766 = claim_space(nodes);
        
        			h15 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h15) !== "svelte-qelz1k") h15.textContent = textContent_155;
        
        			t768 = claim_space(nodes);
        
        			p84 = claim_element(nodes, "P", {});
        
        			var p84_nodes = children(p84);
        
        			t769 = claim_text(p84_nodes, "Si nous avons introduit les champs de vecteurs, c’est qu’ils nous servent de ");
        
        			em102 = claim_element(p84_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em102) !== "svelte-16y6p3x") em102.textContent = textContent_156;
        
        			t771 = claim_text(p84_nodes, " pour représenter l’état d’un fluide à un instant ");
        
        			claim_component(equation121.$$.fragment, p84_nodes);
        
        			t772 = claim_text(p84_nodes, ". Ce dernier ne sera rien d’autre qu’un champ de vecteurs ");
        
        			em103 = claim_element(p84_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em103) !== "svelte-1dmj0tr") em103.textContent = textContent_157;
        
        			t774 = claim_text(p84_nodes, " : la vitesse de déplacement d’une particule du fluide à chaque point de ce dernier.\nToute son évolution au cours du temps, son « écoulement », sera une modification continue de ces vitesses en fonction de différentes contraintes que nous allons voir tout de suite !");
        
        			p84_nodes.forEach(detach);
        
        			t775 = claim_space(nodes);
        
        			p85 = claim_element(nodes, "P", {});
        
        			var p85_nodes = children(p85);
        
        			t776 = claim_text(p85_nodes, "Dès que vous comprenez qu’une équation doit traduire l’");
        
        			em104 = claim_element(p85_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em104) !== "svelte-1kkfuf9") em104.textContent = textContent_158;
        
        			t778 = claim_text(p85_nodes, " de quelque chose, immédiatement, il faut vous dire qu’il s’agira dans tous les cas d’une ");
        
        			strong45 = claim_element(p85_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong45) !== "svelte-6po94y") strong45.textContent = textContent_159;
        
        			t780 = claim_text(p85_nodes, ", impliquant des dérivées. En effet, la dérivée nous renseigne toujours de ");
        
        			strong46 = claim_element(p85_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong46) !== "svelte-9siq7h") strong46.textContent = textContent_160;
        
        			t782 = claim_text(p85_nodes, " d’une certaine valeur en fonction d’une autre dont elle dépend. Ici, il s’agira donc de la ");
        
        			em105 = claim_element(p85_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em105) !== "svelte-1dmj0tr") em105.textContent = textContent_161;
        
        			t784 = claim_space(p85_nodes);
        
        			claim_component(equation122.$$.fragment, p85_nodes);
        
        			t785 = claim_text(p85_nodes, "  en chaque point au cours du ");
        
        			em106 = claim_element(p85_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em106) !== "svelte-110i7zz") em106.textContent = textContent_162;
        
        			t787 = claim_space(p85_nodes);
        
        			claim_component(equation123.$$.fragment, p85_nodes);
        
        			t788 = claim_text(p85_nodes, " .\nC’est ainsi qu’il faut lire les équations de Navier-Stokes. J’ai essayé de la rendre moins intimidante en l’enrichissant de quelques animations.");
        
        			p85_nodes.forEach(detach);
        
        			t789 = claim_space(nodes);
        
        			p86 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p86) !== "svelte-1gzcr82") p86.innerHTML = textContent_163;
        
        			t792 = claim_space(nodes);
        
        			p87 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p87) !== "svelte-1wyhgmu") p87.innerHTML = textContent_164;
        
        			t795 = claim_space(nodes);
        
        			h35 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h35) !== "svelte-fitjpf") h35.textContent = textContent_165;
        
        			t797 = claim_space(nodes);
        
        			p88 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p88) !== "svelte-1b02w48") p88.textContent = textContent_166;
        
        			t799 = claim_space(nodes);
        
        			p89 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p89) !== "svelte-bjk205") p89.innerHTML = textContent_167;
        
        			t805 = claim_space(nodes);
        
        			p90 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p90) !== "svelte-10fmttk") p90.innerHTML = textContent_168;
        
        			t811 = claim_space(nodes);
        
        			p91 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p91) !== "svelte-xhsvh") p91.innerHTML = textContent_169;
        
        			t817 = claim_space(nodes);
        
        			p92 = claim_element(nodes, "P", {});
        
        			var p92_nodes = children(p92);
        
        			t818 = claim_text(p92_nodes, "A ce stade de l’article, arrivez vous à apercevoir quelle condition mathématique régit ces fluides incompressibles ? Pas de compression implique l’absence de toute ");
        
        			em111 = claim_element(p92_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em111) !== "svelte-sur7ka") em111.textContent = textContent_170;
        
        			t820 = claim_text(p92_nodes, " et de toute ");
        
        			em112 = claim_element(p92_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em112) !== "svelte-1c71hnr") em112.textContent = textContent_171;
        
        			t822 = claim_text(p92_nodes, " ! La masse par unité de volume du fluide doit donc rester constante. Dans ces cas là, la divergence, ");
        
        			claim_component(equation124.$$.fragment, p92_nodes);
        
        			t823 = claim_text(p92_nodes, " !");
        
        			p92_nodes.forEach(detach);
        
        			t824 = claim_space(nodes);
        
        			p93 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p93) !== "svelte-184vpdl") p93.innerHTML = textContent_172;
        
        			t828 = claim_space(nodes);
        
        			h16 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h16) !== "svelte-xzx8hk") h16.textContent = textContent_173;
        
        			t830 = claim_space(nodes);
        
        			p94 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p94) !== "svelte-ae8pd1") p94.textContent = textContent_174;
        
        			t832 = claim_space(nodes);
        
        			p95 = claim_element(nodes, "P", {});
        
        			var p95_nodes = children(p95);
        
        			t833 = claim_text(p95_nodes, "Il y a tout de même une logique à un tel nom. A l’instar de la relaxation musculaire qui cherche à apaiser certaines tensions, certaines ");
        
        			em113 = claim_element(p95_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em113) !== "svelte-1qvxiic") em113.textContent = textContent_175;
        
        			t835 = claim_text(p95_nodes, " mécaniques logées dans nos muscles, la relaxation d’un problème mathématique consiste aussi à supprimer certaines des contraintes qu’il impose.\nLa relation de ");
        
        			em114 = claim_element(p95_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em114) !== "svelte-45qzcf") em114.textContent = textContent_176;
        
        			t837 = claim_text(p95_nodes, " en est une, par exemple. Dans une équation simple, comme ");
        
        			claim_component(equation125.$$.fragment, p95_nodes);
        
        			t838 = claim_text(p95_nodes, " La valeur inconnue ");
        
        			claim_component(equation126.$$.fragment, p95_nodes);
        
        			t839 = claim_space(p95_nodes);
        
        			em115 = claim_element(p95_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em115) !== "svelte-uj576c") em115.textContent = textContent_177;
        
        			t841 = claim_text(p95_nodes, " d’une autre inconnue : ");
        
        			claim_component(equation127.$$.fragment, p95_nodes);
        
        			t842 = claim_text(p95_nodes, ". La relaxation visera à supprimer cette dépendance, en transformant intelligemment une valeur ");
        
        			em116 = claim_element(p95_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em116) !== "svelte-to1d8p") em116.textContent = textContent_178;
        
        			t844 = claim_text(p95_nodes, " en valeur ");
        
        			em117 = claim_element(p95_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em117) !== "svelte-xoqrwu") em117.textContent = textContent_179;
        
        			t846 = claim_text(p95_nodes, ".\nC’est précisément l’enjeu de la méthode que nous allons explorer maintenant !");
        
        			p95_nodes.forEach(detach);
        
        			t847 = claim_space(nodes);
        
        			p96 = claim_element(nodes, "P", {});
        
        			var p96_nodes = children(p96);
        
        			t848 = claim_text(p96_nodes, "Avec son aide, nous allons ici résoudre ");
        
        			strong52 = claim_element(p96_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong52) !== "svelte-1m3jks7") strong52.textContent = textContent_180;
        
        			t850 = claim_text(p96_nodes, " un système d’équation simple : 3 équations de plans à 3 inconnues. La solution d’un tel système nous informe des coordonnées du point d’intersection ");
        
        			claim_component(equation128.$$.fragment, p96_nodes);
        
        			t851 = claim_text(p96_nodes, " de ces plans entre eux.");
        
        			p96_nodes.forEach(detach);
        
        			t852 = claim_space(nodes);
        
        			p97 = claim_element(nodes, "P", {});
        
        			var p97_nodes = children(p97);
        
        			t853 = claim_text(p97_nodes, "De même qu’une droite, dont l’équation est de toujours de la forme ");
        
        			claim_component(equation129.$$.fragment, p97_nodes);
        
        			t854 = claim_text(p97_nodes, " (équivalent au traditionnel ");
        
        			claim_component(equation130.$$.fragment, p97_nodes);
        
        			t855 = claim_text(p97_nodes, " que l’on voit en seconde avec ");
        
        			claim_component(equation131.$$.fragment, p97_nodes);
        
        			t856 = claim_text(p97_nodes, " et ");
        
        			claim_component(equation132.$$.fragment, p97_nodes);
        
        			t857 = claim_text(p97_nodes, ") vient ");
        
        			em118 = claim_element(p97_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em118) !== "svelte-152a6e9") em118.textContent = textContent_181;
        
        			t859 = claim_text(p97_nodes, " le plan (");
        
        			claim_component(equation133.$$.fragment, p97_nodes);
        
        			t860 = claim_text(p97_nodes, "), un plan, d’équation ");
        
        			claim_component(equation134.$$.fragment, p97_nodes);
        
        			t861 = claim_text(p97_nodes, " vient pour sa part couper en deux l’espace à ");
        
        			em119 = claim_element(p97_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em119) !== "svelte-105t77r") em119.textContent = textContent_182;
        
        			t863 = claim_text(p97_nodes, " dimensions (");
        
        			claim_component(equation135.$$.fragment, p97_nodes);
        
        			t864 = claim_text(p97_nodes, "). En extrapolant ce motif, l’hyperplan ");
        
        			claim_component(equation136.$$.fragment, p97_nodes);
        
        			t865 = claim_text(p97_nodes, " viendrait quant à lui séparer en deux l’espace à ");
        
        			em120 = claim_element(p97_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em120) !== "svelte-s20t3s") em120.textContent = textContent_183;
        
        			t867 = claim_text(p97_nodes, " dimensions (");
        
        			claim_component(equation137.$$.fragment, p97_nodes);
        
        			t868 = claim_text(p97_nodes, ") et ainsi de suite.");
        
        			p97_nodes.forEach(detach);
        
        			t869 = claim_space(nodes);
        
        			p98 = claim_element(nodes, "P", {});
        
        			var p98_nodes = children(p98);
        
        			t870 = claim_text(p98_nodes, "Ainsi, dans l’espace à trois dimensions, nous pouvons tracer un plan arbitraire en faisant varier ces quatre paramètres, et c’est ce que je vous propose de faire maintenant ! Ils se décomposent en trois ");
        
        			em121 = claim_element(p98_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em121) !== "svelte-z18ts") em121.textContent = textContent_184;
        
        			t872 = claim_space(p98_nodes);
        
        			claim_component(equation138.$$.fragment, p98_nodes);
        
        			t873 = claim_text(p98_nodes, ", ");
        
        			claim_component(equation139.$$.fragment, p98_nodes);
        
        			t874 = claim_text(p98_nodes, ", ");
        
        			claim_component(equation140.$$.fragment, p98_nodes);
        
        			t875 = claim_text(p98_nodes, " et une ");
        
        			em122 = claim_element(p98_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em122) !== "svelte-17mjgab") em122.textContent = textContent_185;
        
        			t877 = claim_space(p98_nodes);
        
        			claim_component(equation141.$$.fragment, p98_nodes);
        
        			t878 = claim_text(p98_nodes, ", que nous ferons varier ici (arbitrairement) sur l’intervalle ");
        
        			claim_component(equation142.$$.fragment, p98_nodes);
        
        			t879 = claim_text(p98_nodes, ".\nSi nous avons bel et bien besoin de trois plans pour notre problème, c’est que l’intersection de deux plans est toujours une ");
        
        			em123 = claim_element(p98_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em123) !== "svelte-rbok2b") em123.textContent = textContent_186;
        
        			t881 = claim_text(p98_nodes, ", et celle de trois plans un ");
        
        			em124 = claim_element(p98_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em124) !== "svelte-pluqk") em124.textContent = textContent_187;
        
        			t883 = claim_text(p98_nodes, ".");
        
        			p98_nodes.forEach(detach);
        
        			t884 = claim_space(nodes);
        
        			p99 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p99) !== "svelte-1iwiqf2") p99.textContent = textContent_188;
        
        			t886 = claim_space(nodes);
        
        			claim_component(checkbox5.$$.fragment, nodes);
        
        			t887 = claim_space(nodes);
        
        			claim_component(equation143.$$.fragment, nodes);
        
        			t888 = claim_space(nodes);
        
        			claim_component(dynamic2.$$.fragment, nodes);
        
        			t889 = claim_space(nodes);
        
        			claim_component(equation144.$$.fragment, nodes);
        
        			t890 = claim_space(nodes);
        
        			claim_component(dynamic3.$$.fragment, nodes);
        
        			t891 = claim_space(nodes);
        
        			claim_component(equation145.$$.fragment, nodes);
        
        			t892 = claim_space(nodes);
        
        			claim_component(dynamic4.$$.fragment, nodes);
        
        			t893 = claim_space(nodes);
        
        			claim_component(equation146.$$.fragment, nodes);
        
        			t894 = claim_space(nodes);
        
        			claim_component(dynamic5.$$.fragment, nodes);
        
        			t895 = claim_space(nodes);
        
        			br6 = claim_element(nodes, "BR", {});
        
        			t896 = claim_space(nodes);
        
        			claim_component(checkbox6.$$.fragment, nodes);
        
        			t897 = claim_space(nodes);
        
        			claim_component(equation147.$$.fragment, nodes);
        
        			t898 = claim_space(nodes);
        
        			claim_component(dynamic6.$$.fragment, nodes);
        
        			t899 = claim_space(nodes);
        
        			claim_component(equation148.$$.fragment, nodes);
        
        			t900 = claim_space(nodes);
        
        			claim_component(dynamic7.$$.fragment, nodes);
        
        			t901 = claim_space(nodes);
        
        			claim_component(equation149.$$.fragment, nodes);
        
        			t902 = claim_space(nodes);
        
        			claim_component(dynamic8.$$.fragment, nodes);
        
        			t903 = claim_space(nodes);
        
        			claim_component(equation150.$$.fragment, nodes);
        
        			t904 = claim_space(nodes);
        
        			claim_component(dynamic9.$$.fragment, nodes);
        
        			t905 = claim_space(nodes);
        
        			br7 = claim_element(nodes, "BR", {});
        
        			t906 = claim_space(nodes);
        
        			claim_component(checkbox7.$$.fragment, nodes);
        
        			t907 = claim_space(nodes);
        
        			claim_component(equation151.$$.fragment, nodes);
        
        			t908 = claim_space(nodes);
        
        			claim_component(dynamic10.$$.fragment, nodes);
        
        			t909 = claim_space(nodes);
        
        			claim_component(equation152.$$.fragment, nodes);
        
        			t910 = claim_space(nodes);
        
        			claim_component(dynamic11.$$.fragment, nodes);
        
        			t911 = claim_space(nodes);
        
        			claim_component(equation153.$$.fragment, nodes);
        
        			t912 = claim_space(nodes);
        
        			claim_component(dynamic12.$$.fragment, nodes);
        
        			t913 = claim_space(nodes);
        
        			claim_component(equation154.$$.fragment, nodes);
        
        			t914 = claim_space(nodes);
        
        			claim_component(dynamic13.$$.fragment, nodes);
        
        			t915 = claim_space(nodes);
        
        			br8 = claim_element(nodes, "BR", {});
        
        			t916 = claim_space(nodes);
        
        			p100 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p100) !== "svelte-87jrr8") p100.textContent = textContent_189;
        
        			t918 = claim_space(nodes);
        
        			claim_component(equation155.$$.fragment, nodes);
        
        			t919 = claim_space(nodes);
        
        			p101 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p101) !== "svelte-cusrls") p101.innerHTML = textContent_190;
        
        			t923 = claim_space(nodes);
        
        			claim_component(equation156.$$.fragment, nodes);
        
        			t924 = claim_space(nodes);
        
        			h36 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h36) !== "svelte-5jfodx") h36.textContent = textContent_191;
        
        			t926 = claim_space(nodes);
        
        			claim_component(sketch10.$$.fragment, nodes);
        
        			t927 = claim_space(nodes);
        
        			span22 = claim_element(nodes, "SPAN", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span22) !== "svelte-1qufua2") span22.innerHTML = textContent_192;
        
        			t928 = claim_space(nodes);
        
        			h44 = claim_element(nodes, "H4", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h44) !== "svelte-nl1wbm") h44.textContent = textContent_193;
        
        			t930 = claim_space(nodes);
        
        			claim_component(checkbox8.$$.fragment, nodes);
        
        			t931 = claim_text(nodes, " Dessiner les plans ");
        
        			br9 = claim_element(nodes, "BR", {});
        
        			t932 = claim_space(nodes);
        
        			claim_component(checkbox9.$$.fragment, nodes);
        
        			t933 = claim_text(nodes, " Dessiner le repère ");
        
        			br10 = claim_element(nodes, "BR", {});
        
        			t934 = claim_space(nodes);
        
        			claim_component(checkbox10.$$.fragment, nodes);
        
        			t935 = claim_text(nodes, " Rotation automatique ");
        
        			br11 = claim_element(nodes, "BR", {});
        
        			t936 = claim_space(nodes);
        
        			h45 = claim_element(nodes, "H4", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h45) !== "svelte-1v1xioe") h45.textContent = textContent_194;
        
        			t938 = claim_space(nodes);
        
        			p102 = claim_element(nodes, "P", {});
        
        			var p102_nodes = children(p102);
        
        			em126 = claim_element(p102_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em126) !== "svelte-1oe9vhw") em126.textContent = textContent_195;
        
        			t940 = claim_text(p102_nodes, " : ");
        
        			claim_component(range20.$$.fragment, p102_nodes);
        
        			t941 = claim_text(p102_nodes, " (");
        
        			t942 = claim_text(p102_nodes, /*$iterationsGS*/ ctx[45]);
        
        			t943 = claim_text(p102_nodes, ")");
        
        			p102_nodes.forEach(detach);
        
        			t944 = claim_space(nodes);
        
        			claim_component(checkbox11.$$.fragment, nodes);
        
        			t945 = claim_text(nodes, " Dessiner les itérés ");
        
        			br12 = claim_element(nodes, "BR", {});
        
        			t946 = claim_space(nodes);
        
        			br13 = claim_element(nodes, "BR", {});
        
        			t947 = claim_space(nodes);
        
        			claim_component(actionelement4.$$.fragment, nodes);
        
        			t948 = claim_space(nodes);
        
        			h37 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h37) !== "svelte-27nt6u") h37.textContent = textContent_196;
        
        			t950 = claim_space(nodes);
        
        			if_block7.l(nodes);
        
        			t951 = claim_space(nodes);
        
        			h17 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h17) !== "svelte-19klil6") h17.textContent = textContent_197;
        
        			t953 = claim_space(nodes);
        
        			p103 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p103) !== "svelte-tjiv3d") p103.textContent = textContent_198;
        
        			t955 = claim_space(nodes);
        
        			p104 = claim_element(nodes, "P", {});
        
        			var p104_nodes = children(p104);
        
        			t956 = claim_text(p104_nodes, "Ce dernier consiste en une ");
        
        			strong53 = claim_element(p104_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong53) !== "svelte-1rob7ri") strong53.textContent = textContent_199;
        
        			t958 = claim_text(p104_nodes, " répétant inlassablement quatre étapes, aboutissant à la modification du champ de vecteurs représentant l’état du fluide à l’instant ");
        
        			claim_component(equation157.$$.fragment, p104_nodes);
        
        			t959 = claim_text(p104_nodes, " afin qu’il représente l’état à l’instant ");
        
        			claim_component(equation158.$$.fragment, p104_nodes);
        
        			t960 = claim_text(p104_nodes, ".");
        
        			p104_nodes.forEach(detach);
        
        			t961 = claim_space(nodes);
        
        			p105 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p105) !== "svelte-1j3zzpf") p105.innerHTML = textContent_200;
        
        			t966 = claim_space(nodes);
        
        			h27 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h27) !== "svelte-9uy654") h27.textContent = textContent_201;
        
        			t968 = claim_space(nodes);
        
        			p106 = claim_element(nodes, "P", {});
        
        			var p106_nodes = children(p106);
        
        			t969 = claim_text(p106_nodes, "Puisqu’il s’agit ici de la routine la plus simple, nous ne nous y attarderons que peu !\nDans une grille de résolution ");
        
        			code0 = claim_element(p106_nodes, "CODE", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(code0) !== "svelte-1v81sco") code0.textContent = textContent_202;
        
        			t971 = claim_text(p106_nodes, ", nous voulons ajouter une certaine quantité en une case ");
        
        			claim_component(equation159.$$.fragment, p106_nodes);
        
        			t972 = claim_text(p106_nodes, " donnée.");
        
        			p106_nodes.forEach(detach);
        
        			t973 = claim_space(nodes);
        
        			pre0 = claim_element(nodes, "PRE", { class: true });
        
        			var pre0_nodes = children(pre0);
        
        			html_tag = claim_html_tag(pre0_nodes, false);
        
        			pre0_nodes.forEach(detach);
        
        			t974 = claim_space(nodes);
        
        			p107 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p107) !== "svelte-p9ft2m") p107.innerHTML = textContent_203;
        
        			t982 = claim_space(nodes);
        
        			p108 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p108) !== "svelte-1ssdsz3") p108.textContent = textContent_204;
        
        			t984 = claim_space(nodes);
        
        			h28 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h28) !== "svelte-7g4q3l") h28.textContent = textContent_205;
        
        			t986 = claim_space(nodes);
        
        			p109 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p109) !== "svelte-1wbvcm8") p109.innerHTML = textContent_206;
        
        			t990 = claim_space(nodes);
        
        			p110 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p110) !== "svelte-18r7d44") p110.innerHTML = textContent_207;
        
        			t994 = claim_space(nodes);
        
        			claim_component(staticcontainer.$$.fragment, nodes);
        
        			t995 = claim_space(nodes);
        
        			p111 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p111) !== "svelte-1isjr9f") p111.innerHTML = textContent_208;
        
        			t999 = claim_space(nodes);
        
        			p112 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p112) !== "svelte-o2i3aw") p112.innerHTML = textContent_209;
        
        			t1002 = claim_space(nodes);
        
        			claim_component(radio.$$.fragment, nodes);
        
        			t1003 = claim_text(nodes, "\n(");
        
        			t1004 = claim_text(nodes, /*$coeff_diff_demo*/ ctx[57]);
        
        			t1005 = claim_text(nodes, ")\n");
        
        			p113 = claim_element(nodes, "P", {});
        
        			var p113_nodes = children(p113);
        
        			em134 = claim_element(p113_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em134) !== "svelte-164na21") em134.textContent = textContent_210;
        
        			t1007 = claim_text(p113_nodes, " : ");
        
        			claim_component(range21.$$.fragment, p113_nodes);
        
        			p113_nodes.forEach(detach);
        
        			t1008 = claim_space(nodes);
        
        			claim_component(sketch11.$$.fragment, nodes);
        
        			t1009 = claim_space(nodes);
        
        			h38 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h38) !== "svelte-167u5as") h38.textContent = textContent_211;
        
        			t1011 = claim_space(nodes);
        
        			p114 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p114) !== "svelte-5h270h") p114.innerHTML = textContent_212;
        
        			t1021 = claim_space(nodes);
        
        			h50 = claim_element(nodes, "H5", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h50) !== "svelte-19a1lsn") h50.textContent = textContent_213;
        
        			t1023 = claim_space(nodes);
        
        			p115 = claim_element(nodes, "P", {});
        
        			var p115_nodes = children(p115);
        
        			t1024 = claim_text(p115_nodes, "Pour chaque ");
        
        			em135 = claim_element(p115_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em135) !== "svelte-3eucgo") em135.textContent = textContent_214;
        
        			t1026 = claim_text(p115_nodes, " case, on lui confère premièrement la valeur qu’elle possédait à l’instant ");
        
        			claim_component(equation160.$$.fragment, p115_nodes);
        
        			t1027 = claim_text(p115_nodes, ", puis lui ajoute la somme des parts qu’elle reçoit de ses cases environnantes, chacune lui offrant ");
        
        			claim_component(equation161.$$.fragment, p115_nodes);
        
        			t1028 = claim_text(p115_nodes, " de son don total, calculé selon leur valeur à l’instant ");
        
        			claim_component(equation162.$$.fragment, p115_nodes);
        
        			t1029 = claim_text(p115_nodes, ". La taille de ces parts est fonction du coefficient de diffusion. On lui retranche finalement son propre don total, et nous obtenons sa nouvelle valeur.");
        
        			p115_nodes.forEach(detach);
        
        			t1030 = claim_space(nodes);
        
        			h51 = claim_element(nodes, "H5", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h51) !== "svelte-izk97") h51.textContent = textContent_215;
        
        			t1032 = claim_space(nodes);
        
        			pre1 = claim_element(nodes, "PRE", { class: true });
        
        			var pre1_nodes = children(pre1);
        
        			html_tag_1 = claim_html_tag(pre1_nodes, false);
        
        			pre1_nodes.forEach(detach);
        
        			t1033 = claim_space(nodes);
        
        			h39 = claim_element(nodes, "H3", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h39) !== "svelte-11hqbpf") h39.textContent = textContent_216;
        
        			t1035 = claim_space(nodes);
        
        			p116 = claim_element(nodes, "P", {});
        
        			var p116_nodes = children(p116);
        
        			t1036 = claim_text(p116_nodes, "La méthode stable ne diffère pas radicalement de celle-ci dans son esprit, à une différence de taille : elle procède ");
        
        			em136 = claim_element(p116_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em136) !== "svelte-1bhu4zb") em136.textContent = textContent_217;
        
        			t1038 = claim_text(p116_nodes, "\nAu lieu de calculer unes à unes la nouvelle valeur à ");
        
        			claim_component(equation163.$$.fragment, p116_nodes);
        
        			t1039 = claim_text(p116_nodes, " de chaque case en leur donnant la part qui leur revient, on va ce coup-ci ");
        
        			strong60 = claim_element(p116_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong60) !== "svelte-1ll6ln6") strong60.textContent = textContent_218;
        
        			t1041 = claim_text(p116_nodes, " de l’instant ");
        
        			claim_component(equation164.$$.fragment, p116_nodes);
        
        			t1042 = claim_text(p116_nodes, ", dont nous traiterons la valeurs des cases comme les ");
        
        			strong61 = claim_element(p116_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong61) !== "svelte-koec26") strong61.textContent = textContent_219;
        
        			t1044 = claim_text(p116_nodes, " d’une équation, pour « remonter le temps » vers les valeurs connues de l’instant ");
        
        			claim_component(equation165.$$.fragment, p116_nodes);
        
        			t1045 = claim_text(p116_nodes, ".");
        
        			p116_nodes.forEach(detach);
        
        			t1046 = claim_space(nodes);
        
        			pre2 = claim_element(nodes, "PRE", { class: true });
        
        			var pre2_nodes = children(pre2);
        
        			html_tag_2 = claim_html_tag(pre2_nodes, false);
        
        			pre2_nodes.forEach(detach);
        
        			t1047 = claim_space(nodes);
        
        			p117 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p117) !== "svelte-57bh85") p117.textContent = textContent_220;
        
        			t1049 = claim_space(nodes);
        
        			p118 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p118) !== "svelte-1gq95mu") p118.innerHTML = textContent_221;
        
        			t1055 = claim_space(nodes);
        
        			p119 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p119) !== "svelte-1p3tw4z") p119.innerHTML = textContent_222;
        
        			t1059 = claim_space(nodes);
        
        			claim_component(equation166.$$.fragment, nodes);
        
        			t1060 = claim_space(nodes);
        
        			p120 = claim_element(nodes, "P", {});
        
        			var p120_nodes = children(p120);
        
        			strong64 = claim_element(p120_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong64) !== "svelte-161ym63") strong64.textContent = textContent_223;
        
        			t1062 = claim_text(p120_nodes, " pour une très petite grille de résolution ");
        
        			claim_component(equation167.$$.fragment, p120_nodes);
        
        			t1063 = claim_text(p120_nodes, ".\nSelon la puissance de votre carte graphique, vous pourrez atteindre des résolutions supérieures à ");
        
        			claim_component(equation168.$$.fragment, p120_nodes);
        
        			t1064 = claim_text(p120_nodes, " dans cette page.\nImaginez la taille du système qui en découle, et que cette méthode résout automatiquement !");
        
        			p120_nodes.forEach(detach);
        
        			t1065 = claim_space(nodes);
        
        			p121 = claim_element(nodes, "P", {});
        
        			var p121_nodes = children(p121);
        
        			strong65 = claim_element(p121_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong65) !== "svelte-11quhzw") strong65.textContent = textContent_224;
        
        			t1067 = claim_text(p121_nodes, " : Les ");
        
        			claim_component(equation169.$$.fragment, p121_nodes);
        
        			t1068 = claim_text(p121_nodes, " dans la diagonale sont à la position de la case qui nous intéresse (l’itéré ");
        
        			claim_component(equation170.$$.fragment, p121_nodes);
        
        			t1069 = claim_text(p121_nodes, " en cours), et les ");
        
        			claim_component(equation171.$$.fragment, p121_nodes);
        
        			t1070 = claim_text(p121_nodes, " dispersés ça et là dans la ");
        
        			em137 = claim_element(p121_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em137) !== "svelte-1wnrxte") em137.textContent = textContent_225;
        
        			t1072 = claim_text(p121_nodes, " sont ses cases environnantes.\nToutes les autres cases de la grille n’ayant aucun poids dans le calcul de la nouvelle valeur de la case en cours, on leur assigne donc un facteur ");
        
        			claim_component(equation172.$$.fragment, p121_nodes);
        
        			t1073 = claim_text(p121_nodes, ".\nUne matrice contenant autant de ");
        
        			claim_component(equation173.$$.fragment, p121_nodes);
        
        			t1074 = claim_text(p121_nodes, " s’appelle une ");
        
        			em138 = claim_element(p121_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em138) !== "svelte-15amjy0") em138.textContent = textContent_226;
        
        			t1076 = claim_text(p121_nodes, ", et c’est typiquement le genre de matrice avec laquelle la méthode de Gauss-Siedel fonctionne bien !");
        
        			p121_nodes.forEach(detach);
        
        			t1077 = claim_space(nodes);
        
        			p122 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p122) !== "svelte-3l4l26") p122.innerHTML = textContent_227;
        
        			t1081 = claim_space(nodes);
        
        			pre3 = claim_element(nodes, "PRE", { class: true });
        
        			var pre3_nodes = children(pre3);
        
        			html_tag_3 = claim_html_tag(pre3_nodes, false);
        
        			pre3_nodes.forEach(detach);
        
        			t1082 = claim_space(nodes);
        
        			p123 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p123) !== "svelte-i6p4my") p123.textContent = textContent_228;
        
        			t1084 = claim_space(nodes);
        
        			h29 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h29) !== "svelte-1h43wp8") h29.textContent = textContent_229;
        
        			t1086 = claim_space(nodes);
        
        			p124 = claim_element(nodes, "P", {});
        
        			var p124_nodes = children(p124);
        
        			t1087 = claim_text(p124_nodes, "L’advection étant le transport d’une quantité le long d’un champ de vitesse, nous travaillons ici avec ");
        
        			strong66 = claim_element(p124_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong66) !== "svelte-1gbec7u") strong66.textContent = textContent_230;
        
        			t1089 = claim_text(p124_nodes, " champs. Le champ de vitesse en question à l’instant ");
        
        			claim_component(equation174.$$.fragment, p124_nodes);
        
        			t1090 = claim_text(p124_nodes, ", et le champ (scalaire ou vectoriel) de la quantité que nous souhaitons transporter.\nCe dernier peut très bien être le champ de vitesse lui-même, ce qui se fera d’ailleurs : souvenez vous que l’");
        
        			em139 = claim_element(p124_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em139) !== "svelte-zzf0b3") em139.textContent = textContent_231;
        
        			t1092 = claim_text(p124_nodes, " est sans doute la composante la plus importante de la mécanique des fluides : c’est à elle qu’on doit l’existence des tourbillons hypnotisants ! Nous transporterons également la quantité scalaire de la ");
        
        			em140 = claim_element(p124_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em140) !== "svelte-unro79") em140.textContent = textContent_232;
        
        			t1094 = claim_text(p124_nodes, " en chaque point du fluide.");
        
        			p124_nodes.forEach(detach);
        
        			t1095 = claim_space(nodes);
        
        			p125 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p125) !== "svelte-hrr6qp") p125.innerHTML = textContent_233;
        
        			t1099 = claim_space(nodes);
        
        			p126 = claim_element(nodes, "P", {});
        
        			var p126_nodes = children(p126);
        
        			t1100 = claim_text(p126_nodes, "Ici, pour calculer la quantité transportée par advection dans une case ");
        
        			claim_component(equation175.$$.fragment, p126_nodes);
        
        			t1101 = claim_text(p126_nodes, " à l’instant ");
        
        			claim_component(equation176.$$.fragment, p126_nodes);
        
        			t1102 = claim_text(p126_nodes, ", on va commencer par regarder le vecteur vitesse en cette case à l’instant ");
        
        			claim_component(equation177.$$.fragment, p126_nodes);
        
        			t1103 = claim_text(p126_nodes, ". Ensuite, puis on va tracer sa trajectoire ");
        
        			em142 = claim_element(p126_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em142) !== "svelte-efrhz4") em142.textContent = textContent_234;
        
        			t1105 = claim_text(p126_nodes, " au cours d’une petite période de temps ");
        
        			claim_component(equation178.$$.fragment, p126_nodes);
        
        			t1106 = claim_text(p126_nodes, " pour deviner « à peu près » en quelle case ce vecteur aurait dû se trouver à l’instant précédent ");
        
        			claim_component(equation179.$$.fragment, p126_nodes);
        
        			t1107 = claim_text(p126_nodes, ". On nommera cette opération ");
        
        			em143 = claim_element(p126_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em143) !== "svelte-166feaj") em143.textContent = textContent_235;
        
        			t1109 = claim_text(p126_nodes, ". On prend ensuite la ");
        
        			strong67 = claim_element(p126_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong67) !== "svelte-1ataadd") strong67.textContent = textContent_236;
        
        			t1111 = claim_text(p126_nodes, " des quantités présentes dans les cases immédiatement voisines, et on assigne cette valeur à la case de la grille suivante ");
        
        			claim_component(equation180.$$.fragment, p126_nodes);
        
        			t1112 = claim_text(p126_nodes, ", en imaginant qu’il s’agira là « à peu près » la quantité qui s’y retrouvera ! Toutes les cases voisines ne contribuent pas de la même manière à cette moyenne : on considère le léger décalage par rapport à l’origine de la case où l’on atterrit pour calculer le poids relatif de chacune. (voir ci-contre) Et ça fonctionne plutôt bien.");
        
        			p126_nodes.forEach(detach);
        
        			t1113 = claim_space(nodes);
        
        			p127 = claim_element(nodes, "P", {});
        
        			var p127_nodes = children(p127);
        
        			strong68 = claim_element(p127_nodes, "STRONG", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(strong68) !== "svelte-2gbx9s") strong68.textContent = textContent_237;
        
        			t1115 = claim_text(p127_nodes, " du champ de vecteur pour voir l’opération de ");
        
        			em144 = claim_element(p127_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em144) !== "svelte-k7yhtr") em144.textContent = textContent_238;
        
        			t1117 = claim_text(p127_nodes, " au cœur de cette étape. L’intervalle de temps ");
        
        			claim_component(equation181.$$.fragment, p127_nodes);
        
        			t1118 = claim_text(p127_nodes, " est représenté par la ligne ");
        
        			claim_component(equation182.$$.fragment, p127_nodes);
        
        			p127_nodes.forEach(detach);
        
        			t1119 = claim_space(nodes);
        
        			claim_component(sketch12.$$.fragment, nodes);
        
        			t1120 = claim_space(nodes);
        
        			claim_component(actionelement5.$$.fragment, nodes);
        
        			t1121 = claim_space(nodes);
        
        			p128 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p128) !== "svelte-tpl96x") p128.textContent = textContent_239;
        
        			t1123 = claim_space(nodes);
        
        			pre4 = claim_element(nodes, "PRE", { class: true });
        
        			var pre4_nodes = children(pre4);
        
        			html_tag_4 = claim_html_tag(pre4_nodes, false);
        
        			pre4_nodes.forEach(detach);
        
        			t1124 = claim_space(nodes);
        
        			h210 = claim_element(nodes, "H2", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h210) !== "svelte-1x4tz6n") h210.textContent = textContent_240;
        
        			t1126 = claim_space(nodes);
        
        			p129 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p129) !== "svelte-tqiadu") p129.textContent = textContent_241;
        
        			t1128 = claim_space(nodes);
        
        			p130 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p130) !== "svelte-1cm3y1k") p130.innerHTML = textContent_242;
        
        			t1136 = claim_space(nodes);
        
        			claim_component(equation183.$$.fragment, nodes);
        
        			t1137 = claim_space(nodes);
        
        			p131 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p131) !== "svelte-ugvw5i") p131.innerHTML = textContent_243;
        
        			t1140 = claim_space(nodes);
        
        			p132 = claim_element(nodes, "P", {});
        
        			var p132_nodes = children(p132);
        
        			t1141 = claim_text(p132_nodes, "Il en va exactement de même pour les dérivées secondes, et donc pour le calcul du Laplacien ");
        
        			em147 = claim_element(p132_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em147) !== "svelte-11fk1bm") em147.textContent = textContent_244;
        
        			t1143 = claim_text(p132_nodes, " dont voici la formule si nous considérons le pas « infinitésimal » comme valant ");
        
        			claim_component(equation184.$$.fragment, p132_nodes);
        
        			t1144 = claim_text(p132_nodes, " :");
        
        			p132_nodes.forEach(detach);
        
        			t1145 = claim_space(nodes);
        
        			claim_component(equation185.$$.fragment, nodes);
        
        			t1146 = claim_space(nodes);
        
        			br14 = claim_element(nodes, "BR", {});
        
        			t1147 = claim_space(nodes);
        
        			claim_component(equation186.$$.fragment, nodes);
        
        			t1148 = claim_space(nodes);
        
        			p133 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p133) !== "svelte-5pzy6e") p133.textContent = textContent_245;
        
        			t1150 = claim_space(nodes);
        
        			pre5 = claim_element(nodes, "PRE", { class: true });
        
        			var pre5_nodes = children(pre5);
        
        			html_tag_5 = claim_html_tag(pre5_nodes, false);
        
        			pre5_nodes.forEach(detach);
        
        			t1151 = claim_space(nodes);
        
        			h18 = claim_element(nodes, "H1", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(h18) !== "svelte-1t8og91") h18.textContent = textContent_246;
        
        			t1153 = claim_space(nodes);
        
        			p134 = claim_element(nodes, "P", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(p134) !== "svelte-fqesor") p134.innerHTML = textContent_247;
        
        			t1158 = claim_space(nodes);
        
        			claim_component(sketch13.$$.fragment, nodes);
        
        			t1159 = claim_space(nodes);
        
        			p135 = claim_element(nodes, "P", {});
        
        			var p135_nodes = children(p135);
        
        			em148 = claim_element(p135_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em148) !== "svelte-wt4n8d") em148.textContent = textContent_248;
        
        			t1161 = claim_space(p135_nodes);
        
        			claim_component(range22.$$.fragment, p135_nodes);
        
        			p135_nodes.forEach(detach);
        
        			t1162 = claim_space(nodes);
        
        			p136 = claim_element(nodes, "P", {});
        
        			var p136_nodes = children(p136);
        
        			em149 = claim_element(p136_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em149) !== "svelte-1gm87tb") em149.textContent = textContent_249;
        
        			t1164 = claim_space(p136_nodes);
        
        			claim_component(dynamic14.$$.fragment, p136_nodes);
        
        			p136_nodes.forEach(detach);
        
        			t1165 = claim_space(nodes);
        
        			p137 = claim_element(nodes, "P", {});
        
        			var p137_nodes = children(p137);
        
        			em150 = claim_element(p137_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em150) !== "svelte-vj1s8q") em150.textContent = textContent_250;
        
        			t1167 = claim_space(p137_nodes);
        
        			claim_component(dynamic15.$$.fragment, p137_nodes);
        
        			p137_nodes.forEach(detach);
        
        			t1168 = claim_space(nodes);
        
        			p138 = claim_element(nodes, "P", {});
        
        			var p138_nodes = children(p138);
        
        			em151 = claim_element(p138_nodes, "EM", { ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(em151) !== "svelte-15n29ti") em151.textContent = textContent_251;
        
        			t1170 = claim_space(p138_nodes);
        
        			claim_component(dynamic16.$$.fragment, p138_nodes);
        
        			p138_nodes.forEach(detach);
        
        			t1171 = claim_space(nodes);
        
        			span23 = claim_element(nodes, "SPAN", { style: true });
        
        			var span23_nodes = children(span23);
        
        			t1172 = claim_text(span23_nodes, "(Il s'agit d'un moyen simpliste pour recréer un semblant de *tension de surface*. Pour ne pas prendre en compte ce paramètre additionnel, laissez la valeur à ");
        
        			claim_component(equation187.$$.fragment, span23_nodes);
        
        			t1173 = claim_text(span23_nodes, ")");
        
        			span23_nodes.forEach(detach);
        
        			t1174 = claim_space(nodes);
        
        			br15 = claim_element(nodes, "BR", {});
        
        			t1175 = claim_space(nodes);
        
        			claim_component(sketch14.$$.fragment, nodes);
        
        			t1176 = claim_text(nodes, " La couleur du fluide : ");
        
        			span24 = claim_element(nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span24) !== "svelte-1rkoifg") span24.textContent = textContent_252;
        
        			t1178 = claim_text(nodes, " : ");
        
        			claim_component(dynamic17.$$.fragment, nodes);
        
        			t1179 = claim_text(nodes, ", ");
        
        			span25 = claim_element(nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span25) !== "svelte-y9gcq0") span25.textContent = textContent_253;
        
        			t1181 = claim_text(nodes, " : ");
        
        			claim_component(dynamic18.$$.fragment, nodes);
        
        			t1182 = claim_text(nodes, ", ");
        
        			span26 = claim_element(nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span26) !== "svelte-1lujv21") span26.textContent = textContent_254;
        
        			t1184 = claim_text(nodes, ": ");
        
        			claim_component(dynamic19.$$.fragment, nodes);
        
        			t1185 = claim_space(nodes);
        
        			br16 = claim_element(nodes, "BR", {});
        
        			t1186 = claim_space(nodes);
        
        			claim_component(sketch15.$$.fragment, nodes);
        
        			t1187 = claim_text(nodes, " La couleur de l'encre : ");
        
        			span27 = claim_element(nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span27) !== "svelte-1rkoifg") span27.textContent = textContent_255;
        
        			t1189 = claim_text(nodes, " : ");
        
        			claim_component(dynamic20.$$.fragment, nodes);
        
        			t1190 = claim_text(nodes, ", ");
        
        			span28 = claim_element(nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span28) !== "svelte-y9gcq0") span28.textContent = textContent_256;
        
        			t1192 = claim_text(nodes, " : ");
        
        			claim_component(dynamic21.$$.fragment, nodes);
        
        			t1193 = claim_text(nodes, ", ");
        
        			span29 = claim_element(nodes, "SPAN", { style: true, ["data-svelte-h"]: true });
        
        			if (get_svelte_dataset(span29) !== "svelte-1lujv21") span29.textContent = textContent_257;
        
        			t1195 = claim_text(nodes, ": ");
        
        			claim_component(dynamic22.$$.fragment, nodes);
        
        			t1196 = claim_space(nodes);
        
        			br17 = claim_element(nodes, "BR", {});
        
        			this.h();
        
        		},
        
        		h() {
        
        			attr(a3_1, "href", "https://simontlg.io/flocons-de-neige-generatifs");
        
        			attr(a3_1, "rel", "nofollow");
        
        			attr(a4, "href", "https://p5js.org/");
        
        			attr(a4, "rel", "nofollow");
        
        			set_style(span0, "color", "blue");
        
        			set_style(span0, "font-style", "bold");
        
        			set_style(span1, "color", "red");
        
        			set_style(span1, "font-style", "bold");
        
        			set_style(span2, "color", "lightgreen");
        
        			set_style(span2, "font-style", "bold");
        
        			html_tag.a = null;
        
        			attr(pre0, "class", "language-js");
        
        			html_tag_1.a = null;
        
        			attr(pre1, "class", "language-js");
        
        			html_tag_2.a = null;
        
        			attr(pre2, "class", "language-js");
        
        			html_tag_3.a = null;
        
        			attr(pre3, "class", "language-js");
        
        			html_tag_4.a = null;
        
        			attr(pre4, "class", "language-js");
        
        			html_tag_5.a = null;
        
        			attr(pre5, "class", "language-js");
        
        			set_style(span23, "font-size", "0.8em");
        
        			set_style(span24, "color", "red");
        
        			set_style(span24, "font-style", "bold");
        
        			set_style(span25, "color", "green");
        
        			set_style(span25, "font-style", "bold");
        
        			set_style(span26, "color", "blue");
        
        			set_style(span26, "font-style", "bold");
        
        			set_style(span27, "color", "red");
        
        			set_style(span27, "font-style", "bold");
        
        			set_style(span28, "color", "green");
        
        			set_style(span28, "font-style", "bold");
        
        			set_style(span29, "color", "blue");
        
        			set_style(span29, "font-style", "bold");
        
        		},
        
        		m(target, anchor) {
        
        			insert_hydration(target, p0, anchor);
        
        			insert_hydration(target, t5, anchor);
        
        			insert_hydration(target, h10, anchor);
        
        			insert_hydration(target, t7, anchor);
        
        			insert_hydration(target, blockquote0, anchor);
        
        			insert_hydration(target, t11, anchor);
        
        			insert_hydration(target, p2, anchor);
        
        			insert_hydration(target, t15, anchor);
        
        			insert_hydration(target, p3, anchor);
        
        			insert_hydration(target, t19, anchor);
        
        			insert_hydration(target, p4, anchor);
        
        			insert_hydration(target, t23, anchor);
        
        			insert_hydration(target, p5, anchor);
        
        			insert_hydration(target, t31, anchor);
        
        			insert_hydration(target, p6, anchor);
        
        			insert_hydration(target, t35, anchor);
        
        			insert_hydration(target, p7, anchor);
        
        			insert_hydration(target, t49, anchor);
        
        			insert_hydration(target, p8, anchor);
        
        			insert_hydration(target, t53, anchor);
        
        			insert_hydration(target, p9, anchor);
        
        			insert_hydration(target, t59, anchor);
        
        			insert_hydration(target, p10, anchor);
        
        			insert_hydration(target, t61, anchor);
        
        			insert_hydration(target, ul0, anchor);
        
        			insert_hydration(target, t65, anchor);
        
        			insert_hydration(target, p11, anchor);
        
        			insert_hydration(target, t71, anchor);
        
        			insert_hydration(target, p12, anchor);
        
        			insert_hydration(target, t81, anchor);
        
        			insert_hydration(target, blockquote1, anchor);
        
        			insert_hydration(target, t87, anchor);
        
        			insert_hydration(target, p14, anchor);
        
        			insert_hydration(target, t89, anchor);
        
        			insert_hydration(target, p15, anchor);
        
        			append_hydration(p15, t90);
        
        			append_hydration(p15, a3_1);
        
        			append_hydration(p15, t92);
        
        			append_hydration(p15, a4);
        
        			append_hydration(p15, t94);
        
        			append_hydration(p15, em23);
        
        			append_hydration(p15, t96);
        
        			append_hydration(p15, em24);
        
        			append_hydration(p15, t98);
        
        			mount_component(equation0, p15, null);
        
        			append_hydration(p15, t99);
        
        			mount_component(equation1, p15, null);
        
        			append_hydration(p15, t100);
        
        			mount_component(equation2, p15, null);
        
        			append_hydration(p15, t101);
        
        			insert_hydration(target, t102, anchor);
        
        			insert_hydration(target, p16, anchor);
        
        			insert_hydration(target, t104, anchor);
        
        			insert_hydration(target, p17, anchor);
        
        			insert_hydration(target, t119, anchor);
        
        			insert_hydration(target, p18, anchor);
        
        			insert_hydration(target, t121, anchor);
        
        			insert_hydration(target, h11, anchor);
        
        			insert_hydration(target, t123, anchor);
        
        			insert_hydration(target, h12, anchor);
        
        			insert_hydration(target, t125, anchor);
        
        			insert_hydration(target, h20, anchor);
        
        			insert_hydration(target, t127, anchor);
        
        			mount_component(sketch0, target, anchor);
        
        			insert_hydration(target, t128, anchor);
        
        			insert_hydration(target, p19, anchor);
        
        			append_hydration(p19, t129);
        
        			append_hydration(p19, strong5);
        
        			append_hydration(p19, t131);
        
        			append_hydration(p19, strong6);
        
        			append_hydration(p19, t133);
        
        			append_hydration(p19, em27);
        
        			append_hydration(p19, t135);
        
        			append_hydration(p19, span0);
        
        			append_hydration(p19, t137);
        
        			append_hydration(p19, em28);
        
        			append_hydration(p19, t139);
        
        			append_hydration(p19, span1);
        
        			append_hydration(p19, t141);
        
        			mount_component(equation3, p19, null);
        
        			append_hydration(p19, t142);
        
        			append_hydration(p19, em29);
        
        			append_hydration(p19, t144);
        
        			append_hydration(p19, span2);
        
        			append_hydration(p19, t146);
        
        			mount_component(equation4, p19, null);
        
        			append_hydration(p19, t147);
        
        			insert_hydration(target, t148, anchor);
        
        			mount_component(equation5, target, anchor);
        
        			insert_hydration(target, t149, anchor);
        
        			mount_component(dynamic0, target, anchor);
        
        			insert_hydration(target, t150, anchor);
        
        			insert_hydration(target, p20, anchor);
        
        			append_hydration(p20, t151);
        
        			append_hydration(p20, em30);
        
        			append_hydration(p20, t153);
        
        			append_hydration(p20, strong7);
        
        			append_hydration(strong7, t154);
        
        			insert_hydration(target, t155, anchor);
        
        			mount_component(equation6, target, anchor);
        
        			insert_hydration(target, t156, anchor);
        
        			mount_component(dynamic1, target, anchor);
        
        			insert_hydration(target, t157, anchor);
        
        			insert_hydration(target, p21, anchor);
        
        			append_hydration(p21, t158);
        
        			append_hydration(p21, em31);
        
        			append_hydration(p21, t160);
        
        			append_hydration(p21, strong8);
        
        			append_hydration(strong8, t161);
        
        			insert_hydration(target, t162, anchor);
        
        			insert_hydration(target, p22, anchor);
        
        			insert_hydration(target, t168, anchor);
        
        			insert_hydration(target, p23, anchor);
        
        			append_hydration(p23, t169);
        
        			append_hydration(p23, em34);
        
        			append_hydration(p23, t171);
        
        			append_hydration(p23, em35);
        
        			append_hydration(p23, t173);
        
        			append_hydration(p23, em36);
        
        			append_hydration(p23, t175);
        
        			append_hydration(p23, em37);
        
        			append_hydration(p23, t177);
        
        			append_hydration(p23, em38);
        
        			append_hydration(p23, t179);
        
        			mount_component(equation7, p23, null);
        
        			append_hydration(p23, t180);
        
        			mount_component(equation8, p23, null);
        
        			append_hydration(p23, t181);
        
        			mount_component(equation9, p23, null);
        
        			append_hydration(p23, t182);
        
        			mount_component(equation10, p23, null);
        
        			append_hydration(p23, t183);
        
        			mount_component(equation11, p23, null);
        
        			append_hydration(p23, t184);
        
        			insert_hydration(target, t185, anchor);
        
        			insert_hydration(target, p24, anchor);
        
        			insert_hydration(target, t187, anchor);
        
        			insert_hydration(target, p25, anchor);
        
        			append_hydration(p25, em39);
        
        			append_hydration(p25, t189);
        
        			mount_component(equation12, p25, null);
        
        			append_hydration(p25, t190);
        
        			mount_component(equation13, p25, null);
        
        			append_hydration(p25, t191);
        
        			mount_component(range0, p25, null);
        
        			append_hydration(p25, t192);
        
        			mount_component(equation14, p25, null);
        
        			append_hydration(p25, t193);
        
        			append_hydration(p25, t194);
        
        			append_hydration(p25, t195);
        
        			insert_hydration(target, t196, anchor);
        
        			insert_hydration(target, p26, anchor);
        
        			append_hydration(p26, em40);
        
        			append_hydration(p26, t198);
        
        			mount_component(equation15, p26, null);
        
        			append_hydration(p26, t199);
        
        			mount_component(range1, p26, null);
        
        			append_hydration(p26, t200);
        
        			append_hydration(p26, t201);
        
        			append_hydration(p26, t202);
        
        			insert_hydration(target, t203, anchor);
        
        			mount_component(checkbox0, target, anchor);
        
        			insert_hydration(target, t204, anchor);
        
        			mount_component(checkbox1, target, anchor);
        
        			insert_hydration(target, t205, anchor);
        
        			mount_component(sketch1, target, anchor);
        
        			insert_hydration(target, t206, anchor);
        
        			insert_hydration(target, p27, anchor);
        
        			append_hydration(p27, t207);
        
        			append_hydration(p27, em41);
        
        			append_hydration(p27, t209);
        
        			mount_component(equation16, p27, null);
        
        			append_hydration(p27, t210);
        
        			insert_hydration(target, t211, anchor);
        
        			if_blocks[current_block_type_index].m(target, anchor);
        
        			insert_hydration(target, t212, anchor);
        
        			insert_hydration(target, p28, anchor);
        
        			insert_hydration(target, t218, anchor);
        
        			mount_component(equation17, target, anchor);
        
        			insert_hydration(target, t219, anchor);
        
        			mount_component(range2, target, anchor);
        
        			insert_hydration(target, t220, anchor);
        
        			insert_hydration(target, t221, anchor);
        
        			insert_hydration(target, t222, anchor);
        
        			mount_component(equation18, target, anchor);
        
        			insert_hydration(target, t223, anchor);
        
        			mount_component(range3, target, anchor);
        
        			insert_hydration(target, t224, anchor);
        
        			insert_hydration(target, t225, anchor);
        
        			insert_hydration(target, t226, anchor);
        
        			mount_component(sketch2, target, anchor);
        
        			insert_hydration(target, t227, anchor);
        
        			insert_hydration(target, h40, anchor);
        
        			insert_hydration(target, t229, anchor);
        
        			if_blocks_1[current_block_type_index_1].m(target, anchor);
        
        			insert_hydration(target, t230, anchor);
        
        			insert_hydration(target, h41, anchor);
        
        			insert_hydration(target, t232, anchor);
        
        			if_blocks_2[current_block_type_index_2].m(target, anchor);
        
        			insert_hydration(target, t233, anchor);
        
        			insert_hydration(target, p29, anchor);
        
        			append_hydration(p29, t234);
        
        			mount_component(equation19, p29, null);
        
        			append_hydration(p29, t235);
        
        			mount_component(equation20, p29, null);
        
        			append_hydration(p29, t236);
        
        			mount_component(equation21, p29, null);
        
        			append_hydration(p29, t237);
        
        			mount_component(equation22, p29, null);
        
        			append_hydration(p29, t238);
        
        			append_hydration(p29, em44);
        
        			append_hydration(p29, t240);
        
        			mount_component(equation23, p29, null);
        
        			append_hydration(p29, t241);
        
        			mount_component(equation24, p29, null);
        
        			append_hydration(p29, t242);
        
        			mount_component(equation25, p29, null);
        
        			append_hydration(p29, t243);
        
        			mount_component(equation26, p29, null);
        
        			append_hydration(p29, t244);
        
        			mount_component(equation27, p29, null);
        
        			append_hydration(p29, t245);
        
        			mount_component(equation28, p29, null);
        
        			append_hydration(p29, t246);
        
        			append_hydration(p29, em45);
        
        			append_hydration(p29, t248);
        
        			mount_component(equation29, p29, null);
        
        			append_hydration(p29, t249);
        
        			append_hydration(p29, em46);
        
        			append_hydration(p29, t251);
        
        			mount_component(equation30, p29, null);
        
        			append_hydration(p29, t252);
        
        			insert_hydration(target, t253, anchor);
        
        			insert_hydration(target, h21, anchor);
        
        			insert_hydration(target, t255, anchor);
        
        			insert_hydration(target, p30, anchor);
        
        			append_hydration(p30, t256);
        
        			append_hydration(p30, strong9);
        
        			append_hydration(p30, t258);
        
        			append_hydration(p30, strong10);
        
        			append_hydration(p30, t260);
        
        			append_hydration(p30, em47);
        
        			append_hydration(p30, t262);
        
        			append_hydration(p30, em48);
        
        			append_hydration(p30, t264);
        
        			append_hydration(p30, em49);
        
        			append_hydration(p30, t266);
        
        			mount_component(equation31, p30, null);
        
        			append_hydration(p30, t267);
        
        			append_hydration(p30, em50);
        
        			append_hydration(p30, t269);
        
        			mount_component(equation32, p30, null);
        
        			append_hydration(p30, t270);
        
        			insert_hydration(target, t271, anchor);
        
        			insert_hydration(target, h30, anchor);
        
        			insert_hydration(target, t273, anchor);
        
        			insert_hydration(target, p31, anchor);
        
        			insert_hydration(target, t281, anchor);
        
        			mount_component(equation33, target, anchor);
        
        			insert_hydration(target, t282, anchor);
        
        			mount_component(range4, target, anchor);
        
        			insert_hydration(target, t283, anchor);
        
        			insert_hydration(target, t284, anchor);
        
        			insert_hydration(target, t285, anchor);
        
        			mount_component(equation34, target, anchor);
        
        			insert_hydration(target, t286, anchor);
        
        			mount_component(range5, target, anchor);
        
        			insert_hydration(target, t287, anchor);
        
        			insert_hydration(target, t288, anchor);
        
        			insert_hydration(target, t289, anchor);
        
        			insert_hydration(target, br0, anchor);
        
        			insert_hydration(target, t290, anchor);
        
        			mount_component(equation35, target, anchor);
        
        			insert_hydration(target, t291, anchor);
        
        			mount_component(range6, target, anchor);
        
        			insert_hydration(target, t292, anchor);
        
        			insert_hydration(target, t293, anchor);
        
        			insert_hydration(target, t294, anchor);
        
        			mount_component(equation36, target, anchor);
        
        			insert_hydration(target, t295, anchor);
        
        			mount_component(range7, target, anchor);
        
        			insert_hydration(target, t296, anchor);
        
        			insert_hydration(target, t297, anchor);
        
        			insert_hydration(target, t298, anchor);
        
        			insert_hydration(target, br1, anchor);
        
        			insert_hydration(target, t299, anchor);
        
        			insert_hydration(target, br2, anchor);
        
        			insert_hydration(target, t300, anchor);
        
        			mount_component(checkbox2, target, anchor);
        
        			insert_hydration(target, t301, anchor);
        
        			mount_component(checkbox3, target, anchor);
        
        			insert_hydration(target, t302, anchor);
        
        			mount_component(sketch3, target, anchor);
        
        			insert_hydration(target, t303, anchor);
        
        			insert_hydration(target, p32, anchor);
        
        			insert_hydration(target, t305, anchor);
        
        			if_blocks_3[current_block_type_index_3].m(target, anchor);
        
        			insert_hydration(target, t306, anchor);
        
        			insert_hydration(target, p33, anchor);
        
        			insert_hydration(target, t318, anchor);
        
        			insert_hydration(target, h31, anchor);
        
        			insert_hydration(target, t320, anchor);
        
        			insert_hydration(target, p34, anchor);
        
        			append_hydration(p34, t321);
        
        			append_hydration(p34, em51);
        
        			append_hydration(p34, t323);
        
        			append_hydration(p34, em52);
        
        			append_hydration(p34, t325);
        
        			append_hydration(p34, em53);
        
        			append_hydration(p34, t327);
        
        			append_hydration(p34, em54);
        
        			append_hydration(p34, t329);
        
        			append_hydration(p34, em55);
        
        			append_hydration(p34, t331);
        
        			append_hydration(p34, em56);
        
        			append_hydration(p34, t333);
        
        			mount_component(equation37, p34, null);
        
        			append_hydration(p34, t334);
        
        			insert_hydration(target, t335, anchor);
        
        			insert_hydration(target, p35, anchor);
        
        			append_hydration(p35, em57);
        
        			append_hydration(p35, t337);
        
        			mount_component(range8, p35, null);
        
        			append_hydration(p35, t338);
        
        			append_hydration(p35, t339);
        
        			append_hydration(p35, t340);
        
        			insert_hydration(target, t341, anchor);
        
        			mount_component(sketch4, target, anchor);
        
        			insert_hydration(target, t342, anchor);
        
        			insert_hydration(target, br3, anchor);
        
        			insert_hydration(target, t343, anchor);
        
        			if_blocks_4[current_block_type_index_4].m(target, anchor);
        
        			insert_hydration(target, t344, anchor);
        
        			insert_hydration(target, p36, anchor);
        
        			insert_hydration(target, t354, anchor);
        
        			insert_hydration(target, h32, anchor);
        
        			insert_hydration(target, t356, anchor);
        
        			insert_hydration(target, p37, anchor);
        
        			insert_hydration(target, t362, anchor);
        
        			insert_hydration(target, h42, anchor);
        
        			insert_hydration(target, t364, anchor);
        
        			mount_component(equation38, target, anchor);
        
        			insert_hydration(target, t365, anchor);
        
        			mount_component(equation39, target, anchor);
        
        			insert_hydration(target, t366, anchor);
        
        			mount_component(range9, target, anchor);
        
        			insert_hydration(target, t367, anchor);
        
        			insert_hydration(target, t368, anchor);
        
        			insert_hydration(target, t369, anchor);
        
        			mount_component(equation40, target, anchor);
        
        			insert_hydration(target, t370, anchor);
        
        			mount_component(range10, target, anchor);
        
        			insert_hydration(target, t371, anchor);
        
        			insert_hydration(target, t372, anchor);
        
        			insert_hydration(target, t373, anchor);
        
        			insert_hydration(target, br4, anchor);
        
        			insert_hydration(target, t374, anchor);
        
        			mount_component(equation41, target, anchor);
        
        			insert_hydration(target, t375, anchor);
        
        			mount_component(equation42, target, anchor);
        
        			insert_hydration(target, t376, anchor);
        
        			mount_component(range11, target, anchor);
        
        			insert_hydration(target, t377, anchor);
        
        			insert_hydration(target, t378, anchor);
        
        			insert_hydration(target, t379, anchor);
        
        			mount_component(equation43, target, anchor);
        
        			insert_hydration(target, t380, anchor);
        
        			mount_component(range12, target, anchor);
        
        			insert_hydration(target, t381, anchor);
        
        			insert_hydration(target, t382, anchor);
        
        			insert_hydration(target, t383, anchor);
        
        			mount_component(sketch5, target, anchor);
        
        			insert_hydration(target, t384, anchor);
        
        			insert_hydration(target, p38, anchor);
        
        			insert_hydration(target, t400, anchor);
        
        			insert_hydration(target, p39, anchor);
        
        			insert_hydration(target, t410, anchor);
        
        			insert_hydration(target, p40, anchor);
        
        			insert_hydration(target, t418, anchor);
        
        			insert_hydration(target, p41, anchor);
        
        			append_hydration(p41, t419);
        
        			mount_component(equation44, p41, null);
        
        			append_hydration(p41, t420);
        
        			insert_hydration(target, t421, anchor);
        
        			if_blocks_5[current_block_type_index_5].m(target, anchor);
        
        			insert_hydration(target, t422, anchor);
        
        			insert_hydration(target, h43, anchor);
        
        			insert_hydration(target, t424, anchor);
        
        			if_blocks_6[current_block_type_index_6].m(target, anchor);
        
        			insert_hydration(target, t425, anchor);
        
        			insert_hydration(target, h13, anchor);
        
        			insert_hydration(target, t427, anchor);
        
        			insert_hydration(target, h22, anchor);
        
        			insert_hydration(target, t429, anchor);
        
        			insert_hydration(target, p42, anchor);
        
        			append_hydration(p42, t430);
        
        			append_hydration(p42, em62);
        
        			append_hydration(p42, t432);
        
        			mount_component(equation45, p42, null);
        
        			append_hydration(p42, t433);
        
        			insert_hydration(target, t434, anchor);
        
        			insert_hydration(target, p43, anchor);
        
        			append_hydration(p43, t435);
        
        			append_hydration(p43, em63);
        
        			append_hydration(p43, t437);
        
        			append_hydration(p43, em64);
        
        			append_hydration(p43, t439);
        
        			append_hydration(p43, em65);
        
        			append_hydration(p43, t441);
        
        			append_hydration(p43, em66);
        
        			append_hydration(p43, t443);
        
        			append_hydration(p43, em67);
        
        			append_hydration(p43, t445);
        
        			append_hydration(p43, em68);
        
        			append_hydration(p43, t447);
        
        			append_hydration(p43, em69);
        
        			append_hydration(p43, t449);
        
        			mount_component(equation46, p43, null);
        
        			append_hydration(p43, t450);
        
        			mount_component(equation47, p43, null);
        
        			append_hydration(p43, t451);
        
        			mount_component(equation48, p43, null);
        
        			append_hydration(p43, t452);
        
        			append_hydration(p43, em70);
        
        			append_hydration(p43, t454);
        
        			mount_component(equation49, p43, null);
        
        			append_hydration(p43, t455);
        
        			mount_component(equation50, p43, null);
        
        			append_hydration(p43, t456);
        
        			append_hydration(p43, strong23);
        
        			append_hydration(p43, t458);
        
        			append_hydration(p43, em71);
        
        			append_hydration(p43, t460);
        
        			mount_component(equation51, p43, null);
        
        			append_hydration(p43, t461);
        
        			append_hydration(p43, em72);
        
        			append_hydration(p43, t463);
        
        			append_hydration(p43, em73);
        
        			append_hydration(p43, t465);
        
        			append_hydration(p43, sup2);
        
        			append_hydration(p43, t467);
        
        			insert_hydration(target, t468, anchor);
        
        			insert_hydration(target, p44, anchor);
        
        			append_hydration(p44, t469);
        
        			append_hydration(p44, strong24);
        
        			append_hydration(p44, t471);
        
        			mount_component(equation52, p44, null);
        
        			append_hydration(p44, t472);
        
        			mount_component(equation53, p44, null);
        
        			append_hydration(p44, t473);
        
        			mount_component(equation54, p44, null);
        
        			append_hydration(p44, t474);
        
        			append_hydration(p44, em74);
        
        			append_hydration(p44, t476);
        
        			mount_component(equation55, p44, null);
        
        			append_hydration(p44, t477);
        
        			mount_component(equation56, p44, null);
        
        			append_hydration(p44, t478);
        
        			mount_component(equation57, p44, null);
        
        			append_hydration(p44, t479);
        
        			insert_hydration(target, t480, anchor);
        
        			mount_component(equation58, target, anchor);
        
        			insert_hydration(target, t481, anchor);
        
        			mount_component(range13, target, anchor);
        
        			insert_hydration(target, t482, anchor);
        
        			insert_hydration(target, t483, anchor);
        
        			insert_hydration(target, t484, anchor);
        
        			mount_component(select0, target, anchor);
        
        			insert_hydration(target, t485, anchor);
        
        			mount_component(sketch6, target, anchor);
        
        			insert_hydration(target, t486, anchor);
        
        			insert_hydration(target, p45, anchor);
        
        			append_hydration(p45, t487);
        
        			append_hydration(p45, strong25);
        
        			append_hydration(p45, t489);
        
        			append_hydration(p45, em75);
        
        			append_hydration(p45, t491);
        
        			mount_component(equation59, p45, null);
        
        			append_hydration(p45, t492);
        
        			insert_hydration(target, t493, anchor);
        
        			insert_hydration(target, p46, anchor);
        
        			insert_hydration(target, t497, anchor);
        
        			insert_hydration(target, p47, anchor);
        
        			append_hydration(p47, t498);
        
        			append_hydration(p47, em77);
        
        			append_hydration(p47, t500);
        
        			mount_component(equation60, p47, null);
        
        			append_hydration(p47, t501);
        
        			mount_component(equation61, p47, null);
        
        			append_hydration(p47, t502);
        
        			append_hydration(p47, em78);
        
        			append_hydration(p47, t504);
        
        			append_hydration(p47, em79);
        
        			append_hydration(p47, t506);
        
        			insert_hydration(target, t507, anchor);
        
        			insert_hydration(target, h23, anchor);
        
        			insert_hydration(target, t510, anchor);
        
        			insert_hydration(target, p48, anchor);
        
        			insert_hydration(target, t512, anchor);
        
        			insert_hydration(target, p49, anchor);
        
        			append_hydration(p49, t513);
        
        			append_hydration(p49, em81);
        
        			append_hydration(p49, t515);
        
        			append_hydration(p49, strong26);
        
        			append_hydration(p49, t517);
        
        			mount_component(equation62, p49, null);
        
        			append_hydration(p49, t518);
        
        			mount_component(equation63, p49, null);
        
        			append_hydration(p49, t519);
        
        			mount_component(equation64, p49, null);
        
        			append_hydration(p49, t520);
        
        			mount_component(equation65, p49, null);
        
        			append_hydration(p49, t521);
        
        			mount_component(equation66, p49, null);
        
        			append_hydration(p49, t522);
        
        			append_hydration(p49, em82);
        
        			append_hydration(p49, t524);
        
        			append_hydration(p49, em83);
        
        			append_hydration(p49, t526);
        
        			insert_hydration(target, t527, anchor);
        
        			insert_hydration(target, p50, anchor);
        
        			append_hydration(p50, t528);
        
        			mount_component(equation67, p50, null);
        
        			append_hydration(p50, t529);
        
        			mount_component(equation68, p50, null);
        
        			append_hydration(p50, t530);
        
        			insert_hydration(target, t531, anchor);
        
        			insert_hydration(target, p51, anchor);
        
        			append_hydration(p51, t532);
        
        			mount_component(equation69, p51, null);
        
        			append_hydration(p51, t533);
        
        			insert_hydration(target, t534, anchor);
        
        			insert_hydration(target, p52, anchor);
        
        			append_hydration(p52, t535);
        
        			mount_component(equation70, p52, null);
        
        			append_hydration(p52, t536);
        
        			mount_component(equation71, p52, null);
        
        			append_hydration(p52, t537);
        
        			append_hydration(p52, em84);
        
        			append_hydration(p52, t539);
        
        			append_hydration(p52, strong27);
        
        			append_hydration(p52, t541);
        
        			insert_hydration(target, t542, anchor);
        
        			insert_hydration(target, p53, anchor);
        
        			append_hydration(p53, em85);
        
        			append_hydration(p53, t544);
        
        			mount_component(range14, p53, null);
        
        			append_hydration(p53, t545);
        
        			append_hydration(p53, t546);
        
        			append_hydration(p53, t547);
        
        			append_hydration(p53, em86);
        
        			append_hydration(p53, t549);
        
        			mount_component(range15, p53, null);
        
        			append_hydration(p53, t550);
        
        			append_hydration(p53, t551);
        
        			append_hydration(p53, t552);
        
        			append_hydration(p53, br5);
        
        			append_hydration(p53, t553);
        
        			append_hydration(p53, em87);
        
        			append_hydration(p53, t555);
        
        			mount_component(equation72, p53, null);
        
        			append_hydration(p53, t556);
        
        			mount_component(range16, p53, null);
        
        			append_hydration(p53, t557);
        
        			append_hydration(p53, t558);
        
        			append_hydration(p53, t559);
        
        			mount_component(equation73, p53, null);
        
        			append_hydration(p53, t560);
        
        			append_hydration(p53, em88);
        
        			append_hydration(p53, t562);
        
        			mount_component(equation74, p53, null);
        
        			append_hydration(p53, t563);
        
        			mount_component(range17, p53, null);
        
        			append_hydration(p53, t564);
        
        			append_hydration(p53, t565);
        
        			append_hydration(p53, t566);
        
        			insert_hydration(target, t567, anchor);
        
        			mount_component(checkbox4, target, anchor);
        
        			insert_hydration(target, t568, anchor);
        
        			mount_component(sketch7, target, anchor);
        
        			insert_hydration(target, t569, anchor);
        
        			insert_hydration(target, p54, anchor);
        
        			insert_hydration(target, t571, anchor);
        
        			mount_component(equation75, target, anchor);
        
        			insert_hydration(target, t572, anchor);
        
        			insert_hydration(target, p55, anchor);
        
        			insert_hydration(target, t574, anchor);
        
        			insert_hydration(target, h14, anchor);
        
        			insert_hydration(target, t576, anchor);
        
        			insert_hydration(target, p56, anchor);
        
        			append_hydration(p56, t577);
        
        			append_hydration(p56, em89);
        
        			append_hydration(p56, t579);
        
        			append_hydration(p56, em90);
        
        			append_hydration(p56, t581);
        
        			append_hydration(p56, em91);
        
        			append_hydration(p56, t583);
        
        			mount_component(equation76, p56, null);
        
        			append_hydration(p56, t584);
        
        			mount_component(equation77, p56, null);
        
        			append_hydration(p56, t585);
        
        			mount_component(equation78, p56, null);
        
        			append_hydration(p56, t586);
        
        			insert_hydration(target, t587, anchor);
        
        			insert_hydration(target, h24, anchor);
        
        			insert_hydration(target, t589, anchor);
        
        			insert_hydration(target, p57, anchor);
        
        			append_hydration(p57, t590);
        
        			append_hydration(p57, em92);
        
        			append_hydration(p57, t592);
        
        			mount_component(equation79, p57, null);
        
        			append_hydration(p57, t593);
        
        			append_hydration(p57, em93);
        
        			append_hydration(p57, t595);
        
        			mount_component(equation80, p57, null);
        
        			append_hydration(p57, t596);
        
        			mount_component(equation81, p57, null);
        
        			append_hydration(p57, t597);
        
        			insert_hydration(target, t598, anchor);
        
        			insert_hydration(target, p58, anchor);
        
        			append_hydration(p58, t599);
        
        			mount_component(equation82, p58, null);
        
        			append_hydration(p58, t600);
        
        			mount_component(equation83, p58, null);
        
        			append_hydration(p58, t601);
        
        			insert_hydration(target, t602, anchor);
        
        			mount_component(equation84, target, anchor);
        
        			insert_hydration(target, t603, anchor);
        
        			mount_component(range18, target, anchor);
        
        			insert_hydration(target, t604, anchor);
        
        			insert_hydration(target, t605, anchor);
        
        			insert_hydration(target, t606, anchor);
        
        			mount_component(equation85, target, anchor);
        
        			insert_hydration(target, t607, anchor);
        
        			mount_component(range19, target, anchor);
        
        			insert_hydration(target, t608, anchor);
        
        			insert_hydration(target, t609, anchor);
        
        			insert_hydration(target, t610, anchor);
        
        			mount_component(select1, target, anchor);
        
        			insert_hydration(target, t611, anchor);
        
        			mount_component(sketch8, target, anchor);
        
        			insert_hydration(target, t612, anchor);
        
        			insert_hydration(target, h25, anchor);
        
        			insert_hydration(target, t614, anchor);
        
        			insert_hydration(target, p59, anchor);
        
        			insert_hydration(target, t620, anchor);
        
        			insert_hydration(target, p60, anchor);
        
        			append_hydration(p60, t621);
        
        			append_hydration(p60, strong30);
        
        			append_hydration(p60, t623);
        
        			mount_component(equation86, p60, null);
        
        			append_hydration(p60, t624);
        
        			mount_component(equation87, p60, null);
        
        			insert_hydration(target, t625, anchor);
        
        			insert_hydration(target, p61, anchor);
        
        			append_hydration(p61, t626);
        
        			append_hydration(p61, em94);
        
        			append_hydration(p61, t628);
        
        			mount_component(equation88, p61, null);
        
        			append_hydration(p61, t629);
        
        			append_hydration(p61, em95);
        
        			append_hydration(p61, t631);
        
        			insert_hydration(target, t632, anchor);
        
        			mount_component(equation89, target, anchor);
        
        			insert_hydration(target, t633, anchor);
        
        			mount_component(equation90, target, anchor);
        
        			insert_hydration(target, t634, anchor);
        
        			mount_component(equation91, target, anchor);
        
        			insert_hydration(target, t635, anchor);
        
        			mount_component(equation92, target, anchor);
        
        			insert_hydration(target, t636, anchor);
        
        			insert_hydration(target, p62, anchor);
        
        			append_hydration(p62, t637);
        
        			mount_component(equation93, p62, null);
        
        			append_hydration(p62, t638);
        
        			append_hydration(p62, strong31);
        
        			insert_hydration(target, t640, anchor);
        
        			insert_hydration(target, p63, anchor);
        
        			insert_hydration(target, t642, anchor);
        
        			insert_hydration(target, h33, anchor);
        
        			insert_hydration(target, t644, anchor);
        
        			insert_hydration(target, p64, anchor);
        
        			append_hydration(p64, t645);
        
        			append_hydration(p64, strong32);
        
        			append_hydration(p64, t647);
        
        			append_hydration(p64, em96);
        
        			append_hydration(p64, t649);
        
        			append_hydration(p64, em97);
        
        			append_hydration(p64, t651);
        
        			mount_component(equation94, p64, null);
        
        			append_hydration(p64, t652);
        
        			mount_component(equation95, p64, null);
        
        			append_hydration(p64, t653);
        
        			insert_hydration(target, t654, anchor);
        
        			insert_hydration(target, p65, anchor);
        
        			append_hydration(p65, t655);
        
        			mount_component(actionelement0, p65, null);
        
        			append_hydration(p65, t656);
        
        			mount_component(actionelement1, p65, null);
        
        			append_hydration(p65, t657);
        
        			insert_hydration(target, t658, anchor);
        
        			insert_hydration(target, p66, anchor);
        
        			insert_hydration(target, t664, anchor);
        
        			insert_hydration(target, p67, anchor);
        
        			append_hydration(p67, t665);
        
        			mount_component(equation96, p67, null);
        
        			append_hydration(p67, t666);
        
        			mount_component(equation97, p67, null);
        
        			append_hydration(p67, t667);
        
        			insert_hydration(target, t668, anchor);
        
        			insert_hydration(target, h34, anchor);
        
        			insert_hydration(target, t670, anchor);
        
        			insert_hydration(target, p68, anchor);
        
        			insert_hydration(target, t676, anchor);
        
        			insert_hydration(target, p69, anchor);
        
        			append_hydration(p69, t677);
        
        			mount_component(actionelement2, p69, null);
        
        			append_hydration(p69, t678);
        
        			mount_component(actionelement3, p69, null);
        
        			append_hydration(p69, t679);
        
        			insert_hydration(target, t680, anchor);
        
        			insert_hydration(target, p70, anchor);
        
        			append_hydration(p70, t681);
        
        			mount_component(equation98, p70, null);
        
        			append_hydration(p70, t682);
        
        			mount_component(equation99, p70, null);
        
        			append_hydration(p70, t683);
        
        			insert_hydration(target, t684, anchor);
        
        			insert_hydration(target, p71, anchor);
        
        			append_hydration(p71, t685);
        
        			mount_component(equation100, p71, null);
        
        			append_hydration(p71, t686);
        
        			mount_component(equation101, p71, null);
        
        			append_hydration(p71, t687);
        
        			insert_hydration(target, t688, anchor);
        
        			insert_hydration(target, h26, anchor);
        
        			insert_hydration(target, t690, anchor);
        
        			insert_hydration(target, p72, anchor);
        
        			insert_hydration(target, t694, anchor);
        
        			insert_hydration(target, p73, anchor);
        
        			insert_hydration(target, t698, anchor);
        
        			insert_hydration(target, ul1, anchor);
        
        			insert_hydration(target, t710, anchor);
        
        			mount_component(sketch9, target, anchor);
        
        			insert_hydration(target, t711, anchor);
        
        			insert_hydration(target, p74, anchor);
        
        			insert_hydration(target, t713, anchor);
        
        			mount_component(equation102, target, anchor);
        
        			insert_hydration(target, t714, anchor);
        
        			insert_hydration(target, p75, anchor);
        
        			append_hydration(p75, t715);
        
        			mount_component(equation103, p75, null);
        
        			append_hydration(p75, t716);
        
        			mount_component(equation104, p75, null);
        
        			append_hydration(p75, t717);
        
        			append_hydration(p75, strong37);
        
        			append_hydration(p75, t719);
        
        			append_hydration(p75, strong38);
        
        			append_hydration(p75, t721);
        
        			mount_component(equation105, p75, null);
        
        			append_hydration(p75, t722);
        
        			append_hydration(p75, strong39);
        
        			append_hydration(p75, t724);
        
        			insert_hydration(target, t725, anchor);
        
        			mount_component(equation106, target, anchor);
        
        			insert_hydration(target, t726, anchor);
        
        			insert_hydration(target, p76, anchor);
        
        			append_hydration(p76, t727);
        
        			mount_component(equation107, p76, null);
        
        			append_hydration(p76, t728);
        
        			mount_component(equation108, p76, null);
        
        			append_hydration(p76, t729);
        
        			mount_component(equation109, p76, null);
        
        			append_hydration(p76, t730);
        
        			mount_component(equation110, p76, null);
        
        			append_hydration(p76, t731);
        
        			mount_component(equation111, p76, null);
        
        			append_hydration(p76, t732);
        
        			mount_component(equation112, p76, null);
        
        			append_hydration(p76, t733);
        
        			insert_hydration(target, t734, anchor);
        
        			insert_hydration(target, p77, anchor);
        
        			insert_hydration(target, t736, anchor);
        
        			insert_hydration(target, p78, anchor);
        
        			insert_hydration(target, t738, anchor);
        
        			mount_component(equation113, target, anchor);
        
        			insert_hydration(target, t739, anchor);
        
        			mount_component(equation114, target, anchor);
        
        			insert_hydration(target, t740, anchor);
        
        			insert_hydration(target, p79, anchor);
        
        			append_hydration(p79, t741);
        
        			mount_component(equation115, p79, null);
        
        			append_hydration(p79, t742);
        
        			insert_hydration(target, t743, anchor);
        
        			insert_hydration(target, p80, anchor);
        
        			append_hydration(p80, t744);
        
        			append_hydration(p80, strong40);
        
        			append_hydration(p80, t746);
        
        			append_hydration(p80, strong41);
        
        			append_hydration(p80, t748);
        
        			append_hydration(p80, strong42);
        
        			append_hydration(p80, t750);
        
        			mount_component(equation116, p80, null);
        
        			append_hydration(p80, t751);
        
        			insert_hydration(target, t752, anchor);
        
        			insert_hydration(target, p81, anchor);
        
        			insert_hydration(target, t756, anchor);
        
        			mount_component(equation117, target, anchor);
        
        			insert_hydration(target, t757, anchor);
        
        			insert_hydration(target, p82, anchor);
        
        			append_hydration(p82, t758);
        
        			mount_component(equation118, p82, null);
        
        			append_hydration(p82, t759);
        
        			mount_component(equation119, p82, null);
        
        			append_hydration(p82, t760);
        
        			mount_component(equation120, p82, null);
        
        			append_hydration(p82, t761);
        
        			append_hydration(p82, strong44);
        
        			append_hydration(p82, t763);
        
        			insert_hydration(target, t764, anchor);
        
        			insert_hydration(target, p83, anchor);
        
        			insert_hydration(target, t766, anchor);
        
        			insert_hydration(target, h15, anchor);
        
        			insert_hydration(target, t768, anchor);
        
        			insert_hydration(target, p84, anchor);
        
        			append_hydration(p84, t769);
        
        			append_hydration(p84, em102);
        
        			append_hydration(p84, t771);
        
        			mount_component(equation121, p84, null);
        
        			append_hydration(p84, t772);
        
        			append_hydration(p84, em103);
        
        			append_hydration(p84, t774);
        
        			insert_hydration(target, t775, anchor);
        
        			insert_hydration(target, p85, anchor);
        
        			append_hydration(p85, t776);
        
        			append_hydration(p85, em104);
        
        			append_hydration(p85, t778);
        
        			append_hydration(p85, strong45);
        
        			append_hydration(p85, t780);
        
        			append_hydration(p85, strong46);
        
        			append_hydration(p85, t782);
        
        			append_hydration(p85, em105);
        
        			append_hydration(p85, t784);
        
        			mount_component(equation122, p85, null);
        
        			append_hydration(p85, t785);
        
        			append_hydration(p85, em106);
        
        			append_hydration(p85, t787);
        
        			mount_component(equation123, p85, null);
        
        			append_hydration(p85, t788);
        
        			insert_hydration(target, t789, anchor);
        
        			insert_hydration(target, p86, anchor);
        
        			insert_hydration(target, t792, anchor);
        
        			insert_hydration(target, p87, anchor);
        
        			insert_hydration(target, t795, anchor);
        
        			insert_hydration(target, h35, anchor);
        
        			insert_hydration(target, t797, anchor);
        
        			insert_hydration(target, p88, anchor);
        
        			insert_hydration(target, t799, anchor);
        
        			insert_hydration(target, p89, anchor);
        
        			insert_hydration(target, t805, anchor);
        
        			insert_hydration(target, p90, anchor);
        
        			insert_hydration(target, t811, anchor);
        
        			insert_hydration(target, p91, anchor);
        
        			insert_hydration(target, t817, anchor);
        
        			insert_hydration(target, p92, anchor);
        
        			append_hydration(p92, t818);
        
        			append_hydration(p92, em111);
        
        			append_hydration(p92, t820);
        
        			append_hydration(p92, em112);
        
        			append_hydration(p92, t822);
        
        			mount_component(equation124, p92, null);
        
        			append_hydration(p92, t823);
        
        			insert_hydration(target, t824, anchor);
        
        			insert_hydration(target, p93, anchor);
        
        			insert_hydration(target, t828, anchor);
        
        			insert_hydration(target, h16, anchor);
        
        			insert_hydration(target, t830, anchor);
        
        			insert_hydration(target, p94, anchor);
        
        			insert_hydration(target, t832, anchor);
        
        			insert_hydration(target, p95, anchor);
        
        			append_hydration(p95, t833);
        
        			append_hydration(p95, em113);
        
        			append_hydration(p95, t835);
        
        			append_hydration(p95, em114);
        
        			append_hydration(p95, t837);
        
        			mount_component(equation125, p95, null);
        
        			append_hydration(p95, t838);
        
        			mount_component(equation126, p95, null);
        
        			append_hydration(p95, t839);
        
        			append_hydration(p95, em115);
        
        			append_hydration(p95, t841);
        
        			mount_component(equation127, p95, null);
        
        			append_hydration(p95, t842);
        
        			append_hydration(p95, em116);
        
        			append_hydration(p95, t844);
        
        			append_hydration(p95, em117);
        
        			append_hydration(p95, t846);
        
        			insert_hydration(target, t847, anchor);
        
        			insert_hydration(target, p96, anchor);
        
        			append_hydration(p96, t848);
        
        			append_hydration(p96, strong52);
        
        			append_hydration(p96, t850);
        
        			mount_component(equation128, p96, null);
        
        			append_hydration(p96, t851);
        
        			insert_hydration(target, t852, anchor);
        
        			insert_hydration(target, p97, anchor);
        
        			append_hydration(p97, t853);
        
        			mount_component(equation129, p97, null);
        
        			append_hydration(p97, t854);
        
        			mount_component(equation130, p97, null);
        
        			append_hydration(p97, t855);
        
        			mount_component(equation131, p97, null);
        
        			append_hydration(p97, t856);
        
        			mount_component(equation132, p97, null);
        
        			append_hydration(p97, t857);
        
        			append_hydration(p97, em118);
        
        			append_hydration(p97, t859);
        
        			mount_component(equation133, p97, null);
        
        			append_hydration(p97, t860);
        
        			mount_component(equation134, p97, null);
        
        			append_hydration(p97, t861);
        
        			append_hydration(p97, em119);
        
        			append_hydration(p97, t863);
        
        			mount_component(equation135, p97, null);
        
        			append_hydration(p97, t864);
        
        			mount_component(equation136, p97, null);
        
        			append_hydration(p97, t865);
        
        			append_hydration(p97, em120);
        
        			append_hydration(p97, t867);
        
        			mount_component(equation137, p97, null);
        
        			append_hydration(p97, t868);
        
        			insert_hydration(target, t869, anchor);
        
        			insert_hydration(target, p98, anchor);
        
        			append_hydration(p98, t870);
        
        			append_hydration(p98, em121);
        
        			append_hydration(p98, t872);
        
        			mount_component(equation138, p98, null);
        
        			append_hydration(p98, t873);
        
        			mount_component(equation139, p98, null);
        
        			append_hydration(p98, t874);
        
        			mount_component(equation140, p98, null);
        
        			append_hydration(p98, t875);
        
        			append_hydration(p98, em122);
        
        			append_hydration(p98, t877);
        
        			mount_component(equation141, p98, null);
        
        			append_hydration(p98, t878);
        
        			mount_component(equation142, p98, null);
        
        			append_hydration(p98, t879);
        
        			append_hydration(p98, em123);
        
        			append_hydration(p98, t881);
        
        			append_hydration(p98, em124);
        
        			append_hydration(p98, t883);
        
        			insert_hydration(target, t884, anchor);
        
        			insert_hydration(target, p99, anchor);
        
        			insert_hydration(target, t886, anchor);
        
        			mount_component(checkbox5, target, anchor);
        
        			insert_hydration(target, t887, anchor);
        
        			mount_component(equation143, target, anchor);
        
        			insert_hydration(target, t888, anchor);
        
        			mount_component(dynamic2, target, anchor);
        
        			insert_hydration(target, t889, anchor);
        
        			mount_component(equation144, target, anchor);
        
        			insert_hydration(target, t890, anchor);
        
        			mount_component(dynamic3, target, anchor);
        
        			insert_hydration(target, t891, anchor);
        
        			mount_component(equation145, target, anchor);
        
        			insert_hydration(target, t892, anchor);
        
        			mount_component(dynamic4, target, anchor);
        
        			insert_hydration(target, t893, anchor);
        
        			mount_component(equation146, target, anchor);
        
        			insert_hydration(target, t894, anchor);
        
        			mount_component(dynamic5, target, anchor);
        
        			insert_hydration(target, t895, anchor);
        
        			insert_hydration(target, br6, anchor);
        
        			insert_hydration(target, t896, anchor);
        
        			mount_component(checkbox6, target, anchor);
        
        			insert_hydration(target, t897, anchor);
        
        			mount_component(equation147, target, anchor);
        
        			insert_hydration(target, t898, anchor);
        
        			mount_component(dynamic6, target, anchor);
        
        			insert_hydration(target, t899, anchor);
        
        			mount_component(equation148, target, anchor);
        
        			insert_hydration(target, t900, anchor);
        
        			mount_component(dynamic7, target, anchor);
        
        			insert_hydration(target, t901, anchor);
        
        			mount_component(equation149, target, anchor);
        
        			insert_hydration(target, t902, anchor);
        
        			mount_component(dynamic8, target, anchor);
        
        			insert_hydration(target, t903, anchor);
        
        			mount_component(equation150, target, anchor);
        
        			insert_hydration(target, t904, anchor);
        
        			mount_component(dynamic9, target, anchor);
        
        			insert_hydration(target, t905, anchor);
        
        			insert_hydration(target, br7, anchor);
        
        			insert_hydration(target, t906, anchor);
        
        			mount_component(checkbox7, target, anchor);
        
        			insert_hydration(target, t907, anchor);
        
        			mount_component(equation151, target, anchor);
        
        			insert_hydration(target, t908, anchor);
        
        			mount_component(dynamic10, target, anchor);
        
        			insert_hydration(target, t909, anchor);
        
        			mount_component(equation152, target, anchor);
        
        			insert_hydration(target, t910, anchor);
        
        			mount_component(dynamic11, target, anchor);
        
        			insert_hydration(target, t911, anchor);
        
        			mount_component(equation153, target, anchor);
        
        			insert_hydration(target, t912, anchor);
        
        			mount_component(dynamic12, target, anchor);
        
        			insert_hydration(target, t913, anchor);
        
        			mount_component(equation154, target, anchor);
        
        			insert_hydration(target, t914, anchor);
        
        			mount_component(dynamic13, target, anchor);
        
        			insert_hydration(target, t915, anchor);
        
        			insert_hydration(target, br8, anchor);
        
        			insert_hydration(target, t916, anchor);
        
        			insert_hydration(target, p100, anchor);
        
        			insert_hydration(target, t918, anchor);
        
        			mount_component(equation155, target, anchor);
        
        			insert_hydration(target, t919, anchor);
        
        			insert_hydration(target, p101, anchor);
        
        			insert_hydration(target, t923, anchor);
        
        			mount_component(equation156, target, anchor);
        
        			insert_hydration(target, t924, anchor);
        
        			insert_hydration(target, h36, anchor);
        
        			insert_hydration(target, t926, anchor);
        
        			mount_component(sketch10, target, anchor);
        
        			insert_hydration(target, t927, anchor);
        
        			insert_hydration(target, span22, anchor);
        
        			insert_hydration(target, t928, anchor);
        
        			insert_hydration(target, h44, anchor);
        
        			insert_hydration(target, t930, anchor);
        
        			mount_component(checkbox8, target, anchor);
        
        			insert_hydration(target, t931, anchor);
        
        			insert_hydration(target, br9, anchor);
        
        			insert_hydration(target, t932, anchor);
        
        			mount_component(checkbox9, target, anchor);
        
        			insert_hydration(target, t933, anchor);
        
        			insert_hydration(target, br10, anchor);
        
        			insert_hydration(target, t934, anchor);
        
        			mount_component(checkbox10, target, anchor);
        
        			insert_hydration(target, t935, anchor);
        
        			insert_hydration(target, br11, anchor);
        
        			insert_hydration(target, t936, anchor);
        
        			insert_hydration(target, h45, anchor);
        
        			insert_hydration(target, t938, anchor);
        
        			insert_hydration(target, p102, anchor);
        
        			append_hydration(p102, em126);
        
        			append_hydration(p102, t940);
        
        			mount_component(range20, p102, null);
        
        			append_hydration(p102, t941);
        
        			append_hydration(p102, t942);
        
        			append_hydration(p102, t943);
        
        			insert_hydration(target, t944, anchor);
        
        			mount_component(checkbox11, target, anchor);
        
        			insert_hydration(target, t945, anchor);
        
        			insert_hydration(target, br12, anchor);
        
        			insert_hydration(target, t946, anchor);
        
        			insert_hydration(target, br13, anchor);
        
        			insert_hydration(target, t947, anchor);
        
        			mount_component(actionelement4, target, anchor);
        
        			insert_hydration(target, t948, anchor);
        
        			insert_hydration(target, h37, anchor);
        
        			insert_hydration(target, t950, anchor);
        
        			if_blocks_7[current_block_type_index_7].m(target, anchor);
        
        			insert_hydration(target, t951, anchor);
        
        			insert_hydration(target, h17, anchor);
        
        			insert_hydration(target, t953, anchor);
        
        			insert_hydration(target, p103, anchor);
        
        			insert_hydration(target, t955, anchor);
        
        			insert_hydration(target, p104, anchor);
        
        			append_hydration(p104, t956);
        
        			append_hydration(p104, strong53);
        
        			append_hydration(p104, t958);
        
        			mount_component(equation157, p104, null);
        
        			append_hydration(p104, t959);
        
        			mount_component(equation158, p104, null);
        
        			append_hydration(p104, t960);
        
        			insert_hydration(target, t961, anchor);
        
        			insert_hydration(target, p105, anchor);
        
        			insert_hydration(target, t966, anchor);
        
        			insert_hydration(target, h27, anchor);
        
        			insert_hydration(target, t968, anchor);
        
        			insert_hydration(target, p106, anchor);
        
        			append_hydration(p106, t969);
        
        			append_hydration(p106, code0);
        
        			append_hydration(p106, t971);
        
        			mount_component(equation159, p106, null);
        
        			append_hydration(p106, t972);
        
        			insert_hydration(target, t973, anchor);
        
        			insert_hydration(target, pre0, anchor);
        
        			html_tag.m(raw0_value, pre0);
        
        			insert_hydration(target, t974, anchor);
        
        			insert_hydration(target, p107, anchor);
        
        			insert_hydration(target, t982, anchor);
        
        			insert_hydration(target, p108, anchor);
        
        			insert_hydration(target, t984, anchor);
        
        			insert_hydration(target, h28, anchor);
        
        			insert_hydration(target, t986, anchor);
        
        			insert_hydration(target, p109, anchor);
        
        			insert_hydration(target, t990, anchor);
        
        			insert_hydration(target, p110, anchor);
        
        			insert_hydration(target, t994, anchor);
        
        			mount_component(staticcontainer, target, anchor);
        
        			insert_hydration(target, t995, anchor);
        
        			insert_hydration(target, p111, anchor);
        
        			insert_hydration(target, t999, anchor);
        
        			insert_hydration(target, p112, anchor);
        
        			insert_hydration(target, t1002, anchor);
        
        			mount_component(radio, target, anchor);
        
        			insert_hydration(target, t1003, anchor);
        
        			insert_hydration(target, t1004, anchor);
        
        			insert_hydration(target, t1005, anchor);
        
        			insert_hydration(target, p113, anchor);
        
        			append_hydration(p113, em134);
        
        			append_hydration(p113, t1007);
        
        			mount_component(range21, p113, null);
        
        			insert_hydration(target, t1008, anchor);
        
        			mount_component(sketch11, target, anchor);
        
        			insert_hydration(target, t1009, anchor);
        
        			insert_hydration(target, h38, anchor);
        
        			insert_hydration(target, t1011, anchor);
        
        			insert_hydration(target, p114, anchor);
        
        			insert_hydration(target, t1021, anchor);
        
        			insert_hydration(target, h50, anchor);
        
        			insert_hydration(target, t1023, anchor);
        
        			insert_hydration(target, p115, anchor);
        
        			append_hydration(p115, t1024);
        
        			append_hydration(p115, em135);
        
        			append_hydration(p115, t1026);
        
        			mount_component(equation160, p115, null);
        
        			append_hydration(p115, t1027);
        
        			mount_component(equation161, p115, null);
        
        			append_hydration(p115, t1028);
        
        			mount_component(equation162, p115, null);
        
        			append_hydration(p115, t1029);
        
        			insert_hydration(target, t1030, anchor);
        
        			insert_hydration(target, h51, anchor);
        
        			insert_hydration(target, t1032, anchor);
        
        			insert_hydration(target, pre1, anchor);
        
        			html_tag_1.m(raw1_value, pre1);
        
        			insert_hydration(target, t1033, anchor);
        
        			insert_hydration(target, h39, anchor);
        
        			insert_hydration(target, t1035, anchor);
        
        			insert_hydration(target, p116, anchor);
        
        			append_hydration(p116, t1036);
        
        			append_hydration(p116, em136);
        
        			append_hydration(p116, t1038);
        
        			mount_component(equation163, p116, null);
        
        			append_hydration(p116, t1039);
        
        			append_hydration(p116, strong60);
        
        			append_hydration(p116, t1041);
        
        			mount_component(equation164, p116, null);
        
        			append_hydration(p116, t1042);
        
        			append_hydration(p116, strong61);
        
        			append_hydration(p116, t1044);
        
        			mount_component(equation165, p116, null);
        
        			append_hydration(p116, t1045);
        
        			insert_hydration(target, t1046, anchor);
        
        			insert_hydration(target, pre2, anchor);
        
        			html_tag_2.m(raw2_value, pre2);
        
        			insert_hydration(target, t1047, anchor);
        
        			insert_hydration(target, p117, anchor);
        
        			insert_hydration(target, t1049, anchor);
        
        			insert_hydration(target, p118, anchor);
        
        			insert_hydration(target, t1055, anchor);
        
        			insert_hydration(target, p119, anchor);
        
        			insert_hydration(target, t1059, anchor);
        
        			mount_component(equation166, target, anchor);
        
        			insert_hydration(target, t1060, anchor);
        
        			insert_hydration(target, p120, anchor);
        
        			append_hydration(p120, strong64);
        
        			append_hydration(p120, t1062);
        
        			mount_component(equation167, p120, null);
        
        			append_hydration(p120, t1063);
        
        			mount_component(equation168, p120, null);
        
        			append_hydration(p120, t1064);
        
        			insert_hydration(target, t1065, anchor);
        
        			insert_hydration(target, p121, anchor);
        
        			append_hydration(p121, strong65);
        
        			append_hydration(p121, t1067);
        
        			mount_component(equation169, p121, null);
        
        			append_hydration(p121, t1068);
        
        			mount_component(equation170, p121, null);
        
        			append_hydration(p121, t1069);
        
        			mount_component(equation171, p121, null);
        
        			append_hydration(p121, t1070);
        
        			append_hydration(p121, em137);
        
        			append_hydration(p121, t1072);
        
        			mount_component(equation172, p121, null);
        
        			append_hydration(p121, t1073);
        
        			mount_component(equation173, p121, null);
        
        			append_hydration(p121, t1074);
        
        			append_hydration(p121, em138);
        
        			append_hydration(p121, t1076);
        
        			insert_hydration(target, t1077, anchor);
        
        			insert_hydration(target, p122, anchor);
        
        			insert_hydration(target, t1081, anchor);
        
        			insert_hydration(target, pre3, anchor);
        
        			html_tag_3.m(raw3_value, pre3);
        
        			insert_hydration(target, t1082, anchor);
        
        			insert_hydration(target, p123, anchor);
        
        			insert_hydration(target, t1084, anchor);
        
        			insert_hydration(target, h29, anchor);
        
        			insert_hydration(target, t1086, anchor);
        
        			insert_hydration(target, p124, anchor);
        
        			append_hydration(p124, t1087);
        
        			append_hydration(p124, strong66);
        
        			append_hydration(p124, t1089);
        
        			mount_component(equation174, p124, null);
        
        			append_hydration(p124, t1090);
        
        			append_hydration(p124, em139);
        
        			append_hydration(p124, t1092);
        
        			append_hydration(p124, em140);
        
        			append_hydration(p124, t1094);
        
        			insert_hydration(target, t1095, anchor);
        
        			insert_hydration(target, p125, anchor);
        
        			insert_hydration(target, t1099, anchor);
        
        			insert_hydration(target, p126, anchor);
        
        			append_hydration(p126, t1100);
        
        			mount_component(equation175, p126, null);
        
        			append_hydration(p126, t1101);
        
        			mount_component(equation176, p126, null);
        
        			append_hydration(p126, t1102);
        
        			mount_component(equation177, p126, null);
        
        			append_hydration(p126, t1103);
        
        			append_hydration(p126, em142);
        
        			append_hydration(p126, t1105);
        
        			mount_component(equation178, p126, null);
        
        			append_hydration(p126, t1106);
        
        			mount_component(equation179, p126, null);
        
        			append_hydration(p126, t1107);
        
        			append_hydration(p126, em143);
        
        			append_hydration(p126, t1109);
        
        			append_hydration(p126, strong67);
        
        			append_hydration(p126, t1111);
        
        			mount_component(equation180, p126, null);
        
        			append_hydration(p126, t1112);
        
        			insert_hydration(target, t1113, anchor);
        
        			insert_hydration(target, p127, anchor);
        
        			append_hydration(p127, strong68);
        
        			append_hydration(p127, t1115);
        
        			append_hydration(p127, em144);
        
        			append_hydration(p127, t1117);
        
        			mount_component(equation181, p127, null);
        
        			append_hydration(p127, t1118);
        
        			mount_component(equation182, p127, null);
        
        			insert_hydration(target, t1119, anchor);
        
        			mount_component(sketch12, target, anchor);
        
        			insert_hydration(target, t1120, anchor);
        
        			mount_component(actionelement5, target, anchor);
        
        			insert_hydration(target, t1121, anchor);
        
        			insert_hydration(target, p128, anchor);
        
        			insert_hydration(target, t1123, anchor);
        
        			insert_hydration(target, pre4, anchor);
        
        			html_tag_4.m(raw4_value, pre4);
        
        			insert_hydration(target, t1124, anchor);
        
        			insert_hydration(target, h210, anchor);
        
        			insert_hydration(target, t1126, anchor);
        
        			insert_hydration(target, p129, anchor);
        
        			insert_hydration(target, t1128, anchor);
        
        			insert_hydration(target, p130, anchor);
        
        			insert_hydration(target, t1136, anchor);
        
        			mount_component(equation183, target, anchor);
        
        			insert_hydration(target, t1137, anchor);
        
        			insert_hydration(target, p131, anchor);
        
        			insert_hydration(target, t1140, anchor);
        
        			insert_hydration(target, p132, anchor);
        
        			append_hydration(p132, t1141);
        
        			append_hydration(p132, em147);
        
        			append_hydration(p132, t1143);
        
        			mount_component(equation184, p132, null);
        
        			append_hydration(p132, t1144);
        
        			insert_hydration(target, t1145, anchor);
        
        			mount_component(equation185, target, anchor);
        
        			insert_hydration(target, t1146, anchor);
        
        			insert_hydration(target, br14, anchor);
        
        			insert_hydration(target, t1147, anchor);
        
        			mount_component(equation186, target, anchor);
        
        			insert_hydration(target, t1148, anchor);
        
        			insert_hydration(target, p133, anchor);
        
        			insert_hydration(target, t1150, anchor);
        
        			insert_hydration(target, pre5, anchor);
        
        			html_tag_5.m(raw5_value, pre5);
        
        			insert_hydration(target, t1151, anchor);
        
        			insert_hydration(target, h18, anchor);
        
        			insert_hydration(target, t1153, anchor);
        
        			insert_hydration(target, p134, anchor);
        
        			insert_hydration(target, t1158, anchor);
        
        			mount_component(sketch13, target, anchor);
        
        			insert_hydration(target, t1159, anchor);
        
        			insert_hydration(target, p135, anchor);
        
        			append_hydration(p135, em148);
        
        			append_hydration(p135, t1161);
        
        			mount_component(range22, p135, null);
        
        			insert_hydration(target, t1162, anchor);
        
        			insert_hydration(target, p136, anchor);
        
        			append_hydration(p136, em149);
        
        			append_hydration(p136, t1164);
        
        			mount_component(dynamic14, p136, null);
        
        			insert_hydration(target, t1165, anchor);
        
        			insert_hydration(target, p137, anchor);
        
        			append_hydration(p137, em150);
        
        			append_hydration(p137, t1167);
        
        			mount_component(dynamic15, p137, null);
        
        			insert_hydration(target, t1168, anchor);
        
        			insert_hydration(target, p138, anchor);
        
        			append_hydration(p138, em151);
        
        			append_hydration(p138, t1170);
        
        			mount_component(dynamic16, p138, null);
        
        			insert_hydration(target, t1171, anchor);
        
        			insert_hydration(target, span23, anchor);
        
        			append_hydration(span23, t1172);
        
        			mount_component(equation187, span23, null);
        
        			append_hydration(span23, t1173);
        
        			insert_hydration(target, t1174, anchor);
        
        			insert_hydration(target, br15, anchor);
        
        			insert_hydration(target, t1175, anchor);
        
        			mount_component(sketch14, target, anchor);
        
        			insert_hydration(target, t1176, anchor);
        
        			insert_hydration(target, span24, anchor);
        
        			insert_hydration(target, t1178, anchor);
        
        			mount_component(dynamic17, target, anchor);
        
        			insert_hydration(target, t1179, anchor);
        
        			insert_hydration(target, span25, anchor);
        
        			insert_hydration(target, t1181, anchor);
        
        			mount_component(dynamic18, target, anchor);
        
        			insert_hydration(target, t1182, anchor);
        
        			insert_hydration(target, span26, anchor);
        
        			insert_hydration(target, t1184, anchor);
        
        			mount_component(dynamic19, target, anchor);
        
        			insert_hydration(target, t1185, anchor);
        
        			insert_hydration(target, br16, anchor);
        
        			insert_hydration(target, t1186, anchor);
        
        			mount_component(sketch15, target, anchor);
        
        			insert_hydration(target, t1187, anchor);
        
        			insert_hydration(target, span27, anchor);
        
        			insert_hydration(target, t1189, anchor);
        
        			mount_component(dynamic20, target, anchor);
        
        			insert_hydration(target, t1190, anchor);
        
        			insert_hydration(target, span28, anchor);
        
        			insert_hydration(target, t1192, anchor);
        
        			mount_component(dynamic21, target, anchor);
        
        			insert_hydration(target, t1193, anchor);
        
        			insert_hydration(target, span29, anchor);
        
        			insert_hydration(target, t1195, anchor);
        
        			mount_component(dynamic22, target, anchor);
        
        			insert_hydration(target, t1196, anchor);
        
        			insert_hydration(target, br17, anchor);
        
        			current = true;
        
        		},
        
        		p(ctx, dirty) {
        
        			const equation0_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation0_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation0.$set(equation0_changes);
        
        			const equation1_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation1_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation1.$set(equation1_changes);
        
        			const equation2_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation2_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation2.$set(equation2_changes);
        
        			const equation3_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation3_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation3.$set(equation3_changes);
        
        			const equation4_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation4_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation4.$set(equation4_changes);
        
        			const equation5_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation5_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation5.$set(equation5_changes);
        
        			if ((!current || dirty[1] & /*$computed_sinusx*/ 32768) && t154_value !== (t154_value = /*$computed_sinusx*/ ctx[46].toFixed(3) + "")) set_data(t154, t154_value);
        
        			const equation6_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation6_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation6.$set(equation6_changes);
        
        			if ((!current || dirty[1] & /*$computed_cosinusx*/ 65536) && t161_value !== (t161_value = /*$computed_cosinusx*/ ctx[47].toFixed(3) + "")) set_data(t161, t161_value);
        
        			const equation8_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation8_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation8.$set(equation8_changes);
        
        			const equation9_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation9_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation9.$set(equation9_changes);
        
        			const equation10_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation10_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation10.$set(equation10_changes);
        
        			const equation11_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation11_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation11.$set(equation11_changes);
        
        			const equation12_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation12_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation12.$set(equation12_changes);
        
        			const equation13_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation13_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation13.$set(equation13_changes);
        
        			const equation14_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation14_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation14.$set(equation14_changes);
        
        			if (!current || dirty[0] & /*$direction*/ 256) set_data(t194, /*$direction*/ ctx[8]);
        
        			const equation15_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation15_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation15.$set(equation15_changes);
        
        			if (!current || dirty[0] & /*$magnitude*/ 128) set_data(t201, /*$magnitude*/ ctx[7]);
        
        			const equation16_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation16_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation16.$set(equation16_changes);
        
        			let previous_block_index = current_block_type_index;
        
        			current_block_type_index = select_block_type(ctx);
        
        
        
        			if (current_block_type_index === previous_block_index) {
        
        				if_blocks[current_block_type_index].p(ctx, dirty);
        
        			} else {
        
        				group_outros();
        
        
        
        				transition_out(if_blocks[previous_block_index], 1, 1, () => {
        
        					if_blocks[previous_block_index] = null;
        
        				});
        
        
        
        				check_outros();
        
        				if_block0 = if_blocks[current_block_type_index];
        
        
        
        				if (!if_block0) {
        
        					if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
        
        					if_block0.c();
        
        				} else {
        
        					if_block0.p(ctx, dirty);
        
        				}
        
        
        
        				transition_in(if_block0, 1);
        
        				if_block0.m(t212.parentNode, t212);
        
        			}
        
        
        
        			const equation17_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation17_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation17.$set(equation17_changes);
        
        			if (!current || dirty[0] & /*$posx*/ 32) set_data(t221, /*$posx*/ ctx[5]);
        
        			const equation18_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation18_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation18.$set(equation18_changes);
        
        			if (!current || dirty[0] & /*$posy*/ 8) set_data(t225, /*$posy*/ ctx[3]);
        
        			let previous_block_index_1 = current_block_type_index_1;
        
        			current_block_type_index_1 = select_block_type_1(ctx);
        
        
        
        			if (current_block_type_index_1 === previous_block_index_1) {
        
        				if_blocks_1[current_block_type_index_1].p(ctx, dirty);
        
        			} else {
        
        				group_outros();
        
        
        
        				transition_out(if_blocks_1[previous_block_index_1], 1, 1, () => {
        
        					if_blocks_1[previous_block_index_1] = null;
        
        				});
        
        
        
        				check_outros();
        
        				if_block1 = if_blocks_1[current_block_type_index_1];
        
        
        
        				if (!if_block1) {
        
        					if_block1 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx);
        
        					if_block1.c();
        
        				} else {
        
        					if_block1.p(ctx, dirty);
        
        				}
        
        
        
        				transition_in(if_block1, 1);
        
        				if_block1.m(t230.parentNode, t230);
        
        			}
        
        
        
        			let previous_block_index_2 = current_block_type_index_2;
        
        			current_block_type_index_2 = select_block_type_2(ctx);
        
        
        
        			if (current_block_type_index_2 === previous_block_index_2) {
        
        				if_blocks_2[current_block_type_index_2].p(ctx, dirty);
        
        			} else {
        
        				group_outros();
        
        
        
        				transition_out(if_blocks_2[previous_block_index_2], 1, 1, () => {
        
        					if_blocks_2[previous_block_index_2] = null;
        
        				});
        
        
        
        				check_outros();
        
        				if_block2 = if_blocks_2[current_block_type_index_2];
        
        
        
        				if (!if_block2) {
        
        					if_block2 = if_blocks_2[current_block_type_index_2] = if_block_creators_2[current_block_type_index_2](ctx);
        
        					if_block2.c();
        
        				} else {
        
        					if_block2.p(ctx, dirty);
        
        				}
        
        
        
        				transition_in(if_block2, 1);
        
        				if_block2.m(t233.parentNode, t233);
        
        			}
        
        
        
        			const equation19_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation19_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation19.$set(equation19_changes);
        
        			const equation20_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation20_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation20.$set(equation20_changes);
        
        			const equation23_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation23_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation23.$set(equation23_changes);
        
        			const equation24_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation24_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation24.$set(equation24_changes);
        
        			const equation25_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation25_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation25.$set(equation25_changes);
        
        			const equation26_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation26_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation26.$set(equation26_changes);
        
        			const equation27_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation27_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation27.$set(equation27_changes);
        
        			const equation28_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation28_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation28.$set(equation28_changes);
        
        			const equation31_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation31_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation31.$set(equation31_changes);
        
        			const equation32_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation32_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation32.$set(equation32_changes);
        
        			if (!current || dirty[0] & /*$posx*/ 32) set_data(t284, /*$posx*/ ctx[5]);
        
        			if (!current || dirty[0] & /*$posy*/ 8) set_data(t288, /*$posy*/ ctx[3]);
        
        			if (!current || dirty[0] & /*$posx_two*/ 16) set_data(t293, /*$posx_two*/ ctx[4]);
        
        			if (!current || dirty[0] & /*$posy_two*/ 4) set_data(t297, /*$posy_two*/ ctx[2]);
        
        			let previous_block_index_3 = current_block_type_index_3;
        
        			current_block_type_index_3 = select_block_type_3(ctx);
        
        
        
        			if (current_block_type_index_3 === previous_block_index_3) {
        
        				if_blocks_3[current_block_type_index_3].p(ctx, dirty);
        
        			} else {
        
        				group_outros();
        
        
        
        				transition_out(if_blocks_3[previous_block_index_3], 1, 1, () => {
        
        					if_blocks_3[previous_block_index_3] = null;
        
        				});
        
        
        
        				check_outros();
        
        				if_block3 = if_blocks_3[current_block_type_index_3];
        
        
        
        				if (!if_block3) {
        
        					if_block3 = if_blocks_3[current_block_type_index_3] = if_block_creators_3[current_block_type_index_3](ctx);
        
        					if_block3.c();
        
        				} else {
        
        					if_block3.p(ctx, dirty);
        
        				}
        
        
        
        				transition_in(if_block3, 1);
        
        				if_block3.m(t306.parentNode, t306);
        
        			}
        
        
        
        			const equation37_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation37_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation37.$set(equation37_changes);
        
        			if (!current || dirty[0] & /*$scalar*/ 64) set_data(t339, /*$scalar*/ ctx[6]);
        
        			let previous_block_index_4 = current_block_type_index_4;
        
        			current_block_type_index_4 = select_block_type_4(ctx);
        
        
        
        			if (current_block_type_index_4 === previous_block_index_4) {
        
        				if_blocks_4[current_block_type_index_4].p(ctx, dirty);
        
        			} else {
        
        				group_outros();
        
        
        
        				transition_out(if_blocks_4[previous_block_index_4], 1, 1, () => {
        
        					if_blocks_4[previous_block_index_4] = null;
        
        				});
        
        
        
        				check_outros();
        
        				if_block4 = if_blocks_4[current_block_type_index_4];
        
        
        
        				if (!if_block4) {
        
        					if_block4 = if_blocks_4[current_block_type_index_4] = if_block_creators_4[current_block_type_index_4](ctx);
        
        					if_block4.c();
        
        				} else {
        
        					if_block4.p(ctx, dirty);
        
        				}
        
        
        
        				transition_in(if_block4, 1);
        
        				if_block4.m(t344.parentNode, t344);
        
        			}
        
        
        
        			if (!current || dirty[0] & /*$posx*/ 32) set_data(t368, /*$posx*/ ctx[5]);
        
        			if (!current || dirty[0] & /*$posy*/ 8) set_data(t372, /*$posy*/ ctx[3]);
        
        			if (!current || dirty[0] & /*$posx_two*/ 16) set_data(t378, /*$posx_two*/ ctx[4]);
        
        			if (!current || dirty[0] & /*$posy_two*/ 4) set_data(t382, /*$posy_two*/ ctx[2]);
        
        			const equation44_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation44_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation44.$set(equation44_changes);
        
        			let previous_block_index_5 = current_block_type_index_5;
        
        			current_block_type_index_5 = select_block_type_5(ctx);
        
        
        
        			if (current_block_type_index_5 === previous_block_index_5) {
        
        				if_blocks_5[current_block_type_index_5].p(ctx, dirty);
        
        			} else {
        
        				group_outros();
        
        
        
        				transition_out(if_blocks_5[previous_block_index_5], 1, 1, () => {
        
        					if_blocks_5[previous_block_index_5] = null;
        
        				});
        
        
        
        				check_outros();
        
        				if_block5 = if_blocks_5[current_block_type_index_5];
        
        
        
        				if (!if_block5) {
        
        					if_block5 = if_blocks_5[current_block_type_index_5] = if_block_creators_5[current_block_type_index_5](ctx);
        
        					if_block5.c();
        
        				} else {
        
        					if_block5.p(ctx, dirty);
        
        				}
        
        
        
        				transition_in(if_block5, 1);
        
        				if_block5.m(t422.parentNode, t422);
        
        			}
        
        
        
        			let previous_block_index_6 = current_block_type_index_6;
        
        			current_block_type_index_6 = select_block_type_6(ctx);
        
        
        
        			if (current_block_type_index_6 === previous_block_index_6) {
        
        				if_blocks_6[current_block_type_index_6].p(ctx, dirty);
        
        			} else {
        
        				group_outros();
        
        
        
        				transition_out(if_blocks_6[previous_block_index_6], 1, 1, () => {
        
        					if_blocks_6[previous_block_index_6] = null;
        
        				});
        
        
        
        				check_outros();
        
        				if_block6 = if_blocks_6[current_block_type_index_6];
        
        
        
        				if (!if_block6) {
        
        					if_block6 = if_blocks_6[current_block_type_index_6] = if_block_creators_6[current_block_type_index_6](ctx);
        
        					if_block6.c();
        
        				} else {
        
        					if_block6.p(ctx, dirty);
        
        				}
        
        
        
        				transition_in(if_block6, 1);
        
        				if_block6.m(t425.parentNode, t425);
        
        			}
        
        
        
        			const equation45_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation45_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation45.$set(equation45_changes);
        
        			const equation46_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation46_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation46.$set(equation46_changes);
        
        			const equation47_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation47_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation47.$set(equation47_changes);
        
        			const equation48_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation48_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation48.$set(equation48_changes);
        
        			const equation49_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation49_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation49.$set(equation49_changes);
        
        			const equation50_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation50_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation50.$set(equation50_changes);
        
        			const equation51_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation51_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation51.$set(equation51_changes);
        
        			const equation52_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation52_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation52.$set(equation52_changes);
        
        			const equation53_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation53_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation53.$set(equation53_changes);
        
        			const equation54_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation54_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation54.$set(equation54_changes);
        
        			const equation55_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation55_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation55.$set(equation55_changes);
        
        			const equation56_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation56_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation56.$set(equation56_changes);
        
        			const equation57_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation57_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation57.$set(equation57_changes);
        
        			const equation58_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation58_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation58.$set(equation58_changes);
        
        			if (!current || dirty[1] & /*$derivative_h*/ 262144) set_data(t483, /*$derivative_h*/ ctx[49]);
        
        			const equation59_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation59_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation59.$set(equation59_changes);
        
        			const equation60_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation60_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation60.$set(equation60_changes);
        
        			const equation61_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation61_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation61.$set(equation61_changes);
        
        			const equation62_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation62_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation62.$set(equation62_changes);
        
        			const equation63_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation63_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation63.$set(equation63_changes);
        
        			const equation64_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation64_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation64.$set(equation64_changes);
        
        			const equation65_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation65_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation65.$set(equation65_changes);
        
        			const equation66_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation66_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation66.$set(equation66_changes);
        
        			const equation67_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation67_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation67.$set(equation67_changes);
        
        			const equation68_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation68_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation68.$set(equation68_changes);
        
        			const equation69_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation69_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation69.$set(equation69_changes);
        
        			const equation70_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation70_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation70.$set(equation70_changes);
        
        			const equation71_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation71_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation71.$set(equation71_changes);
        
        			if (!current || dirty[1] & /*$resolutionFunction*/ 524288) set_data(t546, /*$resolutionFunction*/ ctx[50]);
        
        			if (!current || dirty[1] & /*$gradient_bounds*/ 1048576) set_data(t551, /*$gradient_bounds*/ ctx[51]);
        
        			const equation72_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation72_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation72.$set(equation72_changes);
        
        			const range16_changes = {};
        
        			if (dirty[1] & /*$gradient_bounds*/ 1048576) range16_changes.min = -/*$gradient_bounds*/ ctx[51];
        
        			if (dirty[1] & /*$gradient_bounds*/ 1048576) range16_changes.max = /*$gradient_bounds*/ ctx[51];
        
        			range16.$set(range16_changes);
        
        			if (!current || dirty[1] & /*$x_grad_arrow*/ 2097152) set_data(t558, /*$x_grad_arrow*/ ctx[52]);
        
        			const equation73_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation73_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation73.$set(equation73_changes);
        
        			const equation74_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation74_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation74.$set(equation74_changes);
        
        			const range17_changes = {};
        
        			if (dirty[1] & /*$gradient_bounds*/ 1048576) range17_changes.min = -/*$gradient_bounds*/ ctx[51];
        
        			if (dirty[1] & /*$gradient_bounds*/ 1048576) range17_changes.max = /*$gradient_bounds*/ ctx[51];
        
        			range17.$set(range17_changes);
        
        			if (!current || dirty[1] & /*$y_grad_arrow*/ 4194304) set_data(t565, /*$y_grad_arrow*/ ctx[53]);
        
        			const equation79_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation79_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation79.$set(equation79_changes);
        
        			const equation80_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation80_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation80.$set(equation80_changes);
        
        			const equation81_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation81_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation81.$set(equation81_changes);
        
        			const equation82_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation82_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation82.$set(equation82_changes);
        
        			const equation83_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation83_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation83.$set(equation83_changes);
        
        			const equation84_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation84_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation84.$set(equation84_changes);
        
        			if (!current || dirty[1] & /*$param_a*/ 8388608) set_data(t605, /*$param_a*/ ctx[54]);
        
        			const equation85_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation85_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation85.$set(equation85_changes);
        
        			if (!current || dirty[1] & /*$param_b*/ 16777216) set_data(t609, /*$param_b*/ ctx[55]);
        
        			const equation86_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation86_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation86.$set(equation86_changes);
        
        			const equation88_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation88_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation88.$set(equation88_changes);
        
        			const equation89_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation89_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation89.$set(equation89_changes);
        
        			const equation90_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation90_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation90.$set(equation90_changes);
        
        			const equation91_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation91_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation91.$set(equation91_changes);
        
        			const equation93_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation93_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation93.$set(equation93_changes);
        
        			const equation103_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation103_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation103.$set(equation103_changes);
        
        			const equation104_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation104_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation104.$set(equation104_changes);
        
        			const equation105_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation105_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation105.$set(equation105_changes);
        
        			const equation106_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation106_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation106.$set(equation106_changes);
        
        			const equation107_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation107_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation107.$set(equation107_changes);
        
        			const equation108_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation108_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation108.$set(equation108_changes);
        
        			const equation109_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation109_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation109.$set(equation109_changes);
        
        			const equation110_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation110_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation110.$set(equation110_changes);
        
        			const equation111_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation111_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation111.$set(equation111_changes);
        
        			const equation115_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation115_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation115.$set(equation115_changes);
        
        			const equation119_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation119_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation119.$set(equation119_changes);
        
        			const equation121_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation121_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation121.$set(equation121_changes);
        
        			const equation122_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation122_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation122.$set(equation122_changes);
        
        			const equation123_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation123_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation123.$set(equation123_changes);
        
        			const equation125_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation125_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation125.$set(equation125_changes);
        
        			const equation126_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation126_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation126.$set(equation126_changes);
        
        			const equation127_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation127_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation127.$set(equation127_changes);
        
        			const equation128_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation128_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation128.$set(equation128_changes);
        
        			const equation129_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation129_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation129.$set(equation129_changes);
        
        			const equation130_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation130_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation130.$set(equation130_changes);
        
        			const equation134_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation134_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation134.$set(equation134_changes);
        
        			const equation136_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation136_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation136.$set(equation136_changes);
        
        			const equation138_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation138_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation138.$set(equation138_changes);
        
        			const equation139_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation139_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation139.$set(equation139_changes);
        
        			const equation140_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation140_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation140.$set(equation140_changes);
        
        			const equation141_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation141_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation141.$set(equation141_changes);
        
        			const equation142_changes = {};
        
        			if (dirty[0] & /*gs_interval*/ 512) equation142_changes.markup = /*gs_interval*/ ctx[9];
        
        			equation142.$set(equation142_changes);
        
        			const dynamic2_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic2_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic2_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic2.$set(dynamic2_changes);
        
        			const dynamic3_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic3_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic3_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic3.$set(dynamic3_changes);
        
        			const dynamic4_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic4_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic4_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic4.$set(dynamic4_changes);
        
        			const dynamic5_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic5_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic5_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic5.$set(dynamic5_changes);
        
        			const dynamic6_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic6_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic6_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic6.$set(dynamic6_changes);
        
        			const dynamic7_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic7_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic7_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic7.$set(dynamic7_changes);
        
        			const dynamic8_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic8_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic8_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic8.$set(dynamic8_changes);
        
        			const dynamic9_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic9_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic9_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic9.$set(dynamic9_changes);
        
        			const dynamic10_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic10_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic10_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic10.$set(dynamic10_changes);
        
        			const dynamic11_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic11_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic11_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic11.$set(dynamic11_changes);
        
        			const dynamic12_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic12_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic12_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic12.$set(dynamic12_changes);
        
        			const dynamic13_changes = {};
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic13_changes.min = -/*$abs_bound*/ ctx[1];
        
        			if (dirty[0] & /*$abs_bound*/ 2) dynamic13_changes.max = /*$abs_bound*/ ctx[1];
        
        			dynamic13.$set(dynamic13_changes);
        
        			const equation155_changes = {};
        
        			if (dirty[0] & /*gs_equation_system*/ 536870912) equation155_changes.markup = /*gs_equation_system*/ ctx[29];
        
        			equation155.$set(equation155_changes);
        
        			const equation156_changes = {};
        
        			if (dirty[0] & /*gs_system_matrice*/ 268435456) equation156_changes.markup = /*gs_system_matrice*/ ctx[28];
        
        			equation156.$set(equation156_changes);
        
        			if (!current || dirty[1] & /*$iterationsGS*/ 16384) set_data(t942, /*$iterationsGS*/ ctx[45]);
        
        			let previous_block_index_7 = current_block_type_index_7;
        
        			current_block_type_index_7 = select_block_type_7(ctx);
        
        
        
        			if (current_block_type_index_7 === previous_block_index_7) {
        
        				if_blocks_7[current_block_type_index_7].p(ctx, dirty);
        
        			} else {
        
        				group_outros();
        
        
        
        				transition_out(if_blocks_7[previous_block_index_7], 1, 1, () => {
        
        					if_blocks_7[previous_block_index_7] = null;
        
        				});
        
        
        
        				check_outros();
        
        				if_block7 = if_blocks_7[current_block_type_index_7];
        
        
        
        				if (!if_block7) {
        
        					if_block7 = if_blocks_7[current_block_type_index_7] = if_block_creators_7[current_block_type_index_7](ctx);
        
        					if_block7.c();
        
        				} else {
        
        					if_block7.p(ctx, dirty);
        
        				}
        
        
        
        				transition_in(if_block7, 1);
        
        				if_block7.m(t951.parentNode, t951);
        
        			}
        
        
        
        			const equation157_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation157_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation157.$set(equation157_changes);
        
        			const equation158_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation158_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation158.$set(equation158_changes);
        
        			const equation159_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation159_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation159.$set(equation159_changes);
        
        			const staticcontainer_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				staticcontainer_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			staticcontainer.$set(staticcontainer_changes);
        
        			if (!current || dirty[1] & /*$coeff_diff_demo*/ 67108864) set_data(t1004, /*$coeff_diff_demo*/ ctx[57]);
        
        			const equation160_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation160_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation160.$set(equation160_changes);
        
        			const equation162_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation162_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation162.$set(equation162_changes);
        
        			const equation163_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation163_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation163.$set(equation163_changes);
        
        			const equation164_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation164_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation164.$set(equation164_changes);
        
        			const equation165_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation165_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation165.$set(equation165_changes);
        
        			const equation167_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation167_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation167.$set(equation167_changes);
        
        			const equation168_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation168_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation168.$set(equation168_changes);
        
        			const equation172_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation172_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation172.$set(equation172_changes);
        
        			const equation173_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation173_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation173.$set(equation173_changes);
        
        			const equation174_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation174_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation174.$set(equation174_changes);
        
        			const equation175_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation175_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation175.$set(equation175_changes);
        
        			const equation176_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation176_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation176.$set(equation176_changes);
        
        			const equation177_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation177_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation177.$set(equation177_changes);
        
        			const equation178_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation178_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation178.$set(equation178_changes);
        
        			const equation179_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation179_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation179.$set(equation179_changes);
        
        			const equation180_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation180_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation180.$set(equation180_changes);
        
        			const equation181_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation181_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation181.$set(equation181_changes);
        
        			const equation184_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation184_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation184.$set(equation184_changes);
        
        			const equation187_changes = {};
        
        
        
        			if (dirty[5] & /*$$scope*/ 1) {
        
        				equation187_changes.$$scope = { dirty, ctx };
        
        			}
        
        
        
        			equation187.$set(equation187_changes);
        
        		},
        
        		i(local) {
        
        			if (current) return;
        
        			transition_in(equation0.$$.fragment, local);
        
        			transition_in(equation1.$$.fragment, local);
        
        			transition_in(equation2.$$.fragment, local);
        
        			transition_in(sketch0.$$.fragment, local);
        
        			transition_in(equation3.$$.fragment, local);
        
        			transition_in(equation4.$$.fragment, local);
        
        			transition_in(equation5.$$.fragment, local);
        
        			transition_in(dynamic0.$$.fragment, local);
        
        			transition_in(equation6.$$.fragment, local);
        
        			transition_in(dynamic1.$$.fragment, local);
        
        			transition_in(equation7.$$.fragment, local);
        
        			transition_in(equation8.$$.fragment, local);
        
        			transition_in(equation9.$$.fragment, local);
        
        			transition_in(equation10.$$.fragment, local);
        
        			transition_in(equation11.$$.fragment, local);
        
        			transition_in(equation12.$$.fragment, local);
        
        			transition_in(equation13.$$.fragment, local);
        
        			transition_in(range0.$$.fragment, local);
        
        			transition_in(equation14.$$.fragment, local);
        
        			transition_in(equation15.$$.fragment, local);
        
        			transition_in(range1.$$.fragment, local);
        
        			transition_in(checkbox0.$$.fragment, local);
        
        			transition_in(checkbox1.$$.fragment, local);
        
        			transition_in(sketch1.$$.fragment, local);
        
        			transition_in(equation16.$$.fragment, local);
        
        			transition_in(if_block0);
        
        			transition_in(equation17.$$.fragment, local);
        
        			transition_in(range2.$$.fragment, local);
        
        			transition_in(equation18.$$.fragment, local);
        
        			transition_in(range3.$$.fragment, local);
        
        			transition_in(sketch2.$$.fragment, local);
        
        			transition_in(if_block1);
        
        			transition_in(if_block2);
        
        			transition_in(equation19.$$.fragment, local);
        
        			transition_in(equation20.$$.fragment, local);
        
        			transition_in(equation21.$$.fragment, local);
        
        			transition_in(equation22.$$.fragment, local);
        
        			transition_in(equation23.$$.fragment, local);
        
        			transition_in(equation24.$$.fragment, local);
        
        			transition_in(equation25.$$.fragment, local);
        
        			transition_in(equation26.$$.fragment, local);
        
        			transition_in(equation27.$$.fragment, local);
        
        			transition_in(equation28.$$.fragment, local);
        
        			transition_in(equation29.$$.fragment, local);
        
        			transition_in(equation30.$$.fragment, local);
        
        			transition_in(equation31.$$.fragment, local);
        
        			transition_in(equation32.$$.fragment, local);
        
        			transition_in(equation33.$$.fragment, local);
        
        			transition_in(range4.$$.fragment, local);
        
        			transition_in(equation34.$$.fragment, local);
        
        			transition_in(range5.$$.fragment, local);
        
        			transition_in(equation35.$$.fragment, local);
        
        			transition_in(range6.$$.fragment, local);
        
        			transition_in(equation36.$$.fragment, local);
        
        			transition_in(range7.$$.fragment, local);
        
        			transition_in(checkbox2.$$.fragment, local);
        
        			transition_in(checkbox3.$$.fragment, local);
        
        			transition_in(sketch3.$$.fragment, local);
        
        			transition_in(if_block3);
        
        			transition_in(equation37.$$.fragment, local);
        
        			transition_in(range8.$$.fragment, local);
        
        			transition_in(sketch4.$$.fragment, local);
        
        			transition_in(if_block4);
        
        			transition_in(equation38.$$.fragment, local);
        
        			transition_in(equation39.$$.fragment, local);
        
        			transition_in(range9.$$.fragment, local);
        
        			transition_in(equation40.$$.fragment, local);
        
        			transition_in(range10.$$.fragment, local);
        
        			transition_in(equation41.$$.fragment, local);
        
        			transition_in(equation42.$$.fragment, local);
        
        			transition_in(range11.$$.fragment, local);
        
        			transition_in(equation43.$$.fragment, local);
        
        			transition_in(range12.$$.fragment, local);
        
        			transition_in(sketch5.$$.fragment, local);
        
        			transition_in(equation44.$$.fragment, local);
        
        			transition_in(if_block5);
        
        			transition_in(if_block6);
        
        			transition_in(equation45.$$.fragment, local);
        
        			transition_in(equation46.$$.fragment, local);
        
        			transition_in(equation47.$$.fragment, local);
        
        			transition_in(equation48.$$.fragment, local);
        
        			transition_in(equation49.$$.fragment, local);
        
        			transition_in(equation50.$$.fragment, local);
        
        			transition_in(equation51.$$.fragment, local);
        
        			transition_in(equation52.$$.fragment, local);
        
        			transition_in(equation53.$$.fragment, local);
        
        			transition_in(equation54.$$.fragment, local);
        
        			transition_in(equation55.$$.fragment, local);
        
        			transition_in(equation56.$$.fragment, local);
        
        			transition_in(equation57.$$.fragment, local);
        
        			transition_in(equation58.$$.fragment, local);
        
        			transition_in(range13.$$.fragment, local);
        
        			transition_in(select0.$$.fragment, local);
        
        			transition_in(sketch6.$$.fragment, local);
        
        			transition_in(equation59.$$.fragment, local);
        
        			transition_in(equation60.$$.fragment, local);
        
        			transition_in(equation61.$$.fragment, local);
        
        			transition_in(equation62.$$.fragment, local);
        
        			transition_in(equation63.$$.fragment, local);
        
        			transition_in(equation64.$$.fragment, local);
        
        			transition_in(equation65.$$.fragment, local);
        
        			transition_in(equation66.$$.fragment, local);
        
        			transition_in(equation67.$$.fragment, local);
        
        			transition_in(equation68.$$.fragment, local);
        
        			transition_in(equation69.$$.fragment, local);
        
        			transition_in(equation70.$$.fragment, local);
        
        			transition_in(equation71.$$.fragment, local);
        
        			transition_in(range14.$$.fragment, local);
        
        			transition_in(range15.$$.fragment, local);
        
        			transition_in(equation72.$$.fragment, local);
        
        			transition_in(range16.$$.fragment, local);
        
        			transition_in(equation73.$$.fragment, local);
        
        			transition_in(equation74.$$.fragment, local);
        
        			transition_in(range17.$$.fragment, local);
        
        			transition_in(checkbox4.$$.fragment, local);
        
        			transition_in(sketch7.$$.fragment, local);
        
        			transition_in(equation75.$$.fragment, local);
        
        			transition_in(equation76.$$.fragment, local);
        
        			transition_in(equation77.$$.fragment, local);
        
        			transition_in(equation78.$$.fragment, local);
        
        			transition_in(equation79.$$.fragment, local);
        
        			transition_in(equation80.$$.fragment, local);
        
        			transition_in(equation81.$$.fragment, local);
        
        			transition_in(equation82.$$.fragment, local);
        
        			transition_in(equation83.$$.fragment, local);
        
        			transition_in(equation84.$$.fragment, local);
        
        			transition_in(range18.$$.fragment, local);
        
        			transition_in(equation85.$$.fragment, local);
        
        			transition_in(range19.$$.fragment, local);
        
        			transition_in(select1.$$.fragment, local);
        
        			transition_in(sketch8.$$.fragment, local);
        
        			transition_in(equation86.$$.fragment, local);
        
        			transition_in(equation87.$$.fragment, local);
        
        			transition_in(equation88.$$.fragment, local);
        
        			transition_in(equation89.$$.fragment, local);
        
        			transition_in(equation90.$$.fragment, local);
        
        			transition_in(equation91.$$.fragment, local);
        
        			transition_in(equation92.$$.fragment, local);
        
        			transition_in(equation93.$$.fragment, local);
        
        			transition_in(equation94.$$.fragment, local);
        
        			transition_in(equation95.$$.fragment, local);
        
        			transition_in(actionelement0.$$.fragment, local);
        
        			transition_in(actionelement1.$$.fragment, local);
        
        			transition_in(equation96.$$.fragment, local);
        
        			transition_in(equation97.$$.fragment, local);
        
        			transition_in(actionelement2.$$.fragment, local);
        
        			transition_in(actionelement3.$$.fragment, local);
        
        			transition_in(equation98.$$.fragment, local);
        
        			transition_in(equation99.$$.fragment, local);
        
        			transition_in(equation100.$$.fragment, local);
        
        			transition_in(equation101.$$.fragment, local);
        
        			transition_in(sketch9.$$.fragment, local);
        
        			transition_in(equation102.$$.fragment, local);
        
        			transition_in(equation103.$$.fragment, local);
        
        			transition_in(equation104.$$.fragment, local);
        
        			transition_in(equation105.$$.fragment, local);
        
        			transition_in(equation106.$$.fragment, local);
        
        			transition_in(equation107.$$.fragment, local);
        
        			transition_in(equation108.$$.fragment, local);
        
        			transition_in(equation109.$$.fragment, local);
        
        			transition_in(equation110.$$.fragment, local);
        
        			transition_in(equation111.$$.fragment, local);
        
        			transition_in(equation112.$$.fragment, local);
        
        			transition_in(equation113.$$.fragment, local);
        
        			transition_in(equation114.$$.fragment, local);
        
        			transition_in(equation115.$$.fragment, local);
        
        			transition_in(equation116.$$.fragment, local);
        
        			transition_in(equation117.$$.fragment, local);
        
        			transition_in(equation118.$$.fragment, local);
        
        			transition_in(equation119.$$.fragment, local);
        
        			transition_in(equation120.$$.fragment, local);
        
        			transition_in(equation121.$$.fragment, local);
        
        			transition_in(equation122.$$.fragment, local);
        
        			transition_in(equation123.$$.fragment, local);
        
        			transition_in(equation124.$$.fragment, local);
        
        			transition_in(equation125.$$.fragment, local);
        
        			transition_in(equation126.$$.fragment, local);
        
        			transition_in(equation127.$$.fragment, local);
        
        			transition_in(equation128.$$.fragment, local);
        
        			transition_in(equation129.$$.fragment, local);
        
        			transition_in(equation130.$$.fragment, local);
        
        			transition_in(equation131.$$.fragment, local);
        
        			transition_in(equation132.$$.fragment, local);
        
        			transition_in(equation133.$$.fragment, local);
        
        			transition_in(equation134.$$.fragment, local);
        
        			transition_in(equation135.$$.fragment, local);
        
        			transition_in(equation136.$$.fragment, local);
        
        			transition_in(equation137.$$.fragment, local);
        
        			transition_in(equation138.$$.fragment, local);
        
        			transition_in(equation139.$$.fragment, local);
        
        			transition_in(equation140.$$.fragment, local);
        
        			transition_in(equation141.$$.fragment, local);
        
        			transition_in(equation142.$$.fragment, local);
        
        			transition_in(checkbox5.$$.fragment, local);
        
        			transition_in(equation143.$$.fragment, local);
        
        			transition_in(dynamic2.$$.fragment, local);
        
        			transition_in(equation144.$$.fragment, local);
        
        			transition_in(dynamic3.$$.fragment, local);
        
        			transition_in(equation145.$$.fragment, local);
        
        			transition_in(dynamic4.$$.fragment, local);
        
        			transition_in(equation146.$$.fragment, local);
        
        			transition_in(dynamic5.$$.fragment, local);
        
        			transition_in(checkbox6.$$.fragment, local);
        
        			transition_in(equation147.$$.fragment, local);
        
        			transition_in(dynamic6.$$.fragment, local);
        
        			transition_in(equation148.$$.fragment, local);
        
        			transition_in(dynamic7.$$.fragment, local);
        
        			transition_in(equation149.$$.fragment, local);
        
        			transition_in(dynamic8.$$.fragment, local);
        
        			transition_in(equation150.$$.fragment, local);
        
        			transition_in(dynamic9.$$.fragment, local);
        
        			transition_in(checkbox7.$$.fragment, local);
        
        			transition_in(equation151.$$.fragment, local);
        
        			transition_in(dynamic10.$$.fragment, local);
        
        			transition_in(equation152.$$.fragment, local);
        
        			transition_in(dynamic11.$$.fragment, local);
        
        			transition_in(equation153.$$.fragment, local);
        
        			transition_in(dynamic12.$$.fragment, local);
        
        			transition_in(equation154.$$.fragment, local);
        
        			transition_in(dynamic13.$$.fragment, local);
        
        			transition_in(equation155.$$.fragment, local);
        
        			transition_in(equation156.$$.fragment, local);
        
        			transition_in(sketch10.$$.fragment, local);
        
        			transition_in(checkbox8.$$.fragment, local);
        
        			transition_in(checkbox9.$$.fragment, local);
        
        			transition_in(checkbox10.$$.fragment, local);
        
        			transition_in(range20.$$.fragment, local);
        
        			transition_in(checkbox11.$$.fragment, local);
        
        			transition_in(actionelement4.$$.fragment, local);
        
        			transition_in(if_block7);
        
        			transition_in(equation157.$$.fragment, local);
        
        			transition_in(equation158.$$.fragment, local);
        
        			transition_in(equation159.$$.fragment, local);
        
        			transition_in(staticcontainer.$$.fragment, local);
        
        			transition_in(radio.$$.fragment, local);
        
        			transition_in(range21.$$.fragment, local);
        
        			transition_in(sketch11.$$.fragment, local);
        
        			transition_in(equation160.$$.fragment, local);
        
        			transition_in(equation161.$$.fragment, local);
        
        			transition_in(equation162.$$.fragment, local);
        
        			transition_in(equation163.$$.fragment, local);
        
        			transition_in(equation164.$$.fragment, local);
        
        			transition_in(equation165.$$.fragment, local);
        
        			transition_in(equation166.$$.fragment, local);
        
        			transition_in(equation167.$$.fragment, local);
        
        			transition_in(equation168.$$.fragment, local);
        
        			transition_in(equation169.$$.fragment, local);
        
        			transition_in(equation170.$$.fragment, local);
        
        			transition_in(equation171.$$.fragment, local);
        
        			transition_in(equation172.$$.fragment, local);
        
        			transition_in(equation173.$$.fragment, local);
        
        			transition_in(equation174.$$.fragment, local);
        
        			transition_in(equation175.$$.fragment, local);
        
        			transition_in(equation176.$$.fragment, local);
        
        			transition_in(equation177.$$.fragment, local);
        
        			transition_in(equation178.$$.fragment, local);
        
        			transition_in(equation179.$$.fragment, local);
        
        			transition_in(equation180.$$.fragment, local);
        
        			transition_in(equation181.$$.fragment, local);
        
        			transition_in(equation182.$$.fragment, local);
        
        			transition_in(sketch12.$$.fragment, local);
        
        			transition_in(actionelement5.$$.fragment, local);
        
        			transition_in(equation183.$$.fragment, local);
        
        			transition_in(equation184.$$.fragment, local);
        
        			transition_in(equation185.$$.fragment, local);
        
        			transition_in(equation186.$$.fragment, local);
        
        			transition_in(sketch13.$$.fragment, local);
        
        			transition_in(range22.$$.fragment, local);
        
        			transition_in(dynamic14.$$.fragment, local);
        
        			transition_in(dynamic15.$$.fragment, local);
        
        			transition_in(dynamic16.$$.fragment, local);
        
        			transition_in(equation187.$$.fragment, local);
        
        			transition_in(sketch14.$$.fragment, local);
        
        			transition_in(dynamic17.$$.fragment, local);
        
        			transition_in(dynamic18.$$.fragment, local);
        
        			transition_in(dynamic19.$$.fragment, local);
        
        			transition_in(sketch15.$$.fragment, local);
        
        			transition_in(dynamic20.$$.fragment, local);
        
        			transition_in(dynamic21.$$.fragment, local);
        
        			transition_in(dynamic22.$$.fragment, local);
        
        			current = true;
        
        		},
        
        		o(local) {
        
        			transition_out(equation0.$$.fragment, local);
        
        			transition_out(equation1.$$.fragment, local);
        
        			transition_out(equation2.$$.fragment, local);
        
        			transition_out(sketch0.$$.fragment, local);
        
        			transition_out(equation3.$$.fragment, local);
        
        			transition_out(equation4.$$.fragment, local);
        
        			transition_out(equation5.$$.fragment, local);
        
        			transition_out(dynamic0.$$.fragment, local);
        
        			transition_out(equation6.$$.fragment, local);
        
        			transition_out(dynamic1.$$.fragment, local);
        
        			transition_out(equation7.$$.fragment, local);
        
        			transition_out(equation8.$$.fragment, local);
        
        			transition_out(equation9.$$.fragment, local);
        
        			transition_out(equation10.$$.fragment, local);
        
        			transition_out(equation11.$$.fragment, local);
        
        			transition_out(equation12.$$.fragment, local);
        
        			transition_out(equation13.$$.fragment, local);
        
        			transition_out(range0.$$.fragment, local);
        
        			transition_out(equation14.$$.fragment, local);
        
        			transition_out(equation15.$$.fragment, local);
        
        			transition_out(range1.$$.fragment, local);
        
        			transition_out(checkbox0.$$.fragment, local);
        
        			transition_out(checkbox1.$$.fragment, local);
        
        			transition_out(sketch1.$$.fragment, local);
        
        			transition_out(equation16.$$.fragment, local);
        
        			transition_out(if_block0);
        
        			transition_out(equation17.$$.fragment, local);
        
        			transition_out(range2.$$.fragment, local);
        
        			transition_out(equation18.$$.fragment, local);
        
        			transition_out(range3.$$.fragment, local);
        
        			transition_out(sketch2.$$.fragment, local);
        
        			transition_out(if_block1);
        
        			transition_out(if_block2);
        
        			transition_out(equation19.$$.fragment, local);
        
        			transition_out(equation20.$$.fragment, local);
        
        			transition_out(equation21.$$.fragment, local);
        
        			transition_out(equation22.$$.fragment, local);
        
        			transition_out(equation23.$$.fragment, local);
        
        			transition_out(equation24.$$.fragment, local);
        
        			transition_out(equation25.$$.fragment, local);
        
        			transition_out(equation26.$$.fragment, local);
        
        			transition_out(equation27.$$.fragment, local);
        
        			transition_out(equation28.$$.fragment, local);
        
        			transition_out(equation29.$$.fragment, local);
        
        			transition_out(equation30.$$.fragment, local);
        
        			transition_out(equation31.$$.fragment, local);
        
        			transition_out(equation32.$$.fragment, local);
        
        			transition_out(equation33.$$.fragment, local);
        
        			transition_out(range4.$$.fragment, local);
        
        			transition_out(equation34.$$.fragment, local);
        
        			transition_out(range5.$$.fragment, local);
        
        			transition_out(equation35.$$.fragment, local);
        
        			transition_out(range6.$$.fragment, local);
        
        			transition_out(equation36.$$.fragment, local);
        
        			transition_out(range7.$$.fragment, local);
        
        			transition_out(checkbox2.$$.fragment, local);
        
        			transition_out(checkbox3.$$.fragment, local);
        
        			transition_out(sketch3.$$.fragment, local);
        
        			transition_out(if_block3);
        
        			transition_out(equation37.$$.fragment, local);
        
        			transition_out(range8.$$.fragment, local);
        
        			transition_out(sketch4.$$.fragment, local);
        
        			transition_out(if_block4);
        
        			transition_out(equation38.$$.fragment, local);
        
        			transition_out(equation39.$$.fragment, local);
        
        			transition_out(range9.$$.fragment, local);
        
        			transition_out(equation40.$$.fragment, local);
        
        			transition_out(range10.$$.fragment, local);
        
        			transition_out(equation41.$$.fragment, local);
        
        			transition_out(equation42.$$.fragment, local);
        
        			transition_out(range11.$$.fragment, local);
        
        			transition_out(equation43.$$.fragment, local);
        
        			transition_out(range12.$$.fragment, local);
        
        			transition_out(sketch5.$$.fragment, local);
        
        			transition_out(equation44.$$.fragment, local);
        
        			transition_out(if_block5);
        
        			transition_out(if_block6);
        
        			transition_out(equation45.$$.fragment, local);
        
        			transition_out(equation46.$$.fragment, local);
        
        			transition_out(equation47.$$.fragment, local);
        
        			transition_out(equation48.$$.fragment, local);
        
        			transition_out(equation49.$$.fragment, local);
        
        			transition_out(equation50.$$.fragment, local);
        
        			transition_out(equation51.$$.fragment, local);
        
        			transition_out(equation52.$$.fragment, local);
        
        			transition_out(equation53.$$.fragment, local);
        
        			transition_out(equation54.$$.fragment, local);
        
        			transition_out(equation55.$$.fragment, local);
        
        			transition_out(equation56.$$.fragment, local);
        
        			transition_out(equation57.$$.fragment, local);
        
        			transition_out(equation58.$$.fragment, local);
        
        			transition_out(range13.$$.fragment, local);
        
        			transition_out(select0.$$.fragment, local);
        
        			transition_out(sketch6.$$.fragment, local);
        
        			transition_out(equation59.$$.fragment, local);
        
        			transition_out(equation60.$$.fragment, local);
        
        			transition_out(equation61.$$.fragment, local);
        
        			transition_out(equation62.$$.fragment, local);
        
        			transition_out(equation63.$$.fragment, local);
        
        			transition_out(equation64.$$.fragment, local);
        
        			transition_out(equation65.$$.fragment, local);
        
        			transition_out(equation66.$$.fragment, local);
        
        			transition_out(equation67.$$.fragment, local);
        
        			transition_out(equation68.$$.fragment, local);
        
        			transition_out(equation69.$$.fragment, local);
        
        			transition_out(equation70.$$.fragment, local);
        
        			transition_out(equation71.$$.fragment, local);
        
        			transition_out(range14.$$.fragment, local);
        
        			transition_out(range15.$$.fragment, local);
        
        			transition_out(equation72.$$.fragment, local);
        
        			transition_out(range16.$$.fragment, local);
        
        			transition_out(equation73.$$.fragment, local);
        
        			transition_out(equation74.$$.fragment, local);
        
        			transition_out(range17.$$.fragment, local);
        
        			transition_out(checkbox4.$$.fragment, local);
        
        			transition_out(sketch7.$$.fragment, local);
        
        			transition_out(equation75.$$.fragment, local);
        
        			transition_out(equation76.$$.fragment, local);
        
        			transition_out(equation77.$$.fragment, local);
        
        			transition_out(equation78.$$.fragment, local);
        
        			transition_out(equation79.$$.fragment, local);
        
        			transition_out(equation80.$$.fragment, local);
        
        			transition_out(equation81.$$.fragment, local);
        
        			transition_out(equation82.$$.fragment, local);
        
        			transition_out(equation83.$$.fragment, local);
        
        			transition_out(equation84.$$.fragment, local);
        
        			transition_out(range18.$$.fragment, local);
        
        			transition_out(equation85.$$.fragment, local);
        
        			transition_out(range19.$$.fragment, local);
        
        			transition_out(select1.$$.fragment, local);
        
        			transition_out(sketch8.$$.fragment, local);
        
        			transition_out(equation86.$$.fragment, local);
        
        			transition_out(equation87.$$.fragment, local);
        
        			transition_out(equation88.$$.fragment, local);
        
        			transition_out(equation89.$$.fragment, local);
        
        			transition_out(equation90.$$.fragment, local);
        
        			transition_out(equation91.$$.fragment, local);
        
        			transition_out(equation92.$$.fragment, local);
        
        			transition_out(equation93.$$.fragment, local);
        
        			transition_out(equation94.$$.fragment, local);
        
        			transition_out(equation95.$$.fragment, local);
        
        			transition_out(actionelement0.$$.fragment, local);
        
        			transition_out(actionelement1.$$.fragment, local);
        
        			transition_out(equation96.$$.fragment, local);
        
        			transition_out(equation97.$$.fragment, local);
        
        			transition_out(actionelement2.$$.fragment, local);
        
        			transition_out(actionelement3.$$.fragment, local);
        
        			transition_out(equation98.$$.fragment, local);
        
        			transition_out(equation99.$$.fragment, local);
        
        			transition_out(equation100.$$.fragment, local);
        
        			transition_out(equation101.$$.fragment, local);
        
        			transition_out(sketch9.$$.fragment, local);
        
        			transition_out(equation102.$$.fragment, local);
        
        			transition_out(equation103.$$.fragment, local);
        
        			transition_out(equation104.$$.fragment, local);
        
        			transition_out(equation105.$$.fragment, local);
        
        			transition_out(equation106.$$.fragment, local);
        
        			transition_out(equation107.$$.fragment, local);
        
        			transition_out(equation108.$$.fragment, local);
        
        			transition_out(equation109.$$.fragment, local);
        
        			transition_out(equation110.$$.fragment, local);
        
        			transition_out(equation111.$$.fragment, local);
        
        			transition_out(equation112.$$.fragment, local);
        
        			transition_out(equation113.$$.fragment, local);
        
        			transition_out(equation114.$$.fragment, local);
        
        			transition_out(equation115.$$.fragment, local);
        
        			transition_out(equation116.$$.fragment, local);
        
        			transition_out(equation117.$$.fragment, local);
        
        			transition_out(equation118.$$.fragment, local);
        
        			transition_out(equation119.$$.fragment, local);
        
        			transition_out(equation120.$$.fragment, local);
        
        			transition_out(equation121.$$.fragment, local);
        
        			transition_out(equation122.$$.fragment, local);
        
        			transition_out(equation123.$$.fragment, local);
        
        			transition_out(equation124.$$.fragment, local);
        
        			transition_out(equation125.$$.fragment, local);
        
        			transition_out(equation126.$$.fragment, local);
        
        			transition_out(equation127.$$.fragment, local);
        
        			transition_out(equation128.$$.fragment, local);
        
        			transition_out(equation129.$$.fragment, local);
        
        			transition_out(equation130.$$.fragment, local);
        
        			transition_out(equation131.$$.fragment, local);
        
        			transition_out(equation132.$$.fragment, local);
        
        			transition_out(equation133.$$.fragment, local);
        
        			transition_out(equation134.$$.fragment, local);
        
        			transition_out(equation135.$$.fragment, local);
        
        			transition_out(equation136.$$.fragment, local);
        
        			transition_out(equation137.$$.fragment, local);
        
        			transition_out(equation138.$$.fragment, local);
        
        			transition_out(equation139.$$.fragment, local);
        
        			transition_out(equation140.$$.fragment, local);
        
        			transition_out(equation141.$$.fragment, local);
        
        			transition_out(equation142.$$.fragment, local);
        
        			transition_out(checkbox5.$$.fragment, local);
        
        			transition_out(equation143.$$.fragment, local);
        
        			transition_out(dynamic2.$$.fragment, local);
        
        			transition_out(equation144.$$.fragment, local);
        
        			transition_out(dynamic3.$$.fragment, local);
        
        			transition_out(equation145.$$.fragment, local);
        
        			transition_out(dynamic4.$$.fragment, local);
        
        			transition_out(equation146.$$.fragment, local);
        
        			transition_out(dynamic5.$$.fragment, local);
        
        			transition_out(checkbox6.$$.fragment, local);
        
        			transition_out(equation147.$$.fragment, local);
        
        			transition_out(dynamic6.$$.fragment, local);
        
        			transition_out(equation148.$$.fragment, local);
        
        			transition_out(dynamic7.$$.fragment, local);
        
        			transition_out(equation149.$$.fragment, local);
        
        			transition_out(dynamic8.$$.fragment, local);
        
        			transition_out(equation150.$$.fragment, local);
        
        			transition_out(dynamic9.$$.fragment, local);
        
        			transition_out(checkbox7.$$.fragment, local);
        
        			transition_out(equation151.$$.fragment, local);
        
        			transition_out(dynamic10.$$.fragment, local);
        
        			transition_out(equation152.$$.fragment, local);
        
        			transition_out(dynamic11.$$.fragment, local);
        
        			transition_out(equation153.$$.fragment, local);
        
        			transition_out(dynamic12.$$.fragment, local);
        
        			transition_out(equation154.$$.fragment, local);
        
        			transition_out(dynamic13.$$.fragment, local);
        
        			transition_out(equation155.$$.fragment, local);
        
        			transition_out(equation156.$$.fragment, local);
        
        			transition_out(sketch10.$$.fragment, local);
        
        			transition_out(checkbox8.$$.fragment, local);
        
        			transition_out(checkbox9.$$.fragment, local);
        
        			transition_out(checkbox10.$$.fragment, local);
        
        			transition_out(range20.$$.fragment, local);
        
        			transition_out(checkbox11.$$.fragment, local);
        
        			transition_out(actionelement4.$$.fragment, local);
        
        			transition_out(if_block7);
        
        			transition_out(equation157.$$.fragment, local);
        
        			transition_out(equation158.$$.fragment, local);
        
        			transition_out(equation159.$$.fragment, local);
        
        			transition_out(staticcontainer.$$.fragment, local);
        
        			transition_out(radio.$$.fragment, local);
        
        			transition_out(range21.$$.fragment, local);
        
        			transition_out(sketch11.$$.fragment, local);
        
        			transition_out(equation160.$$.fragment, local);
        
        			transition_out(equation161.$$.fragment, local);
        
        			transition_out(equation162.$$.fragment, local);
        
        			transition_out(equation163.$$.fragment, local);
        
        			transition_out(equation164.$$.fragment, local);
        
        			transition_out(equation165.$$.fragment, local);
        
        			transition_out(equation166.$$.fragment, local);
        
        			transition_out(equation167.$$.fragment, local);
        
        			transition_out(equation168.$$.fragment, local);
        
        			transition_out(equation169.$$.fragment, local);
        
        			transition_out(equation170.$$.fragment, local);
        
        			transition_out(equation171.$$.fragment, local);
        
        			transition_out(equation172.$$.fragment, local);
        
        			transition_out(equation173.$$.fragment, local);
        
        			transition_out(equation174.$$.fragment, local);
        
        			transition_out(equation175.$$.fragment, local);
        
        			transition_out(equation176.$$.fragment, local);
        
        			transition_out(equation177.$$.fragment, local);
        
        			transition_out(equation178.$$.fragment, local);
        
        			transition_out(equation179.$$.fragment, local);
        
        			transition_out(equation180.$$.fragment, local);
        
        			transition_out(equation181.$$.fragment, local);
        
        			transition_out(equation182.$$.fragment, local);
        
        			transition_out(sketch12.$$.fragment, local);
        
        			transition_out(actionelement5.$$.fragment, local);
        
        			transition_out(equation183.$$.fragment, local);
        
        			transition_out(equation184.$$.fragment, local);
        
        			transition_out(equation185.$$.fragment, local);
        
        			transition_out(equation186.$$.fragment, local);
        
        			transition_out(sketch13.$$.fragment, local);
        
        			transition_out(range22.$$.fragment, local);
        
        			transition_out(dynamic14.$$.fragment, local);
        
        			transition_out(dynamic15.$$.fragment, local);
        
        			transition_out(dynamic16.$$.fragment, local);
        
        			transition_out(equation187.$$.fragment, local);
        
        			transition_out(sketch14.$$.fragment, local);
        
        			transition_out(dynamic17.$$.fragment, local);
        
        			transition_out(dynamic18.$$.fragment, local);
        
        			transition_out(dynamic19.$$.fragment, local);
        
        			transition_out(sketch15.$$.fragment, local);
        
        			transition_out(dynamic20.$$.fragment, local);
        
        			transition_out(dynamic21.$$.fragment, local);
        
        			transition_out(dynamic22.$$.fragment, local);
        
        			current = false;
        
        		},
        
        		d(detaching) {
        
        			if (detaching) {
        
        				detach(p0);
        
        				detach(t5);
        
        				detach(h10);
        
        				detach(t7);
        
        				detach(blockquote0);
        
        				detach(t11);
        
        				detach(p2);
        
        				detach(t15);
        
        				detach(p3);
        
        				detach(t19);
        
        				detach(p4);
        
        				detach(t23);
        
        				detach(p5);
        
        				detach(t31);
        
        				detach(p6);
        
        				detach(t35);
        
        				detach(p7);
        
        				detach(t49);
        
        				detach(p8);
        
        				detach(t53);
        
        				detach(p9);
        
        				detach(t59);
        
        				detach(p10);
        
        				detach(t61);
        
        				detach(ul0);
        
        				detach(t65);
        
        				detach(p11);
        
        				detach(t71);
        
        				detach(p12);
        
        				detach(t81);
        
        				detach(blockquote1);
        
        				detach(t87);
        
        				detach(p14);
        
        				detach(t89);
        
        				detach(p15);
        
        				detach(t102);
        
        				detach(p16);
        
        				detach(t104);
        
        				detach(p17);
        
        				detach(t119);
        
        				detach(p18);
        
        				detach(t121);
        
        				detach(h11);
        
        				detach(t123);
        
        				detach(h12);
        
        				detach(t125);
        
        				detach(h20);
        
        				detach(t127);
        
        				detach(t128);
        
        				detach(p19);
        
        				detach(t148);
        
        				detach(t149);
        
        				detach(t150);
        
        				detach(p20);
        
        				detach(t155);
        
        				detach(t156);
        
        				detach(t157);
        
        				detach(p21);
        
        				detach(t162);
        
        				detach(p22);
        
        				detach(t168);
        
        				detach(p23);
        
        				detach(t185);
        
        				detach(p24);
        
        				detach(t187);
        
        				detach(p25);
        
        				detach(t196);
        
        				detach(p26);
        
        				detach(t203);
        
        				detach(t204);
        
        				detach(t205);
        
        				detach(t206);
        
        				detach(p27);
        
        				detach(t211);
        
        				detach(t212);
        
        				detach(p28);
        
        				detach(t218);
        
        				detach(t219);
        
        				detach(t220);
        
        				detach(t221);
        
        				detach(t222);
        
        				detach(t223);
        
        				detach(t224);
        
        				detach(t225);
        
        				detach(t226);
        
        				detach(t227);
        
        				detach(h40);
        
        				detach(t229);
        
        				detach(t230);
        
        				detach(h41);
        
        				detach(t232);
        
        				detach(t233);
        
        				detach(p29);
        
        				detach(t253);
        
        				detach(h21);
        
        				detach(t255);
        
        				detach(p30);
        
        				detach(t271);
        
        				detach(h30);
        
        				detach(t273);
        
        				detach(p31);
        
        				detach(t281);
        
        				detach(t282);
        
        				detach(t283);
        
        				detach(t284);
        
        				detach(t285);
        
        				detach(t286);
        
        				detach(t287);
        
        				detach(t288);
        
        				detach(t289);
        
        				detach(br0);
        
        				detach(t290);
        
        				detach(t291);
        
        				detach(t292);
        
        				detach(t293);
        
        				detach(t294);
        
        				detach(t295);
        
        				detach(t296);
        
        				detach(t297);
        
        				detach(t298);
        
        				detach(br1);
        
        				detach(t299);
        
        				detach(br2);
        
        				detach(t300);
        
        				detach(t301);
        
        				detach(t302);
        
        				detach(t303);
        
        				detach(p32);
        
        				detach(t305);
        
        				detach(t306);
        
        				detach(p33);
        
        				detach(t318);
        
        				detach(h31);
        
        				detach(t320);
        
        				detach(p34);
        
        				detach(t335);
        
        				detach(p35);
        
        				detach(t341);
        
        				detach(t342);
        
        				detach(br3);
        
        				detach(t343);
        
        				detach(t344);
        
        				detach(p36);
        
        				detach(t354);
        
        				detach(h32);
        
        				detach(t356);
        
        				detach(p37);
        
        				detach(t362);
        
        				detach(h42);
        
        				detach(t364);
        
        				detach(t365);
        
        				detach(t366);
        
        				detach(t367);
        
        				detach(t368);
        
        				detach(t369);
        
        				detach(t370);
        
        				detach(t371);
        
        				detach(t372);
        
        				detach(t373);
        
        				detach(br4);
        
        				detach(t374);
        
        				detach(t375);
        
        				detach(t376);
        
        				detach(t377);
        
        				detach(t378);
        
        				detach(t379);
        
        				detach(t380);
        
        				detach(t381);
        
        				detach(t382);
        
        				detach(t383);
        
        				detach(t384);
        
        				detach(p38);
        
        				detach(t400);
        
        				detach(p39);
        
        				detach(t410);
        
        				detach(p40);
        
        				detach(t418);
        
        				detach(p41);
        
        				detach(t421);
        
        				detach(t422);
        
        				detach(h43);
        
        				detach(t424);
        
        				detach(t425);
        
        				detach(h13);
        
        				detach(t427);
        
        				detach(h22);
        
        				detach(t429);
        
        				detach(p42);
        
        				detach(t434);
        
        				detach(p43);
        
        				detach(t468);
        
        				detach(p44);
        
        				detach(t480);
        
        				detach(t481);
        
        				detach(t482);
        
        				detach(t483);
        
        				detach(t484);
        
        				detach(t485);
        
        				detach(t486);
        
        				detach(p45);
        
        				detach(t493);
        
        				detach(p46);
        
        				detach(t497);
        
        				detach(p47);
        
        				detach(t507);
        
        				detach(h23);
        
        				detach(t510);
        
        				detach(p48);
        
        				detach(t512);
        
        				detach(p49);
        
        				detach(t527);
        
        				detach(p50);
        
        				detach(t531);
        
        				detach(p51);
        
        				detach(t534);
        
        				detach(p52);
        
        				detach(t542);
        
        				detach(p53);
        
        				detach(t567);
        
        				detach(t568);
        
        				detach(t569);
        
        				detach(p54);
        
        				detach(t571);
        
        				detach(t572);
        
        				detach(p55);
        
        				detach(t574);
        
        				detach(h14);
        
        				detach(t576);
        
        				detach(p56);
        
        				detach(t587);
        
        				detach(h24);
        
        				detach(t589);
        
        				detach(p57);
        
        				detach(t598);
        
        				detach(p58);
        
        				detach(t602);
        
        				detach(t603);
        
        				detach(t604);
        
        				detach(t605);
        
        				detach(t606);
        
        				detach(t607);
        
        				detach(t608);
        
        				detach(t609);
        
        				detach(t610);
        
        				detach(t611);
        
        				detach(t612);
        
        				detach(h25);
        
        				detach(t614);
        
        				detach(p59);
        
        				detach(t620);
        
        				detach(p60);
        
        				detach(t625);
        
        				detach(p61);
        
        				detach(t632);
        
        				detach(t633);
        
        				detach(t634);
        
        				detach(t635);
        
        				detach(t636);
        
        				detach(p62);
        
        				detach(t640);
        
        				detach(p63);
        
        				detach(t642);
        
        				detach(h33);
        
        				detach(t644);
        
        				detach(p64);
        
        				detach(t654);
        
        				detach(p65);
        
        				detach(t658);
        
        				detach(p66);
        
        				detach(t664);
        
        				detach(p67);
        
        				detach(t668);
        
        				detach(h34);
        
        				detach(t670);
        
        				detach(p68);
        
        				detach(t676);
        
        				detach(p69);
        
        				detach(t680);
        
        				detach(p70);
        
        				detach(t684);
        
        				detach(p71);
        
        				detach(t688);
        
        				detach(h26);
        
        				detach(t690);
        
        				detach(p72);
        
        				detach(t694);
        
        				detach(p73);
        
        				detach(t698);
        
        				detach(ul1);
        
        				detach(t710);
        
        				detach(t711);
        
        				detach(p74);
        
        				detach(t713);
        
        				detach(t714);
        
        				detach(p75);
        
        				detach(t725);
        
        				detach(t726);
        
        				detach(p76);
        
        				detach(t734);
        
        				detach(p77);
        
        				detach(t736);
        
        				detach(p78);
        
        				detach(t738);
        
        				detach(t739);
        
        				detach(t740);
        
        				detach(p79);
        
        				detach(t743);
        
        				detach(p80);
        
        				detach(t752);
        
        				detach(p81);
        
        				detach(t756);
        
        				detach(t757);
        
        				detach(p82);
        
        				detach(t764);
        
        				detach(p83);
        
        				detach(t766);
        
        				detach(h15);
        
        				detach(t768);
        
        				detach(p84);
        
        				detach(t775);
        
        				detach(p85);
        
        				detach(t789);
        
        				detach(p86);
        
        				detach(t792);
        
        				detach(p87);
        
        				detach(t795);
        
        				detach(h35);
        
        				detach(t797);
        
        				detach(p88);
        
        				detach(t799);
        
        				detach(p89);
        
        				detach(t805);
        
        				detach(p90);
        
        				detach(t811);
        
        				detach(p91);
        
        				detach(t817);
        
        				detach(p92);
        
        				detach(t824);
        
        				detach(p93);
        
        				detach(t828);
        
        				detach(h16);
        
        				detach(t830);
        
        				detach(p94);
        
        				detach(t832);
        
        				detach(p95);
        
        				detach(t847);
        
        				detach(p96);
        
        				detach(t852);
        
        				detach(p97);
        
        				detach(t869);
        
        				detach(p98);
        
        				detach(t884);
        
        				detach(p99);
        
        				detach(t886);
        
        				detach(t887);
        
        				detach(t888);
        
        				detach(t889);
        
        				detach(t890);
        
        				detach(t891);
        
        				detach(t892);
        
        				detach(t893);
        
        				detach(t894);
        
        				detach(t895);
        
        				detach(br6);
        
        				detach(t896);
        
        				detach(t897);
        
        				detach(t898);
        
        				detach(t899);
        
        				detach(t900);
        
        				detach(t901);
        
        				detach(t902);
        
        				detach(t903);
        
        				detach(t904);
        
        				detach(t905);
        
        				detach(br7);
        
        				detach(t906);
        
        				detach(t907);
        
        				detach(t908);
        
        				detach(t909);
        
        				detach(t910);
        
        				detach(t911);
        
        				detach(t912);
        
        				detach(t913);
        
        				detach(t914);
        
        				detach(t915);
        
        				detach(br8);
        
        				detach(t916);
        
        				detach(p100);
        
        				detach(t918);
        
        				detach(t919);
        
        				detach(p101);
        
        				detach(t923);
        
        				detach(t924);
        
        				detach(h36);
        
        				detach(t926);
        
        				detach(t927);
        
        				detach(span22);
        
        				detach(t928);
        
        				detach(h44);
        
        				detach(t930);
        
        				detach(t931);
        
        				detach(br9);
        
        				detach(t932);
        
        				detach(t933);
        
        				detach(br10);
        
        				detach(t934);
        
        				detach(t935);
        
        				detach(br11);
        
        				detach(t936);
        
        				detach(h45);
        
        				detach(t938);
        
        				detach(p102);
        
        				detach(t944);
        
        				detach(t945);
        
        				detach(br12);
        
        				detach(t946);
        
        				detach(br13);
        
        				detach(t947);
        
        				detach(t948);
        
        				detach(h37);
        
        				detach(t950);
        
        				detach(t951);
        
        				detach(h17);
        
        				detach(t953);
        
        				detach(p103);
        
        				detach(t955);
        
        				detach(p104);
        
        				detach(t961);
        
        				detach(p105);
        
        				detach(t966);
        
        				detach(h27);
        
        				detach(t968);
        
        				detach(p106);
        
        				detach(t973);
        
        				detach(pre0);
        
        				detach(t974);
        
        				detach(p107);
        
        				detach(t982);
        
        				detach(p108);
        
        				detach(t984);
        
        				detach(h28);
        
        				detach(t986);
        
        				detach(p109);
        
        				detach(t990);
        
        				detach(p110);
        
        				detach(t994);
        
        				detach(t995);
        
        				detach(p111);
        
        				detach(t999);
        
        				detach(p112);
        
        				detach(t1002);
        
        				detach(t1003);
        
        				detach(t1004);
        
        				detach(t1005);
        
        				detach(p113);
        
        				detach(t1008);
        
        				detach(t1009);
        
        				detach(h38);
        
        				detach(t1011);
        
        				detach(p114);
        
        				detach(t1021);
        
        				detach(h50);
        
        				detach(t1023);
        
        				detach(p115);
        
        				detach(t1030);
        
        				detach(h51);
        
        				detach(t1032);
        
        				detach(pre1);
        
        				detach(t1033);
        
        				detach(h39);
        
        				detach(t1035);
        
        				detach(p116);
        
        				detach(t1046);
        
        				detach(pre2);
        
        				detach(t1047);
        
        				detach(p117);
        
        				detach(t1049);
        
        				detach(p118);
        
        				detach(t1055);
        
        				detach(p119);
        
        				detach(t1059);
        
        				detach(t1060);
        
        				detach(p120);
        
        				detach(t1065);
        
        				detach(p121);
        
        				detach(t1077);
        
        				detach(p122);
        
        				detach(t1081);
        
        				detach(pre3);
        
        				detach(t1082);
        
        				detach(p123);
        
        				detach(t1084);
        
        				detach(h29);
        
        				detach(t1086);
        
        				detach(p124);
        
        				detach(t1095);
        
        				detach(p125);
        
        				detach(t1099);
        
        				detach(p126);
        
        				detach(t1113);
        
        				detach(p127);
        
        				detach(t1119);
        
        				detach(t1120);
        
        				detach(t1121);
        
        				detach(p128);
        
        				detach(t1123);
        
        				detach(pre4);
        
        				detach(t1124);
        
        				detach(h210);
        
        				detach(t1126);
        
        				detach(p129);
        
        				detach(t1128);
        
        				detach(p130);
        
        				detach(t1136);
        
        				detach(t1137);
        
        				detach(p131);
        
        				detach(t1140);
        
        				detach(p132);
        
        				detach(t1145);
        
        				detach(t1146);
        
        				detach(br14);
        
        				detach(t1147);
        
        				detach(t1148);
        
        				detach(p133);
        
        				detach(t1150);
        
        				detach(pre5);
        
        				detach(t1151);
        
        				detach(h18);
        
        				detach(t1153);
        
        				detach(p134);
        
        				detach(t1158);
        
        				detach(t1159);
        
        				detach(p135);
        
        				detach(t1162);
        
        				detach(p136);
        
        				detach(t1165);
        
        				detach(p137);
        
        				detach(t1168);
        
        				detach(p138);
        
        				detach(t1171);
        
        				detach(span23);
        
        				detach(t1174);
        
        				detach(br15);
        
        				detach(t1175);
        
        				detach(t1176);
        
        				detach(span24);
        
        				detach(t1178);
        
        				detach(t1179);
        
        				detach(span25);
        
        				detach(t1181);
        
        				detach(t1182);
        
        				detach(span26);
        
        				detach(t1184);
        
        				detach(t1185);
        
        				detach(br16);
        
        				detach(t1186);
        
        				detach(t1187);
        
        				detach(span27);
        
        				detach(t1189);
        
        				detach(t1190);
        
        				detach(span28);
        
        				detach(t1192);
        
        				detach(t1193);
        
        				detach(span29);
        
        				detach(t1195);
        
        				detach(t1196);
        
        				detach(br17);
        
        			}
        
        
        
        			destroy_component(equation0);
        
        			destroy_component(equation1);
        
        			destroy_component(equation2);
        
        			destroy_component(sketch0, detaching);
        
        			destroy_component(equation3);
        
        			destroy_component(equation4);
        
        			destroy_component(equation5, detaching);
        
        			destroy_component(dynamic0, detaching);
        
        			destroy_component(equation6, detaching);
        
        			destroy_component(dynamic1, detaching);
        
        			destroy_component(equation7);
        
        			destroy_component(equation8);
        
        			destroy_component(equation9);
        
        			destroy_component(equation10);
        
        			destroy_component(equation11);
        
        			destroy_component(equation12);
        
        			destroy_component(equation13);
        
        			destroy_component(range0);
        
        			destroy_component(equation14);
        
        			destroy_component(equation15);
        
        			destroy_component(range1);
        
        			destroy_component(checkbox0, detaching);
        
        			destroy_component(checkbox1, detaching);
        
        			destroy_component(sketch1, detaching);
        
        			destroy_component(equation16);
        
        			if_blocks[current_block_type_index].d(detaching);
        
        			destroy_component(equation17, detaching);
        
        			destroy_component(range2, detaching);
        
        			destroy_component(equation18, detaching);
        
        			destroy_component(range3, detaching);
        
        			destroy_component(sketch2, detaching);
        
        			if_blocks_1[current_block_type_index_1].d(detaching);
        
        			if_blocks_2[current_block_type_index_2].d(detaching);
        
        			destroy_component(equation19);
        
        			destroy_component(equation20);
        
        			destroy_component(equation21);
        
        			destroy_component(equation22);
        
        			destroy_component(equation23);
        
        			destroy_component(equation24);
        
        			destroy_component(equation25);
        
        			destroy_component(equation26);
        
        			destroy_component(equation27);
        
        			destroy_component(equation28);
        
        			destroy_component(equation29);
        
        			destroy_component(equation30);
        
        			destroy_component(equation31);
        
        			destroy_component(equation32);
        
        			destroy_component(equation33, detaching);
        
        			destroy_component(range4, detaching);
        
        			destroy_component(equation34, detaching);
        
        			destroy_component(range5, detaching);
        
        			destroy_component(equation35, detaching);
        
        			destroy_component(range6, detaching);
        
        			destroy_component(equation36, detaching);
        
        			destroy_component(range7, detaching);
        
        			destroy_component(checkbox2, detaching);
        
        			destroy_component(checkbox3, detaching);
        
        			destroy_component(sketch3, detaching);
        
        			if_blocks_3[current_block_type_index_3].d(detaching);
        
        			destroy_component(equation37);
        
        			destroy_component(range8);
        
        			destroy_component(sketch4, detaching);
        
        			if_blocks_4[current_block_type_index_4].d(detaching);
        
        			destroy_component(equation38, detaching);
        
        			destroy_component(equation39, detaching);
        
        			destroy_component(range9, detaching);
        
        			destroy_component(equation40, detaching);
        
        			destroy_component(range10, detaching);
        
        			destroy_component(equation41, detaching);
        
        			destroy_component(equation42, detaching);
        
        			destroy_component(range11, detaching);
        
        			destroy_component(equation43, detaching);
        
        			destroy_component(range12, detaching);
        
        			destroy_component(sketch5, detaching);
        
        			destroy_component(equation44);
        
        			if_blocks_5[current_block_type_index_5].d(detaching);
        
        			if_blocks_6[current_block_type_index_6].d(detaching);
        
        			destroy_component(equation45);
        
        			destroy_component(equation46);
        
        			destroy_component(equation47);
        
        			destroy_component(equation48);
        
        			destroy_component(equation49);
        
        			destroy_component(equation50);
        
        			destroy_component(equation51);
        
        			destroy_component(equation52);
        
        			destroy_component(equation53);
        
        			destroy_component(equation54);
        
        			destroy_component(equation55);
        
        			destroy_component(equation56);
        
        			destroy_component(equation57);
        
        			destroy_component(equation58, detaching);
        
        			destroy_component(range13, detaching);
        
        			destroy_component(select0, detaching);
        
        			destroy_component(sketch6, detaching);
        
        			destroy_component(equation59);
        
        			destroy_component(equation60);
        
        			destroy_component(equation61);
        
        			destroy_component(equation62);
        
        			destroy_component(equation63);
        
        			destroy_component(equation64);
        
        			destroy_component(equation65);
        
        			destroy_component(equation66);
        
        			destroy_component(equation67);
        
        			destroy_component(equation68);
        
        			destroy_component(equation69);
        
        			destroy_component(equation70);
        
        			destroy_component(equation71);
        
        			destroy_component(range14);
        
        			destroy_component(range15);
        
        			destroy_component(equation72);
        
        			destroy_component(range16);
        
        			destroy_component(equation73);
        
        			destroy_component(equation74);
        
        			destroy_component(range17);
        
        			destroy_component(checkbox4, detaching);
        
        			destroy_component(sketch7, detaching);
        
        			destroy_component(equation75, detaching);
        
        			destroy_component(equation76);
        
        			destroy_component(equation77);
        
        			destroy_component(equation78);
        
        			destroy_component(equation79);
        
        			destroy_component(equation80);
        
        			destroy_component(equation81);
        
        			destroy_component(equation82);
        
        			destroy_component(equation83);
        
        			destroy_component(equation84, detaching);
        
        			destroy_component(range18, detaching);
        
        			destroy_component(equation85, detaching);
        
        			destroy_component(range19, detaching);
        
        			destroy_component(select1, detaching);
        
        			destroy_component(sketch8, detaching);
        
        			destroy_component(equation86);
        
        			destroy_component(equation87);
        
        			destroy_component(equation88);
        
        			destroy_component(equation89, detaching);
        
        			destroy_component(equation90, detaching);
        
        			destroy_component(equation91, detaching);
        
        			destroy_component(equation92, detaching);
        
        			destroy_component(equation93);
        
        			destroy_component(equation94);
        
        			destroy_component(equation95);
        
        			destroy_component(actionelement0);
        
        			destroy_component(actionelement1);
        
        			destroy_component(equation96);
        
        			destroy_component(equation97);
        
        			destroy_component(actionelement2);
        
        			destroy_component(actionelement3);
        
        			destroy_component(equation98);
        
        			destroy_component(equation99);
        
        			destroy_component(equation100);
        
        			destroy_component(equation101);
        
        			destroy_component(sketch9, detaching);
        
        			destroy_component(equation102, detaching);
        
        			destroy_component(equation103);
        
        			destroy_component(equation104);
        
        			destroy_component(equation105);
        
        			destroy_component(equation106, detaching);
        
        			destroy_component(equation107);
        
        			destroy_component(equation108);
        
        			destroy_component(equation109);
        
        			destroy_component(equation110);
        
        			destroy_component(equation111);
        
        			destroy_component(equation112);
        
        			destroy_component(equation113, detaching);
        
        			destroy_component(equation114, detaching);
        
        			destroy_component(equation115);
        
        			destroy_component(equation116);
        
        			destroy_component(equation117, detaching);
        
        			destroy_component(equation118);
        
        			destroy_component(equation119);
        
        			destroy_component(equation120);
        
        			destroy_component(equation121);
        
        			destroy_component(equation122);
        
        			destroy_component(equation123);
        
        			destroy_component(equation124);
        
        			destroy_component(equation125);
        
        			destroy_component(equation126);
        
        			destroy_component(equation127);
        
        			destroy_component(equation128);
        
        			destroy_component(equation129);
        
        			destroy_component(equation130);
        
        			destroy_component(equation131);
        
        			destroy_component(equation132);
        
        			destroy_component(equation133);
        
        			destroy_component(equation134);
        
        			destroy_component(equation135);
        
        			destroy_component(equation136);
        
        			destroy_component(equation137);
        
        			destroy_component(equation138);
        
        			destroy_component(equation139);
        
        			destroy_component(equation140);
        
        			destroy_component(equation141);
        
        			destroy_component(equation142);
        
        			destroy_component(checkbox5, detaching);
        
        			destroy_component(equation143, detaching);
        
        			destroy_component(dynamic2, detaching);
        
        			destroy_component(equation144, detaching);
        
        			destroy_component(dynamic3, detaching);
        
        			destroy_component(equation145, detaching);
        
        			destroy_component(dynamic4, detaching);
        
        			destroy_component(equation146, detaching);
        
        			destroy_component(dynamic5, detaching);
        
        			destroy_component(checkbox6, detaching);
        
        			destroy_component(equation147, detaching);
        
        			destroy_component(dynamic6, detaching);
        
        			destroy_component(equation148, detaching);
        
        			destroy_component(dynamic7, detaching);
        
        			destroy_component(equation149, detaching);
        
        			destroy_component(dynamic8, detaching);
        
        			destroy_component(equation150, detaching);
        
        			destroy_component(dynamic9, detaching);
        
        			destroy_component(checkbox7, detaching);
        
        			destroy_component(equation151, detaching);
        
        			destroy_component(dynamic10, detaching);
        
        			destroy_component(equation152, detaching);
        
        			destroy_component(dynamic11, detaching);
        
        			destroy_component(equation153, detaching);
        
        			destroy_component(dynamic12, detaching);
        
        			destroy_component(equation154, detaching);
        
        			destroy_component(dynamic13, detaching);
        
        			destroy_component(equation155, detaching);
        
        			destroy_component(equation156, detaching);
        
        			destroy_component(sketch10, detaching);
        
        			destroy_component(checkbox8, detaching);
        
        			destroy_component(checkbox9, detaching);
        
        			destroy_component(checkbox10, detaching);
        
        			destroy_component(range20);
        
        			destroy_component(checkbox11, detaching);
        
        			destroy_component(actionelement4, detaching);
        
        			if_blocks_7[current_block_type_index_7].d(detaching);
        
        			destroy_component(equation157);
        
        			destroy_component(equation158);
        
        			destroy_component(equation159);
        
        			destroy_component(staticcontainer, detaching);
        
        			destroy_component(radio, detaching);
        
        			destroy_component(range21);
        
        			destroy_component(sketch11, detaching);
        
        			destroy_component(equation160);
        
        			destroy_component(equation161);
        
        			destroy_component(equation162);
        
        			destroy_component(equation163);
        
        			destroy_component(equation164);
        
        			destroy_component(equation165);
        
        			destroy_component(equation166, detaching);
        
        			destroy_component(equation167);
        
        			destroy_component(equation168);
        
        			destroy_component(equation169);
        
        			destroy_component(equation170);
        
        			destroy_component(equation171);
        
        			destroy_component(equation172);
        
        			destroy_component(equation173);
        
        			destroy_component(equation174);
        
        			destroy_component(equation175);
        
        			destroy_component(equation176);
        
        			destroy_component(equation177);
        
        			destroy_component(equation178);
        
        			destroy_component(equation179);
        
        			destroy_component(equation180);
        
        			destroy_component(equation181);
        
        			destroy_component(equation182);
        
        			destroy_component(sketch12, detaching);
        
        			destroy_component(actionelement5, detaching);
        
        			destroy_component(equation183, detaching);
        
        			destroy_component(equation184);
        
        			destroy_component(equation185, detaching);
        
        			destroy_component(equation186, detaching);
        
        			destroy_component(sketch13, detaching);
        
        			destroy_component(range22);
        
        			destroy_component(dynamic14);
        
        			destroy_component(dynamic15);
        
        			destroy_component(dynamic16);
        
        			destroy_component(equation187);
        
        			destroy_component(sketch14, detaching);
        
        			destroy_component(dynamic17, detaching);
        
        			destroy_component(dynamic18, detaching);
        
        			destroy_component(dynamic19, detaching);
        
        			destroy_component(sketch15, detaching);
        
        			destroy_component(dynamic20, detaching);
        
        			destroy_component(dynamic21, detaching);
        
        			destroy_component(dynamic22, detaching);
        
        		}
        
        	};
        
        }
        
        const r_sq = "\\Bbb{R}^2";
        
        const r_pow3 = "\\Bbb{R}^3";
        
        const r_pow4 = "\\Bbb{R}^4";
        
        const r_n = "\\Bbb{R}^n";
        
        const r_sq_la = "\\Bbb{R}^2 \\to \\Bbb{R}^2";
        
        const inv_cos = "\\cos^{-1}(x)";
        
        const inv_sin = "\\sin^{-1}(x)";
        
        const frac_x_m = "\\frac{x}{m}";
        
        const frac_1_4 = "\\frac{1}{4}";
        
        const vf_u = "\\mathbf{u}";
        
        const vf_w = "\\mathbf{w}";
        
        const red_right_arrow = "\\bold{\\textcolor{#FF0000}{\\circlearrowright}}";
        
        const blue_left_arrow = "\\bold{\\textcolor{#0000FF}{\\circlearrowleft}}";
        
        const nabla = "( \\frac{\\partial}{\\partial x}, \\frac{\\partial}{\\partial y} )";
        
        const nabla_applicated = "\\nabla f(x, y) = f(x, y) \\begin{pmatrix} \\small{\\frac{\\partial}{\\partial x}} \\\\ \\small{\\frac{\\partial}{\\partial y}} \\end{pmatrix} = \\begin{pmatrix} \\small{\\frac{\\partial f(x, y)}{\\partial x}} \\\\ \\small{\\frac{\\partial f(x, y)}{\\partial y}} \\end{pmatrix} = \\overrightarrow{grad} \\space f(x, y)";
        
        const divergence = "\\boxed{\\nabla \\cdot \\mathbf{u}}";
        
        const null_divergence = "\\nabla \\cdot \\mathbf{u} = 0\\space";
        
        const curl = "\\boxed{\\nabla \\times \\mathbf{u}}";
        
        const x_1 = "\\textcolor{#0000FF}{x_1}";
        
        const y_1 = "\\textcolor{#0000FF}{y_1}";
        
        const x_2 = "\\textcolor{#FF0000}{x_2}";
        
        const y_2 = "\\textcolor{#FF0000}{y_2}";
        
        const v_1 = "\\textcolor{#0000FF}{\\vec{v_1}} \\enspace\\enspace";
        
        const v_2 = "\\textcolor{#FF0000}{\\vec{v_2}} \\enspace\\enspace";
        
        const gradient_eqn = "\\overrightarrow{grad} = \\begin{pmatrix}\\overbrace{\\small{\\frac{ \\partial f(x, y)}{\\small \\partial x}}}^{\\text dérivée \\space selon \\space la \\space largeur} \\\\ \\\\ \\underbrace{\\small{\\frac{\\partial f(x, y)}{\\partial y}}}_{\\text dérivée \\space selon \\space la \\space longueur}\\end{pmatrix}";
        
        const helmhotz_hodge_eqn = "\\overbrace{\\mathbf{w}}^{\\text champ \\space arbitraire} = \\overbrace{\\mathbf{u}}^{\\text champ \\space solénoïdal} + \\overbrace{\\nabla q}^{\\text champ \\space irrotationnel}";
        
        const gradient_field = "( \\frac{\\partial q}{\\partial x}, \\frac{\\partial q}{\\partial y} )";
        
        const laplacian = "( \\frac{\\partial^2 }{\\partial x^2}, \\frac{\\partial^2}{\\partial y^2} )";
        
        const deducted_from_hhe = "\\mathbf{u} = \\mathbf{w} - \\nabla q";
        
        const poisson_eqn = "\\overbrace{\\nabla \\cdot \\mathbf{w}}^{\\text connu \\space (facilement \\space calculable)} = \\Delta \\overbrace{q}^{\\text inconnue}";
        
        const hhe_simplification1 = "\\nabla \\cdot \\mathbf{w} = \\nabla \\cdot (\\mathbf{u} + \\nabla q)";
        
        const hhe_simplification2 = "\\nabla \\cdot \\mathbf{w} = \\overbrace{\\cancel{\\nabla \\cdot \\mathbf{u}}}^{\\text la \\space divergence \\space vaut \\space 0} + \\nabla^2 q";
        
        const line_eqn_m = "m = \\frac{-a}{b}";
        
        const line_eqn_d = "d = \\frac{-c}{d}";
        
        
        
        // Equation counterparts of the stores defined above
        
        const a_1 = "a_\\bold{\\textcolor{#FFC800}{1}} =";
        
        
        
        const a_2 = "a_\\bold{\\textcolor{#00FFC8}{2}} =";
        
        const a_3 = "a_\\bold{\\textcolor{#C800FF}{3}} =";
        
        const b_1 = "b_\\bold{\\textcolor{#FFC800}{1}} =";
        
        const b_2 = "b_\\bold{\\textcolor{#00FFC8}{2}} =";
        
        const b_3 = "b_\\bold{\\textcolor{#C800FF}{3}} =";
        
        const c_1 = "c_\\bold{\\textcolor{#FFC800}{1}} =";
        
        const c_2 = "c_\\bold{\\textcolor{#00FFC8}{2}} =";
        
        const c_3 = "c_\\bold{\\textcolor{#C800FF}{3}} =";
        
        const d_1 = "d_\\bold{\\textcolor{#FFC800}{1}} =";
        
        const d_2 = "d_\\bold{\\textcolor{#00FFC8}{2}} =";
        
        const d_3 = "d_\\bold{\\textcolor{#C800FF}{3}} =";
        
        const bold_4 = "-\\bold{4}";
        
        const x_t_i = "x^{(t)}_i";
        
        const bold_1 = "\\bold{\\color{#C800FF}{1}}";
        
        const huge = "( \\huge{\\cdotp \\cdotp \\cdotp \\cdotp \\cdotp \\cdotp} \\normalsize )";
        
        const divergence_eqn = "\\nabla \\cdot \\mathbf{u} = ( \\frac{\\partial}{\\partial x}, \\frac{\\partial}{\\partial y} ) \\cdot \\begin{pmatrix} \\mathbf{u}_x \\\\ \\mathbf{u}_y \\end{pmatrix} =  \\frac{\\partial \\mathbf{u}_x}{\\partial x} + \\frac{\\partial \\mathbf{u}_y}{\\partial y}";
        
        const discrete_laplacian_1 = "\\footnotesize \\Delta_{\\text{discret}}f = f(x+1,y)+f(x-1,y)-2f(x,y) + f(x,y+1)+f(x,y-1)-2f(x,y)";
        
        const discrete_laplacian_2 = "\\footnotesize \\Delta_{\\text{discret}}f = f(x+1,y)+f(x-1,y) + f(x,y+1)+f(x,y-1)-4 f(x,y)";
        
        const gs_ln_2_2 = "\\boxed{a_\\bold{\\textcolor{#00FFC8}{2}}x + b_\\bold{\\textcolor{#00FFC8}{2}}y + c_\\bold{\\textcolor{#00FFC8}{2}}z + d_\\bold{\\textcolor{#00FFC8}{2}} = 0}";
        
        const gs_ln_3_2 = "\\boxed{a_\\bold{\\textcolor{#C800FF}{3}}x + b_\\bold{\\textcolor{#C800FF}{3}}y + c_\\bold{\\textcolor{#C800FF}{3}}z + d_\\bold{\\textcolor{#C800FF}{3}} = 0}";
        
        
        
        function instance($$self, $$props, $$invalidate) {
        
        	let gs_ln_1_1;
        
        	let gs_ln_1_3;
        
        	let gs_ln_1_4;
        
        	let gs_ln_1_5;
        
        	let gs_ln_1_6;
        
        	let gs_ln_2_1;
        
        	let gs_ln_2_3;
        
        	let gs_ln_2_4;
        
        	let gs_ln_2_5;
        
        	let gs_ln_2_6;
        
        	let gs_ln_3_1;
        
        	let gs_ln_3_3;
        
        	let gs_ln_3_4;
        
        	let gs_ln_3_5;
        
        	let gs_ln_3_6;
        
        	let gs_equation_system;
        
        	let gs_system_matrice;
        
        	let vector_uncolored;
        
        	let vector_colored;
        
        	let magnitude_uncolored;
        
        	let magnitude_colored;
        
        	let direction1_uncolored;
        
        	let direction2_uncolored;
        
        	let direction1_colored;
        
        	let direction2_colored;
        
        	let vectorAddition_uncolored;
        
        	let vectorAddition_colored;
        
        	let scalarMultiplication_uncolored;
        
        	let scalarMultiplication_colored;
        
        	let dotProductGeometric_uncolored;
        
        	let dotProductGeometric_colored;
        
        	let dotProductAlgebric1_uncolored;
        
        	let dotProductAlgebric1_colored;
        
        	let dotProductAlgebric2_uncolored;
        
        	let dotProductAlgebric2_colored;
        
        	let gs_interval;
        
        	let $abs_bound;
        
        	let $posy_two;
        
        	let $posy;
        
        	let $posx_two;
        
        	let $posx;
        
        	let $scalar;
        
        	let $magnitude;
        
        	let $direction;
        
        	let $d3;
        
        	let $d2;
        
        	let $d1;
        
        	let $c3;
        
        	let $b3;
        
        	let $a3;
        
        	let $c2;
        
        	let $b2;
        
        	let $a2;
        
        	let $c1;
        
        	let $b1;
        
        	let $a1;
        
        	let $iterationGS_current;
        
        	let $iterationsGS;
        
        	let $init_vector_z;
        
        	let $init_vector_y;
        
        	let $init_vector_x;
        
        	let $computed_sinusx;
        
        	let $computed_cosinusx;
        
        	let $colourEq;
        
        	let $derivative_h;
        
        	let $resolutionFunction;
        
        	let $gradient_bounds;
        
        	let $x_grad_arrow;
        
        	let $y_grad_arrow;
        
        	let $param_a;
        
        	let $param_b;
        
        	let $GS_lineNumber;
        
        	let $coeff_diff_demo;
        
        	let derivative_h = writable(2.50);
        
        	component_subscribe($$self, derivative_h, value => $$invalidate(49, $derivative_h = value));
        
        	let sinusx = writable(1);
        
        	let cosinusx = writable(0);
        
        	let computed_sinusx = derived([sinusx, cosinusx], ([$sinusx, $cosinusx]) => $sinusx / Math.abs($sinusx) * Math.sqrt(1 - Math.pow($cosinusx, 2)));
        
        	component_subscribe($$self, computed_sinusx, value => $$invalidate(46, $computed_sinusx = value));
        
        	let computed_cosinusx = derived([sinusx, cosinusx], ([$sinusx, $cosinusx]) => $sinusx / Math.abs($sinusx) * Math.sqrt(1 - Math.pow($sinusx, 2)));
        
        	component_subscribe($$self, computed_cosinusx, value => $$invalidate(47, $computed_cosinusx = value));
        
        
        
        	// simpleVector
        
        	let direction = writable(0);
        
        
        
        	component_subscribe($$self, direction, value => $$invalidate(8, $direction = value));
        
        	let magnitude = writable(1);
        
        	component_subscribe($$self, magnitude, value => $$invalidate(7, $magnitude = value));
        
        	let displayTrig = writable(true);
        
        	let colourEq = writable(false);
        
        	component_subscribe($$self, colourEq, value => $$invalidate(48, $colourEq = value));
        
        	let posx = writable(1);
        
        	component_subscribe($$self, posx, value => $$invalidate(5, $posx = value));
        
        	let posy = writable(0);
        
        	component_subscribe($$self, posy, value => $$invalidate(3, $posy = value));
        
        	let posx_two = writable(1);
        
        	component_subscribe($$self, posx_two, value => $$invalidate(4, $posx_two = value));
        
        	let posy_two = writable(0);
        
        	component_subscribe($$self, posy_two, value => $$invalidate(2, $posy_two = value));
        
        
        
        	// vectorAddition
        
        	let tipToTail = writable(false);
        
        
        
        	// scalarMultiplication
        
        	let scalar = writable(1);
        
        
        
        	component_subscribe($$self, scalar, value => $$invalidate(6, $scalar = value));
        
        
        
        	// simpleDerivative
        
        	let selectedFunction = writable('f1');
        
        
        
        	let options = [
        
        		{
        
        			value: 'f1',
        
        			label: 'Polynôme de degré 3'
        
        		},
        
        		{ value: 'f2', label: 'cos(x)' },
        
        		{ value: 'f3', label: '3 * cos(x)' }
        
        	];
        
        
        
        	// gradient
        
        	let resolutionFunction = writable(60);
        
        
        
        	component_subscribe($$self, resolutionFunction, value => $$invalidate(50, $resolutionFunction = value));
        
        	let gradient_bounds = writable(3);
        
        	component_subscribe($$self, gradient_bounds, value => $$invalidate(51, $gradient_bounds = value));
        
        	let drawGrid_grad = writable(true);
        
        	let x_grad_arrow = writable(0);
        
        	component_subscribe($$self, x_grad_arrow, value => $$invalidate(52, $x_grad_arrow = value));
        
        	let y_grad_arrow = writable(0);
        
        	component_subscribe($$self, y_grad_arrow, value => $$invalidate(53, $y_grad_arrow = value));
        
        
        
        	// vectorField
        
        	let param_a = writable(1);
        
        
        
        	component_subscribe($$self, param_a, value => $$invalidate(54, $param_a = value));
        
        	let param_b = writable(1);
        
        	component_subscribe($$self, param_b, value => $$invalidate(55, $param_b = value));
        
        	let fieldHoverType = writable("vector");
        
        	let selectedField = writable("f1");
        
        	let options2 = [{ value: "f1", label: "(-ay, bx)" }, { value: "f2", label: "(ax, by)" }];
        
        	const setToDivergence = () => fieldHoverType.set("divergence");
        
        	const setToVector = () => fieldHoverType.set("vector");
        
        	const setToCurl = () => fieldHoverType.set("curl");
        
        
        
        	// gaussSiedel
        
        	let abs_bound = writable(3);
        
        
        
        	component_subscribe($$self, abs_bound, value => $$invalidate(1, $abs_bound = value));
        
        	let drawPlane1 = writable(true);
        
        	let drawPlane2 = writable(true);
        
        	let drawPlane3 = writable(true);
        
        	let a1 = writable(1);
        
        	component_subscribe($$self, a1, value => $$invalidate(144, $a1 = value));
        
        	let a2 = writable(1);
        
        	component_subscribe($$self, a2, value => $$invalidate(141, $a2 = value));
        
        	let a3 = writable(1);
        
        	component_subscribe($$self, a3, value => $$invalidate(138, $a3 = value));
        
        	let b1 = writable(1);
        
        	component_subscribe($$self, b1, value => $$invalidate(143, $b1 = value));
        
        	let b2 = writable(1);
        
        	component_subscribe($$self, b2, value => $$invalidate(140, $b2 = value));
        
        	let b3 = writable(1);
        
        	component_subscribe($$self, b3, value => $$invalidate(137, $b3 = value));
        
        	let c1 = writable(1);
        
        	component_subscribe($$self, c1, value => $$invalidate(142, $c1 = value));
        
        	let c2 = writable(1);
        
        	component_subscribe($$self, c2, value => $$invalidate(139, $c2 = value));
        
        	let c3 = writable(1);
        
        	component_subscribe($$self, c3, value => $$invalidate(136, $c3 = value));
        
        	let d1 = writable(1);
        
        	component_subscribe($$self, d1, value => $$invalidate(135, $d1 = value));
        
        	let d2 = writable(1);
        
        	component_subscribe($$self, d2, value => $$invalidate(134, $d2 = value));
        
        	let d3 = writable(1);
        
        	component_subscribe($$self, d3, value => $$invalidate(133, $d3 = value));
        
        	let drawPlanes = writable(true);
        
        	let drawCoords = writable(true);
        
        	let drawGaussSiedel = writable(true);
        
        	let automaticRotation = writable(true);
        
        	let iterationsGS = writable(10);
        
        	component_subscribe($$self, iterationsGS, value => $$invalidate(45, $iterationsGS = value));
        
        	let generateGaussSiedel = writable(0);
        
        	let init_vector_x = writable(0);
        
        	component_subscribe($$self, init_vector_x, value => $$invalidate(150, $init_vector_x = value));
        
        	let init_vector_y = writable(0);
        
        	component_subscribe($$self, init_vector_y, value => $$invalidate(149, $init_vector_y = value));
        
        	let init_vector_z = writable(0);
        
        	component_subscribe($$self, init_vector_z, value => $$invalidate(148, $init_vector_z = value));
        
        	let iterationGS_current = writable(1);
        
        	component_subscribe($$self, iterationGS_current, value => $$invalidate(145, $iterationGS_current = value));
        
        	let GS_lineNumber = writable(1);
        
        	component_subscribe($$self, GS_lineNumber, value => $$invalidate(56, $GS_lineNumber = value));
        
        	let GS_Vectors = [];
        
        
        
        	const generateGaussSiedelFn = () => {
        
        		generateGaussSiedel.update(v => v + 1);
        
        		$$invalidate(0, GS_Vectors = []);
        
        		init_vector_x.set(Math.random(-6, 6));
        
        		init_vector_y.set(Math.random(-6, 6));
        
        		init_vector_z.set(Math.random(-6, 6));
        
        		GS_Vectors.push([$init_vector_x, $init_vector_y, $init_vector_z]);
        
        		let coeffsMatrix = [[$a1, $b1, $c1], [$a2, $b2, $c2], [$a3, $b3, $c3]];
        
        		let constants = [-$d1, -$d2, -$d3];
        
        
        
        		for (let k = 1; k <= $iterationsGS; k++) {
        
        			GS_Vectors.push([]);
        
        
        
        			for (let i = 0; i < coeffsMatrix.length; i++) {
        
        				let sum = 0;
        
        
        
        				for (let j = 0; j < coeffsMatrix[i].length; j++) {
        
        					if (j < i) sum += coeffsMatrix[i][j] * GS_Vectors[k][j]; else if (j > i) sum += coeffsMatrix[i][j] * GS_Vectors[k - 1][j];
        
        				}
        
        
        
        				$$invalidate(0, GS_Vectors[k][i] = 1 / coeffsMatrix[i][i] * (constants[i] - sum), GS_Vectors);
        
        			}
        
        		}
        
        	};
        
        	let backwards_diff = writable("1");
        
        	let coeff_diff_demo = writable("0.5");
        
        	component_subscribe($$self, coeff_diff_demo, value => $$invalidate(57, $coeff_diff_demo = value));
        
        
        
        	const radioOptions = [
        
        		{ value: "1", label: "Méthode instable" },
        
        		{ value: "2", label: "Méthode stable" }
        
        	];
        
        
        
        	let reset_advection_step = writable(0);
        
        
        
        	const resetAdvectionStep = () => {
        
        		reset_advection_step.update(v => v + 1);
        
        	};
        
        
        
        	// fluidSimulation 
        
        	let color_one_red = writable(255);
        
        
        
        	let color_one_green = writable(143);
        
        	let color_one_blue = writable(177);
        
        	let color_fl_red = writable(122);
        
        	let color_fl_green = writable(68);
        
        	let color_fl_blue = writable(149);
        
        	let fluid_viscosity = writable(0.01);
        
        	let ink_diffusion = writable(0.01);
        
        	let stopDiffuse = writable(0);
        
        	let numberTilesTwo = writable(50);
        
        
        
        	const big_matrice = `\\overbrace{\\begin{pmatrix}
        
           -\\bold{4} & \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}\\\\
        
           \\bold{\\color{#C800FF}{1}} & -\\bold{4} & \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}\\\\
        
           \\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} & -\\bold{4} &\\color{#9696A0}{0}&\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}\\\\
        
           \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}&\\color{#9696A0}{0}& -\\bold{4} & \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}&\\color{#9696A0}{0}\\\\
        
           \\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} & -\\bold{4} & \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}\\\\
        
           \\color{#9696A0}{0}&\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} & -\\bold{4} &\\color{#9696A0}{0}&\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} \\\\
        
           \\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}&\\color{#9696A0}{0}&  -\\bold{4} & \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}\\\\
        
           \\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} & -\\bold{4} & \\bold{\\color{#C800FF}{1}} \\\\
        
           \\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}&\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} &\\color{#9696A0}{0}& \\bold{\\color{#C800FF}{1}} & -\\bold{4} \\\\
        
        \\end{pmatrix}}^{Matrice \\space carrée \\space m \\space \\times \\space n \\space avec \\space m \\space =\\space  n \\space = \\space N \\space \\times \\space N} \\cdot \\overbrace{\\begin{pmatrix}
        
           x^{(t)}_0 \\\\
        
           x^{(t)}_1 \\\\
        
           x^{(t)}_2 \\\\
        
           x^{(t)}_3 \\\\
        
           x^{(t)}_4 \\\\
        
           x^{(t)}_5 \\\\
        
           x^{(t)}_6 \\\\
        
           x^{(t)}_7 \\\\
        
           x^{(t)}_8 \\\\
        
        \\end{pmatrix}}^{Nouvelle \\space grille \\space inconnue} = \\overbrace{\\begin{pmatrix}
        
            x^{(t - 1)}_0 \\\\
        
            x^{(t - 1)}_1 \\\\
        
            x^{(t - 1)}_2 \\\\
        
            x^{(t - 1)}_3 \\\\
        
            x^{(t - 1)}_4 \\\\
        
            x^{(t - 1)}_5 \\\\
        
            x^{(t - 1)}_6 \\\\
        
            x^{(t - 1)}_7 \\\\
        
            x^{(t - 1)}_8 \\\\
        
        \\end{pmatrix}}^{Ancienne \\space grille \\space connue}`;
        
        
        
        	const gs_ln_1_2 = `\\boxed{a_\\bold{\\textcolor{#FFC800}{1}}x + b_\\bold{\\textcolor{#FFC800}{1}}y + c_\\bold{\\textcolor{#FFC800}{1}}z + d_\\bold{\\textcolor{#FFC800}{1}} = 0}`;
        
        	const change_handler = () => GS_lineNumber.set(1);
        
        
        
        	$$self.$$.update = () => {
        
        		if ($$self.$$.dirty[0] & /*GS_Vectors*/ 1 | $$self.$$.dirty[4] & /*$iterationGS_current*/ 2097152) {
        
        			$$invalidate(44, gs_ln_1_1 = GS_Vectors.length > 0
        
        			? `\\overbrace{\\vec{x}^{(${$iterationGS_current - 1})} = \\begin{pmatrix} ${GS_Vectors[$iterationGS_current - 1][0].toFixed(3).replace(/\\.?0+$/, '')} \\\\ \\colorbox{aqua}{\$${GS_Vectors[$iterationGS_current - 1][1].toFixed(3).replace(/\\.?0+$/, '')}\$} \\\\ \\colorbox{aqua}{\$${GS_Vectors[$iterationGS_current - 1][2].toFixed(3).replace(/\\.?0+$/, '')}\$} \\end{pmatrix}}^{précédent} \\qquad \\overbrace{\\vec{x}^{(${$iterationGS_current})} = \\begin{pmatrix} \\bold{${GS_Vectors[$iterationGS_current][0].toFixed(3).replace(/\\.?0+$/, '')}} \\\\ ? \\\\ ? \\end{pmatrix}}^{calculé}`
        
        			: "error");
        
        		}
        
        
        
        		if ($$self.$$.dirty[4] & /*$iterationGS_current*/ 2097152) {
        
        			$$invalidate(43, gs_ln_1_3 = `a_\\bold{\\textcolor{#FFC800}{1}}x^{(${$iterationGS_current})} = -b_\\bold{\\textcolor{#FFC800}{1}}y^{(${$iterationGS_current - 1})} - c_\\bold{\\textcolor{#FFC800}{1}}z^{(${$iterationGS_current - 1})} - d_\\bold{\\textcolor{#FFC800}{1}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[4] & /*$iterationGS_current*/ 2097152) {
        
        			$$invalidate(42, gs_ln_1_4 = `x^{(${$iterationGS_current})} = -\\frac{b_\\bold{\\textcolor{#FFC800}{1}}y^{(${$iterationGS_current - 1})} + c_\\bold{\\textcolor{#FFC800}{1}}z^{(${$iterationGS_current - 1})} + d_\\bold{\\textcolor{#FFC800}{1}}}{a_\\bold{\\textcolor{#FFC800}{1}}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[4] & /*$iterationGS_current*/ 2097152) {
        
        			$$invalidate(41, gs_ln_1_5 = `x^{(${$iterationGS_current})} = -\\frac{b_\\bold{\\textcolor{#FFC800}{1}}y^{(${$iterationGS_current - 1})} + c_\\bold{\\textcolor{#FFC800}{1}}z^{(${$iterationGS_current - 1})} + d_\\bold{\\textcolor{#FFC800}{1}}}{a_\\bold{\\textcolor{#FFC800}{1}}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*GS_Vectors*/ 1 | $$self.$$.dirty[4] & /*$iterationGS_current, $b1, $c1, $d1, $a1*/ 3934208) {
        
        			$$invalidate(40, gs_ln_1_6 = GS_Vectors.length > 0
        
        			? `x^{(${$iterationGS_current})} = -\\frac{\\bold{\\textcolor{#FFC800}{${$b1.toFixed(3).replace(/\.?0+$/, '')}}} \\times ${GS_Vectors[$iterationGS_current - 1][1].toFixed(3).replace(/\.?0+$/, '')} + \\bold{\\textcolor{#FFC800}{${$c1.toFixed(3).replace(/\.?0+$/, '')}}} \\times ${GS_Vectors[$iterationGS_current - 1][2].toFixed(3).replace(/\.?0+$/, '')} + \\bold{\\textcolor{#FFC800}{${$d1.toFixed(3).replace(/\.?0+$/, '')}}}}{\\bold{\\textcolor{#FFC800}{${$a1.toFixed(3).replace(/\.?0+$/, '')}}}} = \\bold{${GS_Vectors[$iterationGS_current][0].toFixed(3).replace(/\.?0+$/, '')}}`
        
        			: "error");
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*GS_Vectors*/ 1 | $$self.$$.dirty[4] & /*$iterationGS_current*/ 2097152) {
        
        			$$invalidate(39, gs_ln_2_1 = GS_Vectors.length > 0
        
        			? `\\overbrace{\\vec{x}^{(${$iterationGS_current - 1})} = \\begin{pmatrix} ${GS_Vectors[$iterationGS_current - 1][0].toFixed(3).replace(/\.?0+$/, '')} \\\\ ${GS_Vectors[$iterationGS_current - 1][1].toFixed(3).replace(/\.?0+$/, '')} \\\\ \\colorbox{aqua}{\$${GS_Vectors[$iterationGS_current - 1][2].toFixed(3).replace(/\.?0+$/, '')}\$} \\end{pmatrix}}^{précédent} \\qquad \\overbrace{\\vec{x}^{(${$iterationGS_current})} = \\begin{pmatrix} \\colorbox{aqua}{\$${GS_Vectors[$iterationGS_current][0].toFixed(3).replace(/\.?0+$/, '')}\$} \\\\ \\bold{${GS_Vectors[$iterationGS_current][1].toFixed(3).replace(/\.?0+$/, '')}} \\\\ ? \\end{pmatrix}}^{calculé}`
        
        			: "error");
        
        		}
        
        
        
        		if ($$self.$$.dirty[4] & /*$iterationGS_current*/ 2097152) {
        
        			$$invalidate(38, gs_ln_2_3 = `b_\\bold{\\textcolor{#00FFC8}{2}}y^{(${$iterationGS_current})} = -a_\\bold{\\textcolor{#00FFC8}{2}}x^{(${$iterationGS_current})} - c_\\bold{\\textcolor{#00FFC8}{2}}z^{(${$iterationGS_current - 1})} - d_\\bold{\\textcolor{#00FFC8}{2}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[4] & /*$iterationGS_current*/ 2097152) {
        
        			$$invalidate(37, gs_ln_2_4 = `y^{(${$iterationGS_current})} = -\\frac{a_\\bold{\\textcolor{#00FFC8}{2}}x^{(${$iterationGS_current})} + c_\\bold{\\textcolor{#00FFC8}{2}}z^{(${$iterationGS_current - 1})} + d_\\bold{\\textcolor{#00FFC8}{2}}}{b_\\bold{\\textcolor{#00FFC8}{2}}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[4] & /*$iterationGS_current, $a2, $c2, $d2, $b2*/ 2327552) {
        
        			$$invalidate(36, gs_ln_2_5 = `y^{(${$iterationGS_current})} = -\\frac{\\bold{\\textcolor{#00FFC8}{${$a2.toFixed(3).replace(/\.?0+$/, '')}}}x^{(${$iterationGS_current})} + \\bold{\\textcolor{#00FFC8}{${$c2.toFixed(3).replace(/\.?0+$/, '')}}}z^{(${$iterationGS_current - 1})} + \\bold{\\textcolor{#00FFC8}{${$d2.toFixed(3).replace(/\.?0+$/, '')}}}}{\\bold{\\textcolor{#00FFC8}{${$b2.toFixed(3).replace(/\.?0+$/, '')}}}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*GS_Vectors*/ 1 | $$self.$$.dirty[4] & /*$iterationGS_current, $a2, $c2, $d2, $b2*/ 2327552) {
        
        			$$invalidate(35, gs_ln_2_6 = GS_Vectors.length > 0
        
        			? `y^{(${$iterationGS_current})} = -\\frac{\\bold{\\textcolor{#00FFC8}{${$a2.toFixed(3).replace(/\.?0+$/, '')}}} \\times ${GS_Vectors[$iterationGS_current][0].toFixed(3).replace(/\.?0+$/, '')} + \\bold{\\textcolor{#00FFC8}{${$c2.toFixed(3).replace(/\.?0+$/, '')}}} \\times ${GS_Vectors[$iterationGS_current - 1][2].toFixed(3).replace(/\.?0+$/, '')} + \\bold{\\textcolor{#00FFC8}{${$d2.toFixed(3).replace(/\.?0+$/, '')}}}}{\\bold{\\textcolor{#00FFC8}{${$b2.toFixed(3).replace(/\.?0+$/, '')}}}} = \\bold{${GS_Vectors[$iterationGS_current][1].toFixed(3).replace(/\.?0+$/, '')}}`
        
        			: 'error');
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*GS_Vectors*/ 1 | $$self.$$.dirty[4] & /*$iterationGS_current*/ 2097152) {
        
        			$$invalidate(34, gs_ln_3_1 = GS_Vectors.length > 0
        
        			? `\\overbrace{\\vec{x}^{(${$iterationGS_current - 1})} = \\begin{pmatrix} ${GS_Vectors[$iterationGS_current - 1][0].toFixed(3).replace(/\.?0+$/, '')} \\\\ ${GS_Vectors[$iterationGS_current - 1][1].toFixed(3).replace(/\.?0+$/, '')} \\\\ ${GS_Vectors[$iterationGS_current - 1][2].toFixed(3).replace(/\.?0+$/, '')} \\end{pmatrix}}^{précédent} \\qquad \\overbrace{\\vec{x}^{(${$iterationGS_current})} = \\begin{pmatrix} \\colorbox{aqua}{\$${GS_Vectors[$iterationGS_current][0].toFixed(3).replace(/\.?0+$/, '')}\$} \\\\ \\colorbox{aqua}{\$${GS_Vectors[$iterationGS_current][1].toFixed(3).replace(/\.?0+$/, '')}\$} \\\\ \\bold{${GS_Vectors[$iterationGS_current][2].toFixed(3).replace(/\.?0+$/, '')}} \\end{pmatrix}}^{calculé}`
        
        			: "error");
        
        		}
        
        
        
        		if ($$self.$$.dirty[4] & /*$iterationGS_current*/ 2097152) {
        
        			$$invalidate(33, gs_ln_3_3 = `c_\\bold{\\textcolor{#C800FF}{3}}z^{(${$iterationGS_current})} = -a_\\bold{\\textcolor{#C800FF}{3}}x^{(${$iterationGS_current})} - b_\\bold{\\textcolor{#C800FF}{3}}y^{(${$iterationGS_current})} - d_\\bold{\\textcolor{#C800FF}{3}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[4] & /*$iterationGS_current*/ 2097152) {
        
        			$$invalidate(32, gs_ln_3_4 = `z^{(${$iterationGS_current})} = -\\frac{b_\\bold{\\textcolor{#C800FF}{3}}y^{(${$iterationGS_current})} + a_\\bold{\\textcolor{#C800FF}{3}}x^{(${$iterationGS_current})} + d_\\bold{\\textcolor{#C800FF}{3}}}{c_\\bold{\\textcolor{#C800FF}{3}}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[4] & /*$iterationGS_current, $b3, $a3, $d3, $c3*/ 2126336) {
        
        			$$invalidate(31, gs_ln_3_5 = `z^{(${$iterationGS_current})} = -\\frac{\\bold{\\textcolor{#C800FF}{${$b3.toFixed(3).replace(/\.?0+$/, '')}}}y^{(${$iterationGS_current})} + \\bold{\\textcolor{#C800FF}{${$a3.toFixed(3).replace(/\.?0+$/, '')}}}x^{(${$iterationGS_current})} + \\bold{\\textcolor{#C800FF}{${$d3.toFixed(3).replace(/\.?0+$/, '')}}}}{\\bold{\\textcolor{#C800FF}{${$c3.toFixed(3).replace(/\.?0+$/, '')}}}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*GS_Vectors*/ 1 | $$self.$$.dirty[4] & /*$iterationGS_current, $b3, $a3, $d3, $c3*/ 2126336) {
        
        			$$invalidate(30, gs_ln_3_6 = GS_Vectors.length > 0
        
        			? `z^{(${$iterationGS_current})} = -\\frac{\\bold{\\textcolor{#C800FF}{${$b3.toFixed(3).replace(/\.?0+$/, '')}}} \\times ${GS_Vectors[$iterationGS_current][1].toFixed(3).replace(/\.?0+$/, '')} + \\bold{\\textcolor{#C800FF}{${$a3.toFixed(3).replace(/\.?0+$/, '')}}} \\times ${GS_Vectors[$iterationGS_current][0].toFixed(3).replace(/\.?0+$/, '')} + \\bold{\\textcolor{#C800FF}{${$d3.toFixed(3).replace(/\.?0+$/, '')}}}}{\\bold{\\textcolor{#C800FF}{${$c3.toFixed(3).replace(/\.?0+$/, '')}}}} = \\bold{${GS_Vectors[$iterationGS_current][2].toFixed(3).replace(/\.?0+$/, '')}}`
        
        			: "error");
        
        		}
        
        
        
        		if ($$self.$$.dirty[4] & /*$a1, $b1, $c1, $d1, $a2, $b2, $c2, $d2, $a3, $b3, $c3, $d3*/ 2096640) {
        
        			$$invalidate(29, gs_equation_system = `\\begin{cases} \\bold{\\textcolor{#FFC800}{${$a1.toFixed(3).replace(/\\.?0+$/, '')}}}x + \\bold{\\textcolor{#FFC800}{${$b1.toFixed(3).replace(/\\.?0+$/, '')}}}y + \\bold{\\textcolor{#FFC800}{${$c1.toFixed(3).replace(/\\.?0+$/, '')}}}z + \\bold{\\textcolor{#FFC800}{${$d1.toFixed(3).replace(/\\.?0+$/, '')}}} = 0 \\\\ \\bold{\\textcolor{#00FFC8}{${$a2.toFixed(3).replace(/\\.?0+$/, '')}}}x + \\bold{\\textcolor{#00FFC8}{${$b2.toFixed(3).replace(/\\.?0+$/, '')}}}y + \\bold{\\textcolor{#00FFC8}{${$c2.toFixed(3).replace(/\\.?0+$/, '')}}}z + \\bold{\\textcolor{#00FFC8}{${$d2.toFixed(3).replace(/\\.?0+$/, '')}}} = 0 \\\\ \\bold{\\textcolor{#C800FF}{${$a3.toFixed(3).replace(/\\.?0+$/, '')}}}x + \\bold{\\textcolor{#C800FF}{${$b3.toFixed(3).replace(/\\.?0+$/, '')}}}y + \\bold{\\textcolor{#C800FF}{${$c3.toFixed(3).replace(/\\.?0+$/, '')}}}z + \\bold{\\textcolor{#C800FF}{${$d3.toFixed(3).replace(/\\.?0+$/, '')}}} = 0 \\end{cases}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[4] & /*$a1, $b1, $c1, $a2, $b2, $c2, $a3, $b3, $c3, $d1, $d2, $d3*/ 2096640) {
        
        			$$invalidate(28, gs_system_matrice = `\\underbrace{\\begin{pmatrix} \\textcolor{#FFC800}{${$a1.toFixed(3).replace(/\\.?0+$/, '')}} & \\textcolor{#FFC800}{${$b1.toFixed(3).replace(/\\.?0+$/, '')}} & \\textcolor{#FFC800}{${$c1.toFixed(3).replace(/\\.?0+$/, '')}} \\\\ \\textcolor{#00FFC8}{${$a2.toFixed(3).replace(/\\.?0+$/, '')}} & \\textcolor{#00FFC8}{${$b2.toFixed(3).replace(/\\.?0+$/, '')}} & \\textcolor{#00FFC8}{${$c2.toFixed(3).replace(/\\.?0+$/, '')}} \\\\ \\textcolor{#C800FF}{${$a3.toFixed(3).replace(/\\.?0+$/, '')}} &  \\textcolor{#C800FF}{${$b3.toFixed(3).replace(/\\.?0+$/, '')}} & \\textcolor{#C800FF}{${$c3.toFixed(3).replace(/\\.?0+$/, '')}} \\end{pmatrix}}_{coefficients} \\cdot \\begin{pmatrix} x \\\\ y \\\\ z \\end{pmatrix} = \\underbrace{\\begin{pmatrix} \\textcolor{#FFC800}{${-$d1.toFixed(3).replace(/\\.?0+$/, '')}} \\\\ \\textcolor{#00FFC8}{${-$d2.toFixed(3).replace(/\\.?0+$/, '')}} \\\\ \\textcolor{#C800FF}{${-$d3.toFixed(3).replace(/\\.?0+$/, '')}} \\end{pmatrix}}_{constantes}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$direction, $magnitude*/ 384) {
        
        			// Remplacement des déclarations réactives par des littéraux de gabarit
        
        			$$invalidate(27, vector_uncolored = `\\begin{pmatrix} x \\\\ y \\end{pmatrix} = \\begin{pmatrix} cos(\\theta) \\times m \\\\ sin(\\theta) \\times m \\end{pmatrix} = \\begin{pmatrix} cos(${($direction * Math.PI).toFixed(3).replace(/\.?0+$/, '')}) \\times ${$magnitude} \\\\ sin(${($direction * Math.PI).toFixed(3).replace(/\.?0+$/, '')}) \\times ${$magnitude} \\end{pmatrix}= \\begin{pmatrix} ${(Math.cos($direction * Math.PI) * $magnitude).toFixed(3).replace(/\.?0+$/, '')} \\\\ ${(Math.sin($direction * Math.PI) * $magnitude).toFixed(3).replace(/\.?0+$/, '')} \\end{pmatrix}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$direction, $magnitude*/ 384) {
        
        			$$invalidate(26, vector_colored = `\\begin{pmatrix} \\textcolor{#0000FF}{x} \\\\ \\textcolor{#FF0000}{y} \\end{pmatrix} = \\begin{pmatrix} cos(\\theta) \\times m \\\\ sin(\\theta) \\times m \\end{pmatrix} = \\begin{pmatrix} cos(${($direction * Math.PI).toFixed(3).replace(/\.?0+$/, '')}) \\times ${$magnitude} \\\\ sin(${($direction * Math.PI).toFixed(3).replace(/\.?0+$/, '')}) \\times ${$magnitude} \\end{pmatrix}= \\begin{pmatrix} \\textcolor{#0000FF}{${(Math.cos($direction * Math.PI) * $magnitude).toFixed(3).replace(/\.?0+$/, '')}} \\\\ \\textcolor{#FF0000}{${(Math.sin($direction * Math.PI) * $magnitude).toFixed(3).replace(/\.?0+$/, '')}} \\end{pmatrix}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$posx, $posy*/ 40) {
        
        			$$invalidate(25, magnitude_uncolored = `m = \\sqrt{x^2 + y^2} = \\sqrt{${$posx}^2 + ${$posy}^2} = \\bold{${Math.sqrt($posx * $posx + $posy * $posy).toFixed(3).replace(/\.?0+$/, '')}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$posx, $posy*/ 40) {
        
        			$$invalidate(24, magnitude_colored = `\\textcolor{#A349A4}{m} = \\sqrt{\\textcolor{#0000FF}{x}^2 + \\textcolor{#FF0000}{y}^2} = \\sqrt{\\textcolor{#0000FF}{${$posx}}^2 + \\textcolor{#FF0000}{${$posy}}^2} = \\bold{${Math.sqrt($posx * $posx + $posy * $posy).toFixed(3).replace(/\.?0+$/, '')}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$posx, $posy*/ 40) {
        
        			$$invalidate(22, direction2_uncolored = `\\arccos\\left(\\dfrac{${$posx}}{${Math.sqrt($posx * $posx + $posy * $posy).toFixed(3).replace(/\.?0+$/, '')}}\\right) \\times \\begin{cases} \\frac{${$posy}}{${Math.sqrt($posx * $posx + $posy * $posy).toFixed(3).replace(/\.?0+$/, '')}} \\times \\vert \\frac{${Math.sqrt($posx * $posx + $posy * $posy).toFixed(3).replace(/\.?0+$/, '')}}{${$posy}} \\vert &\\text{si } ${$posy} \\neq 0 \\\\ 1 &\\text{si } ${$posy} = 0 \\end{cases} = \\bold{${($posy / Math.sqrt($posx * $posx + $posy * $posy) / (Math.abs($posy / (Math.sqrt($posx * $posx + $posy * $posy) + 0.00001)) + 0.00001) * Math.acos($posx / (Math.sqrt($posx * $posx + $posy * $posy) + 0.00001))).toFixed(3).replace(/\.?0+$/, '')}}\\space \\text{rad} \\approx \\bold{${($posy / Math.sqrt($posx * $posx + $posy * $posy) / (Math.abs($posy / (Math.sqrt($posx * $posx + $posy * $posy) + 0.00001)) + 0.00001) * Math.acos($posx / (Math.sqrt($posx * $posx + $posy * $posy) + 0.00001)) * 180 / Math.PI).toFixed(3).replace(/\.?0+$/, '')}} \\degree`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$posx, $posy*/ 40) {
        
        			$$invalidate(20, direction2_colored = `\\arccos\\left(\\dfrac{\\textcolor{#0000FF}{${$posx}}}{\\textcolor{#A349A4}{${Math.sqrt($posx * $posx + $posy * $posy).toFixed(3).replace(/\\.?0+\$/, '')}}}\\right) \\times \\begin{cases} \\frac{\\textcolor{#FF0000}{${$posy}}}{\\textcolor{#A349A4}{${Math.sqrt($posx * $posx + $posy * $posy).toFixed(3).replace(/\\.?0+\$/, '')}}} \\times \\vert \\frac{\\textcolor{#A349A4}{${Math.sqrt($posx * $posx + $posy * $posy).toFixed(3).replace(/\\.?0+\$/, '')}}}{\\textcolor{#FF0000}{${$posy}}} \\vert &\\text{si } \\textcolor{#FF0000}{${$posy}} \\neq 0 \\\\ 1 &\\text{si } \\textcolor{#FF0000}{${$posy}} = 0 \\end{cases} = \\textcolor{#808080}{\\bold{${($posy / Math.sqrt($posx * $posx + $posy * $posy) / (Math.abs($posy / (Math.sqrt($posx * $posx + $posy * $posy) + 0.00001)) + 0.00001) * Math.acos($posx / (Math.sqrt($posx * $posx + $posy * $posy) + 0.00001))).toFixed(3).replace(/\\.?0+\$/, '')}}}\\space \\text{rad} \\approx \\textcolor{#808080}{\\bold{${($posy / Math.sqrt($posx * $posx + $posy * $posy) / (Math.abs($posy / (Math.sqrt($posx * $posx + $posy * $posy) + 0.00001)) + 0.00001) * Math.acos($posx / (Math.sqrt($posx * $posx + $posy * $posy) + 0.00001)) * 180 / Math.PI).toFixed(3).replace(/\\.?0+\$/, '')}}} \\degree`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$posx, $posx_two, $posy, $posy_two*/ 60) {
        
        			$$invalidate(19, vectorAddition_uncolored = `\\begin{pmatrix} x_1 \\\\ y_1 \\end{pmatrix} + \\begin{pmatrix} x_2 \\\\ y_2 \\end{pmatrix} = \\begin{pmatrix} x_1 + x_2 \\\\ y_1 + y_2 \\end{pmatrix} = \\begin{pmatrix} ${$posx} + ${$posx_two} \\\\ ${$posy} + ${$posy_two} \\end{pmatrix} = \\begin{pmatrix} ${($posx + $posx_two).toFixed(3).replace(/\\.?0+$/, '')} \\\\ ${($posy + $posy_two).toFixed(3).replace(/\\.?0+$/, '')} \\end{pmatrix}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$posx, $posx_two, $posy, $posy_two*/ 60) {
        
        			$$invalidate(18, vectorAddition_colored = `\\begin{pmatrix} \\textcolor{#0000FF}{x_1} \\\\ \\textcolor{#0000FF}{y_1} \\end{pmatrix} + \\begin{pmatrix} \\textcolor{#FF0000}{x_2} \\\\ \\textcolor{#FF0000}{y_2} \\end{pmatrix} = \\begin{pmatrix} \\textcolor{#0000FF}{x_1} + \\textcolor{#FF0000}{x_2} \\\\ \\textcolor{#0000FF}{y_1} + \\textcolor{#FF0000}{y_2} \\end{pmatrix} = \\begin{pmatrix} \\textcolor{#0000FF}{${$posx}} + \\textcolor{#FF0000}{${$posx_two}} \\\\ \\textcolor{#0000FF}{${$posy}} + \\textcolor{#FF0000}{${$posy_two}} \\end{pmatrix} = \\begin{pmatrix} \\textcolor{#00FF00}{${($posx + $posx_two).toFixed(3).replace(/\\.?0+$/, '')}} \\\\ \\textcolor{#00FF00}{${($posy + $posy_two).toFixed(3).replace(/\\.?0+$/, '')}} \\end{pmatrix}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$scalar, $posx, $posy*/ 104) {
        
        			$$invalidate(17, scalarMultiplication_uncolored = `\\bold{${$scalar}} \\times \\begin{pmatrix} x \\\\ y \\end{pmatrix} = \\begin{pmatrix} \\bold{${$scalar}} \\times x \\\\ \\bold{${$scalar}} \\times y \\end{pmatrix} = \\begin{pmatrix} \\bold{${$scalar}} \\times ${$posx} \\\\ \\bold{${$scalar}} \\times ${$posy} \\end{pmatrix} = \\begin{pmatrix} ${($scalar * $posx).toFixed(3).replace(/\.?0+$/, '')} \\\\ ${($scalar * $posy).toFixed(3).replace(/\.?0+$/, '')} \\end{pmatrix}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$scalar, $posx, $posy*/ 104) {
        
        			$$invalidate(16, scalarMultiplication_colored = `\\bold{${$scalar}} \\times \\begin{pmatrix} x \\\\ y \\end{pmatrix} = \\begin{pmatrix} \\bold{${$scalar}} \\times x \\\\ \\bold{${$scalar}} \\times y \\end{pmatrix} =  \\begin{pmatrix} \\bold{${$scalar}} \\times ${$posx} \\\\ \\bold{${$scalar}} \\times ${$posy} \\end{pmatrix} = \\begin{pmatrix} \\textcolor{${(function (s) {
        
        				let i = Math.abs(s) / 5;
        
        				let red = Math.ceil(i * 255);
        
        				let green = 255 - red;
        
        				let redHexStr = red.toString(16);
        
        
        
        				redHexStr = redHexStr.length < 2
        
        				? ("0" + redHexStr).toUpperCase()
        
        				: redHexStr.toUpperCase();
        
        
        
        				let greenHexStr = green.toString(16);
        
        
        
        				greenHexStr = greenHexStr.length < 2
        
        				? ("0" + greenHexStr).toUpperCase()
        
        				: greenHexStr.toUpperCase();
        
        
        
        				return "#" + redHexStr + greenHexStr + "00";
        
        			})($scalar)}}{${($scalar * $posx).toFixed(3).replace(/\.?0+$/, '')}} \\\\ \\textcolor{${(function (s) {
        
        				let i = Math.abs(s) / 5;
        
        				let red = Math.ceil(i * 255);
        
        				let green = 255 - red;
        
        				let redHexStr = red.toString(16);
        
        
        
        				redHexStr = redHexStr.length < 2
        
        				? ("0" + redHexStr).toUpperCase()
        
        				: redHexStr.toUpperCase();
        
        
        
        				let greenHexStr = green.toString(16);
        
        
        
        				greenHexStr = greenHexStr.length < 2
        
        				? ("0" + greenHexStr).toUpperCase()
        
        				: greenHexStr.toUpperCase();
        
        
        
        				return "#" + redHexStr + greenHexStr + "00";
        
        			})($scalar)}}{${($scalar * $posy).toFixed(3).replace(/\.?0+$/, '')}} \\end{pmatrix}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$posx, $posx_two, $posy, $posy_two*/ 60) {
        
        			$$invalidate(11, dotProductAlgebric2_uncolored = `= ${$posx} \\cdot ${$posx_two} + ${$posy} \\cdot ${$posy_two} = ${($posx * $posx_two).toFixed(3).replace(/\.?0+$/, '')} + ${($posy * $posy_two).toFixed(3).replace(/\.?0+$/, '')} = \\bold{${($posx * $posx_two + $posy * $posy_two).toFixed(3).replace(/\.?0+$/, '')}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$posx, $posx_two, $posy, $posy_two*/ 60) {
        
        			$$invalidate(10, dotProductAlgebric2_colored = `= \\textcolor{#0000FF}{${$posx}} \\cdot \\textcolor{#FF0000}{${$posx_two}} + \\textcolor{#0000FF}{${$posy}} \\cdot \\textcolor{#FF0000}{${$posy_two}} = ${($posx * $posx_two).toFixed(3).replace(/\.?0+$/, '')} + ${($posy * $posy_two).toFixed(3).replace(/\.?0+$/, '')} = \\bold{${($posx * $posx_two + $posy * $posy_two).toFixed(3).replace(/\.?0+$/, '')}}`);
        
        		}
        
        
        
        		if ($$self.$$.dirty[0] & /*$abs_bound*/ 2) {
        
        			$$invalidate(9, gs_interval = `[${-$abs_bound}, ${$abs_bound}]`);
        
        		}
        
        	};
        
        
        
        	$$invalidate(23, direction1_uncolored = "\\arccos\\left(\\dfrac{x}{m}\\right) \\times \\begin{cases} \\dfrac{\\frac{y}{m}}{\\vert\\frac{y}{m}\\vert} = \\frac{y}{m} \\times \\vert \\frac{m}{y} \\vert &\\text{si } y \\neq 0 \\\\ 1 &\\text{si } y = 0 \\end{cases}");
        
        	$$invalidate(21, direction1_colored = `\\arccos\\left(\\dfrac{\\textcolor{#0000FF}{x}}{\\textcolor{#A349A4}{m} }\\right) \\times \\begin{cases} \\dfrac{\\frac{\\textcolor{#FF0000}{y}}{\\textcolor{#A349A4}{m} }}{\\vert\\frac{\\textcolor{#FF0000}{y}}{\\textcolor{#A349A4}{m} }\\vert} = \\frac{\\textcolor{#FF0000}{y}}{\\textcolor{#A349A4}{m} } \\times \\vert \\frac{\\textcolor{#A349A4}{m}}{\\textcolor{#FF0000}{y}} \\vert &\\text{si } \\textcolor{#FF0000}{y} \\neq 0 \\\\ 1 &\\text{si } \\textcolor{#FF0000}{y} = 0 \\end{cases}`);
        
        	$$invalidate(15, dotProductGeometric_uncolored = `\\lVert \\vec{v_2} \\rVert \\times \\overbrace{\\lVert \\vec{v_1} \\rVert  \\cos (\\theta)}`);
        
        	$$invalidate(14, dotProductGeometric_colored = `\\lVert \\textcolor{#FF0000}{\\vec{v_2}} \\rVert \\times \\overbrace{\\lVert \\textcolor{#0000FF}{\\vec{v_1}} \\rVert  \\cos (\\theta)}^{\\text projection \\space de \\space \\textcolor{#0000FF}{\\vec{v1}} \\space sur \\space \\textcolor{#FF0000}{\\vec{v2}} }`);
        
        	$$invalidate(13, dotProductAlgebric1_uncolored = `\\begin{pmatrix} x_1 \\\\ y_1 \\end{pmatrix} \\cdot \\begin{pmatrix} x_2 \\\\ y_2 \\end{pmatrix} = x_1 x_2 + y_1 y_2`);
        
        	$$invalidate(12, dotProductAlgebric1_colored = `\\begin{pmatrix} \\textcolor{#0000FF}{x_1} \\\\ \\textcolor{#0000FF}{y_1} \\end{pmatrix} \\cdot \\begin{pmatrix} \\textcolor{#FF0000}{x_2} \\\\ \\textcolor{#FF0000}{y_2} \\end{pmatrix}`);
        
        
        
        	return [
        
        		GS_Vectors,
        
        		$abs_bound,
        
        		$posy_two,
        
        		$posy,
        
        		$posx_two,
        
        		$posx,
        
        		$scalar,
        
        		$magnitude,
        
        		$direction,
        
        		gs_interval,
        
        		dotProductAlgebric2_colored,
        
        		dotProductAlgebric2_uncolored,
        
        		dotProductAlgebric1_colored,
        
        		dotProductAlgebric1_uncolored,
        
        		dotProductGeometric_colored,
        
        		dotProductGeometric_uncolored,
        
        		scalarMultiplication_colored,
        
        		scalarMultiplication_uncolored,
        
        		vectorAddition_colored,
        
        		vectorAddition_uncolored,
        
        		direction2_colored,
        
        		direction1_colored,
        
        		direction2_uncolored,
        
        		direction1_uncolored,
        
        		magnitude_colored,
        
        		magnitude_uncolored,
        
        		vector_colored,
        
        		vector_uncolored,
        
        		gs_system_matrice,
        
        		gs_equation_system,
        
        		gs_ln_3_6,
        
        		gs_ln_3_5,
        
        		gs_ln_3_4,
        
        		gs_ln_3_3,
        
        		gs_ln_3_1,
        
        		gs_ln_2_6,
        
        		gs_ln_2_5,
        
        		gs_ln_2_4,
        
        		gs_ln_2_3,
        
        		gs_ln_2_1,
        
        		gs_ln_1_6,
        
        		gs_ln_1_5,
        
        		gs_ln_1_4,
        
        		gs_ln_1_3,
        
        		gs_ln_1_1,
        
        		$iterationsGS,
        
        		$computed_sinusx,
        
        		$computed_cosinusx,
        
        		$colourEq,
        
        		$derivative_h,
        
        		$resolutionFunction,
        
        		$gradient_bounds,
        
        		$x_grad_arrow,
        
        		$y_grad_arrow,
        
        		$param_a,
        
        		$param_b,
        
        		$GS_lineNumber,
        
        		$coeff_diff_demo,
        
        		derivative_h,
        
        		sinusx,
        
        		cosinusx,
        
        		computed_sinusx,
        
        		computed_cosinusx,
        
        		direction,
        
        		magnitude,
        
        		displayTrig,
        
        		colourEq,
        
        		posx,
        
        		posy,
        
        		posx_two,
        
        		posy_two,
        
        		tipToTail,
        
        		scalar,
        
        		selectedFunction,
        
        		options,
        
        		resolutionFunction,
        
        		gradient_bounds,
        
        		drawGrid_grad,
        
        		x_grad_arrow,
        
        		y_grad_arrow,
        
        		param_a,
        
        		param_b,
        
        		fieldHoverType,
        
        		selectedField,
        
        		options2,
        
        		setToDivergence,
        
        		setToVector,
        
        		setToCurl,
        
        		abs_bound,
        
        		drawPlane1,
        
        		drawPlane2,
        
        		drawPlane3,
        
        		a1,
        
        		a2,
        
        		a3,
        
        		b1,
        
        		b2,
        
        		b3,
        
        		c1,
        
        		c2,
        
        		c3,
        
        		d1,
        
        		d2,
        
        		d3,
        
        		drawPlanes,
        
        		drawCoords,
        
        		drawGaussSiedel,
        
        		automaticRotation,
        
        		iterationsGS,
        
        		generateGaussSiedel,
        
        		init_vector_x,
        
        		init_vector_y,
        
        		init_vector_z,
        
        		iterationGS_current,
        
        		GS_lineNumber,
        
        		generateGaussSiedelFn,
        
        		backwards_diff,
        
        		coeff_diff_demo,
        
        		radioOptions,
        
        		reset_advection_step,
        
        		resetAdvectionStep,
        
        		color_one_red,
        
        		color_one_green,
        
        		color_one_blue,
        
        		color_fl_red,
        
        		color_fl_green,
        
        		color_fl_blue,
        
        		fluid_viscosity,
        
        		ink_diffusion,
        
        		stopDiffuse,
        
        		numberTilesTwo,
        
        		big_matrice,
        
        		gs_ln_1_2,
        
        		$d3,
        
        		$d2,
        
        		$d1,
        
        		$c3,
        
        		$b3,
        
        		$a3,
        
        		$c2,
        
        		$b2,
        
        		$a2,
        
        		$c1,
        
        		$b1,
        
        		$a1,
        
        		$iterationGS_current,
        
        		change_handler
        
        	];
        
        }
        
        
        
        class Marbling extends SvelteComponent {
        
        	constructor(options) {
        
        		super();
        
        		init(this, options, instance, create_fragment, safe_not_equal, {}, null, [-1, -1, -1, -1, -1, -1]);
        
        	}
        
        }
        
        
        
        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};
        
        
        
        function getDefaultExportFromCjs (x) {
        
        	return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
        
        }
        
        
        
        function commonjsRequire(path) {
        
        	throw new Error('Could not dynamically require "' + path + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
        
        }
        
        
        
        var p5_min$2 = {exports: {}};
        
        
        
        /*! p5.js v1.9.0 November 28, 2023 */
        
        
        
        (function (module, exports) {
        
        	!function(e){module.exports=e();}(function(){var s;return function o(n,s,i){function a(t,e){if(!s[t]){if(!n[t]){var r="function"==typeof commonjsRequire&&commonjsRequire;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw (e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=s[t]={exports:{}},n[t][0].call(r.exports,function(e){return a(n[t][1][e]||e)},r,r.exports,o,n,s,i);}return s[t].exports}for(var l="function"==typeof commonjsRequire&&commonjsRequire,e=0;e<i.length;e++)a(i[e]);return a}({1:[function(e,t,r){r.byteLength=function(e){var e=c(e),t=e[0],e=e[1];return 3*(t+e)/4-e},r.toByteArray=function(e){var t,r,o=c(e),n=o[0],o=o[1],s=new u(function(e,t){return 3*(e+t)/4-t}(n,o)),i=0,a=0<o?n-4:n;for(r=0;r<a;r+=4)t=l[e.charCodeAt(r)]<<18|l[e.charCodeAt(r+1)]<<12|l[e.charCodeAt(r+2)]<<6|l[e.charCodeAt(r+3)],s[i++]=t>>16&255,s[i++]=t>>8&255,s[i++]=255&t;2===o&&(t=l[e.charCodeAt(r)]<<2|l[e.charCodeAt(r+1)]>>4,s[i++]=255&t);1===o&&(t=l[e.charCodeAt(r)]<<10|l[e.charCodeAt(r+1)]<<4|l[e.charCodeAt(r+2)]>>2,s[i++]=t>>8&255,s[i++]=255&t);return s},r.fromByteArray=function(e){for(var t,r=e.length,o=r%3,n=[],s=0,i=r-o;s<i;s+=16383)n.push(function(e,t,r){for(var o,n=[],s=t;s<r;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),n.push(function(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}(o));return n.join("")}(e,s,i<s+16383?i:s+16383));1==o?(t=e[r-1],n.push(a[t>>2]+a[t<<4&63]+"==")):2==o&&(t=(e[r-2]<<8)+e[r-1],n.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return n.join("")};for(var a=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,s=o.length;n<s;++n)a[n]=o[n],l[o.charCodeAt(n)]=n;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return [e,t]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63;},{}],2:[function(e,t,r){},{}],3:[function(e,t,r){},{}],4:[function(A,e,L){!function(d){var S=A("base64-js"),s=A("ieee754"),e="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,t=(L.Buffer=d,L.SlowBuffer=function(e){+e!=e&&(e=0);return d.alloc(+e)},L.INSPECT_MAX_BYTES=50,2147483647);function l(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return Object.setPrototypeOf(e,d.prototype),e}function d(e,t,r){if("number"!=typeof e)return o(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return i(e)}function o(e,t,r){if("string"==typeof e){var o=e,n=t;if(d.isEncoding(n="string"==typeof n&&""!==n?n:"utf8"))return s=0|h(o,n),i=l(s),i=(o=i.write(o,n))!==s?i.slice(0,o):i;throw new TypeError("Unknown encoding: "+n)}if(ArrayBuffer.isView(e))return u(e);if(null!=e){if(C(e,ArrayBuffer)||e&&C(e.buffer,ArrayBuffer)){var s=e,o=t,i=r;if(o<0||s.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(s.byteLength<o+(i||0))throw new RangeError('"length" is outside of buffer bounds');return s=void 0===o&&void 0===i?new Uint8Array(s):void 0===i?new Uint8Array(s,o):new Uint8Array(s,o,i),Object.setPrototypeOf(s,d.prototype),s}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return d.from(n,t,r);var a=function(e){{var t,r;if(d.isBuffer(e))return t=0|c(e.length),0!==(r=l(t)).length&&e.copy(r,0,0,t),r}if(void 0!==e.length)return "number"!=typeof e.length||O(e.length)?l(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function n(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function i(e){return n(e),l(e<0?0:0|c(e))}function u(e){for(var t=e.length<0?0:0|c(e.length),r=l(t),o=0;o<t;o+=1)r[o]=255&e[o];return r}function c(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function h(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||C(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,o=2<arguments.length&&!0===arguments[2];if(!o&&0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return E(e).length;default:if(n)return o?-1:M(e).length;t=(""+t).toLowerCase(),n=!0;}}function r(e,t,r){var o,n=!1;if((t=void 0===t||t<0?0:t)>this.length)return "";if((r=void 0===r||r>this.length?this.length:r)<=0)return "";if((r>>>=0)<=(t>>>=0))return "";for(e=e||"utf8";;)switch(e){case"hex":var s=this,i=t,a=r,l=s.length;(!a||a<0||l<a)&&(a=l);for(var u="",c=i=!i||i<0?0:i;c<a;++c)u+=P[s[c]];return u;case"utf8":case"utf-8":return T(this,t,r);case"ascii":var d=this,l=t,h=r,f="";h=Math.min(d.length,h);for(var p=l;p<h;++p)f+=String.fromCharCode(127&d[p]);return f;case"latin1":case"binary":var m=this,i=t,y=r,g="";y=Math.min(m.length,y);for(var v=i;v<y;++v)g+=String.fromCharCode(m[v]);return g;case"base64":return b=this,o=r,0===(j=t)&&o===b.length?S.fromByteArray(b):S.fromByteArray(b.slice(j,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var b=t,j=r,_=this.slice(b,j),x="",w=0;w<_.length;w+=2)x+=String.fromCharCode(_[w]+256*_[w+1]);return x;default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0;}}function a(e,t,r){var o=e[t];e[t]=e[r],e[r]=o;}function f(e,t,r,o,n){if(0===e.length)return -1;if("string"==typeof r?(o=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=O(r=+r)?n?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(n)return -1;r=e.length-1;}else if(r<0){if(!n)return -1;r=0;}if("string"==typeof t&&(t=d.from(t,o)),d.isBuffer(t))return 0===t.length?-1:p(e,t,r,o,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(n?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):p(e,[t],r,o,n);throw new TypeError("val must be string, number or Buffer")}function p(e,t,r,o,n){var s=1,i=e.length,a=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return -1;i/=s=2,a/=2,r/=2;}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n)for(var u=-1,c=r;c<i;c++)if(l(e,c)===l(t,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===a)return u*s}else -1!==u&&(c-=c-u),u=-1;else for(c=r=i<r+a?i-a:r;0<=c;c--){for(var d=!0,h=0;h<a;h++)if(l(e,c+h)!==l(t,h)){d=!1;break}if(d)return c}return -1}function y(e,t,r,o){return k(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,o)}function g(e,t,r,o){return k(function(e,t){for(var r,o,n=[],s=0;s<e.length&&!((t-=2)<0);++s)o=e.charCodeAt(s),r=o>>8,o=o%256,n.push(o),n.push(r);return n}(t,e.length-r),e,r,o)}function T(e,t,r){r=Math.min(e.length,r);for(var o=[],n=t;n<r;){var s,i,a,l,u=e[n],c=null,d=239<u?4:223<u?3:191<u?2:1;if(n+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(s=e[n+1]))&&127<(l=(31&u)<<6|63&s)&&(c=l);break;case 3:s=e[n+1],i=e[n+2],128==(192&s)&&128==(192&i)&&2047<(l=(15&u)<<12|(63&s)<<6|63&i)&&(l<55296||57343<l)&&(c=l);break;case 4:s=e[n+1],i=e[n+2],a=e[n+3],128==(192&s)&&128==(192&i)&&128==(192&a)&&65535<(l=(15&u)<<18|(63&s)<<12|(63&i)<<6|63&a)&&l<1114112&&(c=l);}null===c?(c=65533,d=1):65535<c&&(c-=65536,o.push(c>>>10&1023|55296),c=56320|1023&c),o.push(c),n+=d;}var h=o,f=h.length;if(f<=v)return String.fromCharCode.apply(String,h);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,h.slice(m,m+=v));return p}L.kMaxLength=t,(d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return !1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=o,Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,r){return t=t,r=r,n(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)},d.allocUnsafe=i,d.allocUnsafeSlow=i,d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(C(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),C(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,o=t.length,n=0,s=Math.min(r,o);n<s;++n)if(e[n]!==t[n]){r=e[n],o=t[n];break}return r<o?-1:o<r?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;for(var r=d.allocUnsafe(t),o=0,n=0;n<e.length;++n){var s=e[n];if(C(s,Uint8Array)&&(s=d.from(s)),!d.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length;}return r},d.byteLength=h,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)a(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)a(this,t,t+3),a(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)a(this,t,t+7),a(this,t+1,t+6),a(this,t+2,t+5),a(this,t+3,t+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):r.apply(this,arguments)},d.prototype.equals=function(e){if(d.isBuffer(e))return this===e||0===d.compare(this,e);throw new TypeError("Argument must be a Buffer")},d.prototype.inspect=function(){var e="",t=L.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},e&&(d.prototype[e]=d.prototype.inspect),d.prototype.compare=function(e,t,r,o,n){if(C(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===o&&(o=0),void 0===n&&(n=this.length),(t=void 0===t?0:t)<0||r>e.length||o<0||n>this.length)throw new RangeError("out of range index");if(n<=o&&r<=t)return 0;if(n<=o)return -1;if(r<=t)return 1;if(this===e)return 0;for(var s=(n>>>=0)-(o>>>=0),i=(r>>>=0)-(t>>>=0),a=Math.min(s,i),l=this.slice(o,n),u=e.slice(t,r),c=0;c<a;++c)if(l[c]!==u[c]){s=l[c],i=u[c];break}return s<i?-1:i<s?1:0},d.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},d.prototype.indexOf=function(e,t,r){return f(this,e,t,r,!0)},d.prototype.lastIndexOf=function(e,t,r){return f(this,e,t,r,!1)},d.prototype.write=function(e,t,r,o){if(void 0===t)o="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)o=t,r=this.length,t=0;else {if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===o&&(o="utf8")):(o=r,r=void 0);}var n=this.length-t;if((void 0===r||n<r)&&(r=n),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o=o||"utf8";for(var s,i,a,l=!1;;)switch(o){case"hex":var u=this,c=e,d=t,h=r,f=(d=Number(d)||0,u.length-d);(!h||f<(h=Number(h)))&&(h=f),(f=c.length)/2<h&&(h=f/2);for(var p=0;p<h;++p){var m=parseInt(c.substr(2*p,2),16);if(O(m))return p;u[d+p]=m;}return p;case"utf8":case"utf-8":return f=t,a=r,k(M(e,(i=this).length-f),i,f,a);case"ascii":return y(this,e,t,r);case"latin1":case"binary":return y(this,e,t,r);case"base64":return i=this,a=t,s=r,k(E(e),i,a,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,e,t,r);default:if(l)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),l=!0;}},d.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function m(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function b(e,t,r,o,n,s){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<t||t<s)throw new RangeError('"value" argument is out of bounds');if(r+o>e.length)throw new RangeError("Index out of range")}function j(e,t,r,o){if(r+o>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function _(e,t,r,o,n){return t=+t,r>>>=0,n||j(e,0,r,4),s.write(e,t,r,o,23,4),r+4}function x(e,t,r,o,n){return t=+t,r>>>=0,n||j(e,0,r,8),s.write(e,t,r,o,52,8),r+8}d.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return Object.setPrototypeOf(r,d.prototype),r},d.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var o=this[e],n=1,s=0;++s<t&&(n*=256);)o+=this[e+s]*n;return o},d.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var o=this[e+--t],n=1;0<t&&(n*=256);)o+=this[e+--t]*n;return o},d.prototype.readUInt8=function(e,t){return e>>>=0,t||m(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||m(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||m(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||m(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||m(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var o=this[e],n=1,s=0;++s<t&&(n*=256);)o+=this[e+s]*n;return (n*=128)<=o&&(o-=Math.pow(2,8*t)),o},d.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var o=t,n=1,s=this[e+--o];0<o&&(n*=256);)s+=this[e+--o]*n;return (n*=128)<=s&&(s-=Math.pow(2,8*t)),s},d.prototype.readInt8=function(e,t){return e>>>=0,t||m(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||m(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt16BE=function(e,t){e>>>=0,t||m(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||m(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||m(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return e>>>=0,t||m(e,4,this.length),s.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||m(e,4,this.length),s.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||m(e,8,this.length),s.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||m(e,8,this.length),s.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,r,o){e=+e,t>>>=0,r>>>=0,o||b(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},d.prototype.writeUIntBE=function(e,t,r,o){e=+e,t>>>=0,r>>>=0,o||b(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,s=1;for(this[t+n]=255&e;0<=--n&&(s*=256);)this[t+n]=e/s&255;return t+r},d.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeIntLE=function(e,t,r,o){e=+e,t>>>=0,o||b(this,e,t,r,(o=Math.pow(2,8*r-1))-1,-o);var n=0,s=1,i=0;for(this[t]=255&e;++n<r&&(s*=256);)e<0&&0===i&&0!==this[t+n-1]&&(i=1),this[t+n]=(e/s>>0)-i&255;return t+r},d.prototype.writeIntBE=function(e,t,r,o){e=+e,t>>>=0,o||b(this,e,t,r,(o=Math.pow(2,8*r-1))-1,-o);var n=r-1,s=1,i=0;for(this[t+n]=255&e;0<=--n&&(s*=256);)e<0&&0===i&&0!==this[t+n+1]&&(i=1),this[t+n]=(e/s>>0)-i&255;return t+r},d.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},d.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeFloatLE=function(e,t,r){return _(this,e,t,!0,r)},d.prototype.writeFloatBE=function(e,t,r){return _(this,e,t,!1,r)},d.prototype.writeDoubleLE=function(e,t,r){return x(this,e,t,!0,r)},d.prototype.writeDoubleBE=function(e,t,r){return x(this,e,t,!1,r)},d.prototype.copy=function(e,t,r,o){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,o||0===o||(o=this.length),t>=e.length&&(t=e.length),(o=0<o&&o<r?r:o)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length);var n=(o=e.length-t<o-r?e.length-t+r:o)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,o);else if(this===e&&r<t&&t<o)for(var s=n-1;0<=s;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,o),t);return n},d.prototype.fill=function(e,t,r,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!d.isEncoding(o))throw new TypeError("Unknown encoding: "+o);var n;1===e.length&&(n=e.charCodeAt(0),("utf8"===o&&n<128||"latin1"===o)&&(e=n));}else "number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");var s;if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(s=t;s<r;++s)this[s]=e;else {var i=d.isBuffer(e)?e:d.from(e,o),a=i.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=i[s%a];}return this};var w=/[^+/0-9A-Za-z-_]/g;function M(e,t){t=t||1/0;for(var r,o=e.length,n=null,s=[],i=0;i<o;++i){if(55295<(r=e.charCodeAt(i))&&r<57344){if(!n){if(56319<r){-1<(t-=3)&&s.push(239,191,189);continue}if(i+1===o){-1<(t-=3)&&s.push(239,191,189);continue}n=r;continue}if(r<56320){-1<(t-=3)&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320);}else n&&-1<(t-=3)&&s.push(239,191,189);if(n=null,r<128){if(--t<0)break;s.push(r);}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128);}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128);}else {if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128);}}return s}function E(e){return S.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(w,"")).length<2)return "";for(;e.length%4!=0;)e+="=";return e}(e))}function k(e,t,r,o){for(var n=0;n<o&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function C(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function O(e){return e!=e}var P=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var o=16*r,n=0;n<16;++n)t[o+n]=e[r]+e[n];return t}();}.call(this,A("buffer").Buffer);},{"base64-js":1,buffer:4,ieee754:246}],5:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e};},{}],6:[function(e,t,r){var o=e("../internals/is-object");t.exports=function(e){if(o(e)||null===e)return e;throw TypeError("Can't set "+String(e)+" as a prototype")};},{"../internals/is-object":74}],7:[function(e,t,r){var o=e("../internals/well-known-symbol"),n=e("../internals/object-create"),e=e("../internals/object-define-property"),s=o("unscopables"),i=Array.prototype;null==i[s]&&e.f(i,s,{configurable:!0,value:n(null)}),t.exports=function(e){i[s][e]=!0;};},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],8:[function(e,t,r){var o=e("../internals/string-multibyte").charAt;t.exports=function(e,t,r){return t+(r?o(e,t).length:1)};},{"../internals/string-multibyte":123}],9:[function(e,t,r){t.exports=function(e,t,r){if(e instanceof t)return e;throw TypeError("Incorrect "+(r?r+" ":"")+"invocation")};},{}],10:[function(e,t,r){var o=e("../internals/is-object");t.exports=function(e){if(o(e))return e;throw TypeError(String(e)+" is not an object")};},{"../internals/is-object":74}],11:[function(e,t,r){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView;},{}],12:[function(e,t,r){function o(e){return l(e)&&u(M,c(e))}var n,s=e("../internals/array-buffer-native"),i=e("../internals/descriptors"),a=e("../internals/global"),l=e("../internals/is-object"),u=e("../internals/has"),c=e("../internals/classof"),d=e("../internals/create-non-enumerable-property"),h=e("../internals/redefine"),f=e("../internals/object-define-property").f,p=e("../internals/object-get-prototype-of"),m=e("../internals/object-set-prototype-of"),y=e("../internals/well-known-symbol"),e=e("../internals/uid"),g=a.Int8Array,v=g&&g.prototype,b=a.Uint8ClampedArray,b=b&&b.prototype,j=g&&p(g),_=v&&p(v),x=Object.prototype,w=x.isPrototypeOf,y=y("toStringTag"),S=e("TYPED_ARRAY_TAG"),T=s&&!!m&&"Opera"!==c(a.opera),e=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(n in M)a[n]||(T=!1);if((!T||"function"!=typeof j||j===Function.prototype)&&(j=function(){throw TypeError("Incorrect invocation")},T))for(n in M)a[n]&&m(a[n],j);if((!T||!_||_===x)&&(_=j.prototype,T))for(n in M)a[n]&&m(a[n].prototype,_);if(T&&p(b)!==_&&m(b,_),i&&!u(_,y))for(n in e=!0,f(_,y,{get:function(){return l(this)?this[S]:void 0}}),M)a[n]&&d(a[n],S,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:e&&S,aTypedArray:function(e){if(o(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(m){if(w.call(j,e))return e}else for(var t in M)if(u(M,n)){t=a[t];if(t&&(e===t||w.call(t,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r){if(i){if(r)for(var o in M){o=a[o];o&&u(o.prototype,e)&&delete o.prototype[e];}_[e]&&!r||h(_,e,!r&&T&&v[e]||t);}},exportTypedArrayStaticMethod:function(e,t,r){var o,n;if(i){if(m){if(r)for(o in M)(n=a[o])&&u(n,e)&&delete n[e];if(j[e]&&!r)return;try{return h(j,e,!r&&T&&g[e]||t)}catch(e){}}for(o in M)!(n=a[o])||n[e]&&!r||h(n,e,t);}},isView:function(e){e=c(e);return "DataView"===e||u(M,e)},isTypedArray:o,TypedArray:j,TypedArrayPrototype:_};},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":145,"../internals/well-known-symbol":148}],13:[function(e,t,D){function r(e){return [255&e]}function o(e){return [255&e,e>>8&255]}function n(e){return [255&e,e>>8&255,e>>16&255,e>>24&255]}function s(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function i(e){return O(e,23,4)}function F(e){return O(e,52,8)}function a(e,t){H(e[w],t,{get:function(){return b(this)[t]}});}function l(e,t,r,o){if(r=m(r),e=b(e),r+t>e.byteLength)throw C(S);var n=b(e.buffer).bytes,r=r+e.byteOffset,e=n.slice(r,r+t);return o?e:e.reverse()}function u(e,t,r,o,n,s){if(r=m(r),e=b(e),r+t>e.byteLength)throw C(S);for(var i=b(e.buffer).bytes,a=r+e.byteOffset,l=o(+n),u=0;u<t;u++)i[a+u]=l[s?u:t-u-1];}var c=e("../internals/global"),d=e("../internals/descriptors"),U=e("../internals/array-buffer-native"),N=e("../internals/create-non-enumerable-property"),h=e("../internals/redefine-all"),f=e("../internals/fails"),p=e("../internals/an-instance"),B=e("../internals/to-integer"),G=e("../internals/to-length"),m=e("../internals/to-index"),y=e("../internals/ieee754"),V=e("../internals/object-get-prototype-of"),g=e("../internals/object-set-prototype-of"),z=e("../internals/object-get-own-property-names").f,H=e("../internals/object-define-property").f,W=e("../internals/array-fill"),v=e("../internals/set-to-string-tag"),e=e("../internals/internal-state"),b=e.get,j=e.set,_="ArrayBuffer",x="DataView",w="prototype",S="Wrong index",T=c[_],M=T,E=c[x],e=E&&E[w],k=Object.prototype,C=c.RangeError,O=y.pack,P=y.unpack;if(U){if(!f(function(){T(1);})||!f(function(){new T(-1);})||f(function(){return new T,new T(1.5),new T(NaN),T.name!=_})){for(var A,c=(M=function(e){return p(this,M),new T(m(e))})[w]=T[w],L=z(T),R=0;L.length>R;)(A=L[R++])in M||N(M,A,T[A]);c.constructor=M;}g&&V(e)!==k&&g(e,k);var y=new E(new M(2)),I=e.setInt8;y.setInt8(0,2147483648),y.setInt8(1,2147483649),!y.getInt8(0)&&y.getInt8(1)||h(e,{setInt8:function(e,t){I.call(this,e,t<<24>>24);},setUint8:function(e,t){I.call(this,e,t<<24>>24);}},{unsafe:!0});}else M=function(e){p(this,M,_);e=m(e);j(this,{bytes:W.call(new Array(e),0),byteLength:e}),d||(this.byteLength=e);},E=function(e,t,r){p(this,E,x),p(e,M,x);var o=b(e).byteLength,t=B(t);if(t<0||o<t)throw C("Wrong offset");if(o<t+(r=void 0===r?o-t:G(r)))throw C("Wrong length");j(this,{buffer:e,byteLength:r,byteOffset:t}),d||(this.buffer=e,this.byteLength=r,this.byteOffset=t);},d&&(a(M,"byteLength"),a(E,"buffer"),a(E,"byteLength"),a(E,"byteOffset")),h(E[w],{getInt8:function(e){return l(this,1,e)[0]<<24>>24},getUint8:function(e){return l(this,1,e)[0]},getInt16:function(e){e=l(this,2,e,1<arguments.length?arguments[1]:void 0);return (e[1]<<8|e[0])<<16>>16},getUint16:function(e){e=l(this,2,e,1<arguments.length?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(e){return s(l(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return s(l(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return P(l(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return P(l(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){u(this,1,e,r,t);},setUint8:function(e,t){u(this,1,e,r,t);},setInt16:function(e,t){u(this,2,e,o,t,2<arguments.length?arguments[2]:void 0);},setUint16:function(e,t){u(this,2,e,o,t,2<arguments.length?arguments[2]:void 0);},setInt32:function(e,t){u(this,4,e,n,t,2<arguments.length?arguments[2]:void 0);},setUint32:function(e,t){u(this,4,e,n,t,2<arguments.length?arguments[2]:void 0);},setFloat32:function(e,t){u(this,4,e,i,t,2<arguments.length?arguments[2]:void 0);},setFloat64:function(e,t){u(this,8,e,F,t,2<arguments.length?arguments[2]:void 0);}});v(M,_),v(E,x),t.exports={ArrayBuffer:M,DataView:E};},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":133,"../internals/to-integer":135,"../internals/to-length":136}],14:[function(e,t,r){var l=e("../internals/to-object"),u=e("../internals/to-absolute-index"),c=e("../internals/to-length"),d=Math.min;t.exports=[].copyWithin||function(e,t){var r=l(this),o=c(r.length),n=u(e,o),s=u(t,o),e=2<arguments.length?arguments[2]:void 0,i=d((void 0===e?o:u(e,o))-s,o-n),a=1;for(s<n&&n<s+i&&(a=-1,s+=i-1,n+=i-1);0<i--;)s in r?r[n]=r[s]:delete r[n],n+=a,s+=a;return r};},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],15:[function(e,t,r){var i=e("../internals/to-object"),a=e("../internals/to-absolute-index"),l=e("../internals/to-length");t.exports=function(e){for(var t=i(this),r=l(t.length),o=arguments.length,n=a(1<o?arguments[1]:void 0,r),o=2<o?arguments[2]:void 0,s=void 0===o?r:a(o,r);n<s;)t[n++]=e;return t};},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],16:[function(e,t,r){var o=e("../internals/array-iteration").forEach,n=e("../internals/array-method-is-strict"),e=e("../internals/array-method-uses-to-length"),n=n("forEach"),e=e("forEach");t.exports=n&&e?[].forEach:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)};},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,t,r){var f=e("../internals/function-bind-context"),p=e("../internals/to-object"),m=e("../internals/call-with-safe-iteration-closing"),y=e("../internals/is-array-iterator-method"),g=e("../internals/to-length"),v=e("../internals/create-property"),b=e("../internals/get-iterator-method");t.exports=function(e){var t,r,o,n,s,i,a=p(e),e="function"==typeof this?this:Array,l=arguments.length,u=1<l?arguments[1]:void 0,c=void 0!==u,d=b(a),h=0;if(c&&(u=f(u,2<l?arguments[2]:void 0,2)),null==d||e==Array&&y(d))for(r=new e(t=g(a.length));h<t;h++)i=c?u(a[h],h):a[h],v(r,h,i);else for(s=(n=d.call(a)).next,r=new e;!(o=s.call(n)).done;h++)i=c?m(n,u,[o.value,h],!0):o.value,v(r,h,i);return r.length=h,r};},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],18:[function(e,t,r){function o(a){return function(e,t,r){var o,n=l(e),s=u(n.length),i=c(r,s);if(a&&t!=t){for(;i<s;)if((o=n[i++])!=o)return !0}else for(;i<s;i++)if((a||i in n)&&n[i]===t)return a||i||0;return !a&&-1}}var l=e("../internals/to-indexed-object"),u=e("../internals/to-length"),c=e("../internals/to-absolute-index");t.exports={includes:o(!0),indexOf:o(!1)};},{"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136}],19:[function(e,t,r){function o(h){var f=1==h,p=2==h,m=3==h,y=4==h,g=6==h,v=5==h||g;return function(e,t,r,o){for(var n,s,i=_(e),a=j(i),l=b(t,r,3),u=x(a.length),c=0,t=o||w,d=f?t(e,u):p?t(e,0):void 0;c<u;c++)if((v||c in a)&&(s=l(n=a[c],c,i),h))if(f)d[c]=s;else if(s)switch(h){case 3:return !0;case 5:return n;case 6:return c;case 2:S.call(d,n);}else if(y)return !1;return g?-1:m||y?y:d}}var b=e("../internals/function-bind-context"),j=e("../internals/indexed-object"),_=e("../internals/to-object"),x=e("../internals/to-length"),w=e("../internals/array-species-create"),S=[].push;t.exports={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6)};},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],20:[function(e,t,r){var n=e("../internals/to-indexed-object"),s=e("../internals/to-integer"),i=e("../internals/to-length"),o=e("../internals/array-method-is-strict"),e=e("../internals/array-method-uses-to-length"),a=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,o=o("lastIndexOf"),e=e("indexOf",{ACCESSORS:!0,1:0});t.exports=u||!o||!e?function(e){if(u)return l.apply(this,arguments)||0;var t=n(this),r=i(t.length),o=r-1;for((o=1<arguments.length?a(o,s(arguments[1])):o)<0&&(o=r+o);0<=o;o--)if(o in t&&t[o]===e)return o||0;return -1}:l;},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":134,"../internals/to-integer":135,"../internals/to-length":136}],21:[function(e,t,r){var o=e("../internals/fails"),n=e("../internals/well-known-symbol"),s=e("../internals/engine-v8-version"),i=n("species");t.exports=function(t){return 51<=s||!o(function(){var e=[];return (e.constructor={})[i]=function(){return {foo:1}},1!==e[t](Boolean).foo})};},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":148}],22:[function(e,t,r){var o=e("../internals/fails");t.exports=function(e,t){var r=[][e];return !!r&&o(function(){r.call(null,t||function(){throw 1},1);})};},{"../internals/fails":51}],23:[function(e,t,r){function i(e){throw e}var a=e("../internals/descriptors"),l=e("../internals/fails"),u=e("../internals/has"),c=Object.defineProperty,d={};t.exports=function(e,t){var r,o,n,s;return u(d,e)?d[e]:(r=[][e],o=!!u(t=t||{},"ACCESSORS")&&t.ACCESSORS,n=u(t,0)?t[0]:i,s=u(t,1)?t[1]:void 0,d[e]=!!r&&!l(function(){if(o&&!a)return !0;var e={length:-1};o?c(e,1,{enumerable:!0,get:i}):e[1]=1,r.call(e,n,s);}))};},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(e,t,r){function o(u){return function(e,t,r,o){c(t);var n=d(e),s=h(n),i=f(n.length),a=u?i-1:0,l=u?-1:1;if(r<2)for(;;){if(a in s){o=s[a],a+=l;break}if(a+=l,u?a<0:i<=a)throw TypeError("Reduce of empty array with no initial value")}for(;u?0<=a:a<i;a+=l)a in s&&(o=t(o,s[a],a,n));return o}}var c=e("../internals/a-function"),d=e("../internals/to-object"),h=e("../internals/indexed-object"),f=e("../internals/to-length");t.exports={left:o(!1),right:o(!0)};},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],25:[function(e,t,r){var o=e("../internals/is-object"),n=e("../internals/is-array"),s=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var r;return new(void 0===(r=n(e)&&("function"==typeof(r=e.constructor)&&(r===Array||n(r.prototype))||o(r)&&null===(r=r[s]))?void 0:r)?Array:r)(0===t?0:t)};},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":148}],26:[function(e,t,r){var n=e("../internals/an-object");t.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(e){o=t.return;throw void 0!==o&&n(o.call(t)),e}};},{"../internals/an-object":10}],27:[function(e,t,r){var n=e("../internals/well-known-symbol")("iterator"),s=!1;try{var o=0,i={next:function(){return {done:!!o++}},return:function(){s=!0;}};i[n]=function(){return this},Array.from(i,function(){throw 2});}catch(e){}t.exports=function(e,t){if(!t&&!s)return !1;var r=!1;try{var o={};o[n]=function(){return {next:function(){return {done:r=!0}}}},e(o);}catch(e){}return r};},{"../internals/well-known-symbol":148}],28:[function(e,t,r){var o={}.toString;t.exports=function(e){return o.call(e).slice(8,-1)};},{}],29:[function(e,t,r){var o=e("../internals/to-string-tag-support"),n=e("../internals/classof-raw"),s=e("../internals/well-known-symbol")("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=o?n:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=Object(e),s))?t:i?n(e):"Object"==(t=n(e))&&"function"==typeof e.callee?"Arguments":t};},{"../internals/classof-raw":28,"../internals/to-string-tag-support":141,"../internals/well-known-symbol":148}],30:[function(e,t,r){var u=e("../internals/object-define-property").f,c=e("../internals/object-create"),d=e("../internals/redefine-all"),h=e("../internals/function-bind-context"),f=e("../internals/an-instance"),p=e("../internals/iterate"),i=e("../internals/define-iterator"),a=e("../internals/set-species"),m=e("../internals/descriptors"),y=e("../internals/internal-metadata").fastKey,e=e("../internals/internal-state"),g=e.set,v=e.getterFor;t.exports={getConstructor:function(e,r,o,n){function s(e,t,r){var o,n=l(e),s=i(e,t);return s?s.value=r:(n.last=s={index:o=y(t,!0),key:t,value:r,previous:t=n.last,next:void 0,removed:!1},n.first||(n.first=s),t&&(t.next=s),m?n.size++:e.size++,"F"!==o&&(n.index[o]=s)),e}function i(e,t){var r,e=l(e),o=y(t);if("F"!==o)return e.index[o];for(r=e.first;r;r=r.next)if(r.key==t)return r}var a=e(function(e,t){f(e,a,r),g(e,{type:r,index:c(null),first:void 0,last:void 0,size:0}),m||(e.size=0),null!=t&&p(t,e[n],e,o);}),l=v(r);return d(a.prototype,{clear:function(){for(var e=l(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,m?e.size=0:this.size=0;},delete:function(e){var t,r,o=l(this),e=i(this,e);return e&&(t=e.next,r=e.previous,delete o.index[e.index],e.removed=!0,r&&(r.next=t),t&&(t.previous=r),o.first==e&&(o.first=t),o.last==e&&(o.last=r),m?o.size--:this.size--),!!e},forEach:function(e){for(var t,r=l(this),o=h(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:r.first;)for(o(t.value,t.key,this);t&&t.removed;)t=t.previous;},has:function(e){return !!i(this,e)}}),d(a.prototype,o?{get:function(e){e=i(this,e);return e&&e.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),m&&u(a.prototype,"size",{get:function(){return l(this).size}}),a},setStrong:function(e,t,r){var o=t+" Iterator",n=v(t),s=v(o);i(e,t,function(e,t){g(this,{type:o,target:e,state:n(e),kind:t,last:void 0});},function(){for(var e=s(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:{value:e.target=void 0,done:!0}},r?"entries":"values",!r,!0),a(t);}};},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(e,t,r){function l(e){return e.frozen||(e.frozen=new o)}function o(){this.entries=[];}function n(e,t){return i(e.entries,function(e){return e[0]===t})}var u=e("../internals/redefine-all"),c=e("../internals/internal-metadata").getWeakData,d=e("../internals/an-object"),h=e("../internals/is-object"),f=e("../internals/an-instance"),p=e("../internals/iterate"),s=e("../internals/array-iteration"),m=e("../internals/has"),e=e("../internals/internal-state"),y=e.set,g=e.getterFor,i=s.find,a=s.findIndex,v=0;o.prototype={get:function(e){e=n(this,e);if(e)return e[1]},has:function(e){return !!n(this,e)},set:function(e,t){var r=n(this,e);r?r[1]=t:this.entries.push([e,t]);},delete:function(t){var e=a(this.entries,function(e){return e[0]===t});return ~e&&this.entries.splice(e,1),!!~e}},t.exports={getConstructor:function(e,r,o,n){function s(e,t,r){var o=a(e),n=c(d(t),!0);return !0===n?l(o).set(t,r):n[o.id]=r,e}var i=e(function(e,t){f(e,i,r),y(e,{type:r,id:v++,frozen:void 0}),null!=t&&p(t,e[n],e,o);}),a=g(r);return u(i.prototype,{delete:function(e){var t,r=a(this);return !!h(e)&&(!0===(t=c(e))?l(r).delete(e):t&&m(t,r.id)&&delete t[r.id])},has:function(e){var t,r=a(this);return !!h(e)&&(!0===(t=c(e))?l(r).has(e):t&&m(t,r.id))}}),u(i.prototype,o?{get:function(e){var t,r=a(this);if(h(e))return !0===(t=c(e))?l(r).get(e):t?t[r.id]:void 0},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),i}};},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(e,t,r){var y=e("../internals/export"),g=e("../internals/global"),v=e("../internals/is-forced"),b=e("../internals/redefine"),j=e("../internals/internal-metadata"),_=e("../internals/iterate"),x=e("../internals/an-instance"),w=e("../internals/is-object"),S=e("../internals/fails"),T=e("../internals/check-correctness-of-iteration"),M=e("../internals/set-to-string-tag"),E=e("../internals/inherit-if-required");t.exports=function(r,e,t){function o(e){var r=f[e];b(f,e,"add"==e?function(e){return r.call(this,0===e?0:e),this}:"delete"==e?function(e){return !(c&&!w(e))&&r.call(this,0===e?0:e)}:"get"==e?function(e){return c&&!w(e)?void 0:r.call(this,0===e?0:e)}:"has"==e?function(e){return !(c&&!w(e))&&r.call(this,0===e?0:e)}:function(e,t){return r.call(this,0===e?0:e,t),this});}var n,s,i,a,l,u=-1!==r.indexOf("Map"),c=-1!==r.indexOf("Weak"),d=u?"set":"add",h=g[r],f=h&&h.prototype,p=h,m={};return v(r,"function"!=typeof h||!(c||f.forEach&&!S(function(){(new h).entries().next();})))?(p=t.getConstructor(e,r,u,d),j.REQUIRED=!0):v(r,!0)&&(s=(n=new p)[d](c?{}:-0,1)!=n,i=S(function(){n.has(1);}),a=T(function(e){new h(e);}),l=!c&&S(function(){for(var e=new h,t=5;t--;)e[d](t,t);return !e.has(-0)}),a||(((p=e(function(e,t){x(e,p,r);e=E(new h,e,p);return null!=t&&_(t,e[d],e,u),e})).prototype=f).constructor=p),(i||l)&&(o("delete"),o("has"),u&&o("get")),(l||s)&&o(d),c&&f.clear&&delete f.clear),m[r]=p,y({global:!0,forced:p!=h},m),M(p,r),c||t.setStrong(p,r,u),p};},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(e,t,r){var a=e("../internals/has"),l=e("../internals/own-keys"),u=e("../internals/object-get-own-property-descriptor"),c=e("../internals/object-define-property");t.exports=function(e,t){for(var r=l(t),o=c.f,n=u.f,s=0;s<r.length;s++){var i=r[s];a(e,i)||o(e,i,n(t,i));}};},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(e,t,r){var o=e("../internals/well-known-symbol")("match");t.exports=function(t){var r=/./;try{"/./"[t](r);}catch(e){try{return r[o]=!1,"/./"[t](r)}catch(e){}}return !1};},{"../internals/well-known-symbol":148}],35:[function(e,t,r){e=e("../internals/fails");t.exports=!e(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype});},{"../internals/fails":51}],36:[function(e,t,r){var s=e("../internals/require-object-coercible"),i=/"/g;t.exports=function(e,t,r,o){var e=String(s(e)),n="<"+t;return ""!==r&&(n+=" "+r+'="'+String(o).replace(i,"&quot;")+'"'),n+">"+e+"</"+t+">"};},{"../internals/require-object-coercible":113}],37:[function(e,t,r){function o(){return this}var n=e("../internals/iterators-core").IteratorPrototype,s=e("../internals/object-create"),i=e("../internals/create-property-descriptor"),a=e("../internals/set-to-string-tag"),l=e("../internals/iterators");t.exports=function(e,t,r){t+=" Iterator";return e.prototype=s(n,{next:i(1,r)}),a(e,t,!1,!0),l[t]=o,e};},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(e,t,r){var o=e("../internals/descriptors"),n=e("../internals/object-define-property"),s=e("../internals/create-property-descriptor");t.exports=o?function(e,t,r){return n.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e};},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(e,t,r){t.exports=function(e,t){return {enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}};},{}],40:[function(e,t,r){var o=e("../internals/to-primitive"),n=e("../internals/object-define-property"),s=e("../internals/create-property-descriptor");t.exports=function(e,t,r){t=o(t);t in e?n.f(e,t,s(0,r)):e[t]=r;};},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":140}],41:[function(e,t,r){function m(){return this}var y=e("../internals/export"),g=e("../internals/create-iterator-constructor"),v=e("../internals/object-get-prototype-of"),b=e("../internals/object-set-prototype-of"),j=e("../internals/set-to-string-tag"),_=e("../internals/create-non-enumerable-property"),x=e("../internals/redefine"),o=e("../internals/well-known-symbol"),w=e("../internals/is-pure"),S=e("../internals/iterators"),e=e("../internals/iterators-core"),T=e.IteratorPrototype,M=e.BUGGY_SAFARI_ITERATORS,E=o("iterator"),k="values",C="entries";t.exports=function(e,t,r,o,n,s,i){g(r,t,o);function a(e){if(e===n&&f)return f;if(!M&&e in d)return d[e];switch(e){case"keys":case k:case C:return function(){return new r(this,e)}}return function(){return new r(this)}}var l,u,o=t+" Iterator",c=!1,d=e.prototype,h=d[E]||d["@@iterator"]||n&&d[n],f=!M&&h||a(n),p="Array"==t&&d.entries||h;if(p&&(p=v(p.call(new e)),T!==Object.prototype&&p.next&&(w||v(p)===T||(b?b(p,T):"function"!=typeof p[E]&&_(p,E,m)),j(p,o,!0,!0),w&&(S[o]=m))),n==k&&h&&h.name!==k&&(c=!0,f=function(){return h.call(this)}),w&&!i||d[E]===f||_(d,E,f),S[t]=f,n)if(l={values:a(k),keys:s?f:a("keys"),entries:a(C)},i)for(u in l)!M&&!c&&u in d||x(d,u,l[u]);else y({target:t,proto:!0,forced:M||c},l);return l};},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148}],42:[function(e,t,r){var o=e("../internals/path"),n=e("../internals/has"),s=e("../internals/well-known-symbol-wrapped"),i=e("../internals/object-define-property").f;t.exports=function(e){var t=o.Symbol||(o.Symbol={});n(t,e)||i(t,e,{value:s.f(e)});};},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":147}],43:[function(e,t,r){e=e("../internals/fails");t.exports=!e(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]});},{"../internals/fails":51}],44:[function(e,t,r){var o=e("../internals/global"),e=e("../internals/is-object"),n=o.document,s=e(n)&&e(n.createElement);t.exports=function(e){return s?n.createElement(e):{}};},{"../internals/global":59,"../internals/is-object":74}],45:[function(e,t,r){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};},{}],46:[function(e,t,r){e=e("../internals/engine-user-agent");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(e);},{"../internals/engine-user-agent":47}],47:[function(e,t,r){e=e("../internals/get-built-in");t.exports=e("navigator","userAgent")||"";},{"../internals/get-built-in":56}],48:[function(e,t,r){var o,n,s=e("../internals/global"),e=e("../internals/engine-user-agent"),s=s.process,s=s&&s.versions,s=s&&s.v8;s?n=(o=s.split("."))[0]+o[1]:e&&(!(o=e.match(/Edge\/(\d+)/))||74<=o[1])&&(o=e.match(/Chrome\/(\d+)/))&&(n=o[1]),t.exports=n&&+n;},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(e,t,r){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];},{}],50:[function(e,t,r){var u=e("../internals/global"),c=e("../internals/object-get-own-property-descriptor").f,d=e("../internals/create-non-enumerable-property"),h=e("../internals/redefine"),f=e("../internals/set-global"),p=e("../internals/copy-constructor-properties"),m=e("../internals/is-forced");t.exports=function(e,t){var r,o,n,s=e.target,i=e.global,a=e.stat,l=i?u:a?u[s]||f(s,{}):(u[s]||{}).prototype;if(l)for(r in t){if(o=t[r],n=e.noTargetGet?(n=c(l,r))&&n.value:l[r],!m(i?r:s+(a?".":"#")+r,e.forced)&&void 0!==n){if(typeof o==typeof n)continue;p(o,n);}(e.sham||n&&n.sham)&&d(o,"sham",!0),h(l,r,o,e);}};},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(e,t,r){t.exports=function(e){try{return !!e()}catch(e){return !0}};},{}],52:[function(e,t,r){e("../modules/es.regexp.exec");var u=e("../internals/redefine"),c=e("../internals/fails"),d=e("../internals/well-known-symbol"),h=e("../internals/regexp-exec"),f=e("../internals/create-non-enumerable-property"),p=d("species"),m=!c(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),y="$0"==="a".replace(/./,"$0"),e=d("replace"),g=!!/./[e]&&""===/./[e]("a","$0"),v=!c(function(){var e=/(?:)/,t=e.exec,e=(e.exec=function(){return t.apply(this,arguments)},"ab".split(e));return 2!==e.length||"a"!==e[0]||"b"!==e[1]});t.exports=function(r,e,t,o){var s,n,i=d(r),a=!c(function(){var e={};return e[i]=function(){return 7},7!=""[r](e)}),l=a&&!c(function(){var e=!1,t=/a/;return "split"===r&&((t={constructor:{}}).constructor[p]=function(){return t},t.flags="",t[i]=/./[i]),t.exec=function(){return e=!0,null},t[i](""),!e});a&&l&&("replace"!==r||m&&y&&!g)&&("split"!==r||v)||(s=/./[i],t=(l=t(i,""[r],function(e,t,r,o,n){return t.exec===h?a&&!n?{done:!0,value:s.call(t,r,o)}:{done:!0,value:e.call(r,t,o)}:{done:!1}},{REPLACE_KEEPS_$0:y,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}))[0],n=l[1],u(String.prototype,r,t),u(RegExp.prototype,i,2==e?function(e,t){return n.call(e,this,t)}:function(e){return n.call(e,this)})),o&&f(RegExp.prototype[i],"sham",!0);};},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":148,"../modules/es.regexp.exec":187}],53:[function(e,t,r){e=e("../internals/fails");t.exports=!e(function(){return Object.isExtensible(Object.preventExtensions({}))});},{"../internals/fails":51}],54:[function(e,t,r){var s=e("../internals/a-function");t.exports=function(o,n,e){if(s(o),void 0===n)return o;switch(e){case 0:return function(){return o.call(n)};case 1:return function(e){return o.call(n,e)};case 2:return function(e,t){return o.call(n,e,t)};case 3:return function(e,t,r){return o.call(n,e,t,r)}}return function(){return o.apply(n,arguments)}};},{"../internals/a-function":5}],55:[function(e,t,r){var o=e("../internals/a-function"),n=e("../internals/is-object"),c=[].slice,d={};t.exports=Function.bind||function(i){var a=o(this),l=c.call(arguments,1),u=function(){var e=l.concat(c.call(arguments));if(this instanceof u){var t=a,r=e.length,o=e;if(!(r in d)){for(var n=[],s=0;s<r;s++)n[s]="a["+s+"]";d[r]=Function("C,a","return new C("+n.join(",")+")");}return d[r](t,o)}return a.apply(i,e)};return n(a.prototype)&&(u.prototype=a.prototype),u};},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(e,t,r){function o(e){return "function"==typeof e?e:void 0}var n=e("../internals/path"),s=e("../internals/global");t.exports=function(e,t){return arguments.length<2?o(n[e])||o(s[e]):n[e]&&n[e][t]||s[e]&&s[e][t]};},{"../internals/global":59,"../internals/path":104}],57:[function(e,t,r){var o=e("../internals/classof"),n=e("../internals/iterators"),s=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(null!=e)return e[s]||e["@@iterator"]||n[o(e)]};},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":148}],58:[function(e,t,r){var o=e("../internals/an-object"),n=e("../internals/get-iterator-method");t.exports=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return o(t.call(e))};},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(e,r,t){!function(e){function t(e){return e&&e.Math==Math&&e}r.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||Function("return this")();}.call(this,"undefined"!=typeof commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{}],60:[function(e,t,r){var o={}.hasOwnProperty;t.exports=function(e,t){return o.call(e,t)};},{}],61:[function(e,t,r){t.exports={};},{}],62:[function(e,t,r){var o=e("../internals/global");t.exports=function(e,t){var r=o.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t));};},{"../internals/global":59}],63:[function(e,t,r){e=e("../internals/get-built-in");t.exports=e("document","documentElement");},{"../internals/get-built-in":56}],64:[function(e,t,r){var o=e("../internals/descriptors"),n=e("../internals/fails"),s=e("../internals/document-create-element");t.exports=!o&&!n(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a});},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(e,t,r){var h=Math.abs,f=Math.pow,p=Math.floor,m=Math.log,y=Math.LN2;t.exports={pack:function(e,t,r){var o,n,s,i=new Array(r),a=8*r-t-1,r=(1<<a)-1,l=r>>1,u=23===t?f(2,-24)-f(2,-77):0,c=e<0||0===e&&1/e<0?1:0,d=0;for((e=h(e))!=e||e===1/0?(n=e!=e?1:0,o=r):(o=p(m(e)/y),e*(s=f(2,-o))<1&&(o--,s*=2),2<=(e+=1<=o+l?u/s:u*f(2,1-l))*s&&(o++,s/=2),r<=o+l?(n=0,o=r):1<=o+l?(n=(e*s-1)*f(2,t),o+=l):(n=e*f(2,l-1)*f(2,t),o=0));8<=t;i[d++]=255&n,n/=256,t-=8);for(o=o<<t|n,a+=t;0<a;i[d++]=255&o,o/=256,a-=8);return i[--d]|=128*c,i},unpack:function(e,t){var r,o=e.length,n=8*o-t-1,s=(1<<n)-1,i=s>>1,a=n-7,l=o-1,n=e[l--],u=127&n;for(n>>=7;0<a;u=256*u+e[l],l--,a-=8);for(r=u&(1<<-a)-1,u>>=-a,a+=t;0<a;r=256*r+e[l],l--,a-=8);if(0===u)u=1-i;else {if(u===s)return r?NaN:n?-1/0:1/0;r+=f(2,t),u-=i;}return (n?-1:1)*r*f(2,u-t)}};},{}],66:[function(e,t,r){var o=e("../internals/fails"),n=e("../internals/classof-raw"),s="".split;t.exports=o(function(){return !Object("z").propertyIsEnumerable(0)})?function(e){return "String"==n(e)?s.call(e,""):Object(e)}:Object;},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(e,t,r){var o=e("../internals/is-object"),n=e("../internals/object-set-prototype-of");t.exports=function(e,t,r){return n&&"function"==typeof(t=t.constructor)&&t!==r&&o(t=t.prototype)&&t!==r.prototype&&n(e,t),e};},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(e,t,r){var e=e("../internals/shared-store"),o=Function.toString;"function"!=typeof e.inspectSource&&(e.inspectSource=function(e){return o.call(e)}),t.exports=e.inspectSource;},{"../internals/shared-store":119}],69:[function(e,t,r){function o(e){a(e,c,{value:{objectID:"O"+ ++d,weakData:{}}});}var n=e("../internals/hidden-keys"),s=e("../internals/is-object"),i=e("../internals/has"),a=e("../internals/object-define-property").f,l=e("../internals/uid"),u=e("../internals/freezing"),c=l("meta"),d=0,h=Object.isExtensible||function(){return !0},f=t.exports={REQUIRED:!1,fastKey:function(e,t){if(!s(e))return "symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,c)){if(!h(e))return "F";if(!t)return "E";o(e);}return e[c].objectID},getWeakData:function(e,t){if(!i(e,c)){if(!h(e))return !0;if(!t)return !1;o(e);}return e[c].weakData},onFreeze:function(e){return u&&f.REQUIRED&&h(e)&&!i(e,c)&&o(e),e}};n[c]=!0;},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":145}],70:[function(e,t,r){var o,n,s,i,a,l,u,c,d=e("../internals/native-weak-map"),h=e("../internals/global"),f=e("../internals/is-object"),p=e("../internals/create-non-enumerable-property"),m=e("../internals/has"),y=e("../internals/shared-key"),e=e("../internals/hidden-keys"),h=h.WeakMap;u=d?(o=new h,n=o.get,s=o.has,i=o.set,a=function(e,t){return i.call(o,e,t),t},l=function(e){return n.call(o,e)||{}},function(e){return s.call(o,e)}):(e[c=y("state")]=!0,a=function(e,t){return p(e,c,t),t},l=function(e){return m(e,c)?e[c]:{}},function(e){return m(e,c)}),t.exports={set:a,get:l,has:u,enforce:function(e){return u(e)?l(e):a(e,{})},getterFor:function(t){return function(e){if(f(e)&&(e=l(e)).type===t)return e;throw TypeError("Incompatible receiver, "+t+" required")}}};},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(e,t,r){var o=e("../internals/well-known-symbol"),n=e("../internals/iterators"),s=o("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||i[s]===e)};},{"../internals/iterators":79,"../internals/well-known-symbol":148}],72:[function(e,t,r){var o=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return "Array"==o(e)};},{"../internals/classof-raw":28}],73:[function(e,t,r){function o(e,t){return (e=a[i(e)])==u||e!=l&&("function"==typeof t?n(t):!!t)}var n=e("../internals/fails"),s=/#|\.prototype\./,i=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},a=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o;},{"../internals/fails":51}],74:[function(e,t,r){t.exports=function(e){return "object"==typeof e?null!==e:"function"==typeof e};},{}],75:[function(e,t,r){t.exports=!1;},{}],76:[function(e,t,r){var o=e("../internals/is-object"),n=e("../internals/classof-raw"),s=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return o(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==n(e))};},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":148}],77:[function(e,t,r){function h(e,t){this.stopped=e,this.result=t;}var f=e("../internals/an-object"),p=e("../internals/is-array-iterator-method"),m=e("../internals/to-length"),y=e("../internals/function-bind-context"),g=e("../internals/get-iterator-method"),v=e("../internals/call-with-safe-iteration-closing");(t.exports=function(e,t,r,o,n){var s,i,a,l,u,c,d=y(t,r,o?2:1);if(n)s=e;else {if("function"!=typeof(t=g(e)))throw TypeError("Target is not iterable");if(p(t)){for(i=0,a=m(e.length);i<a;i++)if((l=o?d(f(c=e[i])[0],c[1]):d(e[i]))&&l instanceof h)return l;return new h(!1)}s=t.call(e);}for(u=s.next;!(c=u.call(s)).done;)if("object"==typeof(l=v(s,d,c.value,o))&&l&&l instanceof h)return l;return new h(!1)}).stop=function(e){return new h(!0,e)};},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136}],78:[function(e,t,r){var o,n,s=e("../internals/object-get-prototype-of"),i=e("../internals/create-non-enumerable-property"),a=e("../internals/has"),l=e("../internals/well-known-symbol"),e=e("../internals/is-pure"),l=l("iterator"),u=!1;[].keys&&("next"in(n=[].keys())?(s=s(s(n)))!==Object.prototype&&(o=s):u=!0),null==o&&(o={}),e||a(o,l)||i(o,l,function(){return this}),t.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:u};},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":148}],79:[function(e,t,r){t.exports={};},{}],80:[function(e,t,r){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1};},{}],81:[function(e,t,r){var o,n,s,i,a,l,u,c,d=e("../internals/global"),h=e("../internals/object-get-own-property-descriptor").f,f=e("../internals/classof-raw"),p=e("../internals/task").set,e=e("../internals/engine-is-ios"),m=d.MutationObserver||d.WebKitMutationObserver,y=d.process,g=d.Promise,v="process"==f(y),f=h(d,"queueMicrotask"),h=f&&f.value;h||(o=function(){var e,t;for(v&&(e=y.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t();}catch(e){throw n?i():s=void 0,e}}s=void 0,e&&e.enter();},i=v?function(){y.nextTick(o);}:m&&!e?(a=!0,l=document.createTextNode(""),new m(o).observe(l,{characterData:!0}),function(){l.data=a=!a;}):g&&g.resolve?(u=g.resolve(void 0),c=u.then,function(){c.call(u,o);}):function(){p.call(d,o);}),t.exports=h||function(e){e={fn:e,next:void 0};s&&(s.next=e),n||(n=e,i()),s=e;};},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":130}],82:[function(e,t,r){e=e("../internals/global");t.exports=e.Promise;},{"../internals/global":59}],83:[function(e,t,r){e=e("../internals/fails");t.exports=!!Object.getOwnPropertySymbols&&!e(function(){return !String(Symbol())});},{"../internals/fails":51}],84:[function(e,t,r){var o=e("../internals/fails"),n=e("../internals/well-known-symbol"),s=e("../internals/is-pure"),i=n("iterator");t.exports=!o(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),r=e.searchParams,o="";return e.pathname="c%20d",r.forEach(function(e,t){r.delete("b"),o+=t+e;}),s&&!e.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[i]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==o||"x"!==new URL("http://x",void 0).host});},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":148}],85:[function(e,t,r){var o=e("../internals/global"),e=e("../internals/inspect-source"),o=o.WeakMap;t.exports="function"==typeof o&&/native code/.test(e(o));},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(e,t,r){function o(e){var r,o;this.promise=new e(function(e,t){if(void 0!==r||void 0!==o)throw TypeError("Bad Promise constructor");r=e,o=t;}),this.resolve=n(r),this.reject=n(o);}var n=e("../internals/a-function");t.exports.f=function(e){return new o(e)};},{"../internals/a-function":5}],87:[function(e,t,r){var o=e("../internals/is-regexp");t.exports=function(e){if(o(e))throw TypeError("The method doesn't accept regular expressions");return e};},{"../internals/is-regexp":76}],88:[function(e,t,r){var o=e("../internals/global").isFinite;t.exports=Number.isFinite||function(e){return "number"==typeof e&&o(e)};},{"../internals/global":59}],89:[function(e,t,r){var h=e("../internals/descriptors"),o=e("../internals/fails"),f=e("../internals/object-keys"),p=e("../internals/object-get-own-property-symbols"),m=e("../internals/object-property-is-enumerable"),y=e("../internals/to-object"),g=e("../internals/indexed-object"),n=Object.assign,s=Object.defineProperty;t.exports=!n||o(function(){var e,t,r,o;return !(!h||1===n({b:1},n(s({},"a",{enumerable:!0,get:function(){s(this,"b",{value:3,enumerable:!1});}}),{b:2})).b)||(t={},o="abcdefghijklmnopqrst",(e={})[r=Symbol()]=7,o.split("").forEach(function(e){t[e]=e;}),7!=n({},e)[r]||f(n({},t)).join("")!=o)})?function(e,t){for(var r=y(e),o=arguments.length,n=1,s=p.f,i=m.f;n<o;)for(var a,l=g(arguments[n++]),u=s?f(l).concat(s(l)):f(l),c=u.length,d=0;d<c;)a=u[d++],h&&!i.call(l,a)||(r[a]=l[a]);return r}:n;},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":137}],90:[function(e,t,r){function o(){}var n,s=e("../internals/an-object"),i=e("../internals/object-define-properties"),a=e("../internals/enum-bug-keys"),l=e("../internals/hidden-keys"),u=e("../internals/html"),c=e("../internals/document-create-element"),e=e("../internals/shared-key"),d="prototype",h="script",f=e("IE_PROTO"),p=function(e){return "<"+h+">"+e+"</"+h+">"},m=function(){try{n=document.domain&&new ActiveXObject("htmlfile");}catch(e){}m=n?((e=n).write(p("")),e.close(),t=e.parentWindow.Object,e=null,t):(e=c("iframe"),t="java"+h+":",e.style.display="none",u.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var e,t,r=a.length;r--;)delete m[d][a[r]];return m()};l[f]=!0,t.exports=Object.create||function(e,t){var r;return null!==e?(o[d]=s(e),r=new o,o[d]=null,r[f]=e):r=m(),void 0===t?r:i(r,t)};},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(e,t,r){var o=e("../internals/descriptors"),i=e("../internals/object-define-property"),a=e("../internals/an-object"),l=e("../internals/object-keys");t.exports=o?Object.defineProperties:function(e,t){a(e);for(var r,o=l(t),n=o.length,s=0;s<n;)i.f(e,r=o[s++],t[r]);return e};},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(e,t,r){var o=e("../internals/descriptors"),n=e("../internals/ie8-dom-define"),s=e("../internals/an-object"),i=e("../internals/to-primitive"),a=Object.defineProperty;r.f=o?a:function(e,t,r){if(s(e),t=i(t,!0),s(r),n)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return "value"in r&&(e[t]=r.value),e};},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":140}],93:[function(e,t,r){var o=e("../internals/descriptors"),n=e("../internals/object-property-is-enumerable"),s=e("../internals/create-property-descriptor"),i=e("../internals/to-indexed-object"),a=e("../internals/to-primitive"),l=e("../internals/has"),u=e("../internals/ie8-dom-define"),c=Object.getOwnPropertyDescriptor;r.f=o?c:function(e,t){if(e=i(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(l(e,t))return s(!n.f.call(e,t),e[t])};},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":134,"../internals/to-primitive":140}],94:[function(e,t,r){var o=e("../internals/to-indexed-object"),n=e("../internals/object-get-own-property-names").f,s={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){if(!i||"[object Window]"!=s.call(e))return n(o(e));try{return n(e)}catch(e){return i.slice()}};},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":134}],95:[function(e,t,r){var o=e("../internals/object-keys-internal"),n=e("../internals/enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return o(e,n)};},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(e,t,r){r.f=Object.getOwnPropertySymbols;},{}],97:[function(e,t,r){var o=e("../internals/has"),n=e("../internals/to-object"),s=e("../internals/shared-key"),e=e("../internals/correct-prototype-getter"),i=s("IE_PROTO"),a=Object.prototype;t.exports=e?Object.getPrototypeOf:function(e){return e=n(e),o(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null};},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":137}],98:[function(e,t,r){var i=e("../internals/has"),a=e("../internals/to-indexed-object"),l=e("../internals/array-includes").indexOf,u=e("../internals/hidden-keys");t.exports=function(e,t){var r,o=a(e),n=0,s=[];for(r in o)!i(u,r)&&i(o,r)&&s.push(r);for(;t.length>n;)!i(o,r=t[n++])||~l(s,r)||s.push(r);return s};},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":134}],99:[function(e,t,r){var o=e("../internals/object-keys-internal"),n=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return o(e,n)};},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(e,t,r){var o={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,s=n&&!o.call({1:2},1);r.f=s?function(e){e=n(this,e);return !!e&&e.enumerable}:o;},{}],101:[function(e,t,r){var n=e("../internals/an-object"),s=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,o=!1,e={};try{(r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),o=e instanceof Array;}catch(e){}return function(e,t){return n(e),s(t),o?r.call(e,t):e.__proto__=t,e}}():void 0);},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(e,t,r){var o=e("../internals/to-string-tag-support"),n=e("../internals/classof");t.exports=o?{}.toString:function(){return "[object "+n(this)+"]"};},{"../internals/classof":29,"../internals/to-string-tag-support":141}],103:[function(e,t,r){var o=e("../internals/get-built-in"),n=e("../internals/object-get-own-property-names"),s=e("../internals/object-get-own-property-symbols"),i=e("../internals/an-object");t.exports=o("Reflect","ownKeys")||function(e){var t=n.f(i(e)),r=s.f;return r?t.concat(r(e)):t};},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(e,t,r){e=e("../internals/global");t.exports=e;},{"../internals/global":59}],105:[function(e,t,r){t.exports=function(e){try{return {error:!1,value:e()}}catch(e){return {error:!0,value:e}}};},{}],106:[function(e,t,r){var o=e("../internals/an-object"),n=e("../internals/is-object"),s=e("../internals/new-promise-capability");t.exports=function(e,t){return o(e),n(t)&&t.constructor===e?t:((0, (e=s.f(e)).resolve)(t),e.promise)};},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(e,t,r){var n=e("../internals/redefine");t.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e};},{"../internals/redefine":108}],108:[function(e,t,r){var i=e("../internals/global"),a=e("../internals/create-non-enumerable-property"),l=e("../internals/has"),u=e("../internals/set-global"),o=e("../internals/inspect-source"),e=e("../internals/internal-state"),n=e.get,c=e.enforce,d=String(String).split("String");(t.exports=function(e,t,r,o){var n=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,o=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof t||l(r,"name")||a(r,"name",t),c(r).source=d.join("string"==typeof t?t:"")),e===i?s?e[t]=r:u(t,r):(n?!o&&e[t]&&(s=!0):delete e[t],s?e[t]=r:a(e,t,r));})(Function.prototype,"toString",function(){return "function"==typeof this&&n(this).source||o(this)});},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(e,t,r){var o=e("./classof-raw"),n=e("./regexp-exec");t.exports=function(e,t){var r=e.exec;if("function"==typeof r){r=r.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==o(e))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)};},{"./classof-raw":28,"./regexp-exec":110}],110:[function(e,t,r){var o,n,d=e("./regexp-flags"),e=e("./regexp-sticky-helpers"),h=RegExp.prototype.exec,f=String.prototype.replace,s=h,p=(o=/a/,n=/b*/g,h.call(o,"a"),h.call(n,"a"),0!==o.lastIndex||0!==n.lastIndex),m=e.UNSUPPORTED_Y||e.BROKEN_CARET,y=void 0!==/()??/.exec("")[1];t.exports=s=p||y||m?function(e){var t,r,o,n,s=this,i=m&&s.sticky,a=d.call(s),l=s.source,u=0,c=e;return i&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),c=String(e).slice(s.lastIndex),0<s.lastIndex&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(l="(?: "+l+")",c=" "+c,u++),r=new RegExp("^(?:"+l+")",a)),y&&(r=new RegExp("^"+l+"$(?!\\s)",a)),p&&(t=s.lastIndex),o=h.call(i?r:s,c),i?o?(o.input=o.input.slice(u),o[0]=o[0].slice(u),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:p&&o&&(s.lastIndex=s.global?o.index+o[0].length:t),y&&o&&1<o.length&&f.call(o[0],r,function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(o[n]=void 0);}),o}:s;},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(e,t,r){var o=e("../internals/an-object");t.exports=function(){var e=o(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};},{"../internals/an-object":10}],112:[function(e,t,r){e=e("./fails");function o(e,t){return RegExp(e,t)}r.UNSUPPORTED_Y=e(function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),r.BROKEN_CARET=e(function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")});},{"./fails":51}],113:[function(e,t,r){t.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e};},{}],114:[function(e,t,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};},{}],115:[function(e,t,r){var o=e("../internals/global"),n=e("../internals/create-non-enumerable-property");t.exports=function(t,r){try{n(o,t,r);}catch(e){o[t]=r;}return r};},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(e,t,r){var o=e("../internals/get-built-in"),n=e("../internals/object-define-property"),s=e("../internals/well-known-symbol"),i=e("../internals/descriptors"),a=s("species");t.exports=function(e){var e=o(e),t=n.f;i&&e&&!e[a]&&t(e,a,{configurable:!0,get:function(){return this}});};},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],117:[function(e,t,r){var o=e("../internals/object-define-property").f,n=e("../internals/has"),s=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,s)&&o(e,s,{configurable:!0,value:t});};},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],118:[function(e,t,r){var o=e("../internals/shared"),n=e("../internals/uid"),s=o("keys");t.exports=function(e){return s[e]||(s[e]=n(e))};},{"../internals/shared":120,"../internals/uid":145}],119:[function(e,t,r){var o=e("../internals/global"),e=e("../internals/set-global"),n="__core-js_shared__",o=o[n]||e(n,{});t.exports=o;},{"../internals/global":59,"../internals/set-global":115}],120:[function(e,t,r){var o=e("../internals/is-pure"),n=e("../internals/shared-store");(t.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"});},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(e,t,r){var o=e("../internals/an-object"),n=e("../internals/a-function"),s=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var e=o(e).constructor;return void 0===e||null==(e=o(e)[s])?t:n(e)};},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":148}],122:[function(e,t,r){var o=e("../internals/fails");t.exports=function(t){return o(function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length})};},{"../internals/fails":51}],123:[function(e,t,r){function o(n){return function(e,t){var r,e=String(i(e)),t=s(t),o=e.length;return t<0||o<=t?n?"":void 0:(r=e.charCodeAt(t))<55296||56319<r||t+1===o||(o=e.charCodeAt(t+1))<56320||57343<o?n?e.charAt(t):r:n?e.slice(t,t+2):o-56320+(r-55296<<10)+65536}}var s=e("../internals/to-integer"),i=e("../internals/require-object-coercible");t.exports={codeAt:o(!1),charAt:o(!0)};},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],124:[function(e,t,r){e=e("../internals/engine-user-agent");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(e);},{"../internals/engine-user-agent":47}],125:[function(e,t,r){function o(n){return function(e,t,r){var e=String(a(e)),o=e.length,r=void 0===r?" ":String(r),t=s(t);return t<=o||""==r?e:((o=i.call(r,l((t=t-o)/r.length))).length>t&&(o=o.slice(0,t)),n?e+o:o+e)}}var s=e("../internals/to-length"),i=e("../internals/string-repeat"),a=e("../internals/require-object-coercible"),l=Math.ceil;t.exports={start:o(!1),end:o(!0)};},{"../internals/require-object-coercible":113,"../internals/string-repeat":127,"../internals/to-length":136}],126:[function(e,t,r){function g(e){return e+22+75*(e<26)}function s(e){var t,r=[],o=(e=function(e){for(var t=[],r=0,o=e.length;r<o;){var n,s=e.charCodeAt(r++);55296<=s&&s<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?t.push(((1023&s)<<10)+(1023&n)+65536):(t.push(s),r--):t.push(s);}return t}(e)).length,n=128,s=0,i=72;for(c=0;c<e.length;c++)(t=e[c])<128&&r.push(M(t));var a=r.length,l=a;for(a&&r.push("-");l<o;){for(var u=v,c=0;c<e.length;c++)n<=(t=e[c])&&t<u&&(u=t);var d=l+1;if(u-n>T((v-s)/d))throw RangeError(w);for(s+=(u-n)*d,n=u,c=0;c<e.length;c++){if((t=e[c])<n&&++s>v)throw RangeError(w);if(t==n){for(var h=s,f=b;;f+=b){var p=f<=i?1:i+j<=f?j:f-i;if(h<p)break;var m=h-p,y=b-p;r.push(M(g(p+m%y))),h=T(m/y);}r.push(M(g(h))),i=function(e,t,r){var o=0;for(e=r?T(e/x):e>>1,e+=T(e/t);S*j>>1<e;o+=b)e=T(e/S);return T(o+(S+1)*e/(e+_))}(s,d,l==a),s=0,++l;}}++s,++n;}return r.join("")}var v=2147483647,b=36,j=26,_=38,x=700,i=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,w="Overflow: input needs wider integers to process",S=b-1,T=Math.floor,M=String.fromCharCode;t.exports=function(e){for(var t,r=[],o=e.toLowerCase().replace(a,".").split("."),n=0;n<o.length;n++)t=o[n],r.push(i.test(t)?"xn--"+s(t):t);return r.join(".")};},{}],127:[function(e,t,r){var n=e("../internals/to-integer"),s=e("../internals/require-object-coercible");t.exports="".repeat||function(e){var t=String(s(this)),r="",o=n(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;0<o;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r};},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],128:[function(e,t,r){var o=e("../internals/fails"),n=e("../internals/whitespaces");t.exports=function(e){return o(function(){return !!n[e]()||"​᠎"!="​᠎"[e]()||n[e].name!==e})};},{"../internals/fails":51,"../internals/whitespaces":149}],129:[function(e,t,r){function o(t){return function(e){e=String(n(e));return 1&t&&(e=e.replace(s,"")),e=2&t?e.replace(i,""):e}}var n=e("../internals/require-object-coercible"),e="["+e("../internals/whitespaces")+"]",s=RegExp("^"+e+e+"*"),i=RegExp(e+e+"*$");t.exports={start:o(1),end:o(2),trim:o(3)};},{"../internals/require-object-coercible":113,"../internals/whitespaces":149}],130:[function(e,t,r){function o(e){return function(){x(e);}}function n(e){x(e.data);}function s(e){a.postMessage(e+"",f.protocol+"//"+f.host);}var i,a=e("../internals/global"),l=e("../internals/fails"),u=e("../internals/classof-raw"),c=e("../internals/function-bind-context"),d=e("../internals/html"),h=e("../internals/document-create-element"),e=e("../internals/engine-is-ios"),f=a.location,p=a.setImmediate,m=a.clearImmediate,y=a.process,g=a.MessageChannel,v=a.Dispatch,b=0,j={},_="onreadystatechange",x=function(e){var t;j.hasOwnProperty(e)&&(t=j[e],delete j[e],t());};p&&m||(p=function(e){for(var t=[],r=1;r<arguments.length;)t.push(arguments[r++]);return j[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t);},i(b),b},m=function(e){delete j[e];},"process"==u(y)?i=function(e){y.nextTick(o(e));}:v&&v.now?i=function(e){v.now(o(e));}:g&&!e?(e=(u=new g).port2,u.port1.onmessage=n,i=c(e.postMessage,e,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||l(s)||"file:"===f.protocol?i=_ in h("script")?function(e){d.appendChild(h("script"))[_]=function(){d.removeChild(this),x(e);};}:function(e){setTimeout(o(e),0);}:(i=s,a.addEventListener("message",n,!1))),t.exports={set:p,clear:m};},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],131:[function(e,t,r){var o=e("../internals/classof-raw");t.exports=function(e){if("number"!=typeof e&&"Number"!=o(e))throw TypeError("Incorrect invocation");return +e};},{"../internals/classof-raw":28}],132:[function(e,t,r){var o=e("../internals/to-integer"),n=Math.max,s=Math.min;t.exports=function(e,t){e=o(e);return e<0?n(e+t,0):s(e,t)};},{"../internals/to-integer":135}],133:[function(e,t,r){var o=e("../internals/to-integer"),n=e("../internals/to-length");t.exports=function(e){if(void 0===e)return 0;var e=o(e),t=n(e);if(e!==t)throw RangeError("Wrong length or index");return t};},{"../internals/to-integer":135,"../internals/to-length":136}],134:[function(e,t,r){var o=e("../internals/indexed-object"),n=e("../internals/require-object-coercible");t.exports=function(e){return o(n(e))};},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],135:[function(e,t,r){var o=Math.ceil,n=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?n:o)(e)};},{}],136:[function(e,t,r){var o=e("../internals/to-integer"),n=Math.min;t.exports=function(e){return 0<e?n(o(e),9007199254740991):0};},{"../internals/to-integer":135}],137:[function(e,t,r){var o=e("../internals/require-object-coercible");t.exports=function(e){return Object(o(e))};},{"../internals/require-object-coercible":113}],138:[function(e,t,r){var o=e("../internals/to-positive-integer");t.exports=function(e,t){e=o(e);if(e%t)throw RangeError("Wrong offset");return e};},{"../internals/to-positive-integer":139}],139:[function(e,t,r){var o=e("../internals/to-integer");t.exports=function(e){e=o(e);if(e<0)throw RangeError("The argument can't be less than 0");return e};},{"../internals/to-integer":135}],140:[function(e,t,r){var n=e("../internals/is-object");t.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e))||"function"==typeof(r=e.valueOf)&&!n(o=r.call(e))||!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")};},{"../internals/is-object":74}],141:[function(e,t,r){var o={};o[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(o);},{"../internals/well-known-symbol":148}],142:[function(e,t,D){function f(e,t){for(var r=0,o=t.length,n=new(Q(e))(o);r<o;)n[r]=t[r++];return n}function r(e,t){M(e,t,{get:function(){return T(this)[t]}});}function p(e){return e instanceof k||"ArrayBuffer"==(e=B(e))||"SharedArrayBuffer"==e}function o(e,t){return L(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)}function n(e,t){return o(e,t=d(t,!0))?U(2,e[t]):X(e,t)}function s(e,t,r){return !(o(e,t=d(t,!0))&&b(r)&&h(r,"value"))||h(r,"get")||h(r,"set")||r.configurable||h(r,"writable")&&!r.writable||h(r,"enumerable")&&!r.enumerable?M(e,t,r):(e[t]=r.value,e)}var a=e("../internals/export"),l=e("../internals/global"),i=e("../internals/descriptors"),F=e("../internals/typed-array-constructors-require-wrappers"),u=e("../internals/array-buffer-view-core"),c=e("../internals/array-buffer"),m=e("../internals/an-instance"),U=e("../internals/create-property-descriptor"),y=e("../internals/create-non-enumerable-property"),N=e("../internals/to-length"),g=e("../internals/to-index"),v=e("../internals/to-offset"),d=e("../internals/to-primitive"),h=e("../internals/has"),B=e("../internals/classof"),b=e("../internals/is-object"),G=e("../internals/object-create"),j=e("../internals/object-set-prototype-of"),V=e("../internals/object-get-own-property-names").f,_=e("../internals/typed-array-from"),z=e("../internals/array-iteration").forEach,H=e("../internals/set-species"),x=e("../internals/object-define-property"),w=e("../internals/object-get-own-property-descriptor"),S=e("../internals/internal-state"),W=e("../internals/inherit-if-required"),T=S.get,q=S.set,M=x.f,X=w.f,Y=Math.round,E=l.RangeError,k=c.ArrayBuffer,Z=c.DataView,C=u.NATIVE_ARRAY_BUFFER_VIEWS,O=u.TYPED_ARRAY_TAG,P=u.TypedArray,A=u.TypedArrayPrototype,Q=u.aTypedArrayConstructor,L=u.isTypedArray,R="BYTES_PER_ELEMENT",I="Wrong length";i?(C||(w.f=n,x.f=s,r(A,"buffer"),r(A,"byteOffset"),r(A,"byteLength"),r(A,"length")),a({target:"Object",stat:!0,forced:!C},{getOwnPropertyDescriptor:n,defineProperty:s}),t.exports=function(e,t,n){function u(e,o){M(e,o,{get:function(){var e=this,t=o;return (e=T(e)).view[r](t*c+e.byteOffset,!0)},set:function(e){var t=this,r=o;t=T(t),n&&(e=(e=Y(e))<0?0:255<e?255:255&e),t.view[s](r*c+t.byteOffset,e,!0);},enumerable:!0});}var c=e.match(/\d+$/)[0]/8,d=e+(n?"Clamped":"")+"Array",r="get"+e,s="set"+e,i=l[d],h=i,e=h&&h.prototype,o={};C?F&&(h=t(function(e,t,r,o){return m(e,h,d),W(b(t)?p(t)?void 0!==o?new i(t,v(r,c),o):void 0!==r?new i(t,v(r,c)):new i(t):L(t)?f(h,t):_.call(h,t):new i(g(t)),e,h)}),j&&j(h,P),z(V(i),function(e){e in h||y(h,e,i[e]);}),h.prototype=e):(h=t(function(e,t,r,o){m(e,h,d);var n,s,i=0,a=0;if(b(t)){if(!p(t))return L(t)?f(h,t):_.call(h,t);var l=t,a=v(r,c),r=t.byteLength;if(void 0===o){if(r%c)throw E(I);if((n=r-a)<0)throw E(I)}else if(r<(n=N(o)*c)+a)throw E(I);s=n/c;}else s=g(t),l=new k(n=s*c);for(q(e,{buffer:l,byteOffset:a,byteLength:n,length:s,view:new Z(l)});i<s;)u(e,i++);}),j&&j(h,P),e=h.prototype=G(A)),e.constructor!==h&&y(e,"constructor",h),O&&y(e,O,d),o[d]=h,a({global:!0,forced:h!=i,sham:!C},o),R in h||y(h,R,c),R in e||y(e,R,c),H(d);}):t.exports=function(){};},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":133,"../internals/to-length":136,"../internals/to-offset":138,"../internals/to-primitive":140,"../internals/typed-array-constructors-require-wrappers":143,"../internals/typed-array-from":144}],143:[function(e,t,r){var o=e("../internals/global"),n=e("../internals/fails"),s=e("../internals/check-correctness-of-iteration"),e=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,i=o.ArrayBuffer,a=o.Int8Array;t.exports=!e||!n(function(){a(1);})||!n(function(){new a(-1);})||!s(function(e){new a,new a(null),new a(1.5),new a(e);},!0)||n(function(){return 1!==new a(new i(2),1,void 0).length});},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],144:[function(e,t,r){var h=e("../internals/to-object"),f=e("../internals/to-length"),p=e("../internals/get-iterator-method"),m=e("../internals/is-array-iterator-method"),y=e("../internals/function-bind-context"),g=e("../internals/array-buffer-view-core").aTypedArrayConstructor;t.exports=function(e){var t,r,o,n,s,i,a=h(e),l=arguments.length,u=1<l?arguments[1]:void 0,c=void 0!==u,d=p(a);if(null!=d&&!m(d))for(i=(s=d.call(a)).next,a=[];!(n=i.call(s)).done;)a.push(n.value);for(c&&2<l&&(u=y(u,arguments[2],2)),r=f(a.length),o=new(g(this))(r),t=0;t<r;t++)o[t]=c?u(a[t],t):a[t];return o};},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],145:[function(e,t,r){var o=0,n=Math.random();t.exports=function(e){return "Symbol("+String(void 0===e?"":e)+")_"+(++o+n).toString(36)};},{}],146:[function(e,t,r){e=e("../internals/native-symbol");t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;},{"../internals/native-symbol":83}],147:[function(e,t,r){e=e("../internals/well-known-symbol");r.f=e;},{"../internals/well-known-symbol":148}],148:[function(e,t,r){var o=e("../internals/global"),n=e("../internals/shared"),s=e("../internals/has"),i=e("../internals/uid"),a=e("../internals/native-symbol"),e=e("../internals/use-symbol-as-uid"),l=n("wks"),u=o.Symbol,c=e?u:u&&u.withoutSetter||i;t.exports=function(e){return s(l,e)||(a&&s(u,e)?l[e]=u[e]:l[e]=c("Symbol."+e)),l[e]};},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":145,"../internals/use-symbol-as-uid":146}],149:[function(e,t,r){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff";},{}],150:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/global"),s=e("../internals/array-buffer"),e=e("../internals/set-species"),i="ArrayBuffer",s=s[i];o({global:!0,forced:n[i]!==s},{ArrayBuffer:s}),e(i);},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],151:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/fails"),d=e("../internals/is-array"),h=e("../internals/is-object"),f=e("../internals/to-object"),p=e("../internals/to-length"),m=e("../internals/create-property"),y=e("../internals/array-species-create"),s=e("../internals/array-method-has-species-support"),i=e("../internals/well-known-symbol"),e=e("../internals/engine-v8-version"),g=i("isConcatSpreadable"),v=9007199254740991,b="Maximum allowed index exceeded",i=51<=e||!n(function(){var e=[];return e[g]=!1,e.concat()[0]!==e}),e=s("concat");o({target:"Array",proto:!0,forced:!i||!e},{concat:function(e){for(var t,r,o,n,s,i=f(this),a=y(i,0),l=0,u=-1,c=arguments.length;u<c;u++)if(s=void 0,!h(n=o=-1===u?i:arguments[u])||(void 0!==(s=n[g])?!s:!d(n))){if(v<=l)throw TypeError(b);m(a,l++,o);}else {if(r=p(o.length),v<l+r)throw TypeError(b);for(t=0;t<r;t++,l++)t in o&&m(a,l,o[t]);}return a.length=l,a}});},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":136,"../internals/to-object":137,"../internals/well-known-symbol":148}],152:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/array-copy-within"),e=e("../internals/add-to-unscopables");o({target:"Array",proto:!0},{copyWithin:n}),e("copyWithin");},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],153:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/array-iteration").every,s=e("../internals/array-method-is-strict"),e=e("../internals/array-method-uses-to-length"),s=s("every"),e=e("every");o({target:"Array",proto:!0,forced:!s||!e},{every:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}});},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/array-fill"),e=e("../internals/add-to-unscopables");o({target:"Array",proto:!0},{fill:n}),e("fill");},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],155:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/array-iteration").filter,s=e("../internals/array-method-has-species-support"),e=e("../internals/array-method-uses-to-length"),s=s("filter"),e=e("filter");o({target:"Array",proto:!0,forced:!s||!e},{filter:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}});},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/array-iteration").findIndex,s=e("../internals/add-to-unscopables"),e=e("../internals/array-method-uses-to-length"),i="findIndex",a=!0,e=e(i);i in[]&&Array(1)[i](function(){a=!1;}),o({target:"Array",proto:!0,forced:a||!e},{findIndex:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),s(i);},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(e,t,r){var o=e("../internals/export"),e=e("../internals/array-for-each");o({target:"Array",proto:!0,forced:[].forEach!=e},{forEach:e});},{"../internals/array-for-each":16,"../internals/export":50}],158:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/array-from");o({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")(function(e){Array.from(e);})},{from:n});},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],159:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/array-includes").includes,s=e("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),s("includes");},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],160:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/array-includes").indexOf,s=e("../internals/array-method-is-strict"),e=e("../internals/array-method-uses-to-length"),i=[].indexOf,a=!!i&&1/[1].indexOf(1,-0)<0,s=s("indexOf"),e=e("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:a||!s||!e},{indexOf:function(e){return a?i.apply(this,arguments)||0:n(this,e,1<arguments.length?arguments[1]:void 0)}});},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],161:[function(e,t,r){var o=e("../internals/to-indexed-object"),n=e("../internals/add-to-unscopables"),s=e("../internals/iterators"),i=e("../internals/internal-state"),e=e("../internals/define-iterator"),a="Array Iterator",l=i.set,u=i.getterFor(a);t.exports=e(Array,"Array",function(e,t){l(this,{type:a,target:o(e),index:0,kind:t});},function(){var e=u(this),t=e.target,r=e.kind,o=e.index++;return !t||o>=t.length?{value:e.target=void 0,done:!0}:"keys"==r?{value:o,done:!1}:"values"==r?{value:t[o],done:!1}:{value:[o,t[o]],done:!1}},"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries");},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":134}],162:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/indexed-object"),s=e("../internals/to-indexed-object"),e=e("../internals/array-method-is-strict"),i=[].join,n=n!=Object,e=e("join",",");o({target:"Array",proto:!0,forced:n||!e},{join:function(e){return i.call(s(this),void 0===e?",":e)}});},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":134}],163:[function(e,t,r){var o=e("../internals/export"),e=e("../internals/array-last-index-of");o({target:"Array",proto:!0,forced:e!==[].lastIndexOf},{lastIndexOf:e});},{"../internals/array-last-index-of":20,"../internals/export":50}],164:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/array-iteration").map,s=e("../internals/array-method-has-species-support"),e=e("../internals/array-method-uses-to-length"),s=s("map"),e=e("map");o({target:"Array",proto:!0,forced:!s||!e},{map:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}});},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(e,t,r){var o=e("../internals/export"),u=e("../internals/is-object"),c=e("../internals/is-array"),d=e("../internals/to-absolute-index"),h=e("../internals/to-length"),f=e("../internals/to-indexed-object"),p=e("../internals/create-property"),n=e("../internals/well-known-symbol"),s=e("../internals/array-method-has-species-support"),e=e("../internals/array-method-uses-to-length"),s=s("slice"),e=e("slice",{ACCESSORS:!0,0:0,1:2}),m=n("species"),y=[].slice,g=Math.max;o({target:"Array",proto:!0,forced:!s||!e},{slice:function(e,t){var r,o,n,s=f(this),i=h(s.length),a=d(e,i),l=d(void 0===t?i:t,i);if(c(s)&&((r="function"==typeof(r=s.constructor)&&(r===Array||c(r.prototype))||u(r)&&null===(r=r[m])?void 0:r)===Array||void 0===r))return y.call(s,a,l);for(o=new(void 0===r?Array:r)(g(l-a,0)),n=0;a<l;a++,n++)a in s&&p(o,n,s[a]);return o.length=n,o}});},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136,"../internals/well-known-symbol":148}],166:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/array-iteration").some,s=e("../internals/array-method-is-strict"),e=e("../internals/array-method-uses-to-length"),s=s("some"),e=e("some");o({target:"Array",proto:!0,forced:!s||!e},{some:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}});},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],167:[function(e,t,r){var o=e("../internals/export"),d=e("../internals/to-absolute-index"),h=e("../internals/to-integer"),f=e("../internals/to-length"),p=e("../internals/to-object"),m=e("../internals/array-species-create"),y=e("../internals/create-property"),n=e("../internals/array-method-has-species-support"),e=e("../internals/array-method-uses-to-length"),n=n("splice"),e=e("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,v=Math.min;o({target:"Array",proto:!0,forced:!n||!e},{splice:function(e,t){var r,o,n,s,i,a,l=p(this),u=f(l.length),c=d(e,u),e=arguments.length;if(0===e?r=o=0:o=1===e?(r=0,u-c):(r=e-2,v(g(h(t),0),u-c)),9007199254740991<u+r-o)throw TypeError("Maximum allowed length exceeded");for(n=m(l,o),s=0;s<o;s++)(i=c+s)in l&&y(n,s,l[i]);if(r<(n.length=o)){for(s=c;s<u-o;s++)a=s+r,(i=s+o)in l?l[a]=l[i]:delete l[a];for(s=u;u-o+r<s;s--)delete l[s-1];}else if(o<r)for(s=u-o;c<s;s--)a=s+r-1,(i=s+o-1)in l?l[a]=l[i]:delete l[a];for(s=0;s<r;s++)l[s+c]=arguments[s+2];return l.length=u-o+r,n}});},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":132,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],168:[function(e,t,r){var o=e("../internals/descriptors"),e=e("../internals/object-define-property").f,n=Function.prototype,s=n.toString,i=/^\s*function ([^ (]*)/;!o||"name"in n||e(n,"name",{configurable:!0,get:function(){try{return s.call(this).match(i)[1]}catch(e){return ""}}});},{"../internals/descriptors":43,"../internals/object-define-property":92}],169:[function(e,t,r){var o=e("../internals/collection"),e=e("../internals/collection-strong");t.exports=o("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},e);},{"../internals/collection":32,"../internals/collection-strong":30}],170:[function(e,t,r){var e=e("../internals/export"),o=Math.hypot,l=Math.abs,u=Math.sqrt;e({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(e,t){for(var r,o,n=0,s=0,i=arguments.length,a=0;s<i;)a<(r=l(arguments[s++]))?(n=n*(o=a/r)*o+1,a=r):n+=0<r?(o=r/a)*o:r;return a===1/0?1/0:a*u(n)}});},{"../internals/export":50}],171:[function(e,t,r){var e=e("../internals/export"),o=Math.log,n=Math.LN2;e({target:"Math",stat:!0},{log2:function(e){return o(e)/n}});},{"../internals/export":50}],172:[function(e,t,r){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")});},{"../internals/export":50,"../internals/math-sign":80}],173:[function(e,t,r){function o(e){var t,r,o,n,s,i,a,l=d(e,!1);if("string"==typeof l&&2<l.length)if(43===(e=(l=g(l)).charCodeAt(0))||45===e){if(88===(t=l.charCodeAt(2))||120===t)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return +l}for(s=(n=l.slice(2)).length,i=0;i<s;i++)if((a=n.charCodeAt(i))<48||o<a)return NaN;return parseInt(n,r)}return +l}var n=e("../internals/descriptors"),s=e("../internals/global"),i=e("../internals/is-forced"),a=e("../internals/redefine"),l=e("../internals/has"),u=e("../internals/classof-raw"),c=e("../internals/inherit-if-required"),d=e("../internals/to-primitive"),h=e("../internals/fails"),f=e("../internals/object-create"),p=e("../internals/object-get-own-property-names").f,m=e("../internals/object-get-own-property-descriptor").f,y=e("../internals/object-define-property").f,g=e("../internals/string-trim").trim,v="Number",b=s[v],j=b.prototype,_=u(f(j))==v;if(i(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var x,w=function(e){var e=arguments.length<1?0:e,t=this;return t instanceof w&&(_?h(function(){j.valueOf.call(t);}):u(t)!=v)?c(new b(o(e)),t,w):o(e)},S=n?p(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;S.length>T;T++)l(b,x=S[T])&&!l(w,x)&&y(w,x,m(b,x));(w.prototype=j).constructor=w,a(s,v,w);}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":129,"../internals/to-primitive":140}],174:[function(e,t,r){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")});},{"../internals/export":50,"../internals/number-is-finite":88}],175:[function(e,t,r){function c(e,t,r){return 0===t?r:t%2==1?c(e,t-1,r*e):c(e*e,t/2,r)}var o=e("../internals/export"),d=e("../internals/to-integer"),h=e("../internals/this-number-value"),f=e("../internals/string-repeat"),e=e("../internals/fails"),n=1..toFixed,p=Math.floor;o({target:"Number",proto:!0,forced:n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!e(function(){n.call({});})},{toFixed:function(e){function t(e,t){for(var r=-1,o=t;++r<6;)o+=e*a[r],a[r]=o%1e7,o=p(o/1e7);}function r(e){for(var t=6,r=0;0<=--t;)r+=a[t],a[t]=p(r/e),r=r%e*1e7;}function o(){for(var e,t=6,r="";0<=--t;)""===r&&0!==t&&0===a[t]||(e=String(a[t]),r=""===r?e:r+f.call("0",7-e.length)+e);return r}var n,s,i=h(this),e=d(e),a=[0,0,0,0,0,0],l="",u="0";if(e<0||20<e)throw RangeError("Incorrect fraction digits");if(i!=i)return "NaN";if(i<=-1e21||1e21<=i)return String(i);if(i<0&&(l="-",i=-i),1e-21<i)if(i=(n=function(e){for(var t=0,r=e;4096<=r;)t+=12,r/=4096;for(;2<=r;)t+=1,r/=2;return t}(i*c(2,69,1))-69)<0?i*c(2,-n,1):i/c(2,n,1),i*=4503599627370496,0<(n=52-n)){for(t(0,i),s=e;7<=s;)t(1e7,0),s-=7;for(t(c(10,s,1),0),s=n-1;23<=s;)r(1<<23),s-=23;r(1<<s),t(1,1),r(2),u=o();}else t(0,i),t(1<<-n,0),u=o()+f.call("0",e);return u=0<e?l+((i=u.length)<=e?"0."+f.call("0",e-i)+u:u.slice(0,i-e)+"."+u.slice(i-e)):l+u}});},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":127,"../internals/this-number-value":131,"../internals/to-integer":135}],176:[function(e,t,r){var o=e("../internals/export"),e=e("../internals/object-assign");o({target:"Object",stat:!0,forced:Object.assign!==e},{assign:e});},{"../internals/export":50,"../internals/object-assign":89}],177:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/iterate"),s=e("../internals/create-property");o({target:"Object",stat:!0},{fromEntries:function(e){var r={};return n(e,function(e,t){s(r,e,t);},void 0,!0),r}});},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":77}],178:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/fails"),s=e("../internals/to-indexed-object"),i=e("../internals/object-get-own-property-descriptor").f,e=e("../internals/descriptors"),n=n(function(){i(1);});o({target:"Object",stat:!0,forced:!e||n,sham:!e},{getOwnPropertyDescriptor:function(e,t){return i(s(e),t)}});},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":134}],179:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/fails"),e=e("../internals/object-get-own-property-names-external").f;o({target:"Object",stat:!0,forced:n(function(){return !Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:e});},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],180:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/fails"),s=e("../internals/to-object"),i=e("../internals/object-get-prototype-of"),e=e("../internals/correct-prototype-getter");o({target:"Object",stat:!0,forced:n(function(){i(1);}),sham:!e},{getPrototypeOf:function(e){return i(s(e))}});},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":137}],181:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/to-object"),s=e("../internals/object-keys");o({target:"Object",stat:!0,forced:e("../internals/fails")(function(){s(1);})},{keys:function(e){return s(n(e))}});},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":137}],182:[function(e,t,r){var o=e("../internals/to-string-tag-support"),n=e("../internals/redefine"),e=e("../internals/object-to-string");o||n(Object.prototype,"toString",e,{unsafe:!0});},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":141}],183:[function(e,D,F){var r,t,o,n,s=e("../internals/export"),i=e("../internals/is-pure"),g=e("../internals/global"),a=e("../internals/get-built-in"),l=e("../internals/native-promise-constructor"),U=e("../internals/redefine"),N=e("../internals/redefine-all"),B=e("../internals/set-to-string-tag"),G=e("../internals/set-species"),V=e("../internals/is-object"),c=e("../internals/a-function"),z=e("../internals/an-instance"),H=e("../internals/classof-raw"),W=e("../internals/inspect-source"),d=e("../internals/iterate"),q=e("../internals/check-correctness-of-iteration"),X=e("../internals/species-constructor"),v=e("../internals/task").set,u=e("../internals/microtask"),h=e("../internals/promise-resolve"),Y=e("../internals/host-report-errors"),f=e("../internals/new-promise-capability"),b=e("../internals/perform"),p=e("../internals/internal-state"),Z=e("../internals/is-forced"),m=e("../internals/well-known-symbol"),y=e("../internals/engine-v8-version"),Q=m("species"),j="Promise",_=p.get,J=p.set,K=p.getterFor(j),x=l,w=g.TypeError,S=g.document,T=g.process,M=a("fetch"),E=f.f,$=E,k="process"==H(T),ee=!!(S&&S.createEvent&&g.dispatchEvent),C="unhandledrejection",te="rejectionhandled",O=1,re=2,P=1,oe=2,e=Z(j,function(){var e,t;if(!(W(x)!==String(x))){if(66===y)return !0;if(!k&&"function"!=typeof PromiseRejectionEvent)return !0}return !(!i||x.prototype.finally)||!(51<=y&&/native code/.test(x))&&(t=function(e){e(function(){},function(){});},((e=x.resolve(1)).constructor={})[Q]=t,!(e.then(function(){})instanceof t))}),m=e||!q(function(e){x.all(e).catch(function(){});}),ne=function(e){var t;return !(!V(e)||"function"!=typeof(t=e.then))&&t},A=function(f,p,m){var y;p.notified||(p.notified=!0,y=p.reactions,u(function(){for(var r,o,e=p.value,t=p.state==O,n=0;y.length>n;){var s,i,a,l=y[n++],u=t?l.ok:l.fail,c=l.resolve,d=l.reject,h=l.domain;try{u?(t||(p.rejection===oe&&function(e,t){v.call(g,function(){if(k)T.emit("rejectionHandled",e);else se(te,e,t.value);});}(f,p),p.rejection=P),!0===u?s=e:(h&&h.enter(),s=u(e),h&&(h.exit(),a=!0)),s===l.promise?d(w("Promise-chain cycle")):(i=ne(s))?i.call(s,c,d):c(s)):d(e);}catch(e){h&&!a&&h.exit(),d(e);}}p.reactions=[],p.notified=!1,m&&!p.rejection&&(r=f,o=p,v.call(g,function(){var e=o.value,t=ie(o);if(t&&(t=b(function(){k?T.emit("unhandledRejection",e,r):se(C,r,e);}),o.rejection=k||ie(o)?oe:P,t.error))throw t.value}));}));},se=function(e,t,r){var o;ee?((o=S.createEvent("Event")).promise=t,o.reason=r,o.initEvent(e,!1,!0),g.dispatchEvent(o)):o={promise:t,reason:r},(t=g["on"+e])?t(o):e===C&&Y("Unhandled promise rejection",r);},ie=function(e){return e.rejection!==P&&!e.parent},L=function(t,r,o,n){return function(e){t(r,o,e,n);}},R=function(e,t,r,o){t.done||(t.done=!0,(t=o?o:t).value=r,t.state=re,A(e,t,!0));},I=function(r,o,e,t){if(!o.done){o.done=!0,t&&(o=t);try{if(r===e)throw w("Promise can't be resolved itself");var n=ne(e);n?u(function(){var t={done:!1};try{n.call(e,L(I,r,t,o),L(R,r,t,o));}catch(e){R(r,t,e,o);}}):(o.value=e,o.state=O,A(r,o,!1));}catch(e){R(r,{done:!1},e,o);}}};e&&(x=function(e){z(this,x,j),c(e),r.call(this);var t=_(this);try{e(L(I,this,t),L(R,this,t));}catch(e){R(this,t,e);}},(r=function(e){J(this,{type:j,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0});}).prototype=N(x.prototype,{then:function(e,t){var r=K(this),o=E(X(this,x));return o.ok="function"!=typeof e||e,o.fail="function"==typeof t&&t,o.domain=k?T.domain:void 0,r.parent=!0,r.reactions.push(o),0!=r.state&&A(this,r,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),t=function(){var e=new r,t=_(e);this.promise=e,this.resolve=L(I,e,t),this.reject=L(R,e,t);},f.f=E=function(e){return e===x||e===o?new t:$(e)},i||"function"!=typeof l||(n=l.prototype.then,U(l.prototype,"then",function(e,t){var r=this;return new x(function(e,t){n.call(r,e,t);}).then(e,t)},{unsafe:!0}),"function"==typeof M&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return h(x,M.apply(g,arguments))}}))),s({global:!0,wrap:!0,forced:e},{Promise:x}),B(x,j,!1,!0),G(j),o=a(j),s({target:j,stat:!0,forced:e},{reject:function(e){var t=E(this);return t.reject.call(void 0,e),t.promise}}),s({target:j,stat:!0,forced:i||e},{resolve:function(e){return h(i&&this===o?x:this,e)}}),s({target:j,stat:!0,forced:m},{all:function(e){var a=this,t=E(a),l=t.resolve,u=t.reject,r=b(function(){var o=c(a.resolve),n=[],s=0,i=1;d(e,function(e){var t=s++,r=!1;n.push(void 0),i++,o.call(a,e).then(function(e){r||(r=!0,n[t]=e,--i||l(n));},u);}),--i||l(n);});return r.error&&u(r.value),t.promise},race:function(e){var r=this,o=E(r),n=o.reject,t=b(function(){var t=c(r.resolve);d(e,function(e){t.call(r,e).then(o.resolve,n);});});return t.error&&n(t.value),o.promise}});},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":130,"../internals/well-known-symbol":148}],184:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/get-built-in"),s=e("../internals/a-function"),i=e("../internals/an-object"),a=e("../internals/is-object"),l=e("../internals/object-create"),u=e("../internals/function-bind"),e=e("../internals/fails"),c=n("Reflect","construct"),d=e(function(){function e(){}return !(c(function(){},[],e)instanceof e)}),h=!e(function(){c(function(){});}),n=d||h;o({target:"Reflect",stat:!0,forced:n,sham:n},{construct:function(e,t){s(e),i(t);var r=arguments.length<3?e:s(arguments[2]);if(h&&!d)return c(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var o=[null];return o.push.apply(o,t),new(u.apply(e,o))}o=r.prototype,r=l(a(o)?o:Object.prototype),o=Function.apply.call(e,r,t);return a(o)?o:r}});},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],185:[function(e,t,r){var o=e("../internals/export"),s=e("../internals/is-object"),i=e("../internals/an-object"),a=e("../internals/has"),l=e("../internals/object-get-own-property-descriptor"),u=e("../internals/object-get-prototype-of");o({target:"Reflect",stat:!0},{get:function e(t,r){var o,n=arguments.length<3?t:arguments[2];return i(t)===n?t[r]:(o=l.f(t,r))?a(o,"value")?o.value:void 0===o.get?void 0:o.get.call(n):s(o=u(t))?e(o,r,n):void 0}});},{"../internals/an-object":10,"../internals/export":50,"../internals/has":60,"../internals/is-object":74,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-prototype-of":97}],186:[function(e,t,r){var o=e("../internals/descriptors"),n=e("../internals/global"),s=e("../internals/is-forced"),i=e("../internals/inherit-if-required"),a=e("../internals/object-define-property").f,l=e("../internals/object-get-own-property-names").f,u=e("../internals/is-regexp"),c=e("../internals/regexp-flags"),d=e("../internals/regexp-sticky-helpers"),h=e("../internals/redefine"),f=e("../internals/fails"),p=e("../internals/internal-state").set,m=e("../internals/set-species"),y=e("../internals/well-known-symbol")("match"),g=n.RegExp,v=g.prototype,b=/a/g,j=/a/g,_=new g(b)!==b,x=d.UNSUPPORTED_Y;if(o&&s("RegExp",!_||x||f(function(){return j[y]=!1,g(b)!=b||g(j)==j||"/a/i"!=g(b,"i")}))){for(var w=function(e,t){var r,o=this instanceof w,n=u(e),s=void 0===t;if(!o&&n&&e.constructor===w&&s)return e;_?n&&!s&&(e=e.source):e instanceof w&&(s&&(t=c.call(e)),e=e.source),x&&(r=!!t&&-1<t.indexOf("y"))&&(t=t.replace(/y/g,""));n=i(_?new g(e,t):g(e,t),o?this:v,w);return x&&r&&p(n,{sticky:r}),n},S=l(g),T=0;S.length>T;)!function(t){t in w||a(w,t,{configurable:!0,get:function(){return g[t]},set:function(e){g[t]=e;}});}(S[T++]);(v.constructor=w).prototype=v,h(n,"RegExp",w);}m("RegExp");},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":148}],187:[function(e,t,r){var o=e("../internals/export"),e=e("../internals/regexp-exec");o({target:"RegExp",proto:!0,forced:/./.exec!==e},{exec:e});},{"../internals/export":50,"../internals/regexp-exec":110}],188:[function(e,t,r){var o=e("../internals/redefine"),n=e("../internals/an-object"),s=e("../internals/fails"),i=e("../internals/regexp-flags"),e="toString",a=RegExp.prototype,l=a[e],s=s(function(){return "/a/b"!=l.call({source:"a",flags:"b"})}),u=l.name!=e;(s||u)&&o(RegExp.prototype,e,function(){var e=n(this),t=String(e.source),r=e.flags;return "/"+t+"/"+String(void 0===r&&e instanceof RegExp&&!("flags"in a)?i.call(e):r)},{unsafe:!0});},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],189:[function(e,t,r){var o=e("../internals/collection"),e=e("../internals/collection-strong");t.exports=o("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},e);},{"../internals/collection":32,"../internals/collection-strong":30}],190:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/object-get-own-property-descriptor").f,s=e("../internals/to-length"),i=e("../internals/not-a-regexp"),a=e("../internals/require-object-coercible"),l=e("../internals/correct-is-regexp-logic"),e=e("../internals/is-pure"),u="".endsWith,c=Math.min,l=l("endsWith");o({target:"String",proto:!0,forced:!!(e||l||(!(o=n(String.prototype,"endsWith"))||o.writable))&&!l},{endsWith:function(e){var t=String(a(this)),r=(i(e),1<arguments.length?arguments[1]:void 0),o=s(t.length),r=void 0===r?o:c(s(r),o),o=String(e);return u?u.call(t,o,r):t.slice(r-o.length,r)===o}});},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],191:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/not-a-regexp"),s=e("../internals/require-object-coercible");o({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(e){return !!~String(s(this)).indexOf(n(e),1<arguments.length?arguments[1]:void 0)}});},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],192:[function(e,t,r){var o=e("../internals/string-multibyte").charAt,n=e("../internals/internal-state"),e=e("../internals/define-iterator"),s="String Iterator",i=n.set,a=n.getterFor(s);e(String,"String",function(e){i(this,{type:s,string:String(e),index:0});},function(){var e=a(this),t=e.string,r=e.index;return r>=t.length?{value:void 0,done:!0}:(t=o(t,r),e.index+=t.length,{value:t,done:!1})});},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],193:[function(e,t,r){var o=e("../internals/fix-regexp-well-known-symbol-logic"),c=e("../internals/an-object"),d=e("../internals/to-length"),n=e("../internals/require-object-coercible"),h=e("../internals/advance-string-index"),f=e("../internals/regexp-exec-abstract");o("match",1,function(o,l,u){return [function(e){var t=n(this),r=null==e?void 0:e[o];return void 0!==r?r.call(e,t):new RegExp(e)[o](String(t))},function(e){var t=u(l,e,this);if(t.done)return t.value;var r=c(e),o=String(this);if(!r.global)return f(r,o);for(var n=r.unicode,s=[],i=r.lastIndex=0;null!==(a=f(r,o));){var a=String(a[0]);""===(s[i]=a)&&(r.lastIndex=h(o,d(r.lastIndex),n)),i++;}return 0===i?null:s}]});},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":136}],194:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/string-pad").start;o({target:"String",proto:!0,forced:e("../internals/string-pad-webkit-bug")},{padStart:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}});},{"../internals/export":50,"../internals/string-pad":125,"../internals/string-pad-webkit-bug":124}],195:[function(e,t,r){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")});},{"../internals/export":50,"../internals/string-repeat":127}],196:[function(e,t,r){var o=e("../internals/fix-regexp-well-known-symbol-logic"),T=e("../internals/an-object"),M=e("../internals/to-object"),E=e("../internals/to-length"),k=e("../internals/to-integer"),s=e("../internals/require-object-coercible"),C=e("../internals/advance-string-index"),O=e("../internals/regexp-exec-abstract"),P=Math.max,A=Math.min,L=Math.floor,R=/\$([$&'`]|\d\d?|<[^>]*>)/g,I=/\$([$&'`]|\d\d?)/g;o("replace",2,function(n,j,_,e){var x=e.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,w=e.REPLACE_KEEPS_$0,S=x?"$":"$0";return [function(e,t){var r=s(this),o=null==e?void 0:e[n];return void 0!==o?o.call(e,r,t):j.call(String(r),e,t)},function(e,t){if(!x&&w||"string"==typeof t&&-1===t.indexOf(S)){var r=_(j,e,this,t);if(r.done)return r.value}for(var o,n=T(e),s=String(this),i="function"==typeof t,a=(i||(t=String(t)),n.global),l=(a&&(o=n.unicode,n.lastIndex=0),[]);null!==(f=O(n,s))&&(l.push(f),a);)""===String(f[0])&&(n.lastIndex=C(s,E(n.lastIndex),o));for(var u,c="",d=0,h=0;h<l.length;h++){for(var f=l[h],p=String(f[0]),m=P(A(k(f.index),s.length),0),y=[],g=1;g<f.length;g++)y.push(void 0===(u=f[g])?u:String(u));var v=f.groups,b=i?(b=[p].concat(y,m,s),void 0!==v&&b.push(v),String(t.apply(void 0,b))):function(s,i,a,l,u,e){var c=a+s.length,d=l.length,t=I;void 0!==u&&(u=M(u),t=R);return j.call(e,t,function(e,t){var r;switch(t.charAt(0)){case"$":return "$";case"&":return s;case"`":return i.slice(0,a);case"'":return i.slice(c);case"<":r=u[t.slice(1,-1)];break;default:var o,n=+t;if(0==n)return e;if(d<n)return 0!==(o=L(n/10))&&o<=d?void 0===l[o-1]?t.charAt(1):l[o-1]+t.charAt(1):e;r=l[n-1];}return void 0===r?"":r})}(p,s,m,y,v,t);d<=m&&(c+=s.slice(d,m)+b,d=m+p.length);}return c+s.slice(d)}]});},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],197:[function(e,t,r){var o=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/an-object"),a=e("../internals/require-object-coercible"),l=e("../internals/same-value"),u=e("../internals/regexp-exec-abstract");o("search",1,function(o,n,s){return [function(e){var t=a(this),r=null==e?void 0:e[o];return void 0!==r?r.call(e,t):new RegExp(e)[o](String(t))},function(e){var t,r=s(n,e,this);return r.done?r.value:(r=i(e),e=String(this),t=r.lastIndex,l(t,0)||(r.lastIndex=0),e=u(r,e),l(r.lastIndex,t)||(r.lastIndex=t),null===e?-1:e.index)}]});},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],198:[function(e,t,r){var o=e("../internals/fix-regexp-well-known-symbol-logic"),c=e("../internals/is-regexp"),g=e("../internals/an-object"),d=e("../internals/require-object-coercible"),v=e("../internals/species-constructor"),b=e("../internals/advance-string-index"),j=e("../internals/to-length"),_=e("../internals/regexp-exec-abstract"),h=e("../internals/regexp-exec"),e=e("../internals/fails"),f=[].push,x=Math.min,w=4294967295,S=!e(function(){return !RegExp(w,"y")});o("split",2,function(n,p,m){var y="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,t){var r=String(d(this)),o=void 0===t?w:t>>>0;if(0==o)return [];if(void 0===e)return [r];if(!c(e))return p.call(r,e,o);for(var n,s,i,a=[],t=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,u=new RegExp(e.source,t+"g");(n=h.call(u,r))&&!(l<(s=u.lastIndex)&&(a.push(r.slice(l,n.index)),1<n.length&&n.index<r.length&&f.apply(a,n.slice(1)),i=n[0].length,l=s,a.length>=o));)u.lastIndex===n.index&&u.lastIndex++;return l===r.length?!i&&u.test("")||a.push(""):a.push(r.slice(l)),a.length>o?a.slice(0,o):a}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:p.call(this,e,t)}:p;return [function(e,t){var r=d(this),o=null==e?void 0:e[n];return void 0!==o?o.call(e,r,t):y.call(String(r),e,t)},function(e,t){var r=m(y,e,this,t,y!==p);if(r.done)return r.value;var r=g(e),o=String(this),e=v(r,RegExp),n=r.unicode,s=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(S?"y":"g"),i=new e(S?r:"^(?:"+r.source+")",s),a=void 0===t?w:t>>>0;if(0==a)return [];if(0===o.length)return null===_(i,o)?[o]:[];for(var l=0,u=0,c=[];u<o.length;){i.lastIndex=S?u:0;var d,h=_(i,S?o:o.slice(u));if(null===h||(d=x(j(i.lastIndex+(S?0:u)),o.length))===l)u=b(o,u,n);else {if(c.push(o.slice(l,u)),c.length===a)return c;for(var f=1;f<=h.length-1;f++)if(c.push(h[f]),c.length===a)return c;u=l=d;}}return c.push(o.slice(l)),c}]},!S);},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":136}],199:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/object-get-own-property-descriptor").f,s=e("../internals/to-length"),i=e("../internals/not-a-regexp"),a=e("../internals/require-object-coercible"),l=e("../internals/correct-is-regexp-logic"),e=e("../internals/is-pure"),u="".startsWith,c=Math.min,l=l("startsWith");o({target:"String",proto:!0,forced:!!(e||l||(!(o=n(String.prototype,"startsWith"))||o.writable))&&!l},{startsWith:function(e){var t=String(a(this)),r=(i(e),s(c(1<arguments.length?arguments[1]:void 0,t.length))),e=String(e);return u?u.call(t,e,r):t.slice(r,r+e.length)===e}});},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],200:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/create-html");o({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return n(this,"sub","","")}});},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],201:[function(e,t,r){var o=e("../internals/export"),n=e("../internals/string-trim").trim;o({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return n(this)}});},{"../internals/export":50,"../internals/string-trim":129,"../internals/string-trim-forced":128}],202:[function(e,t,r){var o,n,s,i,a,l=e("../internals/export"),u=e("../internals/descriptors"),c=e("../internals/global"),d=e("../internals/has"),h=e("../internals/is-object"),f=e("../internals/object-define-property").f,e=e("../internals/copy-constructor-properties"),p=c.Symbol;!u||"function"!=typeof p||"description"in p.prototype&&void 0===p().description||(o={},e(n=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof n?new p(e):void 0===e?p():p(e);return ""===e&&(o[t]=!0),t},p),(c=n.prototype=p.prototype).constructor=n,s=c.toString,i="Symbol(test)"==String(p("test")),a=/^Symbol\((.*)\)[^)]+$/,f(c,"description",{configurable:!0,get:function(){var e=h(this)?this.valueOf():this,t=s.call(e);return d(o,e)?"":""===(e=i?t.slice(7,-1):t.replace(a,"$1"))?void 0:e}}),l({global:!0,forced:!0},{Symbol:n}));},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],203:[function(e,t,r){e("../internals/define-well-known-symbol")("iterator");},{"../internals/define-well-known-symbol":42}],204:[function(e,D,F){function o(e,t){var r=M[e]=f(w[_]);return ie(r,{type:j,tag:e,description:t}),s||(r.description=t),r}function r(t,e){u(t);var r=c(e),e=q(r).concat(I(r));return v(e,function(e){s&&!R.call(r,e)||L(t,e,r[e]);}),t}function t(e,t){var r,e=c(e),t=d(t,!0);if(e!==x||!l(M,t)||l(E,t))return !(r=le(e,t))||!l(M,t)||l(e,b)&&e[b][t]||(r.enumerable=!0),r}function U(e){var e=ue(c(e)),t=[];return v(e,function(e){l(M,e)||l(ee,e)||t.push(e);}),t}var n=e("../internals/export"),N=e("../internals/global"),B=e("../internals/get-built-in"),G=e("../internals/is-pure"),s=e("../internals/descriptors"),i=e("../internals/native-symbol"),V=e("../internals/use-symbol-as-uid"),a=e("../internals/fails"),l=e("../internals/has"),z=e("../internals/is-array"),H=e("../internals/is-object"),u=e("../internals/an-object"),W=e("../internals/to-object"),c=e("../internals/to-indexed-object"),d=e("../internals/to-primitive"),h=e("../internals/create-property-descriptor"),f=e("../internals/object-create"),q=e("../internals/object-keys"),X=e("../internals/object-get-own-property-names"),Y=e("../internals/object-get-own-property-names-external"),p=e("../internals/object-get-own-property-symbols"),Z=e("../internals/object-get-own-property-descriptor"),Q=e("../internals/object-define-property"),J=e("../internals/object-property-is-enumerable"),K=e("../internals/create-non-enumerable-property"),m=e("../internals/redefine"),y=e("../internals/shared"),$=e("../internals/shared-key"),ee=e("../internals/hidden-keys"),te=e("../internals/uid"),re=e("../internals/well-known-symbol"),oe=e("../internals/well-known-symbol-wrapped"),ne=e("../internals/define-well-known-symbol"),se=e("../internals/set-to-string-tag"),g=e("../internals/internal-state"),v=e("../internals/array-iteration").forEach,b=$("hidden"),j="Symbol",_="prototype",e=re("toPrimitive"),ie=g.set,ae=g.getterFor(j),x=Object[_],w=N.Symbol,S=B("JSON","stringify"),le=Z.f,T=Q.f,ue=Y.f,ce=J.f,M=y("symbols"),E=y("op-symbols"),k=y("string-to-symbol-registry"),C=y("symbol-to-string-registry"),$=y("wks"),g=N.QObject,O=!g||!g[_]||!g[_].findChild,P=s&&a(function(){return 7!=f(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(e,t,r){var o=le(x,t);o&&delete x[t],T(e,t,r),o&&e!==x&&T(x,t,o);}:T,A=V?function(e){return "symbol"==typeof e}:function(e){return Object(e)instanceof w},L=function(e,t,r){e===x&&L(E,t,r),u(e);t=d(t,!0);return u(r),(l(M,t)?(r.enumerable?(l(e,b)&&e[b][t]&&(e[b][t]=!1),r=f(r,{enumerable:h(0,!1)})):(l(e,b)||T(e,b,h(1,{})),e[b][t]=!0),P):T)(e,t,r)},R=function(e){var e=d(e,!0),t=ce.call(this,e);return !(this===x&&l(M,e)&&!l(E,e))&&(!(t||!l(this,e)||!l(M,e)||l(this,b)&&this[b][e])||t)},I=function(e){var t=e===x,e=ue(t?E:c(e)),r=[];return v(e,function(e){!l(M,e)||t&&!l(x,e)||r.push(M[e]);}),r};i||(m((w=function(){if(this instanceof w)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=te(e),r=function(e){this===x&&r.call(E,e),l(this,b)&&l(this[b],t)&&(this[b][t]=!1),P(this,t,h(1,e));};return s&&O&&P(x,t,{configurable:!0,set:r}),o(t,e)})[_],"toString",function(){return ae(this).tag}),m(w,"withoutSetter",function(e){return o(te(e),e)}),J.f=R,Q.f=L,Z.f=t,X.f=Y.f=U,p.f=I,oe.f=function(e){return o(re(e),e)},s&&(T(w[_],"description",{configurable:!0,get:function(){return ae(this).description}}),G||m(x,"propertyIsEnumerable",R,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!i,sham:!i},{Symbol:w}),v(q($),function(e){ne(e);}),n({target:j,stat:!0,forced:!i},{for:function(e){var t,e=String(e);return l(k,e)?k[e]:(t=w(e),k[e]=t,C[t]=e,t)},keyFor:function(e){if(!A(e))throw TypeError(e+" is not a symbol");if(l(C,e))return C[e]},useSetter:function(){O=!0;},useSimple:function(){O=!1;}}),n({target:"Object",stat:!0,forced:!i,sham:!s},{create:function(e,t){return void 0===t?f(e):r(f(e),t)},defineProperty:L,defineProperties:r,getOwnPropertyDescriptor:t}),n({target:"Object",stat:!0,forced:!i},{getOwnPropertyNames:U,getOwnPropertySymbols:I}),n({target:"Object",stat:!0,forced:a(function(){p.f(1);})},{getOwnPropertySymbols:function(e){return p.f(W(e))}}),S&&n({target:"JSON",stat:!0,forced:!i||a(function(){var e=w();return "[null]"!=S([e])||"{}"!=S({a:e})||"{}"!=S(Object(e))})},{stringify:function(e,t,r){for(var o,n=[e],s=1;s<arguments.length;)n.push(arguments[s++]);if((H(o=t)||void 0!==e)&&!A(e))return z(t)||(t=function(e,t){if("function"==typeof o&&(t=o.call(this,e,t)),!A(t))return t}),n[1]=t,S.apply(null,n)}}),w[_][e]||K(w[_],e,w[_].valueOf),se(w,j),ee[b]=!0;},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":134,"../internals/to-object":137,"../internals/to-primitive":140,"../internals/uid":145,"../internals/use-symbol-as-uid":146,"../internals/well-known-symbol":148,"../internals/well-known-symbol-wrapped":147}],205:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-copy-within"),s=o.aTypedArray;(0, o.exportTypedArrayMethod)("copyWithin",function(e,t){return n.call(s(this),e,t,2<arguments.length?arguments[2]:void 0)});},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],206:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").every,s=o.aTypedArray;(0, o.exportTypedArrayMethod)("every",function(e){return n(s(this),e,1<arguments.length?arguments[1]:void 0)});},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],207:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-fill"),s=o.aTypedArray;(0, o.exportTypedArrayMethod)("fill",function(e){return n.apply(s(this),arguments)});},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],208:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),s=e("../internals/array-iteration").filter,i=e("../internals/species-constructor"),a=o.aTypedArray,l=o.aTypedArrayConstructor;(0, o.exportTypedArrayMethod)("filter",function(e){for(var t=s(a(this),e,1<arguments.length?arguments[1]:void 0),e=i(this,this.constructor),r=0,o=t.length,n=new(l(e))(o);r<o;)n[r]=t[r++];return n});},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],209:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").findIndex,s=o.aTypedArray;(0, o.exportTypedArrayMethod)("findIndex",function(e){return n(s(this),e,1<arguments.length?arguments[1]:void 0)});},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],210:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").find,s=o.aTypedArray;(0, o.exportTypedArrayMethod)("find",function(e){return n(s(this),e,1<arguments.length?arguments[1]:void 0)});},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],211:[function(e,t,r){e("../internals/typed-array-constructor")("Float32",function(o){return function(e,t,r){return o(this,e,t,r)}});},{"../internals/typed-array-constructor":142}],212:[function(e,t,r){e("../internals/typed-array-constructor")("Float64",function(o){return function(e,t,r){return o(this,e,t,r)}});},{"../internals/typed-array-constructor":142}],213:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").forEach,s=o.aTypedArray;(0, o.exportTypedArrayMethod)("forEach",function(e){n(s(this),e,1<arguments.length?arguments[1]:void 0);});},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],214:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-includes").includes,s=o.aTypedArray;(0, o.exportTypedArrayMethod)("includes",function(e){return n(s(this),e,1<arguments.length?arguments[1]:void 0)});},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],215:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-includes").indexOf,s=o.aTypedArray;(0, o.exportTypedArrayMethod)("indexOf",function(e){return n(s(this),e,1<arguments.length?arguments[1]:void 0)});},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],216:[function(e,t,r){e("../internals/typed-array-constructor")("Int16",function(o){return function(e,t,r){return o(this,e,t,r)}});},{"../internals/typed-array-constructor":142}],217:[function(e,t,r){e("../internals/typed-array-constructor")("Int32",function(o){return function(e,t,r){return o(this,e,t,r)}});},{"../internals/typed-array-constructor":142}],218:[function(e,t,r){function o(){return a.call(c(this))}var n=e("../internals/global"),s=e("../internals/array-buffer-view-core"),i=e("../modules/es.array.iterator"),e=e("../internals/well-known-symbol")("iterator"),n=n.Uint8Array,a=i.values,l=i.keys,u=i.entries,c=s.aTypedArray,i=s.exportTypedArrayMethod,s=n&&n.prototype[e],n=!!s&&("values"==s.name||null==s.name);i("entries",function(){return u.call(c(this))}),i("keys",function(){return l.call(c(this))}),i("values",o,!n),i(e,o,!n);},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],219:[function(e,t,r){var e=e("../internals/array-buffer-view-core"),o=e.aTypedArray,e=e.exportTypedArrayMethod,n=[].join;e("join",function(e){return n.apply(o(this),arguments)});},{"../internals/array-buffer-view-core":12}],220:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-last-index-of"),s=o.aTypedArray;(0, o.exportTypedArrayMethod)("lastIndexOf",function(e){return n.apply(s(this),arguments)});},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],221:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").map,s=e("../internals/species-constructor"),i=o.aTypedArray,a=o.aTypedArrayConstructor;(0, o.exportTypedArrayMethod)("map",function(e){return n(i(this),e,1<arguments.length?arguments[1]:void 0,function(e,t){return new(a(s(e,e.constructor)))(t)})});},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],222:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-reduce").right,s=o.aTypedArray;(0, o.exportTypedArrayMethod)("reduceRight",function(e){return n(s(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)});},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],223:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-reduce").left,s=o.aTypedArray;(0, o.exportTypedArrayMethod)("reduce",function(e){return n(s(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)});},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],224:[function(e,t,r){var e=e("../internals/array-buffer-view-core"),n=e.aTypedArray,e=e.exportTypedArrayMethod,s=Math.floor;e("reverse",function(){for(var e,t=n(this).length,r=s(t/2),o=0;o<r;)e=this[o],this[o++]=this[--t],this[t]=e;return this});},{"../internals/array-buffer-view-core":12}],225:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),i=e("../internals/to-length"),a=e("../internals/to-offset"),l=e("../internals/to-object"),e=e("../internals/fails"),u=o.aTypedArray;(0, o.exportTypedArrayMethod)("set",function(e){u(this);var t=a(1<arguments.length?arguments[1]:void 0,1),r=this.length,o=l(e),n=i(o.length),s=0;if(r<n+t)throw RangeError("Wrong length");for(;s<n;)this[t+s]=o[s++];},e(function(){new Int8Array(1).set({});}));},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":136,"../internals/to-object":137,"../internals/to-offset":138}],226:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),i=e("../internals/species-constructor"),e=e("../internals/fails"),a=o.aTypedArray,l=o.aTypedArrayConstructor,o=o.exportTypedArrayMethod,u=[].slice;o("slice",function(e,t){for(var r=u.call(a(this),e,t),e=i(this,this.constructor),o=0,n=r.length,s=new(l(e))(n);o<n;)s[o]=r[o++];return s},e(function(){new Int8Array(1).slice();}));},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],227:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").some,s=o.aTypedArray;(0, o.exportTypedArrayMethod)("some",function(e){return n(s(this),e,1<arguments.length?arguments[1]:void 0)});},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],228:[function(e,t,r){var e=e("../internals/array-buffer-view-core"),o=e.aTypedArray,e=e.exportTypedArrayMethod,n=[].sort;e("sort",function(e){return n.call(o(this),e)});},{"../internals/array-buffer-view-core":12}],229:[function(e,t,r){var o=e("../internals/array-buffer-view-core"),n=e("../internals/to-length"),s=e("../internals/to-absolute-index"),i=e("../internals/species-constructor"),a=o.aTypedArray;(0, o.exportTypedArrayMethod)("subarray",function(e,t){var r=a(this),o=r.length,e=s(e,o);return new(i(r,r.constructor))(r.buffer,r.byteOffset+e*r.BYTES_PER_ELEMENT,n((void 0===t?o:s(t,o))-e))});},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":132,"../internals/to-length":136}],230:[function(e,t,r){var o=e("../internals/global"),n=e("../internals/array-buffer-view-core"),e=e("../internals/fails"),s=o.Int8Array,i=n.aTypedArray,o=n.exportTypedArrayMethod,a=[].toLocaleString,l=[].slice,u=!!s&&e(function(){a.call(new s(1));});o("toLocaleString",function(){return a.apply(u?l.call(i(this)):i(this),arguments)},e(function(){return [1,2].toLocaleString()!=new s([1,2]).toLocaleString()})||!e(function(){s.prototype.toLocaleString.call([1,2]);}));},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],231:[function(e,t,r){var o=e("../internals/array-buffer-view-core").exportTypedArrayMethod,n=e("../internals/fails"),e=e("../internals/global").Uint8Array,e=e&&e.prototype||{},s=[].toString,i=[].join,n=(n(function(){s.call({});})&&(s=function(){return i.call(this)}),e.toString!=s);o("toString",s,n);},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],232:[function(e,t,r){e("../internals/typed-array-constructor")("Uint16",function(o){return function(e,t,r){return o(this,e,t,r)}});},{"../internals/typed-array-constructor":142}],233:[function(e,t,r){e("../internals/typed-array-constructor")("Uint32",function(o){return function(e,t,r){return o(this,e,t,r)}});},{"../internals/typed-array-constructor":142}],234:[function(e,t,r){e("../internals/typed-array-constructor")("Uint8",function(o){return function(e,t,r){return o(this,e,t,r)}});},{"../internals/typed-array-constructor":142}],235:[function(e,t,r){e("../internals/typed-array-constructor")("Uint8",function(o){return function(e,t,r){return o(this,e,t,r)}},!0);},{"../internals/typed-array-constructor":142}],236:[function(e,t,r){function o(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}var n,s,i,a,l,u=e("../internals/global"),c=e("../internals/redefine-all"),d=e("../internals/internal-metadata"),h=e("../internals/collection"),f=e("../internals/collection-weak"),p=e("../internals/is-object"),m=e("../internals/internal-state").enforce,e=e("../internals/native-weak-map"),u=!u.ActiveXObject&&"ActiveXObject"in u,y=Object.isExtensible,t=t.exports=h("WeakMap",o,f);e&&u&&(n=f.getConstructor(o,"WeakMap",!0),d.REQUIRED=!0,h=t.prototype,s=h.delete,i=h.has,a=h.get,l=h.set,c(h,{delete:function(e){var t;return p(e)&&!y(e)?((t=m(this)).frozen||(t.frozen=new n),s.call(this,e)||t.frozen.delete(e)):s.call(this,e)},has:function(e){var t;return p(e)&&!y(e)?((t=m(this)).frozen||(t.frozen=new n),i.call(this,e)||t.frozen.has(e)):i.call(this,e)},get:function(e){var t;return !p(e)||y(e)||((t=m(this)).frozen||(t.frozen=new n),i.call(this,e))?a.call(this,e):t.frozen.get(e)},set:function(e,t){var r;return !p(e)||y(e)||((r=m(this)).frozen||(r.frozen=new n),i.call(this,e))?l.call(this,e,t):r.frozen.set(e,t),this}}));},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],237:[function(e,t,r){var o,n=e("../internals/global"),s=e("../internals/dom-iterables"),i=e("../internals/array-for-each"),a=e("../internals/create-non-enumerable-property");for(o in s){var l=n[o],l=l&&l.prototype;if(l&&l.forEach!==i)try{a(l,"forEach",i);}catch(e){l.forEach=i;}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],238:[function(e,t,r){var o,n=e("../internals/global"),s=e("../internals/dom-iterables"),i=e("../modules/es.array.iterator"),a=e("../internals/create-non-enumerable-property"),e=e("../internals/well-known-symbol"),l=e("iterator"),u=e("toStringTag"),c=i.values;for(o in s){var d=n[o],h=d&&d.prototype;if(h){if(h[l]!==c)try{a(h,l,c);}catch(e){h[l]=c;}if(h[u]||a(h,u,o),s[o])for(var f in i)if(h[f]!==i[f])try{a(h,f,i[f]);}catch(e){h[f]=i[f];}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],239:[function(e,t,D){e("../modules/es.array.iterator");function n(t){try{return decodeURIComponent(t)}catch(e){return t}}function r(e){return B[e]}function s(e){return encodeURIComponent(e).replace(N,r)}function c(e){this.entries.length=0,R(this.entries,e);}function u(e,t){if(e<t)throw TypeError("Not enough arguments")}function d(){y(this,d,k);var e,t,r,o,n,s,i,a,l=0<arguments.length?arguments[0]:void 0,u=[];if(O(this,{type:k,entries:u,updateURL:function(){},updateSearchParams:c}),void 0!==l)if(_(l))if("function"==typeof(e=T(l)))for(r=(t=e.call(l)).next;!(o=r.call(t)).done;){if((s=(n=(o=S(j(o.value))).next).call(o)).done||(i=n.call(o)).done||!n.call(o).done)throw TypeError("Expected sequence with length 2");u.push({key:s.value+"",value:i.value+""});}else for(a in l)g(l,a)&&u.push({key:a,value:l[a]+""});else R(u,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"");}var o=e("../internals/export"),i=e("../internals/get-built-in"),a=e("../internals/native-url"),l=e("../internals/redefine"),h=e("../internals/redefine-all"),f=e("../internals/set-to-string-tag"),p=e("../internals/create-iterator-constructor"),m=e("../internals/internal-state"),y=e("../internals/an-instance"),g=e("../internals/has"),v=e("../internals/function-bind-context"),b=e("../internals/classof"),j=e("../internals/an-object"),_=e("../internals/is-object"),x=e("../internals/object-create"),w=e("../internals/create-property-descriptor"),S=e("../internals/get-iterator"),T=e("../internals/get-iterator-method"),e=e("../internals/well-known-symbol"),M=i("fetch"),E=i("Headers"),i=e("iterator"),k="URLSearchParams",C=k+"Iterator",O=m.set,P=m.getterFor(k),F=m.getterFor(C),U=/\+/g,A=Array(4),L=function(e){var t,r=e.replace(U," "),o=4;try{return decodeURIComponent(r)}catch(e){for(;o;)r=r.replace((t=o--,A[t-1]||(A[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))),n);return r}},N=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},R=function(e,t){if(t)for(var r,o=t.split("&"),n=0;n<o.length;)(r=o[n++]).length&&(r=r.split("="),e.push({key:L(r.shift()),value:L(r.join("="))}));},I=p(function(e,t){O(this,{type:C,iterator:S(P(e).entries),kind:t});},"Iterator",function(){var e=F(this),t=e.kind,e=e.iterator.next(),r=e.value;return e.done||(e.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),e}),e=d.prototype;h(e,{append:function(e,t){u(arguments.length,2);var r=P(this);r.entries.push({key:e+"",value:t+""}),r.updateURL();},delete:function(e){u(arguments.length,1);for(var t=P(this),r=t.entries,o=e+"",n=0;n<r.length;)r[n].key===o?r.splice(n,1):n++;t.updateURL();},get:function(e){u(arguments.length,1);for(var t=P(this).entries,r=e+"",o=0;o<t.length;o++)if(t[o].key===r)return t[o].value;return null},getAll:function(e){u(arguments.length,1);for(var t=P(this).entries,r=e+"",o=[],n=0;n<t.length;n++)t[n].key===r&&o.push(t[n].value);return o},has:function(e){u(arguments.length,1);for(var t=P(this).entries,r=e+"",o=0;o<t.length;)if(t[o++].key===r)return !0;return !1},set:function(e,t){u(arguments.length,1);for(var r,o=P(this),n=o.entries,s=!1,i=e+"",a=t+"",l=0;l<n.length;l++)(r=n[l]).key===i&&(s?n.splice(l--,1):(s=!0,r.value=a));s||n.push({key:i,value:a}),o.updateURL();},sort:function(){for(var e,t,r=P(this),o=r.entries,n=o.slice(),s=o.length=0;s<n.length;s++){for(e=n[s],t=0;t<s;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===s&&o.push(e);}r.updateURL();},forEach:function(e){for(var t,r=P(this).entries,o=v(e,1<arguments.length?arguments[1]:void 0,3),n=0;n<r.length;)o((t=r[n++]).value,t.key,this);},keys:function(){return new I(this,"keys")},values:function(){return new I(this,"values")},entries:function(){return new I(this,"entries")}},{enumerable:!0}),l(e,i,e.entries),l(e,"toString",function(){for(var e,t=P(this).entries,r=[],o=0;o<t.length;)e=t[o++],r.push(s(e.key)+"="+s(e.value));return r.join("&")},{enumerable:!0}),f(d,k),o({global:!0,forced:!a},{URLSearchParams:d}),a||"function"!=typeof M||"function"!=typeof E||o({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,r,o,e=[e];return 1<arguments.length&&(_(t=arguments[1])&&(r=t.body,b(r)===k&&((o=t.headers?new E(t.headers):new E).has("content-type")||o.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=x(t,{body:w(0,String(r)),headers:w(0,o)}))),e.push(t)),M.apply(this,e)}}),t.exports={URLSearchParams:d,getState:P};},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],240:[function(e,y,F){e("../modules/es.string.iterator");function c(e){var t,r,o,n;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=Y(e/256);return t.join(".")}if("object"!=typeof e)return e;for(t="",o=le(e),r=0;r<8;r++)n&&0===e[r]||(n=n&&!1,o===r?(t+=r?":":"::",n=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return "["+t+"]"}function n(e){return !e.host||e.cannotBeABaseURL||"file"==e.scheme}function a(e,t,r,o){var n,s,i,a=r||me,l=0,u="",c=!1,d=!1,h=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(ie,"")),t=t.replace(ae,""),n=b(t);l<=n.length;){switch(s=n[l],a){case me:if(!s||!K.test(s)){if(r)return j;a=ge;continue}u+=s.toLowerCase(),a=ye;break;case ye:if(s&&($.test(s)||"+"==s||"-"==s||"."==s))u+=s.toLowerCase();else {if(":"!=s){if(r)return j;u="",a=ge,l=0;continue}if(r&&(k(e)!=v(E,u)||"file"==u&&(C(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=u,r)return void(k(e)&&E[e.scheme]==e.port&&(e.port=null));u="","file"==e.scheme?a=Me:k(e)&&o&&o.scheme==e.scheme?a=ve:k(e)?a=xe:"/"==n[l+1]?(a=be,l++):(e.cannotBeABaseURL=!0,e.path.push(""),a=Ce);}break;case ge:if(!o||o.cannotBeABaseURL&&"#"!=s)return j;if(o.cannotBeABaseURL&&"#"==s){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment="",e.cannotBeABaseURL=!0,a=D;break}a="file"==o.scheme?Me:je;continue;case ve:if("/"!=s||"/"!=n[l+1]){a=je;continue}a=P,l++;break;case be:if("/"==s){a=A;break}a=R;continue;case je:if(e.scheme=o.scheme,s==g)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if("/"==s||"\\"==s&&k(e))a=_e;else if("?"==s)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query="",a=I;else {if("#"!=s){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),a=R;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment="",a=D;}break;case _e:if(!k(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,a=R;continue}a=A;}else a=P;break;case xe:if(a=P,"/"!=s||"/"!=u.charAt(l+1))continue;l++;break;case P:if("/"==s||"\\"==s)break;a=A;continue;case A:if("@"==s){c&&(u="%40"+u);for(var c=!0,f=b(u),p=0;p<f.length;p++){var m=f[p];":"!=m||h?(m=M(m,T),h?e.password+=m:e.username+=m):h=!0;}u="";}else if(s==g||"/"==s||"?"==s||"#"==s||"\\"==s&&k(e)){if(c&&""==u)return Q;l-=b(u).length+1,u="",a=we;}else u+=s;break;case we:case Se:if(r&&"file"==e.scheme){a=ke;continue}if(":"!=s||d){if(s==g||"/"==s||"?"==s||"#"==s||"\\"==s&&k(e)){if(k(e)&&""==u)return _;if(r&&""==u&&(C(e)||null!==e.port))return;if(i=w(e,u))return i;if(u="",a=L,r)return;continue}"["==s?d=!0:"]"==s&&(d=!1),u+=s;}else {if(""==u)return _;if(i=w(e,u))return i;if(u="",a=Te,r==Se)return}break;case Te:if(!x.test(s)){if(s==g||"/"==s||"?"==s||"#"==s||"\\"==s&&k(e)||r){if(""!=u){var y=parseInt(u,10);if(65535<y)return J;e.port=k(e)&&y===E[e.scheme]?null:y,u="";}if(r)return;a=L;continue}return J}u+=s;break;case Me:if(e.scheme="file","/"==s||"\\"==s)a=Ee;else {if(!o||"file"!=o.scheme){a=R;continue}if(s==g)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if("?"==s)e.host=o.host,e.path=o.path.slice(),e.query="",a=I;else {if("#"!=s){de(n.slice(l).join(""))||(e.host=o.host,e.path=o.path.slice(),he(e)),a=R;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment="",a=D;}}break;case Ee:if("/"==s||"\\"==s){a=ke;break}o&&"file"==o.scheme&&!de(n.slice(l).join(""))&&(O(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),a=R;continue;case ke:if(s==g||"/"==s||"\\"==s||"?"==s||"#"==s){if(!r&&O(u))a=R;else {if(""==u){if(e.host="",r)return}else {if(i=w(e,u))return i;if("localhost"==e.host&&(e.host=""),r)return;u="";}a=L;}continue}u+=s;break;case L:if(k(e)){if(a=R,"/"!=s&&"\\"!=s)continue}else if(r||"?"!=s)if(r||"#"!=s){if(s!=g&&(a=R,"/"!=s))continue}else e.fragment="",a=D;else e.query="",a=I;break;case R:if(s==g||"/"==s||"\\"==s&&k(e)||!r&&("?"==s||"#"==s)){if(pe(u)?(he(e),"/"==s||"\\"==s&&k(e)||e.path.push("")):fe(u)?"/"==s||"\\"==s&&k(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&O(u)&&(e.host&&(e.host=""),u=u.charAt(0)+":"),e.path.push(u)),u="","file"==e.scheme&&(s==g||"?"==s||"#"==s))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==s?(e.query="",a=I):"#"==s&&(e.fragment="",a=D);}else u+=M(s,ce);break;case Ce:"?"==s?(e.query="",a=I):"#"==s?(e.fragment="",a=D):s!=g&&(e.path[0]+=M(s,S));break;case I:r||"#"!=s?s!=g&&("'"==s&&k(e)?e.query+="%27":e.query+="#"==s?"%23":M(s,S)):(e.fragment="",a=D);break;case D:s!=g&&(e.fragment+=M(s,ue));}l++;}}function l(e){var t,r,o=G(this,l,"URL"),n=1<arguments.length?arguments[1]:void 0,e=String(e),s=X(o,{type:"URL"});if(void 0!==n)if(n instanceof l)t=p(n);else if(r=a(t={},String(n)))throw TypeError(r);if(r=a(s,e,null,t))throw TypeError(r);var i=s.searchParams=new q;(n=f(i)).updateSearchParams(s.query),n.updateURL=function(){s.query=String(i)||null;},u||(o.href=m.call(o),o.origin=Oe.call(o),o.protocol=Pe.call(o),o.username=Ae.call(o),o.password=Le.call(o),o.host=Re.call(o),o.hostname=Ie.call(o),o.port=De.call(o),o.pathname=Fe.call(o),o.search=Ue.call(o),o.searchParams=Ne.call(o),o.hash=Be.call(o));}function t(e,t){return {get:e,set:t,configurable:!0,enumerable:!0}}var g,r,o,U=e("../internals/export"),u=e("../internals/descriptors"),N=e("../internals/native-url"),s=e("../internals/global"),B=e("../internals/object-define-properties"),i=e("../internals/redefine"),G=e("../internals/an-instance"),v=e("../internals/has"),d=e("../internals/object-assign"),b=e("../internals/array-from"),V=e("../internals/string-multibyte").codeAt,z=e("../internals/string-punycode-to-ascii"),H=e("../internals/set-to-string-tag"),W=e("../modules/web.url-search-params"),e=e("../internals/internal-state"),h=s.URL,q=W.URLSearchParams,f=W.getState,X=e.set,p=e.getterFor("URL"),Y=Math.floor,Z=Math.pow,Q="Invalid authority",j="Invalid scheme",_="Invalid host",J="Invalid port",K=/[A-Za-z]/,$=/[\d+-.A-Za-z]/,x=/\d/,ee=/^(0x|0X)/,te=/^[0-7]+$/,re=/^\d+$/,oe=/^[\dA-Fa-f]+$/,ne=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,se=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ie=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ae=/[\u0009\u000A\u000D]/g,w=function(e,t){var r,o,n;if("["==t.charAt(0))return "]"==t.charAt(t.length-1)&&(r=function(e){var t=[0,0,0,0,0,0,0,0],r=0,o=null,n=0,s,i,a,l,u,c,d,h=function(){return e.charAt(n)};if(h()==":"){if(e.charAt(1)!=":")return;n+=2;r++;o=r;}while(h()){if(r==8)return;if(h()==":"){if(o!==null)return;n++;r++;o=r;continue}s=i=0;while(i<4&&oe.test(h())){s=s*16+parseInt(h(),16);n++;i++;}if(h()=="."){if(i==0)return;n-=i;if(r>6)return;a=0;while(h()){l=null;if(a>0)if(h()=="."&&a<4)n++;else return;if(!x.test(h()))return;while(x.test(h())){u=parseInt(h(),10);if(l===null)l=u;else if(l==0)return;else l=l*10+u;if(l>255)return;n++;}t[r]=t[r]*256+l;a++;if(a==2||a==4)r++;}if(a!=4)return;break}else if(h()==":"){n++;if(!h())return}else if(h())return;t[r++]=s;}if(o!==null){c=r-o;r=7;while(r!=0&&c>0){d=t[r];t[r--]=t[o+c-1];t[o+--c]=d;}}else if(r!=8)return;return t}(t.slice(1,-1)))?void(e.host=r):_;if(k(e))return t=z(t),ne.test(t)||null===(r=function(e){var t=e.split("."),r,o,n,s,i,a,l;if(t.length&&t[t.length-1]=="")t.pop();if((r=t.length)>4)return e;for(o=[],n=0;n<r;n++){s=t[n];if(s=="")return e;i=10;if(s.length>1&&s.charAt(0)=="0"){i=ee.test(s)?16:8;s=s.slice(i==8?1:2);}if(s==="")a=0;else {if(!(i==10?re:i==8?te:oe).test(s))return e;a=parseInt(s,i);}o.push(a);}for(n=0;n<r;n++){a=o[n];if(n==r-1){if(a>=Z(256,5-r))return null}else if(a>255)return null}for(l=o.pop(),n=0;n<o.length;n++)l+=o[n]*Z(256,3-n);return l}(t))?_:void(e.host=r);if(se.test(t))return _;for(r="",o=b(t),n=0;n<o.length;n++)r+=M(o[n],S);e.host=r;},le=function(e){for(var t=null,r=1,o=null,n=0,s=0;s<8;s++)0!==e[s]?(r<n&&(t=o,r=n),o=null,n=0):(null===o&&(o=s),++n);return r<n&&(t=o,r=n),t},S={},ue=d({},S,{" ":1,'"':1,"<":1,">":1,"`":1}),ce=d({},ue,{"#":1,"?":1,"{":1,"}":1}),T=d({},ce,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),M=function(e,t){var r=V(e,0);return 32<r&&r<127&&!v(t,e)?e:encodeURIComponent(e)},E={ftp:21,file:null,http:80,https:443,ws:80,wss:443},k=function(e){return v(E,e.scheme)},C=function(e){return ""!=e.username||""!=e.password},O=function(e,t){return 2==e.length&&K.test(e.charAt(0))&&(":"==(e=e.charAt(1))||!t&&"|"==e)},de=function(e){return 1<e.length&&O(e.slice(0,2))&&(2==e.length||"/"===(e=e.charAt(2))||"\\"===e||"?"===e||"#"===e)},he=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&O(t[0],!0)||t.pop();},fe=function(e){return "."===e||"%2e"===e.toLowerCase()},pe=function(e){return ".."===(e=e.toLowerCase())||"%2e."===e||".%2e"===e||"%2e%2e"===e},me={},ye={},ge={},ve={},be={},je={},_e={},xe={},P={},A={},we={},Se={},Te={},Me={},Ee={},ke={},L={},R={},Ce={},I={},D={},s=l.prototype,m=function(){var e=p(this),t=e.scheme,r=e.username,o=e.password,n=e.host,s=e.port,i=e.path,a=e.query,l=e.fragment,u=t+":";return null!==n?(u+="//",C(e)&&(u+=r+(o?":"+o:"")+"@"),u+=c(n),null!==s&&(u+=":"+s)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?i[0]:i.length?"/"+i.join("/"):"",null!==a&&(u+="?"+a),null!==l&&(u+="#"+l),u},Oe=function(){var e=p(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return "null"}return "file"!=t&&k(e)?t+"://"+c(e.host)+(null!==r?":"+r:""):"null"},Pe=function(){return p(this).scheme+":"},Ae=function(){return p(this).username},Le=function(){return p(this).password},Re=function(){var e=p(this),t=e.host,e=e.port;return null===t?"":null===e?c(t):c(t)+":"+e},Ie=function(){var e=p(this).host;return null===e?"":c(e)},De=function(){var e=p(this).port;return null===e?"":String(e)},Fe=function(){var e=p(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ue=function(){var e=p(this).query;return e?"?"+e:""},Ne=function(){return p(this).searchParams},Be=function(){var e=p(this).fragment;return e?"#"+e:""};u&&B(s,{href:t(m,function(e){var t=p(this),e=String(e),e=a(t,e);if(e)throw TypeError(e);f(t.searchParams).updateSearchParams(t.query);}),origin:t(Oe),protocol:t(Pe,function(e){var t=p(this);a(t,String(e)+":",me);}),username:t(Ae,function(e){var t=p(this),r=b(String(e));if(!n(t)){t.username="";for(var o=0;o<r.length;o++)t.username+=M(r[o],T);}}),password:t(Le,function(e){var t=p(this),r=b(String(e));if(!n(t)){t.password="";for(var o=0;o<r.length;o++)t.password+=M(r[o],T);}}),host:t(Re,function(e){var t=p(this);t.cannotBeABaseURL||a(t,String(e),we);}),hostname:t(Ie,function(e){var t=p(this);t.cannotBeABaseURL||a(t,String(e),Se);}),port:t(De,function(e){var t=p(this);n(t)||(""==(e=String(e))?t.port=null:a(t,e,Te));}),pathname:t(Fe,function(e){var t=p(this);t.cannotBeABaseURL||(t.path=[],a(t,e+"",L));}),search:t(Ue,function(e){var t=p(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",a(t,e,I)),f(t.searchParams).updateSearchParams(t.query);}),searchParams:t(Ne),hash:t(Be,function(e){var t=p(this);""==(e=String(e))?t.fragment=null:("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",a(t,e,D));})}),i(s,"toJSON",function(){return m.call(this)},{enumerable:!0}),i(s,"toString",function(){return m.call(this)},{enumerable:!0}),h&&(r=h.createObjectURL,o=h.revokeObjectURL,r&&i(l,"createObjectURL",function(e){return r.apply(h,arguments)}),o&&i(l,"revokeObjectURL",function(e){return o.apply(h,arguments)})),H(l,"URL"),U({global:!0,forced:!N,sham:!u},{URL:l});},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":126,"../modules/es.string.iterator":192,"../modules/web.url-search-params":239}],241:[function(e,t,r){t.exports=e("./").polyfill();},{"./":242}],242:[function(V,r,o){!function(B,G){var e,t;e=this,t=function(){function l(e){return "function"==typeof e}var r=Array.isArray||function(e){return "[object Array]"===Object.prototype.toString.call(e)},o=0,t=void 0,n=void 0,i=function(e,t){d[o]=e,d[o+1]=t,2===(o+=2)&&(n?n(h):D());};var e="undefined"!=typeof window?window:void 0,s=e||{},s=s.MutationObserver||s.WebKitMutationObserver,a="undefined"==typeof self&&void 0!==B&&"[object process]"==={}.toString.call(B),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function c(){var e=setTimeout;return function(){return e(h,1)}}var d=new Array(1e3);function h(){for(var e=0;e<o;e+=2)(0, d[e])(d[e+1]),d[e]=void 0,d[e+1]=void 0;o=0;}function f(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(h);}:c()}catch(e){return c()}}var p,m,y,D=void 0;function g(e,t){var r,o=this,n=new this.constructor(j),s=(void 0===n[b]&&A(n),o._state);return s?(r=arguments[s-1],i(function(){return O(s,n,r,o._result)})):k(o,n,e,t),n}function v(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(T(t=new this(j),e),t)}var D=a?function(){return B.nextTick(h)}:s?(m=0,a=new s(h),y=document.createTextNode(""),a.observe(y,{characterData:!0}),function(){y.data=m=++m%2;}):u?((p=new MessageChannel).port1.onmessage=h,function(){return p.port2.postMessage(0)}):(void 0===e&&"function"==typeof V?f:c)(),b=Math.random().toString(36).substring(2);function j(){}var _=void 0,x=1,w=2;function F(e,o,n){i(function(t){var r=!1,e=function(e,t,r,o){try{e.call(t,r,o);}catch(e){return e}}(n,o,function(e){r||(r=!0,(o!==e?T:M)(t,e));},function(e){r||(r=!0,E(t,e));},t._label);!r&&e&&(r=!0,E(t,e));},e);}function S(e,t,r){var o,n;t.constructor===e.constructor&&r===g&&t.constructor.resolve===v?(o=e,(n=t)._state===x?M(o,n._result):n._state===w?E(o,n._result):k(n,void 0,function(e){return T(o,e)},function(e){return E(o,e)})):void 0!==r&&l(r)?F(e,t,r):M(e,t);}function T(t,e){if(t===e)E(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof e,null===e||"object"!=r&&"function"!=r)M(t,e);else {r=void 0;try{r=e.then;}catch(e){return void E(t,e)}S(t,e,r);}var r;}function U(e){e._onerror&&e._onerror(e._result),C(e);}function M(e,t){e._state===_&&(e._result=t,e._state=x,0!==e._subscribers.length&&i(C,e));}function E(e,t){e._state===_&&(e._state=w,e._result=t,i(U,e));}function k(e,t,r,o){var n=e._subscribers,s=n.length;e._onerror=null,n[s]=t,n[s+x]=r,n[s+w]=o,0===s&&e._state&&i(C,e);}function C(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var o,n=void 0,s=e._result,i=0;i<t.length;i+=3)o=t[i],n=t[i+r],o?O(r,o,n,s):n(s);e._subscribers.length=0;}}function O(e,t,r,o){var n=l(r),s=void 0,i=void 0,a=!0;if(n){try{s=r(o);}catch(e){a=!1,i=e;}if(t===s)return void E(t,new TypeError("A promises callback cannot return that same promise."))}else s=o;t._state===_&&(n&&a?T(t,s):!1===a?E(t,i):e===x?M(t,s):e===w&&E(t,s));}var P=0;function A(e){e[b]=P++,e._state=void 0,e._result=void 0,e._subscribers=[];}L.prototype._enumerate=function(e){for(var t=0;this._state===_&&t<e.length;t++)this._eachEntry(e[t],t);},L.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,o=r.resolve;if(o===v){var n,s=void 0,i=void 0,a=!1;try{s=t.then;}catch(e){a=!0,i=e;}s===g&&t._state!==_?this._settledAt(t._state,e,t._result):"function"!=typeof s?(this._remaining--,this._result[e]=t):r===R?(n=new r(j),a?E(n,i):S(n,t,s),this._willSettleAt(n,e)):this._willSettleAt(new r(function(e){return e(t)}),e);}else this._willSettleAt(o(t),e);},L.prototype._settledAt=function(e,t,r){var o=this.promise;o._state===_&&(this._remaining--,e===w?E(o,r):this._result[t]=r),0===this._remaining&&M(o,this._result);},L.prototype._willSettleAt=function(e,t){var r=this;k(e,void 0,function(e){return r._settledAt(x,t,e)},function(e){return r._settledAt(w,t,e)});};var N=L;function L(e,t){this._instanceConstructor=e,this.promise=new e(j),this.promise[b]||A(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||M(this.promise,this._result)):E(this.promise,new Error("Array Methods must be provided an Array"));}I.prototype.catch=function(e){return this.then(null,e)},I.prototype.finally=function(t){var r=this.constructor;return l(t)?this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):this.then(t,t)};var R=I;function I(e){if(this[b]=P++,this._result=this._state=void 0,this._subscribers=[],j!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof I))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this;try{e(function(e){T(t,e);},function(e){E(t,e);});}catch(e){E(t,e);}}}return R.prototype.then=g,R.all=function(e){return new N(this,e).promise},R.race=function(n){var s=this;return r(n)?new s(function(e,t){for(var r=n.length,o=0;o<r;o++)s.resolve(n[o]).then(e,t);}):new s(function(e,t){return t(new TypeError("You must pass an array to race."))})},R.resolve=v,R.reject=function(e){var t=new this(j);return E(t,e),t},R._setScheduler=function(e){n=e;},R._setAsap=function(e){i=e;},R._asap=i,R.polyfill=function(){var e=void 0;if(void 0!==G)e=G;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")();}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve());}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=R;},R.Promise=R},"object"==typeof o&&void 0!==r?r.exports=t():e.ES6Promise=t();}.call(this,V("_process"),"undefined"!=typeof commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{_process:251}],243:[function(e,t,r){var o,n;o=this,n=function(e,t){var r=5e3,o="callback";function d(t){try{delete window[t];}catch(e){window[t]=void 0;}}function h(e){e=document.getElementById(e);e&&document.getElementsByTagName("head")[0].removeChild(e);}t.exports=function(s){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s,l=i.timeout||r,u=i.jsonpCallback||o,c=void 0;return new Promise(function(t,e){var r=i.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),o=u+"_"+r,n=(window[r]=function(e){t({ok:!0,json:function(){return Promise.resolve(e)}}),c&&clearTimeout(c),h(o),d(r);},a+=-1===a.indexOf("?")?"?":"&",document.createElement("script"));n.setAttribute("src",""+a+u+"="+r),i.charset&&n.setAttribute("charset",i.charset),n.id=o,document.getElementsByTagName("head")[0].appendChild(n),c=setTimeout(function(){e(new Error("JSONP request to "+s+" timed out")),d(r),h(o),window[r]=function(){d(r);};},l),n.onerror=function(){e(new Error("JSONP request to "+s+" failed")),d(r),h(o),c&&clearTimeout(c);};})};},void 0!==r&&void 0!==t?n(0,t):(n(n={exports:{}},n),o.fetchJsonp=n.exports);},{}],244:[function(e,t,r){var o=function(a){var l,u,c,d,h,f,t,p,m,o,e;if(!(void 0===a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)))return e=a.document,l=function(){return a.URL||a.webkitURL||a},u=e.createElementNS("http://www.w3.org/1999/xhtml","a"),c="download"in u,d=/constructor/i.test(a.HTMLElement)||a.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(e){(a.setImmediate||a.setTimeout)(function(){throw e},0);},t=4e4,p=function(e){setTimeout(function(){"string"==typeof e?l().revokeObjectURL(e):e.remove();},t);},m=function(e){return /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},e=(o=function(e,r,t){t||(e=m(e));var o,n,s=this,t="application/octet-stream"===e.type,i=function(){for(var e=s,t="writestart progress write writeend".split(" "),r=void 0,o=(t=[].concat(t)).length;o--;){var n=e["on"+t[o]];if("function"==typeof n)try{n.call(e,r||e);}catch(e){f(e);}}};s.readyState=s.INIT,c?(o=l().createObjectURL(e),setTimeout(function(){var e,t;u.href=o,u.download=r,e=u,t=new MouseEvent("click"),e.dispatchEvent(t),i(),p(o),s.readyState=s.DONE;})):(h||t&&d)&&a.FileReader?((n=new FileReader).onloadend=function(){var e=h?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(e,"_blank")||(a.location.href=e),e=void 0,s.readyState=s.DONE,i();},n.readAsDataURL(e),s.readyState=s.INIT):(o=o||l().createObjectURL(e),!t&&a.open(o,"_blank")||(a.location.href=o),s.readyState=s.DONE,i(),p(o));}).prototype,"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return t=t||e.name||"download",r||(e=m(e)),navigator.msSaveOrOpenBlob(e,t)}:(e.abort=function(){},e.readyState=e.INIT=0,e.WRITING=1,e.DONE=2,e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null,function(e,t,r){return new o(e,t||e.name||"download",r)})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports?t.exports.saveAs=o:null!=s;},{}],245:[function(e,t,r){var o,n=Object.defineProperty,s=(n(r,"__esModule",{value:!0}),r),i={GIFEncoder:()=>h,applyPalette:()=>function(e,t,r="rgb565"){if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<t.length)throw new Error("applyPalette() only works with 256 colors or less");const o=new Uint32Array(e.buffer),n=o.length,s="rgb444"===r?4096:65536,i=new Uint8Array(n),a=new Array(s);if("rgba4444"===r)for(let e=0;e<n;e++){var l=o[e],u=l>>24&255,c=l>>16&255,d=l>>8&255,l=255&l,h=P(l,d,c,u),h=h in a?a[h]:a[h]=function(t,r,o,n,s){let i=0,a=1e100;for(let e=0;e<s.length;e++){var l,u=s[e],c=v(u[3]-n);c>a||(l=u[0],(c+=v(l-t))>a||(l=u[1],(c+=v(l-r))>a||(l=u[2],(c+=v(l-o))>a||(a=c,i=e))));}return i}(l,d,c,u,t);i[e]=h;}else {const g="rgb444"===r?A:O;for(let e=0;e<n;e++){var f=o[e],p=f>>16&255,m=f>>8&255,f=255&f,y=g(f,m,p),y=y in a?a[y]:a[y]=function(t,r,o,n){let s=0,i=1e100;for(let e=0;e<n.length;e++){var a,l=n[e],u=v(l[0]-t);u>i||(a=l[1],(u+=v(a-r))>i||(a=l[2],(u+=v(a-o))>i||(i=u,s=e)));}return s}(f,m,p,t);i[e]=y;}}return i},default:()=>f,nearestColor:()=>function(e,t,r=u){return e[l(e,t,r)]},nearestColorIndex:()=>l,nearestColorIndexWithDistance:()=>d,prequantize:()=>function(e,{roundRGB:r=5,roundAlpha:o=10,oneBitAlpha:n=null}={}){const s=new Uint32Array(e.buffer);for(let t=0;t<s.length;t++){var i=s[t];let e=i>>24&255;var a,l=i>>16&255,u=i>>8&255,i=255&i;e=c(e,o),n&&(a="number"==typeof n?n:127,e=e<=a?0:255),i=c(i,r),u=c(u,r),l=c(l,r),s[t]=e<<24|l<<16|u<<8|i<<0;}},quantize:()=>function(e,t,r={}){var{format:o="rgb565",clearAlpha:n=!0,clearAlphaColor:s=0,clearAlphaThreshold:i=0,oneBitAlpha:a=!1}=r;if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");e=new Uint32Array(e.buffer);let l=!1!==r.useSqrt;const u="rgba4444"===o,c=function(r,e){const t="rgb444"===e?4096:65536,o=new Array(t),n=r.length;if("rgba4444"===e)for(let t=0;t<n;++t){var s=r[t],i=s>>24&255,a=s>>16&255,l=s>>8&255,s=255&s,u=P(s,l,a,i);let e=u in o?o[u]:o[u]=D();e.rc+=s,e.gc+=l,e.bc+=a,e.ac+=i,e.cnt++;}else if("rgb444"===e)for(let t=0;t<n;++t){var c=r[t],d=c>>16&255,h=c>>8&255,c=255&c,f=A(c,h,d);let e=f in o?o[f]:o[f]=D();e.rc+=c,e.gc+=h,e.bc+=d,e.cnt++;}else for(let t=0;t<n;++t){var p=r[t],m=p>>16&255,y=p>>8&255,p=255&p,g=O(p,y,m);let e=g in o?o[g]:o[g]=D();e.rc+=p,e.gc+=y,e.bc+=m,e.cnt++;}return o}(e,o),d=c.length,h=d-1,f=new Uint32Array(d+1);for(var p=0,m=0;m<d;++m){const C=c[m];null!=C&&(M=1/C.cnt,u&&(C.ac*=M),C.rc*=M,C.gc*=M,C.bc*=M,c[p++]=C);}R(t)/p<.022&&(l=!1);for(var y,g,v,m=0;m<p-1;++m)c[m].fw=m+1,c[m+1].bk=m,l&&(c[m].cnt=Math.sqrt(c[m].cnt));l&&(c[m].cnt=Math.sqrt(c[m].cnt));for(m=0;m<p;++m){I(c,m,!1);var b=c[m].err;for(g=++f[0];1<g&&(v=g>>1,!(c[y=f[v]].err<=b));g=v)f[g]=y;f[g]=m;}var j,_=p-t;for(m=0;m<_;){for(;;){var x=f[1];if((j=c[x]).tm>=j.mtm&&c[j.nn].mtm<=j.tm)break;j.mtm==h?x=f[1]=f[f[0]--]:(I(c,x,!1),j.tm=m);b=c[x].err;for(g=1;(v=g+g)<=f[0]&&(v<f[0]&&c[f[v]].err>c[f[v+1]].err&&v++,!(b<=c[y=f[v]].err));g=v)f[g]=y;f[g]=x;}var w=c[j.nn],S=j.cnt,T=w.cnt,M=1/(S+T);u&&(j.ac=M*(S*j.ac+T*w.ac)),j.rc=M*(S*j.rc+T*w.rc),j.gc=M*(S*j.gc+T*w.gc),j.bc=M*(S*j.bc+T*w.bc),j.cnt+=w.cnt,j.mtm=++m,c[w.bk].fw=w.fw,c[w.fw].bk=w.bk,w.mtm=h;}let E=[];for(m=0;;0){let e=L(Math.round(c[m].rc),0,255),t=L(Math.round(c[m].gc),0,255),r=L(Math.round(c[m].bc),0,255),o=255;u&&(o=L(Math.round(c[m].ac),0,255),a&&(k="number"==typeof a?a:127,o=o<=k?0:255),n&&o<=i&&(e=t=r=s,o=0));var k=u?[e,t,r,o]:[e,t,r];if(function(t,r){for(let e=0;e<t.length;e++){var o=t[e],n=o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2],o=!(4<=o.length&&4<=r.length)||o[3]===r[3];if(n&&o)return !0}return !1}(E,k)||E.push(k),0==(m=c[m].fw))break}return E},snapColorsToPalette:()=>function(r,o,e=5){if(r.length&&o.length){var n=r.map(e=>e.slice(0,3)),s=e*e,i=r[0].length;for(let t=0;t<o.length;t++){let e=o[t];e=e.length<i?[e[0],e[1],e[2],255]:e.length>i?e.slice(0,3):e.slice();var a=d(n,e.slice(0,3),u),l=a[0],a=a[1];0<a&&a<=s&&(r[l]=e);}}}};for(o in i)n(s,o,{get:i[o],enumerable:!0});var a={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function E(e=256){let n=0,s=new Uint8Array(e);return {get buffer(){return s.buffer},reset(){n=0;},bytesView(){return s.subarray(0,n)},bytes(){return s.slice(0,n)},writeByte(e){i(n+1),s[n]=e,n++;},writeBytes(t,r=0,o=t.length){i(n+o);for(let e=0;e<o;e++)s[n++]=t[e+r];},writeBytesView(e,t=0,r=e.byteLength){i(n+r),s.set(e.subarray(t,t+r),n),n+=r;}};function i(e){var t=s.length;if(!(e<=t)){e=Math.max(e,t*(t<1048576?2:1.125)>>>0),0!=t&&(e=Math.max(e,256));const r=s;s=new Uint8Array(e),0<n&&s.set(r.subarray(0,n),0);}}}var k=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];var S=function(e,t,r,o,n=E(512),s=new Uint8Array(256),i=new Int32Array(5003),a=new Int32Array(5003)){var l=i.length,o=Math.max(2,o);s.fill(0),a.fill(0),i.fill(-1);let u=0,c=0;var d=o+1;const h=d;let f=!1,p=h,m=(1<<p)-1;var y=1<<d-1;const g=1+y;let v=2+y,b=0,j=r[0],_=0;for(let e=l;e<65536;e*=2)++_;_=8-_,n.writeByte(o),M(y);var x=r.length;for(let t=1;t<x;t++)e:{var w=r[t],S=(w<<12)+j;let e=w<<_^j;if(i[e]===S)j=a[e];else {for(var T=0===e?1:l-e;0<=i[e];)if((e-=T)<0&&(e+=l),i[e]===S){j=a[e];break e}M(j),j=w,v<4096?(a[e]=v++,i[e]=S):(i.fill(-1),v=2+y,f=!0,M(y));}}return M(j),M(g),n.writeByte(0),n.bytesView();function M(e){for(u&=k[c],0<c?u|=e<<c:u=e,c+=p;8<=c;)s[b++]=255&u,254<=b&&(n.writeByte(b),n.writeBytesView(s,0,b),b=0),u>>=8,c-=8;if((v>m||f)&&(f?(p=h,m=(1<<p)-1,f=!1):(++p,m=12===p?1<<p:(1<<p)-1)),e==g){for(;0<c;)s[b++]=255&u,254<=b&&(n.writeByte(b),n.writeBytesView(s,0,b),b=0),u>>=8,c-=8;0<b&&(n.writeByte(b),n.writeBytesView(s,0,b),b=0);}}};function O(e,t,r){return e<<8&63488|t<<2&992|r>>3}function P(e,t,r,o){return e>>4|240&t|(240&r)<<4|(240&o)<<8}function A(e,t,r){return e>>4<<8|240&t|r>>4}function L(e,t,r){return e<t?t:r<e?r:e}function R(e){return e*e}function I(e,t,r){var o=0,n=1e100;const s=e[t];for(var i=s.cnt,a=s.ac,l=s.rc,u=s.gc,c=s.bc,d=s.fw;0!=d;d=e[d].fw){var h,f=e[d],p=f.cnt,p=i*p/(i+p);n<=p||(h=0,r&&n<=(h+=p*R(f.ac-a))||n<=(h+=p*R(f.rc-l))||n<=(h+=p*R(f.gc-u))||n<=(h+=p*R(f.bc-c))||(n=h,o=d));}s.err=n,s.nn=o;}function D(){return {ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function u(e,t){for(var r=0,o=0;o<e.length;o++){var n=e[o]-t[o];r+=n*n;}return r}function c(e,t){return 1<t?Math.round(e/t)*t:e}function v(e){return e*e}function l(t,r,o=u){let n=1/0,s=-1;for(let e=0;e<t.length;e++){var i=o(r,t[e]);i<n&&(n=i,s=e);}return s}function d(t,r,o=u){let n=1/0,s=-1;for(let e=0;e<t.length;e++){var i=o(r,t[e]);i<n&&(n=i,s=e);}return [s,n]}function h(e={}){const{initialCapacity:t=4096,auto:g=!0}=e,v=E(t);const b=new Uint8Array(256),j=new Int32Array(5003),_=new Int32Array(5003);let x=!1;return {reset(){v.reset(),x=!1;},finish(){v.writeByte(a.trailer);},bytes(){return v.bytes()},bytesView(){return v.bytesView()},get buffer(){return v.buffer},get stream(){return v},writeHeader:w,writeFrame(e,t,r,o={}){var{transparent:n=!1,transparentIndex:s=0,delay:i=0,palette:a=null,repeat:l=0,colorDepth:u=8,dispose:c=-1}=o;let d=!1;if(g?x||(d=!0,w(),x=!0):d=Boolean(o.first),t=Math.max(0,Math.floor(t)),r=Math.max(0,Math.floor(r)),d){if(!a)throw new Error("First frame must include a { palette } option");var[o,h,f,p,m=8]=[v,t,r,a,u];p=F(p.length)-1,m=128|m-1<<4|p,M(o,h),M(o,f),o.writeBytes([m,0,0]),T(v,a),0<=l&&(p=v,h=l,p.writeByte(33),p.writeByte(255),p.writeByte(11),C(p,"NETSCAPE2.0"),p.writeByte(3),p.writeByte(1),M(p,h),p.writeByte(0));}var y,f=Math.round(i/10),o=v,m=c,l=f,h=n,p=s,i=(o.writeByte(33),o.writeByte(249),o.writeByte(4),p<0&&(p=0,h=!1),h=h?(y=1,2):y=0,0<=m&&(h=7&m),h<<=2,o.writeByte(0|h|y),M(o,l),o.writeByte(p||0),o.writeByte(0),Boolean(a)&&!d);c=v,n=t,s=r,y=i?a:null,c.writeByte(44),M(c,0),M(c,0),M(c,n),M(c,s),y?(n=F(y.length)-1,c.writeByte(128|n)):c.writeByte(0),i&&T(v,a),[l,o,s,n,c=8,i,a,e]=[v,e,t,r,u,b,j,_],S(s,n,o,c,l,i,a,e);}};function w(){C(v,"GIF89a");}}function T(r,o){var e=1<<F(o.length);for(let t=0;t<e;t++){let e=[0,0,0];t<o.length&&(e=o[t]),r.writeByte(e[0]),r.writeByte(e[1]),r.writeByte(e[2]);}}function M(e,t){e.writeByte(255&t),e.writeByte(t>>8&255);}function C(e,t){for(var r=0;r<t.length;r++)e.writeByte(t.charCodeAt(r));}function F(e){return Math.max(Math.ceil(Math.log2(e)),1)}var f=h;},{}],246:[function(e,t,r){r.read=function(e,t,r,o,n){var s,i,a=8*n-o-1,l=(1<<a)-1,u=l>>1,c=-7,d=r?n-1:0,h=r?-1:1,n=e[t+d];for(d+=h,s=n&(1<<-c)-1,n>>=-c,c+=a;0<c;s=256*s+e[t+d],d+=h,c-=8);for(i=s&(1<<-c)-1,s>>=-c,c+=o;0<c;i=256*i+e[t+d],d+=h,c-=8);if(0===s)s=1-u;else {if(s===l)return i?NaN:1/0*(n?-1:1);i+=Math.pow(2,o),s-=u;}return (n?-1:1)*i*Math.pow(2,s-o)},r.write=function(e,t,r,o,n,s){var i,a,l=8*s-n-1,u=(1<<l)-1,c=u>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:s-1,f=o?1:-1,s=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(o=Math.pow(2,-i))<1&&(i--,o*=2),2<=(t+=1<=i+c?d/o:d*Math.pow(2,1-c))*o&&(i++,o/=2),u<=i+c?(a=0,i=u):1<=i+c?(a=(t*o-1)*Math.pow(2,n),i+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,n),i=0));8<=n;e[r+h]=255&a,h+=f,a/=256,n-=8);for(i=i<<n|a,l+=n;0<l;e[r+h]=255&i,h+=f,i/=256,l-=8);e[r+h-f]|=128*s;};},{}],247:[function(o,e,c){var t;function y(e,t){return e.b===t.b&&e.a===t.a}function g(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function v(e,t,r){var o=t.b-e.b,n=r.b-t.b;return 0<o+n?o<n?t.a-e.a+o/(o+n)*(e.a-r.a):t.a-r.a+n/(o+n)*(r.a-e.a):0}function b(e,t,r){var o=t.b-e.b,n=r.b-t.b;return 0<o+n?(t.a-r.a)*o+(t.a-e.a)*n:0}function j(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function V(e,t,r){var o=t.a-e.a,n=r.a-t.a;return 0<o+n?o<n?t.b-e.b+o/(o+n)*(e.b-r.b):t.b-r.b+n/(o+n)*(r.b-e.b):0}function z(e,t,r){var o=t.a-e.a,n=r.a-t.a;return 0<o+n?(t.b-r.b)*o+(t.b-e.b)*n:0}function _(e,t,r,o){return (e=e<0?0:e)<=(r=r<0?0:r)?0===r?(t+o)/2:t+e/(e+r)*(o-t):o+r/(e+r)*(t-o)}function d(e){var t=s(e.b);return n(t,e.c),n(t.b,e.c),i(t,e.a),t}function x(e,t){var r=!1,o=!1;e!==t&&(t.a!==e.a&&(o=!0,M(t.a,e.a)),t.d!==e.d&&(r=!0,a(t.d,e.d)),T(t,e),o||(n(t,e.a),e.a.c=e),r||(i(t,e.d),e.d.a=e));}function m(e){var t=e.b,r=!1;e.d!==e.b.d&&(r=!0,a(e.d,e.b.d)),e.c===e?M(e.a,null):(e.b.d.a=e.b.e,e.a.c=e.c,T(e,e.b.e),r||i(e,e.d)),t.c===t?(M(t.a,null),a(t.d,null)):(e.d.a=t.b.e,t.a.c=t.c,T(t,t.b.e)),H(e);}function w(e){var t=s(e),r=t.b;return T(t,e.e),t.a=e.b.a,n(r,t.a),t.d=r.d=e.d,t=t.b,T(e.b,e.b.b.e),T(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function S(e,t){var r=!1,o=s(e),n=o.b;return t.d!==e.d&&(r=!0,a(t.d,e.d)),T(o,e.e),T(n,t),o.a=e.b.a,n.a=t.a,o.d=n.d=e.d,e.d.a=n,r||i(o,e.d),o}function s(e){var t=new u,r=new u,o=e.b.h;return (((r.h=o).b.h=t).h=e).b.h=r,t.b=r,((t.c=t).e=r).b=t,(r.c=r).e=t}function T(e,t){var r=e.c,o=t.c;r.b.e=t,(o.b.e=e).c=o,t.c=r;}function n(e,t){var r=t.f,o=new D(t,r);for(r.e=o,r=(t.f=o).c=e;r.a=o,(r=r.c)!==e;);}function i(e,t){var r=t.d,o=new te(t,r);for(r.b=o,(t.d=o).a=e,o.c=t.c,r=e;r.d=o,(r=r.e)!==e;);}function H(e){var t=e.h;e=e.b.h,(t.b.h=e).b.h=t;}function M(e,t){for(var r=e.c,o=r;o.a=t,(o=o.c)!==r;);r=e.f,((o=e.e).f=r).e=o;}function a(e,t){for(var r=e.a,o=r;o.d=t,(o=o.e)!==r;);r=e.d,((o=e.b).d=r).b=o;}function W(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),t=Math.abs(e[2])>Math.abs(e[t])?2:t}function E(e,t){e.f+=t.f,e.b.f+=t.b.f;}function h(e,t,r){return e=e.a,t=t.a,r=r.a,t.b.a===e?r.b.a===e?g(t.a,r.a)?b(r.b.a,t.a,r.a)<=0:0<=b(t.b.a,r.a,t.a):b(r.b.a,e,r.a)<=0:r.b.a===e?0<=b(t.b.a,e,t.a):(t=v(t.b.a,e,t.a),(e=v(r.b.a,e,r.a))<=t)}function k(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null;}function C(e,t){m(e.a),e.c=!1,(e.a=t).i=e;}function O(e){for(var t=e.a.a;(e=G(e)).a.a===t;);return e.c&&(C(e,t=S(B(e).a.b,e.a.e)),e=G(e)),e}function q(e,t,r){var o=new N;return o.a=r,o.e=p(e.f,t.e,o),r.i=o}function X(e,t){switch(e.s){case 100130:return 0!=(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return t<0;case 100134:return 2<=t||t<=-2}return !1}function f(e){var t=e.a,r=t.d;r.c=e.d,r.a=t,k(e);}function P(e,t,r){for(t=(e=t).a;e!==r;){e.c=!1;var o=B(e),n=o.a;if(n.a!==t.a){if(!o.c){f(e);break}C(o,n=S(t.c.b,n.b));}t.c!==n&&(x(n.b.e,n),x(t,n)),f(e),t=o.a,e=o;}return t}function A(e,t,r,o,n,s){for(var i=!0;q(e,t,r.b),(r=r.c)!==o;);for(null===n&&(n=B(t).a.b.c);(r=(o=B(t)).a.b).a===n.a;)r.c!==n&&(x(r.b.e,r),x(n.b.e,r)),o.f=t.f-r.f,o.d=X(e,o.f),t.b=!0,!i&&R(e,t)&&(E(r,n),k(t),m(n)),i=!1,t=o,n=r;t.b=!0,s&&J(e,t);}function Y(e,t,r,o,n){var s=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o&&e.o(s,r,o,e.c)||null,null===t.d&&(n?e.n||(l(e,100156),e.n=!0):t.d=r[0]);}function L(e,t,r){var o=[null,null,null,null];o[0]=t.a.d,o[1]=r.a.d,Y(e,t.a,o,[.5,.5,0,0],!1),x(t,r);}function Z(e,t,r,o,n){var s=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),i=Math.abs(r.b-e.b)+Math.abs(r.a-e.a),a=n+1;o[n]=.5*i/(s+i),o[a]=.5*s/(s+i),e.g[0]+=o[n]*t.g[0]+o[a]*r.g[0],e.g[1]+=o[n]*t.g[1]+o[a]*r.g[1],e.g[2]+=o[n]*t.g[2]+o[a]*r.g[2];}function R(e,t){var r=B(t),o=t.a,n=r.a;if(g(o.a,n.a)){if(0<b(n.b.a,o.a,n.a))return;if(y(o.a,n.a)){if(o.a!==n.a){var r=e.e,s=o.a.h;if(0<=s){var i=(r=r.b).d,a=r.e,l=r.c,u=l[s];i[u]=i[r.a],(l[i[u]]=u)<=--r.a&&(u<=1||g(a[i[u>>1]],a[i[u]])?U:ue)(r,u),a[s]=null,l[s]=r.b,r.b=s;}else for(r.c[-(s+1)]=null;0<r.a&&null===r.c[r.d[r.a-1]];)--r.a;L(e,n.b.e,o);}}else w(n.b),x(o,n.b.e),t.b=r.b=!0;}else {if(b(o.b.a,n.a,o.a)<0)return;G(t).b=t.b=!0,w(o.b),x(n.b.e,o);}return 1}function Q(e,t){var r=B(t),o=t.a,n=r.a,s=o.a,i=n.a,a=o.b.a,l=n.b.a,u=new D;if(b(a,e.a,s),b(l,e.a,i),!(s===i||Math.min(s.a,a.a)>Math.max(i.a,l.a))){if(g(s,i)){if(0<b(l,s,i))return}else if(b(a,i,s)<0)return;var c,d,h=a,f=s,p=l,m=i;if(g(h,f)||(c=h,h=f,f=c),g(p,m)||(c=p,p=m,m=c),g(h,p)||(c=h,h=p,p=c,c=f,f=m,m=c),g(p,f)?g(f,m)?((c=v(h,p,f))+(d=v(p,f,m))<0&&(c=-c,d=-d),u.b=_(c,p.b,d,f.b)):((c=b(h,p,f))+(d=-b(h,m,f))<0&&(c=-c,d=-d),u.b=_(c,p.b,d,m.b)):u.b=(p.b+f.b)/2,j(h,f)||(c=h,h=f,f=c),j(p,m)||(c=p,p=m,m=c),j(h,p)||(c=h,h=p,p=c,c=f,f=m,m=c),j(p,f)?j(f,m)?((c=V(h,p,f))+(d=V(p,f,m))<0&&(c=-c,d=-d),u.a=_(c,p.a,d,f.a)):((c=z(h,p,f))+(d=-z(h,m,f))<0&&(c=-c,d=-d),u.a=_(c,p.a,d,m.a)):u.a=(p.a+f.a)/2,g(u,e.a)&&(u.b=e.a.b,u.a=e.a.a),h=g(s,i)?s:i,g(h,u)&&(u.b=h.b,u.a=h.a),y(u,s)||y(u,i))return R(e,t),0;if(!y(a,e.a)&&0<=b(a,e.a,u)||!y(l,e.a)&&b(l,e.a,u)<=0){if(l===e.a)w(o.b),x(n.b,o),o=B(t=O(t)).a,P(e,B(t),r),A(e,t,o.b.e,o,o,!0);else {if(a!==e.a)return 0<=b(a,e.a,u)&&(G(t).b=t.b=!0,w(o.b),o.a.b=e.a.b,o.a.a=e.a.a),void(b(l,e.a,u)<=0&&(t.b=r.b=!0,w(n.b),n.a.b=e.a.b,n.a.a=e.a.a));for(w(n.b),x(o.e,n.b.e),i=(s=r=t).a.b.a;(s=G(s)).a.b.a===i;);s=B(t=s).a.b.c,r.a=n.b.e,A(e,t,(n=P(e,r,null)).c,o.b.c,s,!0);}return 1}w(o.b),w(n.b),x(n.b.e,o),o.a.b=u.b,o.a.a=u.a,o.a.h=ne(e.e,o.a),o=o.a,n=[0,0,0,0],u=[s.d,a.d,i.d,l.d],o.g[0]=o.g[1]=o.g[2]=0,Z(o,s,a,n,0),Z(o,i,l,n,2),Y(e,o,u,n,!0),G(t).b=t.b=r.b=!0;}}function J(e,t){for(var r=B(t);;){for(;r.b;)r=B(t=r);if(!t.b&&(null===(t=G(r=t))||!t.b))break;t.b=!1;var o=t.a,n=r.a;if(s=o.b.a!==n.b.a)e:{var s,i=B(s=t),a=s.a,l=i.a,u=void 0;if(g(a.b.a,l.b.a)){if(b(a.b.a,l.b.a,a.a)<0){s=!1;break e}G(s).b=s.b=!0,u=w(a),x(l.b,u),u.d.c=s.d;}else {if(0<b(l.b.a,a.b.a,l.a)){s=!1;break e}s.b=i.b=!0,u=w(l),x(a.e,l.b),u.b.d.c=s.d;}s=!0;}if(s&&(r.c?(k(r),m(n),n=(r=B(t)).a):t.c&&(k(t),m(o),o=(t=G(r)).a)),o.a!==n.a)if(o.b.a===n.b.a||t.c||r.c||o.b.a!==e.a&&n.b.a!==e.a)R(e,t);else if(Q(e,t))break;o.a===n.a&&o.b.a===n.b.a&&(E(n,o),k(t),m(o),t=G(r));}}function K(e,t){var r=new N,o=d(e.b);o.a.b=4e150,o.a.a=t,o.b.a.b=-4e150,o.b.a.a=t,e.a=o.b.a,r.a=o,r.f=0,r.d=!1,r.c=!1,r.h=!0,r.b=!1,o=p(o=e.f,o.a,r),r.e=o;}function $(e){this.a=new ee,this.b=e,this.c=h;}function p(e,t,r){for(;null!==(t=t.c).b&&!e.c(e.b,t.b,r););return e=new ee(r,t.a,t),t.a.c=e,t.a=e}function ee(e,t,r){this.b=e||null,this.a=t||this,this.c=r||this;}function r(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null;}function I(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case 0:l(e,100151),e.u(null);break;case 1:l(e,100152),e.t();}else switch(e.d){case 2:l(e,100154),e.v();break;case 1:l(e,100153),e.w();}}function l(e,t){e.p&&e.p(t,e.c);}function te(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1;}function u(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0;}function re(){this.c=new D,this.a=new te,this.b=new u,this.d=new u,this.b.b=this.d,this.d.b=this.b;}function D(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0;}function oe(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ie;}function ne(e,t){var r,o,n;return e.e?(2*(o=++(r=e.b).a)>r.f&&(r.f*=2,r.c=ae(r.c,r.f+1)),0===r.b?n=o:(n=r.b,r.b=r.c[r.b]),r.e[n]=t,r.c[n]=o,r.d[o]=n,r.h&&ue(r,o),n):(r=e.a++,e.c[r]=t,-(r+1))}function se(e){if(0===e.a)return le(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&g(F(e.b),t))return le(e.b);for(;--e.a,0<e.a&&null===e.c[e.d[e.a-1]];);return t}function ie(){this.d=ae([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1;}function ae(e,t){for(var r=Array(t),o=0;o<e.length;o++)r[o]=e[o];for(;o<t;o++)r[o]=0;return r}function F(e){return e.e[e.d[1]]}function le(e){var t=e.d,r=e.e,o=e.c,n=t[1],s=r[n];return 0<e.a&&(t[1]=t[e.a],o[t[1]]=1,r[n]=null,o[n]=e.b,e.b=n,0<--e.a&&U(e,1)),s}function U(e,t){for(var r=e.d,o=e.e,n=e.c,s=t,i=r[s];;){var a=s<<1,l=(a<e.a&&g(o[r[a+1]],o[r[a]])&&(a+=1),r[a]);if(a>e.a||g(o[i],o[l])){n[r[s]=i]=s;break}n[r[s]=l]=s,s=a;}}function ue(e,t){for(var r=e.d,o=e.e,n=e.c,s=t,i=r[s];;){var a=s>>1,l=r[a];if(0==a||g(o[l],o[i])){n[r[s]=i]=s;break}n[r[s]=l]=s,s=a;}}function N(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1;}function B(e){return e.e.c.b}function G(e){return e.e.a.b}(t=r.prototype).x=function(){I(this,0);},t.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t)}break;case 100141:return void(this.m=!!t);default:return void l(this,100900)}l(this,100901);},t.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:l(this,100900);}return !1},t.A=function(e,t,r){this.j[0]=e,this.j[1]=t,this.j[2]=r;},t.z=function(e,t){var r=t||null;switch(e){case 100100:case 100106:this.h=r;break;case 100104:case 100110:this.l=r;break;case 100101:case 100107:this.k=r;break;case 100102:case 100108:this.i=r;break;case 100103:case 100109:this.p=r;break;case 100105:case 100111:this.o=r;break;case 100112:this.r=r;break;default:l(this,100900);}},t.C=function(e,t){var r=!1,o=[0,0,0];I(this,2);for(var n=0;n<3;++n){var s=e[n];s<-1e150&&(s=-1e150,r=!0),1e150<s&&(s=1e150,r=!0),o[n]=s;}r&&l(this,100155),null===(r=this.q)?x(r=d(this.b),r.b):(w(r),r=r.e),r.a.d=t,r.a.g[0]=o[0],r.a.g[1]=o[1],r.a.g[2]=o[2],r.f=1,r.b.f=-1,this.q=r;},t.u=function(e){I(this,0),this.d=1,this.b=new re,this.c=e;},t.t=function(){I(this,1),this.d=2,this.q=null;},t.v=function(){I(this,2),this.d=1;},t.w=function(){I(this,1),this.d=0;var e,t,r=this.j[0],o=this.j[1],n=this.j[2],s=!1,i=[r,o,n];if(0===r&&0===o&&0===n){for(var o=[-2e150,-2e150,-2e150],a=[2e150,2e150,2e150],n=[],l=[],r=(s=this.b.c).e;r!==s;r=r.e)for(var u=0;u<3;++u){var c=r.g[u];c<a[u]&&(a[u]=c,l[u]=r),c>o[u]&&(o[u]=c,n[u]=r);}if(o[1]-a[1]>o[r=0]-a[0]&&(r=1),a[r=o[2]-a[2]>o[r]-a[r]?2:r]>=o[r])i[0]=0,i[1]=0,i[2]=1;else {for(a=l[r],n=n[r],l=[o=0,0,0],a=[a.g[0]-n.g[0],a.g[1]-n.g[1],a.g[2]-n.g[2]],u=[0,0,0],r=s.e;r!==s;r=r.e)u[0]=r.g[0]-n.g[0],u[1]=r.g[1]-n.g[1],u[2]=r.g[2]-n.g[2],l[0]=a[1]*u[2]-a[2]*u[1],l[1]=a[2]*u[0]-a[0]*u[2],l[2]=a[0]*u[1]-a[1]*u[0],o<(c=l[0]*l[0]+l[1]*l[1]+l[2]*l[2])&&(o=c,i[0]=l[0],i[1]=l[1],i[2]=l[2]);o<=0&&(i[0]=i[1]=i[2]=0,i[W(a)]=1);}s=!0;}for(l=W(i),r=this.b.c,o=(l+1)%3,n=(l+2)%3,l=0<i[l]?1:-1,i=r.e;i!==r;i=i.e)i.b=i.g[o],i.a=l*i.g[n];if(s){for(i=0,r=(s=this.b.a).b;r!==s;r=r.b)if(!((o=r.a).f<=0))for(;i+=(o.a.b-o.b.a.b)*(o.a.a+o.b.a.a),(o=o.e)!==r.a;);if(i<0)for(s=(i=this.b.c).e;s!==i;s=s.e)s.a=-s.a;}for(this.n=!1,i=this.b.b,r=i.h;r!==i;r=s)s=r.h,o=r.e,y(r.a,r.b.a)&&r.e.e!==r&&(L(this,o,r),m(r),o=(r=o).e),o.e===r&&(o!==r&&(o!==s&&o!==s.b||(s=s.h),m(o)),r!==s&&r!==s.b||(s=s.h),m(r));for(this.e=i=new oe,s=this.b.c,r=s.e;r!==s;r=r.e)r.h=ne(i,r);var d=i;d.d=[];for(var h=0;h<d.a;h++)d.d[h]=h;d.d.sort(function(r){return function(e,t){return g(r[e],r[t])?1:-1}}(d.c)),d.e=!0;for(var f=d.b,p=f.a;1<=p;--p)U(f,p);for(f.h=!0,this.f=new $(this),K(this,-4e150),K(this,4e150);null!==(i=se(this.e));){for(;;){e:if(0===(r=this.e).a)s=F(r.b);else if(s=r.c[r.d[r.a-1]],0!==r.b.a&&g(r=F(r.b),s)){s=r;break e}if(null===s||!y(s,i))break;s=se(this.e),L(this,i.c,s.c);}!function e(t,r){for(var o,n=(t.a=r).c;null===n.i;)if((n=n.c)===r.c){var n=t,s=r;(c=new N).a=s.c.b;for(var i=(a=n.f).a;null!==(i=i.a).b&&!a.c(a.b,c,i.b););var a,l,u=B(a=i.b),c=a.a,i=u.a;return void(0===b(c.b.a,s,c.a)?y((c=a.a).a,s)||y(c.b.a,s)||(w(c.b),a.c&&(m(c.c),a.c=!1),x(s.c,c),e(n,s)):(l=g(i.b.a,c.b.a)?a:u,u=void 0,a.d||l.c?(u=l===a?S(s.c.b,c.e):S(i.b.c.b,s.c).b,l.c?C(l,u):((a=q(c=n,a,u)).f=G(a).f+a.a.f,a.d=X(c,a.f)),e(n,s)):A(n,a,s.c,s.c,null,!0)))}a=(c=B(n=O(n.i))).a,(c=P(t,c,null)).c===a?(c=(a=c).c,i=B(n),u=n.a,l=i.a,o=!1,u.b.a!==l.b.a&&Q(t,n),y(u.a,t.a)&&(x(c.b.e,u),c=B(n=O(n)).a,P(t,B(n),i),o=!0),y(l.a,t.a)&&(x(a,l.b.e),a=P(t,i,null),o=!0),o?A(t,n,a.c,c,c,!0):(s=g(l.a,u.a)?l.b.e:u,A(t,n,s=S(a.c.b,s),s.c,s.c,!1),s.b.i.c=!0,J(t,n))):A(t,n,c.c,a,a,!0);}(this,i);}for(this.a=this.f.a.a.b.a.a,i=0;null!==(s=this.f.a.a.b);)s.h||++i,k(s);for(this.f=null,(i=this.e).b=null,i.d=null,this.e=i.c=null,i=this.b,r=i.a.b;r!==i.a;r=s)s=r.b,(r=r.a).e.e===r&&(E(r.c,r),m(r));if(!this.n){if(i=this.b,this.m)for(r=i.b.h;r!==i.b;r=s)s=r.h,r.b.d.c!==r.d.c?r.f=r.d.c?1:-1:m(r);else for(r=i.a.b;r!==i.a;r=s)if(s=r.b,r.c){for(r=r.a;g(r.b.a,r.a);r=r.c.b);for(;g(r.a,r.b.a);r=r.e);for(o=r.c.b,n=void 0;r.e!==o;)if(g(r.b.a,o.a)){for(;o.e!==r&&(g((t=o.e).b.a,t.a)||b(o.a,o.b.a,o.e.b.a)<=0);)o=(n=S(o.e,o)).b;o=o.c.b;}else {for(;o.e!==r&&(g((e=r.c.b).a,e.b.a)||0<=b(r.b.a,r.a,r.c.b.a));)r=(n=S(r,r.c.b)).b;r=r.e;}for(;o.e.e!==r;)n=S(o.e,o),o=n.b;}if(this.h||this.i||this.k||this.l)if(this.m){for(s=(i=this.b).a.b;s!==i.a;s=s.b)if(s.c){for(this.h&&this.h(2,this.c),r=s.a;this.k&&this.k(r.a.d,this.c),(r=r.e)!==s.a;);this.i&&this.i(this.c);}}else {for(i=this.b,s=!!this.l,r=!1,o=-1,n=i.a.d;n!==i.a;n=n.d)if(n.c)for(r||(this.h&&this.h(4,this.c),r=!0),l=n.a;s&&(a=l.b.d.c?0:1,o!==a&&(o=a,this.l&&this.l(!!o,this.c))),this.k&&this.k(l.a.d,this.c),(l=l.e)!==n.a;);r&&this.i&&this.i(this.c);}if(this.r){for(i=this.b,r=i.a.b;r!==i.a;r=s)if(s=r.b,!r.c){for(n=(o=r.a).e,l=void 0;n=(l=n).e,(l.d=null)===l.b.d&&(l.c===l?M(l.a,null):(l.a.c=l.c,T(l,l.b.e)),(a=l.b).c===a?M(a.a,null):(a.a.c=a.c,T(a,a.b.e)),H(l)),l!==o;);o=r.d,((r=r.b).d=o).b=r;}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null;},this.libtess={GluTesselator:r,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},r.prototype.gluDeleteTess=r.prototype.x,r.prototype.gluTessProperty=r.prototype.B,r.prototype.gluGetTessProperty=r.prototype.y,r.prototype.gluTessNormal=r.prototype.A,r.prototype.gluTessCallback=r.prototype.z,r.prototype.gluTessVertex=r.prototype.C,r.prototype.gluTessBeginPolygon=r.prototype.u,r.prototype.gluTessBeginContour=r.prototype.t,r.prototype.gluTessEndContour=r.prototype.v,r.prototype.gluTessEndPolygon=r.prototype.w,void 0!==e&&(e.exports=this.libtess);},{}],248:[function(e,t,r){function o(g,e,t,r){var v=0,o=void 0===(r=void 0===r?{}:r).loop?null:r.loop,b=void 0===r.palette?null:r.palette;if(e<=0||t<=0||65535<e||65535<t)throw new Error("Width/Height invalid.");function j(e){e=e.length;if(e<2||256<e||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}g[v++]=71,g[v++]=73,g[v++]=70,g[v++]=56,g[v++]=57,g[v++]=97;var n=0,s=0;if(null!==b){for(var i=j(b);i>>=1;)++n;if(i=1<<n,--n,void 0!==r.background){if(i<=(s=r.background))throw new Error("Background index out of range.");if(0===s)throw new Error("Background index explicitly passed as 0.")}}if(g[v++]=255&e,g[v++]=e>>8&255,g[v++]=255&t,g[v++]=t>>8&255,g[v++]=(null!==b?128:0)|n,g[v++]=s,g[v++]=0,null!==b)for(var a=0,l=b.length;a<l;++a){var u=b[a];g[v++]=u>>16&255,g[v++]=u>>8&255,g[v++]=255&u;}if(null!==o){if(o<0||65535<o)throw new Error("Loop count invalid.");g[v++]=33,g[v++]=255,g[v++]=11,g[v++]=78,g[v++]=69,g[v++]=84,g[v++]=83,g[v++]=67,g[v++]=65,g[v++]=80,g[v++]=69,g[v++]=50,g[v++]=46,g[v++]=48,g[v++]=3,g[v++]=1,g[v++]=255&o,g[v++]=o>>8&255,g[v++]=0;}var _=!1;this.addFrame=function(e,t,r,o,n,s){if(!0===_&&(--v,_=!1),s=void 0===s?{}:s,e<0||t<0||65535<e||65535<t)throw new Error("x/y invalid.");if(r<=0||o<=0||65535<r||65535<o)throw new Error("Width/Height invalid.");if(n.length<r*o)throw new Error("Not enough pixels for the frame size.");var i=!0,a=s.palette;if(null==a&&(i=!1,a=b),null==a)throw new Error("Must supply either a local or global palette.");for(var l=j(a),u=0;l>>=1;)++u;var l=1<<u,c=void 0===s.delay?0:s.delay,d=void 0===s.disposal?0:s.disposal;if(d<0||3<d)throw new Error("Disposal out of range.");var h=!1,f=0;if(void 0!==s.transparent&&null!==s.transparent&&(h=!0,(f=s.transparent)<0||l<=f))throw new Error("Transparent color index.");if(0===d&&!h&&0===c||(g[v++]=33,g[v++]=249,g[v++]=4,g[v++]=d<<2|(!0===h?1:0),g[v++]=255&c,g[v++]=c>>8&255,g[v++]=f,g[v++]=0),g[v++]=44,g[v++]=255&e,g[v++]=e>>8&255,g[v++]=255&t,g[v++]=t>>8&255,g[v++]=255&r,g[v++]=r>>8&255,g[v++]=255&o,g[v++]=o>>8&255,g[v++]=!0===i?128|u-1:0,!0===i)for(var p=0,m=a.length;p<m;++p){var y=a[p];g[v++]=y>>16&255,g[v++]=y>>8&255,g[v++]=255&y;}return v=function(t,r,e,o){t[r++]=e;var n=r++,s=1<<e,i=s-1,a=1+s,l=1+a,u=e+1,c=0,d=0;function h(e){for(;e<=c;)t[r++]=255&d,d>>=8,c-=8,r===n+256&&(t[n]=255,n=r++);}function f(e){d|=e<<c,c+=u,h(8);}var p=o[0]&i,m={};f(s);for(var y=1,g=o.length;y<g;++y){var v=o[y]&i,b=p<<8|v,j=m[b];if(void 0===j){for(d|=p<<c,c+=u;8<=c;)t[r++]=255&d,d>>=8,c-=8,r===n+256&&(t[n]=255,n=r++);4096===l?(f(s),l=1+a,u=e+1,m={}):(1<<u<=l&&++u,m[b]=l++),p=v;}else p=j;}f(p),f(a),h(1),n+1===r?t[n]=0:(t[n]=r-n-1,t[r++]=0);return r}(g,v,u<2?2:u,n)},this.end=function(){return !1===_&&(g[v++]=59,_=!0),v},this.getOutputBuffer=function(){return g},this.setOutputBuffer=function(e){g=e;},this.getOutputBufferPosition=function(){return v},this.setOutputBufferPosition=function(e){v=e;};}function M(e,t,r,o){for(var n=e[t++],s=1<<n,i=1+s,a=1+i,l=n+1,u=(1<<l)-1,c=0,d=0,h=0,f=e[t++],p=new Int32Array(4096),m=null;;){for(;c<16&&0!==f;)d|=e[t++]<<c,c+=8,1===f?f=e[t++]:--f;if(c<l)break;var y=d&u;if(d>>=l,c-=l,y==s)a=1+i,u=(1<<(l=n+1))-1,m=null;else {if(y==i)break;for(var g=y<a?y:m,v=0,b=g;s<b;)b=p[b]>>8,++v;var j=b;if(o<h+v+(g!==y?1:0))return void console.log("Warning, gif stream longer than expected.");r[h++]=j;var _=h+=v;for(g!==y&&(r[h++]=j),b=g;v--;)b=p[b],r[--_]=255&b,b>>=8;null!==m&&a<4096&&(p[a++]=m<<8|j,u+1<=a&&l<12&&(++l,u=u<<1|1)),m=y;}}h!==o&&console.log("Warning, gif stream shorter than expected.");}try{r.GifWriter=o,r.GifReader=function(b){var e=0;if(71!==b[e++]||73!==b[e++]||70!==b[e++]||56!==b[e++]||56!=(b[e++]+1&253)||97!==b[e++])throw new Error("Invalid GIF 87a/89a header.");var j=b[e++]|b[e++]<<8,t=b[e++]|b[e++]<<8,r=b[e++],o=1<<1+(7&r),n=(b[e++],b[e++],null),s=null,i=(r>>7&&(n=e,e+=3*(s=o)),!0),a=[],l=0,u=null,c=0,d=null;for(this.width=j,this.height=t;i&&e<b.length;)switch(b[e++]){case 33:switch(b[e++]){case 255:if(11!==b[e]||78==b[e+1]&&69==b[e+2]&&84==b[e+3]&&83==b[e+4]&&67==b[e+5]&&65==b[e+6]&&80==b[e+7]&&69==b[e+8]&&50==b[e+9]&&46==b[e+10]&&48==b[e+11]&&3==b[e+12]&&1==b[e+13]&&0==b[e+16])e+=14,d=b[e++]|b[e++]<<8,e++;else for(e+=12;;){if(!(0<=(f=b[e++])))throw Error("Invalid block size");if(0===f)break;e+=f;}break;case 249:if(4!==b[e++]||0!==b[e+4])throw new Error("Invalid graphics extension block.");var h=b[e++],l=b[e++]|b[e++]<<8,u=b[e++];0==(1&h)&&(u=null),c=h>>2&7,e++;break;case 254:for(;;){if(!(0<=(f=b[e++])))throw Error("Invalid block size");if(0===f)break;e+=f;}break;default:throw new Error("Unknown graphic control label: 0x"+b[e-1].toString(16))}break;case 44:var f,p=b[e++]|b[e++]<<8,m=b[e++]|b[e++]<<8,y=b[e++]|b[e++]<<8,g=b[e++]|b[e++]<<8,v=b[e++],_=v>>6&1,x=1<<1+(7&v),w=n,S=s,T=!1,v=(v>>7&&(T=!0,w=e,e+=3*(S=x)),e);for(e++;;){if(!(0<=(f=b[e++])))throw Error("Invalid block size");if(0===f)break;e+=f;}a.push({x:p,y:m,width:y,height:g,has_local_palette:T,palette_offset:w,palette_size:S,data_offset:v,data_length:e-v,transparent_index:u,interlaced:!!_,delay:l,disposal:c});break;case 59:i=!1;break;default:throw new Error("Unknown gif block: 0x"+b[e-1].toString(16))}this.numFrames=function(){return a.length},this.loopCount=function(){return d},this.frameInfo=function(e){if(e<0||e>=a.length)throw new Error("Frame index out of range.");return a[e]},this.decodeAndBlitFrameBGRA=function(e,t){for(var e=this.frameInfo(e),r=e.width*e.height,o=new Uint8Array(r),n=(M(b,e.data_offset,o,r),e.palette_offset),s=e.transparent_index,i=(null===s&&(s=256),e.width),a=j-i,l=i,u=4*(e.y*j+e.x),c=4*((e.y+e.height)*j+e.x),d=u,h=4*a,f=(!0===e.interlaced&&(h+=4*j*7),8),p=0,m=o.length;p<m;++p){var y,g,v=o[p];0===l&&(l=i,c<=(d+=h)&&(h=4*a+4*j*(f-1),d=u+(i+a)*(f<<1),f>>=1)),v===s?d+=4:(y=b[n+3*v],g=b[n+3*v+1],v=b[n+3*v+2],t[d++]=v,t[d++]=g,t[d++]=y,t[d++]=255),--l;}},this.decodeAndBlitFrameRGBA=function(e,t){for(var e=this.frameInfo(e),r=e.width*e.height,o=new Uint8Array(r),n=(M(b,e.data_offset,o,r),e.palette_offset),s=e.transparent_index,i=(null===s&&(s=256),e.width),a=j-i,l=i,u=4*(e.y*j+e.x),c=4*((e.y+e.height)*j+e.x),d=u,h=4*a,f=(!0===e.interlaced&&(h+=4*j*7),8),p=0,m=o.length;p<m;++p){var y,g,v=o[p];0===l&&(l=i,c<=(d+=h)&&(h=4*a+4*j*(f-1),d=u+(i+a)*(f<<1),f>>=1)),v===s?d+=4:(y=b[n+3*v],g=b[n+3*v+1],v=b[n+3*v+2],t[d++]=y,t[d++]=g,t[d++]=v,t[d++]=255),--l;}};};}catch(e){}},{}],249:[function(Ar,r,o){!function(Pr){var e,t;e=this,t=function(j){function D(e){if(null==this)throw TypeError();var t,r=String(this),o=r.length,e=e?Number(e):0;if(!((e=e!=e?0:e)<0||o<=e))return 55296<=(t=r.charCodeAt(e))&&t<=56319&&e+1<o&&56320<=(o=r.charCodeAt(e+1))&&o<=57343?1024*(t-55296)+o-56320+65536:t}String.prototype.codePointAt||((F=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t;}catch(e){}return r}())?F(String.prototype,"codePointAt",{value:D,configurable:!0,writable:!0}):String.prototype.codePointAt=D);var F,U=0,N=-3;function B(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288);}function G(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new B,this.dtree=new B;}var V=new B,z=new B,H=new Uint8Array(30),W=new Uint16Array(30),q=new Uint8Array(30),X=new Uint16Array(30),Y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Z=new B,v=new Uint8Array(320);function Q(e,t,r,o){for(var n,s=0;s<r;++s)e[s]=0;for(s=0;s<30-r;++s)e[s+r]=s/r|0;for(n=o,s=0;s<30;++s)t[s]=n,n+=1<<e[s];}var J=new Uint16Array(16);function K(e,t,r,o){for(var n,s=0;s<16;++s)e.table[s]=0;for(s=0;s<o;++s)e.table[t[r+s]]++;for(s=n=e.table[0]=0;s<16;++s)J[s]=n,n+=e.table[s];for(s=0;s<o;++s)t[r+s]&&(e.trans[J[t[r+s]]++]=s);}function b(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var o=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,o+r}function $(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;for(var r=0,o=0,n=0,s=e.tag;o=2*o+(1&s),s>>>=1,r+=t.table[++n],0<=(o-=t.table[n]););return e.tag=s,e.bitcount-=n,t.trans[r+o]}function ee(e,t,r){for(;;){var o=$(e,t);if(256===o)return U;if(o<256)e.dest[e.destLen++]=o;else for(var n,s=b(e,H[o-=257],W[o]),o=$(e,r),i=n=e.destLen-b(e,q[o],X[o]);i<n+s;++i)e.dest[e.destLen++]=e.dest[i];}}for(var e=V,te=z,t=0;t<7;++t)e.table[t]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,t=0;t<24;++t)e.trans[t]=256+t;for(t=0;t<144;++t)e.trans[24+t]=t;for(t=0;t<8;++t)e.trans[168+t]=280+t;for(t=0;t<112;++t)e.trans[176+t]=144+t;for(t=0;t<5;++t)te.table[t]=0;for(te.table[5]=32,t=0;t<32;++t)te.trans[t]=t;Q(H,W,4,3),Q(q,X,2,1),H[28]=0,W[28]=258;var re=function(e,t){var r,o,n,s=new G(e,t);do{switch(n=void 0,(o=s).bitcount--||(o.tag=o.source[o.sourceIndex++],o.bitcount=7),n=1&o.tag,o.tag>>>=1,o=n,b(s,2,0)){case 0:r=function(e){for(var t,r;8<e.bitcount;)e.sourceIndex--,e.bitcount-=8;if((t=256*e.source[e.sourceIndex+1]+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return N;for(e.sourceIndex+=4,r=t;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,U}(s);break;case 1:r=ee(s,V,z);break;case 2:y=m=p=g=i=f=h=d=c=u=l=a=void 0;for(var i,a=s,l=s.ltree,u=s.dtree,c=b(a,5,257),d=b(a,5,1),h=b(a,4,4),f=0;f<19;++f)v[f]=0;for(f=0;f<h;++f){var p=b(a,3,0);v[Y[f]]=p;}for(K(Z,v,0,19),i=0;i<c+d;){var m=$(a,Z);switch(m){case 16:for(var y=v[i-1],g=b(a,2,3);g;--g)v[i++]=y;break;case 17:for(g=b(a,3,3);g;--g)v[i++]=0;break;case 18:for(g=b(a,7,11);g;--g)v[i++]=0;break;default:v[i++]=m;}}K(l,v,0,c),K(u,v,c,d),r=ee(s,s.ltree,s.dtree);break;default:r=N;}if(r!==U)throw new Error("Data error")}while(!o);return s.destLen<s.dest.length?"function"==typeof s.dest.slice?s.dest.slice(0,s.destLen):s.dest.subarray(0,s.destLen):s.dest};function g(e,t,r,o,n){return Math.pow(1-n,3)*e+3*Math.pow(1-n,2)*n*t+3*(1-n)*Math.pow(n,2)*r+Math.pow(n,3)*o}function a(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN;}function h(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1;}function oe(e){throw new Error(e)}function ne(e,t){e||oe(t);}a.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},a.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t));},a.prototype.addX=function(e){this.addPoint(e,null);},a.prototype.addY=function(e){this.addPoint(null,e);},a.prototype.addBezier=function(e,t,r,o,n,s,i,a){var l=[e,t],u=[r,o],c=[n,s],d=[i,a];this.addPoint(e,t),this.addPoint(i,a);for(var h=0;h<=1;h++){var f,p=6*l[h]-12*u[h]+6*c[h],m=-3*l[h]+9*u[h]-9*c[h]+3*d[h],y=3*u[h]-3*l[h];0==m?0==p||0<(f=-y/p)&&f<1&&(0===h&&this.addX(g(l[h],u[h],c[h],d[h],f)),1===h&&this.addY(g(l[h],u[h],c[h],d[h],f))):(f=Math.pow(p,2)-4*y*m)<0||(0<(y=(-p+Math.sqrt(f))/(2*m))&&y<1&&(0===h&&this.addX(g(l[h],u[h],c[h],d[h],y)),1===h&&this.addY(g(l[h],u[h],c[h],d[h],y))),0<(y=(-p-Math.sqrt(f))/(2*m))&&y<1&&(0===h&&this.addX(g(l[h],u[h],c[h],d[h],y)),1===h&&this.addY(g(l[h],u[h],c[h],d[h],y))));}},a.prototype.addQuad=function(e,t,r,o,n,s){r=e+2/3*(r-e),o=t+2/3*(o-t);this.addBezier(e,t,r,o,r+1/3*(n-e),o+1/3*(s-t),n,s);},h.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t});},h.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t});},h.prototype.curveTo=h.prototype.bezierCurveTo=function(e,t,r,o,n,s){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:o,x:n,y:s});},h.prototype.quadTo=h.prototype.quadraticCurveTo=function(e,t,r,o){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:o});},h.prototype.close=h.prototype.closePath=function(){this.commands.push({type:"Z"});},h.prototype.extend=function(e){var t;if(e.commands)e=e.commands;else if(e instanceof a)return t=e,this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close();Array.prototype.push.apply(this.commands,e);},h.prototype.getBoundingBox=function(){for(var e=new a,t=0,r=0,o=0,n=0,s=0;s<this.commands.length;s++){var i=this.commands[s];switch(i.type){case"M":e.addPoint(i.x,i.y),t=o=i.x,r=n=i.y;break;case"L":e.addPoint(i.x,i.y),o=i.x,n=i.y;break;case"Q":e.addQuad(o,n,i.x1,i.y1,i.x,i.y),o=i.x,n=i.y;break;case"C":e.addBezier(o,n,i.x1,i.y1,i.x2,i.y2,i.x,i.y),o=i.x,n=i.y;break;case"Z":o=t,n=r;break;default:throw new Error("Unexpected path command "+i.type)}}return e.isEmpty()&&e.addPoint(0,0),e},h.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath();}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke());},h.prototype.toPathData=function(n){function e(){for(var e=arguments,t="",r=0;r<arguments.length;r+=1){var o=e[r];0<=o&&0<r&&(t+=" "),t+=(o=o,Math.round(o)===o?""+Math.round(o):o.toFixed(n));}return t}n=void 0!==n?n:2;for(var t="",r=0;r<this.commands.length;r+=1){var o=this.commands[r];"M"===o.type?t+="M"+e(o.x,o.y):"L"===o.type?t+="L"+e(o.x,o.y):"C"===o.type?t+="C"+e(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?t+="Q"+e(o.x1,o.y1,o.x,o.y):"Z"===o.type&&(t+="Z");}return t},h.prototype.toSVG=function(e){var t=(t='<path d="')+this.toPathData(e)+'"';return this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},h.prototype.toDOMElement=function(e){var e=this.toPathData(e),t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t};var L={fail:oe,argument:ne,assert:ne},m={},w={},l={};function r(e){return function(){return e}}w.BYTE=function(e){return L.argument(0<=e&&e<=255,"Byte value should be between 0 and 255."),[e]},l.BYTE=r(1),w.CHAR=function(e){return [e.charCodeAt(0)]},l.CHAR=r(1),w.CHARARRAY=function(e){for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},l.CHARARRAY=function(e){return e.length},w.USHORT=function(e){return [e>>8&255,255&e]},l.USHORT=r(2),w.SHORT=function(e){return [(e=32768<=e?-(65536-e):e)>>8&255,255&e]},l.SHORT=r(2),w.UINT24=function(e){return [e>>16&255,e>>8&255,255&e]},l.UINT24=r(3),w.ULONG=function(e){return [e>>24&255,e>>16&255,e>>8&255,255&e]},l.ULONG=r(4),w.LONG=function(e){return [(e=2147483648<=e?-(4294967296-e):e)>>24&255,e>>16&255,e>>8&255,255&e]},l.LONG=r(4),w.FIXED=w.ULONG,l.FIXED=l.ULONG,w.FWORD=w.SHORT,l.FWORD=l.SHORT,w.UFWORD=w.USHORT,l.UFWORD=l.USHORT,w.LONGDATETIME=function(e){return [0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},l.LONGDATETIME=r(8),w.TAG=function(e){return L.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},l.TAG=r(4),w.Card8=w.BYTE,l.Card8=l.BYTE,w.Card16=w.USHORT,l.Card16=l.USHORT,w.OffSize=w.BYTE,l.OffSize=l.BYTE,w.SID=w.USHORT,l.SID=l.USHORT,w.NUMBER=function(e){return -107<=e&&e<=107?[e+139]:108<=e&&e<=1131?[247+((e-=108)>>8),255&e]:-1131<=e&&e<=-108?[251+((e=-e-108)>>8),255&e]:-32768<=e&&e<=32767?w.NUMBER16(e):w.NUMBER32(e)},l.NUMBER=function(e){return w.NUMBER(e).length},w.NUMBER16=function(e){return [28,e>>8&255,255&e]},l.NUMBER16=r(3),w.NUMBER32=function(e){return [29,e>>24&255,e>>16&255,e>>8&255,255&e]},l.NUMBER32=r(5),w.REAL=function(e){for(var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t),o=(r&&(r=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length)),t=(Math.round(e*r)/r).toString()),""),n=0,s=t.length;n<s;n+=1){var i=t[n];o+="e"===i?"-"===t[++n]?"c":"b":"."===i?"a":"-"===i?"e":i;}for(var a=[30],l=0,u=(o+=1&o.length?"f":"ff").length;l<u;l+=2)a.push(parseInt(o.substr(l,2),16));return a},l.REAL=function(e){return w.REAL(e).length},w.NAME=w.CHARARRAY,l.NAME=l.CHARARRAY,w.STRING=w.CHARARRAY,l.STRING=l.CHARARRAY,m.UTF8=function(e,t,r){for(var o=[],n=r,s=0;s<n;s++,t+=1)o[s]=e.getUint8(t);return String.fromCharCode.apply(null,o)},m.UTF16=function(e,t,r){for(var o=[],n=r/2,s=0;s<n;s++,t+=2)o[s]=e.getUint16(t);return String.fromCharCode.apply(null,o)},w.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1){var o=e.charCodeAt(r);t[t.length]=o>>8&255,t[t.length]=255&o;}return t},l.UTF16=function(e){return 2*e.length};var se,ie={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},ae=(m.MACSTRING=function(e,t,r,o){var n=ie[o];if(void 0!==n){for(var s="",i=0;i<r;i++){var a=e.getUint8(t+i);s+=a<=127?String.fromCharCode(a):n[127&a];}return s}},"function"==typeof WeakMap&&new WeakMap);function le(e){return -128<=e&&e<=127}w.MACSTRING=function(e,t){var r=function(e){if(!se)for(var t in se={},ie)se[t]=new String(t);var r=se[e];if(void 0!==r){if(ae){var o=ae.get(r);if(void 0!==o)return o}var n=ie[e];if(void 0!==n){for(var s={},i=0;i<n.length;i++)s[n.charCodeAt(i)]=i+128;return ae&&ae.set(r,s),s}}}(t);if(void 0!==r){for(var o=[],n=0;n<e.length;n++){var s=e.charCodeAt(n);if(128<=s&&void 0===(s=r[s]))return;o[n]=s;}return o}},l.MACSTRING=function(e,t){e=w.MACSTRING(e,t);return void 0!==e?e.length:0},w.VARDELTAS=function(e){for(var t=0,r=[];t<e.length;)var o=e[t],t=(0===o?function(e,t,r){for(var o=0,n=e.length;t<n&&o<64&&0===e[t];)++t,++o;return r.push(128|o-1),t}:-128<=o&&o<=127?function(e,t,r){for(var o=0,n=e.length,s=t;s<n&&o<64;){var i=e[s];if(!le(i))break;if(0===i&&s+1<n&&0===e[s+1])break;++s,++o;}r.push(o-1);for(var a=t;a<s;++a)r.push(e[a]+256&255);return s}:function(e,t,r){for(var o=0,n=e.length,s=t;s<n&&o<64;){var i=e[s];if(0===i)break;if(le(i)&&s+1<n&&le(e[s+1]))break;++s,++o;}r.push(64|o-1);for(var a=t;a<s;++a){var l=e[a];r.push(l+65536>>8&255,l+256&255);}return s})(e,t,r);return r},w.INDEX=function(e){for(var t=1,r=[t],o=[],n=0;n<e.length;n+=1){var s=w.OBJECT(e[n]);Array.prototype.push.apply(o,s),t+=s.length,r.push(t);}if(0===o.length)return [0,0];for(var i=[],a=1+Math.floor(Math.log(t)/Math.log(2))/8|0,l=[void 0,w.BYTE,w.USHORT,w.UINT24,w.ULONG][a],u=0;u<r.length;u+=1){var c=l(r[u]);Array.prototype.push.apply(i,c);}return Array.prototype.concat(w.Card16(e.length),w.OffSize(a),i,o)},l.INDEX=function(e){return w.INDEX(e).length},w.DICT=function(e){for(var t=[],r=Object.keys(e),o=r.length,n=0;n<o;n+=1){var s=parseInt(r[n],0),i=e[s];t=(t=t.concat(w.OPERAND(i.value,i.type))).concat(w.OPERATOR(s));}return t},l.DICT=function(e){return w.DICT(e).length},w.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},w.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var o=0;o<t.length;o+=1)L.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(w.OPERAND(e[o],t[o]));else if("SID"===t)r=r.concat(w.NUMBER(e));else if("offset"===t)r=r.concat(w.NUMBER32(e));else if("number"===t)r=r.concat(w.NUMBER(e));else {if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(w.REAL(e));}return r},w.OP=w.BYTE,l.OP=l.BYTE;var ue="function"==typeof WeakMap&&new WeakMap;function n(e,t,r){for(var o=0;o<t.length;o+=1){var n=t[o];this[n.name]=n.value;}if(this.tableName=e,this.fields=t,r)for(var s=Object.keys(r),i=0;i<s.length;i+=1){var a=s[i],l=r[a];void 0!==this[a]&&(this[a]=l);}}function ce(e,t,r){void 0===r&&(r=t.length);var o=new Array(t.length+1);o[0]={name:e+"Count",type:"USHORT",value:r};for(var n=0;n<t.length;n++)o[n+1]={name:e+n,type:"USHORT",value:t[n]};return o}function de(e,t,r){var o=t.length,n=new Array(o+1);n[0]={name:e+"Count",type:"USHORT",value:o};for(var s=0;s<o;s++)n[s+1]={name:e+s,type:"TABLE",value:r(t[s],s)};return n}function he(e,t,r){var o=t.length,n=[];n[0]={name:e+"Count",type:"USHORT",value:o};for(var s=0;s<o;s++)n=n.concat(r(t[s],s));return n}function fe(e){1===e.format?n.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ce("glyph",e.glyphs))):L.assert(!1,"Can't create coverage table format 2 yet.");}function pe(e){n.call(this,"scriptListTable",he("scriptRecord",e,function(e,t){var r=e.script,o=r.defaultLangSys;return L.assert(!!o,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new n("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new n("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:o.reqFeatureIndex}].concat(ce("featureIndex",o.featureIndexes)))}].concat(he("langSys",r.langSysRecords,function(e,t){var r=e.langSys;return [{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new n("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(ce("featureIndex",r.featureIndexes)))}]})))}]}));}function me(e){n.call(this,"featureListTable",he("featureRecord",e,function(e,t){var r=e.feature;return [{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new n("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(ce("lookupListIndex",r.lookupListIndexes)))}]}));}function ye(e,r){n.call(this,"lookupListTable",de("lookup",e,function(e){var t=r[e.lookupType];return L.assert(!!t,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new n("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(de("subtable",e.subtables,t)))}));}w.CHARSTRING=function(e){if(ue){var t=ue.get(e);if(void 0!==t)return t}for(var r=[],o=e.length,n=0;n<o;n+=1)var s=e[n],r=r.concat(w[s.type](s.value));return ue&&ue.set(e,r),r},l.CHARSTRING=function(e){return w.CHARSTRING(e).length},w.OBJECT=function(e){var t=w[e.type];return L.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},l.OBJECT=function(e){var t=l[e.type];return L.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},w.TABLE=function(e){for(var t=[],r=e.fields.length,o=[],n=[],s=0;s<r;s+=1){var i=e.fields[s],a=w[i.type],l=(L.argument(void 0!==a,"No encoding function for field type "+i.type+" ("+i.name+")"),e[i.name]),a=a(l=void 0===l?i.value:l);"TABLE"===i.type?(n.push(t.length),t=t.concat([0,0]),o.push(a)):t=t.concat(a);}for(var u=0;u<o.length;u+=1){var c=n[u],d=t.length;L.argument(d<65536,"Table "+e.tableName+" too big."),t[c]=d>>8,t[c+1]=255&d,t=t.concat(o[u]);}return t},l.TABLE=function(e){for(var t=0,r=e.fields.length,o=0;o<r;o+=1){var n=e.fields[o],s=l[n.type],i=(L.argument(void 0!==s,"No sizeOf function for field type "+n.type+" ("+n.name+")"),e[n.name]);t+=s(i=void 0===i?n.value:i),"TABLE"===n.type&&(t+=2);}return t},w.RECORD=w.TABLE,l.RECORD=l.TABLE,w.LITERAL=function(e){return e},l.LITERAL=function(e){return e.length},n.prototype.encode=function(){return w.TABLE(this)},n.prototype.sizeOf=function(){return l.TABLE(this)};var S={Table:n,Record:n,Coverage:(fe.prototype=Object.create(n.prototype)).constructor=fe,ScriptList:(pe.prototype=Object.create(n.prototype)).constructor=pe,FeatureList:(me.prototype=Object.create(n.prototype)).constructor=me,LookupList:(ye.prototype=Object.create(n.prototype)).constructor=ye,ushortList:ce,tableList:de,recordList:he};function ge(e,t){return e.getUint8(t)}function ve(e,t){return e.getUint16(t,!1)}function be(e,t){return e.getUint32(t,!1)}function je(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var _e={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function u(e,t){this.data=e,this.offset=t,this.relativeOffset=0;}u.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},u.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},u.prototype.parseCard8=u.prototype.parseByte,u.prototype.parseCard16=u.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},u.prototype.parseSID=u.prototype.parseUShort,u.prototype.parseOffset16=u.prototype.parseUShort,u.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},u.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},u.prototype.parseOffset32=u.prototype.parseULong=function(){var e=be(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},u.prototype.parseFixed=function(){var e=je(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},u.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,o="";this.relativeOffset+=e;for(var n=0;n<e;n++)o+=String.fromCharCode(t.getUint8(r+n));return o},u.prototype.parseTag=function(){return this.parseString(4)},u.prototype.parseLongDateTime=function(){var e=be(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},u.prototype.parseVersion=function(e){var t=ve(this.data,this.offset+this.relativeOffset),r=ve(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t+r/(e=void 0===e?4096:e)/10},u.prototype.skip=function(e,t){this.relativeOffset+=_e[e]*(t=void 0===t?1:t);},u.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),r=this.data,o=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=r.getUint32(o),o+=4;return this.relativeOffset+=4*e,t},u.prototype.parseOffset16List=u.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),r=this.data,o=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=r.getUint16(o),o+=2;return this.relativeOffset+=2*e,t},u.prototype.parseShortList=function(e){for(var t=new Array(e),r=this.data,o=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=r.getInt16(o),o+=2;return this.relativeOffset+=2*e,t},u.prototype.parseByteList=function(e){for(var t=new Array(e),r=this.data,o=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=r.getUint8(o++);return this.relativeOffset+=e,t},u.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),o=0;o<e;o++)r[o]=t.call(this);return r},u.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),o=0;o<e;o++)r[o]=t.call(this);return r},u.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),o=Object.keys(t),n=0;n<e;n++){for(var s={},i=0;i<o.length;i++){var a=o[i],l=t[a];s[a]=l.call(this);}r[n]=s;}return r},u.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),o=Object.keys(t),n=0;n<e;n++){for(var s={},i=0;i<o.length;i++){var a=o[i],l=t[a];s[a]=l.call(this);}r[n]=s;}return r},u.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),r={},o=0;o<t.length;o++){var n=t[o],s=e[n];r[n]=s.call(this);}return r},u.prototype.parseValueRecord=function(e){var t;if(0!==(e=void 0===e?this.parseUShort():e))return t={},1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t},u.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),r=new Array(t),o=0;o<t;o++)r[o]=this.parseValueRecord(e);return r},u.prototype.parsePointer=function(e){var t=this.parseOffset16();if(0<t)return new u(this.data,this.offset+t).parseStruct(e)},u.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(0<t)return new u(this.data,this.offset+t).parseStruct(e)},u.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),r=t.length,o=this.relativeOffset,n=new Array(r),s=0;s<r;s++){var i=t[s];if(0===i)n[s]=void 0;else if(this.relativeOffset=i,e){for(var a=this.parseOffset16List(),l=new Array(a.length),u=0;u<a.length;u++)this.relativeOffset=i+a[u],l[u]=e.call(this);n[s]=l;}else n[s]=this.parseUShortList();}return this.relativeOffset=o,n},u.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(1===t)return {format:1,glyphs:this.parseUShortList(r)};if(2!==t)throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.");for(var o=new Array(r),n=0;n<r;n++)o[n]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return {format:2,ranges:o}},u.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return {format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return {format:2,ranges:this.parseRecordList({start:u.uShort,end:u.uShort,classId:u.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},u.list=function(e,t){return function(){return this.parseList(e,t)}},u.list32=function(e,t){return function(){return this.parseList32(e,t)}},u.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},u.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},u.pointer=function(e){return function(){return this.parsePointer(e)}},u.pointer32=function(e){return function(){return this.parsePointer32(e)}},u.tag=u.prototype.parseTag,u.byte=u.prototype.parseByte,u.uShort=u.offset16=u.prototype.parseUShort,u.uShortList=u.prototype.parseUShortList,u.uLong=u.offset32=u.prototype.parseULong,u.uLongList=u.prototype.parseULongList,u.struct=u.prototype.parseStruct,u.coverage=u.prototype.parseCoverage,u.classDef=u.prototype.parseClassDef;var xe={reserved:u.uShort,reqFeatureIndex:u.uShort,featureIndexes:u.uShortList},R=(u.prototype.parseScriptList=function(){return this.parsePointer(u.recordList({tag:u.tag,script:u.pointer({defaultLangSys:u.pointer(xe),langSysRecords:u.recordList({tag:u.tag,langSys:u.pointer(xe)})})}))||[]},u.prototype.parseFeatureList=function(){return this.parsePointer(u.recordList({tag:u.tag,feature:u.pointer({featureParams:u.offset16,lookupListIndexes:u.uShortList})}))||[]},u.prototype.parseLookupList=function(o){return this.parsePointer(u.list(u.pointer(function(){var e=this.parseUShort(),t=(L.argument(1<=e&&e<=9,"GPOS/GSUB lookup type "+e+" unknown."),this.parseUShort()),r=16&t;return {lookupType:e,lookupFlag:t,subtables:this.parseList(u.pointer(o[e])),markFilteringSet:r?this.parseUShort():void 0}})))||[]},u.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var e=this.parseUShort(),t=this.parseUShort();return L.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:u.offset32,featureTableSubstitutionOffset:u.offset32})})||[]},{getByte:ge,getCard8:ge,getUShort:ve,getCard16:ve,getShort:function(e,t){return e.getInt16(t,!1)},getULong:be,getFixed:je,getTag:function(e,t){for(var r="",o=t;o<t+4;o+=1)r+=String.fromCharCode(e.getInt8(o));return r},getOffset:function(e,t,r){for(var o=0,n=0;n<r;n+=1)o=(o<<=8)+e.getUint8(t+n);return o},getBytes:function(e,t,r){for(var o=[],n=t;n<r;n+=1)o.push(e.getUint8(n));return o},bytesToString:function(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t},Parser:u});var we={parse:function(e,t){for(var r={},o=(r.version=R.getUShort(e,t),L.argument(0===r.version,"cmap table version should be 0."),r.numTables=R.getUShort(e,t+2),-1),n=r.numTables-1;0<=n;--n){var s=R.getUShort(e,t+4+8*n),i=R.getUShort(e,t+4+8*n+2);if(3===s&&(0===i||1===i||10===i)||0===s&&(0===i||1===i||2===i||3===i||4===i)){o=R.getULong(e,t+4+8*n+4);break}}if(-1===o)throw new Error("No valid cmap sub-tables found.");var a=new R.Parser(e,t+o);if(r.format=a.parseUShort(),12===r.format){var l,u=r,c=a;c.parseUShort(),u.length=c.parseULong(),u.language=c.parseULong(),u.groupCount=l=c.parseULong(),u.glyphIndexMap={};for(var d=0;d<l;d+=1)for(var h=c.parseULong(),f=c.parseULong(),p=c.parseULong(),m=h;m<=f;m+=1)u.glyphIndexMap[m]=p,p++;}else {if(4!==r.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");var y=r,g=e,v=t,b=o;y.length=a.parseUShort(),y.language=a.parseUShort(),y.segCount=j=a.parseUShort()>>1,a.skip("uShort",3),y.glyphIndexMap={};for(var j,_=new R.Parser(g,v+b+14),x=new R.Parser(g,v+b+16+2*j),w=new R.Parser(g,v+b+16+4*j),S=new R.Parser(g,v+b+16+6*j),T=v+b+16+8*j,M=0;M<j-1;M+=1)for(var E=void 0,k=_.parseUShort(),C=x.parseUShort(),O=w.parseShort(),P=S.parseUShort(),A=C;A<=k;A+=1)0!==P?(T=(T=S.offset+S.relativeOffset-2)+P+2*(A-C),0!==(E=R.getUShort(g,T))&&(E=E+O&65535)):E=A+O&65535,y.glyphIndexMap[A]=E;}return r},make:function(e){for(var t=!0,r=e.length-1;0<r;--r)if(65535<e.get(r).unicode){console.log("Adding CMAP format 12 (needed!)"),t=!1;break}var o,n,s=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:t?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:t?12:20}],i=(s=(s=t?s:s.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new S.Table("cmap",s));for(i.segments=[],r=0;r<e.length;r+=1){for(var a=e.get(r),l=0;l<a.unicodes.length;l+=1)o=a.unicodes[l],n=r,i.segments.push({end:o,start:o,delta:-(o-n),offset:0,glyphIndex:n});i.segments=i.segments.sort(function(e,t){return e.start-t.start});}i.segments.push({end:65535,start:65535,delta:1,offset:0});var u=i.segments.length,c=0,d=[],h=[],f=[],p=[],m=[],y=[];for(r=0;r<u;r+=1){var g=i.segments[r];g.end<=65535&&g.start<=65535?(d=d.concat({name:"end_"+r,type:"USHORT",value:g.end}),h=h.concat({name:"start_"+r,type:"USHORT",value:g.start}),f=f.concat({name:"idDelta_"+r,type:"SHORT",value:g.delta}),p=p.concat({name:"idRangeOffset_"+r,type:"USHORT",value:g.offset}),void 0!==g.glyphId&&(m=m.concat({name:"glyph_"+r,type:"USHORT",value:g.glyphId}))):c+=1,t||void 0===g.glyphIndex||(y=(y=(y=y.concat({name:"cmap12Start_"+r,type:"ULONG",value:g.start})).concat({name:"cmap12End_"+r,type:"ULONG",value:g.end})).concat({name:"cmap12Glyph_"+r,type:"ULONG",value:g.glyphIndex}));}return i.segCountX2=2*(u-c),i.searchRange=2*Math.pow(2,Math.floor(Math.log(u-c)/Math.log(2))),i.entrySelector=Math.log(i.searchRange/2)/Math.log(2),i.rangeShift=i.segCountX2-i.searchRange,i.fields=i.fields.concat(d),i.fields.push({name:"reservedPad",type:"USHORT",value:0}),i.fields=i.fields.concat(h),i.fields=i.fields.concat(f),i.fields=i.fields.concat(p),i.fields=i.fields.concat(m),i.cmap4Length=14+2*d.length+2+2*h.length+2*f.length+2*p.length+2*m.length,t||(s=16+4*y.length,i.cmap12Offset=20+i.cmap4Length,i.fields=i.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:s},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:y.length/3}]),i.fields=i.fields.concat(y)),i}},Se=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Te=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Me=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],c=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ee(e){this.font=e;}function ke(e){this.cmap=e;}function Ce(e,t){this.encoding=e,this.charset=t;}function Oe(e){switch(e.version){case 1:this.names=c.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<c.length?this.names[t]=c[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-c.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var r=0;r<e.numberOfGlyphs;r++)this.names[r]=c[r+e.glyphNameIndex[r]];break;default:this.names=[];}}Ee.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.font.glyphs;if(r)for(var o=0;o<r.length;o+=1)for(var n=r.get(o),s=0;s<n.unicodes.length;s+=1)if(n.unicodes[s]===t)return o;return null},ke.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},Ce.prototype.charToGlyphIndex=function(e){e=e.codePointAt(0),e=this.encoding[e];return this.charset.indexOf(e)},Oe.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},Oe.prototype.glyphIndexToName=function(e){return this.names[e]};var d={line:function(e,t,r,o,n){e.beginPath(),e.moveTo(t,r),e.lineTo(o,n),e.stroke();}};function f(e){this.bindConstructorValues(e);}function Pe(t,e,r){Object.defineProperty(t,e,{get:function(){return t.path,t[r]},set:function(e){t[r]=e;},enumerable:!0,configurable:!0});}function Ae(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++)this.glyphs[r]=t[r];this.length=t&&t.length||0;}f.prototype.bindConstructorValues=function(e){var t;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(e=e.path,t=e||new h,{configurable:!0,get:function(){return t="function"==typeof t?t():t},set:function(e){t=e;}}));},f.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e);},f.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},f.prototype.getPath=function(e,t,r,o,n){e=void 0!==e?e:0,t=void 0!==t?t:0,r=void 0!==r?r:72;for(var s,i,a=(o=o||{}).xScale,l=o.yScale,u=((s=o.hinting&&n&&n.hinting?this.path&&n.hinting.exec(this,r):s)?(i=n.hinting.getCommands(s),e=Math.round(e),t=Math.round(t),a=l=1):(i=this.path.commands,o=1/this.path.unitsPerEm*r,void 0===a&&(a=o),void 0===l&&(l=o)),new h),c=0;c<i.length;c+=1){var d=i[c];"M"===d.type?u.moveTo(e+d.x*a,t+-d.y*l):"L"===d.type?u.lineTo(e+d.x*a,t+-d.y*l):"Q"===d.type?u.quadraticCurveTo(e+d.x1*a,t+-d.y1*l,e+d.x*a,t+-d.y*l):"C"===d.type?u.curveTo(e+d.x1*a,t+-d.y1*l,e+d.x2*a,t+-d.y2*l,e+d.x*a,t+-d.y*l):"Z"===d.type&&u.closePath();}return u},f.prototype.getContours=function(){if(void 0===this.points)return [];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var o=this.points[r];t.push(o),o.lastPointOfContour&&(e.push(t),t=[]);}return L.argument(0===t.length,"There are still points left in the current contour."),e},f.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],o=0;o<e.length;o+=1){var n=e[o];"Z"!==n.type&&(t.push(n.x),r.push(n.y)),"Q"!==n.type&&"C"!==n.type||(t.push(n.x1),r.push(n.y1)),"C"===n.type&&(t.push(n.x2),r.push(n.y2));}var s={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(s.xMin)||(s.xMin=0),isFinite(s.xMax)||(s.xMax=this.advanceWidth),isFinite(s.yMin)||(s.yMin=0),isFinite(s.yMax)||(s.yMax=0),s.rightSideBearing=this.advanceWidth-s.leftSideBearing-(s.xMax-s.xMin),s},f.prototype.draw=function(e,t,r,o,n){this.getPath(t,r,o,n).draw(e);},f.prototype.drawPoints=function(i,e,t,r){function o(e,t,r,o){var n=2*Math.PI;i.beginPath();for(var s=0;s<e.length;s+=1)i.moveTo(t+e[s].x*o,r+e[s].y*o),i.arc(t+e[s].x*o,r+e[s].y*o,2,0,n,!1);i.closePath(),i.fill();}e=void 0!==e?e:0,t=void 0!==t?t:0;for(var r=1/this.path.unitsPerEm*(r=void 0!==r?r:24),n=[],s=[],a=this.path,l=0;l<a.commands.length;l+=1){var u=a.commands[l];void 0!==u.x&&n.push({x:u.x,y:-u.y}),void 0!==u.x1&&s.push({x:u.x1,y:-u.y1}),void 0!==u.x2&&s.push({x:u.x2,y:-u.y2});}i.fillStyle="blue",o(n,e,t,r),i.fillStyle="red",o(s,e,t,r);},f.prototype.drawMetrics=function(e,t,r,o){t=void 0!==t?t:0,r=void 0!==r?r:0,o=1/this.path.unitsPerEm*(o=void 0!==o?o:24),e.lineWidth=1,e.strokeStyle="black",d.line(e,t,-1e4,t,1e4),d.line(e,-1e4,r,1e4,r);var n=this.xMin||0,s=this.yMin||0,i=this.xMax||0,a=this.yMax||0,l=this.advanceWidth||0;e.strokeStyle="blue",d.line(e,t+n*o,-1e4,t+n*o,1e4),d.line(e,t+i*o,-1e4,t+i*o,1e4),d.line(e,-1e4,r+-s*o,1e4,r+-s*o),d.line(e,-1e4,r+-a*o,1e4,r+-a*o),e.strokeStyle="green",d.line(e,t+l*o,-1e4,t+l*o,1e4);},Ae.prototype.get=function(e){return "function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},Ae.prototype.push=function(e,t){this.glyphs[e]=t,this.length++;};var p={GlyphSet:Ae,glyphLoader:function(e,t){return new f({index:t,font:e})},ttfGlyphLoader:function(r,e,o,n,s,i){return function(){var t=new f({index:e,font:r});return t.path=function(){o(t,n,s);var e=i(r.glyphs,t);return e.unitsPerEm=r.unitsPerEm,e},Pe(t,"xMin","_xMin"),Pe(t,"xMax","_xMax"),Pe(t,"yMin","_yMin"),Pe(t,"yMax","_yMax"),t}},cffGlyphLoader:function(r,e,o,n){return function(){var t=new f({index:e,font:r});return t.path=function(){var e=o(r,t,n);return e.unitsPerEm=r.unitsPerEm,e},t}}};function Le(e){e=e.length<1240?107:e.length<33900?1131:32768;return e}function y(e,t,r){var o,n=[],s=[],i=R.getCard16(e,t);if(0!==i){for(var a=R.getByte(e,t+2),l=t+(i+1)*a+2,u=t+3,c=0;c<i+1;c+=1)n.push(R.getOffset(e,u,a)),u+=a;o=l+n[i];}else o=t+2;for(var d=0;d<n.length-1;d+=1){var h=R.getBytes(e,l+n[d],l+n[d+1]);r&&(h=r(h)),s.push(h);}return {objects:s,startOffset:t,endOffset:o}}function Re(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t){for(var r=e,o="",n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var s=r.parseByte(),i=s>>4,s=15&s;if(15==i)break;if(o+=n[i],15==s)break;o+=n[s];}return parseFloat(o)}if(32<=t&&t<=246)return t-139;if(247<=t&&t<=250)return 256*(t-247)+e.parseByte()+108;if(251<=t&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function Ie(e,t,r){var o=new R.Parser(e,t=void 0!==t?t:0),n=[],s=[];for(r=void 0!==r?r:e.length;o.relativeOffset<r;){var i=o.parseByte();i<=21?(12===i&&(i=1200+o.parseByte()),n.push([i,s]),s=[]):s.push(Re(o,i));}for(var a=n,l={},u=0;u<a.length;u+=1){var c=a[u][0],d=a[u][1],h=void 0,h=1===d.length?d[0]:d;if(l.hasOwnProperty(c)&&!isNaN(l[c]))throw new Error("Object "+l+" already has key "+c);l[c]=h;}return l}function De(e,t){return t=t<=390?Se[t]:e[t-391]}function Fe(e,t,r){for(var o,n={},s=0;s<t.length;s+=1){var i=t[s];if(Array.isArray(i.type)){var a=[];a.length=i.type.length;for(var l=0;l<i.type.length;l++)void 0===(o=void 0!==e[i.op]?e[i.op][l]:void 0)&&(o=void 0!==i.value&&void 0!==i.value[l]?i.value[l]:null),"SID"===i.type[l]&&(o=De(r,o)),a[l]=o;n[i.name]=a;}else void 0===(o=e[i.op])&&(o=void 0!==i.value?i.value:null),"SID"===i.type&&(o=De(r,o)),n[i.name]=o;}return n}var Ue=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ne=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Be(e,t,r,o){return Fe(Ie(e,t,r),Ne,o)}function Ge(e,t,r,o){for(var n=[],s=0;s<r.length;s+=1){var i=new DataView(new Uint8Array(r[s]).buffer),i=(a=o,Fe(Ie(i,0,i.byteLength),Ue,a)),a=(i._subrs=[],i._subrsBias=0,i.private[0]),l=i.private[1];0!==a&&0!==l&&(a=Be(e,l+t,a,o),i._defaultWidthX=a.defaultWidthX,i._nominalWidthX=a.nominalWidthX,0!==a.subrs&&(l=y(e,l+a.subrs+t),i._subrs=l.objects,i._subrsBias=Le(i._subrs)),i._privateDict=a),n.push(i);}return n}function Ve(y,g,e){var v,b,j,_,t,x,w,r,S,T=new h,M=[],E=0,k=!1,C=!1,O=0,P=0,A=(S=(y.isCIDFont?(t=y.tables.cff.topDict._fdSelect[g.index],t=y.tables.cff.topDict._fdArray[t],x=t._subrs,w=t._subrsBias,r=t._defaultWidthX,t):(x=y.tables.cff.topDict._subrs,w=y.tables.cff.topDict._subrsBias,r=y.tables.cff.topDict._defaultWidthX,y.tables.cff.topDict))._nominalWidthX,r);function L(e,t){C&&T.closePath(),T.moveTo(e,t),C=!0;}function R(){M.length%2==0||k||(A=M.shift()+S),E+=M.length>>1,M.length=0,k=!0;}return function e(t){for(var r,o,n,s,i,a,l,u,c,d,h,f,p=0;p<t.length;){var m=t[p];switch(p+=1,m){case 1:case 3:R();break;case 4:1<M.length&&!k&&(A=M.shift()+S,k=!0),P+=M.pop(),L(O,P);break;case 5:for(;0<M.length;)O+=M.shift(),P+=M.shift(),T.lineTo(O,P);break;case 6:for(;0<M.length&&(O+=M.shift(),T.lineTo(O,P),0!==M.length);)P+=M.shift(),T.lineTo(O,P);break;case 7:for(;0<M.length&&(P+=M.shift(),T.lineTo(O,P),0!==M.length);)O+=M.shift(),T.lineTo(O,P);break;case 8:for(;0<M.length;)v=O+M.shift(),b=P+M.shift(),j=v+M.shift(),_=b+M.shift(),O=j+M.shift(),P=_+M.shift(),T.curveTo(v,b,j,_,O,P);break;case 10:i=M.pop()+w,(a=x[i])&&e(a);break;case 11:return;case 12:switch(m=t[p],p+=1,m){case 35:v=O+M.shift(),b=P+M.shift(),j=v+M.shift(),_=b+M.shift(),l=j+M.shift(),u=_+M.shift(),c=l+M.shift(),d=u+M.shift(),h=c+M.shift(),f=d+M.shift(),O=h+M.shift(),P=f+M.shift(),M.shift(),T.curveTo(v,b,j,_,l,u),T.curveTo(c,d,h,f,O,P);break;case 34:v=O+M.shift(),b=P,j=v+M.shift(),_=b+M.shift(),l=j+M.shift(),u=_,c=l+M.shift(),d=_,h=c+M.shift(),f=P,O=h+M.shift(),T.curveTo(v,b,j,_,l,u),T.curveTo(c,d,h,f,O,P);break;case 36:v=O+M.shift(),b=P+M.shift(),j=v+M.shift(),_=b+M.shift(),l=j+M.shift(),u=_,c=l+M.shift(),d=_,h=c+M.shift(),f=d+M.shift(),O=h+M.shift(),T.curveTo(v,b,j,_,l,u),T.curveTo(c,d,h,f,O,P);break;case 37:v=O+M.shift(),b=P+M.shift(),j=v+M.shift(),_=b+M.shift(),l=j+M.shift(),u=_+M.shift(),c=l+M.shift(),d=u+M.shift(),h=c+M.shift(),f=d+M.shift(),Math.abs(h-O)>Math.abs(f-P)?O=h+M.shift():P=f+M.shift(),T.curveTo(v,b,j,_,l,u),T.curveTo(c,d,h,f,O,P);break;default:console.log("Glyph "+g.index+": unknown operator 1200"+m),M.length=0;}break;case 14:0<M.length&&!k&&(A=M.shift()+S,k=!0),C&&(T.closePath(),C=!1);break;case 18:R();break;case 19:case 20:R(),p+=E+7>>3;break;case 21:2<M.length&&!k&&(A=M.shift()+S,k=!0),P+=M.pop(),L(O+=M.pop(),P);break;case 22:1<M.length&&!k&&(A=M.shift()+S,k=!0),L(O+=M.pop(),P);break;case 23:R();break;case 24:for(;2<M.length;)v=O+M.shift(),b=P+M.shift(),j=v+M.shift(),_=b+M.shift(),O=j+M.shift(),P=_+M.shift(),T.curveTo(v,b,j,_,O,P);O+=M.shift(),P+=M.shift(),T.lineTo(O,P);break;case 25:for(;6<M.length;)O+=M.shift(),P+=M.shift(),T.lineTo(O,P);v=O+M.shift(),b=P+M.shift(),j=v+M.shift(),_=b+M.shift(),O=j+M.shift(),P=_+M.shift(),T.curveTo(v,b,j,_,O,P);break;case 26:for(M.length%2&&(O+=M.shift());0<M.length;)v=O,b=P+M.shift(),j=v+M.shift(),_=b+M.shift(),O=j,P=_+M.shift(),T.curveTo(v,b,j,_,O,P);break;case 27:for(M.length%2&&(P+=M.shift());0<M.length;)v=O+M.shift(),b=P,j=v+M.shift(),_=b+M.shift(),O=j+M.shift(),P=_,T.curveTo(v,b,j,_,O,P);break;case 28:r=t[p],o=t[p+1],M.push((r<<24|o<<16)>>16),p+=2;break;case 29:i=M.pop()+y.gsubrsBias,(a=y.gsubrs[i])&&e(a);break;case 30:for(;0<M.length&&(v=O,b=P+M.shift(),j=v+M.shift(),_=b+M.shift(),O=j+M.shift(),P=_+(1===M.length?M.shift():0),T.curveTo(v,b,j,_,O,P),0!==M.length);)v=O+M.shift(),b=P,j=v+M.shift(),_=b+M.shift(),P=_+M.shift(),O=j+(1===M.length?M.shift():0),T.curveTo(v,b,j,_,O,P);break;case 31:for(;0<M.length&&(v=O+M.shift(),b=P,j=v+M.shift(),_=b+M.shift(),P=_+M.shift(),O=j+(1===M.length?M.shift():0),T.curveTo(v,b,j,_,O,P),0!==M.length);)v=O,b=P+M.shift(),j=v+M.shift(),_=b+M.shift(),O=j+M.shift(),P=_+(1===M.length?M.shift():0),T.curveTo(v,b,j,_,O,P);break;default:m<32?console.log("Glyph "+g.index+": unknown operator "+m):m<247?M.push(m-139):m<251?(r=t[p],p+=1,M.push(256*(m-247)+r+108)):m<255?(r=t[p],p+=1,M.push(256*-(m-251)-r-108)):(r=t[p],o=t[p+1],n=t[p+2],s=t[p+3],p+=4,M.push((r<<24|o<<16|n<<8|s)/65536));}}}(e),g.advanceWidth=A,T}function ze(e,t){var r,o=Se.indexOf(e);return 0<=o&&(r=o),0<=(o=t.indexOf(e))?r=o+Se.length:(r=Se.length+t.length,t.push(e)),r}function He(e,t,r){for(var o={},n=0;n<e.length;n+=1){var s=e[n],i=t[s.name];void 0===i||function e(t,r){if(t===r)return 1;if(Array.isArray(t)&&Array.isArray(r)&&t.length===r.length){for(var o=0;o<t.length;o+=1)if(!e(t[o],r[o]))return;return 1}}(i,s.value)||("SID"===s.type&&(i=ze(i,r)),o[s.op]={name:s.name,type:s.type,value:i});}return o}function We(e,t){var r=new S.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=He(Ue,e,t),r}function qe(e){var t=new S.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function Xe(e){for(var t=new S.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var o=e.get(r),n=function(e){for(var t=[],r=e.path,o=(t.push({name:"width",type:"NUMBER",value:e.advanceWidth}),0),n=0,s=0;s<r.commands.length;s+=1){var i,a,l,u,c=void 0,d=void 0,h=r.commands[s];"M"===(h="Q"===h.type?{type:"C",x:h.x,y:h.y,x1:1/3*o+2/3*h.x1,y1:1/3*n+2/3*h.y1,x2:1/3*h.x+2/3*h.x1,y2:1/3*h.y+2/3*h.y1}:h).type?(c=Math.round(h.x-o),d=Math.round(h.y-n),t.push({name:"dx",type:"NUMBER",value:c}),t.push({name:"dy",type:"NUMBER",value:d}),t.push({name:"rmoveto",type:"OP",value:21}),o=Math.round(h.x),n=Math.round(h.y)):"L"===h.type?(c=Math.round(h.x-o),d=Math.round(h.y-n),t.push({name:"dx",type:"NUMBER",value:c}),t.push({name:"dy",type:"NUMBER",value:d}),t.push({name:"rlineto",type:"OP",value:5}),o=Math.round(h.x),n=Math.round(h.y)):"C"===h.type&&(i=Math.round(h.x1-o),a=Math.round(h.y1-n),l=Math.round(h.x2-h.x1),u=Math.round(h.y2-h.y1),c=Math.round(h.x-h.x2),d=Math.round(h.y-h.y2),t.push({name:"dx1",type:"NUMBER",value:i}),t.push({name:"dy1",type:"NUMBER",value:a}),t.push({name:"dx2",type:"NUMBER",value:l}),t.push({name:"dy2",type:"NUMBER",value:u}),t.push({name:"dx",type:"NUMBER",value:c}),t.push({name:"dy",type:"NUMBER",value:d}),t.push({name:"rrcurveto",type:"OP",value:8}),o=Math.round(h.x),n=Math.round(h.y));}return t.push({name:"endchar",type:"OP",value:14}),t}(o);t.charStrings.push({name:o.name,type:"CHARSTRING",value:n});}return t}var Ye={parse:function(e,t,r){r.tables.cff={},o=e,n=t,(s={}).formatMajor=R.getCard8(o,n),s.formatMinor=R.getCard8(o,n+1),s.size=R.getCard8(o,n+2),s.offsetSize=R.getCard8(o,n+3),s.startOffset=n,s.endOffset=n+4;var o=y(e,s.endOffset,R.bytesToString),n=y(e,o.endOffset),s=y(e,n.endOffset,R.bytesToString),o=y(e,s.endOffset);if(r.gsubrs=o.objects,r.gsubrsBias=Le(r.gsubrs),1!==(o=Ge(e,t,n.objects,s.objects)).length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+o.length);if(n=o[0],(r.tables.cff.topDict=n)._privateDict&&(r.defaultWidthX=n._privateDict.defaultWidthX,r.nominalWidthX=n._privateDict.nominalWidthX),void 0!==n.ros[0]&&void 0!==n.ros[1]&&(r.isCIDFont=!0),r.isCIDFont){var o=n.fdArray,i=n.fdSelect;if(0===o||0===i)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");o=Ge(e,t,y(e,o+=t).objects,s.objects);n._fdArray=o,n._fdSelect=function(e,t,r,o){var n,s=[],i=new R.Parser(e,t);if(0===(e=i.parseCard8()))for(var a=0;a<r;a++){if(o<=(n=i.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+n+" (FD count "+o+")");s.push(n);}else {if(3!==e)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+e);var l,u=i.parseCard16(),c=i.parseCard16();if(0!==c)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+c);for(var d=0;d<u;d++){if(n=i.parseCard8(),l=i.parseCard16(),o<=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+n+" (FD count "+o+")");if(r<l)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+l);for(;c<l;c++)s.push(n);c=l;}if(l!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+l)}return s}(e,i+=t,r.numGlyphs,o.length);}var i=t+n.private[1],o=Be(e,i,n.private[0],s.objects),a=(r.defaultWidthX=o.defaultWidthX,r.nominalWidthX=o.nominalWidthX,0!==o.subrs?(i=y(e,i+o.subrs),r.subrs=i.objects,r.subrsBias=Le(r.subrs)):(r.subrs=[],r.subrsBias=0),y(e,t+n.charStrings)),o=(r.nGlyphs=a.objects.length,function(e,t,r,o){var n=new R.Parser(e,t),s=(--r,[".notdef"]);if(0===(e=n.parseCard8()))for(var i=0;i<r;i+=1)a=n.parseSID(),s.push(De(o,a));else if(1===e)for(;s.length<=r;)for(var a=n.parseSID(),l=n.parseCard8(),u=0;u<=l;u+=1)s.push(De(o,a)),a+=1;else {if(2!==e)throw new Error("Unknown charset format "+e);for(;s.length<=r;){a=n.parseSID(),l=n.parseCard16();for(var c=0;c<=l;c+=1)s.push(De(o,a)),a+=1;}}return s}(e,t+n.charset,r.nGlyphs,s.objects));0===n.encoding?r.cffEncoding=new Ce(Te,o):1===n.encoding?r.cffEncoding=new Ce(Me,o):r.cffEncoding=function(e,t,r){var o={},n=new R.Parser(e,t);if(0===(e=n.parseCard8()))for(var s=n.parseCard8(),i=0;i<s;i+=1)o[l=n.parseCard8()]=i;else {if(1!==e)throw new Error("Unknown encoding format "+e);for(var a=n.parseCard8(),l=1,u=0;u<a;u+=1)for(var c=n.parseCard8(),d=n.parseCard8(),h=c;h<=c+d;h+=1)o[h]=l,l+=1;}return new Ce(o,r)}(e,t+n.encoding,o),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new p.GlyphSet(r);for(var l=0;l<r.nGlyphs;l+=1){var u=a.objects[l];r.glyphs.push(l,p.cffGlyphLoader(r,l,Ve,u));}},make:function(e,t){for(var r,o=new S.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),n=1/t.unitsPerEm,n={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[n,0,0,n,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},s=[],i=1;i<e.length;i+=1)r=e.get(i),s.push(r.name);var a,l,u=[],t=(o.header=new S.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),o.nameIndex=function(e){var t=new S.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}([t.postScriptName]),We(n,u)),c=(o.topDictIndex=qe(t),o.globalSubrIndex=new S.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),o.charsets=function(e,t){for(var r=new S.Record("Charsets",[{name:"format",type:"Card8",value:0}]),o=0;o<e.length;o+=1){var n=ze(e[o],t);r.fields.push({name:"glyph_"+o,type:"SID",value:n});}return r}(s,u),o.charStringsIndex=Xe(e),o.privateDict=(c={},a=u,(l=new S.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=He(Ne,c,a),l),o.stringIndex=function(e){var t=new S.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}(u),o.header.sizeOf()+o.nameIndex.sizeOf()+o.topDictIndex.sizeOf()+o.stringIndex.sizeOf()+o.globalSubrIndex.sizeOf());return n.charset=c,n.encoding=0,n.charStrings=n.charset+o.charsets.sizeOf(),n.private[1]=n.charStrings+o.charStringsIndex.sizeOf(),t=We(n,u),o.topDictIndex=qe(t),o}};var Ze={parse:function(e,t){var r={},e=new R.Parser(e,t);return r.version=e.parseVersion(),r.fontRevision=Math.round(1e3*e.parseFixed())/1e3,r.checkSumAdjustment=e.parseULong(),r.magicNumber=e.parseULong(),L.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=e.parseUShort(),r.unitsPerEm=e.parseUShort(),r.created=e.parseLongDateTime(),r.modified=e.parseLongDateTime(),r.xMin=e.parseShort(),r.yMin=e.parseShort(),r.xMax=e.parseShort(),r.yMax=e.parseShort(),r.macStyle=e.parseUShort(),r.lowestRecPPEM=e.parseUShort(),r.fontDirectionHint=e.parseShort(),r.indexToLocFormat=e.parseShort(),r.glyphDataFormat=e.parseShort(),r},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new S.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}};var Qe={parse:function(e,t){var r={},e=new R.Parser(e,t);return r.version=e.parseVersion(),r.ascender=e.parseShort(),r.descender=e.parseShort(),r.lineGap=e.parseShort(),r.advanceWidthMax=e.parseUShort(),r.minLeftSideBearing=e.parseShort(),r.minRightSideBearing=e.parseShort(),r.xMaxExtent=e.parseShort(),r.caretSlopeRise=e.parseShort(),r.caretSlopeRun=e.parseShort(),r.caretOffset=e.parseShort(),e.relativeOffset+=8,r.metricDataFormat=e.parseShort(),r.numberOfHMetrics=e.parseUShort(),r},make:function(e){return new S.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}};var Je={parse:function(e,t,r,o,n){for(var s,i,a=new R.Parser(e,t),l=0;l<o;l+=1){l<r&&(s=a.parseUShort(),i=a.parseShort());var u=n.get(l);u.advanceWidth=s,u.leftSideBearing=i;}},make:function(e){for(var t=new S.Table("hmtx",[]),r=0;r<e.length;r+=1){var o=e.get(r),n=o.advanceWidth||0,o=o.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:n}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:o});}return t}};var Ke={make:function(e){for(var t=new S.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),r="",o=12+4*e.length,n=0;n<e.length;++n){var s=r.indexOf(e[n]);s<0&&(s=r.length,r+=e[n]),t.fields.push({name:"offset "+n,type:"USHORT",value:o+s}),t.fields.push({name:"length "+n,type:"USHORT",value:e[n].length});}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t},parse:function(e,t){for(var r=new R.Parser(e,t),o=r.parseULong(),n=(L.argument(1===o,"Unsupported ltag table version."),r.skip("uLong",1),r.parseULong()),s=[],i=0;i<n;i++){for(var a="",l=t+r.parseUShort(),u=r.parseUShort(),c=l;c<l+u;++c)a+=String.fromCharCode(e.getInt8(c));s.push(a);}return s}};var $e={parse:function(e,t){var r={},e=new R.Parser(e,t);return r.version=e.parseVersion(),r.numGlyphs=e.parseUShort(),1===r.version&&(r.maxPoints=e.parseUShort(),r.maxContours=e.parseUShort(),r.maxCompositePoints=e.parseUShort(),r.maxCompositeContours=e.parseUShort(),r.maxZones=e.parseUShort(),r.maxTwilightPoints=e.parseUShort(),r.maxStorage=e.parseUShort(),r.maxFunctionDefs=e.parseUShort(),r.maxInstructionDefs=e.parseUShort(),r.maxStackElements=e.parseUShort(),r.maxSizeOfInstructions=e.parseUShort(),r.maxComponentElements=e.parseUShort(),r.maxComponentDepth=e.parseUShort()),r},make:function(e){return new S.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},et=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],tt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},rt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},ot={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};var nt="utf-16",st={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},it={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function at(e,t,r){switch(e){case 0:return nt;case 1:return it[r]||st[t];case 3:if(1===t||10===t)return nt}}function lt(e){var t,r={};for(t in e)r[e[t]]=parseInt(t);return r}function ut(e,t,r,o,n,s){return new S.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:o},{name:"length",type:"USHORT",value:n},{name:"offset",type:"USHORT",value:s}])}function ct(e,t){if((r=function(e,t){var r=e.length,o=t.length-r+1;e:for(var n=0;n<o;n++)for(;n<o;n++){for(var s=0;s<r;s++)if(t[n+s]!==e[s])continue e;return n}return -1}(e,t))<0)for(var r=t.length,o=0,n=e.length;o<n;++o)t.push(e[o]);return r}var dt={parse:function(e,t,r){for(var o={},n=new R.Parser(e,t),t=n.parseUShort(),s=n.parseUShort(),i=n.offset+n.parseUShort(),a=0;a<s;a++){var l=n.parseUShort(),u=n.parseUShort(),c=n.parseUShort(),d=n.parseUShort(),d=et[d]||d,h=n.parseUShort(),f=n.parseUShort(),p=function(e,t,r){switch(e){case 0:if(65535===t)return "und";if(r)return r[t];break;case 1:return tt[t];case 3:return ot[t]}}(l,c,r),l=at(l,u,c);void 0!==l&&void 0!==p&&(u=void 0,(u=l===nt?m.UTF16(e,i+f,h):m.MACSTRING(e,i+f,h,l))&&((c=void 0===(c=o[d])?o[d]={}:c)[p]=u));}return 1===t&&n.parseUShort(),o},make:function(e,t){var r,o=[],n={},s=lt(et);for(r in e){var i=s[r];if(void 0===i&&(i=r),h=parseInt(i),isNaN(h))throw new Error('Name table entry "'+r+'" does not exist, see nameTableNames for complete list.');n[h]=e[r],o.push(h);}for(var a=lt(tt),l=lt(ot),u=[],c=[],d=0;d<o.length;d++){var h,f,p=n[h=o[d]];for(f in p){var m=p[f],y=1,g=a[f],v=rt[g],b=at(y,v,g),b=w.MACSTRING(m,b),j=(void 0===b&&(y=0,(g=t.indexOf(f))<0&&(g=t.length,t.push(f)),v=4,b=w.UTF16(m)),ct(b,c)),y=(u.push(ut(y,v,g,h,b.length,j)),l[f]);void 0!==y&&(g=ct(v=w.UTF16(m),c),u.push(ut(3,1,y,h,v.length,g)));}}u.sort(function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID});for(var _=new S.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:u.length},{name:"stringOffset",type:"USHORT",value:6+12*u.length}]),x=0;x<u.length;x++)_.fields.push({name:"record_"+x,type:"RECORD",value:u[x]});return _.fields.push({name:"strings",type:"LITERAL",value:c}),_}},ht=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var ft={parse:function(e,t){var r={},o=new R.Parser(e,t);r.version=o.parseUShort(),r.xAvgCharWidth=o.parseShort(),r.usWeightClass=o.parseUShort(),r.usWidthClass=o.parseUShort(),r.fsType=o.parseUShort(),r.ySubscriptXSize=o.parseShort(),r.ySubscriptYSize=o.parseShort(),r.ySubscriptXOffset=o.parseShort(),r.ySubscriptYOffset=o.parseShort(),r.ySuperscriptXSize=o.parseShort(),r.ySuperscriptYSize=o.parseShort(),r.ySuperscriptXOffset=o.parseShort(),r.ySuperscriptYOffset=o.parseShort(),r.yStrikeoutSize=o.parseShort(),r.yStrikeoutPosition=o.parseShort(),r.sFamilyClass=o.parseShort(),r.panose=[];for(var n=0;n<10;n++)r.panose[n]=o.parseByte();return r.ulUnicodeRange1=o.parseULong(),r.ulUnicodeRange2=o.parseULong(),r.ulUnicodeRange3=o.parseULong(),r.ulUnicodeRange4=o.parseULong(),r.achVendID=String.fromCharCode(o.parseByte(),o.parseByte(),o.parseByte(),o.parseByte()),r.fsSelection=o.parseUShort(),r.usFirstCharIndex=o.parseUShort(),r.usLastCharIndex=o.parseUShort(),r.sTypoAscender=o.parseShort(),r.sTypoDescender=o.parseShort(),r.sTypoLineGap=o.parseShort(),r.usWinAscent=o.parseUShort(),r.usWinDescent=o.parseUShort(),1<=r.version&&(r.ulCodePageRange1=o.parseULong(),r.ulCodePageRange2=o.parseULong()),2<=r.version&&(r.sxHeight=o.parseShort(),r.sCapHeight=o.parseShort(),r.usDefaultChar=o.parseUShort(),r.usBreakChar=o.parseUShort(),r.usMaxContent=o.parseUShort()),r},make:function(e){return new S.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:ht,getUnicodeRange:function(e){for(var t=0;t<ht.length;t+=1){var r=ht[t];if(e>=r.begin&&e<r.end)return t}return -1}};var pt={parse:function(e,t){var r={},o=new R.Parser(e,t);switch(r.version=o.parseVersion(),r.italicAngle=o.parseFixed(),r.underlinePosition=o.parseShort(),r.underlineThickness=o.parseShort(),r.isFixedPitch=o.parseULong(),r.minMemType42=o.parseULong(),r.maxMemType42=o.parseULong(),r.minMemType1=o.parseULong(),r.maxMemType1=o.parseULong(),r.version){case 1:r.names=c.slice();break;case 2:r.numberOfGlyphs=o.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var n=0;n<r.numberOfGlyphs;n++)r.glyphNameIndex[n]=o.parseUShort();r.names=[];for(var s,i=0;i<r.numberOfGlyphs;i++)r.glyphNameIndex[i]>=c.length&&(s=o.parseChar(),r.names.push(o.parseString(s)));break;case 2.5:r.numberOfGlyphs=o.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var a=0;a<r.numberOfGlyphs;a++)r.offset[a]=o.parseChar();}return r},make:function(){return new S.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},o=new Array(9),s=(o[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(u.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(u.coverage),substitute:this.parseOffset16List()}:void L.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},o[2]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(u.coverage),sequences:this.parseListOfLists()}},o[3]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(u.coverage),alternateSets:this.parseListOfLists()}},o[4]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(u.coverage),ligatureSets:this.parseListOfLists(function(){return {ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:u.uShort,lookupListIndex:u.uShort});o[5]=function(){var e,t,r=this.offset+this.relativeOffset,o=this.parseUShort();return 1===o?{substFormat:o,coverage:this.parsePointer(u.coverage),ruleSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return {input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,s)}})}:2===o?{substFormat:o,coverage:this.parsePointer(u.coverage),classDef:this.parsePointer(u.classDef),classSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return {classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,s)}})}:3===o?(e=this.parseUShort(),t=this.parseUShort(),{substFormat:o,coverages:this.parseList(e,u.pointer(u.coverage)),lookupRecords:this.parseRecordList(t,s)}):void L.assert(!1,"0x"+r.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},o[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(u.coverage),chainRuleSets:this.parseListOfLists(function(){return {backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(s)}})}:2===t?{substFormat:2,coverage:this.parsePointer(u.coverage),backtrackClassDef:this.parsePointer(u.classDef),inputClassDef:this.parsePointer(u.classDef),lookaheadClassDef:this.parsePointer(u.classDef),chainClassSet:this.parseListOfLists(function(){return {backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(s)}})}:3===t?{substFormat:3,backtrackCoverage:this.parseList(u.pointer(u.coverage)),inputCoverage:this.parseList(u.pointer(u.coverage)),lookaheadCoverage:this.parseList(u.pointer(u.coverage)),lookupRecords:this.parseRecordList(s)}:void L.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},o[7]=function(){var e=this.parseUShort(),e=(L.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),t=new u(this.data,this.offset+this.parseULong());return {substFormat:1,lookupType:e,extension:o[e].call(t)}},o[8]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(u.coverage),backtrackCoverage:this.parseList(u.pointer(u.coverage)),lookaheadCoverage:this.parseList(u.pointer(u.coverage)),substitutes:this.parseUShortList()}};var mt=new Array(9);mt[1]=function(e){return 1===e.substFormat?new S.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new S.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new S.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new S.Coverage(e.coverage)}].concat(S.ushortList("substitute",e.substitute)))},mt[3]=function(e){return L.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new S.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new S.Coverage(e.coverage)}].concat(S.tableList("altSet",e.alternateSets,function(e){return new S.Table("alternateSetTable",S.ushortList("alternate",e))})))},mt[4]=function(e){return L.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new S.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new S.Coverage(e.coverage)}].concat(S.tableList("ligSet",e.ligatureSets,function(e){return new S.Table("ligatureSetTable",S.tableList("ligature",e,function(e){return new S.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(S.ushortList("component",e.components,e.components.length+1)))}))})))};var yt={parse:function(e,t){return t=(e=new u(e,t=t||0)).parseVersion(1),L.argument(1===t||1.1===t,"Unsupported GSUB table version."),1===t?{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(o)}:{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(o),variations:e.parseFeatureVariationsList()}},make:function(e){return new S.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new S.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new S.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new S.LookupList(e.lookups,mt)}])}};var gt={parse:function(e,t){for(var r=new R.Parser(e,t),o=r.parseULong(),n=(L.argument(1===o,"Unsupported META table version."),r.parseULong(),r.parseULong(),r.parseULong()),s={},i=0;i<n;i++){var a=r.parseTag(),l=r.parseULong(),u=r.parseULong(),l=m.UTF8(e,t+l,u);s[a]=l;}return s},make:function(e){var t,r=Object.keys(e).length,o="",n=16+12*r,s=new S.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:n},{name:"numTags",type:"ULONG",value:r}]);for(t in e){var i=o.length;o+=e[t],s.fields.push({name:"tag "+t,type:"TAG",value:t}),s.fields.push({name:"offset "+t,type:"ULONG",value:n+i}),s.fields.push({name:"length "+t,type:"ULONG",value:e[t].length});}return s.fields.push({name:"stringPool",type:"CHARARRAY",value:o}),s}};function vt(e){return Math.log(e)/Math.log(2)|0}function bt(e){for(;e.length%4!=0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%=Math.pow(2,32)}function jt(e,t,r,o){return new S.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==o?o:0}])}function _t(e){for(var t=new S.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),r=(t.tables=e,t.numTables=e.length,Math.pow(2,vt(t.numTables))),o=(t.searchRange=16*r,t.entrySelector=vt(r),t.rangeShift=16*t.numTables-t.searchRange,[]),n=[],s=t.sizeOf()+jt().sizeOf()*t.numTables;s%4!=0;)s+=1,n.push({name:"padding",type:"BYTE",value:0});for(var i=0;i<e.length;i+=1){var a=e[i],l=(L.argument(4===a.tableName.length,"Table name"+a.tableName+" is invalid."),a.sizeOf()),u=jt(a.tableName,bt(a.encode()),s,l);for(o.push({name:u.tag+" Table Record",type:"RECORD",value:u}),n.push({name:a.tableName+" table",type:"RECORD",value:a}),s+=l,L.argument(!isNaN(s),"Something went wrong calculating the offset.");s%4!=0;)s+=1,n.push({name:"padding",type:"BYTE",value:0});}return o.sort(function(e,t){return e.value.tag>t.value.tag?1:-1}),t.fields=t.fields.concat(o),t.fields=t.fields.concat(n),t}function xt(e,t,r){for(var o=0;o<t.length;o+=1){var n=e.charToGlyphIndex(t[o]);if(0<n)return e.glyphs.get(n).getMetrics()}return r}var wt={make:_t,fontToTable:function(e){for(var t,r=[],o=[],n=[],s=[],i=[],a=[],l=[],u=0,c=0,d=0,h=0,f=0,p=0;p<e.glyphs.length;p+=1){var m=e.glyphs.get(p),y=0|m.unicode;if(isNaN(m.advanceWidth))throw new Error("Glyph "+m.name+" ("+p+"): advanceWidth is not a number.");(y<t||void 0===t)&&0<y&&(t=y),u<y&&(u=y);var y=ft.getUnicodeRange(y);if(y<32)c|=1<<y;else if(y<64)d|=1<<y-32;else if(y<96)h|=1<<y-64;else {if(!(y<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");f|=1<<y-96;}".notdef"!==m.name&&(y=m.getMetrics(),r.push(y.xMin),o.push(y.yMin),n.push(y.xMax),s.push(y.yMax),a.push(y.leftSideBearing),l.push(y.rightSideBearing),i.push(m.advanceWidth));}var g,v={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,o),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,s),advanceWidthMax:Math.max.apply(null,i),advanceWidthAvg:function(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}(i),minLeftSideBearing:Math.min.apply(null,a),maxLeftSideBearing:Math.max.apply(null,a),minRightSideBearing:Math.min.apply(null,l)},b=(v.ascender=e.ascender,v.descender=e.descender,Ze.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:v.xMin,yMin:v.yMin,xMax:v.xMax,yMax:v.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp})),j=Qe.make({ascender:v.ascender,descender:v.descender,advanceWidthMax:v.advanceWidthMax,minLeftSideBearing:v.minLeftSideBearing,minRightSideBearing:v.minRightSideBearing,xMaxExtent:v.maxLeftSideBearing+(v.xMax-v.xMin),numberOfHMetrics:e.glyphs.length}),_=$e.make(e.glyphs.length),x=ft.make({xAvgCharWidth:Math.round(v.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:u,ulUnicodeRange1:c,ulUnicodeRange2:d,ulUnicodeRange3:h,ulUnicodeRange4:f,fsSelection:e.tables.os2.fsSelection,sTypoAscender:v.ascender,sTypoDescender:v.descender,sTypoLineGap:0,usWinAscent:v.yMax,usWinDescent:Math.abs(v.yMin),ulCodePageRange1:1,sxHeight:xt(e,"xyvw",{yMax:Math.round(v.ascender/2)}).yMax,sCapHeight:xt(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",v).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),w=Je.make(e.glyphs),S=we.make(e.glyphs),T=e.getEnglishName("fontFamily"),M=e.getEnglishName("fontSubfamily"),E=T+" "+M,k=(k=e.getEnglishName("postScriptName"))||T.replace(/\s/g,"")+"-"+M,C={};for(g in e.names)C[g]=e.names[g];C.uniqueID||(C.uniqueID={en:e.getEnglishName("manufacturer")+":"+E}),C.postScriptName||(C.postScriptName={en:k}),C.preferredFamily||(C.preferredFamily=e.names.fontFamily),C.preferredSubfamily||(C.preferredSubfamily=e.names.fontSubfamily);var O=[],P=dt.make(C,O),O=0<O.length?Ke.make(O):void 0,A=pt.make(),E=Ye.make(e.glyphs,{version:e.getEnglishName("version"),fullName:E,familyName:T,weightName:M,postScriptName:k,unitsPerEm:e.unitsPerEm,fontBBox:[0,v.yMin,v.ascender,v.advanceWidthMax]}),T=e.metas&&0<Object.keys(e.metas).length?gt.make(e.metas):void 0,M=[b,j,_,x,P,S,A,E,w];O&&M.push(O),e.tables.gsub&&M.push(yt.make(e.tables.gsub)),T&&M.push(T);for(var D=bt((k=_t(M)).encode()),L=k.fields,R=!1,I=0;I<L.length;I+=1)if("head table"===L[I].name){L[I].value.checkSumAdjustment=2981146554-D,R=!0;break}if(R)return k;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:bt};function St(e,t){for(var r=0,o=e.length-1;r<=o;){var n=r+o>>>1,s=e[n].tag;if(s===t)return n;s<t?r=1+n:o=n-1;}return -r-1}function Tt(e,t){for(var r=0,o=e.length-1;r<=o;){var n=r+o>>>1,s=e[n];if(s===t)return n;s<t?r=1+n:o=n-1;}return -r-1}function Mt(e,t){for(var r=0,o=e.length-1;r<=o;){var n,s=r+o>>>1,i=(n=e[s]).start;if(i===t)return n;i<t?r=1+s:o=s-1;}if(0<r)return t>(n=e[r-1]).end?0:n}function Et(e,t){this.font=e,this.tableName=t;}function kt(e){Et.call(this,e,"gpos");}function i(e){Et.call(this,e,"gsub");}function Ct(e,t,r){for(var o=e.subtables,n=0;n<o.length;n++){var s=o[n];if(s.substFormat===t)return s}if(r)return o.push(r),r}function Ot(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),o=0;o<e.length;++o)r[o]=e[o];return t}function _(e,t){if(!e)throw t}function Pt(e,t,r,o,n){var s=0<(t&o)?(s=e.parseByte(),r+(s=0==(t&n)?-s:s)):0<(t&n)?r:r+e.parseShort();return s}function At(e,t,r){var o,n=new R.Parser(t,r);if(e.numberOfContours=n.parseShort(),e._xMin=n.parseShort(),e._yMin=n.parseShort(),e._xMax=n.parseShort(),e._yMax=n.parseShort(),0<e.numberOfContours){for(var s=e.endPointIndices=[],i=0;i<e.numberOfContours;i+=1)s.push(n.parseUShort());e.instructionLength=n.parseUShort(),e.instructions=[];for(var a=0;a<e.instructionLength;a+=1)e.instructions.push(n.parseByte());for(var l=s[s.length-1]+1,u=[],c=0;c<l;c+=1)if(o=n.parseByte(),u.push(o),0<(8&o))for(var d=n.parseByte(),h=0;h<d;h+=1)u.push(o),c+=1;if(L.argument(u.length===l,"Bad flags."),0<s.length){var f,p=[];if(0<l){for(var m=0;m<l;m+=1)o=u[m],(f={}).onCurve=!!(1&o),f.lastPointOfContour=0<=s.indexOf(m),p.push(f);for(var y=0,g=0;g<l;g+=1)o=u[g],(f=p[g]).x=Pt(n,o,y,2,16),y=f.x;for(var v=0,b=0;b<l;b+=1)o=u[b],(f=p[b]).y=Pt(n,o,v,4,32),v=f.y;}e.points=p;}else e.points=[];}else if(0===e.numberOfContours)e.points=[];else {e.isComposite=!0,e.points=[],e.components=[];for(var j=!0;j;){u=n.parseUShort();var _={glyphIndex:n.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&u)?0<(2&u)?(_.dx=n.parseShort(),_.dy=n.parseShort()):_.matchedPoints=[n.parseUShort(),n.parseUShort()]:0<(2&u)?(_.dx=n.parseChar(),_.dy=n.parseChar()):_.matchedPoints=[n.parseByte(),n.parseByte()],0<(8&u)?_.xScale=_.yScale=n.parseF2Dot14():0<(64&u)?(_.xScale=n.parseF2Dot14(),_.yScale=n.parseF2Dot14()):0<(128&u)&&(_.xScale=n.parseF2Dot14(),_.scale01=n.parseF2Dot14(),_.scale10=n.parseF2Dot14(),_.yScale=n.parseF2Dot14()),e.components.push(_),j=!!(32&u);}if(256&u){e.instructionLength=n.parseUShort(),e.instructions=[];for(var x=0;x<e.instructionLength;x+=1)e.instructions.push(n.parseByte());}}}function Lt(e,t){for(var r=[],o=0;o<e.length;o+=1){var n=e[o],n={x:t.xScale*n.x+t.scale01*n.y+t.dx,y:t.scale10*n.x+t.yScale*n.y+t.dy,onCurve:n.onCurve,lastPointOfContour:n.lastPointOfContour};r.push(n);}return r}function Rt(e){var t=new h;if(e)for(var r=function(e){for(var t=[],r=[],o=0;o<e.length;o+=1){var n=e[o];r.push(n),n.lastPointOfContour&&(t.push(r),r=[]);}return L.argument(0===r.length,"There are still points left in the current contour."),t}(e),o=0;o<r.length;++o){var n,s=r[o],i=s[s.length-1],a=s[0];i.onCurve?t.moveTo(i.x,i.y):a.onCurve?t.moveTo(a.x,a.y):(n={x:.5*(i.x+a.x),y:.5*(i.y+a.y)},t.moveTo(n.x,n.y));for(var l=0;l<s.length;++l){var u,c=i,i=a,a=s[(l+1)%s.length];i.onCurve?t.lineTo(i.x,i.y):(u=a,c.onCurve||(i.x,c.x,i.y,c.y),a.onCurve||(u={x:.5*(i.x+a.x),y:.5*(i.y+a.y)}),t.quadraticCurveTo(i.x,i.y,u.x,u.y));}t.closePath();}return t}function It(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var o=t.components[r],n=e.get(o.glyphIndex);if(n.getPath(),n.points){var s=void 0;if(void 0===o.matchedPoints)s=Lt(n.points,o);else {if(o.matchedPoints[0]>t.points.length-1||o.matchedPoints[1]>n.points.length-1)throw Error("Matched points out of range in "+t.name);var i=t.points[o.matchedPoints[0]],a=n.points[o.matchedPoints[1]],o={xScale:o.xScale,scale01:o.scale01,scale10:o.scale10,yScale:o.yScale,dx:0,dy:0},a=Lt([a],o)[0];o.dx=i.x-a.x,o.dy=i.y-a.y,s=Lt(n.points,o);}t.points=t.points.concat(s);}}return Rt(t.points)}(kt.prototype=Et.prototype={searchTag:St,binSearch:Tt,getTable:function(e){var t=this.font.tables[this.tableName];return t=!t&&e?this.font.tables[this.tableName]=this.createDefaultTable():t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,r=0;r<e.scripts.length;r++){var o=e.scripts[r].tag;if("DFLT"===o)return o;"latn"===o&&(t=!0);}return t?"latn":void 0}},getScriptTable:function(e,t){var r,o=this.getTable(t);if(o)return r=o.scripts,0<=(o=St(o.scripts,e=e||"DFLT"))?r[o].script:t?(r.splice(-1-o,0,t={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),t.script):void 0},getLangSysTable:function(e,t,r){var o,e=this.getScriptTable(e,r);if(e)return t&&"dflt"!==t&&"DFLT"!==t?0<=(o=St(e.langSysRecords,t))?e.langSysRecords[o].langSys:r?(e.langSysRecords.splice(-1-o,0,r={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),r.langSys):void 0:e.defaultLangSys},getFeatureTable:function(e,t,r,o){e=this.getLangSysTable(e,t,o);if(e){for(var n,s=e.featureIndexes,i=this.font.tables[this.tableName].features,a=0;a<s.length;a++)if((n=i[s[a]]).tag===r)return n.feature;if(o)return t=i.length,L.assert(0===t||r>=i[t-1].tag,"Features must be added in alphabetical order."),i.push(n={tag:r,feature:{params:0,lookupListIndexes:[]}}),s.push(t),n.feature}},getLookupTables:function(e,t,r,o,n){var e=this.getFeatureTable(e,t,r,n),s=[];if(e){for(var i,a=e.lookupListIndexes,l=this.font.tables[this.tableName].lookups,u=0;u<a.length;u++)(i=l[a[u]]).lookupType===o&&s.push(i);if(0===s.length&&n)return t=l.length,l.push(i={lookupType:o,lookupFlag:0,subtables:[],markFilteringSet:void 0}),a.push(t),[i]}return s},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var r=Mt(e.ranges,t);return r?r.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var r=Tt(e.glyphs,t);return 0<=r?r:-1;case 2:r=Mt(e.ranges,t);return r?r.index+t-r.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],r=e.ranges,o=0;o<r.length;o++)for(var n=r[o],s=n.start,i=n.end,a=s;a<=i;a++)t.push(a);return t}}).init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e);},kt.prototype.getKerningValue=function(e,t,r){for(var o=0;o<e.length;o++)for(var n=e[o].subtables,s=0;s<n.length;s++){var i=n[s],a=this.getCoverageIndex(i.coverage,t);if(!(a<0))switch(i.posFormat){case 1:for(var l=i.pairSets[a],u=0;u<l.length;u++){var c=l[u];if(c.secondGlyph===r)return c.value1&&c.value1.xAdvance||0}break;case 2:var d=this.getGlyphClass(i.classDef1,t),h=this.getGlyphClass(i.classDef2,r),d=i.classRecords[d][h];return d.value1&&d.value1.xAdvance||0}}return 0},kt.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},(i.prototype=Et.prototype).createDefaultTable=function(){return {version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},i.prototype.getSingle=function(e,t,r){for(var o=[],n=this.getLookupTables(t,r,e,1),s=0;s<n.length;s++)for(var i=n[s].subtables,a=0;a<i.length;a++){var l=i[a],u=this.expandCoverage(l.coverage),c=void 0;if(1===l.substFormat)for(var d=l.deltaGlyphId,c=0;c<u.length;c++){var h=u[c];o.push({sub:h,by:h+d});}else {var f=l.substitute;for(c=0;c<u.length;c++)o.push({sub:u[c],by:f[c]});}}return o},i.prototype.getAlternates=function(e,t,r){for(var o=[],n=this.getLookupTables(t,r,e,3),s=0;s<n.length;s++)for(var i=n[s].subtables,a=0;a<i.length;a++)for(var l=i[a],u=this.expandCoverage(l.coverage),c=l.alternateSets,d=0;d<u.length;d++)o.push({sub:u[d],by:c[d]});return o},i.prototype.getLigatures=function(e,t,r){for(var o=[],n=this.getLookupTables(t,r,e,4),s=0;s<n.length;s++)for(var i=n[s].subtables,a=0;a<i.length;a++)for(var l=i[a],u=this.expandCoverage(l.coverage),c=l.ligatureSets,d=0;d<u.length;d++)for(var h=u[d],f=c[d],p=0;p<f.length;p++){var m=f[p];o.push({sub:[h].concat(m.components),by:m.ligGlyph});}return o},i.prototype.addSingle=function(e,t,r,o){r=Ct(this.getLookupTables(r,o,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),L.assert(1===r.coverage.format,"Ligature: unable to modify coverage table format "+r.coverage.format),o=t.sub,e=this.binSearch(r.coverage.glyphs,o);e<0&&(r.coverage.glyphs.splice(e=-1-e,0,o),r.substitute.splice(e,0,0)),r.substitute[e]=t.by;},i.prototype.addAlternate=function(e,t,r,o){r=Ct(this.getLookupTables(r,o,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),L.assert(1===r.coverage.format,"Ligature: unable to modify coverage table format "+r.coverage.format),o=t.sub,e=this.binSearch(r.coverage.glyphs,o);e<0&&(r.coverage.glyphs.splice(e=-1-e,0,o),r.alternateSets.splice(e,0,0)),r.alternateSets[e]=t.by;},i.prototype.addLigature=function(e,t,r,o){var r=this.getLookupTables(r,o,e,4,!0)[0],o=r.subtables[0],e=(o||(r.subtables[0]=o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),L.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format),t.sub[0]),n=t.sub.slice(1),r={ligGlyph:t.by,components:n},t=this.binSearch(o.coverage.glyphs,e);if(0<=t){for(var s=o.ligatureSets[t],i=0;i<s.length;i++)if(function(e,t){var r=e.length;if(r===t.length){for(var o=0;o<r;o++)if(e[o]!==t[o])return;return 1}}(s[i].components,n))return;s.push(r);}else o.coverage.glyphs.splice(t=-1-t,0,e),o.ligatureSets.splice(t,0,[r]);},i.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r)}},i.prototype.add=function(e,t,r,o){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,o);switch(e){case"aalt":case"salt":return "number"==typeof t.by?this.addSingle(e,t,r,o):this.addAlternate(e,t,r,o);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,o)}};var Dt={getPath:Rt,parse:function(e,t,r,o){for(var n=new p.GlyphSet(o),s=0;s<r.length-1;s+=1){var i=r[s];i!==r[s+1]?n.push(s,p.ttfGlyphLoader(o,s,At,e,t+i,It)):n.push(s,p.glyphLoader(o,s));}return n}};function Ft(e){this.font=e,this.getCommands=function(e){return Dt.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0;}function Ut(e){return e}function Nt(e){return Math.sign(e)*Math.round(Math.abs(e))}function Bt(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Gt(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Vt(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function zt(e){return Math.sign(e)*Math.floor(Math.abs(e))}function Ht(e){var t=this.srPeriod,r=this.srPhase,o=1;return e<0&&(e=-e,o=-1),e+=this.srThreshold-r,e=Math.trunc(e/t)*t,(e+=r)<0?r*o:e*o}var x={x:1,y:0,axis:"x",distance:function(e,t,r,o){return (r?e.xo:e.x)-(o?t.xo:t.x)},interpolate:function(e,t,r,o){var n,s,i,a,l,u,c;if(!o||o===this)return n=e.xo-t.xo,s=e.xo-r.xo,l=t.x-t.xo,u=r.x-r.xo,0===(c=(i=Math.abs(n))+(a=Math.abs(s)))?void(e.x=e.xo+(l+u)/2):void(e.x=e.xo+(l*a+u*i)/c);n=o.distance(e,t,!0,!0),s=o.distance(e,r,!0,!0),l=o.distance(t,t,!1,!0),u=o.distance(r,r,!1,!0),0===(c=(i=Math.abs(n))+(a=Math.abs(s)))?x.setRelative(e,e,(l+u)/2,o,!0):x.setRelative(e,e,(l*a+u*i)/c,o,!0);},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,r,o,n){var s,i;o&&o!==this?(s=n?t.xo:t.x,i=n?t.yo:t.y,s+=r*o.x,i+=r*o.y,e.x=s+(e.y-i)/o.normalSlope):e.x=(n?t.xo:t.x)+r;},slope:0,touch:function(e){e.xTouched=!0;},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1;}},T={x:0,y:1,axis:"y",distance:function(e,t,r,o){return (r?e.yo:e.y)-(o?t.yo:t.y)},interpolate:function(e,t,r,o){var n,s,i,a,l,u,c;if(!o||o===this)return n=e.yo-t.yo,s=e.yo-r.yo,l=t.y-t.yo,u=r.y-r.yo,0===(c=(i=Math.abs(n))+(a=Math.abs(s)))?void(e.y=e.yo+(l+u)/2):void(e.y=e.yo+(l*a+u*i)/c);n=o.distance(e,t,!0,!0),s=o.distance(e,r,!0,!0),l=o.distance(t,t,!1,!0),u=o.distance(r,r,!1,!0),0===(c=(i=Math.abs(n))+(a=Math.abs(s)))?T.setRelative(e,e,(l+u)/2,o,!0):T.setRelative(e,e,(l*a+u*i)/c,o,!0);},normalSlope:0,setRelative:function(e,t,r,o,n){var s,i;o&&o!==this?(s=n?t.xo:t.x,i=n?t.yo:t.y,s+=r*o.x,i+=r*o.y,e.y=i+o.normalSlope*(e.x-s)):e.y=(n?t.yo:t.y)+r;},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0;},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1;}};function Wt(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this);}function qt(e,t){var r=Math.sqrt(e*e+t*t);return t/=r,1===(e/=r)&&0===t?x:0===e&&1===t?T:new Wt(e,t)}function M(e,t,r,o){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=r,this.onCurve=o,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this);}Object.freeze(x),Object.freeze(T),Wt.prototype.distance=function(e,t,r,o){return this.x*x.distance(e,t,r,o)+this.y*T.distance(e,t,r,o)},Wt.prototype.interpolate=function(e,t,r,o){var n=o.distance(e,t,!0,!0),s=o.distance(e,r,!0,!0),t=o.distance(t,t,!1,!0),r=o.distance(r,r,!1,!0),n=Math.abs(n),s=Math.abs(s),i=n+s;0===i?this.setRelative(e,e,(t+r)/2,o,!0):this.setRelative(e,e,(t*s+r*n)/i,o,!0);},Wt.prototype.setRelative=function(e,t,r,o,n){var s=n?t.xo:t.x,n=n?t.yo:t.y,t=s+r*(o=o||this).x,s=n+r*o.y,n=o.normalSlope,r=this.slope,o=e.x,i=e.y;e.x=(r*o-n*t+s-i)/(r-n),e.y=r*(e.x-o)+i;},Wt.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0;},M.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},M.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Xt=Object.freeze(new M(0,0)),Yt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function E(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=x,this.round=Nt;}}function Zt(e){for(var t=e.tZone=new Array(e.gZone.length),r=0;r<t.length;r++)t[r]=new M(0,0);}function Qt(e,t){var r,o=e.prog,n=e.ip,s=1;do{if(88===(r=o[++n]))s++;else if(89===r)s--;else if(64===r)n+=o[n+1]+1;else if(65===r)n+=2*o[n+1]+1;else if(176<=r&&r<=183)n+=r-176+1;else if(184<=r&&r<=191)n+=2*(r-184+1);else if(t&&1===s&&27===r)break}while(0<s);e.ip=n;}function Jt(e,t){j.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e;}function Kt(e,t){j.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e;}function $t(e,t){j.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e;}function er(e,t){var r,o=t.stack,n=o.pop(),o=o.pop(),s=t.z2[n],i=t.z1[o];j.DEBUG&&console.log("SPVTL["+e+"]",n,o),n=e?(r=s.y-i.y,i.x-s.x):(r=i.x-s.x,i.y-s.y),t.pv=t.dpv=qt(r,n);}function tr(e,t){var r,o=t.stack,n=o.pop(),o=o.pop(),s=t.z2[n],i=t.z1[o];j.DEBUG&&console.log("SFVTL["+e+"]",n,o),n=e?(r=s.y-i.y,i.x-s.x):(r=i.x-s.x,i.y-s.y),t.fv=qt(r,n);}function rr(e){j.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop();}function or(e,t){var r=t.stack.pop(),o=t.z0[r],n=t.fv,s=t.pv,i=(j.DEBUG&&console.log(t.step,"MDAP["+e+"]",r),s.distance(o,Xt));e&&(i=t.round(i)),n.setRelative(o,Xt,i,s),n.touch(o),t.rp0=t.rp1=r;}function nr(e,t){var r,o,n,s=t.z2,i=s.length-2;j.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var a=0;a<i;a++)r=s[a],e.touched(r)||(o=r.prevTouched(e))!==r&&(o===(n=r.nextTouched(e))&&e.setRelative(r,r,e.distance(o,o,!1,!0),e,!0),e.interpolate(r,o,n,e));}function sr(e,t){for(var r=t.stack,o=e?t.rp1:t.rp2,n=(e?t.z0:t.z1)[o],s=t.fv,i=t.pv,a=t.loop,l=t.z2;a--;){var u=r.pop(),c=l[u],d=i.distance(n,n,!1,!0);s.setRelative(c,c,d,i),s.touch(c),j.DEBUG&&console.log(t.step,(1<t.loop?"loop "+(t.loop-a)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",u);}t.loop=1;}function ir(e,t){for(var r=t.stack,o=e?t.rp1:t.rp2,n=(e?t.z0:t.z1)[o],s=t.fv,i=t.pv,o=r.pop(),a=t.z2[t.contours[o]],l=a,u=(j.DEBUG&&console.log(t.step,"SHC["+e+"]",o),i.distance(n,n,!1,!0));l!==n&&s.setRelative(l,l,u,i),(l=l.nextPointOnContour)!==a;);}function ar(e,t){var r,o,n=t.stack,s=e?t.rp1:t.rp2,s=(e?t.z0:t.z1)[s],i=t.fv,a=t.pv,n=n.pop();switch(j.DEBUG&&console.log(t.step,"SHZ["+e+"]",n),n){case 0:r=t.tZone;break;case 1:r=t.gZone;break;default:throw new Error("Invalid zone")}for(var l=a.distance(s,s,!1,!0),u=r.length-2,c=0;c<u;c++)o=r[c],i.setRelative(o,o,l,a);}function lr(e,t){var r=t.stack,o=r.pop()/64,r=r.pop(),n=t.z1[r],s=t.z0[t.rp0],i=t.fv,a=t.pv;i.setRelative(n,s,o,a),i.touch(n),j.DEBUG&&console.log(t.step,"MSIRP["+e+"]",o,r),t.rp1=t.rp0,t.rp2=r,e&&(t.rp0=r);}function ur(e,t){var r=t.stack,o=r.pop(),r=r.pop(),n=t.z0[r],s=t.fv,i=t.pv,a=t.cvt[o],o=(j.DEBUG&&console.log(t.step,"MIAP["+e+"]",o,"(",a,")",r),i.distance(n,Xt));e&&(Math.abs(o-a)<t.cvCutIn&&(o=a),o=t.round(o)),s.setRelative(n,Xt,o,i),0===t.zp0&&(n.xo=n.x,n.yo=n.y),s.touch(n),t.rp0=t.rp1=r;}function cr(e,t){var r=t.stack,o=r.pop(),n=t.z2[o];j.DEBUG&&console.log(t.step,"GC["+e+"]",o),r.push(64*t.dpv.distance(n,Xt,e,!1));}function dr(e,t){var r=t.stack,o=r.pop(),r=r.pop(),n=t.z1[o],s=t.z0[r],s=t.dpv.distance(s,n,e,e);j.DEBUG&&console.log(t.step,"MD["+e+"]",o,r,"->",s),t.stack.push(Math.round(64*s));}function hr(e,t){var r=t.stack,o=r.pop(),n=t.fv,s=t.pv,i=t.ppem,a=t.deltaBase+16*(e-1),l=t.deltaShift,u=t.z0;j.DEBUG&&console.log(t.step,"DELTAP["+e+"]",o,r);for(var c=0;c<o;c++){var d=r.pop(),h=r.pop();a+((240&h)>>4)===i&&(0<=(h=(15&h)-8)&&h++,j.DEBUG&&console.log(t.step,"DELTAPFIX",d,"by",h*l),d=u[d],n.setRelative(d,d,h*l,s));}}function fr(e,t){var r=t.stack,o=r.pop();j.DEBUG&&console.log(t.step,"ROUND[]"),r.push(64*t.round(o/64));}function pr(e,t){var r=t.stack,o=r.pop(),n=t.ppem,s=t.deltaBase+16*(e-1),i=t.deltaShift;j.DEBUG&&console.log(t.step,"DELTAC["+e+"]",o,r);for(var a=0;a<o;a++){var l=r.pop(),u=r.pop();s+((240&u)>>4)===n&&(0<=(u=(15&u)-8)&&u++,u=u*i,j.DEBUG&&console.log(t.step,"DELTACFIX",l,"by",u),t.cvt[l]+=u);}}function mr(e,t){var r,o=t.stack,n=o.pop(),o=o.pop(),s=t.z2[n],i=t.z1[o];j.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",n,o),n=e?(r=s.y-i.y,i.x-s.x):(r=i.x-s.x,i.y-s.y),t.dpv=qt(r,n);}function k(e,t){var r=t.stack,o=t.prog,n=t.ip;j.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var s=0;s<e;s++)r.push(o[++n]);t.ip=n;}function C(e,t){var r=t.ip,o=t.prog,n=t.stack;j.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var s=0;s<e;s++){var i=o[++r]<<8|o[++r];32768&i&&(i=-(1+(65535^i))),n.push(i);}t.ip=r;}function O(e,t,r,o,n,s){var i,a,l=s.stack,u=e&&l.pop(),l=l.pop(),c=s.rp0,c=s.z0[c],d=s.z1[l],h=s.minDis,f=s.fv,p=s.dpv,m=i=p.distance(d,c,!0,!0),y=0<=m?1:-1;m=Math.abs(m),e&&(a=s.cvt[u],o&&Math.abs(m-a)<s.cvCutIn&&(m=a)),r&&m<h&&(m=h),o&&(m=s.round(m)),f.setRelative(d,c,y*m,p),f.touch(d),j.DEBUG&&console.log(s.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(r?">":"_")+(o?"R":"_")+(0===n?"Gr":1===n?"Bl":2===n?"Wh":"")+"]",e?u+"("+s.cvt[u]+","+a+")":"",l,"(d =",i,"->",y*m,")"),s.rp1=s.rp0,s.rp2=l,t&&(s.rp0=l);}Ft.prototype.exec=function(e,t){if("number"!=typeof t)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var r=this.font,o=this._prepState;if(!o||o.ppem!==t){var n=this._fpgmState;if(!n){E.prototype=Yt,(n=this._fpgmState=new E("fpgm",r.tables.fpgm)).funcs=[],n.font=r,j.DEBUG&&(console.log("---EXEC FPGM---"),n.step=-1);try{vr(n);}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}E.prototype=n,(o=this._prepState=new E("prep",r.tables.prep)).ppem=t;var s=r.tables.cvt;if(s)for(var i=o.cvt=new Array(s.length),a=t/r.unitsPerEm,l=0;l<s.length;l++)i[l]=s[l]*a;else o.cvt=[];j.DEBUG&&(console.log("---EXEC PREP---"),o.step=-1);try{vr(o);}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2;}}if(!(1<this._errorState))try{return yr(e,o)}catch(e){this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),this._errorState=1;}}};var yr=function(e,t){var r=t.ppem/t.font.unitsPerEm,o=r,n=e.components;if(E.prototype=t,n){for(var s=t.font,i=[],a=[],l=0;l<n.length;l++){var u=n[l],c=s.glyphs.get(u.glyphIndex),d=new E("glyf",c.instructions);j.DEBUG&&(console.log("---EXEC COMP "+l+"---"),d.step=-1),gr(c,d,r,o);for(var h=Math.round(u.dx*r),f=Math.round(u.dy*o),p=d.gZone,m=d.contours,y=0;y<p.length;y++){var g=p[y];g.xTouched=g.yTouched=!1,g.xo=g.x=g.x+h,g.yo=g.y=g.y+f;}var v=i.length;i.push.apply(i,p);for(var b=0;b<m.length;b++)a.push(m[b]+v);}e.instructions&&!d.inhibitGridFit&&((d=new E("glyf",e.instructions)).gZone=d.z0=d.z1=d.z2=i,d.contours=a,i.push(new M(0,0),new M(Math.round(e.advanceWidth*r),0)),j.DEBUG&&(console.log("---EXEC COMPOSITE---"),d.step=-1),vr(d),i.length-=2);}else d=new E("glyf",e.instructions),j.DEBUG&&(console.log("---EXEC GLYPH---"),d.step=-1),gr(e,d,r,o),i=d.gZone;return i},gr=function(e,t,r,o){for(var n,s,i,a=e.points||[],l=a.length,u=t.gZone=t.z0=t.z1=t.z2=[],c=t.contours=[],d=0;d<l;d++)n=a[d],u[d]=new M(n.x*r,n.y*o,n.lastPointOfContour,n.onCurve);for(var h=0;h<l;h++)n=u[h],s||(s=n,c.push(h)),n.lastPointOfContour?((n.nextPointOnContour=s).prevPointOnContour=n,s=void 0):(i=u[h+1],(n.nextPointOnContour=i).prevPointOnContour=n);if(!t.inhibitGridFit){if(j.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var f=0;f<l;f++)console.log(f,u[f].x,u[f].y);}if(u.push(new M(0,0),new M(Math.round(e.advanceWidth*r),0)),vr(t),u.length-=2,j.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var p=0;p<l;p++)console.log(p,u[p].x,u[p].y);}}},vr=function(e){var t=e.prog;if(t){var r,o=t.length;for(e.ip=0;e.ip<o;e.ip++){if(j.DEBUG&&e.step++,!(r=br[t[e.ip]]))throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));r(e);}}},br=[Jt.bind(void 0,T),Jt.bind(void 0,x),Kt.bind(void 0,T),Kt.bind(void 0,x),$t.bind(void 0,T),$t.bind(void 0,x),er.bind(void 0,0),er.bind(void 0,1),tr.bind(void 0,0),tr.bind(void 0,1),function(e){var t=(r=e.stack).pop(),r=r.pop();j.DEBUG&&console.log(e.step,"SPVFS[]",t,r),e.pv=e.dpv=qt(r,t);},function(e){var t=(r=e.stack).pop(),r=r.pop();j.DEBUG&&console.log(e.step,"SPVFS[]",t,r),e.fv=qt(r,t);},function(e){var t=e.stack,r=e.pv;j.DEBUG&&console.log(e.step,"GPV[]"),t.push(16384*r.x),t.push(16384*r.y);},function(e){var t=e.stack,r=e.fv;j.DEBUG&&console.log(e.step,"GFV[]"),t.push(16384*r.x),t.push(16384*r.y);},function(e){e.fv=e.pv,j.DEBUG&&console.log(e.step,"SFVTPV[]");},function(e){var t=(s=e.stack).pop(),r=s.pop(),o=s.pop(),n=s.pop(),s=s.pop(),i=e.z0,a=e.z1,l=i[t],i=i[r],u=a[o],a=a[n],e=e.z2[s],t=(j.DEBUG&&console.log("ISECT[], ",t,r,o,n,s),l.x),r=l.y,o=i.x,n=i.y,s=u.x,l=u.y,i=a.x,u=a.y,a=(t-o)*(l-u)-(r-n)*(s-i),c=t*n-r*o,d=s*u-l*i;e.x=(c*(s-i)-d*(t-o))/a,e.y=(c*(l-u)-d*(r-n))/a;},function(e){e.rp0=e.stack.pop(),j.DEBUG&&console.log(e.step,"SRP0[]",e.rp0);},function(e){e.rp1=e.stack.pop(),j.DEBUG&&console.log(e.step,"SRP1[]",e.rp1);},function(e){e.rp2=e.stack.pop(),j.DEBUG&&console.log(e.step,"SRP2[]",e.rp2);},function(e){var t=e.stack.pop();switch(j.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t){case 0:e.tZone||Zt(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(j.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t){case 0:e.tZone||Zt(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(j.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t){case 0:e.tZone||Zt(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(j.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t){case 0:e.tZone||Zt(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),j.DEBUG&&console.log(e.step,"SLOOP[]",e.loop);},function(e){j.DEBUG&&console.log(e.step,"RTG[]"),e.round=Nt;},function(e){j.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Gt;},function(e){var t=e.stack.pop();j.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64;},function(e){j.DEBUG&&console.log(e.step,"ELSE[]"),Qt(e,!1);},function(e){var t=e.stack.pop();j.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1;},function(e){var t=e.stack.pop();j.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64;},void 0,void 0,function(e){var t=e.stack;j.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1]);},rr,function(e){j.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0;},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"SWAP[]"),t.push(r),t.push(o);},function(e){var t=e.stack;j.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length);},function(e){var t=e.stack,r=t.pop();j.DEBUG&&console.log(e.step,"CINDEX[]",r),t.push(t[t.length-r]);},function(e){var t=e.stack,r=t.pop();j.DEBUG&&console.log(e.step,"MINDEX[]",r),t.push(t.splice(t.length-r,1)[0]);},void 0,void 0,void 0,function(e){var t=(o=e.stack).pop(),r=o.pop(),o=(j.DEBUG&&console.log(e.step,"LOOPCALL[]",t,r),e.ip),n=e.prog;e.prog=e.funcs[t];for(var s=0;s<r;s++)vr(e),j.DEBUG&&console.log(++e.step,s+1<r?"next loopcall":"done loopcall",s);e.ip=o,e.prog=n;},function(e){var t=e.stack.pop(),r=(j.DEBUG&&console.log(e.step,"CALL[]",t),e.ip),o=e.prog;e.prog=e.funcs[t],vr(e),e.ip=r,e.prog=o,j.DEBUG&&console.log(++e.step,"returning from",t);},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var t=e.stack,r=e.prog,o=e.ip,t=t.pop(),n=o;for(j.DEBUG&&console.log(e.step,"FDEF[]",t);45!==r[++o];);e.ip=o,e.funcs[t]=r.slice(n+1,o);},void 0,or.bind(void 0,0),or.bind(void 0,1),nr.bind(void 0,T),nr.bind(void 0,x),sr.bind(void 0,0),sr.bind(void 0,1),ir.bind(void 0,0),ir.bind(void 0,1),ar.bind(void 0,0),ar.bind(void 0,1),function(e){for(var t=e.stack,r=e.loop,o=e.fv,n=t.pop()/64,s=e.z2;r--;){var i=t.pop(),a=s[i];j.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",i,n),o.setRelative(a,a,n),o.touch(a);}e.loop=1;},function(e){for(var t=e.stack,r=e.rp1,o=e.rp2,n=e.loop,s=e.z0[r],i=e.z1[o],a=e.fv,l=e.dpv,u=e.z2;n--;){var c=t.pop(),d=u[c];j.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-n)+": ":"")+"IP[]",c,r,"<->",o),a.interpolate(d,s,i,l),a.touch(d);}e.loop=1;},lr.bind(void 0,0),lr.bind(void 0,1),function(e){for(var t=e.stack,r=e.rp0,o=e.z0[r],n=e.loop,s=e.fv,i=e.pv,a=e.z1;n--;){var l=t.pop(),u=a[l];j.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-n)+": ":"")+"ALIGNRP[]",l),s.setRelative(u,o,0,i),s.touch(u);}e.loop=1;},function(e){j.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Bt;},ur.bind(void 0,0),ur.bind(void 0,1),function(e){var t=e.prog,r=e.ip,o=e.stack,n=t[++r];j.DEBUG&&console.log(e.step,"NPUSHB[]",n);for(var s=0;s<n;s++)o.push(t[++r]);e.ip=r;},function(e){var t=e.ip,r=e.prog,o=e.stack,n=r[++t];j.DEBUG&&console.log(e.step,"NPUSHW[]",n);for(var s=0;s<n;s++){var i=r[++t]<<8|r[++t];32768&i&&(i=-(1+(65535^i))),o.push(i);}e.ip=t;},function(e){var t=e.stack,r=(r=e.store)||(e.store=[]),o=t.pop(),t=t.pop();j.DEBUG&&console.log(e.step,"WS",o,t),r[t]=o;},function(e){var t=e.stack,r=e.store,o=t.pop(),e=(j.DEBUG&&console.log(e.step,"RS",o),r&&r[o]||0);t.push(e);},function(e){var t=(r=e.stack).pop(),r=r.pop();j.DEBUG&&console.log(e.step,"WCVTP",t,r),e.cvt[r]=t/64;},function(e){var t=e.stack,r=t.pop();j.DEBUG&&console.log(e.step,"RCVT",r),t.push(64*e.cvt[r]);},cr.bind(void 0,0),cr.bind(void 0,1),void 0,dr.bind(void 0,0),dr.bind(void 0,1),function(e){j.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem);},void 0,function(e){j.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0;},void 0,void 0,function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"LT[]",r,o),t.push(o<r?1:0);},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"LTEQ[]",r,o),t.push(o<=r?1:0);},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"GT[]",r,o),t.push(r<o?1:0);},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"GTEQ[]",r,o),t.push(r<=o?1:0);},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"EQ[]",r,o),t.push(r===o?1:0);},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"NEQ[]",r,o),t.push(r!==o?1:0);},function(e){var t=e.stack,r=t.pop();j.DEBUG&&console.log(e.step,"ODD[]",r),t.push(Math.trunc(r)%2?1:0);},function(e){var t=e.stack,r=t.pop();j.DEBUG&&console.log(e.step,"EVEN[]",r),t.push(Math.trunc(r)%2?0:1);},function(e){var t=e.stack.pop();j.DEBUG&&console.log(e.step,"IF[]",t),t||(Qt(e,!0),j.DEBUG&&console.log(e.step,"EIF[]"));},function(e){j.DEBUG&&console.log(e.step,"EIF[]");},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"AND[]",r,o),t.push(r&&o?1:0);},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"OR[]",r,o),t.push(r||o?1:0);},function(e){var t=e.stack,r=t.pop();j.DEBUG&&console.log(e.step,"NOT[]",r),t.push(r?0:1);},hr.bind(void 0,1),function(e){var t=e.stack.pop();j.DEBUG&&console.log(e.step,"SDB[]",t),e.deltaBase=t;},function(e){var t=e.stack.pop();j.DEBUG&&console.log(e.step,"SDS[]",t),e.deltaShift=Math.pow(.5,t);},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"ADD[]",r,o),t.push(o+r);},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"SUB[]",r,o),t.push(o-r);},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"DIV[]",r,o),t.push(64*o/r);},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"MUL[]",r,o),t.push(o*r/64);},function(e){var t=e.stack,r=t.pop();j.DEBUG&&console.log(e.step,"ABS[]",r),t.push(Math.abs(r));},function(e){var t=e.stack,r=t.pop();j.DEBUG&&console.log(e.step,"NEG[]",r),t.push(-r);},function(e){var t=e.stack,r=t.pop();j.DEBUG&&console.log(e.step,"FLOOR[]",r),t.push(64*Math.floor(r/64));},function(e){var t=e.stack,r=t.pop();j.DEBUG&&console.log(e.step,"CEILING[]",r),t.push(64*Math.ceil(r/64));},fr.bind(void 0,0),fr.bind(void 0,1),fr.bind(void 0,2),fr.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var t=(r=e.stack).pop(),r=r.pop();j.DEBUG&&console.log(e.step,"WCVTF[]",t,r),e.cvt[r]=t*e.ppem/e.font.unitsPerEm;},hr.bind(void 0,2),hr.bind(void 0,3),pr.bind(void 0,1),pr.bind(void 0,2),pr.bind(void 0,3),function(e){var t,r=e.stack.pop();switch(j.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=Ht,192&r){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}e.srThreshold=0===(r&=15)?0:(r/8-.5)*t;},function(e){var t,r=e.stack.pop();switch(j.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=Ht,192&r){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}e.srThreshold=0===(r&=15)?0:(r/8-.5)*t;},void 0,void 0,function(e){j.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Ut;},void 0,function(e){j.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Vt;},function(e){j.DEBUG&&console.log(e.step,"RDTG[]"),e.round=zt;},rr,rr,void 0,void 0,void 0,void 0,void 0,function(e){var t=e.stack.pop();j.DEBUG&&console.log(e.step,"SCANCTRL[]",t);},mr.bind(void 0,0),mr.bind(void 0,1),function(e){var t=e.stack,r=t.pop(),o=0;j.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(o=35),32&r&&(o|=4096),t.push(o);},void 0,function(e){var t=e.stack,r=t.pop(),o=t.pop(),n=t.pop();j.DEBUG&&console.log(e.step,"ROLL[]"),t.push(o),t.push(r),t.push(n);},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"MAX[]",r,o),t.push(Math.max(o,r));},function(e){var t=e.stack,r=t.pop(),o=t.pop();j.DEBUG&&console.log(e.step,"MIN[]",r,o),t.push(Math.min(o,r));},function(e){var t=e.stack.pop();j.DEBUG&&console.log(e.step,"SCANTYPE[]",t);},function(e){var t=e.stack.pop(),r=e.stack.pop();switch(j.DEBUG&&console.log(e.step,"INSTCTRL[]",t,r),t){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,k.bind(void 0,1),k.bind(void 0,2),k.bind(void 0,3),k.bind(void 0,4),k.bind(void 0,5),k.bind(void 0,6),k.bind(void 0,7),k.bind(void 0,8),C.bind(void 0,1),C.bind(void 0,2),C.bind(void 0,3),C.bind(void 0,4),C.bind(void 0,5),C.bind(void 0,6),C.bind(void 0,7),C.bind(void 0,8),O.bind(void 0,0,0,0,0,0),O.bind(void 0,0,0,0,0,1),O.bind(void 0,0,0,0,0,2),O.bind(void 0,0,0,0,0,3),O.bind(void 0,0,0,0,1,0),O.bind(void 0,0,0,0,1,1),O.bind(void 0,0,0,0,1,2),O.bind(void 0,0,0,0,1,3),O.bind(void 0,0,0,1,0,0),O.bind(void 0,0,0,1,0,1),O.bind(void 0,0,0,1,0,2),O.bind(void 0,0,0,1,0,3),O.bind(void 0,0,0,1,1,0),O.bind(void 0,0,0,1,1,1),O.bind(void 0,0,0,1,1,2),O.bind(void 0,0,0,1,1,3),O.bind(void 0,0,1,0,0,0),O.bind(void 0,0,1,0,0,1),O.bind(void 0,0,1,0,0,2),O.bind(void 0,0,1,0,0,3),O.bind(void 0,0,1,0,1,0),O.bind(void 0,0,1,0,1,1),O.bind(void 0,0,1,0,1,2),O.bind(void 0,0,1,0,1,3),O.bind(void 0,0,1,1,0,0),O.bind(void 0,0,1,1,0,1),O.bind(void 0,0,1,1,0,2),O.bind(void 0,0,1,1,0,3),O.bind(void 0,0,1,1,1,0),O.bind(void 0,0,1,1,1,1),O.bind(void 0,0,1,1,1,2),O.bind(void 0,0,1,1,1,3),O.bind(void 0,1,0,0,0,0),O.bind(void 0,1,0,0,0,1),O.bind(void 0,1,0,0,0,2),O.bind(void 0,1,0,0,0,3),O.bind(void 0,1,0,0,1,0),O.bind(void 0,1,0,0,1,1),O.bind(void 0,1,0,0,1,2),O.bind(void 0,1,0,0,1,3),O.bind(void 0,1,0,1,0,0),O.bind(void 0,1,0,1,0,1),O.bind(void 0,1,0,1,0,2),O.bind(void 0,1,0,1,0,3),O.bind(void 0,1,0,1,1,0),O.bind(void 0,1,0,1,1,1),O.bind(void 0,1,0,1,1,2),O.bind(void 0,1,0,1,1,3),O.bind(void 0,1,1,0,0,0),O.bind(void 0,1,1,0,0,1),O.bind(void 0,1,1,0,0,2),O.bind(void 0,1,1,0,0,3),O.bind(void 0,1,1,0,1,0),O.bind(void 0,1,1,0,1,1),O.bind(void 0,1,1,0,1,2),O.bind(void 0,1,1,0,1,3),O.bind(void 0,1,1,1,0,0),O.bind(void 0,1,1,1,0,1),O.bind(void 0,1,1,1,0,2),O.bind(void 0,1,1,1,0,3),O.bind(void 0,1,1,1,1,0),O.bind(void 0,1,1,1,1,1),O.bind(void 0,1,1,1,1,2),O.bind(void 0,1,1,1,1,3)],jr=Array.from||function(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function P(e){(e=e||{}).empty||(_(e.familyName,"When creating a new Font object, familyName is required."),_(e.styleName,"When creating a new Font object, styleName is required."),_(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),_(e.ascender,"When creating a new Font object, ascender is required."),_(e.descender,"When creating a new Font object, descender is required."),_(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new p.GlyphSet(this,e.glyphs||[]),this.encoding=new Ee(this),this.position=new kt(this),this.substitution=new i(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||("truetype"===this.outlinesFormat?this._hinting=new Ft(this):void 0)}});}function _r(e,t){var r,o=JSON.stringify(e),n=256;for(r in t){var s=parseInt(r);if(s&&!(s<256)){if(JSON.stringify(t[r])===o)return s;n<=s&&(n=s+1);}}return t[n]=e,n}P.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},P.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},P.prototype.charToGlyph=function(e){e=this.charToGlyphIndex(e);return this.glyphs.get(e)||this.glyphs.get(0)},P.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var r=jr(e),o=[],n=0;n<r.length;n+=1){var s=r[n];o.push(this.charToGlyphIndex(s));}var i=o.length;if(t.features){var e=t.script||this.substitution.getDefaultScriptName(),a=[];t.features.liga&&(a=a.concat(this.substitution.getFeature("liga",e,t.language))),t.features.rlig&&(a=a.concat(this.substitution.getFeature("rlig",e,t.language)));for(var l=0;l<i;l+=1)for(var u=0;u<a.length;u++){for(var c=a[u],d=c.sub,h=d.length,f=0;f<h&&d[f]===o[l+f];)f++;f===h&&(o.splice(l,h,c.by),i=i-h+1);}}for(var p=new Array(i),m=this.glyphs.get(0),y=0;y<i;y+=1)p[y]=this.glyphs.get(o[y])||m;return p},P.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},P.prototype.nameToGlyph=function(e){e=this.nameToGlyphIndex(e);return this.glyphs.get(e)||this.glyphs.get(0)},P.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},P.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,e,t):this.kerningPairs[e+","+t]||0},P.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},P.prototype.forEachGlyph=function(e,t,r,o,n,s){t=void 0!==t?t:0,r=void 0!==r?r:0,n=n||this.defaultRenderOptions;var i,a=1/this.unitsPerEm*(o=void 0!==o?o:72),l=this.stringToGlyphs(e,n);n.kerning&&(e=n.script||this.position.getDefaultScriptName(),i=this.position.getKerningTables(e,n.language));for(var u=0;u<l.length;u+=1){var c=l[u];s.call(this,c,t,r,o,n),c.advanceWidth&&(t+=c.advanceWidth*a),n.kerning&&u<l.length-1&&(t+=(i?this.position.getKerningValue(i,c.index,l[u+1].index):this.getKerningValue(c,l[u+1]))*a),n.letterSpacing?t+=n.letterSpacing*o:n.tracking&&(t+=n.tracking/1e3*o);}return t},P.prototype.getPath=function(e,t,r,o,n){var s=new h;return this.forEachGlyph(e,t,r,o,n,function(e,t,r,o){e=e.getPath(t,r,o,n,this);s.extend(e);}),s},P.prototype.getPaths=function(e,t,r,o,n){var s=[];return this.forEachGlyph(e,t,r,o,n,function(e,t,r,o){e=e.getPath(t,r,o,n,this);s.push(e);}),s},P.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,function(){})},P.prototype.draw=function(e,t,r,o,n,s){this.getPath(t,r,o,n,s).draw(e);},P.prototype.drawPoints=function(n,e,t,r,o,s){this.forEachGlyph(e,t,r,o,s,function(e,t,r,o){e.drawPoints(n,t,r,o);});},P.prototype.drawMetrics=function(n,e,t,r,o,s){this.forEachGlyph(e,t,r,o,s,function(e,t,r,o){e.drawMetrics(n,t,r,o);});},P.prototype.getEnglishName=function(e){e=this.names[e];if(e)return e.en},P.prototype.validate=function(){var t=this;function e(e){e=t.getEnglishName(e);e&&e.trim().length;}e("fontFamily"),e("weightName"),e("manufacturer"),e("copyright"),e("version"),this.unitsPerEm;},P.prototype.toTables=function(){return wt.fontToTable(this)},P.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},P.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),o=0;o<e.length;o++)r[o]=e[o];return t},P.prototype.download=function(t){var e=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily"),o=(t=t||e.replace(/\s/g,"")+"-"+r+".otf",this.toArrayBuffer());"undefined"!=typeof window?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,o.byteLength,function(e){e.root.getFile(t,{create:!0},function(r){r.createWriter(function(e){var t=new DataView(o),t=new Blob([t],{type:"font/opentype"});e.write(t),e.addEventListener("writeend",function(){location.href=r.toURL();},!1);});});},function(e){throw new Error(e.name+": "+e.message)})):(e=Ar("fs"),r=function(e){for(var t=new Pr(e.byteLength),r=new Uint8Array(e),o=0;o<t.length;++o)t[o]=r[o];return t}(o),e.writeFileSync(t,r));},P.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},P.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},P.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var xr={make:function(e,t){var r=new S.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);r.offsetToData=r.sizeOf();for(var o,n,s,i=0;i<e.axes.length;i++)r.fields=r.fields.concat((o=i,n=e.axes[i],s=t,s=_r(n.name,t),[{name:"tag_"+o,type:"TAG",value:n.tag},{name:"minValue_"+o,type:"FIXED",value:n.minValue<<16},{name:"defaultValue_"+o,type:"FIXED",value:n.defaultValue<<16},{name:"maxValue_"+o,type:"FIXED",value:n.maxValue<<16},{name:"flags_"+o,type:"USHORT",value:0},{name:"nameID_"+o,type:"USHORT",value:s}]));for(var a=0;a<e.instances.length;a++)r.fields=r.fields.concat(function(e,t,r,o){for(var n=[{name:"nameID_"+e,type:"USHORT",value:_r(t.name,o)},{name:"flags_"+e,type:"USHORT",value:0}],s=0;s<r.length;++s){var i=r[s].tag;n.push({name:"axis_"+e+" "+i,type:"FIXED",value:t.coordinates[i]<<16});}return n}(a,e.instances[a],e.axes,t));return r},parse:function(e,t,r){for(var o,n,s,i,a=new R.Parser(e,t),l=a.parseULong(),u=(L.argument(65536===l,"Unsupported fvar table version."),a.parseOffset16()),c=(a.skip("uShort",1),a.parseUShort()),d=a.parseUShort(),h=a.parseUShort(),f=a.parseUShort(),p=[],m=0;m<c;m++)p.push((o=e,n=t+u+m*d,s=r,i={},o=new R.Parser(o,n),i.tag=o.parseTag(),i.minValue=o.parseFixed(),i.defaultValue=o.parseFixed(),i.maxValue=o.parseFixed(),o.skip("uShort",1),i.name=s[o.parseUShort()]||{},i));for(var y=[],g=t+u+c*d,v=0;v<h;v++)y.push(function(e,t,r,o){var n={},s=new R.Parser(e,t);n.name=o[s.parseUShort()]||{},s.skip("uShort",1),n.coordinates={};for(var i=0;i<r.length;++i)n.coordinates[r[i].tag]=s.parseFixed();return n}(e,g+v*f,p,r));return {axes:p,instances:y}}},A=new Array(10);A[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(u.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(u.coverage),values:this.parseValueRecordList()}:void L.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},A[2]=function(){var e,t,r,o,n=this.offset+this.relativeOffset,s=this.parseUShort(),n=(L.assert(1===s||2===s,"0x"+n.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(u.coverage)),i=this.parseUShort(),a=this.parseUShort();return 1===s?{posFormat:s,coverage:n,valueFormat1:i,valueFormat2:a,pairSets:this.parseList(u.pointer(u.list(function(){return {secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(a)}})))}:2===s?(e=this.parsePointer(u.classDef),t=this.parsePointer(u.classDef),r=this.parseUShort(),o=this.parseUShort(),{posFormat:s,coverage:n,valueFormat1:i,valueFormat2:a,classDef1:e,classDef2:t,class1Count:r,class2Count:o,classRecords:this.parseList(r,u.list(o,function(){return {value1:this.parseValueRecord(i),value2:this.parseValueRecord(a)}}))}):void 0},A[3]=function(){return {error:"GPOS Lookup 3 not supported"}},A[4]=function(){return {error:"GPOS Lookup 4 not supported"}},A[5]=function(){return {error:"GPOS Lookup 5 not supported"}},A[6]=function(){return {error:"GPOS Lookup 6 not supported"}},A[7]=function(){return {error:"GPOS Lookup 7 not supported"}},A[8]=function(){return {error:"GPOS Lookup 8 not supported"}},A[9]=function(){return {error:"GPOS Lookup 9 not supported"}};var wr=new Array(10);var Sr={parse:function(e,t){return t=(e=new u(e,t=t||0)).parseVersion(1),L.argument(1===t||1.1===t,"Unsupported GPOS table version "+t),1===t?{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(A)}:{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(A),variations:e.parseFeatureVariationsList()}},make:function(e){return new S.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new S.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new S.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new S.LookupList(e.lookups,wr)}])}};var Tr={parse:function(e,t){if(e=new R.Parser(e,t),0===(t=e.parseUShort())){var r=e,o={},n=(r.skip("uShort"),r.parseUShort()),s=(L.argument(0===n,"Unsupported kern sub-table version."),r.skip("uShort",2),r.parseUShort());r.skip("uShort",3);for(var i=0;i<s;i+=1){var a=r.parseUShort(),l=r.parseUShort(),u=r.parseShort();o[a+","+l]=u;}return o}if(1!==t)throw new Error("Unsupported kern table version ("+t+").");var c=e,d={},n=(c.skip("uShort"),1<c.parseULong()&&console.warn("Only the first kern subtable is supported."),c.skip("uLong"),255&c.parseUShort());if(c.skip("uShort"),0==n){var h=c.parseUShort();c.skip("uShort",3);for(var f=0;f<h;f+=1){var p=c.parseUShort(),m=c.parseUShort(),y=c.parseShort();d[p+","+m]=y;}}return d}};var Mr={parse:function(e,t,r,o){for(var n=new R.Parser(e,t),s=o?n.parseUShort:n.parseULong,i=[],a=0;a<r+1;a+=1){var l=s.call(n);o&&(l*=2),i.push(l);}return i}};function Er(e,r){Ar("fs").readFile(e,function(e,t){if(e)return r(e.message);r(null,Ot(t));});}function kr(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return r.response?t(null,r.response):t("Font could not be loaded: "+r.statusText)},r.onerror=function(){t("Font could not be loaded");},r.send();}function Cr(e,t){for(var r=[],o=12,n=0;n<t;n+=1){var s=R.getTag(e,o),i=R.getULong(e,o+4),a=R.getULong(e,o+8),l=R.getULong(e,o+12);r.push({tag:s,checksum:i,offset:a,length:l,compression:!1}),o+=16;}return r}function I(e,t){if("WOFF"!==t.compression)return {data:e,offset:t.offset};var e=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.length);if(re(e,r),r.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return {data:new DataView(r.buffer,0),offset:0}}function Or(e){var t,r,o,n,s,i,a,l,u,c,d,h,f,p,m=new P({empty:!0}),y=new DataView(e,0),g=[],e=R.getTag(y,0);if(e===String.fromCharCode(0,1,0,0)||"true"===e||"typ1"===e)m.outlinesFormat="truetype",g=Cr(y,o=R.getUShort(y,4));else if("OTTO"===e)m.outlinesFormat="cff",g=Cr(y,o=R.getUShort(y,4));else {if("wOFF"!==e)throw new Error("Unsupported OpenType signature "+e);var v=R.getTag(y,4);if(v===String.fromCharCode(0,1,0,0))m.outlinesFormat="truetype";else {if("OTTO"!==v)throw new Error("Unsupported OpenType flavor "+e);m.outlinesFormat="cff";}g=function(e,t){for(var r=[],o=44,n=0;n<t;n+=1){var s=R.getTag(e,o),i=R.getULong(e,o+4),a=R.getULong(e,o+8),l=R.getULong(e,o+12),u=void 0,u=a<l&&"WOFF";r.push({tag:s,offset:i,compression:u,compressedLength:a,length:l}),o+=20;}return r}(y,o=R.getUShort(y,12));}for(var b=0;b<o;b+=1){var j=g[b],_=void 0;switch(j.tag){case"cmap":_=I(y,j),m.tables.cmap=we.parse(_.data,_.offset),m.encoding=new ke(m.tables.cmap);break;case"cvt ":_=I(y,j),p=new R.Parser(_.data,_.offset),m.tables.cvt=p.parseShortList(j.length/2);break;case"fvar":s=j;break;case"fpgm":_=I(y,j),p=new R.Parser(_.data,_.offset),m.tables.fpgm=p.parseByteList(j.length);break;case"head":_=I(y,j),m.tables.head=Ze.parse(_.data,_.offset),m.unitsPerEm=m.tables.head.unitsPerEm,t=m.tables.head.indexToLocFormat;break;case"hhea":_=I(y,j),m.tables.hhea=Qe.parse(_.data,_.offset),m.ascender=m.tables.hhea.ascender,m.descender=m.tables.hhea.descender,m.numberOfHMetrics=m.tables.hhea.numberOfHMetrics;break;case"hmtx":u=j;break;case"ltag":_=I(y,j),r=Ke.parse(_.data,_.offset);break;case"maxp":_=I(y,j),m.tables.maxp=$e.parse(_.data,_.offset),m.numGlyphs=m.tables.maxp.numGlyphs;break;case"name":h=j;break;case"OS/2":_=I(y,j),m.tables.os2=ft.parse(_.data,_.offset);break;case"post":_=I(y,j),m.tables.post=pt.parse(_.data,_.offset),m.glyphNames=new Oe(m.tables.post);break;case"prep":_=I(y,j),p=new R.Parser(_.data,_.offset),m.tables.prep=p.parseByteList(j.length);break;case"glyf":i=j;break;case"loca":d=j;break;case"CFF ":n=j;break;case"kern":c=j;break;case"GPOS":a=j;break;case"GSUB":l=j;break;case"meta":f=j;}}v=I(y,h);if(m.tables.name=dt.parse(v.data,v.offset,r),m.names=m.tables.name,i&&d){e=0===t,v=I(y,d),v=Mr.parse(v.data,v.offset,m.numGlyphs,e),e=I(y,i);m.glyphs=Dt.parse(e.data,e.offset,v,m);}else {if(!n)throw new Error("Font doesn't contain TrueType or CFF outlines.");e=I(y,n);Ye.parse(e.data,e.offset,m);}for(var v=I(y,u),x=(Je.parse(v.data,v.offset,m.numberOfHMetrics,m.numGlyphs,m.glyphs),m),w=x.tables.cmap.glyphIndexMap,S=Object.keys(w),T=0;T<S.length;T+=1){var M,E=S[T],k=w[E];(M=x.glyphs.get(k)).addUnicode(parseInt(E));}for(var C=0;C<x.glyphs.length;C+=1)M=x.glyphs.get(C),x.cffEncoding?x.isCIDFont?M.name="gid"+C:M.name=x.cffEncoding.charset[C]:x.glyphNames.names&&(M.name=x.glyphNames.glyphIndexToName(C));return c?(e=I(y,c),m.kerningPairs=Tr.parse(e.data,e.offset)):m.kerningPairs={},a&&(v=I(y,a),m.tables.gpos=Sr.parse(v.data,v.offset),m.position.init()),l&&(e=I(y,l),m.tables.gsub=yt.parse(e.data,e.offset)),s&&(v=I(y,s),m.tables.fvar=xr.parse(v.data,v.offset,m.names)),f&&(e=I(y,f),m.tables.meta=gt.parse(e.data,e.offset),m.metas=m.tables.meta),m}j.Font=P,j.Glyph=f,j.Path=h,j.BoundingBox=a,j._parse=R,j.parse=Or,j.load=function(e,o){("undefined"==typeof window?Er:kr)(e,function(e,t){if(e)return o(e);var r;try{r=Or(t);}catch(e){return o(e,null)}return o(null,r)});},j.loadSync=function(e){return Or(Ot(Ar("fs").readFileSync(e)))},Object.defineProperty(j,"__esModule",{value:!0});},"object"==typeof o&&void 0!==r?t(o):t(e.opentype={});}.call(this,Ar("buffer").Buffer);},{buffer:4,fs:2}],250:[function(e,t,u){!function(n){function s(e,t){for(var r=0,o=e.length-1;0<=o;o--){var n=e[o];"."===n?e.splice(o,1):".."===n?(e.splice(o,1),r++):r&&(e.splice(o,1),r--);}if(t)for(;r--;)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var r=[],o=0;o<e.length;o++)t(e[o],o,e)&&r.push(e[o]);return r}u.resolve=function(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){var o=0<=r?arguments[r]:n.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,t="/"===o.charAt(0));}return (t?"/":"")+(e=s(i(e.split("/"),function(e){return !!e}),!t).join("/"))||"."},u.normalize=function(e){var t=u.isAbsolute(e),r="/"===o(e,-1);return (e=(e=s(i(e.split("/"),function(e){return !!e}),!t).join("/"))||t?e:".")&&r&&(e+="/"),(t?"/":"")+e},u.isAbsolute=function(e){return "/"===e.charAt(0)},u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},u.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return r<t?[]:e.slice(t,r-t+1)}e=u.resolve(e).substr(1),t=u.resolve(t).substr(1);for(var o=r(e.split("/")),n=r(t.split("/")),s=Math.min(o.length,n.length),i=s,a=0;a<s;a++)if(o[a]!==n[a]){i=a;break}for(var l=[],a=i;a<o.length;a++)l.push("..");return (l=l.concat(n.slice(i))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return ".";for(var t=47===e.charCodeAt(0),r=-1,o=!0,n=e.length-1;1<=n;--n)if(47===e.charCodeAt(n)){if(!o){r=n;break}}else o=!1;return -1===r?t?"/":".":t&&1===r?"/":e.slice(0,r)},u.basename=function(e,t){e=function(e){"string"!=typeof e&&(e+="");for(var t=0,r=-1,o=!0,n=e.length-1;0<=n;--n)if(47===e.charCodeAt(n)){if(!o){t=n+1;break}}else -1===r&&(o=!1,r=n+1);return -1===r?"":e.slice(t,r)}(e);return e=t&&e.substr(-1*t.length)===t?e.substr(0,e.length-t.length):e},u.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,o=-1,n=!0,s=0,i=e.length-1;0<=i;--i){var a=e.charCodeAt(i);if(47===a){if(n)continue;r=i+1;break}-1===o&&(n=!1,o=i+1),46===a?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);}return -1===t||-1===o||0===s||1===s&&t===o-1&&t===r+1?"":e.slice(t,o)};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)};}.call(this,e("_process"));},{_process:251}],251:[function(e,t,r){var o,n,t=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}try{o="function"==typeof setTimeout?setTimeout:s;}catch(e){o=s;}try{n="function"==typeof clearTimeout?clearTimeout:i;}catch(e){n=i;}function a(t){if(o===setTimeout)return setTimeout(t,0);if((o===s||!o)&&setTimeout)return (o=setTimeout)(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}var l,u=[],c=!1,d=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&f());}function f(){if(!c){for(var e=a(h),t=(c=!0,u.length);t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length;}l=null,c=!1,!function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return (n=clearTimeout)(t);try{n(t);}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e);}}function p(e,t){this.fun=e,this.array=t;}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||c||a(f);},p.prototype.run=function(){this.fun.apply(null,this.array);},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return []},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return "/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0};},{}],252:[function(e,t,r){t=function(s){var l,e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function i(e,t,r,o){var n,s,i,a,t=t&&t.prototype instanceof y?t:y,t=Object.create(t.prototype),o=new S(o||[]);return t._invoke=(n=e,s=r,i=o,a=d,function(e,t){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===e)throw t;return M()}for(i.method=e,i.arg=t;;){var r=i.delegate;if(r){r=function e(t,r){var o=t.iterator[r.method];if(o===l){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=l,e(t,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method");}return m}o=c(o,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;o=o.arg;if(!o)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m;{if(!o.done)return o;r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=l);}r.delegate=null;return m}(r,i);if(r){if(r===m)continue;return r}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===d)throw a=p,i.arg;i.dispatchException(i.arg);}else "return"===i.method&&i.abrupt("return",i.arg);a=f;r=c(n,s,i);if("normal"===r.type){if(a=i.done?p:h,r.arg!==m)return {value:r.arg,done:i.done}}else "throw"===r.type&&(a=p,i.method="throw",i.arg=r.arg);}}),t}function c(e,t,r){try{return {type:"normal",arg:e.call(t,r)}}catch(e){return {type:"throw",arg:e}}}s.wrap=i;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function y(){}function a(){}function g(){}var t={},v=(t[o]=function(){return this},Object.getPrototypeOf),v=v&&v(v(T([]))),b=(v&&v!==e&&u.call(v,o)&&(t=v),g.prototype=y.prototype=Object.create(t));function j(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)};});}function _(i){var t;this._invoke=function(r,o){function e(){return new Promise(function(e,t){!function t(e,r,o,n){var s,e=c(i[e],i,r);if("throw"!==e.type)return (r=(s=e.arg).value)&&"object"==typeof r&&u.call(r,"__await")?Promise.resolve(r.__await).then(function(e){t("next",e,o,n);},function(e){t("throw",e,o,n);}):Promise.resolve(r).then(function(e){s.value=e,o(s);},function(e){return t("throw",e,o,n)});n(e.arg);}(r,o,e,t);})}return t=t?t.then(e,e):e()};}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0);}function T(t){if(t){var r,e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(u.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=l,e.done=!0,e}).next=e}return {next:M}}function M(){return {value:l,done:!0}}return (a.prototype=b.constructor=g).constructor=a,g[n]=a.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return !!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,n in e||(e[n]="GeneratorFunction")),e.prototype=Object.create(b),e},s.awrap=function(e){return {__await:e}},j(_.prototype),_.prototype[r]=function(){return this},s.AsyncIterator=_,s.async=function(e,t,r,o){var n=new _(i(e,t,r,o));return s.isGeneratorFunction(t)?n:n.next().then(function(e){return e.done?e.value:n.next()})},j(b),b[n]="Generator",b[o]=function(){return this},b.toString=function(){return "[object Generator]"},s.keys=function(r){var e,o=[];for(e in r)o.push(e);return o.reverse(),function e(){for(;o.length;){var t=o.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l);},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var o=this;function e(e,t){return s.type="throw",s.arg=r,o.next=e,t&&(o.method="next",o.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],s=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var i=u.call(n,"catchLoc"),a=u.call(n,"finallyLoc");if(i&&a){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(i){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else {if(!a)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&u.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}var s=(n=n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc?null:n)?n.completion:{};return s.type=e,s.arg=t,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return "break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,o,n=this.tryEntries[t];if(n.tryLoc===e)return "throw"===(r=n.completion).type&&(o=r.arg,w(n)),o}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=l),m}},s}("object"==typeof t?t.exports:{});try{regeneratorRuntime=t;}catch(e){Function("r","regeneratorRuntime = r")(t);}},{}],253:[function(e,t,r){!function(e){var t,r,i,o,n,s,a,l,u,c;function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return e="string"!=typeof e?String(e):e}function f(t){var e={next:function(){var e=t.shift();return {done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach(function(e,t){this.append(t,e);},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1]);},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e]);},this);}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0;}function y(r){return new Promise(function(e,t){r.onload=function(){e(r.result);},r.onerror=function(){t(r.error);};})}function g(e){var t=new FileReader,r=y(t);return t.readAsArrayBuffer(e),r}function v(e){var t;return e.slice?e.slice(0):((t=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),t.buffer)}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(i&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(n&&i&&a(e))this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else {if(!n||!ArrayBuffer.prototype.isPrototypeOf(e)&&!l(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(e);}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"));},i&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,r=m(this);if(r)return r;if(this._bodyBlob)return r=this._bodyBlob,e=new FileReader,t=y(e),e.readAsText(r),t;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),o=0;o<t.length;o++)r[o]=String.fromCharCode(t[o]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function j(e,t){var r,o=(t=t||{}).body;if(e instanceof j){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0);}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(e=t.method||this.method||"GET",r=e.toUpperCase(),-1<u.indexOf(r)?r:e),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o);}function _(e){var r=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(t=(e=e.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),r.append(decodeURIComponent(t),decodeURIComponent(e)));}),r}function x(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e);}e.fetch||(t="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return !1}}(),o="FormData"in e,(n="ArrayBuffer"in e)&&(s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(e){return e&&DataView.prototype.isPrototypeOf(e)},l=ArrayBuffer.isView||function(e){return e&&-1<s.indexOf(Object.prototype.toString.call(e))}),p.prototype.append=function(e,t){e=d(e),t=h(t);var r=this.map[e];this.map[e]=r?r+","+t:t;},p.prototype.delete=function(e){delete this.map[d(e)];},p.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},p.prototype.set=function(e,t){this.map[d(e)]=h(t);},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this);},p.prototype.keys=function(){var r=[];return this.forEach(function(e,t){r.push(t);}),f(r)},p.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e);}),f(t)},p.prototype.entries=function(){var r=[];return this.forEach(function(e,t){r.push([t,e]);}),f(r)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries),u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],j.prototype.clone=function(){return new j(this,{body:this._bodyInit})},b.call(j.prototype),b.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e},c=[301,302,303,307,308],x.redirect=function(e,t){if(-1===c.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=j,e.Response=x,e.fetch=function(r,s){return new Promise(function(o,e){var t=new j(r,s),n=new XMLHttpRequest;n.onload=function(){var r,e={status:n.status,statusText:n.statusText,headers:(e=n.getAllResponseHeaders()||"",r=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var e=e.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),r.append(t,e));}),r)},t=(e.url="responseURL"in n?n.responseURL:e.headers.get("X-Request-URL"),"response"in n?n.response:n.responseText);o(new x(t,e));},n.onerror=function(){e(new TypeError("Network request failed"));},n.ontimeout=function(){e(new TypeError("Network request failed"));},n.open(t.method,t.url,!0),"include"===t.credentials?n.withCredentials=!0:"omit"===t.credentials&&(n.withCredentials=!1),"responseType"in n&&i&&(n.responseType="blob"),t.headers.forEach(function(e,t){n.setRequestHeader(t,e);}),n.send(void 0===t._bodyInit?null:t._bodyInit);})},e.fetch.polyfill=!0);}("undefined"!=typeof self?self:this);},{}],254:[function(e,t,r){e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l,o=n(e("../core/main")),u=n(e("../color/color_conversion"));function n(e){return e&&e.__esModule?e:{default:e}}var c=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],d=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];o.default.prototype._rgbColorName=function(e){var t,r,e=u.default._rgbaToHSBA(e),o=[(l=e)[0],e[1],e[2]];0!==o[0]&&(o[0]=Math.round(100*o[0]),(e=o[0].toString().split(""))[r=e.length-1]=parseInt(e[r]),e[r]<2.5?e[r]=0:2.5<=e[r]&&e[r]<7.5&&(e[r]=5),2===e.length?(e[0]=parseInt(e[0]),7.5<=e[r]&&(e[r]=0,e[0]=e[0]+1),o[0]=10*e[0]+e[1]):7.5<=e[r]?o[0]=10:o[0]=e[r]),o[2]=o[2]/255;for(var n=o.length-1;1<=n;n--)o[n]<=.25?o[n]=0:.25<o[n]&&o[n]<.75?o[n]=.5:o[n]=1;if(0===o[0]&&0===o[1]&&1===o[2]){for(var s=2;0<=s;s--)l[s]=Math.round(1e4*l[s])/1e4;for(var i=0;i<c.length;i++){if(c[i].h===l[0]&&c[i].s===l[1]&&c[i].b===l[2]){t=c[i].name;break}t="white";}}else for(var a=0;a<d.length;a++)if(d[a].h===o[0]&&d[a].s===o[1]&&d[a].b===o[2]){t=d[a].name;break}return t};e=o.default;r.default=e;},{"../color/color_conversion":260,"../core/main":275,"core-js/modules/es.function.name":168,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.split":198}],255:[function(e,t,r){e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=(e=e("../core/main"))&&e.__esModule?e:{default:e};var i="_Description",a="_fallbackDesc",l="_fallbackTable",u="_Label",c="_labelDesc",d="_labelTable";function h(e){if("label"===e||"fallback"===e)throw new Error("description should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")||e.endsWith("?")||e.endsWith("!")||(e+="."),e}s.default.prototype.describe=function(e,t){var r;s.default._validateParameters("describe",arguments),"string"==typeof e&&(r=this.canvas.id,e=h(e),this.dummyDOM||(this.dummyDOM=document.getElementById(r).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==e&&(this.descriptions.fallback.innerHTML=e):this._describeHTML("fallback",e),t===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==e&&(this.descriptions.label.innerHTML=e):this._describeHTML("label",e)));},s.default.prototype.describeElement=function(e,t,r){var o,n;s.default._validateParameters("describeElement",arguments),"string"==typeof t&&"string"==typeof e&&(o=this.canvas.id,t=h(t),n=function(e){if("label"===e||"fallback"===e)throw new Error("element name should not be LABEL or FALLBACK");e.endsWith(".")||e.endsWith(";")||e.endsWith(",")?e=e.replace(/.$/,":"):e.endsWith(":")||(e+=":");return e}(e),e=e.replace(/[^a-zA-Z0-9]/g,""),n='<th scope="row">'.concat(n,"</th><td>").concat(t,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(o).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[e]?this.descriptions.fallbackElements[e].innerHTML!==n&&(this.descriptions.fallbackElements[e].innerHTML=n):this._describeElementHTML("fallback",e,n),r===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[e]?this.descriptions.labelElements[e].innerHTML!==n&&(this.descriptions.labelElements[e].innerHTML=n):this._describeElementHTML("label",e,n)));},s.default.prototype._describeHTML=function(e,t){var r,o=this.canvas.id;"fallback"===e?(this.dummyDOM.querySelector("#".concat(o+i))?this.dummyDOM.querySelector("#"+o+l).insertAdjacentHTML("beforebegin",'<p id="'.concat(o+a,'"></p>')):(r='<div id="'.concat(o).concat(i,'" role="region" aria-label="Canvas Description"><p id="').concat(o).concat(a,'"></p></div>'),this.dummyDOM.querySelector("#".concat(o,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(o,"accessibleOutput")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#".concat(o)).innerHTML=r),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(o).concat(a)),this.descriptions.fallback.innerHTML=t):"label"===e&&(this.dummyDOM.querySelector("#".concat(o+u))?this.dummyDOM.querySelector("#".concat(o+d))&&this.dummyDOM.querySelector("#".concat(o+d)).insertAdjacentHTML("beforebegin",'<p id="'.concat(o).concat(c,'"></p>')):(r='<div id="'.concat(o).concat(u,'" class="p5Label"><p id="').concat(o).concat(c,'"></p></div>'),this.dummyDOM.querySelector("#".concat(o,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(o,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#"+o).insertAdjacentHTML("afterend",r)),this.descriptions.label=this.dummyDOM.querySelector("#"+o+c),this.descriptions.label.innerHTML=t);},s.default.prototype._describeElementHTML=function(e,t,r){var o,n=this.canvas.id;"fallback"===e?(this.dummyDOM.querySelector("#".concat(n+i))?this.dummyDOM.querySelector("#"+n+l)||this.dummyDOM.querySelector("#"+n+a).insertAdjacentHTML("afterend",'<table id="'.concat(n).concat(l,'"><caption>Canvas elements and their descriptions</caption></table>')):(o='<div id="'.concat(n).concat(i,'" role="region" aria-label="Canvas Description"><table id="').concat(n).concat(l,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(n,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutput")).insertAdjacentHTML("beforebegin",o):this.dummyDOM.querySelector("#"+n).innerHTML=o),(o=document.createElement("tr")).id=n+"_fte_"+t,this.dummyDOM.querySelector("#"+n+l).appendChild(o),this.descriptions.fallbackElements[t]=this.dummyDOM.querySelector("#".concat(n).concat("_fte_").concat(t)),this.descriptions.fallbackElements[t].innerHTML=r):"label"===e&&(this.dummyDOM.querySelector("#".concat(n+u))?this.dummyDOM.querySelector("#".concat(n+d))||this.dummyDOM.querySelector("#"+n+c).insertAdjacentHTML("afterend",'<table id="'.concat(n+d,'"></table>')):(o='<div id="'.concat(n).concat(u,'" class="p5Label"><table id="').concat(n).concat(d,'"></table></div>'),this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",o):this.dummyDOM.querySelector("#"+n).insertAdjacentHTML("afterend",o)),(e=document.createElement("tr")).id=n+"_lte_"+t,this.dummyDOM.querySelector("#"+n+d).appendChild(e),this.descriptions.labelElements[t]=this.dummyDOM.querySelector("#".concat(n).concat("_lte_").concat(t)),this.descriptions.labelElements[t].innerHTML=r);};e=s.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.ends-with":190,"core-js/modules/es.string.replace":196}],256:[function(e,t,r){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.map"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.map"),e("core-js/modules/es.string.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("../core/main"))&&e.__esModule?e:{default:e};e.default.prototype._updateGridOutput=function(e){var t,r,o,n;this.dummyDOM.querySelector("#".concat(e,"_summary"))&&(t=this._accessibleOutputs[e],o=function(e,t,r,o){t="".concat(t," canvas, ").concat(r," by ").concat(o," pixels, contains ").concat(e[0]);t=(1===e[0]?"".concat(t," shape: "):"".concat(t," shapes: ")).concat(e[1]);return t}((r=function(e,t){var r,o="",n="",s=0;for(r in t){var i,a=0;for(i in t[r]){var l='<li id="'.concat(e,"shape").concat(s,'">').concat(t[r][i].color," ").concat(r,",");"line"===r?l+=" location = ".concat(t[r][i].pos,", length = ").concat(t[r][i].length," pixels"):(l+=" location = ".concat(t[r][i].pos),"point"!==r&&(l+=", area = ".concat(t[r][i].area," %")),l+="</li>"),o+=l,a++,s++;}n=1<a?"".concat(n," ").concat(a," ").concat(r,"s"):"".concat(n," ").concat(a," ").concat(r);}return {numShapes:[s,n],details:o}}(e,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),n=function(e,t){var r,o,n=0,s="",i=Array.from(Array(10),function(){return Array(10)});for(r in t)for(var a in t[r]){var l=void 0;l="line"!==r?'<a href="#'.concat(e,"shape").concat(n,'">').concat(t[r][a].color," ").concat(r,"</a>"):'<a href="#'.concat(e,"shape").concat(n,'">').concat(t[r][a].color," ").concat(r," midpoint</a>"),i[t[r][a].loc.locY][t[r][a].loc.locX]?i[t[r][a].loc.locY][t[r][a].loc.locX]=i[t[r][a].loc.locY][t[r][a].loc.locX]+"  "+l:i[t[r][a].loc.locY][t[r][a].loc.locX]=l,n++;}for(o in i){var u,c="<tr>";for(u in i[o])c+="<td>",void 0!==i[o][u]&&(c+=i[o][u]),c+="</td>";s=s+c+"</tr>";}return s}(e,this.ingredients.shapes),o!==t.summary.innerHTML&&(t.summary.innerHTML=o),n!==t.map.innerHTML&&(t.map.innerHTML=n),r.details!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=r.details),this._accessibleOutputs[e]=t);};e=e.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.from":158,"core-js/modules/es.array.map":164,"core-js/modules/es.string.iterator":192}],257:[function(e,t,r){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};function l(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t,r){t=Math.floor(e[0]/t*10),e=Math.floor(e[1]/r*10);return 10===t&&(t-=1),10===e&&(e-=1),{locX:t,locY:e}}o.default.prototype.textOutput=function(e){o.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")));},o.default.prototype.gridOutput=function(e){o.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")));},o.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},o.default.prototype._createOutput=function(e,t){var r,o,n,s=this.canvas.id,i=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(s).parentNode),"");"Fallback"===t?(r=s+e,this.dummyDOM.querySelector("#".concat(o=s+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(s,"_Description"))?this.dummyDOM.querySelector("#".concat(s,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(o,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(s)).innerHTML='<div id="'.concat(o,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===t&&(r=s+e+(i=t),this.dummyDOM.querySelector("#".concat(o=s+"accessibleOutput"+t))||(this.dummyDOM.querySelector("#".concat(s,"_Label"))?this.dummyDOM.querySelector("#".concat(s,"_Label")):this.dummyDOM.querySelector("#".concat(s))).insertAdjacentHTML("afterend",'<div id="'.concat(o,'"></div>'))),this._accessibleOutputs[r]={},"textOutput"===e?(i="#".concat(s,"gridOutput").concat(i),n='<div id="'.concat(r,'">Text Output<div id="').concat(r,'Summary" aria-label="text output summary"><p id="').concat(r,'_summary"></p><ul id="').concat(r,'_list"></ul></div><table id="').concat(r,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(i)?this.dummyDOM.querySelector(i).insertAdjacentHTML("beforebegin",n):this.dummyDOM.querySelector("#".concat(o)).innerHTML=n,this._accessibleOutputs[r].list=this.dummyDOM.querySelector("#".concat(r,"_list"))):"gridOutput"===e&&(i="#".concat(s,"textOutput").concat(i),n='<div id="'.concat(r,'">Grid Output<p id="').concat(r,'_summary" aria-label="grid output summary"><table id="').concat(r,'_map" summary="grid output content"></table><ul id="').concat(r,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(i)?this.dummyDOM.querySelector(i).insertAdjacentHTML("afterend",n):this.dummyDOM.querySelector("#".concat(o)).innerHTML=n,this._accessibleOutputs[r].map=this.dummyDOM.querySelector("#".concat(r,"_map"))),this._accessibleOutputs[r].shapeDetails=this.dummyDOM.querySelector("#".concat(r,"_shapeDetails")),this._accessibleOutputs[r].summary=this.dummyDOM.querySelector("#".concat(r,"_summary"));},o.default.prototype._updateAccsOutput=function(){var e=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(e+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(e+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(e+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(e+"gridOutputLabel"));},o.default.prototype._accsBackground=function(e){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==e&&(this.ingredients.colors.backgroundRGBA=e,this.ingredients.colors.background=this._rgbColorName(e));},o.default.prototype._accsCanvasColors=function(e,t){"fill"===e?this.ingredients.colors.fillRGBA!==t&&(this.ingredients.colors.fillRGBA=t,this.ingredients.colors.fill=this._rgbColorName(t)):"stroke"===e&&this.ingredients.colors.strokeRGBA!==t&&(this.ingredients.colors.strokeRGBA=t,this.ingredients.colors.stroke=this._rgbColorName(t));},o.default.prototype._accsOutput=function(e,t){"ellipse"===e&&t[2]===t[3]?e="circle":"rectangle"===e&&t[2]===t[3]&&(e="square");var r,o,n={},s=!0,i=function(e,t){var r;e="rectangle"===e||"ellipse"===e||"arc"===e||"circle"===e||"square"===e?(r=Math.round(t[0]+t[2]/2),Math.round(t[1]+t[3]/2)):"triangle"===e?(r=(t[0]+t[2]+t[4])/3,(t[1]+t[3]+t[5])/3):"quadrilateral"===e?(r=(t[0]+t[2]+t[4]+t[6])/4,(t[1]+t[3]+t[5]+t[7])/4):"line"===e?(r=(t[0]+t[2])/2,(t[1]+t[3])/2):(r=t[0],t[1]);return [r,e]}(e,t);if("line"===e?(n.color=this.ingredients.colors.stroke,n.length=Math.round(this.dist(t[0],t[1],t[2],t[3])),r=this._getPos(t[0],[1]),o=this._getPos(t[2],[3]),n.loc=u(i,this.width,this.height),n.pos=r===o?"at ".concat(r):"from ".concat(r," to ").concat(o)):("point"===e?n.color=this.ingredients.colors.stroke:(n.color=this.ingredients.colors.fill,n.area=this._getArea(e,t)),n.pos=this._getPos.apply(this,l(i)),n.loc=u(i,this.width,this.height)),this.ingredients.shapes[e]){if(this.ingredients.shapes[e]!==[n]){for(var a in this.ingredients.shapes[e])JSON.stringify(this.ingredients.shapes[e][a])===JSON.stringify(n)&&(s=!1);!0===s&&this.ingredients.shapes[e].push(n);}}else this.ingredients.shapes[e]=[n];},o.default.prototype._getPos=function(e,t){var e=new DOMPointReadOnly(e,t),t=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),e=e.matrixTransform(t),t=e.x,e=e.y,r=this.width,o=this.height;return t<.4*r?e<.4*o?"top left":.6*o<e?"bottom left":"mid left":.6*r<t?e<.4*o?"top right":.6*o<e?"bottom right":"mid right":e<.4*o?"top middle":.6*o<e?"bottom middle":"middle"},o.default.prototype._getArea=function(e,t){var r,o,n=0,s=("arc"===e?(n=(r=((t[5]-t[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*t[2]*t[3]/8,"open"!==t[6]&&"chord"!==t[6]||(o=t[0],u=t[1],s=t[0]+t[2]/2*Math.cos(t[4]).toFixed(2),c=t[1]+t[3]/2*Math.sin(t[4]).toFixed(2),a=t[0]+t[2]/2*Math.cos(t[5]).toFixed(2),i=t[1]+t[3]/2*Math.sin(t[5]).toFixed(2),o=Math.abs(o*(c-i)+s*(i-u)+a*(u-c))/2,r>Math.PI?n+=o:n-=o)):"ellipse"===e||"circle"===e?n=3.14*t[2]/2*t[3]/2:"line"===e||"point"===e?n=0:"quadrilateral"===e?n=Math.abs((t[6]+t[0])*(t[7]-t[1])+(t[0]+t[2])*(t[1]-t[3])+(t[2]+t[4])*(t[3]-t[5])+(t[4]+t[6])*(t[5]-t[7]))/2:"rectangle"===e||"square"===e?n=t[2]*t[3]:"triangle"===e&&(n=Math.abs(t[0]*(t[3]-t[5])+t[2]*(t[5]-t[1])+t[4]*(t[1]-t[3]))/2),this.width*this._pixelDensity),i=this.height*this._pixelDensity,a=[new DOMPoint(0,0),new DOMPoint(s,0),new DOMPoint(s,i),new DOMPoint(0,i)],l=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),u=a.map(function(e){return e.matrixTransform(l)}),c=Math.abs((u[3].x+u[0].x)*(u[3].y-u[0].y)+(u[0].x+u[1].x)*(u[0].y-u[1].y)+(u[1].x+u[2].x)*(u[1].y-u[2].y)+(u[2].x+u[3].x)*(u[2].y-u[3].y))/2;return Math.round(100*n/c)};e=o.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],258:[function(e,t,r){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.concat"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("../core/main"))&&e.__esModule?e:{default:e};e.default.prototype._updateTextOutput=function(e){var t,r,o,n;this.dummyDOM.querySelector("#".concat(e,"_summary"))&&(t=this._accessibleOutputs[e],o=function(e,t,r,o){r="Your output is a, ".concat(r," by ").concat(o," pixels, ").concat(t," canvas containing the following");r=1===e?"".concat(r," shape:"):"".concat(r," ").concat(e," shapes:");return r}((r=function(e,t){var r,o="",n=0;for(r in t)for(var s in t[r]){var i='<li><a href="#'.concat(e,"shape").concat(n,'">').concat(t[r][s].color," ").concat(r,"</a>");"line"===r?i+=", ".concat(t[r][s].pos,", ").concat(t[r][s].length," pixels long.</li>"):(i+=", at ".concat(t[r][s].pos),"point"!==r&&(i+=", covering ".concat(t[r][s].area,"% of the canvas")),i+=".</li>"),o+=i,n++;}return {numShapes:n,listShapes:o}}(e,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),n=function(e,t){var r,o="",n=0;for(r in t)for(var s in t[r]){var i='<tr id="'.concat(e,"shape").concat(n,'"><th>').concat(t[r][s].color," ").concat(r,"</th>");"line"===r?i+="<td>location = ".concat(t[r][s].pos,"</td><td>length = ").concat(t[r][s].length," pixels</td></tr>"):(i+="<td>location = ".concat(t[r][s].pos,"</td>"),"point"!==r&&(i+="<td> area = ".concat(t[r][s].area,"%</td>")),i+="</tr>"),o+=i,n++;}return o}(e,this.ingredients.shapes),o!==t.summary.innerHTML&&(t.summary.innerHTML=o),r.listShapes!==t.list.innerHTML&&(t.list.innerHTML=r.listShapes),n!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=n),this._accessibleOutputs[e]=t);};e=e.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.concat":151}],259:[function(e,t,r){var o=(o=e("./core/main"))&&o.__esModule?o:{default:o};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/friendly_errors/sketch_reader"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.DataArray"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Framebuffer"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),t.exports=o.default;},{"./accessibility/color_namer":254,"./accessibility/describe":255,"./accessibility/gridOutput":256,"./accessibility/outputs":257,"./accessibility/textOutput":258,"./color/color_conversion":260,"./color/creating_reading":261,"./color/p5.Color":262,"./color/setting":263,"./core/constants":264,"./core/environment":265,"./core/friendly_errors/fes_core":266,"./core/friendly_errors/file_errors":267,"./core/friendly_errors/sketch_reader":268,"./core/friendly_errors/stacktrace":269,"./core/friendly_errors/validate_params":270,"./core/helpers":271,"./core/init":272,"./core/legacy":274,"./core/main":275,"./core/p5.Element":276,"./core/p5.Graphics":277,"./core/p5.Renderer":278,"./core/p5.Renderer2D":279,"./core/preload":280,"./core/rendering":281,"./core/shape/2d_primitives":282,"./core/shape/attributes":283,"./core/shape/curves":284,"./core/shape/vertex":285,"./core/shim":286,"./core/structure":287,"./core/transform":288,"./data/local_storage.js":289,"./data/p5.TypedDict":290,"./dom/dom":291,"./events/acceleration":292,"./events/keyboard":293,"./events/mouse":294,"./events/touch":295,"./image/filters":296,"./image/image":297,"./image/loading_displaying":298,"./image/p5.Image":299,"./image/pixels":300,"./io/files":301,"./io/p5.Table":302,"./io/p5.TableRow":303,"./io/p5.XML":304,"./math/calculation":305,"./math/math":306,"./math/noise":307,"./math/p5.Vector":308,"./math/random":309,"./math/trigonometry":310,"./typography/attributes":311,"./typography/loading_displaying":312,"./typography/p5.Font":313,"./utilities/array_functions":314,"./utilities/conversion":315,"./utilities/string_functions":316,"./utilities/time_date":317,"./webgl/3d_primitives":318,"./webgl/interaction":320,"./webgl/light":321,"./webgl/loading":322,"./webgl/material":323,"./webgl/p5.Camera":324,"./webgl/p5.DataArray":325,"./webgl/p5.Framebuffer":326,"./webgl/p5.Geometry":327,"./webgl/p5.Matrix":328,"./webgl/p5.RenderBuffer":329,"./webgl/p5.RendererGL":332,"./webgl/p5.RendererGL.Immediate":330,"./webgl/p5.RendererGL.Retained":331,"./webgl/p5.Shader":333,"./webgl/p5.Texture":334,"./webgl/text":335}],260:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("../core/main"))&&e.__esModule?e:{default:e};e.default.ColorConversion={_hsbaToHSLA:function(e){var t=e[0],r=e[1],o=e[2],n=(2-r)*o/2;return 0!=n&&(1==n?r=0:n<.5?r/=2-r:r=r*o/(2-2*n)),[t,r,n,e[3]]},_hsbaToRGBA:function(e){var t,r,o,n,s,i=6*e[0],a=e[1],l=e[2];return 0===a?[l,l,l,e[3]]:(r=l*(1-a),o=l*(1-a*(i-(t=Math.floor(i)))),a=l*(1-a*(1+t-i)),i=1===t?(n=o,s=l,r):2===t?(n=r,s=l,a):3===t?(n=r,s=o,l):4===t?(n=a,s=r,l):5===t?(n=l,s=r,o):(n=l,s=a,r),[n,s,i,e[3]])},_hslaToHSBA:function(e){var t=e[0],r=e[1],o=e[2],n=o<.5?(1+r)*o:o+r-o*r;return [t,r=2*(n-o)/n,n,e[3]]},_hslaToRGBA:function(e){var t,r=6*e[0],o=e[1],n=e[2];return 0===o?[n,n,n,e[3]]:[(t=function(e,t,r){return e<0?e+=6:6<=e&&(e-=6),e<1?t+(r-t)*e:e<3?r:e<4?t+(r-t)*(4-e):t})(2+r,o=2*n-(n=n<.5?(1+o)*n:n+o-n*o),n),t(r,o,n),t(r-2,o,n),e[3]]},_rgbaToHSBA:function(e){var t,r,o=e[0],n=e[1],s=e[2],i=Math.max(o,n,s),a=i-Math.min(o,n,s);return 0==a?r=t=0:(r=a/i,o===i?t=(n-s)/a:n===i?t=2+(s-o)/a:s===i&&(t=4+(o-n)/a),t<0?t+=6:6<=t&&(t-=6)),[t/6,r,i,e[3]]},_rgbaToHSLA:function(e){var t,r,o=e[0],n=e[1],s=e[2],i=Math.max(o,n,s),a=Math.min(o,n,s),l=i+a,a=i-a;return 0==a?r=t=0:(r=l<1?a/l:a/(2-l),o===i?t=(n-s)/a:n===i?t=2+(s-o)/a:s===i&&(t=4+(o-n)/a),t<0?t+=6:6<=t&&(t-=6)),[t/6,r,l/2,e[3]]}};e=e.default.ColorConversion;r.default=e;},{"../core/main":275}],261:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.map"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=(n=e("../core/main"))&&n.__esModule?n:{default:n},u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),l.default.prototype.alpha=function(e){return l.default._validateParameters("alpha",arguments),this.color(e)._getAlpha()},l.default.prototype.blue=function(e){return l.default._validateParameters("blue",arguments),this.color(e)._getBlue()},l.default.prototype.brightness=function(e){return l.default._validateParameters("brightness",arguments),this.color(e)._getBrightness()},l.default.prototype.color=function(){var e;return l.default._validateParameters("color",arguments),arguments[0]instanceof l.default.Color?arguments[0]:(e=arguments[0]instanceof Array?arguments[0]:arguments,new l.default.Color(this,e))},l.default.prototype.green=function(e){return l.default._validateParameters("green",arguments),this.color(e)._getGreen()},l.default.prototype.hue=function(e){return l.default._validateParameters("hue",arguments),this.color(e)._getHue()},l.default.prototype.lerpColor=function(e,t,r){l.default._validateParameters("lerpColor",arguments);var o,n,s,i=this._colorMode,a=this._colorMaxes;if(i===u.RGB)n=e.levels.map(function(e){return e/255}),s=t.levels.map(function(e){return e/255});else if(i===u.HSB)e._getBrightness(),t._getBrightness(),n=e.hsba,s=t.hsba;else {if(i!==u.HSL)throw new Error("".concat(i,"cannot be used for interpolation."));e._getLightness(),t._getLightness(),n=e.hsla,s=t.hsla;}return r=Math.max(Math.min(r,1),0),void 0===this.lerp&&(this.lerp=function(e,t,r){return r*(t-e)+e}),e=this.lerp(n[0],s[0],r),t=this.lerp(n[1],s[1],r),o=this.lerp(n[2],s[2],r),n=this.lerp(n[3],s[3],r),e*=a[i][0],t*=a[i][1],o*=a[i][2],n*=a[i][3],this.color(e,t,o,n)},l.default.prototype.lightness=function(e){return l.default._validateParameters("lightness",arguments),this.color(e)._getLightness()},l.default.prototype.red=function(e){return l.default._validateParameters("red",arguments),this.color(e)._getRed()},l.default.prototype.saturation=function(e){return l.default._validateParameters("saturation",arguments),this.color(e)._getSaturation()};var n=l.default;r.default=n;},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"./p5.Color":262,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],262:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.trim"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("../core/main")),d=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants")),h=s(e("./color_conversion"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}var f={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},e=/\s*/,u=/(\d{1,3})/,c=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp("".concat(c.source,"%")),m={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",u.source,",",u.source,",",u.source,"\\)$"].join(e.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(e.source),"i"),RGBA:new RegExp(["^rgba\\(",u.source,",",u.source,",",u.source,",",c.source,"\\)$"].join(e.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",c.source,"\\)$"].join(e.source),"i"),HSL:new RegExp(["^hsl\\(",u.source,",",p.source,",",p.source,"\\)$"].join(e.source),"i"),HSLA:new RegExp(["^hsla\\(",u.source,",",p.source,",",p.source,",",c.source,"\\)$"].join(e.source),"i"),HSB:new RegExp(["^hsb\\(",u.source,",",p.source,",",p.source,"\\)$"].join(e.source),"i"),HSBA:new RegExp(["^hsba\\(",u.source,",",p.source,",",p.source,",",c.source,"\\)$"].join(e.source),"i")},u=(n.default.Color=function(){function c(e,t){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(e._colorMode,e._colorMaxes),![d.RGB,d.HSL,d.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=c._parseInputs.apply(this,t),this._calculateLevels();}var e,t,r;return e=c,r=[{key:"_parseInputs",value:function(e,t,r,o){var n,s=arguments.length,i=this.mode,a=this.maxes[i],l=[];if(3<=s){for(l[0]=e/a[0],l[1]=t/a[1],l[2]=r/a[2],l[3]="number"==typeof o?o/a[3]:1,n=l.length-1;0<=n;--n){var u=l[n];u<0?l[n]=0:1<u&&(l[n]=1);}return i===d.HSL?h.default._hslaToRGBA(l):i===d.HSB?h.default._hsbaToRGBA(l):l}if(1===s&&"string"==typeof e){r=e.trim().toLowerCase();if(f[r])return c._parseInputs.call(this,f[r]);if(m.HEX3.test(r))return (l=m.HEX3.exec(r).slice(1).map(function(e){return parseInt(e+e,16)/255}))[3]=1,l;if(m.HEX6.test(r))return (l=m.HEX6.exec(r).slice(1).map(function(e){return parseInt(e,16)/255}))[3]=1,l;if(m.HEX4.test(r))return l=m.HEX4.exec(r).slice(1).map(function(e){return parseInt(e+e,16)/255});if(m.HEX8.test(r))return l=m.HEX8.exec(r).slice(1).map(function(e){return parseInt(e,16)/255});if(m.RGB.test(r))return (l=m.RGB.exec(r).slice(1).map(function(e){return e/255}))[3]=1,l;if(m.RGB_PERCENT.test(r))return (l=m.RGB_PERCENT.exec(r).slice(1).map(function(e){return parseFloat(e)/100}))[3]=1,l;if(m.RGBA.test(r))return l=m.RGBA.exec(r).slice(1).map(function(e,t){return 3===t?parseFloat(e):e/255});if(m.RGBA_PERCENT.test(r))return l=m.RGBA_PERCENT.exec(r).slice(1).map(function(e,t){return 3===t?parseFloat(e):parseFloat(e)/100});if(m.HSL.test(r)?(l=m.HSL.exec(r).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100}))[3]=1:m.HSLA.test(r)&&(l=m.HSLA.exec(r).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100})),(l=l.map(function(e){return Math.max(Math.min(e,1),0)})).length)return h.default._hslaToRGBA(l);if(m.HSB.test(r)?(l=m.HSB.exec(r).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100}))[3]=1:m.HSBA.test(r)&&(l=m.HSBA.exec(r).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100})),l.length){for(n=l.length-1;0<=n;--n)l[n]=Math.max(Math.min(l[n],1),0);return h.default._hsbaToRGBA(l)}l=[1,1,1,1];}else {if(1!==s&&2!==s||"number"!=typeof e)throw new Error("".concat(arguments,"is not a valid color representation."));l[0]=e/a[2],l[1]=e/a[2],l[2]=e/a[2],l[3]="number"==typeof t?t/a[3]:1,l=l.map(function(e){return Math.max(Math.min(e,1),0)});}return l}}],(t=[{key:"toString",value:function(e){var t=this.levels,r=this._array,o=r[3];switch(e){case"#rrggbb":return "#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16));case"#rrggbbaa":return "#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16),t[3]<16?"0".concat(t[3].toString(16)):t[3].toString(16));case"#rgb":return "#".concat(Math.round(15*r[0]).toString(16),Math.round(15*r[1]).toString(16),Math.round(15*r[2]).toString(16));case"#rgba":return "#".concat(Math.round(15*r[0]).toString(16),Math.round(15*r[1]).toString(16),Math.round(15*r[2]).toString(16),Math.round(15*r[3]).toString(16));case"rgb":return "rgb(".concat(t[0],", ",t[1],", ",t[2],")");case"rgb%":return "rgb(".concat((100*r[0]).toPrecision(3),"%, ",(100*r[1]).toPrecision(3),"%, ",(100*r[2]).toPrecision(3),"%)");case"rgba%":return "rgba(".concat((100*r[0]).toPrecision(3),"%, ",(100*r[1]).toPrecision(3),"%, ",(100*r[2]).toPrecision(3),"%, ",(100*r[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],", ",o,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*o).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],", ",o,")");case"hsla%":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*o).toPrecision(3),"%)");default:return "rgba(".concat(t[0],",",t[1],",",t[2],",",o,")")}}},{key:"setRed",value:function(e){this._array[0]=e/this.maxes[d.RGB][0],this._calculateLevels();}},{key:"setGreen",value:function(e){this._array[1]=e/this.maxes[d.RGB][1],this._calculateLevels();}},{key:"setBlue",value:function(e){this._array[2]=e/this.maxes[d.RGB][2],this._calculateLevels();}},{key:"setAlpha",value:function(e){this._array[3]=e/this.maxes[this.mode][3],this._calculateLevels();}},{key:"_calculateLevels",value:function(){for(var e=this._array,t=this.levels=new Array(e.length),r=e.length-1;0<=r;--r)t[r]=Math.round(255*e[r]);this.hsla=null,this.hsba=null;}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(e,t){this.mode=e,this.maxes=t;}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[d.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[d.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[d.RGB][1]}},{key:"_getHue",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[d.HSB][0]):(this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[d.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[d.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[d.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[d.HSB][1]):(this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[d.HSL][1])}}])&&l(e.prototype,t),r&&l(e,r),c}(),n.default.Color);r.default=u;},{"../core/constants":264,"../core/main":275,"./color_conversion":260,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],263:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.fill"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=l();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function l(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,l=function(){return e},e)}e("./p5.Color"),s.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});},s.default.prototype.endClip=function(){this._renderer.endClip();},s.default.prototype.clip=function(e,t){this._renderer.beginClip(t),e(),this._renderer.endClip(t);},s.default.prototype.background=function(){var e;return (e=this._renderer).background.apply(e,arguments),this},s.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},s.default.prototype.colorMode=function(e,t,r,o,n){return s.default._validateParameters("colorMode",arguments),e!==a.RGB&&e!==a.HSB&&e!==a.HSL||(this._colorMode=e,e=this._colorMaxes[e],2===arguments.length?(e[0]=t,e[1]=t,e[2]=t,e[3]=t):4===arguments.length?(e[0]=t,e[1]=r,e[2]=o):5===arguments.length&&(e[0]=t,e[1]=r,e[2]=o,e[3]=n)),this},s.default.prototype.fill=function(){var e;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(e=this._renderer).fill.apply(e,arguments),this},s.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},s.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},s.default.prototype.stroke=function(){var e;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(e=this._renderer).stroke.apply(e,arguments),this},s.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,1<arguments.length&&void 0!==arguments[1]?arguments[1]:255),this},s.default.prototype.noErase=function(){return this._renderer.noErase(),this};var n=s.default;r.default=n;},{"../core/constants":264,"../core/main":275,"./p5.Color":262,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],264:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.QUADRATIC=r.LINEAR=r._CTX_MIDDLE=r._DEFAULT_LEADMULT=r._DEFAULT_TEXT_FILL=r.WORD=r.CHAR=r.BOLDITALIC=r.BOLD=r.ITALIC=r.NORMAL=r.BLUR=r.ERODE=r.DILATE=r.POSTERIZE=r.INVERT=r.OPAQUE=r.GRAY=r.THRESHOLD=r.BURN=r.DODGE=r.SOFT_LIGHT=r.HARD_LIGHT=r.OVERLAY=r.REPLACE=r.SCREEN=r.MULTIPLY=r.EXCLUSION=r.SUBTRACT=r.DIFFERENCE=r.LIGHTEST=r.DARKEST=r.ADD=r.REMOVE=r.BLEND=r.UP_ARROW=r.TAB=r.SHIFT=r.RIGHT_ARROW=r.RETURN=r.OPTION=r.LEFT_ARROW=r.ESCAPE=r.ENTER=r.DOWN_ARROW=r.DELETE=r.CONTROL=r.BACKSPACE=r.ALT=r.AUTO=r.HSL=r.HSB=r.RGB=r.MITER=r.BEVEL=r.ROUND=r.SQUARE=r.PROJECT=r.PIE=r.CHORD=r.OPEN=r.CLOSE=r.TESS=r.QUAD_STRIP=r.QUADS=r.TRIANGLE_STRIP=r.TRIANGLE_FAN=r.TRIANGLES=r.LINE_LOOP=r.LINE_STRIP=r.LINES=r.POINTS=r.BASELINE=r.BOTTOM=r.TOP=r.CENTER=r.LEFT=r.RIGHT=r.RADIUS=r.CORNERS=r.CORNER=r.RAD_TO_DEG=r.DEG_TO_RAD=r.RADIANS=r.DEGREES=r.TWO_PI=r.TAU=r.QUARTER_PI=r.PI=r.HALF_PI=r.WAIT=r.TEXT=r.MOVE=r.HAND=r.CROSS=r.ARROW=r.WEBGL2=r.WEBGL=r.P2D=r.VERSION=void 0,r.RGBA=r.HALF_FLOAT=r.FLOAT=r.UNSIGNED_INT=r.UNSIGNED_BYTE=r.COVER=r.CONTAIN=r.FALLBACK=r.LABEL=r.AXES=r.GRID=r._DEFAULT_FILL=r._DEFAULT_STROKE=r.PORTRAIT=r.LANDSCAPE=r.SMOOTH=r.FLAT=r.MIRROR=r.CLAMP=r.REPEAT=r.NEAREST=r.IMAGE=r.IMMEDIATE=r.TEXTURE=r.FILL=r.STROKE=r.CURVE=r.BEZIER=void 0;var o=Math.PI,n=(r.VERSION="1.9.0",r.P2D="p2d",r.WEBGL="webgl",r.WEBGL2="webgl2",r.ARROW="default",r.CROSS="crosshair",r.HAND="pointer",r.MOVE="move",r.TEXT="text",r.WAIT="wait",o/2),n=(r.HALF_PI=n,o),n=(r.PI=n,o/4),n=(r.QUARTER_PI=n,2*o),n=(r.TAU=n,2*o),n=(r.TWO_PI=n,r.DEGREES="degrees",r.RADIANS="radians",o/180),n=(r.DEG_TO_RAD=n,180/o);r.RAD_TO_DEG=n,r.CORNER="corner",r.CORNERS="corners",r.RADIUS="radius",r.RIGHT="right",r.LEFT="left",r.CENTER="center",r.TOP="top",r.BOTTOM="bottom",r.BASELINE="alphabetic",r.POINTS=0,r.LINES=1,r.LINE_STRIP=3,r.LINE_LOOP=2,r.TRIANGLES=4,r.TRIANGLE_FAN=6,r.TRIANGLE_STRIP=5,r.QUADS="quads",r.QUAD_STRIP="quad_strip",r.TESS="tess",r.CLOSE="close",r.OPEN="open",r.CHORD="chord",r.PIE="pie",r.PROJECT="square",r.SQUARE="butt",r.ROUND="round",r.BEVEL="bevel",r.MITER="miter",r.RGB="rgb",r.HSB="hsb",r.HSL="hsl",r.AUTO="auto",r.ALT=18,r.BACKSPACE=8,r.CONTROL=17,r.DELETE=46,r.DOWN_ARROW=40,r.ENTER=13,r.ESCAPE=27,r.LEFT_ARROW=37,r.OPTION=18,r.RETURN=13,r.RIGHT_ARROW=39,r.SHIFT=16,r.TAB=9,r.UP_ARROW=38,r.BLEND="source-over",r.REMOVE="destination-out",r.ADD="lighter",r.DARKEST="darken",r.LIGHTEST="lighten",r.DIFFERENCE="difference",r.SUBTRACT="subtract",r.EXCLUSION="exclusion",r.MULTIPLY="multiply",r.SCREEN="screen",r.REPLACE="copy",r.OVERLAY="overlay",r.HARD_LIGHT="hard-light",r.SOFT_LIGHT="soft-light",r.DODGE="color-dodge",r.BURN="color-burn",r.THRESHOLD="threshold",r.GRAY="gray",r.OPAQUE="opaque",r.INVERT="invert",r.POSTERIZE="posterize",r.DILATE="dilate",r.ERODE="erode",r.BLUR="blur",r.NORMAL="normal",r.ITALIC="italic",r.BOLD="bold",r.BOLDITALIC="bold italic",r.CHAR="CHAR",r.WORD="WORD",r._DEFAULT_TEXT_FILL="#000000",r._DEFAULT_LEADMULT=1.25,r._CTX_MIDDLE="middle",r.LINEAR="linear",r.QUADRATIC="quadratic",r.BEZIER="bezier",r.CURVE="curve",r.STROKE="stroke",r.FILL="fill",r.TEXTURE="texture",r.IMMEDIATE="immediate",r.IMAGE="image",r.NEAREST="nearest",r.REPEAT="repeat",r.CLAMP="clamp",r.MIRROR="mirror",r.FLAT="flat",r.SMOOTH="smooth",r.LANDSCAPE="landscape",r.PORTRAIT="portrait",r._DEFAULT_STROKE="#000000",r._DEFAULT_FILL="#FFFFFF",r.GRID="grid",r.AXES="axes",r.LABEL="label",r.FALLBACK="fallback",r.CONTAIN="contain",r.COVER="cover",r.UNSIGNED_BYTE="unsigned-byte",r.UNSIGNED_INT="unsigned-int",r.FLOAT="float",r.HALF_FLOAT="half-float";r.RGBA="rgba";},{}],265:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(s=e("./main"))&&s.__esModule?s:{default:s},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("./constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}var l=[s.ARROW,s.CROSS,s.HAND,s.MOVE,s.TEXT,s.WAIT],u=(n.default.prototype._frameRate=0,n.default.prototype._lastFrameTime=window.performance.now(),n.default.prototype._targetFrameRate=60,window.print),c=!1;function d(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function h(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}n.default.prototype.print=function(){var e;arguments.length?(e=console).log.apply(e,arguments):c||(u(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(c=!0));},n.default.prototype.frameCount=0,n.default.prototype.deltaTime=0,n.default.prototype.focused=document.hasFocus(),n.default.prototype.cursor=function(e,t,r){var o,n="auto",s=this._curElement.elt;l.includes(e)?n=e:"string"==typeof e&&(o="",t&&r&&"number"==typeof t&&"number"==typeof r&&(o="".concat(t," ").concat(r)),n="http://"===e.substring(0,7)||"https://"===e.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)?"url(".concat(e,") ").concat(o,", auto"):e),s.style.cursor=n;},n.default.prototype.frameRate=function(e){return n.default._validateParameters("frameRate",arguments),"number"!=typeof e||e<0?this._frameRate:(this._setProperty("_targetFrameRate",e),0===e&&this._setProperty("_frameRate",e),this)},n.default.prototype.getFrameRate=function(){return this.frameRate()},n.default.prototype.setFrameRate=function(e){return this.frameRate(e)},n.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},n.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none";},n.default.prototype.webglVersion=s.P2D,n.default.prototype.displayWidth=screen.width,n.default.prototype.displayHeight=screen.height,n.default.prototype.windowWidth=d(),n.default.prototype.windowHeight=h(),n.default.prototype._onresize=function(e){this._setProperty("windowWidth",d()),this._setProperty("windowHeight",h());var t=this._isGlobal?window:this;"function"!=typeof t.windowResized||void 0===(t=t.windowResized(e))||t||e.preventDefault();},n.default.prototype.width=0,n.default.prototype.height=0,n.default.prototype.fullscreen=function(e){if(n.default._validateParameters("fullscreen",arguments),void 0===e)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(e){e=document.documentElement;if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen();}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();},n.default.prototype.pixelDensity=function(e){var t;return n.default._validateParameters("pixelDensity",arguments),"number"==typeof e?(e!==this._pixelDensity&&(this._pixelDensity=e),(t=this).resizeCanvas(this.width,this.height,!0)):t=this._pixelDensity,t},n.default.prototype.displayDensity=function(){return window.devicePixelRatio},n.default.prototype.getURL=function(){return location.href},n.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(e){return ""!==e})},n.default.prototype.getURLParams=function(){for(var e,t=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,r={};null!=(e=t.exec(location.search));)e.index===t.lastIndex&&t.lastIndex++,r[e[1]]=e[2];return r};e=n.default;r.default=e;},{"./constants":264,"./main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.search":197,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],266:[function(r,e,t){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(l=r("../main"))&&l.__esModule?l:{default:l};r("../internationalization");function n(r,o){o=o||console.log.bind(console),s||i(),s.some(function(e){var t;if(r.message&&null!==r.message.match("\\W?".concat(e.name,"\\W")))return t="function"===e.type?"".concat(e.name,"()"):e.name,o("Did you just try to use p5.js's ".concat(t," ").concat(e.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(a)),!0});}var s=null,i=null,a=(o.default._friendlyError=o.default._checkForUserDefinedFunctions=o.default._fesErrorMonitor=function(){},s=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),i=function(){function e(r){return Object.getOwnPropertyNames(r).filter(function(e){return "_"!==e[0]&&(!(e in t)&&(t[e]=!0))}).map(function(e){var t="function"==typeof r[e]?"function":e===e.toUpperCase()?"constant":"variable";return {name:e,type:t}})}var t={};(s=[].concat(e(o.default.prototype),e(r("../constants")))).sort(function(e,t){return t.name.length-e.name.length});},l=(o.default.prototype._helpForMisusedAtTopLevelCode=n,"complete"!==document.readyState&&(window.addEventListener("error",n,!1),window.addEventListener("load",function(){window.removeEventListener("error",n,!1);})),o.default);t.default=l;},{"../constants":264,"../internationalization":273,"../main":275,"./browser_errors":void 0,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.function.name":168,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-names":179,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.starts-with":199,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],267:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(o=e("../main"))&&o.__esModule?o:{default:o};e("../internationalization");o.default._friendlyFileLoadError=function(){};e=o.default;r.default=e;},{"../internationalization":273,"../main":275}],268:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=O(e("../main"));e("../internationalization");C(e("../constants"));function k(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,k=function(){return e},e)}function C(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=k();if(t&&t.has(e))return t.get(e);var r,o,n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&((o=s?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]);return n.default=e,t&&t.set(e,n),n}function O(e){return e&&e.__esModule?e:{default:e}}n.default._fesCodeReader=function(){};var R=n.default;r.default=R;},{"../constants":264,"../internationalization":273,"../main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],269:[function(e,t,r){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("../main"))&&e.__esModule?e:{default:e};function o(){var t=/(^|@)\S+:\d+/,r=/^\s*at .*(\S+:\d+|\(native\))/m,o=/^(eval@)?(\[native code])?$/;return {parse:function(e){return void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(r)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):void 0},extractLocation:function(e){return -1===e.indexOf(":")?[e]:[(e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,"")))[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(e){return !!e.match(r)},this).map(function(e){var t=(e=-1<e.indexOf("(eval ")?e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):e).replace(/^\s+/,"").replace(/\(eval code/g,"("),r=t.match(/ (\((.+):(\d+):(\d+)\)$)/),t=(t=r?t.replace(r[0],""):t).split(/\s+/).slice(1),r=this.extractLocation(r?r[1]:t.pop());return {functionName:t.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(r[0])?void 0:r[0],lineNumber:r[1],columnNumber:r[2],source:e}},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(e){return !e.match(o)},this).map(function(e){var t,r;return -1===(e=-1<e.indexOf(" > eval")?e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):e).indexOf("@")&&-1===e.indexOf(":")?{functionName:e}:{functionName:(r=e.match(t=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&r[1]?r[1]:void 0,fileName:(r=this.extractLocation(e.replace(t,"")))[0],lineNumber:r[1],columnNumber:r[2],source:e}},this)},parseOpera:function(e){return !e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),o=[],n=2,s=r.length;n<s;n+=2){var i=t.exec(r[n]);i&&o.push({fileName:i[2],lineNumber:i[1],source:r[n]});}return o},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),o=[],n=0,s=r.length;n<s;n+=2){var i=t.exec(r[n]);i&&o.push({functionName:i[3]||void 0,fileName:i[2],lineNumber:i[1],source:r[n]});}return o},parseOpera11:function(e){return e.stack.split("\n").filter(function(e){return !!e.match(t)&&!e.match(/^Error created at/)},this).map(function(e){var t,r=e.split("@"),o=this.extractLocation(r.pop()),r=r.shift()||"";return {functionName:r.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:void 0===(t=r.match(/\(([^)]*)\)/)?r.replace(/^[^(]+\(([^)]*)\)$/,"$1"):t)||"[arguments not available]"===t?void 0:t.split(","),fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:e}},this)}}}e.default._getErrorStackParser=function(){return new o};e=e.default;r.default=e;},{"../main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198}],270:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(n=e("../main"))&&n.__esModule?n:{default:n};((function(e){if(e&&e.__esModule)return;if(null===e||"object"!==a(e)&&"function"!=typeof e)return;var t=i();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);}))(e("../constants")),e("../internationalization");function i(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,i=function(){return e},e)}function a(e){return (a="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}n.default._validateParameters=n.default._clearValidateParamsCache=function(){};e=n.default;r.default=e;},{"../../../docs/parameterData.json":void 0,"../constants":264,"../internationalization":273,"../main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.function.name":168,"core-js/modules/es.map":169,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],271:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("./constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}r.default={modeAdjust:function(e,t,r,o,n){return n===s.CORNER?{x:e,y:t,w:r,h:o}:n===s.CORNERS?{x:e,y:t,w:r-e,h:o-t}:n===s.RADIUS?{x:e-r,y:t-o,w:2*r,h:2*o}:n===s.CENTER?{x:e-.5*r,y:t-.5*o,w:r,h:o}:void 0}};},{"./constants":264,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],272:[function(e,t,r){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var o=(n=e("../core/main"))&&n.__esModule?n:{default:n};e("./internationalization");var n=Promise.resolve();Promise.all([new Promise(function(e,t){"complete"===document.readyState?e():window.addEventListener("load",e,!1);}),n]).then(function(){void 0!==window._setupDone?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!o.default.instance&&new o.default;});},{"../core/main":275,"./internationalization":273,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.string.iterator":192,"core-js/modules/web.dom-collections.iterator":238}],273:[function(e,t,r){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.setTranslatorLanguage=r.currentTranslatorLanguage=r.availableTranslatorLanguages=r.initialize=r.translator=void 0;var n,s,o=a(e("i18next")),i=a(e("i18next-browser-languagedetector"));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}var u=function(){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.init(e,t);}var e,t;return e=r,(t=[{key:"fetchWithTimeout",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3;return Promise.race([fetch(e,t),new Promise(function(e,t){return setTimeout(function(){return t(new Error("timeout"))},r)})])}},{key:"init",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=t;}},{key:"read",value:function(e,t,r){var o=this.options.loadPath;e===this.options.fallback?r(null,n[e][t]):s.includes(e)?(o=this.services.interpolator.interpolate(o,{lng:e,ns:t}),this.loadUrl(o,r)):r("Not found",!1);}},{key:"loadUrl",value:function(t,r){this.fetchWithTimeout(t).then(function(e){if(e.ok)return e.json();throw new Error("failed loading ".concat(t))},function(){throw new Error("failed loading ".concat(t))}).then(function(e){return r(null,e)}).catch(r);}}])&&l(e.prototype,t),r}();u.type="backend",r.translator=function(e,t){console.debug("p5.js translator called before translations were loaded"),o.default.t(e,t);},r.initialize=function(){return o.default.use(i.default).use(u).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:n}).then(function(e){r.translator=e;},function(e){return console.debug("Translations failed to load (".concat(e,")"))})},r.availableTranslatorLanguages=function(){return o.default.languages},r.currentTranslatorLanguage=function(e){return o.default.language};r.setTranslatorLanguage=function(e){return o.default.changeLanguage(e||void 0,function(e){return console.debug("Translations failed to load (".concat(e,")"))})};},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/web.dom-collections.iterator":238,i18next:3,"i18next-browser-languagedetector":3}],274:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("./main"))&&e.__esModule?e:{default:e};e.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},e.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},e.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},e.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};e=e.default;r.default=e;},{"./main":275}],275:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("./shim");var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("./constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}var l,u=function(){function g(e,t){var d=this;if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=t,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var t=Object.getOwnPropertyNames(g.prototype._registeredMethods),r=!0,o=!1,n=void 0;try{for(var s,i=t[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var a=s.value;this._registeredMethods[a]=g.prototype._registeredMethods[a].slice();}}catch(e){o=!0,n=e;}finally{try{r||null==i.return||i.return();}finally{if(o)throw n}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),g.prototype.callRegisteredHooksFor=function(t){var e=this||g.prototype,r=this._isGlobal?window:this;if(e._registeredMethods.hasOwnProperty(t)){var e=e._registeredMethods[t],o=!0,t=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(o=(s=i.next()).done);o=!0){var a=s.value;"function"==typeof a&&a.call(r);}}catch(e){t=!0,n=e;}finally{try{o||null==i.return||i.return();}finally{if(t)throw n}}}},this._start=function(){d._userNode&&"string"==typeof d._userNode&&(d._userNode=document.getElementById(d._userNode));var e=d._isGlobal?window:d;if(e.preload){d.callRegisteredHooksFor("beforePreload");var t,r=document.getElementById(d._loadingScreenId),o=(r||((r=document.createElement("div")).innerHTML="Loading...",r.style.position="absolute",r.id=d._loadingScreenId,(d._userNode||document.body).appendChild(r)),d._preloadMethods);for(t in o){o[t]=o[t]||g;var n=o[t];n!==g.prototype&&n!==g||(d._isGlobal&&(window[t]=d._wrapPreload(d,t)),n=d),d._registeredPreloadMethods[t]=n[t],n[t]=d._wrapPreload(n,t);}e.preload(),d._runIfPreloadsAreDone();}else d._setup(),d._recording||d._draw();},this._runIfPreloadsAreDone=function(){var e,t=this._isGlobal?window:this;0===t._preloadCount&&((e=document.getElementById(t._loadingScreenId))&&e.parentNode.removeChild(e),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),t._setup(),this._recording||t._draw()));},this._decrementPreload=function(){var e=this._isGlobal?window:this;e._preloadDone||"function"!=typeof e.preload||(e._setProperty("_preloadCount",e._preloadCount-1),e._runIfPreloadsAreDone());},this._wrapPreload=function(o,n){var s=this;return function(){s._incrementPreload();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s._registeredPreloadMethods[n].apply(o,t)}},this._incrementPreload=function(){var e=this._isGlobal?window:this;e._preloadDone||e._setProperty("_preloadCount",e._preloadCount+1);},this._setup=function(){d.callRegisteredHooksFor("beforeSetup"),d.createCanvas(d._defaultCanvasSize.width,d._defaultCanvasSize.height,"p2d");var e=d._isGlobal?window:d;if("function"==typeof e.preload)for(var t in d._preloadMethods)e[t]=d._preloadMethods[t][t],e[t]&&d&&(e[t]=e[t].bind(d));d._millisStart=window.performance.now(),e._preloadDone=!0,"function"==typeof e.setup&&e.setup();var r=document.getElementsByTagName("canvas"),o=!0,n=!1,s=void 0;try{for(var i,a=r[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var l=i.value;"true"===l.dataset.hidden&&(l.style.visibility="",delete l.dataset.hidden);}}catch(e){n=!0,s=e;}finally{try{o||null==a.return||a.return();}finally{if(n)throw s}}d._lastTargetFrameTime=window.performance.now(),d._lastRealFrameTime=window.performance.now(),d._setupDone=!0,(d._accessibleOutputs.grid||d._accessibleOutputs.text)&&d._updateAccsOutput(),d.callRegisteredHooksFor("afterSetup");},this._draw=function(){var e=window.performance.now(),t=e-d._lastTargetFrameTime,r=1e3/d._targetFrameRate;(!d._loop||r-5<=t)&&(d.deltaTime=e-d._lastRealFrameTime,d._setProperty("deltaTime",d.deltaTime),d._frameRate=1e3/d.deltaTime,d.redraw(),d._lastTargetFrameTime=Math.max(d._lastTargetFrameTime+r,e),d._lastRealFrameTime=e,void 0!==d._updateMouseCoords&&(d._updateMouseCoords(),d._setProperty("movedX",0),d._setProperty("movedY",0))),d._loop&&(d._requestAnimId=window.requestAnimationFrame(d._draw));},this._setProperty=function(e,t){d[e]=t,d._isGlobal&&(window[e]=t);},this.remove=function(){d._startListener&&window.removeEventListener("load",d._startListener,!1);var t=document.getElementById(d._loadingScreenId);if(t&&(t.parentNode.removeChild(t),d._incrementPreload()),d._curElement){for(var e in d._loop=!1,d._requestAnimId&&window.cancelAnimationFrame(d._requestAnimId),d._events)window.removeEventListener(e,d._events[e]);var r=!0,t=!1,o=void 0;try{for(var n,s=d._elements[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var i,a=n.value;for(i in a.elt&&a.elt.parentNode&&a.elt.parentNode.removeChild(a.elt),a._events)a.elt.removeEventListener(i,a._events[i]);}}catch(e){t=!0,o=e;}finally{try{r||null==s.return||s.return();}finally{if(t)throw o}}var l=d;d._registeredMethods.remove.forEach(function(e){void 0!==e&&e.call(l);});}if(d._isGlobal){for(var u in g.prototype)try{delete window[u];}catch(e){window[u]=void 0;}for(var c in d)if(d.hasOwnProperty(c))try{delete window[c];}catch(e){window[c]=void 0;}g.instance=null;}},this._registeredMethods.init.forEach(function(e){void 0!==e&&e.call(this);},this),this._setupPromisePreloads();var l,u,c=this._createFriendlyGlobalFunctionBinder();if(e)e(this),g._checkForUserDefinedFunctions(this);else {for(var h in this._isGlobal=!0,g.instance=this,g.prototype)"function"==typeof g.prototype[h]?(l=h.substring(2),this._events.hasOwnProperty(l)||(Math.hasOwnProperty(h)&&Math[h]===g.prototype[h]?c(h,g.prototype[h]):c(h,g.prototype[h].bind(this)))):c(h,g.prototype[h]);for(var f in this)this.hasOwnProperty(f)&&c(f,this[f]);}for(u in this._events){var p=this["_on".concat(u)];p&&(p=p.bind(this),window.addEventListener(u,p,{passive:!1}),this._events[u]=p);}function m(){d._setProperty("focused",!0);}function y(){d._setProperty("focused",!1);}window.addEventListener("focus",m),window.addEventListener("blur",y),this.registerMethod("remove",function(){window.removeEventListener("focus",m),window.removeEventListener("blur",y);}),"complete"===document.readyState?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1));}var e,t;return e=g,(t=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=n.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={};}},{key:"registerPreloadMethod",value:function(e,t){g.prototype._preloadMethods.hasOwnProperty(e)||(g.prototype._preloadMethods[e]=t);}},{key:"registerMethod",value:function(e,t){var r=this||g.prototype;r._registeredMethods.hasOwnProperty(e)||(r._registeredMethods[e]=[]),r._registeredMethods[e].push(t);}},{key:"unregisterMethod",value:function(e,t){var r=this||g.prototype;if(r._registeredMethods.hasOwnProperty(e)){for(var o=r._registeredMethods[e],n=[],s=0;s<o.length;s++)o[s]===t&&n.push(s);for(var i=n.length-1;0<=i;i--)o.splice(n[i],1);}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=e.globalObject||window;e.log||console.log.bind(console);return function(e,t){g.disableFriendlyErrors,r[e]=t;}}}])&&s(e.prototype,t),g}();for(l in u.instance=null,u.disableFriendlyErrors=!1,n)u.prototype[l]=n[l];u.VERSION=n.VERSION,u.prototype._preloadMethods={loadJSON:u.prototype,loadImage:u.prototype,loadStrings:u.prototype,loadXML:u.prototype,loadBytes:u.prototype,loadTable:u.prototype,loadFont:u.prototype,loadModel:u.prototype,loadShader:u.prototype},u.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},u.prototype._registeredPreloadMethods={},r.default=u;},{"./constants":264,"./shim":286,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-own-property-names":179,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],276:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(e=e("./main"))&&e.__esModule?e:{default:e};function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}n.default.Element=function(){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.elt=e,this._pInst=this._pixelsState=t,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight;}var e,t,o;return e=r,o=[{key:"_adjustListener",value:function(e,t,r){return !1===t?n.default.Element._detachListener(e,r):n.default.Element._attachListener(e,t,r),this}},{key:"_attachListener",value:function(e,t,r){r._events[e]&&n.default.Element._detachListener(e,r);t=t.bind(r);r.elt.addEventListener(e,t,!1),r._events[e]=t;}},{key:"_detachListener",value:function(e,t){var r=t._events[e];t.elt.removeEventListener(e,r,!1),t._events[e]=null;}}],(t=[{key:"parent",value:function(e){return void 0===e?this.elt.parentNode:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof n.default.Element&&(e=e.elt),e.appendChild(this.elt),this)}},{key:"id",value:function(e){return void 0===e?this.elt.id:(this.elt.id=e,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(e){return void 0===e?this.elt.className:(this.elt.className=e,this)}},{key:"mousePressed",value:function(t){return n.default.Element._adjustListener("mousedown",function(e){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(e),t.call(this,e)},this),this}},{key:"doubleClicked",value:function(e){return n.default.Element._adjustListener("dblclick",e,this),this}},{key:"mouseWheel",value:function(e){return n.default.Element._adjustListener("wheel",e,this),this}},{key:"mouseReleased",value:function(e){return n.default.Element._adjustListener("mouseup",e,this),this}},{key:"mouseClicked",value:function(e){return n.default.Element._adjustListener("click",e,this),this}},{key:"mouseMoved",value:function(e){return n.default.Element._adjustListener("mousemove",e,this),this}},{key:"mouseOver",value:function(e){return n.default.Element._adjustListener("mouseover",e,this),this}},{key:"mouseOut",value:function(e){return n.default.Element._adjustListener("mouseout",e,this),this}},{key:"touchStarted",value:function(e){return n.default.Element._adjustListener("touchstart",e,this),this}},{key:"touchMoved",value:function(e){return n.default.Element._adjustListener("touchmove",e,this),this}},{key:"touchEnded",value:function(e){return n.default.Element._adjustListener("touchend",e,this),this}},{key:"dragOver",value:function(e){return n.default.Element._adjustListener("dragover",e,this),this}},{key:"dragLeave",value:function(e){return n.default.Element._adjustListener("dragleave",e,this),this}},{key:"_setProperty",value:function(e,t){this[e]=t;}}])&&s(e.prototype,t),o&&s(e,o),r}();e=n.default.Element;r.default=e;},{"./main":275}],277:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=(u=e("./main"))&&u.__esModule?u:{default:u},d=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("./constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function s(e,t){return (s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(r){return function(){var e,t=l(r);return f(this,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){}}}()?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function f(e,t){return !t||"object"!==i(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return (l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}c.default.Graphics=function(e){var t=u;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);var l=h(u);function u(e,t,r,o,n){var s;if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");a=n||document.createElement("canvas"),(s=l.call(this,a,o)).canvas=a;var i,a=r||d.P2D,r=o._userNode||document.body;for(i in n||r.appendChild(s.canvas),c.default.prototype)s[i]||("function"==typeof c.default.prototype[i]?s[i]=c.default.prototype[i].bind(p(s)):s[i]=c.default.prototype[i]);return c.default.prototype._initializeInstanceVariables.apply(p(s)),s.width=e,s.height=t,s._pixelDensity=o._pixelDensity,a===d.WEBGL?s._renderer=new c.default.RendererGL(s.canvas,p(s),!1):s._renderer=new c.default.Renderer2D(s.canvas,p(s),!1),o._elements.push(p(s)),Object.defineProperty(p(s),"deltaTime",{get:function(){return this._pInst.deltaTime}}),s._renderer.resize(e,t),s._renderer._applyDefaults(),f(s,p(s))}return t=u,(e=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update();}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var e,t=this._pInst._elements.indexOf(this);for(e in -1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(e,this._events[e]);}},{key:"createFramebuffer",value:function(e){return new c.default.Framebuffer(this,e)}}])&&n(t.prototype,e),u}(c.default.Element);var u=c.default.Graphics;r.default=u;},{"./constants":264,"./main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],278:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=(s=e("./main"))&&s.__esModule?s:{default:s},P=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return {default:e};var t=i();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function i(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,i=function(){return e},e)}function l(e){return (l="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function c(e,t){return (c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){return function(){var e,t,r=n(o);return e=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){}}}()?(e=n(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments),r=this,!(t=e)||"object"!==l(t)&&"function"!=typeof t?h(r):t}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e){return (n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){var t=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e);var n=d(s);function s(e,t,r){var o;if(this instanceof s)return (o=n.call(this,e,t)).canvas=e,o._pixelsState=t,r?(o._isMainCanvas=!0,o._pInst._setProperty("_curElement",h(o)),o._pInst._setProperty("canvas",o.canvas),o._pInst._setProperty("width",o.width),o._pInst._setProperty("height",o.height)):(o.canvas.style.display="none",o._styles=[]),o._clipping=!1,o._clipInvert=!1,o._textSize=12,o._textLeading=15,o._textFont="sans-serif",o._textStyle=P.NORMAL,o._textAscent=null,o._textDescent=null,o._textAlign=P.LEFT,o._textBaseline=P.BASELINE,o._textWrap=P.WORD,o._rectMode=P.CORNER,o._ellipseMode=P.CENTER,o._curveTightness=0,o._imageMode=P.CORNER,o._tint=null,o._doStroke=!0,o._doFill=!0,o._strokeSet=!1,o._fillSet=!1,o._leadingSet=!1,o._pushPopDepth=0,o;throw new TypeError("Cannot call a class as a function")}return t=s,(e=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(e){this._pushPopDepth--,e.properties&&Object.assign(this,e.properties);}},{key:"beginClip",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=e.invert;}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1;}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.elt.width=e*this._pInst._pixelDensity,this.elt.height=t*this._pInst._pixelDensity,this.elt.style.width="".concat(e,"px"),this.elt.style.height="".concat(t,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height));}},{key:"get",value:function(e,t,r,o){var n=this._pixelsState,s=n._pixelDensity,i=this.canvas;if(void 0===e&&void 0===t)e=t=0,r=n.width,o=n.height;else if(e*=s,t*=s,void 0===r&&void 0===o)return e<0||t<0||e>=i.width||t>=i.height?[0,0,0,0]:this._getPixel(e,t);n=new a.default.Image(r*s,o*s);return n.pixelDensity(s),n.canvas.getContext("2d").drawImage(i,e,t,r*s,o*s,0,0,r*s,o*s),n}},{key:"textLeading",value:function(e){return "number"==typeof e?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",e),this._pInst):this._textLeading}},{key:"textStyle",value:function(e){return e?(e!==P.NORMAL&&e!==P.ITALIC&&e!==P.BOLD&&e!==P.BOLDITALIC||this._setProperty("_textStyle",e),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(e,t){return void 0!==e?(this._setProperty("_textAlign",e),void 0!==t&&this._setProperty("_textBaseline",t),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(e){return this._setProperty("_textWrap",e),this._textWrap}},{key:"text",value:function(e,t,r,o,n){var s,i,a,l,u=this._pInst,c=this._textWrap,d=Number.MAX_VALUE,h=r;if((this._doFill||this._doStroke)&&void 0!==e){if(s=(e=(e="string"!=typeof e?e.toString():e).replace(/(\t)/g,"  ")).split("\n"),void 0!==o){switch(this._rectMode===P.CENTER&&(t-=o/2),this._textAlign){case P.CENTER:t+=o/2;break;case P.RIGHT:t+=o;}if(void 0!==n){this._rectMode===P.CENTER&&(r-=n/2,h-=n/2);var e=r,f=u.textAscent();switch(this._textBaseline){case P.BOTTOM:l=r+n,r=Math.max(l,r),h+=f;break;case P.CENTER:l=r+n/2,r=Math.max(l,r),h+=f/2;}d=r+n-f,this._textBaseline===P.CENTER&&(d=e+n-f/2);}else this._textBaseline!==P.BOTTOM&&this._textBaseline!==P.CENTER||(h=r-(e=u.textSize()*this._textLeading)/2,d=r+e/2);if(c===P.WORD){for(var p=[],m=0;m<s.length;m++){for(var y="",g=s[m].split(" "),v=0;v<g.length;v++)i="".concat(y+g[v])+" ",y=o<(a=this.textWidth(i))&&0<y.length?(p.push(y),"".concat(g[v])+" "):i;p.push(y);}var b=0;this._textBaseline===P.CENTER?b=(p.length-1)*u.textLeading()/2:this._textBaseline===P.BOTTOM&&(b=(p.length-1)*u.textLeading());for(var j=0;j<s.length;j++){y="",g=s[j].split(" ");for(var _=0;_<g.length;_++)i="".concat(y+g[_])+" ",o<(a=this.textWidth(i))&&0<y.length?(this._renderText(u,y.trim(),t,r-b,d,h),y="".concat(g[_])+" ",r+=u.textLeading()):y=i;this._renderText(u,y.trim(),t,r-b,d,h),r+=u.textLeading();}}else {for(var x=[],w=0;w<s.length;w++)for(var S=s[w].split(y=""),T=0;T<S.length;T++)i="".concat(y+S[T]),(a=this.textWidth(i))<=o?y+=S[T]:o<a&&0<y.length&&(x.push(y),y="".concat(S[T]));x.push(y);var M=0;this._textBaseline===P.CENTER?M=(x.length-1)*u.textLeading()/2:this._textBaseline===P.BOTTOM&&(M=(x.length-1)*u.textLeading());for(var E=0;E<s.length;E++){S=s[E].split(y="");for(var k=0;k<S.length;k++)i="".concat(y+S[k]),(a=this.textWidth(i))<=o?y+=S[k]:o<a&&0<y.length&&(this._renderText(u,y.trim(),t,r-M,d,h),r+=u.textLeading(),y="".concat(S[k]));}this._renderText(u,y.trim(),t,r-M,d,h),r+=u.textLeading();}}else {var C=0;this._textBaseline===P.CENTER?C=(s.length-1)*u.textLeading()/2:this._textBaseline===P.BOTTOM&&(C=(s.length-1)*u.textLeading());for(var O=0;O<s.length;O++)this._renderText(u,s[O],t,r-C,d,h-C),r+=u.textLeading();}return u}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return "object"===l(e)&&e.font&&e.font.supported}},{key:"_updateTextMetrics",value:function(){var e,t,r,o,n,s;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((e=document.createElement("span")).style.fontFamily=this._textFont,e.style.fontSize="".concat(this._textSize,"px"),e.innerHTML="ABCjgq|",(s=document.createElement("div")).style.display="inline-block",s.style.width="1px",s.style.height="0px",o=((t=document.createElement("div")).appendChild(e),t.appendChild(s),t.style.height="0px",t.style.overflow="hidden",document.body.appendChild(t),s.style.verticalAlign="baseline",f(s)),n=f(e),r=o[1]-n[1],o=(s.style.verticalAlign="bottom",f(s)),n=f(e),s=o[1]-n[1]-r,document.body.removeChild(t),this._setProperty("_textAscent",r),this._setProperty("_textDescent",s)),this}}])&&u(t.prototype,e),s}(a.default.Element);function f(e){var t=0,r=0;if(e.offsetParent)for(;t+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;);else t+=e.offsetLeft,r+=e.offsetTop;return [t,r]}s.prototype.textSize=function(e){return "number"==typeof e?(this._setProperty("_textSize",e),this._leadingSet||this._setProperty("_textLeading",e*P._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},a.default.Renderer=s;e=a.default.Renderer;r.default=e;},{"../core/constants":264,"./main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],279:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.reflect.get"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var d=(n=e("./main"))&&n.__esModule?n:{default:n},p=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("./constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function l(e,t,r){return (l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(e)return (e=Object.getOwnPropertyDescriptor(e,t)).get?e.get.call(r):e.value})(e,t,r||e)}function u(e,t){return (u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(r){return function(){var e,t=h(r),t=(e=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){}}}()?(e=h(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function h(e){return (h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e("./p5.Renderer");var f="rgba(0,0,0,0)",n=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e);var o=c(n);function n(e,t,r){if(this instanceof n)return (e=o.call(this,e,t,r)).drawingContext=e.canvas.getContext("2d"),e._pInst._setProperty("drawingContext",e.drawingContext),e;throw new TypeError("Cannot call a class as a function")}return t=n,(e=[{key:"getFilterGraphicsLayer",value:function(){var e;return this.filterGraphicsLayer||(e=(this._pInst instanceof d.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new d.default.Graphics(this.width,this.height,p.WEBGL,e)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=p.BLEND,this._setFill(p._DEFAULT_FILL),this._setStroke(p._DEFAULT_STROKE),this.drawingContext.lineCap=p.ROUND,this.drawingContext.font="normal 12px sans-serif";}},{key:"resize",value:function(e,t){l(h(n.prototype),"resize",this).call(this,e,t),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity);}},{key:"background",value:function(){var e,t;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof d.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(e=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(e,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(e=this._getFill(),t=(t=this._pInst).color.apply(t,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(t.levels),t=t.toString(),this._setFill(t),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(e),this._isErasing&&this._pInst.erase()),this.drawingContext.restore();}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore();}},{key:"fill",value:function(){var e=(e=this._pInst).color.apply(e,arguments);this._setFill(e.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",e.levels);}},{key:"stroke",value:function(){var e=(e=this._pInst).color.apply(e,arguments);this._setStroke(e.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",e.levels);}},{key:"erase",value:function(e,t){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,e=this._pInst.color(255,e).toString(),this.drawingContext.fillStyle=e,this._cachedStrokeStyle=this.drawingContext.strokeStyle,e=this._pInst.color(255,t).toString(),this.drawingContext.strokeStyle=e,t=this._cachedBlendMode,this.blendMode(p.REMOVE),this._cachedBlendMode=t,this._isErasing=!0);}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1);}},{key:"beginClip",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=(l(h(n.prototype),"beginClip",this).call(this,e),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),e=(this.drawingContext.fillStyle=e,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),e=(this.drawingContext.strokeStyle=e,this._cachedBlendMode);this.blendMode(p.BLEND),this._cachedBlendMode=e,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath());}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),l(h(n.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode);}},{key:"image",value:function(e,t,r,o,n,s,i,a,l){e.gifProperties&&e._animateGif(this._pInst);try{d.default.MediaElement&&e instanceof d.default.MediaElement&&e._ensureCanvas();var u=(u=this._tint&&e.canvas?this._getTintedImageCanvas(e):u)||e.canvas||e.elt,c=1;e.width&&0<e.width&&(c=u.width/e.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(u,c*t,c*r,c*o,c*n,s,i,a,l),this._isErasing&&this._pInst.erase();}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e}}},{key:"_getTintedImageCanvas",value:function(e){if(!e.canvas)return e;e.tintCanvas||(e.tintCanvas=document.createElement("canvas")),e.tintCanvas.width!==e.canvas.width&&(e.tintCanvas.width=e.canvas.width),e.tintCanvas.height!==e.canvas.height&&(e.tintCanvas.height=e.canvas.height);var t=e.tintCanvas.getContext("2d");return t.save(),t.clearRect(0,0,e.canvas.width,e.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(t.drawImage(e.canvas,0,0),t.globalCompositeOperation="luminosity",t.drawImage(e.canvas,0,0),t.globalCompositeOperation="color",t.drawImage(e.canvas,0,0),t.globalCompositeOperation="multiply",t.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),t.fillRect(0,0,e.canvas.width,e.canvas.height),t.globalCompositeOperation="destination-in"),t.globalAlpha=this._tint[3]/255,t.drawImage(e.canvas,0,0),t.restore(),e.tintCanvas}},{key:"blendMode",value:function(e){if(e===p.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else {if(e!==p.BLEND&&e!==p.REMOVE&&e!==p.DARKEST&&e!==p.LIGHTEST&&e!==p.DIFFERENCE&&e!==p.MULTIPLY&&e!==p.EXCLUSION&&e!==p.SCREEN&&e!==p.REPLACE&&e!==p.OVERLAY&&e!==p.HARD_LIGHT&&e!==p.SOFT_LIGHT&&e!==p.DODGE&&e!==p.BURN&&e!==p.ADD)throw new Error("Mode ".concat(e," not recognized."));this._cachedBlendMode=e,this.drawingContext.globalCompositeOperation=e;}}},{key:"blend",value:function(){for(var e=this.drawingContext.globalCompositeOperation,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var n=r[r.length-1],s=Array.prototype.slice.call(r,0,r.length-1);this.drawingContext.globalCompositeOperation=n,d.default.prototype.copy.apply(this,s),this.drawingContext.globalCompositeOperation=e;}},{key:"_getPixel",value:function(e,t){e=this.drawingContext.getImageData(e,t,1,1).data;return [e[0],e[1],e[2],e[3]]}},{key:"loadPixels",value:function(){var e=this._pixelsState,t=e._pixelDensity,r=this.width*t,t=this.height*t,r=this.drawingContext.getImageData(0,0,r,t);e._setProperty("imageData",r),e._setProperty("pixels",r.data);}},{key:"set",value:function(e,t,r){e=Math.floor(e),t=Math.floor(t);var o=this._pixelsState;if(r instanceof d.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(o._pixelDensity,o._pixelDensity),this.drawingContext.clearRect(e,t,r.width,r.height),this.drawingContext.drawImage(r.canvas,e,t),this.drawingContext.restore();else {var n=0,s=0,i=0,a=0,l=4*(t*o._pixelDensity*(this.width*o._pixelDensity)+e*o._pixelDensity);if(o.imageData||o.loadPixels.call(o),"number"==typeof r)l<o.pixels.length&&(i=s=n=r,a=255);else if(r instanceof Array){if(r.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");l<o.pixels.length&&(n=r[0],s=r[1],i=r[2],a=r[3]);}else r instanceof d.default.Color&&l<o.pixels.length&&(n=r.levels[0],s=r.levels[1],i=r.levels[2],a=r.levels[3]);for(var u=0;u<o._pixelDensity;u++)for(var c=0;c<o._pixelDensity;c++)l=4*((t*o._pixelDensity+c)*this.width*o._pixelDensity+(e*o._pixelDensity+u)),o.pixels[l]=n,o.pixels[l+1]=s,o.pixels[l+2]=i,o.pixels[l+3]=a;}}},{key:"updatePixels",value:function(e,t,r,o){var n=this._pixelsState,s=n._pixelDensity;void 0===e&&void 0===t&&void 0===r&&void 0===o&&(t=e=0,r=this.width,o=this.height),e*=s,t*=s,r*=s,o*=s,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=n.imageData),this.drawingContext.putImageData(n.imageData,e,t,0,0,r,o);}},{key:"_acuteArcToBezier",value:function(e,t){var r=t/2,o=Math.cos(r),n=Math.sin(r),s=1/Math.tan(r),r=e+r,i=Math.cos(r),r=Math.sin(r),a=(4-o)/3,n=n+(o-a)*s;return {ax:Math.cos(e).toFixed(7),ay:Math.sin(e).toFixed(7),bx:(a*i+n*r).toFixed(7),by:(a*r-n*i).toFixed(7),cx:(a*i-n*r).toFixed(7),cy:(a*r+n*i).toFixed(7),dx:Math.cos(e+t).toFixed(7),dy:Math.sin(e+t).toFixed(7)}}},{key:"arc",value:function(r,o,e,t,n,s,i){var a,l=this.drawingContext,u=e/2,c=t/2,d=[];for(r+=u,o+=c;1e-5<=s-n;)a=Math.min(s-n,p.HALF_PI),d.push(this._acuteArcToBezier(n,a)),n+=a;return this._doFill&&(this._clipping||l.beginPath(),d.forEach(function(e,t){0===t&&l.moveTo(r+e.ax*u,o+e.ay*c),l.bezierCurveTo(r+e.bx*u,o+e.by*c,r+e.cx*u,o+e.cy*c,r+e.dx*u,o+e.dy*c);}),i!==p.PIE&&null!=i||l.lineTo(r,o),l.closePath(),this._clipping||l.fill()),this._doStroke&&(this._clipping||l.beginPath(),d.forEach(function(e,t){0===t&&l.moveTo(r+e.ax*u,o+e.ay*c),l.bezierCurveTo(r+e.bx*u,o+e.by*c,r+e.cx*u,o+e.cy*c,r+e.dx*u,o+e.dy*c);}),i===p.PIE?(l.lineTo(r,o),l.closePath()):i===p.CHORD&&l.closePath(),this._clipping||l.stroke()),this}},{key:"ellipse",value:function(e){var t=this.drawingContext,r=this._doFill,o=this._doStroke,n=parseFloat(e[0]),s=parseFloat(e[1]),i=parseFloat(e[2]),e=parseFloat(e[3]);if(r&&!o){if(this._getFill()===f)return this}else if(!r&&o&&this._getStroke()===f)return this;var a=i/2*.5522847498,l=e/2*.5522847498,u=n+i,c=s+e,i=n+i/2,e=s+e/2;this._clipping||t.beginPath(),t.moveTo(n,e),t.bezierCurveTo(n,e-l,i-a,s,i,s),t.bezierCurveTo(i+a,s,u,e-l,u,e),t.bezierCurveTo(u,e+l,i+a,c,i,c),t.bezierCurveTo(i-a,c,n,e+l,n,e),!this._clipping&&r&&t.fill(),!this._clipping&&o&&t.stroke();}},{key:"line",value:function(e,t,r,o){var n=this.drawingContext;return this._doStroke&&this._getStroke()!==f&&(this._clipping||n.beginPath(),n.moveTo(e,t),n.lineTo(r,o),n.stroke()),this}},{key:"point",value:function(e,t){var r,o,n=this.drawingContext;return !this._doStroke||this._getStroke()===f?this:(r=this._getStroke(),o=this._getFill(),this._clipping||this._setFill(r),this._clipping||n.beginPath(),n.arc(e,t,n.lineWidth/2,0,p.TWO_PI,!1),void(this._clipping||(n.fill(),this._setFill(o))))}},{key:"quad",value:function(e,t,r,o,n,s,i,a){var l=this.drawingContext,u=this._doFill,c=this._doStroke;if(u&&!c){if(this._getFill()===f)return this}else if(!u&&c&&this._getStroke()===f)return this;return this._clipping||l.beginPath(),l.moveTo(e,t),l.lineTo(r,o),l.lineTo(n,s),l.lineTo(i,a),l.closePath(),!this._clipping&&u&&l.fill(),!this._clipping&&c&&l.stroke(),this}},{key:"rect",value:function(e){var t,r,o=e[0],n=e[1],s=e[2],i=e[3],a=e[4],l=e[5],u=e[6],e=e[7],c=this.drawingContext,d=this._doFill,h=this._doStroke;if(d&&!h){if(this._getFill()===f)return this}else if(!d&&h&&this._getStroke()===f)return this;return this._clipping||c.beginPath(),void 0===a?c.rect(o,n,s,i):(void 0===l&&(l=a),void 0===u&&(u=l),void 0===e&&(e=u),h=(d=Math.abs(s))/2,r=(t=Math.abs(i))/2,t<2*(a=d<2*a?h:a)&&(a=r),t<2*(l=d<2*l?h:l)&&(l=r),t<2*(u=d<2*u?h:u)&&(u=r),t<2*(e=d<2*e?h:e)&&(e=r),this._clipping||c.beginPath(),c.moveTo(o+a,n),c.arcTo(o+s,n,o+s,n+i,l),c.arcTo(o+s,n+i,o,n+i,u),c.arcTo(o,n+i,o,n,e),c.arcTo(o,n,o+s,n,a),c.closePath()),!this._clipping&&this._doFill&&c.fill(),!this._clipping&&this._doStroke&&c.stroke(),this}},{key:"triangle",value:function(e){var t=this.drawingContext,r=this._doFill,o=this._doStroke,n=e[0],s=e[1],i=e[2],a=e[3],l=e[4],e=e[5];if(r&&!o){if(this._getFill()===f)return this}else if(!r&&o&&this._getStroke()===f)return this;this._clipping||t.beginPath(),t.moveTo(n,s),t.lineTo(i,a),t.lineTo(l,e),t.closePath(),!this._clipping&&r&&t.fill(),!this._clipping&&o&&t.stroke();}},{key:"endShape",value:function(e,t,r,o,n,s,i){if(0!==t.length&&(this._doStroke||this._doFill)){var a,l,u,c=e===p.CLOSE,d=(c&&!s&&t.push(t[0]),t.length);if(r&&null===i){if(3<d){var h=[],f=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(t[1][0],t[1][1]),l=1;l+2<d;l++)a=t[l],h[0]=[a[0],a[1]],h[1]=[a[0]+(f*t[l+1][0]-f*t[l-1][0])/6,a[1]+(f*t[l+1][1]-f*t[l-1][1])/6],h[2]=[t[l+1][0]+(f*t[l][0]-f*t[l+2][0])/6,t[l+1][1]+(f*t[l][1]-f*t[l+2][1])/6],h[3]=[t[l+1][0],t[l+1][1]],this.drawingContext.bezierCurveTo(h[1][0],h[1][1],h[2][0],h[2][1],h[3][0],h[3][1]);c&&this.drawingContext.lineTo(t[l+1][0],t[l+1][1]),this._doFillStrokeClose(c);}}else if(o&&null===i){for(this._clipping||this.drawingContext.beginPath(),l=0;l<d;l++)t[l].isVert?t[l].moveTo?this.drawingContext.moveTo(t[l][0],t[l][1]):this.drawingContext.lineTo(t[l][0],t[l][1]):this.drawingContext.bezierCurveTo(t[l][0],t[l][1],t[l][2],t[l][3],t[l][4],t[l][5]);this._doFillStrokeClose(c);}else if(n&&null===i){for(this._clipping||this.drawingContext.beginPath(),l=0;l<d;l++)t[l].isVert?t[l].moveTo?this.drawingContext.moveTo(t[l][0],t[l][1]):this.drawingContext.lineTo(t[l][0],t[l][1]):this.drawingContext.quadraticCurveTo(t[l][0],t[l][1],t[l][2],t[l][3]);this._doFillStrokeClose(c);}else if(i===p.POINTS)for(l=0;l<d;l++)a=t[l],this._doStroke&&this._pInst.stroke(a[6]),this._pInst.point(a[0],a[1]);else if(i===p.LINES)for(l=0;l+1<d;l+=2)a=t[l],this._doStroke&&this._pInst.stroke(t[l+1][6]),this._pInst.line(a[0],a[1],t[l+1][0],t[l+1][1]);else if(i===p.TRIANGLES)for(l=0;l+2<d;l+=3)a=t[l],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(a[0],a[1]),this.drawingContext.lineTo(t[l+1][0],t[l+1][1]),this.drawingContext.lineTo(t[l+2][0],t[l+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(t[l+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(t[l+2][6]),this.drawingContext.stroke());else if(i===p.TRIANGLE_STRIP)for(l=0;l+1<d;l++)a=t[l],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(t[l+1][0],t[l+1][1]),this.drawingContext.lineTo(a[0],a[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(t[l+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(t[l+1][5]),l+2<d&&(this.drawingContext.lineTo(t[l+2][0],t[l+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(t[l+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(t[l+2][5])),this._doFillStrokeClose(c);else if(i===p.TRIANGLE_FAN){if(2<d){for(this._clipping||this.drawingContext.beginPath(),l=2;l<d;l++)a=t[l],this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[l-1][0],t[l-1][1]),this.drawingContext.lineTo(a[0],a[1]),this.drawingContext.lineTo(t[0][0],t[0][1]),l<d-1&&(this._doFill&&a[5]!==t[l+1][5]||this._doStroke&&a[6]!==t[l+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(a[5]),this.drawingContext.fill(),this._pInst.fill(t[l+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(a[6]),this.drawingContext.stroke(),this._pInst.stroke(t[l+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(c);}}else if(i===p.QUADS)for(l=0;l+3<d;l+=4){for(a=t[l],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(a[0],a[1]),u=1;u<4;u++)this.drawingContext.lineTo(t[l+u][0],t[l+u][1]);this.drawingContext.lineTo(a[0],a[1]),!this._clipping&&this._doFill&&this._pInst.fill(t[l+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(t[l+3][6]),this._doFillStrokeClose(c);}else if(i===p.QUAD_STRIP){if(3<d)for(l=0;l+1<d;l+=2)a=t[l],this._clipping||this.drawingContext.beginPath(),l+3<d?(this.drawingContext.moveTo(t[l+2][0],t[l+2][1]),this.drawingContext.lineTo(a[0],a[1]),this.drawingContext.lineTo(t[l+1][0],t[l+1][1]),this.drawingContext.lineTo(t[l+3][0],t[l+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(t[l+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(t[l+3][6])):(this.drawingContext.moveTo(a[0],a[1]),this.drawingContext.lineTo(t[l+1][0],t[l+1][1])),this._doFillStrokeClose(c);}else {for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),l=1;l<d;l++)(a=t[l]).isVert&&(a.moveTo?(c&&this.drawingContext.closePath(),this.drawingContext.moveTo(a[0],a[1])):this.drawingContext.lineTo(a[0],a[1]));this._doFillStrokeClose(c);}s=n=o=r=!1,c&&t.pop();}return this}},{key:"strokeCap",value:function(e){return e!==p.ROUND&&e!==p.SQUARE&&e!==p.PROJECT||(this.drawingContext.lineCap=e),this}},{key:"strokeJoin",value:function(e){return e!==p.ROUND&&e!==p.BEVEL&&e!==p.MITER||(this.drawingContext.lineJoin=e),this}},{key:"strokeWeight",value:function(e){return this.drawingContext.lineWidth=void 0===e||0===e?1e-4:e,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(e){e!==this._cachedFillStyle&&(this.drawingContext.fillStyle=e,this._cachedFillStyle=e);}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(e){e!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=e,this._cachedStrokeStyle=e);}},{key:"bezier",value:function(e,t,r,o,n,s,i,a){return this._pInst.beginShape(),this._pInst.vertex(e,t),this._pInst.bezierVertex(r,o,n,s,i,a),this._pInst.endShape(),this}},{key:"curve",value:function(e,t,r,o,n,s,i,a){return this._pInst.beginShape(),this._pInst.curveVertex(e,t),this._pInst.curveVertex(r,o),this._pInst.curveVertex(n,s),this._pInst.curveVertex(i,a),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(e){e&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke();}},{key:"applyMatrix",value:function(e,t,r,o,n,s){this.drawingContext.transform(e,t,r,o,n,s);}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(e){this.drawingContext.rotate(e);}},{key:"scale",value:function(e,t){return this.drawingContext.scale(e,t),this}},{key:"translate",value:function(e,t){return e instanceof d.default.Vector&&(t=e.y,e=e.x),this.drawingContext.translate(e,t),this}},{key:"_renderText",value:function(e,t,r,o,n,s){if(!(o<s||n<=o))return e.push(),this._isOpenType()?this._textFont._renderPath(t,r,o,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(t,r,o),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(p._DEFAULT_TEXT_FILL),this.drawingContext.fillText(t,r,o))),e.pop(),e}},{key:"textWidth",value:function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):this.drawingContext.measureText(e).width}},{key:"_applyTextProperties",value:function(){var e,t=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),e=this._textFont,this._isOpenType()&&(e=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(e||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===p.CENTER?this.drawingContext.textBaseline=p._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,t}},{key:"push",value:function(){return this.drawingContext.save(),l(h(n.prototype),"push",this).call(this)}},{key:"pop",value:function(e){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,l(h(n.prototype),"pop",this).call(this,e);}}])&&s(t.prototype,e),n}(d.default.Renderer),e=(n.prototype.text=function(e,t,r,o,n){void 0!==o&&this.drawingContext.textBaseline===p.BASELINE&&(s=!0,this.drawingContext.textBaseline=p.TOP);var s,o=d.default.Renderer.prototype.text.apply(this,arguments);return s&&(this.drawingContext.textBaseline=p.BASELINE),o},d.default.Renderer2D=n,d.default.Renderer2D);r.default=e;},{"./constants":264,"./main":275,"./p5.Renderer":278,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.function.name":168,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],280:[function(e,t,r){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var h=(e=e("./main"))&&e.__esModule?e:{default:e};h.default.prototype._promisePreloads=[];function o(){return {}}var f=!(h.default.prototype.registerPromisePreload=function(e){h.default.prototype._promisePreloads.push(e);});h.default.prototype._setupPromisePreloads=function(){var e=!0,t=!1,r=void 0;try{for(var o,n=this._promisePreloads[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var s=o.value,i=this,a=s.method,l=s.addCallbacks,u=s.legacyPreloadSetup,c=s.target||this,d=c[a].bind(c);if(c===h.default.prototype){if(f)continue;i=null,d=c[a];}c[a]=this._wrapPromisePreload(i,d,l),u&&(c[u.method]=this._legacyPreloadGenerator(i,u,c[a]));}}catch(e){t=!0,r=e;}finally{try{e||null==n.return||n.return();}finally{if(t)throw r}}f=!0;},h.default.prototype._wrapPromisePreload=function(e,l,u){var t=function(){for(var e=this,t=(this._incrementPreload(),null),r=null,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];if(u)for(var i=n.length-1;0<=i&&!r&&"function"==typeof n[i];i--)r=t,t=n.pop();var a=Promise.resolve(l.apply(this,n));return t&&a.then(t),r&&a.catch(r),a.then(function(){return e._decrementPreload()}),a};return t=e?t.bind(e):t};h.default.prototype._legacyPreloadGenerator=function(e,t,s){var i=t.createBaseObject||o,t=function(){var t=this;this._incrementPreload();for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var n=i.apply(this,r);return s.apply(this,r).then(function(e){Object.assign(n,e),t._decrementPreload();}),n};return t=e?t.bind(e):t};},{"./main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],281:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=(n=e("./main"))&&n.__esModule?n:{default:n},u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return {default:e};var t=i();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("./constants"));function i(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,i=function(){return e},e)}function a(e){return (a="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var c="defaultCanvas0",n=(l.default.prototype.createCanvas=function(e,t,r,o){var n,s,i;if(l.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(r=u.P2D,o=arguments[2]):n=r||u.P2D,o)(i=document.getElementById(c))&&i.parentNode.removeChild(i),i=o,this._defaultGraphicsCreated=!1;else {if(n===u.WEBGL)(i=document.getElementById(c))&&(i.parentNode.removeChild(i),s=this._renderer,this._elements=this._elements.filter(function(e){return e!==s})),(i=document.createElement("canvas")).id=c,i.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)i=this.canvas;else {i=o||document.createElement("canvas");for(var a=0;document.getElementById("defaultCanvas".concat(a));)a++;c="defaultCanvas".concat(a),i.id=c,i.classList.add("p5Canvas");}this._setupDone||(i.dataset.hidden=!0,i.style.visibility="hidden"),(this._userNode||(0===document.getElementsByTagName("main").length&&(r=document.createElement("main"),document.body.appendChild(r)),document.getElementsByTagName("main")[0])).appendChild(i);}return n===u.WEBGL?(this._setProperty("_renderer",new l.default.RendererGL(i,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new l.default.Renderer2D(i,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(e,t),this._renderer._applyDefaults(),this._renderer},l.default.prototype.resizeCanvas=function(e,t,r){if(l.default._validateParameters("resizeCanvas",arguments),this._renderer){var o,n,s={};for(o in this.drawingContext){var i=this.drawingContext[o];"object"!==a(i)&&"function"!=typeof i&&(s[o]=i);}for(n in this.width=e,this.height=t,this._renderer.resize(e,t),s)try{this.drawingContext[n]=s[n];}catch(e){}r||this.redraw();}this._addAccsOutput()&&this._updateAccsOutput();},l.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas);},l.default.prototype.createGraphics=function(e,t){for(var r=arguments.length,o=new Array(2<r?r-2:0),n=2;n<r;n++)o[n-2]=arguments[n];return o[0]instanceof HTMLCanvasElement&&(o[1]=o[0],o[0]=u.P2D),l.default._validateParameters("createGraphics",arguments),new l.default.Graphics(e,t,o[0],this,o[1])},l.default.prototype.createFramebuffer=function(e){return new l.default.Framebuffer(this,e)},l.default.prototype.blendMode=function(e){l.default._validateParameters("blendMode",arguments),e===u.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),e=u.BLEND),this._renderer.blendMode(e);},l.default);r.default=n;},{"../webgl/p5.RendererGL":332,"./constants":264,"./main":275,"./p5.Graphics":277,"./p5.Renderer2D":279,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],282:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("../main")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=c();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../constants")),u=n(e("../helpers"));function c(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,c=function(){return e},e)}function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),l.default.prototype._normalizeArcAngles=function(e,t,r,o,n){var s;return e-=a.TWO_PI*Math.floor(e/a.TWO_PI),t-=a.TWO_PI*Math.floor(t/a.TWO_PI),s=Math.min(Math.abs(e-t),a.TWO_PI-Math.abs(e-t)),n&&(e=e<=a.HALF_PI?Math.atan(r/o*Math.tan(e)):e>a.HALF_PI&&e<=3*a.HALF_PI?Math.atan(r/o*Math.tan(e))+a.PI:Math.atan(r/o*Math.tan(e))+a.TWO_PI,t=t<=a.HALF_PI?Math.atan(r/o*Math.tan(t)):t>a.HALF_PI&&t<=3*a.HALF_PI?Math.atan(r/o*Math.tan(t))+a.PI:Math.atan(r/o*Math.tan(t))+a.TWO_PI),t<e&&(t+=a.TWO_PI),{start:e,stop:t,correspondToSamePoint:s<1e-5}},l.default.prototype.arc=function(e,t,r,o,n,s,i,a){return l.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&n!==s&&(n=this._toRadians(n),s=this._toRadians(s),r=Math.abs(r),o=Math.abs(o),e=u.default.modeAdjust(e,t,r,o,this._renderer._ellipseMode),(t=this._normalizeArcAngles(n,s,e.w,e.h,!0)).correspondToSamePoint?this._renderer.ellipse([e.x,e.y,e.w,e.h,a]):(this._renderer.arc(e.x,e.y,e.w,e.h,t.start,t.stop,i,a),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[e.x,e.y,e.w,e.h,t.start,t.stop,i]))),this},l.default.prototype.ellipse=function(e,t,r,o,n){return l.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},l.default.prototype.circle=function(){l.default._validateParameters("circle",arguments);var e=Array.prototype.slice.call(arguments,0,2);return e.push(arguments[2]),e.push(arguments[2]),this._renderEllipse.apply(this,s(e))},l.default.prototype._renderEllipse=function(e,t,r,o,n){return (this._renderer._doStroke||this._renderer._doFill)&&(r<0&&(r=Math.abs(r)),void 0===o?o=r:o<0&&(o=Math.abs(o)),e=u.default.modeAdjust(e,t,r,o,this._renderer._ellipseMode),this._renderer.ellipse([e.x,e.y,e.w,e.h,n]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[e.x,e.y,e.w,e.h])),this},l.default.prototype.line=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return l.default._validateParameters("line",r),this._renderer._doStroke&&(e=this._renderer).line.apply(e,r),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",r),this},l.default.prototype.point=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return l.default._validateParameters("point",r),this._renderer._doStroke&&(1===r.length&&r[0]instanceof l.default.Vector?this._renderer.point.call(this._renderer,r[0].x,r[0].y,r[0].z):((e=this._renderer).point.apply(e,r),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",r))),this},l.default.prototype.quad=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return l.default._validateParameters("quad",r),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&r.length<12?this._renderer.quad.call(this._renderer,r[0],r[1],0,r[2],r[3],0,r[4],r[5],0,r[6],r[7],0,r[8],r[9]):((e=this._renderer).quad.apply(e,r),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",r))),this},l.default.prototype.rect=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.default._validateParameters("rect",t),this._renderRect.apply(this,t)},l.default.prototype.square=function(e,t,r,o,n,s,i){return l.default._validateParameters("square",arguments),this._renderRect.call(this,e,t,r,r,o,n,s,i)},l.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var e=u.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),t=[e.x,e.y,e.w,e.h],r=4;r<arguments.length;r++)t[r]=arguments[r];this._renderer.rect(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[e.x,e.y,e.w,e.h]);}return this},l.default.prototype.triangle=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.default._validateParameters("triangle",t),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",t),this};e=l.default;r.default=e;},{"../constants":264,"../friendly_errors/fes_core":266,"../friendly_errors/file_errors":267,"../friendly_errors/validate_params":270,"../helpers":271,"../main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],283:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(l=e("../main"))&&l.__esModule?l:{default:l},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}n.default.prototype.ellipseMode=function(e){return n.default._validateParameters("ellipseMode",arguments),e!==s.CORNER&&e!==s.CORNERS&&e!==s.RADIUS&&e!==s.CENTER||(this._renderer._ellipseMode=e),this},n.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},n.default.prototype.rectMode=function(e){return n.default._validateParameters("rectMode",arguments),e!==s.CORNER&&e!==s.CORNERS&&e!==s.RADIUS&&e!==s.CENTER||(this._renderer._rectMode=e),this},n.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},n.default.prototype.strokeCap=function(e){return n.default._validateParameters("strokeCap",arguments),e!==s.ROUND&&e!==s.SQUARE&&e!==s.PROJECT||this._renderer.strokeCap(e),this},n.default.prototype.strokeJoin=function(e){return n.default._validateParameters("strokeJoin",arguments),e!==s.ROUND&&e!==s.BEVEL&&e!==s.MITER||this._renderer.strokeJoin(e),this},n.default.prototype.strokeWeight=function(e){return n.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(e),this};var l=n.default;r.default=l;},{"../constants":264,"../main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],284:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=(o=e("../main"))&&o.__esModule?o:{default:o};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),l.default.prototype.bezier=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return l.default._validateParameters("bezier",r),(this._renderer._doStroke||this._renderer._doFill)&&(e=this._renderer).bezier.apply(e,r),this},l.default.prototype.bezierDetail=function(e){return l.default._validateParameters("bezierDetail",arguments),this._bezierDetail=e,this},l.default.prototype.bezierPoint=function(e,t,r,o,n){l.default._validateParameters("bezierPoint",arguments);var s=1-n;return Math.pow(s,3)*e+3*Math.pow(s,2)*n*t+3*s*Math.pow(n,2)*r+Math.pow(n,3)*o},l.default.prototype.bezierTangent=function(e,t,r,o,n){l.default._validateParameters("bezierTangent",arguments);var s=1-n;return 3*o*Math.pow(n,2)-3*r*Math.pow(n,2)+6*r*s*n-6*t*s*n+3*t*Math.pow(s,2)-3*e*Math.pow(s,2)},l.default.prototype.curve=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return l.default._validateParameters("curve",r),this._renderer._doStroke&&(e=this._renderer).curve.apply(e,r),this},l.default.prototype.curveDetail=function(e){return l.default._validateParameters("curveDetail",arguments),this._curveDetail=e<3?3:e,this},l.default.prototype.curveTightness=function(e){return l.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=e,this},l.default.prototype.curvePoint=function(e,t,r,o,n){l.default._validateParameters("curvePoint",arguments);var s=this._renderer._curveTightness,i=n*n*n,a=n*n;return e*((s-1)/2*i+(1-s)*a+(s-1)/2*n)+t*((s+3)/2*i+(-5-s)/2*a+1)+r*((-3-s)/2*i+(s+2)*a+(1-s)/2*n)+o*((1-s)/2*i+(s-1)/2*a)},l.default.prototype.curveTangent=function(e,t,r,o,n){l.default._validateParameters("curveTangent",arguments);var s=this._renderer._curveTightness,i=n*n*3,n=2*n;return e*((s-1)/2*i+(1-s)*n+(s-1)/2)+t*((s+3)/2*i+(-5-s)/2*n)+r*((-3-s)/2*i+(s+2)*n+(1-s)/2)+o*((1-s)/2*i+(s-1)/2*n)};var o=l.default;r.default=o;},{"../friendly_errors/fes_core":266,"../friendly_errors/file_errors":267,"../friendly_errors/validate_params":270,"../main":275}],285:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=(y=e("../main"))&&y.__esModule?y:{default:y},l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=u();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../constants"));function u(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,u=function(){return e},e)}var n=null,c=[],d=[],h=!1,s=!1,f=!1,p=!1,m=!0,y=(a.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(d=[],p=!0),this},a.default.prototype.beginShape=function(e){var t;return a.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(t=this._renderer).beginShape.apply(t,arguments):(n=e===l.POINTS||e===l.LINES||e===l.TRIANGLES||e===l.TRIANGLE_FAN||e===l.TRIANGLE_STRIP||e===l.QUADS||e===l.QUAD_STRIP?e:null,c=[],d=[]),this},a.default.prototype.bezierVertex=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if(a.default._validateParameters("bezierVertex",r),this._renderer.isP3D)(e=this._renderer).bezierVertex.apply(e,r);else if(0===c.length)a.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else {h=!0;for(var n=[],s=0;s<r.length;s++)n[s]=r[s];n.isVert=!1,(p?d:c).push(n);}return this},a.default.prototype.curveVertex=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return a.default._validateParameters("curveVertex",r),this._renderer.isP3D?(e=this._renderer).curveVertex.apply(e,r):(s=!0,this.vertex(r[0],r[1])),this},a.default.prototype.endContour=function(){if(!this._renderer.isP3D){var e=d[0].slice();e.isVert=d[0].isVert,e.moveTo=!1,d.push(e),m&&(c.push(c[0]),m=!1);for(var t=0;t<d.length;t++)c.push(d[t]);}return this},a.default.prototype.endShape=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(a.default._validateParameters("endShape",arguments),t<1&&(console.log("🌸 p5.js says: You can not have less than one instance"),t=1),this._renderer.isP3D)this._renderer.endShape(e,s,h,f,p,n,t);else {if(1!==t&&console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode"),0===c.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;t=e===l.CLOSE;t&&!p&&c.push(c[0]),this._renderer.endShape(e,c,s,h,f,p,n),m=!(p=f=h=s=!1),t&&c.pop();}return this},a.default.prototype.quadraticVertex=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if(a.default._validateParameters("quadraticVertex",r),this._renderer.isP3D)(e=this._renderer).quadraticVertex.apply(e,r);else {if(this._contourInited)return (e={}).x=r[0],e.y=r[1],e.x3=r[2],e.y3=r[3],e.type=l.QUADRATIC,this._contourVertices.push(e),this;if(0<c.length){f=!0;for(var n=[],s=0;s<r.length;s++)n[s]=r[s];n.isVert=!1,(p?d:c).push(n);}else a.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex");}return this},a.default.prototype.vertex=function(e,t,r,o,n){var s;return this._renderer.isP3D?(s=this._renderer).vertex.apply(s,arguments):((s=[]).isVert=!0,s[0]=e,s[1]=t,s[2]=0,s[3]=0,s[4]=0,s[5]=this._renderer._getFill(),s[6]=this._renderer._getStroke(),r&&(s.moveTo=r),(p?(0===d.length&&(s.moveTo=!0),d):c).push(s)),this},a.default.prototype.normal=function(e,t,r){var o;return this._assert3d("normal"),a.default._validateParameters("normal",arguments),(o=this._renderer).normal.apply(o,arguments),this},a.default);r.default=y;},{"../constants":264,"../main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],286:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(e){return (n="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}var l,u,c;e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60);},"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(l=Object.keys,e=Object.defineProperty,u="function"==typeof Symbol&&"symbol"===n(Symbol()),c=Object.prototype.propertyIsEnumerable,e(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("target must be an object");for(var r,o=Object(e),n=1;n<arguments.length;++n){var s=Object(arguments[n]),i=l(s);for(u&&Object.getOwnPropertySymbols&&i.push.apply(i,a(Object.getOwnPropertySymbols(s).filter(function(t){return function(e){return c.call(t,e)}}(s)))),r=0;r<i.length;++r)o[i[r]]=s[i[r]];}return o},configurable:!0,enumerable:!1,writable:!0}));},{"core-js/modules/es.array.filter":155,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/web.dom-collections.iterator":238}],287:[function(e,t,r){e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.assign"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("./main"))&&e.__esModule?e:{default:e};e.default.prototype.noLoop=function(){this._loop=!1;},e.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw());},e.default.prototype.isLooping=function(){return this._loop},e.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()});},e.default.prototype.pop=function(){var e=this._styles.pop();e?(this._renderer.pop(e.renderer),Object.assign(this,e.props)):console.warn("pop() was called without matching push()");},e.default.prototype.redraw=function(e){if(!this._inUserDraw&&this._setupDone){var t=parseInt(e),r=((isNaN(t)||t<1)&&(t=1),this._isGlobal?window:this);if("function"==typeof r.draw){void 0===r.setup&&r.scale(r._pixelDensity,r._pixelDensity);for(var o=0;o<t;o++){r.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),r._renderer.isP3D&&r._renderer._update(),r._setProperty("frameCount",r.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{r.draw();}finally{this._inUserDraw=!1;}this.callRegisteredHooksFor("post");}}}};e=e.default;r.default=e;},{"./main":275,"core-js/modules/es.object.assign":176}],288:[function(e,t,r){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(e=e("./main"))&&e.__esModule?e:{default:e};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.default.prototype.applyMatrix=function(){var e=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||e?(e=this._renderer).applyMatrix.apply(e,o(arguments.length<=0?void 0:arguments[0])):(e=this._renderer).applyMatrix.apply(e,arguments),this},n.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},n.default.prototype.rotate=function(e,t){return n.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(e),t),this},n.default.prototype.rotateX=function(e){return this._assert3d("rotateX"),n.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(e)),this},n.default.prototype.rotateY=function(e){return this._assert3d("rotateY"),n.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(e)),this},n.default.prototype.rotateZ=function(e){return this._assert3d("rotateZ"),n.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(e)),this},n.default.prototype.scale=function(e,t,r){var o;return n.default._validateParameters("scale",arguments),e instanceof n.default.Vector?(e=(o=e).x,t=o.y,r=o.z):e instanceof Array&&(e=(o=e)[0],t=o[1],r=o[2]||1),isNaN(t)?t=r=e:isNaN(r)&&(r=1),this._renderer.scale.call(this._renderer,e,t,r),this},n.default.prototype.shearX=function(e){n.default._validateParameters("shearX",arguments);e=this._toRadians(e);return this._renderer.applyMatrix(1,0,Math.tan(e),1,0,0),this},n.default.prototype.shearY=function(e){n.default._validateParameters("shearY",arguments);e=this._toRadians(e);return this._renderer.applyMatrix(1,Math.tan(e),0,1,0,0),this},n.default.prototype.translate=function(e,t,r){return n.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(e,t,r):this._renderer.translate(e,t),this};e=n.default;r.default=e;},{"./main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.iterator":238}],289:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var n=(e=e("../core/main"))&&e.__esModule?e:{default:e};function s(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}n.default.prototype.storeItem=function(e,t){"string"!=typeof e&&console.log("The argument that you passed to storeItem() - ".concat(e," is not a string.")),e.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(e," must not end with 'p5TypeID'.")),void 0===t&&console.log("You cannot store undefined variables using storeItem().");var r=i(t);switch(r){case"number":case"boolean":t=t.toString();break;case"object":t instanceof n.default.Color?r="p5.Color":t instanceof n.default.Vector&&(r="p5.Vector",t=[t.x,t.y,t.z]),t=JSON.stringify(t);}localStorage.setItem(e,t);e="".concat(e,"p5TypeID");localStorage.setItem(e,r);},n.default.prototype.getItem=function(e){var t=localStorage.getItem(e),r=localStorage.getItem("".concat(e,"p5TypeID"));if(void 0===r)console.log("Unable to determine type of item stored under ".concat(e,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==t)switch(r){case"number":t=parseFloat(t);break;case"boolean":t="true"===t;break;case"object":t=JSON.parse(t);break;case"p5.Color":t=JSON.parse(t),t=this.color.apply(this,s(t.levels));break;case"p5.Vector":t=JSON.parse(t),t=this.createVector.apply(this,s(t));}return t},n.default.prototype.clearStorage=function(){localStorage.clear();},n.default.prototype.removeItem=function(e){"string"!=typeof e&&console.log("The argument that you passed to removeItem() - ".concat(e," is not a string.")),localStorage.removeItem(e),localStorage.removeItem("".concat(e,"p5TypeID"));};},{"../core/main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.ends-with":190,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],290:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return (n="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t);}function a(e,t){return (a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(r){return function(){var e,t=u(r),t=(e=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){}}}()?(e=u(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==n(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function u(e){return (u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function h(e,t,r){t&&d(e.prototype,t),r&&d(e,r);}s.default.prototype.createStringDict=function(e,t){return s.default._validateParameters("createStringDict",arguments),new s.default.StringDict(e,t)},s.default.prototype.createNumberDict=function(e,t){return s.default._validateParameters("createNumberDict",arguments),new s.default.NumberDict(e,t)},s.default.TypedDict=function(){function r(e,t){return c(this,r),e instanceof Object?this.data=e:(this.data={},this.data[e]=t),this}return h(r,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(e){return this.data.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.data.hasOwnProperty(e))return this.data[e];console.log("".concat(e," does not exist in this Dictionary"));}},{key:"set",value:function(e,t){this._validate(t)?this.data[e]=t:console.log("Those values dont work for this dictionary type.");}},{key:"_addObj",value:function(e){for(var t in e)this.set(t,e[t]);}},{key:"create",value:function(e,t){e instanceof Object&&void 0===t?this._addObj(e):void 0!==e?this.set(e,t):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair");}},{key:"clear",value:function(){this.data={};}},{key:"remove",value:function(e){if(!this.data.hasOwnProperty(e))throw new Error("".concat(e," does not exist in this Dictionary"));delete this.data[e];}},{key:"print",value:function(){for(var e in this.data)console.log("key:".concat(e," value:").concat(this.data[e]));}},{key:"saveTable",value:function(e){var t,r="";for(t in this.data)r+="".concat(t,",").concat(this.data[t],"\n");var o=new Blob([r],{type:"text/csv"});s.default.prototype.downloadFile(o,e||"mycsv","csv");}},{key:"saveJSON",value:function(e,t){s.default.prototype.saveJSON(this.data,e,t);}},{key:"_validate",value:function(e){return !0}}]),r}(),s.default.StringDict=function(){i(n,s.default.TypedDict);var o=l(n);function n(){c(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.call.apply(o,[this].concat(t))}return h(n,[{key:"_validate",value:function(e){return "string"==typeof e}}]),n}(),s.default.NumberDict=function(){i(n,s.default.TypedDict);var o=l(n);function n(){c(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.call.apply(o,[this].concat(t))}return h(n,[{key:"_validate",value:function(e){return "number"==typeof e}},{key:"add",value:function(e,t){this.data.hasOwnProperty(e)?this.data[e]+=t:console.log("The key - ".concat(e," does not exist in this dictionary."));}},{key:"sub",value:function(e,t){this.add(e,-t);}},{key:"mult",value:function(e,t){this.data.hasOwnProperty(e)?this.data[e]*=t:console.log("The key - ".concat(e," does not exist in this dictionary."));}},{key:"div",value:function(e,t){this.data.hasOwnProperty(e)?this.data[e]/=t:console.log("The key - ".concat(e," does not exist in this dictionary."));}},{key:"_valueTest",value:function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var t,r=this.data[Object.keys(this.data)[0]];for(t in this.data)this.data[t]*e<r*e&&(r=this.data[t]);return r}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var t=Object.keys(this.data)[0],r=1;r<Object.keys(this.data).length;r++)Object.keys(this.data)[r]*e<t*e&&(t=Object.keys(this.data)[r]);return t}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),n}();e=s.default.TypedDict;r.default=e;},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],291:[function(t,r,o){function n(e){return (n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var f=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function a(e,t,r){t&&s(e.prototype,t),r&&s(e,r);}function l(e,t){return (l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){return function(){var e,t,r=i(o);return e=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){}}}()?(e=i(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments),r=this,!(t=e)||"object"!==h(t)&&"function"!=typeof t?c(r):t}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return (i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e){return (h="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)})(e)}function p(e,t,r){(t._userNode||document.body).appendChild(e);r=new(r?f.default.MediaElement:f.default.Element)(e,t);return t._elements.push(r),r}function m(e,t,r,o){var n=document.createElement(t),s=("string"==typeof(r=r||"")&&(r=[r]),!0),t=!1,i=void 0;try{for(var a,l=r[Symbol.iterator]();!(s=(a=l.next()).done);s=!0){var u=a.value,c=document.createElement("source");c.setAttribute("src",u),n.appendChild(c);}}catch(e){t=!0,i=e;}finally{try{s||null==l.return||l.return();}finally{if(t)throw i}}"function"==typeof o&&n.addEventListener("canplaythrough",function e(){o(),n.removeEventListener("canplaythrough",e);});var d=p(n,e,!0);return d.loadedmetadata=!1,n.addEventListener("loadedmetadata",function(){d.width=n.videoWidth,d.height=n.videoHeight,0===d.elt.width&&(d.elt.width=n.videoWidth),0===d.elt.height&&(d.elt.height=n.videoHeight),d.presetPlaybackRate&&(d.elt.playbackRate=d.presetPlaybackRate,delete d.presetPlaybackRate),d.loadedmetadata=!0;}),d}f.default.prototype.select=function(e,t){f.default._validateParameters("select",arguments);t=this._getContainer(t).querySelector(e);return t?this._wrapElement(t):null},f.default.prototype.selectAll=function(e,t){f.default._validateParameters("selectAll",arguments);var r=[],o=this._getContainer(t).querySelectorAll(e);if(o)for(var n=0;n<o.length;n++){var s=this._wrapElement(o[n]);r.push(s);}return r},f.default.prototype._getContainer=function(e){var t=document;return "string"==typeof e?t=document.querySelector(e)||document:e instanceof f.default.Element?t=e.elt:e instanceof HTMLElement&&(t=e),t},f.default.prototype._wrapElement=function(e){var t,r=Array.prototype.slice.call(e.children);return "INPUT"===e.tagName&&"checkbox"===e.type?((t=new f.default.Element(e,this)).checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},t):"VIDEO"===e.tagName||"AUDIO"===e.tagName?new f.default.MediaElement(e,this):"SELECT"===e.tagName?this.createSelect(new f.default.Element(e,this)):0<r.length&&r.every(function(e){return "INPUT"===e.tagName||"LABEL"===e.tagName})?this.createRadio(new f.default.Element(e,this)):new f.default.Element(e,this)},f.default.prototype.removeElements=function(e){f.default._validateParameters("removeElements",arguments);this._elements.filter(function(e){return !(e.elt instanceof HTMLCanvasElement)}).map(function(e){return e.remove()});},f.default.Element.prototype.changed=function(e){return f.default.Element._adjustListener("change",e,this),this},f.default.Element.prototype.input=function(e){return f.default.Element._adjustListener("input",e,this),this},f.default.prototype.createDiv=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("div");return t.innerHTML=e,p(t,this)},f.default.prototype.createP=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("p");return t.innerHTML=e,p(t,this)},f.default.prototype.createSpan=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("span");return t.innerHTML=e,p(t,this)},f.default.prototype.createImg=function(){f.default._validateParameters("createImg",arguments);var t,r=document.createElement("img"),o=arguments;return 1<o.length&&"string"==typeof o[1]&&(r.alt=o[1]),2<o.length&&"string"==typeof o[2]&&(r.crossOrigin=o[2]),r.src=o[0],t=p(r,this),r.addEventListener("load",function(){t.width=r.offsetWidth||r.width,t.height=r.offsetHeight||r.height;var e=o[o.length-1];"function"==typeof e&&e(t);}),t},f.default.prototype.createA=function(e,t,r){f.default._validateParameters("createA",arguments);var o=document.createElement("a");return o.href=e,o.innerHTML=t,r&&(o.target=r),p(o,this)},f.default.prototype.createSlider=function(e,t,r,o){f.default._validateParameters("createSlider",arguments);var n=document.createElement("input");return n.type="range",n.min=e,n.max=t,0===o?n.step=1e-18:o&&(n.step=o),"number"==typeof r&&(n.value=r),p(n,this)},f.default.prototype.createButton=function(e,t){f.default._validateParameters("createButton",arguments);var r=document.createElement("button");return r.innerHTML=e,t&&(r.value=t),p(r,this)},f.default.prototype.createCheckbox=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];f.default._validateParameters("createCheckbox",t);var o=document.createElement("div"),n=document.createElement("input"),s=(n.type="checkbox",document.createElement("label")),i=(s.appendChild(n),o.appendChild(s),p(o,this));return i.checked=function(){var e=i.elt.firstElementChild.getElementsByTagName("input")[0];if(e){if(0===arguments.length)return e.checked;e.checked=!(arguments.length<=0||!arguments[0]);}return i},this.value=function(e){return i.value=e,this},t[0]&&(i.value(t[0]),(o=document.createElement("span")).innerHTML=t[0],s.appendChild(o)),t[1]&&(n.checked=!0),i},f.default.prototype.createSelect=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];f.default._validateParameters("createSelect",r);var n,s=r[0];return s instanceof f.default.Element&&s.elt instanceof HTMLSelectElement?this.elt=(e=s).elt:s instanceof HTMLSelectElement?(e=p(s,this),this.elt=s):(n=document.createElement("select"),s&&"boolean"==typeof s&&n.setAttribute("multiple","true"),e=p(n,this),this.elt=n),e.option=function(e,t){var r;if(void 0!==e){for(var o,n=0;n<this.elt.length;n+=1)if(this.elt[n].textContent===e){r=n;break}void 0!==r?!1===t?this.elt.remove(r):this.elt[r].value=t:((o=document.createElement("option")).textContent=e,o.value=void 0===t?e:t,this.elt.appendChild(o),this._pInst._elements.push(o));}},e.selected=function(e){if(void 0!==e){for(var t=0;t<this.elt.length;t+=1)this.elt[t].value.toString()===e.toString()&&(this.elt.selectedIndex=t);return this}if(this.elt.getAttribute("multiple")){var r=[],o=!0,n=!1,s=void 0;try{for(var i,a=this.elt.selectedOptions[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var l=i.value;r.push(l.value);}}catch(e){n=!0,s=e;}finally{try{o||null==a.return||a.return();}finally{if(n)throw s}}return r}return this.elt.value},e.disable=function(e){if("string"==typeof e)for(var t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!0,this.elt[t].selected=!1);else this.elt.disabled=!0;return this},e.enable=function(e){if("string"==typeof e)for(var t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!1,this.elt[t].selected=!1);else {this.elt.disabled=!1;for(var r=0;r<this.elt.length;r++)this.elt[r].disabled=!1,this.elt[r].selected=!1;}return this},e},f.default.prototype.createRadio=function(){function t(e){return e instanceof HTMLInputElement&&"radio"===e.type}function d(e){return e instanceof HTMLLabelElement}var h,e,r,o=arguments.length<=0?void 0:arguments[0];o instanceof f.default.Element&&(o.elt instanceof HTMLDivElement||o.elt instanceof HTMLSpanElement)?(h=o,this.elt=o.elt):o instanceof HTMLDivElement||o instanceof HTMLSpanElement?(h=p(o,this),e=this.elt=o,"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(r=arguments.length<=1?void 0:arguments[1])):("string"==typeof o&&(r=o),e=document.createElement("div"),h=p(e,this),this.elt=e),h._name=r||"radioOption";return h._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(e){return t(e)||d(e)&&t(e.firstElementChild)}).map(function(e){return t(e)?e:e.firstElementChild})},h.option=function(e,t){var r,o,n,s=!0,i=!1,a=void 0;try{for(var l,u=h._getOptionsArray()[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var c=l.value;if(c.value===e){r=c;break}}}catch(e){i=!0,a=e;}finally{try{s||null==u.return||u.return();}finally{if(i)throw a}}return void 0===r&&((r=document.createElement("input")).setAttribute("type","radio"),r.setAttribute("value",e)),r.setAttribute("name",h._name),d(r.parentElement)?o=r.parentElement:(o=document.createElement("label")).insertAdjacentElement("afterbegin",r),o.lastElementChild instanceof HTMLSpanElement?n=o.lastElementChild:(n=document.createElement("span"),r.insertAdjacentElement("afterend",n)),n.innerHTML=void 0===t?e:t,this.elt.appendChild(o),r},h.remove=function(e){var t=!0,r=!1,o=void 0;try{for(var n,s=h._getOptionsArray()[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value;if(i.value===e)return void(d(i.parentElement)?i.parentElement:i).remove()}}catch(e){r=!0,o=e;}finally{try{t||null==s.return||s.return();}finally{if(r)throw o}}},h.value=function(){var e="",t=!0,r=!1,o=void 0;try{for(var n,s=h._getOptionsArray()[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value;if(i.checked){e=i.value;break}}}catch(e){r=!0,o=e;}finally{try{t||null==s.return||s.return();}finally{if(r)throw o}}return e},h.selected=function(e){var t=null;if(void 0===e){var r=!0,o=!1,n=void 0;try{for(var s,i=h._getOptionsArray()[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var a=s.value;if(a.checked){t=a;break}}}catch(e){o=!0,n=e;}finally{try{r||null==i.return||i.return();}finally{if(o)throw n}}}else {h._getOptionsArray().forEach(function(e){e.checked=!1,e.removeAttribute("checked");});var l=!0,o=!1,n=void 0;try{for(var u,c=h._getOptionsArray()[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value;d.value===e&&(d.setAttribute("checked",!0),d.checked=!0,t=d);}}catch(e){o=!0,n=e;}finally{try{l||null==c.return||c.return();}finally{if(o)throw n}}}return t},h.disable=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=!0,r=!1,o=void 0;try{for(var n,s=h._getOptionsArray()[Symbol.iterator]();!(t=(n=s.next()).done);t=!0)n.value.setAttribute("disabled",e);}catch(e){r=!0,o=e;}finally{try{t||null==s.return||s.return();}finally{if(r)throw o}}},h},f.default.prototype.createColorPicker=function(e){f.default._validateParameters("createColorPicker",arguments);var t=document.createElement("input");return t.type="color",e?e instanceof f.default.Color?t.value=e.toString("#rrggbb"):(f.default.prototype._colorMode="rgb",f.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},t.value=f.default.prototype.color(e).toString("#rrggbb")):t.value="#000000",(t=p(t,this)).color=function(){return e&&(e.mode&&(f.default.prototype._colorMode=e.mode),e.maxes&&(f.default.prototype._colorMaxes=e.maxes)),f.default.prototype.color(this.elt.value)},t},f.default.prototype.createInput=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text",r=(f.default._validateParameters("createInput",arguments),document.createElement("input"));return r.setAttribute("value",e),r.setAttribute("type",t),p(r,this)},f.default.prototype.createFileInput=function(a){var e,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];f.default._validateParameters("createFileInput",arguments);if(window.File&&window.FileReader&&window.FileList&&window.Blob)return (e=document.createElement("input")).setAttribute("type","file"),t&&e.setAttribute("multiple",!0),e.addEventListener("change",function(e){var t=!0,r=!1,o=void 0;try{for(var n,s=e.target.files[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value;f.default.File._load(i,a);}}catch(e){r=!0,o=e;}finally{try{t||null==s.return||s.return();}finally{if(r)throw o}}},!1),p(e,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.");},f.default.prototype.createVideo=function(e,t){return f.default._validateParameters("createVideo",arguments),m(this,"video",e,t)},f.default.prototype.createAudio=function(e,t){return f.default._validateParameters("createAudio",arguments),m(this,"audio",e,t)},f.default.prototype.VIDEO="video",f.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(r){var o=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return o?new Promise(function(e,t){o.call(navigator,r,e,t);}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),f.default.prototype.createCapture=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(f.default._validateParameters("createCapture",t),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var o,n=!0,s=!0,i=0,a=t;i<a.length;i++){var l=a[i];l===f.default.prototype.VIDEO?s=!1:l===f.default.prototype.AUDIO?n=!1:"object"===h(l)?u=l:"function"==typeof l&&(o=l);}var u=u||{video:n,audio:s},c=document.createElement("video"),d=(c.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(u).then(function(t){try{"srcObject"in c?c.srcObject=t:c.src=window.URL.createObjectURL(t);}catch(e){c.src=t;}},console.log),p(c,this,!0));return d.loadedmetadata=!1,c.addEventListener("loadedmetadata",function(){c.play(),c.width?(d.width=c.width,d.height=c.height):(d.width=d.elt.width=c.videoWidth,d.height=d.elt.height=c.videoHeight),d.loadedmetadata=!0,o&&o(c.srcObject);}),d},f.default.prototype.createElement=function(e,t){f.default._validateParameters("createElement",arguments);e=document.createElement(e);return void 0!==t&&(e.innerHTML=t),p(e,this)},f.default.Element.prototype.addClass=function(e){return this.elt.className?this.hasClass(e)||(this.elt.className=this.elt.className+" "+e):this.elt.className=e,this},f.default.Element.prototype.removeClass=function(e){return this.elt.classList.remove(e),this},f.default.Element.prototype.hasClass=function(e){return this.elt.classList.contains(e)},f.default.Element.prototype.toggleClass=function(e){return this.elt.classList.contains(e)?this.elt.classList.remove(e):this.elt.classList.add(e),this},f.default.Element.prototype.child=function(e){return void 0===e?this.elt.childNodes:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof f.default.Element&&(e=e.elt),e instanceof HTMLElement&&this.elt.appendChild(e),this)},f.default.Element.prototype.center=function(e){var t=this.elt.style.display,r="none"===this.elt.style.display,o="none"===this.parent().style.display,n={x:this.elt.offsetLeft,y:this.elt.offsetTop},s=(r&&this.show(),o&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),i=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return "both"===e||void 0===e?this.position(s/2+this.parent().offsetLeft,i/2+this.parent().offsetTop):"horizontal"===e?this.position(s/2+this.parent().offsetLeft,n.y):"vertical"===e&&this.position(n.x,i/2+this.parent().offsetTop),this.style("display",t),r&&this.hide(),o&&this.parent().hide(),this},f.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},f.default.Element.prototype.position=function(){return 0===arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="static"!==(arguments.length<=2?void 0:arguments[2])&&"fixed"!==(arguments.length<=2?void 0:arguments[2])&&"relative"!==(arguments.length<=2?void 0:arguments[2])&&"sticky"!==(arguments.length<=2?void 0:arguments[2])&&"initial"!==(arguments.length<=2?void 0:arguments[2])&&"inherit"!==(arguments.length<=2?void 0:arguments[2])?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},f.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=e,this},f.default.Element.prototype._rotate=function(){var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":2===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=e,this},f.default.Element.prototype.style=function(e,t){if(void 0===(t=t instanceof f.default.Color?"rgba("+t.levels[0]+","+t.levels[1]+","+t.levels[2]+","+t.levels[3]/255+")":t)){if(-1===e.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(e);for(var r=e.split(";"),o=0;o<r.length;o++){var n=r[o].split(":");n[0]&&n[1]&&(this.elt.style[n[0].trim()]=n[1].trim());}}else this.elt.style[e]=t,"width"!==e&&"height"!==e&&"left"!==e&&"top"!==e||(t=window.getComputedStyle(this.elt).getPropertyValue(e).replace(/[^\d.]/g,""),this[e]=Math.round(parseFloat(t,10)));return this},f.default.Element.prototype.attribute=function(e,t){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===t?this.elt.getAttribute(e):(this.elt.setAttribute(e,t),this);if(void 0===t)return this.elt.firstChild.getAttribute(e);for(var r=0;r<this.elt.childNodes.length;r++)this.elt.childNodes[r].setAttribute(e,t);},f.default.Element.prototype.removeAttribute=function(e){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var t=0;t<this.elt.childNodes.length;t++)this.elt.childNodes[t].removeAttribute(e);return this.elt.removeAttribute(e),this},f.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},f.default.Element.prototype.show=function(){return this.elt.style.display="block",this},f.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},f.default.Element.prototype.size=function(e,t){if(0===arguments.length)return {width:this.elt.offsetWidth,height:this.elt.offsetHeight};var r=e,o=t,n=f.default.prototype.AUTO;if(r!==n||o!==n){if(r===n?r=t*this.width/this.height:o===n&&(o=e*this.height/this.width),this.elt instanceof HTMLCanvasElement){var s,i={},a=this.elt.getContext("2d");for(s in a)i[s]=a[s];for(s in this.elt.setAttribute("width",r*this._pInst._pixelDensity),this.elt.setAttribute("height",o*this._pInst._pixelDensity),this.elt.style.width=r+"px",this.elt.style.height=o+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),i)this.elt.getContext("2d")[s]=i[s];}else this.elt.style.width=r+"px",this.elt.style.height=o+"px",this.elt.width=r,this.elt.height=o;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight));}return this},f.default.Element.prototype.remove=function(){this instanceof f.default.MediaElement&&(this.stop(),null!==(t=this.elt.srcObject)&&t.getTracks().forEach(function(e){e.stop();}));var e,t=this._pInst._elements.indexOf(this);for(e in -1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(e,this._events[e]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);},f.default.Element.prototype.drop=function(a,l){var e;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",e=function(e){e.preventDefault();}),this.elt.addEventListener("dragleave",e)),f.default.Element._attachListener("drop",function(e){e.preventDefault(),"function"==typeof l&&l.call(this,e);var e=e.dataTransfer.files,t=!0,r=!1,o=void 0;try{for(var n,s=e[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value;f.default.File._load(i,a);}}catch(e){r=!0,o=e;}finally{try{t||null==s.return||s.return();}finally{if(r)throw o}}},this)):console.log("The File APIs are not fully supported in this browser."),this},f.default.Element.prototype.draggable=function(r){var e,o="ontouchstart"in window,n=0,s=0,i=0,a=0,l=o?"touchend":"mouseup",u=o?"touchmove":"mousemove";function c(e){var t;e=e||window.event,a=o?(t=e.changedTouches,n=i-parseInt(t[0].clientX),s=a-parseInt(t[0].clientY),i=parseInt(t[0].clientX),parseInt(t[0].clientY)):(n=i-parseInt(e.clientX),s=a-parseInt(e.clientY),i=parseInt(e.clientX),parseInt(e.clientY)),r.style.left=r.offsetLeft-n+"px",r.style.top=r.offsetTop-s+"px";}function d(){document.removeEventListener(l,d,!1),document.removeEventListener(u,c,!1);}return void 0===r?e=r=this.elt:r!==this.elt&&r.elt!==this.elt&&(r=r.elt,e=this.elt),e.addEventListener(o?"touchstart":"mousedown",function(e){{var t;e=e||window.event,a=o?(t=e.changedTouches,i=parseInt(t[0].clientX),parseInt(t[0].clientY)):(i=parseInt(e.clientX),parseInt(e.clientY));}return document.addEventListener(l,d,!1),document.addEventListener(u,c,!1),!1},!1),e.style.cursor="move",this};function y(e,t,r,o){d(this,y),this.callback=e,this.time=t,this.id=r,this.val=o;}t=function(t){var r=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&l(r,t);var s=u(i);function i(o,e){d(this,i);var n=c(e=s.call(this,o,e));return e.elt.crossOrigin="anonymous",e._prevTime=0,e._cueIDCounter=0,e._cues=[],e.pixels=[],e._pixelsState=c(e),e._pixelDensity=1,e._modified=!1,e._frameOnCanvas=-1,Object.defineProperty(n,"src",{get:function(){var e=n.elt.children[0].src,t=n.elt.src===window.location.href?"":n.elt.src;return e===window.location.href?t:e},set:function(e){for(var t=0;t<n.elt.children.length;t++)n.elt.removeChild(n.elt.children[t]);var r=document.createElement("source");r.src=e,o.appendChild(r),n.elt.src=e,n.modified=!0;}}),n._onended=function(){},n.elt.onended=function(){n._onended(n);},e}return a(i,[{key:"play",value:function(){var e;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(e=this.elt.play())&&e.catch&&e.catch(function(e){"NotAllowedError"===e.name?console.error(e):console.error("Media play method encountered an unexpected error",e);}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var t=setTimeout(function(){console.error(e);},500);this.elt.addEventListener("play",function(){return clearTimeout(t)},{passive:!0,once:!0});}},{key:"autoplay",value:function(e){var t=this,r=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",e),e&&!r&&(e=function(){return t._setupAutoplayFailDetection()},4===this.elt.readyState?e():this.elt.addEventListener("canplay",e,{passive:!0,once:!0})),this}},{key:"volume",value:function(e){if(void 0===e)return this.elt.volume;this.elt.volume=e;}},{key:"speed",value:function(e){if(void 0===e)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=e:this.presetPlaybackRate=e;}},{key:"time",value:function(e){return void 0===e?this.elt.currentTime:(this.elt.currentTime=e,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var e=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&e&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount);}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.default.Renderer2D.prototype.loadPixels.apply(this,t)}},{key:"updatePixels",value:function(e,t,r,o){return this.loadedmetadata&&(this._ensureCanvas(),f.default.Renderer2D.prototype.updatePixels.call(this,e,t,r,o)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.default.Renderer2D.prototype.get.apply(this,t)}},{key:"_getPixel",value:function(){this.loadPixels();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.default.Renderer2D.prototype._getPixel.apply(this,t)}},{key:"set",value:function(e,t,r){this.loadedmetadata&&(this._ensureCanvas(),f.default.Renderer2D.prototype.set.call(this,e,t,r),this.setModified(!0));}},{key:"copy",value:function(){this._ensureCanvas();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];f.default.prototype.copy.apply(this,t);}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];f.default.Image.prototype.mask.apply(this,t);}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(e){this._modified=e;}},{key:"onended",value:function(e){return this._onended=e,this}},{key:"connect",value:function(e){var t,r;if("function"==typeof f.default.prototype.getAudioContext)t=f.default.prototype.getAudioContext(),r=f.default.soundOut.input;else try{r=(t=e.context).destination;}catch(e){throw "connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=t.createMediaElementSource(this.elt),this.audioSourceNode.connect(r)),e?e.input?this.audioSourceNode.connect(e.input):this.audioSourceNode.connect(e):this.audioSourceNode.connect(r);}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw "nothing to disconnect";this.audioSourceNode.disconnect();}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0;}},{key:"hideControls",value:function(){this.elt.controls=!1;}},{key:"addCue",value:function(e,t,r){var o=this._cueIDCounter++,t=new y(t,e,o,r);return this._cues.push(t),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),o}},{key:"removeCue",value:function(e){for(var t=0;t<this._cues.length;t++)this._cues[t].id===e&&(console.log(e),this._cues.splice(t,1));0===this._cues.length&&(this.elt.ontimeupdate=null);}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null;}},{key:"_onTimeUpdate",value:function(){for(var e=this.time(),t=0;t<this._cues.length;t++){var r=this._cues[t].time,o=this._cues[t].val;this._prevTime<r&&r<=e&&this._cues[t].callback(o);}this._prevTime=e;}}]),i}(f.default.Element),f.default.MediaElement=t,t=function(){function r(e,t){d(this,r),this.file=e,this._pInst=t;t=e.type.split("/");this.type=t[0],this.subtype=t[1],this.name=e.name,this.size=e.size,this.data=void 0;}return a(r,null,[{key:"_createLoader",value:function(o,n){var e=new FileReader;return e.onload=function(e){var t,r=new f.default.File(o);"application/json"===r.file.type?r.data=JSON.parse(e.target.result):"text/xml"===r.file.type?(t=(new DOMParser).parseFromString(e.target.result,"text/xml"),r.data=new f.default.XML(t.documentElement)):r.data=e.target.result,n(r);},e}},{key:"_load",value:function(e,t){var r;/^text\//.test(e.type)||"application/json"===e.type?f.default.File._createLoader(e,t).readAsText(e):/^(video|audio)\//.test(e.type)?((r=new f.default.File(e)).data=URL.createObjectURL(e),t(r)):f.default.File._createLoader(e,t).readAsDataURL(e);}}]),r}(),f.default.File=t,t=f.default;o.default=t;},{"../core/main":275,"core-js/modules/es.array.every":153,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238,"core-js/modules/web.url":240}],292:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(y=e("../core/main"))&&y.__esModule?y:{default:y},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}n.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",n.default.prototype.accelerationX=0,n.default.prototype.accelerationY=0,n.default.prototype.accelerationZ=0,n.default.prototype.pAccelerationX=0,n.default.prototype.pAccelerationY=0,n.default.prototype.pAccelerationZ=0,n.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ);},n.default.prototype.rotationX=0,n.default.prototype.rotationY=0,n.default.prototype.rotationZ=0,n.default.prototype.pRotationX=0,n.default.prototype.pRotationY=0;var l=n.default.prototype.pRotationZ=0,u=0,c=0,d="clockwise",h="clockwise",f="clockwise",p=(n.default.prototype.pRotateDirectionX=void 0,n.default.prototype.pRotateDirectionY=void 0,n.default.prototype.pRotateDirectionZ=void 0,n.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ);},n.default.prototype.turnAxis=void 0,.5),m=30,y=(n.default.prototype.setMoveThreshold=function(e){n.default._validateParameters("setMoveThreshold",arguments),p=e;},n.default.prototype.setShakeThreshold=function(e){n.default._validateParameters("setShakeThreshold",arguments),m=e;},n.default.prototype._ondeviceorientation=function(e){this._updatePRotations(),this._angleMode===s.radians&&(e.beta=e.beta*(_PI/180),e.gamma=e.gamma*(_PI/180),e.alpha=e.alpha*(_PI/180)),this._setProperty("rotationX",e.beta),this._setProperty("rotationY",e.gamma),this._setProperty("rotationZ",e.alpha),this._handleMotion();},n.default.prototype._ondevicemotion=function(e){this._updatePAccelerations(),this._setProperty("accelerationX",2*e.acceleration.x),this._setProperty("accelerationY",2*e.acceleration.y),this._setProperty("accelerationZ",2*e.acceleration.z),this._handleMotion();},n.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var e,t,r,o,n,s=this._isGlobal?window:this;"function"==typeof s.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>p||Math.abs(this.accelerationY-this.pAccelerationY)>p||Math.abs(this.accelerationZ-this.pAccelerationZ)>p)&&s.deviceMoved(),"function"==typeof s.deviceTurned&&(t=this.rotationX+180,e=this.pRotationX+180,r=l+180,0<t-e&&t-e<270||t-e<-270?d="clockwise":(t-e<0||270<t-e)&&(d="counter-clockwise"),d!==this.pRotateDirectionX&&(r=t),90<Math.abs(t-r)&&Math.abs(t-r)<270&&(r=t,this._setProperty("turnAxis","X"),s.deviceTurned()),this.pRotateDirectionX=d,l=r-180,e=this.rotationY+180,t=this.pRotationY+180,r=u+180,0<e-t&&e-t<270||e-t<-270?h="clockwise":(e-t<0||270<e-this.pRotationY)&&(h="counter-clockwise"),h!==this.pRotateDirectionY&&(r=e),90<Math.abs(e-r)&&Math.abs(e-r)<270&&(r=e,this._setProperty("turnAxis","Y"),s.deviceTurned()),this.pRotateDirectionY=h,u=r-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?f="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(f="counter-clockwise"),f!==this.pRotateDirectionZ&&(c=this.rotationZ),90<Math.abs(this.rotationZ-c)&&Math.abs(this.rotationZ-c)<270&&(c=this.rotationZ,this._setProperty("turnAxis","Z"),s.deviceTurned()),this.pRotateDirectionZ=f,this._setProperty("turnAxis",void 0)),"function"==typeof s.deviceShaken&&(null!==this.pAccelerationX&&(o=Math.abs(this.accelerationX-this.pAccelerationX),n=Math.abs(this.accelerationY-this.pAccelerationY)),m<o+n&&s.deviceShaken());},n.default);r.default=y;},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],293:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};o.default.prototype.isKeyPressed=!1,o.default.prototype.keyIsPressed=!1,o.default.prototype.key="",o.default.prototype.keyCode=0,o.default.prototype._onkeydown=function(e){var t;this._downKeys[e.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",e.which),this._downKeys[e.which]=!0,this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),"function"!=typeof(t=this._isGlobal?window:this).keyPressed||e.charCode||!1===t.keyPressed(e)&&e.preventDefault());},o.default.prototype._onkeyup=function(e){this._downKeys[e.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),this._setProperty("keyCode",e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyReleased&&!1===t.keyReleased(e)&&e.preventDefault();},o.default.prototype._onkeypress=function(e){var t;e.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",e.which),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),"function"==typeof(t=this._isGlobal?window:this).keyTyped&&!1===t.keyTyped(e)&&e.preventDefault());},o.default.prototype._onblur=function(e){this._downKeys={};},o.default.prototype.keyIsDown=function(e){return o.default._validateParameters("keyIsDown",arguments),this._downKeys[e]||!1},o.default.prototype._areDownKeys=function(){for(var e in this._downKeys)if(this._downKeys.hasOwnProperty(e)&&!0===this._downKeys[e])return !0;return !1};e=o.default;r.default=e;},{"../core/main":275}],294:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(n=e("../core/main"))&&n.__esModule?n:{default:n},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}n.default.prototype.movedX=0,n.default.prototype.movedY=0,n.default.prototype._hasMouseInteracted=!1,n.default.prototype.mouseX=0,n.default.prototype.mouseY=0,n.default.prototype.pmouseX=0,n.default.prototype.pmouseY=0,n.default.prototype.winMouseX=0,n.default.prototype.winMouseY=0,n.default.prototype.pwinMouseX=0,n.default.prototype.pwinMouseY=0,n.default.prototype.mouseButton=0,n.default.prototype.mouseIsPressed=!1,n.default.prototype._updateNextMouseCoords=function(e){var t,r,o,n,s;null!==this._curElement&&(!e.touches||0<e.touches.length)&&(t=this._curElement.elt,r=this.width,o=this.height,(n=e)&&!n.clientX&&(n.touches?n=n.touches[0]:n.changedTouches&&(n=n.changedTouches[0])),s=t.getBoundingClientRect(),r=t.scrollWidth/r||1,t=t.scrollHeight/o||1,o={x:(n.clientX-s.left)/r,y:(n.clientY-s.top)/t,winX:n.clientX,winY:n.clientY,id:n.identifier},this._setProperty("movedX",e.movementX),this._setProperty("movedY",e.movementY),this._setProperty("mouseX",o.x),this._setProperty("mouseY",o.y),this._setProperty("winMouseX",o.winX),this._setProperty("winMouseY",o.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0));},n.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY);},n.default.prototype._setMouseButton=function(e){1===e.button?this._setProperty("mouseButton",s.CENTER):2===e.button?this._setProperty("mouseButton",s.RIGHT):this._setProperty("mouseButton",s.LEFT);},n.default.prototype._onmousemove=function(e){var t=this._isGlobal?window:this;this._updateNextMouseCoords(e),this.mouseIsPressed?"function"==typeof t.mouseDragged?!1===t.mouseDragged(e)&&e.preventDefault():"function"==typeof t.touchMoved&&!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseMoved&&!1===t.mouseMoved(e)&&e.preventDefault();},n.default.prototype._onmousedown=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(e),this._updateNextMouseCoords(e),"function"==typeof t.mousePressed?!1===t.mousePressed(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.touchStarted&&!1===t.touchStarted(e)&&e.preventDefault();},n.default.prototype._onmouseup=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),"function"==typeof t.mouseReleased?!1===t.mouseReleased(e)&&e.preventDefault():"function"==typeof t.touchEnded&&!1===t.touchEnded(e)&&e.preventDefault();},n.default.prototype._ondragend=n.default.prototype._onmouseup,n.default.prototype._ondragover=n.default.prototype._onmousemove,n.default.prototype._onclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.mouseClicked&&!1===t.mouseClicked(e)&&e.preventDefault();},n.default.prototype._ondblclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.doubleClicked&&!1===t.doubleClicked(e)&&e.preventDefault();},n.default.prototype._mouseWheelDeltaY=0,n.default.prototype._pmouseWheelDeltaY=0,n.default.prototype._onwheel=function(e){var t=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",e.deltaY),"function"==typeof t.mouseWheel&&(e.delta=e.deltaY,!1===t.mouseWheel(e)&&e.preventDefault());},n.default.prototype.requestPointerLock=function(){var e=this._curElement.elt;return e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.requestPointerLock?(e.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},n.default.prototype.exitPointerLock=function(){document.exitPointerLock();};e=n.default;r.default=e;},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],295:[function(e,t,r){e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("../core/main"))&&e.__esModule?e:{default:e};e.default.prototype.touches=[],e.default.prototype._updateTouchCoords=function(e){if(null!==this._curElement){for(var t=[],r=0;r<e.touches.length;r++)t[r]=function(e,t,r,o){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=e.getBoundingClientRect(),t=e.scrollWidth/t||1,e=e.scrollHeight/r||1,r=o.touches[n]||o.changedTouches[n];return {x:(r.clientX-s.left)/t,y:(r.clientY-s.top)/e,winX:r.clientX,winY:r.clientY,id:r.identifier}}(this._curElement.elt,this.width,this.height,e,r);this._setProperty("touches",t);}},e.default.prototype._ontouchstart=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(e),this._updateNextMouseCoords(e),this._updateMouseCoords(),"function"==typeof t.touchStarted?!1===t.touchStarted(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.mousePressed&&!1===t.mousePressed(e)&&e.preventDefault();},e.default.prototype._ontouchmove=function(e){var t=this._isGlobal?window:this;this._updateTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof t.touchMoved?!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseDragged&&!1===t.mouseDragged(e)&&e.preventDefault();},e.default.prototype._ontouchend=function(e){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(e),this._updateNextMouseCoords(e);var t=this._isGlobal?window:this;"function"==typeof t.touchEnded?!1===t.touchEnded(e)&&e.preventDefault():"function"==typeof t.mouseReleased&&!1===t.mouseReleased(e)&&e.preventDefault();};e=e.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.string.includes":191}],296:[function(e,t,r){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var U,N,B,G,V={_toPixels:function(e){var t,r;return e instanceof ImageData?e.data:e.getContext("2d")?e.getContext("2d").getImageData(0,0,e.width,e.height).data:e.getContext("webgl")?(r=(t=e.getContext("webgl")).drawingBufferWidth*t.drawingBufferHeight*4,r=new Uint8Array(r),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,r),r):void 0},_getARGB:function(e,t){t*=4;return e[3+t]<<24&4278190080|e[t]<<16&16711680|e[1+t]<<8&65280|255&e[2+t]},_setPixels:function(e,t){for(var r,o=0,n=e.length;o<n;o++)e[0+(r=4*o)]=(16711680&t[o])>>>16,e[1+r]=(65280&t[o])>>>8,e[2+r]=255&t[o],e[3+r]=(4278190080&t[o])>>>24;},_toImageData:function(e){return e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height)},_createImageData:function(e,t){return V._tmpCanvas=document.createElement("canvas"),V._tmpCtx=V._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},apply:function(e,t,r){var o=e.getContext("2d"),n=o.getImageData(0,0,e.width,e.height),t=t(n,r);t instanceof ImageData?o.putImageData(t,0,0,0,0,e.width,e.height):o.putImageData(n,0,0,0,0,e.width,e.height);},threshold:function(e,t){for(var r=V._toPixels(e),o=(void 0===t&&(t=.5),Math.floor(255*t)),n=0;n<r.length;n+=4){var s=void 0,s=o<=.2126*r[n]+.7152*r[n+1]+.0722*r[n+2]?255:0;r[n]=r[n+1]=r[n+2]=s;}},gray:function(e){for(var t=V._toPixels(e),r=0;r<t.length;r+=4){var o=t[r],n=t[r+1],s=t[r+2];t[r]=t[r+1]=t[r+2]=.2126*o+.7152*n+.0722*s;}},opaque:function(e){for(var t=V._toPixels(e),r=0;r<t.length;r+=4)t[r+3]=255;return t},invert:function(e){for(var t=V._toPixels(e),r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2];},posterize:function(e,t){var r=V._toPixels(e);if((t=void 0===t?4:t)<2||255<t)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var o=t-1,n=0;n<r.length;n+=4){var s=r[n],i=r[n+1],a=r[n+2];r[n]=255*(s*t>>8)/o,r[n+1]=255*(i*t>>8)/o,r[n+2]=255*(a*t>>8)/o;}},dilate:function(e){for(var t,r,o,n,s,i,a,l,u,c=V._toPixels(e),d=0,h=c.length?c.length/4:0,f=new Int32Array(h);d<h;)for(r=(t=d)+e.width;d<r;)n=o=V._getARGB(c,d),(u=d-1)<t&&(u=d),r<=(l=d+1)&&(l=d),(s=d-e.width)<0&&(s=0),h<=(i=d+e.width)&&(i=d),s=V._getARGB(c,s),u=V._getARGB(c,u),i=V._getARGB(c,i),(n=77*(n>>16&255)+151*(n>>8&255)+28*(255&n))<(a=77*(u>>16&255)+151*(u>>8&255)+28*(255&u))&&(o=u,n=a),n<(a=77*((u=V._getARGB(c,l))>>16&255)+151*(u>>8&255)+28*(255&u))&&(o=u,n=a),n<(l=77*(s>>16&255)+151*(s>>8&255)+28*(255&s))&&(o=s,n=l),n<(u=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))&&(o=i,n=u),f[d++]=o;V._setPixels(c,f);},erode:function(e){for(var t,r,o,n,s,i,a,l,u,c=V._toPixels(e),d=0,h=c.length?c.length/4:0,f=new Int32Array(h);d<h;)for(r=(t=d)+e.width;d<r;)n=o=V._getARGB(c,d),(u=d-1)<t&&(u=d),r<=(l=d+1)&&(l=d),(s=d-e.width)<0&&(s=0),h<=(i=d+e.width)&&(i=d),s=V._getARGB(c,s),u=V._getARGB(c,u),i=V._getARGB(c,i),(a=77*(u>>16&255)+151*(u>>8&255)+28*(255&u))<(n=77*(n>>16&255)+151*(n>>8&255)+28*(255&n))&&(o=u,n=a),(a=77*((u=V._getARGB(c,l))>>16&255)+151*(u>>8&255)+28*(255&u))<n&&(o=u,n=a),(l=77*(s>>16&255)+151*(s>>8&255)+28*(255&s))<n&&(o=s,n=l),(u=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))<n&&(o=i,n=u),f[d++]=o;V._setPixels(c,f);},blur:function(e,D){for(var t,r,o,n,s,i,a,l,u,c,d=V._toPixels(e),h=e.width,f=e.height,p=h*f,m=new Int32Array(p),y=0;y<p;y++)m[y]=V._getARGB(d,y);var g,v,b,j,_,x,w,S,T=new Int32Array(p),M=new Int32Array(p),E=new Int32Array(p),F=new Int32Array(p),k=0,C=3.5*D|0;if(U!==(C=C<1?1:C<248?C:248)){N=1+(U=C)<<1,B=new Int32Array(N),G=new Array(N);for(var O=0;O<N;O++)G[O]=new Int32Array(256);for(var P=1,A=C-1;P<C;P++){B[C+P]=B[A]=x=A*A,w=G[C+P],S=G[A--];for(var L=0;L<256;L++)w[L]=S[L]=x*L;}_=B[C]=C*C,w=G[C];for(var R=0;R<256;R++)w[R]=_*R;}for(v=0;v<f;v++){for(g=0;g<h;g++){if(n=o=r=s=t=0,(i=g-U)<0)c=-i,i=0;else {if(h<=i)break;c=0;}for(b=c;b<N&&!(h<=i);b++){var I=m[i+k];j=G[b],s+=j[(-16777216&I)>>>24],r+=j[(16711680&I)>>16],o+=j[(65280&I)>>8],n+=j[255&I],t+=B[b],i++;}T[a=k+g]=s/t,M[a]=r/t,E[a]=o/t,F[a]=n/t;}k+=h;}for(u=(l=-U)*h,v=k=0;v<f;v++){for(g=0;g<h;g++){if(n=o=r=s=t=0,l<0)c=a=-l,i=g;else {if(f<=l)break;c=0,a=l,i=g+u;}for(b=c;b<N&&!(f<=a);b++)j=G[b],s+=j[T[i]],r+=j[M[i]],o+=j[E[i]],n+=j[F[i]],t+=B[b],a++,i+=h;m[g+k]=s/t<<24|r/t<<16|o/t<<8|n/t;}k+=h,u+=h,l++;}V._setPixels(d,m);}};r.default=V;},{"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.int32-array":217,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234}],297:[function(e,t,r){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var C=o(e("../core/main")),O=o(e("omggif"));function o(e){return e&&e.__esModule?e:{default:e}}function P(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}C.default.prototype.createImage=function(e,t){return C.default._validateParameters("createImage",arguments),new C.default.Image(e,t)},C.default.prototype.saveCanvas=function(){C.default._validateParameters("saveCanvas",arguments);var e,t,r,o,n,s,i=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(e=arguments[0],i.shift()):arguments[0]instanceof C.default.Element?(e=arguments[0].elt,i.shift()):arguments[0]instanceof C.default.Framebuffer?((n=this.createGraphics((o=arguments[0]).width,o.height)).pixelDensity(pixelDensity()),o.loadPixels(),n.loadPixels(),n.pixels.set(o.pixels),n.updatePixels(),e=n.elt,i.shift()):e=this._curElement&&this._curElement.elt,1<=i.length&&(t=i[0]),r=(r=2<=i.length?i[1]:r)||C.default.prototype._checkFileExtension(t,r)[1]||"png"){default:s="image/png";break;case"jpeg":case"jpg":s="image/jpeg";}e.toBlob(function(e){C.default.prototype.downloadFile(e,t,r),n&&n.remove();},s);},C.default.prototype.encodeAndDownloadGif=function(d,e){for(var h=d.gifProperties,t=h.loopLimit,r=(1===t?t=null:null===t&&(t=0),new Uint8Array(d.width*d.height*h.numFrames)),f=[],o={},n=0;n<h.numFrames;n++){for(var s=new Set,i=h.frames[n].image.data,a=i.length,l=new Uint32Array(d.width*d.height),u=0,c=0;u<a;u+=4,c++){var p=i[u+0]<<16|i[u+1]<<8|i[u+2]<<0;s.add(p),l[c]=p;}var m=P(s).sort().toString();void 0===o[m]?o[m]={freq:1,frames:[n]}:(o[m].freq+=1,o[m].frames.push(n)),f.push(l);}for(var y=[],g=Object.keys(o).sort(function(e,t){return o[t].freq-o[e].freq}),v=g[0].split(",").map(function(e){return parseInt(e)}),y=y.concat(o[v].frames),b=new Set(v),j=1;j<g.length;j++){var _=g[j].split(",").map(function(e){return parseInt(e)}).filter(function(e){return !b.has(e)});if(v.length+_.length<=256){for(var x=0;x<_.length;x++)v.push(_[x]),b.add(_[x]);y=y.concat(o[g[j]].frames);}}y=new Set(y);for(var w={},S=0;S<v.length;S++)w[v[S]]||(w[v[S]]=S);for(var T=1;T<v.length;)T<<=1;v.length=T;for(var t={loop:t,palette:new Uint32Array(v)},M=new O.default.GifWriter(r,d.width,d.height,t),E={},k=0;k<h.numFrames;k++)!function(r){var o=!y.has(r),n=o?[]:v,s=new Uint8Array(d.width*d.height),i={},a=new Set,e=(f[r].forEach(function(e,t){o?(void 0===i[e]&&(i[e]=n.length,n.push(e)),s[t]=i[e]):s[t]=w[e],0<r&&f[r-1][t]!==e&&a.add(e);}),{}),t=n.filter(function(e){return !a.has(e)});if(0<t.length){var t=t[0],l=(o?i:w)[t];if(0<r){for(var u=0;u<f[r].length;u++)f[r-1][u]===f[r][u]&&(s[u]=l);e.transparent=l,E.frameOpts.disposal=1;}}if(e.delay=h.frames[r].delay/10,o){for(var c=1;c<n.length;)c<<=1;n.length=c,e.palette=new Uint32Array(n);}0<r&&M.addFrame(0,0,d.width,d.height,E.pixelPaletteIndex,E.frameOpts),E={pixelPaletteIndex:s,frameOpts:e};}(k);E.frameOpts.disposal=1,M.addFrame(0,0,d.width,d.height,E.pixelPaletteIndex,E.frameOpts);t=new Blob([r.slice(0,M.end())],{type:"image/gif"});C.default.prototype.downloadFile(t,e,"gif");},C.default.prototype.saveFrames=function(e,t,r,o,n){C.default._validateParameters("saveFrames",arguments);r=C.default.prototype.constrain(r=r||3,0,15);r*=1e3;var o=C.default.prototype.constrain(o||15,0,22),s=0,i=C.default.prototype._makeFrame,a=this._curElement.elt,l=[],u=setInterval(function(){l.push(i(e+s,t,a)),s++;},1e3/o);setTimeout(function(){if(clearInterval(u),n)n(l);else for(var e=0,t=l;e<t.length;e++){var r=t[e];C.default.prototype.downloadFile(r.imageData,r.filename,r.ext);}l=[];},.01+r);},C.default.prototype._makeFrame=function(e,t,r){var o,r=this?this._curElement.elt:r;if(t)switch(t.toLowerCase()){case"png":o="image/png";break;case"jpeg":case"jpg":o="image/jpeg";break;default:o="image/png";}else t="png",o="image/png";var r=(r=r.toDataURL(o)).replace(o,"image/octet-stream"),n={};return n.imageData=r,n.filename=e,n.ext=t,n};e=C.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238,omggif:248}],298:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("regenerator-runtime/runtime");var O=n(e("../core/main")),m=n(e("../core/helpers")),j=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants")),g=n(e("omggif")),P=e("gifenc");function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r,o,n,s,i){try{var a=e[s](i),l=a.value;}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(o,n);}function y(e,t,r,o,n,s,i,a,l,u,c){var d,h,f,p,m,y,g,v,b;return e===j.COVER&&(d=t,f=r,g=s,v=i,y=a,b=l,h=u,p=c,m=Math.max(g/h,v/p),g/=m,v/=m,m=y,y=b,d===j.CENTER?m+=(h-g)/2:d===j.RIGHT&&(m+=h-g),f===j.CENTER?y+=(p-v)/2:f===j.BOTTOM&&(y+=p-v),a=(b={x:m,y:y,w:g,h:v}).x,l=b.y,u=b.w,c=b.h),e===j.CONTAIN&&(d=t,h=r,f=o,p=n,m=s,y=i,g=u,v=c,b=Math.max(g/m,v/y),g/=b,v/=b,b=f,f=p,d===j.CENTER?b+=(m-g)/2:d===j.RIGHT&&(b+=m-g),h===j.CENTER?f+=(y-v)/2:h===j.BOTTOM&&(f+=y-v),o=(e={x:b,y:f,w:g,h:v}).x,n=e.y,s=e.w,i=e.h),{sx:a,sy:l,sw:u,sh:c,dx:o,dy:n,dw:s,dh:i}}function v(e,t){return 0<e&&e<t?e:t}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),O.default.prototype.loadImage=function(o,f,p){O.default._validateParameters("loadImage",arguments);var m=new O.default.Image(1,1,this),y=this,e=new Request(o,{method:"GET",mode:"cors"});return fetch(o,e).then(function(e){var t,r=e.headers.get("content-type");null===r&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),r&&r.includes("image/gif")?e.arrayBuffer().then(function(e){if(e){for(var e=new Uint8Array(e),r=m,t=f,o=p,n=function(e){y._decrementPreload();}.bind(y),s=new g.default.GifReader(e),i=(r.width=r.canvas.width=s.width,r.height=r.canvas.height=s.height,[]),a=s.numFrames(),l=new Uint8ClampedArray(r.width*r.height*4),u=0;u<a;u++){var c=s.frameInfo(u),d=r.drawingContext.getImageData(0,0,r.width,r.height),h=(l=d.data.slice(),!function(e,t){try{t.decodeAndBlitFrameRGBA(e,l);}catch(e){O.default._friendlyFileLoadError(8,r.src),"function"==typeof o?o(e):console.error(e);}}(u,s),new ImageData(l,r.width,r.height)),h=(r.drawingContext.putImageData(h,0,0),c.delay);0===h&&(h=10),i.push({image:r.drawingContext.getImageData(0,0,r.width,r.height),delay:10*h}),2===c.disposal?r.drawingContext.clearRect(c.x,c.y,c.width,c.height):3===c.disposal&&r.drawingContext.putImageData(d,0,0,c.x,c.y,c.width,c.height);}null===(e=s.loopCount())?e=1:0===e&&(e=null),r.drawingContext.putImageData(i[0].image,0,0),1<i.length&&(r.gifProperties={displayIndex:0,loopLimit:e,loopCount:0,frames:i,numFrames:a,playing:!0,timeDisplayed:0,lastChangeTime:0}),"function"==typeof t&&t(r),n();}},function(e){"function"==typeof p?(p(e),y._decrementPreload()):console.error(e);}):((t=new Image).onload=function(){m.width=m.canvas.width=t.width,m.height=m.canvas.height=t.height,m.drawingContext.drawImage(t,0,0),m.modified=!0,"function"==typeof f&&f(m),y._decrementPreload();},t.onerror=function(e){O.default._friendlyFileLoadError(0,t.src),"function"==typeof p?(p(e),y._decrementPreload()):console.error(e);},0!==o.indexOf("data:image/")&&(t.crossOrigin="Anonymous"),t.src=o),m.modified=!0;}).catch(function(e){O.default._friendlyFileLoadError(0,o),"function"==typeof p?(p(e),y._decrementPreload()):console.error(e);}),m},O.default.prototype.saveGif=function(){a=regeneratorRuntime.mark(function e(t,r){var o,n,s,i,a,l,u,c,d,h,f,p,m,y,g,v,b,j,_,x,w,S,T,M,E,k,C=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=2<C.length&&void 0!==C[2]?C[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},"string"!=typeof t)throw TypeError("fileName parameter must be a string");e.next=3;break;case 3:if("number"!=typeof r)throw TypeError("Duration parameter must be a number");e.next=5;break;case 5:if(n=o&&o.delay||0,s=o&&o.units||"seconds",i=o&&o.silent||!1,a=o&&o.notificationDuration||0,l=o&&o.notificationID||"progressBar","number"!=typeof n)throw TypeError("Delay parameter must be a number");e.next=12;break;case 12:if("seconds"!==s&&"frames"!==s)throw TypeError('Units parameter must be either "frames" or "seconds"');e.next=14;break;case 14:if("boolean"!=typeof i)throw TypeError("Silent parameter must be a boolean");e.next=16;break;case 16:if("number"!=typeof a)throw TypeError("Notification duration parameter must be a number");e.next=18;break;case 18:if("string"!=typeof l)throw TypeError("Notification ID parameter must be a string");e.next=20;break;case 20:return this._recording=!0,h=this._targetFrameRate,u=(u=1/(h=h!==1/0&&void 0!==h&&0!==h?h:60)*1e3)<20?20:u,d=(c="seconds"===s?r*h:r)+(h="seconds"===s?n*h:n),h=h,this.frameCount=h,f=this._pixelDensity,this.pixelDensity(1),p=[],null!==document.getElementById(l)&&document.getElementById(l).remove(),i||((m=this.createP("")).id(l),m.style("font-size","16px"),m.style("font-family","Montserrat"),m.style("background-color","#ffffffa0"),m.style("padding","8px"),m.style("border-radius","10px"),m.position(0,0)),this._renderer instanceof O.default.RendererGL&&(g=this.drawingContext,y=new Uint8Array(g.drawingBufferWidth*g.drawingBufferHeight*4)),this.noLoop(),e.next=39,Promise.resolve();case 39:if(h<d)return this.redraw(),M=void 0,M=this._renderer instanceof O.default.RendererGL?(y=new Uint8Array(g.drawingBufferWidth*g.drawingBufferHeight*4),g.readPixels(0,0,g.drawingBufferWidth,g.drawingBufferHeight,g.RGBA,g.UNSIGNED_BYTE,y),function(e){for(var t=parseInt(height/2),r=4*width,o=new Uint8Array(4*width),n=0;n<t;++n){var s=n*r,i=(height-n-1)*r;o.set(e.subarray(s,s+r)),e.copyWithin(s,i,i+r),e.set(o,i);}return e}(y)):this.drawingContext.getImageData(0,0,this.width,this.height).data,p.push(M),h++,i||m.html("Saved frame <b>"+p.length.toString()+"</b> out of "+c.toString()),e.next=48,new Promise(function(e){return setTimeout(e,0)});e.next=50;break;case 48:e.next=39;break;case 50:i||m.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(f),v=(0, P.GIFEncoder)(),b=function(e){for(var t=new Uint8Array(e.length*e[0].length),r=0;r<e.length;r++)t.set(e[r],r*e[0].length);var o=(0, P.quantize)(t,256,{format:"rgba4444",oneBitAlpha:!0});256===o.length?o[o.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:o.push([255*Math.random(),255*Math.random(),255*Math.random(),0]);return o}(p),j={},_=function(e){for(var t=e.length/4,r=new Uint8Array(t),o=0;o<t;o++){var n=e[4*o]<<24|e[4*o+1]<<16|e[4*o+2]<<8|e[4*o+3];void 0===j[n]&&(j[n]=(0, P.nearestColorIndex)(b,e.slice(4*o,4*(o+1)))),r[o]=j[n];}return r},x=b.length-1,w=[],S=0;case 60:if(!(S<p.length)){e.next=71;break}if(T=_(p[S]),M=T.slice(),0===S)v.writeFrame(T,this.width,this.height,{palette:b,delay:u,dispose:1});else {for(E=0;E<T.length;E++)T[E]===w[E]&&(T[E]=x);v.writeFrame(T,this.width,this.height,{delay:u,transparent:!0,transparentIndex:x,dispose:1});}return w=M,i||m.html("Rendered frame <b>"+S.toString()+"</b> out of "+c.toString()),e.next=68,new Promise(function(e){return setTimeout(e,0)});case 68:S++,e.next=60;break;case 71:v.finish(),k=v.bytesView(),k=new Blob([k],{type:"image/gif"}),p=[],this._recording=!1,this.loop(),i||(m.html("Done. Downloading your gif!🌸"),0<a&&setTimeout(function(){return m.remove()},1e3*a)),O.default.prototype.downloadFile(k,t,"gif");case 80:case"end":return e.stop()}},e,this)});var a,r=function(){var e=this,i=arguments;return new Promise(function(t,r){var o=a.apply(e,i);function n(e){l(o,t,r,n,s,"next",e);}function s(e){l(o,t,r,n,s,"throw",e);}n(void 0);})};return function(e,t){return r.apply(this,arguments)}}(),O.default.prototype.image=function(e,t,r,o,n,s,i,a,l,u,c,d){O.default._validateParameters("image",arguments);var h=e.width,f=e.height,p=(d=d||j.CENTER,c=c||j.CENTER,e.elt&&(h=void 0!==h?h:e.elt.width,f=void 0!==f?f:e.elt.height),e.elt&&e.elt.videoWidth&&!e.canvas&&(h=void 0!==h?h:e.elt.videoWidth,f=void 0!==f?f:e.elt.videoHeight),o||h),n=n||f,s=s||0,i=i||0,a=v(void 0!==a?a:h,h),h=v(void 0!==l?l:f,f),l=1;e.elt&&!e.canvas&&e.elt.style.width&&(l=e.elt.videoWidth&&!o?e.elt.videoWidth:e.elt.width,l/=parseInt(e.elt.style.width,10)),s*=l,i*=l,h*=l,a*=l;f=y(u,c,d,(f=m.default.modeAdjust(t,r,p,n,this._renderer._imageMode)).x,f.y,f.w,f.h,s,i,a,h);this._renderer.image(e,f.sx,f.sy,f.sw,f.sh,f.dx,f.dy,f.dw,f.dh);},O.default.prototype.tint=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];O.default._validateParameters("tint",t);var o=this.color.apply(this,t);this._renderer._tint=o.levels;},O.default.prototype.noTint=function(){this._renderer._tint=null;},O.default.prototype._getTintedImageCanvas=O.default.Renderer2D.prototype._getTintedImageCanvas,O.default.prototype.imageMode=function(e){O.default._validateParameters("imageMode",arguments),e!==j.CORNER&&e!==j.CORNERS&&e!==j.CENTER||(this._renderer._imageMode=e);};e=O.default;r.default=e;},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/helpers":271,"../core/main":275,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,gifenc:245,omggif:248,"regenerator-runtime/runtime":252}],299:[function(e,t,r){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(e("../core/main")),n=o(e("./filters"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}s.default.Image=function(){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[];}var e,t;return e=r,(t=[{key:"pixelDensity",value:function(e){return void 0!==e?(e<=0&&(s.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),e=1),this._pixelDensity=e,this.width/=e,this.height/=e,this):this._pixelDensity}},{key:"_animateGif",value:function(e){var t,r=this.gifProperties,e=e._lastRealFrameTime;0===r.lastChangeTime&&(r.lastChangeTime=e),r.playing&&(r.timeDisplayed=e-r.lastChangeTime,t=r.frames[r.displayIndex].delay,r.timeDisplayed>=t&&(t=Math.floor(r.timeDisplayed/t),r.timeDisplayed=0,r.lastChangeTime=e,r.displayIndex+=t,r.loopCount=Math.floor(r.displayIndex/r.numFrames),null!==r.loopLimit&&r.loopCount>=r.loopLimit?r.playing=!1:(e=r.displayIndex%r.numFrames,this.drawingContext.putImageData(r.frames[e].image,0,0),r.displayIndex=e,this.setModified(!0))));}},{key:"_setProperty",value:function(e,t){this[e]=t,this.setModified(!0);}},{key:"loadPixels",value:function(){s.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0);}},{key:"updatePixels",value:function(e,t,r,o){s.default.Renderer2D.prototype.updatePixels.call(this,e,t,r,o),this.setModified(!0);}},{key:"get",value:function(e,t,r,o){return s.default._validateParameters("p5.Image.get",arguments),s.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s.default.Renderer2D.prototype._getPixel.apply(this,t)}},{key:"set",value:function(e,t,r){s.default.Renderer2D.prototype.set.call(this,e,t,r),this.setModified(!0);}},{key:"resize",value:function(e,t){0===e&&0===t?(e=this.canvas.width,t=this.canvas.height):0===e?e=this.canvas.width*t/this.canvas.height:0===t&&(t=this.canvas.height*e/this.canvas.width),e=Math.floor(e),t=Math.floor(t);var r=document.createElement("canvas");if(r.width=e,r.height=t,this.gifProperties)for(var o=this.gifProperties,n=0;n<o.numFrames;n++){for(var s=this.drawingContext.createImageData(e,t),i=(d=d=c=u=l=void 0,o.frames[n].image),a=s,l=0,u=0;u<a.height;u++)for(var c=0;c<a.width;c++){var d=Math.floor(c*i.width/a.width),d=4*(Math.floor(u*i.height/a.height)*i.width+d);a.data[l++]=i.data[d++],a.data[l++]=i.data[d++],a.data[l++]=i.data[d++],a.data[l++]=i.data[+d];}o.frames[n].image=s;}r.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,r.width,r.height),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(r,0,0,e,t,0,0,e,t),0<this.pixels.length&&this.loadPixels(),this.setModified(!0);}},{key:"copy",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];s.default.prototype.copy.apply(this,t);}},{key:"mask",value:function(e){var t=this.drawingContext.globalCompositeOperation,r=1,o=[e=void 0===e?this:e,0,0,(r=e instanceof s.default.Renderer?e._pInst._pixelDensity:r)*e.width,r*e.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var n=0;n<this.gifProperties.frames.length;n++)this.drawingContext.putImageData(this.gifProperties.frames[n].image,0,0),this.copy.apply(this,o),this.gifProperties.frames[n].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0);}else this.copy.apply(this,o);this.drawingContext.globalCompositeOperation=t,this.setModified(!0);}},{key:"filter",value:function(e,t){n.default.apply(this.canvas,n.default[e],t),this.setModified(!0);}},{key:"blend",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];s.default._validateParameters("p5.Image.blend",arguments),s.default.prototype.blend.apply(this,t),this.setModified(!0);}},{key:"setModified",value:function(e){this._modified=e;}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(e,t){this.gifProperties?s.default.prototype.encodeAndDownloadGif(this,e):s.default.prototype.saveCanvas(this.canvas,e,t);}},{key:"reset",value:function(){var e;this.gifProperties&&((e=this.gifProperties).playing=!0,e.timeSinceStart=0,e.timeDisplayed=0,e.lastChangeTime=0,e.loopCount=0,e.displayIndex=0,this.drawingContext.putImageData(e.frames[0].image,0,0));}},{key:"getCurrentFrame",value:function(){var e;if(this.gifProperties)return (e=this.gifProperties).displayIndex%e.numFrames}},{key:"setFrame",value:function(e){var t;this.gifProperties&&(e<(t=this.gifProperties).numFrames&&0<=e?(t.timeDisplayed=0,t.lastChangeTime=0,t.displayIndex=e,this.drawingContext.putImageData(t.frames[e].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."));}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0);}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1);}},{key:"delay",value:function(e,t){if(this.gifProperties){var r=this.gifProperties;if(t<r.numFrames&&0<=t)r.frames[t].delay=e;else {var o=!0,t=!1,n=void 0;try{for(var s,i=r.frames[Symbol.iterator]();!(o=(s=i.next()).done);o=!0)s.value.delay=e;}catch(e){t=!0,n=e;}finally{try{o||null==i.return||i.return();}finally{if(t)throw n}}}}}}])&&i(e.prototype,t),r}();e=s.default.Image;r.default=e;},{"../core/main":275,"./filters":296,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],300:[function(e,t,r){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.filter"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f=o(e("../core/main")),a=o(e("./filters"));function o(e){return e&&e.__esModule?e:{default:e}}e("../color/p5.Color"),f.default.prototype.pixels=[],f.default.prototype.blend=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];f.default._validateParameters("blend",r),this._renderer?(e=this._renderer).blend.apply(e,r):f.default.Renderer2D.prototype.blend.apply(this,r);},f.default.prototype.copy=function(){for(var e,t,r,o,n,s,i,a,l,u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];if(f.default._validateParameters("copy",c),9===c.length)e=c[0],t=c[1],r=c[2],o=c[3],n=c[4],s=c[5],i=c[6],a=c[7],l=c[8];else {if(8!==c.length)throw new Error("Signature not supported");e=this,t=c[0],r=c[1],o=c[2],n=c[3],s=c[4],i=c[5],a=c[6],l=c[7];}f.default.prototype._copyHelper(this,e,t,r,o,n,s,i,a,l);},f.default.prototype._copyHelper=function(e,t,r,o,n,s,i,a,l,u){var c=t.canvas.width/t.width,d=0,h=0;t._renderer&&t._renderer.isP3D&&(d=t.width/2,h=t.height/2),e._renderer&&e._renderer.isP3D?f.default.RendererGL.prototype.image.call(e._renderer,t,r+d,o+h,n,s,i,a,l,u):e.drawingContext.drawImage(t.canvas,c*(r+d),c*(o+h),c*n,c*s,i,a,l,u);},f.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},f.default.prototype.filter=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];f.default._validateParameters("filter",arguments);var o=function(){var e,t={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return (arguments.length<=0?void 0:arguments[0])instanceof f.default.Shader?t.shader=arguments.length<=0?void 0:arguments[0]:(t.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&"number"==typeof(arguments.length<=1?void 0:arguments[1])&&(t.value=arguments.length<=1?void 0:arguments[1]),!1===((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e])&&(t.useWebGL=!1)),t}.apply(void 0,t),n=o.shader,s=o.operation,i=o.value,o=o.useWebGL;this._renderer.isP3D&&n?f.default.RendererGL.prototype.filter.call(this._renderer,n):o||this._renderer.isP3D?(!o&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?f.default.RendererGL.prototype.filter.call(this._renderer,s,i):((n=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),n.filter.apply(n,t),this._renderer._pInst.image(n,0,0),n.clear())):void 0!==this.canvas?a.default.apply(this.canvas,a.default[s],i):a.default.apply(this.elt,a.default[s],i);},f.default.prototype.get=function(e,t,r,o){var n;return f.default._validateParameters("get",arguments),(n=this._renderer).get.apply(n,arguments)},f.default.prototype.loadPixels=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];f.default._validateParameters("loadPixels",t),this._renderer.loadPixels();},f.default.prototype.set=function(e,t,r){this._renderer.set(e,t,r);},f.default.prototype.updatePixels=function(e,t,r,o){f.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(e,t,r,o);};e=f.default;r.default=e;},{"../color/p5.Color":262,"../core/main":275,"./filters":296,"core-js/modules/es.array.filter":155}],301:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var v=s(e("../core/main")),m=(e("whatwg-fetch"),e("es6-promise/auto"),s(e("fetch-jsonp"))),n=s(e("file-saver"));function s(e){return e&&e.__esModule?e:{default:e}}function y(e){return (y="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}function g(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function i(e,t){t&&!0!==t&&"true"!==t||(t="");var r="";return (e=e||"untitled")&&e.includes(".")&&(r=e.split(".").pop()),t&&r!==t&&(r=t,e="".concat(e,".").concat(r)),[e,r]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),v.default.prototype.loadJSON=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];v.default._validateParameters("loadJSON",t);for(var o,n,s,i=t[0],a={},l="json",u=1;u<t.length;u++){var c=t[u];"string"==typeof c?"jsonp"!==c&&"json"!==c||(l=c):"function"==typeof c?o?n=c:o=c:"object"===y(c)&&(c.hasOwnProperty("jsonpCallback")||c.hasOwnProperty("jsonpCallbackFunction"))&&(l="jsonp",s=c);}var d=this;return this.httpDo(i,"GET",s,l,function(e){for(var t in e)a[t]=e[t];void 0!==o&&o(e),d._decrementPreload();},function(e){if(v.default._friendlyFileLoadError(5,i),!n)throw e;n(e);}),a},v.default.prototype.loadStrings=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];v.default._validateParameters("loadStrings",t);for(var n,o,s=[],i=1;i<t.length;i++){var a=t[i];"function"==typeof a&&(void 0===n?n=a:void 0===o&&(o=a));}var l=this;return v.default.prototype.httpDo.call(this,t[0],"GET","text",function(e){for(var t=e.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),r=0,o=t.length;r<o;r+=32768)Array.prototype.push.apply(s,t.slice(r,Math.min(r+32768,o)));void 0!==n&&n(s),l._decrementPreload();},function(e){if(v.default._friendlyFileLoadError(3,e),!o)throw e;o(e);}),s},v.default.prototype.loadTable=function(t){var f,r,p,m=!1,o=t.substring(t.lastIndexOf(".")+1,t.length);"csv"===o?p=",":"ssv"===o?p=";":"tsv"===o&&(p="\t");for(var n=1;n<arguments.length;n++)"function"==typeof arguments[n]?void 0===f?f=arguments[n]:void 0===r&&(r=arguments[n]):"string"==typeof arguments[n]&&("header"===arguments[n]&&(m=!0),"csv"===arguments[n]?p=",":"ssv"===arguments[n]?p=";":"tsv"===arguments[n]&&(p="\t"));var y=new v.default.Table,g=this;return this.httpDo(t,"GET","table",function(e){for(var t,r,o={},n=0,s=[],i=0,a=null,l=function(){o.currentState=n,o.token="";},u=function(){a.push(o.token),l();},c=function(){o.currentState=4,s.push(a),a=null;};;){if(null==(t=e[i++])){if(o.escaped)throw new Error("Unclosed quote in file.");if(a){u(),c();break}}if(null===a&&(o.escaped=!1,a=[],l()),o.currentState===n){if('"'===t){o.escaped=!0,o.currentState=1;continue}o.currentState=1;}if(1===o.currentState&&o.escaped)if('"'===t)'"'===e[i]?(o.token+='"',i++):(o.escaped=!1,o.currentState=2);else {if("\r"===t)continue;o.token+=t;}else "\r"===t?("\n"===e[i]&&i++,u(),c()):"\n"===t?(u(),c()):t===p?u():1===o.currentState&&(o.token+=t);}if(m)y.columns=s.shift();else for(var d=0;d<s[0].length;d++)y.columns[d]="null";for(var h=0;h<s.length;h++)(1!==s[h].length||"undefined"!==s[h][0]&&""!==s[h][0])&&((r=new v.default.TableRow).arr=s[h],r.obj=function(r,e){if(void 0===(e=e||[]))for(var t=0;t<r.length;t++)e[t.toString()]=t;return Object.fromEntries(e.map(function(e,t){return [e,r[t]]}))}(s[h],y.columns),y.addRow(r));"function"==typeof f&&f(y),g._decrementPreload();},function(e){v.default._friendlyFileLoadError(2,t),r?r(e):console.error(e);}),y},v.default.prototype.loadXML=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var o,n,s=new v.default.XML,i=1;i<t.length;i++){var a=t[i];"function"==typeof a&&(void 0===o?o=a:void 0===n&&(n=a));}var l=this;return this.httpDo(t[0],"GET","xml",function(e){for(var t in e)s[t]=e[t];void 0!==o&&o(s),l._decrementPreload();},function(e){if(v.default._friendlyFileLoadError(1,e),!n)throw e;n(e);}),s},v.default.prototype.loadBytes=function(t,r,o){var n={},s=this;return this.httpDo(t,"GET","arrayBuffer",function(e){n.bytes=new Uint8Array(e),"function"==typeof r&&r(n),s._decrementPreload();},function(e){if(v.default._friendlyFileLoadError(6,t),!o)throw e;o(e);}),n},v.default.prototype.httpGet=function(){v.default._validateParameters("httpGet",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"GET"),v.default.prototype.httpDo.apply(this,e)},v.default.prototype.httpPost=function(){v.default._validateParameters("httpPost",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"POST"),v.default.prototype.httpDo.apply(this,e)},v.default.prototype.httpDo=function(){for(var r,e,t,o={},n=0,s="text/plain",i=arguments.length-1;0<i&&"function"==typeof(i<0||arguments.length<=i?void 0:arguments[i]);i--)n++;var a=arguments.length-n,l=arguments.length<=0?void 0:arguments[0];if(2==a&&"string"==typeof l&&"object"===y(arguments.length<=1?void 0:arguments[1]))p=new Request(l,arguments.length<=1?void 0:arguments[1]),e=arguments.length<=2?void 0:arguments[2],t=arguments.length<=3?void 0:arguments[3];else {for(var u,c="GET",d=1;d<arguments.length;d++){var h=d<0||arguments.length<=d?void 0:arguments[d];if("string"==typeof h)"GET"===h||"POST"===h||"PUT"===h||"DELETE"===h?c=h:"json"===h||"jsonp"===h||"binary"===h||"arrayBuffer"===h||"xml"===h||"text"===h||"table"===h?r=h:u=h;else if("number"==typeof h)u=h.toString();else if("object"===y(h))if(h.hasOwnProperty("jsonpCallback")||h.hasOwnProperty("jsonpCallbackFunction"))for(var f in h)o[f]=h[f];else s=h instanceof v.default.XML?(u=h.serialize(),"application/xml"):(u=JSON.stringify(h),"application/json");else "function"==typeof h&&(e?t=h:e=h);}var a="GET"===c?new Headers:new Headers({"Content-Type":s}),p=new Request(l,{method:c,mode:"cors",body:u,headers:a});}return (a=(a="jsonp"===(r=r||(l.includes("json")?"json":l.includes("xml")?"xml":"text"))?(0, m.default)(l,o):fetch(p)).then(function(e){if(!e.ok)throw (t=new Error(e.body)).status=e.status,t.ok=!1,t;var t=0;switch((t="jsonp"!==r?e.headers.get("content-length"):t)&&64e6<t&&v.default._friendlyFileLoadError(7,l),r){case"json":case"jsonp":return e.json();case"binary":return e.blob();case"arrayBuffer":return e.arrayBuffer();case"xml":return e.text().then(function(e){e=(new DOMParser).parseFromString(e,"text/xml");return new v.default.XML(e.documentElement)});default:return e.text()}})).then(e||function(){}),a.catch(t||console.error),a},window.URL=window.URL||window.webkitURL,v.default.prototype._pWriters=[],v.default.prototype.createWriter=function(e,t){var r,o;for(o in v.default.prototype._pWriters)if(v.default.prototype._pWriters[o].name===e)return r=new v.default.PrintWriter(e+this.millis(),t),v.default.prototype._pWriters.push(r),r;return r=new v.default.PrintWriter(e,t),v.default.prototype._pWriters.push(r),r},v.default.PrintWriter=function(r,o){var n=this;this.name=r,this.content="",this.write=function(e){this.content+=e;},this.print=function(e){this.content+="".concat(e,"\n");},this.clear=function(){this.content="";},this.close=function(){var e,t=[];for(e in t.push(this.content),v.default.prototype.writeFile(t,r,o),v.default.prototype._pWriters)v.default.prototype._pWriters[e].name===this.name&&v.default.prototype._pWriters.splice(e,1);n.clear(),n={};};},v.default.prototype.save=function(e,t,r){var o=arguments,n=(this._curElement||this).elt;if(0===o.length)v.default.prototype.saveCanvas(n);else if(o[0]instanceof v.default.Renderer||o[0]instanceof v.default.Graphics)v.default.prototype.saveCanvas(o[0].elt,o[1],o[2]);else if(1===o.length&&"string"==typeof o[0])v.default.prototype.saveCanvas(n,o[0]);else switch(i(o[1],o[2])[1]){case"json":return void v.default.prototype.saveJSON(o[0],o[1],o[2]);case"txt":return void v.default.prototype.saveStrings(o[0],o[1],o[2]);default:o[0]instanceof Array?v.default.prototype.saveStrings(o[0],o[1],o[2]):o[0]instanceof v.default.Table?v.default.prototype.saveTable(o[0],o[1],o[2]):o[0]instanceof v.default.Image?v.default.prototype.saveCanvas(o[0].canvas,o[1]):o[0]instanceof v.default.SoundFile&&v.default.prototype.saveSound(o[0],o[1],o[2],o[3]);}},v.default.prototype.saveJSON=function(e,t,r){v.default._validateParameters("saveJSON",arguments),r=r?JSON.stringify(e):JSON.stringify(e,void 0,2),this.saveStrings(r.split("\n"),t,"json");},v.default.prototype.saveJSONObject=v.default.prototype.saveJSON,v.default.prototype.saveJSONArray=v.default.prototype.saveJSON,v.default.prototype.saveStrings=function(e,t,r,o){v.default._validateParameters("saveStrings",arguments);for(var n=this.createWriter(t,r||"txt"),s=0;s<e.length;s++)o?n.write(e[s]+"\r\n"):n.write(e[s]+"\n");n.close(),n.clear();},v.default.prototype.saveTable=function(e,t,r){v.default._validateParameters("saveTable",arguments),o=void 0===r?t.substring(t.lastIndexOf(".")+1,t.length):r;var o,n=this.createWriter(t,o),s=e.columns,i="tsv"===o?"\t":",";if("html"!==o){if("0"!==s[0]){for(var a=0;a<s.length;a++)a<s.length-1?n.write(s[a]+i):n.write(s[a]);n.write("\n");}for(var l=0;l<e.rows.length;l++){for(var u=void 0,u=0;u<e.rows[l].arr.length;u++)u<e.rows[l].arr.length-1?"csv"===o&&String(e.rows[l].arr[u]).includes(",")?n.write('"'+e.rows[l].arr[u]+'"'+i):n.write(e.rows[l].arr[u]+i):"csv"===o&&String(e.rows[l].arr[u]).includes(",")?n.write('"'+e.rows[l].arr[u]+'"'):n.write(e.rows[l].arr[u]);n.write("\n");}}else {n.print("<html>"),n.print("<head>");if(n.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),n.print("</head>"),n.print("<body>"),n.print("  <table>"),"0"!==s[0]){n.print("    <tr>");for(var c=0;c<s.length;c++){var d=g(s[c]);n.print("      <td>".concat(d)),n.print("      </td>");}n.print("    </tr>");}for(var h=0;h<e.rows.length;h++){n.print("    <tr>");for(var f=0;f<e.columns.length;f++){var p=g(e.rows[h].getString(f));n.print("      <td>".concat(p)),n.print("      </td>");}n.print("    </tr>");}n.print("  </table>"),n.print("</body>"),n.print("</html>");}n.close(),n.clear();},v.default.prototype.writeFile=function(e,t,r){var o="application/octet-stream",e=(v.default.prototype._isSafari()&&(o="text/plain"),new Blob(e,{type:o}));v.default.prototype.downloadFile(e,t,r);},v.default.prototype.downloadFile=function(e,t,r){var o,t=i(t,r),r=t[0];e instanceof Blob?n.default.saveAs(e,r):((o=document.createElement("a")).href=e,o.download=r,o.onclick=function(e){document.body.removeChild(e.target),e.stopPropagation();},o.style.display="none",document.body.appendChild(o),v.default.prototype._isSafari()&&(e=(e='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n')+'3. Name it with this extension: ."'.concat(t[1],'"'),alert(e)),o.click());},v.default.prototype._checkFileExtension=i,v.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};e=v.default;r.default=e;},{"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.object.from-entries":177,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.iterator":238,"core-js/modules/web.url":240,"es6-promise/auto":241,"fetch-jsonp":243,"file-saver":244,"whatwg-fetch":253}],302:[function(e,t,r){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(e=e("../core/main"))&&e.__esModule?e:{default:e};function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}n.default.Table=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=[];}var e,r;return e=t,(r=[{key:"addRow",value:function(e){e=e||new n.default.TableRow;if(void 0===e.arr||void 0===e.obj)throw new Error("invalid TableRow: ".concat(e));return (e.table=this).rows.push(e),e}},{key:"removeRow",value:function(e){this.rows[e].table=null;e=this.rows.splice(e+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(e);}},{key:"getRow",value:function(e){return this.rows[e]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(e,t){if("string"==typeof t){for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[t]===e)return this.rows[r]}else for(var o=0;o<this.rows.length;o++)if(this.rows[o].arr[t]===e)return this.rows[o];return null}},{key:"findRows",value:function(e,t){var r=[];if("string"==typeof t)for(var o=0;o<this.rows.length;o++)this.rows[o].obj[t]===e&&r.push(this.rows[o]);else for(var n=0;n<this.rows.length;n++)this.rows[n].arr[t]===e&&r.push(this.rows[n]);return r}},{key:"matchRow",value:function(e,t){if("number"==typeof t){for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[t].match(e))return this.rows[r]}else for(var o=0;o<this.rows.length;o++)if(this.rows[o].obj[t].match(e))return this.rows[o];return null}},{key:"matchRows",value:function(e,t){var r=[];if("number"==typeof t)for(var o=0;o<this.rows.length;o++)this.rows[o].arr[t].match(e)&&r.push(this.rows[o]);else for(var n=0;n<this.rows.length;n++)this.rows[n].obj[t].match(e)&&r.push(this.rows[n]);return r}},{key:"getColumn",value:function(e){var t=[];if("string"==typeof e)for(var r=0;r<this.rows.length;r++)t.push(this.rows[r].obj[e]);else for(var o=0;o<this.rows.length;o++)t.push(this.rows[o].arr[e]);return t}},{key:"clearRows",value:function(){delete this.rows,this.rows=[];}},{key:"addColumn",value:function(e){this.columns.push(e||null);}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(e,t){for(var r=[],o=0;o<e.length;o++)r.push(e.charAt(o).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var n=new RegExp(r.join("|"),"g");if(void 0===t)for(var s=0;s<this.columns.length;s++)for(var i=0;i<this.rows.length;i++){var a=(a=this.rows[i].arr[s]).replace(n,"");this.rows[i].arr[s]=a,this.rows[i].obj[this.columns[s]]=a;}else if("string"==typeof t)for(var l=0;l<this.rows.length;l++){var u=(u=this.rows[l].obj[t]).replace(n,""),c=(this.rows[l].obj[t]=u,this.columns.indexOf(t));this.rows[l].arr[c]=u;}else for(var d=0;d<this.rows.length;d++){var h=(h=this.rows[d].arr[t]).replace(n,"");this.rows[d].arr[t]=h,this.rows[d].obj[this.columns[t]]=h;}}},{key:"trim",value:function(e){var t=new RegExp(" ","g");if(void 0===e)for(var r=0;r<this.columns.length;r++)for(var o=0;o<this.rows.length;o++){var n=(n=this.rows[o].arr[r]).replace(t,"");this.rows[o].arr[r]=n,this.rows[o].obj[this.columns[r]]=n;}else if("string"==typeof e)for(var s=0;s<this.rows.length;s++){var i=(i=this.rows[s].obj[e]).replace(t,""),a=(this.rows[s].obj[e]=i,this.columns.indexOf(e));this.rows[s].arr[a]=i;}else for(var l=0;l<this.rows.length;l++){var u=(u=this.rows[l].arr[e]).replace(t,"");this.rows[l].arr[e]=u,this.rows[l].obj[this.columns[e]]=u;}}},{key:"removeColumn",value:function(e){"string"==typeof e?r=this.columns.indexOf(t=e):t=this.columns[r=e];var t,r,e=this.columns.splice(r+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(e);for(var o=0;o<this.rows.length;o++){var n=this.rows[o].arr,s=n.splice(r+1,n.length);n.pop(),this.rows[o].arr=n.concat(s),delete this.rows[o].obj[t];}}},{key:"set",value:function(e,t,r){this.rows[e].set(t,r);}},{key:"setNum",value:function(e,t,r){this.rows[e].setNum(t,r);}},{key:"setString",value:function(e,t,r){this.rows[e].setString(t,r);}},{key:"get",value:function(e,t){return this.rows[e].get(t)}},{key:"getNum",value:function(e,t){return this.rows[e].getNum(t)}},{key:"getString",value:function(e,t){return this.rows[e].getString(t)}},{key:"getObject",value:function(e){for(var t,r={},o=0;o<this.rows.length;o++)if(t=this.rows[o].obj,"string"==typeof e){if(!(0<=this.columns.indexOf(e)))throw new Error('This table has no column named "'.concat(e,'"'));r[t[e]]=t;}else r[o]=this.rows[o].obj;return r}},{key:"getArray",value:function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(this.rows[t].arr);return e}}])&&s(e.prototype,r),t}();e=n.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.join":162,"core-js/modules/es.array.splice":167,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196}],303:[function(e,t,r){e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("../core/main"))&&e.__esModule?e:{default:e};function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}e.default.TableRow=function(){function o(e,t){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");var r=[];e&&(r=e.split(t=t||",")),this.arr=r,this.obj=Object.fromEntries(r.entries()),this.table=null;}var e,t;return e=o,(t=[{key:"set",value:function(e,t){if("string"==typeof e){var r=this.table.columns.indexOf(e);if(!(0<=r))throw new Error('This table has no column named "'.concat(e,'"'));this.obj[e]=t,this.arr[r]=t;}else {if(!(e<this.table.columns.length))throw new Error("Column #".concat(e," is out of the range of this table"));this.arr[e]=t;r=this.table.columns[e];this.obj[r]=t;}}},{key:"setNum",value:function(e,t){t=parseFloat(t);this.set(e,t);}},{key:"setString",value:function(e,t){t=t.toString();this.set(e,t);}},{key:"get",value:function(e){return ("string"==typeof e?this.obj:this.arr)[e]}},{key:"getNum",value:function(e){var t="string"==typeof e?parseFloat(this.obj[e]):parseFloat(this.arr[e]);if("NaN"===t.toString())throw "Error: ".concat(this.obj[e]," is NaN (Not a Number)");return t}},{key:"getString",value:function(e){return ("string"==typeof e?this.obj:this.arr)[e].toString()}}])&&n(e.prototype,t),o}();e=e.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.from-entries":177,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.split":198,"core-js/modules/web.dom-collections.iterator":238}],304:[function(e,t,r){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function s(e){for(var t=[],r=0;r<e.length;r++)t.push(new a.default.XML(e[r]));return t}a.default.XML=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");e?this.DOM=e:(e=document.implementation.createDocument(null,"doc"),this.DOM=e.createElement("root"));}var e,r;return e=t,(r=[{key:"getParent",value:function(){return new a.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(e){var t=this.DOM.innerHTML,r=this.DOM.attributes,o=document.implementation.createDocument(null,"default").createElement(e);o.innerHTML=t;for(var n=0;n<r.length;n++)o.setAttribute(r[n].nodeName,r.nodeValue);this.DOM=o;}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var e=[],t=0;t<this.DOM.childNodes.length;t++)e.push(this.DOM.childNodes[t].nodeName);return e}},{key:"getChildren",value:function(e){return s(e?this.DOM.getElementsByTagName(e):this.DOM.children)}},{key:"getChild",value:function(e){if("string"!=typeof e)return new a.default.XML(this.DOM.children[e]);var t=!0,r=!1,o=void 0;try{for(var n,s=this.DOM.children[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value;if(i.tagName===e)return new a.default.XML(i)}}catch(e){r=!0,o=e;}finally{try{t||null==s.return||s.return();}finally{if(r)throw o}}}},{key:"addChild",value:function(e){e instanceof a.default.XML&&this.DOM.appendChild(e.DOM);}},{key:"removeChild",value:function(e){var t=-1;if("string"==typeof e){for(var r=0;r<this.DOM.children.length;r++)if(this.DOM.children[r].tagName===e){t=r;break}}else t=e;-1!==t&&this.DOM.removeChild(this.DOM.children[t]);}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var e=[],t=!0,r=!1,o=void 0;try{for(var n,s=this.DOM.attributes[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value;e.push(i.nodeName);}}catch(e){r=!0,o=e;}finally{try{t||null==s.return||s.return();}finally{if(r)throw o}}return e}},{key:"hasAttribute",value:function(e){var t={},r=!0,o=!1,n=void 0;try{for(var s,i=this.DOM.attributes[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var a=s.value;t[a.nodeName]=a.nodeValue;}}catch(e){o=!0,n=e;}finally{try{r||null==i.return||i.return();}finally{if(o)throw n}}return !!t[e]}},{key:"getNum",value:function(e,t){var r={},o=!0,n=!1,s=void 0;try{for(var i,a=this.DOM.attributes[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var l=i.value;r[l.nodeName]=l.nodeValue;}}catch(e){n=!0,s=e;}finally{try{o||null==a.return||a.return();}finally{if(n)throw s}}return Number(r[e])||t||0}},{key:"getString",value:function(e,t){var r={},o=!0,n=!1,s=void 0;try{for(var i,a=this.DOM.attributes[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var l=i.value;r[l.nodeName]=l.nodeValue;}}catch(e){n=!0,s=e;}finally{try{o||null==a.return||a.return();}finally{if(n)throw s}}return r[e]?String(r[e]):t||null}},{key:"setAttribute",value:function(e,t){this.DOM.setAttribute(e,t);}},{key:"getContent",value:function(e){var t=this.DOM.textContent;return (t=t.replace(/\s\s+/g,","))||e||null}},{key:"setContent",value:function(e){this.DOM.children.length||(this.DOM.textContent=e);}},{key:"serialize",value:function(){return (new XMLSerializer).serializeToString(this.DOM)}}])&&n(e.prototype,r),t}();e=a.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],305:[function(e,t,r){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=(e=e("../core/main"))&&e.__esModule?e:{default:e};i.default.prototype.abs=Math.abs,i.default.prototype.ceil=Math.ceil,i.default.prototype.constrain=function(e,t,r){return i.default._validateParameters("constrain",arguments),Math.max(Math.min(e,r),t)},i.default.prototype.dist=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.default._validateParameters("dist",t),4===t.length?Math.hypot(t[2]-t[0],t[3]-t[1]):6===t.length?Math.hypot(t[3]-t[0],t[4]-t[1],t[5]-t[2]):void 0},i.default.prototype.exp=Math.exp,i.default.prototype.floor=Math.floor,i.default.prototype.lerp=function(e,t,r){return i.default._validateParameters("lerp",arguments),r*(t-e)+e},i.default.prototype.log=Math.log,i.default.prototype.mag=function(e,t){return i.default._validateParameters("mag",arguments),Math.hypot(e,t)},i.default.prototype.map=function(e,t,r,o,n,s){i.default._validateParameters("map",arguments);e=(e-t)/(r-t)*(n-o)+o;return s?o<n?this.constrain(e,o,n):this.constrain(e,n,o):e},i.default.prototype.max=function(){for(var e=function(e){var t=-1/0,r=!0,o=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done);r=!0)var a=s.value,t=t<a?a:t;}catch(e){o=!0,n=e;}finally{try{r||null==i.return||i.return();}finally{if(o)throw n}}return t},t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return r[0]instanceof Array?e(r[0]):e(r)},i.default.prototype.min=function(){for(var e=function(e){var t=1/0,r=!0,o=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done);r=!0)var a=s.value,t=a<t?a:t;}catch(e){o=!0,n=e;}finally{try{r||null==i.return||i.return();}finally{if(o)throw n}}return t},t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return r[0]instanceof Array?e(r[0]):e(r)},i.default.prototype.norm=function(e,t,r){return i.default._validateParameters("norm",arguments),this.map(e,t,r,0,1)},i.default.prototype.pow=Math.pow,i.default.prototype.round=function(e,t){return t?(t=Math.pow(10,t),Math.round(e*t)/t):Math.round(e)},i.default.prototype.sq=function(e){return e*e},i.default.prototype.sqrt=Math.sqrt,i.default.prototype.fract=function(e){i.default._validateParameters("fract",arguments);var t,r=0,e=Number(e);return isNaN(e)||Math.abs(e)===1/0?e:(e<0&&(e=-e,r=1),String(e).includes(".")&&!String(e).includes("e")?(t=String(e),t=Number("0"+t.slice(t.indexOf("."))),Math.abs(r-t)):e<1?Math.abs(r-e):0)};e=i.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],306:[function(e,t,r){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};function n(e,t,r){return (n=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){}}}()?Reflect.construct:function(e,t,r){var o=[null];o.push.apply(o,t);t=new(Function.bind.apply(e,o));return r&&s(t,r.prototype),t}).apply(null,arguments)}function s(e,t){return (s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}o.default.prototype.createVector=function(e,t,r){return this instanceof o.default?n(o.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new o.default.Vector(e,t,r)};e=o.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188}],307:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("../core/main"))&&e.__esModule?e:{default:e};function b(e){return .5*(1-Math.cos(e*Math.PI))}var j,_=4095,x=4,w=.5,e=(e.default.prototype.noise=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==j){j=new Array(4096);for(var o=0;o<4096;o++)j[o]=Math.random();}e<0&&(e=-e),t<0&&(t=-t),r<0&&(r=-r);for(var n,s,i=Math.floor(e),a=Math.floor(t),l=Math.floor(r),u=e-i,c=t-a,d=r-l,h=0,f=.5,p=0;p<x;p++){var m=i+(a<<4)+(l<<8),y=b(u),g=b(c),v=j[m&_];v+=y*(j[m+1&_]-v),n=j[m+16&_],v+=g*((n+=y*(j[m+16+1&_]-n))-v),n=j[(m+=256)&_],n+=y*(j[m+1&_]-n),s=j[m+16&_],n+=g*((s+=y*(j[m+16+1&_]-s))-n),h+=(v+=b(d)*(n-v))*f,f*=w,i<<=1,a<<=1,l<<=1,1<=(u*=2)&&(i++,u--),1<=(c*=2)&&(a++,c--),1<=(d*=2)&&(l++,d--);}return h},e.default.prototype.noiseDetail=function(e,t){0<e&&(x=e),0<t&&(w=t);},e.default.prototype.noiseSeed=function(e){o=4294967296;var t,r,o,n={setSeed:function(e){r=t=(null==e?Math.random()*o:e)>>>0;},getSeed:function(){return t},rand:function(){return (r=(1664525*r+1013904223)%o)/o}};n.setSeed(e),j=new Array(4096);for(var s=0;s<4096;s++)j[s]=n.rand();},e.default);r.default=e;},{"../core/main":275}],308:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.string.sub"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=(n=e("../core/main"))&&n.__esModule?n:{default:n},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=l();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function l(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,l=function(){return e},e)}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function c(e,t){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),this}function d(e,t,r){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),0!==r&&(this.z=this.z%r),this}a.default.Vector=function(){function n(){var e=this,t=n;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");var r,o,e="function"==typeof(arguments.length<=0?void 0:arguments[0])?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],r=(arguments.length<=2?void 0:arguments[2])||0,o=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(r=(arguments.length<=0?void 0:arguments[0])||0,o=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=r,this.y=o,this.z=e;}var e,t,r;return e=n,r=[{key:"fromAngle",value:function(e,t){return new a.default.Vector((t=void 0===t?1:t)*Math.cos(e),t*Math.sin(e),0)}},{key:"fromAngles",value:function(e,t,r){void 0===r&&(r=1);var o=Math.cos(t),t=Math.sin(t),n=Math.cos(e),e=Math.sin(e);return new a.default.Vector(r*e*t,-r*n,r*e*o)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*s.TWO_PI)}},{key:"random3D",value:function(){var e=Math.random()*s.TWO_PI,t=2*Math.random()-1,r=Math.sqrt(1-t*t),o=r*Math.cos(e),r=r*Math.sin(e);return new a.default.Vector(o,r,t)}},{key:"copy",value:function(e){return e.copy(e)}},{key:"add",value:function(e,t,r){return r?r.set(e):(r=e.copy(),3===arguments.length&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),r.add(t),r}},{key:"rem",value:function(e,t){if(e instanceof a.default.Vector&&t instanceof a.default.Vector)return (e=e.copy()).rem(t),e}},{key:"sub",value:function(e,t,r){return r?r.set(e):(r=e.copy(),3===arguments.length&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),r.sub(t),r}},{key:"mult",value:function(e,t,r){return r?r.set(e):(r=e.copy(),3===arguments.length&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),r.mult(t),r}},{key:"rotate",value:function(e,t,r){return 2===arguments.length?r=e.copy():(r instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),r.set(e)),r.rotate(t),r}},{key:"div",value:function(e,t,r){return r?r.set(e):(r=e.copy(),3===arguments.length&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),r.div(t),r}},{key:"dot",value:function(e,t){return e.dot(t)}},{key:"cross",value:function(e,t){return e.cross(t)}},{key:"dist",value:function(e,t){return e.dist(t)}},{key:"lerp",value:function(e,t,r,o){return o?o.set(e):(o=e.copy(),4===arguments.length&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),o.lerp(t,r),o}},{key:"slerp",value:function(e,t,r,o){return o?o.set(e):(o=e.copy(),4===arguments.length&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),o.slerp(t,r),o}},{key:"mag",value:function(e){return e.mag()}},{key:"magSq",value:function(e){return e.magSq()}},{key:"normalize",value:function(e,t){return arguments.length<2?t=e.copy():(t instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),t.set(e)),t.normalize()}},{key:"limit",value:function(e,t,r){return arguments.length<3?r=e.copy():(r instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),r.set(e)),r.limit(t)}},{key:"setMag",value:function(e,t,r){return arguments.length<3?r=e.copy():(r instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),r.set(e)),r.setMag(t)}},{key:"heading",value:function(e){return e.heading()}},{key:"angleBetween",value:function(e,t){return e.angleBetween(t)}},{key:"reflect",value:function(e,t,r){return arguments.length<3?r=e.copy():(r instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),r.set(e)),r.reflect(t)}},{key:"array",value:function(e){return e.array()}},{key:"equals",value:function(e,t){var r;return e instanceof a.default.Vector?r=e:e instanceof Array?r=(new a.default.Vector).set(e):a.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),r.equals(t)}}],(t=[{key:"toString",value:function(){return "p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(e,t,r){return e instanceof a.default.Vector?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):Array.isArray(e)?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0):(this.x=e||0,this.y=t||0,this.z=r||0),this}},{key:"copy",value:function(){return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new a.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(e,t,r){return e instanceof a.default.Vector?(this.x+=e.x||0,this.y+=e.y||0,this.z+=e.z||0):Array.isArray(e)?(this.x+=e[0]||0,this.y+=e[1]||0,this.z+=e[2]||0):(this.x+=e||0,this.y+=t||0,this.z+=r||0),this}},{key:"rem",value:function(e,t,r){var o;if(e instanceof a.default.Vector){if([e.x,e.y,e.z].every(Number.isFinite))return n=parseFloat(e.x),s=parseFloat(e.y),o=parseFloat(e.z),d.call(this,n,s,o)}else if(Array.isArray(e)){if(e.every(function(e){return Number.isFinite(e)}))return 2===e.length?c.call(this,e[0],e[1]):3===e.length?d.call(this,e[0],e[1],e[2]):void 0}else if(1===arguments.length){if(Number.isFinite(e)&&0!==e)return this.x=this.x%e,this.y=this.y%e,this.z=this.z%e,this}else if(2===arguments.length){var n=Array.prototype.slice.call(arguments);if(n.every(function(e){return Number.isFinite(e)})&&2===n.length)return c.call(this,n[0],n[1])}else if(3===arguments.length){var s=Array.prototype.slice.call(arguments);if(s.every(function(e){return Number.isFinite(e)})&&3===s.length)return d.call(this,s[0],s[1],s[2])}}},{key:"sub",value:function(e,t,r){return e instanceof a.default.Vector?(this.x-=e.x||0,this.y-=e.y||0,this.z-=e.z||0):Array.isArray(e)?(this.x-=e[0]||0,this.y-=e[1]||0,this.z-=e[2]||0):(this.x-=e||0,this.y-=t||0,this.z-=r||0),this}},{key:"mult",value:function(e,t,r){var o;return e instanceof a.default.Vector?Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z?(this.x*=e.x,this.y*=e.y,this.z*=e.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(e)?e.every(function(e){return Number.isFinite(e)})&&e.every(function(e){return "number"==typeof e})?1===e.length?(this.x*=e[0],this.y*=e[0],this.z*=e[0]):2===e.length?(this.x*=e[0],this.y*=e[1]):3===e.length&&(this.x*=e[0],this.y*=e[1],this.z*=e[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(o=Array.prototype.slice.call(arguments)).every(function(e){return Number.isFinite(e)})&&o.every(function(e){return "number"==typeof e})?(1===arguments.length&&(this.x*=e,this.y*=e,this.z*=e),2===arguments.length&&(this.x*=e,this.y*=t),3===arguments.length&&(this.x*=e,this.y*=t,this.z*=r)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(e,t,r){if(e instanceof a.default.Vector)if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z){var o=0===e.z&&0===this.z;if(0===e.x||0===e.y||!o&&0===e.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=e.x,this.y/=e.y,o||(this.z/=e.z);}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(e))if(e.every(function(e){return Number.isFinite(e)})&&e.every(function(e){return "number"==typeof e})){if(e.some(function(e){return 0===e}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===e.length?(this.x/=e[0],this.y/=e[0],this.z/=e[0]):2===e.length?(this.x/=e[0],this.y/=e[1]):3===e.length&&(this.x/=e[0],this.y/=e[1],this.z/=e[2]);}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else {o=Array.prototype.slice.call(arguments);if(o.every(function(e){return Number.isFinite(e)})&&o.every(function(e){return "number"==typeof e})){if(o.some(function(e){return 0===e}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===arguments.length&&(this.x/=e,this.y/=e,this.z/=e),2===arguments.length&&(this.x/=e,this.y/=t),3===arguments.length&&(this.x/=e,this.y/=t,this.z/=r);}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");}return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var e=this.x,t=this.y,r=this.z;return e*e+t*t+r*r}},{key:"dot",value:function(e,t,r){return e instanceof a.default.Vector?this.dot(e.x,e.y,e.z):this.x*(e||0)+this.y*(t||0)+this.z*(r||0)}},{key:"cross",value:function(e){var t=this.y*e.z-this.z*e.y,r=this.z*e.x-this.x*e.z,e=this.x*e.y-this.y*e.x;return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,t,r,e):new a.default.Vector(t,r,e)}},{key:"dist",value:function(e){return e.copy().sub(this).mag()}},{key:"normalize",value:function(){var e=this.mag();return 0!==e&&this.mult(1/e),this}},{key:"limit",value:function(e){var t=this.magSq();return e*e<t&&this.div(Math.sqrt(t)).mult(e),this}},{key:"setMag",value:function(e){return this.normalize().mult(e)}},{key:"heading",value:function(){var e=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(e):e}},{key:"setHeading",value:function(e){this.isPInst&&(e=this._toRadians(e));var t=this.mag();return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this}},{key:"rotate",value:function(e){var e=this.heading()+e,t=(this.isPInst&&(e=this._toRadians(e)),this.mag());return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this}},{key:"angleBetween",value:function(e){var t;return 0==this.magSq()*e.magSq()?NaN:(t=this.cross(e),e=Math.atan2(t.mag(),this.dot(e))*Math.sign(t.z||1),this.isPInst?this._fromRadians(e):e)}},{key:"lerp",value:function(e,t,r,o){return e instanceof a.default.Vector?this.lerp(e.x,e.y,e.z,t):(this.x+=(e-this.x)*o||0,this.y+=(t-this.y)*o||0,this.z+=(r-this.z)*o||0,this)}},{key:"slerp",value:function(e,t){if(0!==t){if(1===t)return this.set(e);var r=this.mag(),o=e.mag();if(0==r*o)this.mult(1-t).add(e.x*t,e.y*t,e.z*t);else {var n=this.cross(e),s=n.mag(),i=Math.atan2(s,this.dot(e));if(0<s)n.x/=s,n.y/=s,n.z/=s;else {if(i<.5*Math.PI)return this.mult(1-t).add(e.x*t,e.y*t,e.z*t),this;0===this.z&&0===e.z?n.set(0,0,1):0!==this.x?n.set(this.y,-this.x,0).normalize():n.set(1,0,0);}s=n.cross(this),e=1-t+t*o/r,n=e*Math.cos(t*i),o=e*Math.sin(t*i);this.x=this.x*n+s.x*o,this.y=this.y*n+s.y*o,this.z=this.z*n+s.z*o;}}return this}},{key:"reflect",value:function(e){return e.normalize(),this.sub(e.mult(2*this.dot(e)))}},{key:"array",value:function(){return [this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(e,t,r){var o,n,e=e instanceof a.default.Vector?(o=e.x||0,n=e.y||0,e.z||0):Array.isArray(e)?(o=e[0]||0,n=e[1]||0,e[2]||0):(o=e||0,n=t||0,r||0);return this.x===o&&this.y===n&&this.z===e}}])&&u(e.prototype,t),r&&u(e,r),n}();var n=a.default.Vector;r.default=n;},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.every":153,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.math.sign":172,"core-js/modules/es.number.constructor":173,"core-js/modules/es.number.is-finite":174,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],309:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(e=e("../core/main"))&&e.__esModule?e:{default:e};var s="_lcg_random_state",o=4294967296,i=0,e=(n.default.prototype._lcg=function(e){return this[e]=(1664525*this[e]+1013904223)%o,this[e]/o},n.default.prototype._lcgSetSeed=function(e,t){this[e]=(null==t?Math.random()*o:t)>>>0;},n.default.prototype.randomSeed=function(e){this._lcgSetSeed(s,e),this._gaussian_previous=!1;},n.default.prototype.random=function(e,t){var r,o;return n.default._validateParameters("random",arguments),r=null!=this[s]?this._lcg(s):Math.random(),void 0===e?r:void 0===t?e instanceof Array?e[Math.floor(r*e.length)]:r*e:(t<e&&(o=e,e=t,t=o),r*(t-e)+e)},n.default.prototype.randomGaussian=function(e){var t,r,o,n,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)t=i,this._gaussian_previous=!1;else {for(;1<=(n=(r=this.random(2)-1)*r+(o=this.random(2)-1)*o););t=r*(n=Math.sqrt(-2*Math.log(n)/n)),i=o*n,this._gaussian_previous=!0;}return t*s+(e||0)},n.default);r.default=e;},{"../core/main":275}],310:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(l=e("../core/main"))&&l.__esModule?l:{default:l},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}n.default.prototype._angleMode=s.RADIANS,n.default.prototype.acos=function(e){return this._fromRadians(Math.acos(e))},n.default.prototype.asin=function(e){return this._fromRadians(Math.asin(e))},n.default.prototype.atan=function(e){return this._fromRadians(Math.atan(e))},n.default.prototype.atan2=function(e,t){return this._fromRadians(Math.atan2(e,t))},n.default.prototype.cos=function(e){return Math.cos(this._toRadians(e))},n.default.prototype.sin=function(e){return Math.sin(this._toRadians(e))},n.default.prototype.tan=function(e){return Math.tan(this._toRadians(e))},n.default.prototype.degrees=function(e){return e*s.RAD_TO_DEG},n.default.prototype.radians=function(e){return e*s.DEG_TO_RAD},n.default.prototype.angleMode=function(e){if(n.default._validateParameters("angleMode",arguments),void 0===e)return this._angleMode;e!==s.DEGREES&&e!==s.RADIANS||(this._angleMode=e);},n.default.prototype._toRadians=function(e){return this._angleMode===s.DEGREES?e*s.DEG_TO_RAD:e},n.default.prototype._toDegrees=function(e){return this._angleMode===s.RADIANS?e*s.RAD_TO_DEG:e},n.default.prototype._fromRadians=function(e){return this._angleMode===s.DEGREES?e*s.RAD_TO_DEG:e};var l=n.default;r.default=l;},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],311:[function(e,t,r){e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=(e=e("../core/main"))&&e.__esModule?e:{default:e};i.default.prototype.textAlign=function(e,t){var r;return i.default._validateParameters("textAlign",arguments),(r=this._renderer).textAlign.apply(r,arguments)},i.default.prototype.textLeading=function(e){var t;return i.default._validateParameters("textLeading",arguments),(t=this._renderer).textLeading.apply(t,arguments)},i.default.prototype.textSize=function(e){var t;return i.default._validateParameters("textSize",arguments),(t=this._renderer).textSize.apply(t,arguments)},i.default.prototype.textStyle=function(e){var t;return i.default._validateParameters("textStyle",arguments),(t=this._renderer).textStyle.apply(t,arguments)},i.default.prototype.textWidth=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t[0]+="",i.default._validateParameters("textWidth",t),0===t[0].length)return 0;for(var o=t[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),n=[],s=0;s<o.length;s++)n.push(this._renderer.textWidth(o[s]));return Math.max.apply(Math,n)},i.default.prototype.textAscent=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.default._validateParameters("textAscent",t),this._renderer.textAscent()},i.default.prototype.textDescent=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.default._validateParameters("textDescent",t),this._renderer.textDescent()},i.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},i.default.prototype.textWrap=function(e){if("WORD"!==e&&"CHAR"!==e)throw "Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(e)};e=i.default;r.default=e;},{"../core/main":275,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198}],312:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=(c=e("../core/main"))&&c.__esModule?c:{default:c},n=s(e("../core/constants")),u=s(e("opentype.js"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o,n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&((o=s?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]);return n.default=e,t&&t.set(e,n),n}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),l.default.prototype.loadFont=function(o,n,s){l.default._validateParameters("loadFont",arguments);var i=new l.default.Font(this),a=this;return u.load(o,function(e,t){if(e)return l.default._friendlyFileLoadError(4,o),void 0!==s?s(e):void console.error(e,o);i.font=t,void 0!==n&&n(i),a._decrementPreload();var e=o.split("\\").pop().split("/").pop(),t=e.lastIndexOf("."),r=t<1?null:e.slice(t+1);["ttf","otf","woff","woff2"].includes(r)&&(r=e.slice(0,-1!==t?t:0),(e=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(r,";\nsrc: url(").concat(o,");\n}\n"))),document.head.appendChild(e));}),i},l.default.prototype.text=function(e,t,r,o,n){var s;return l.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(s=this._renderer).text.apply(s,arguments):this},l.default.prototype.textFont=function(e,t){if(l.default._validateParameters("textFont",arguments),arguments.length){if(e)return this._renderer._setProperty("_textFont",e),t&&(this._renderer._setProperty("_textSize",t),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",t*n._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var c=l.default;r.default=c;},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,"opentype.js":249}],313:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(n=e("../core/main"))&&n.__esModule?n:{default:n},v=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==j(e)&&"function"!=typeof e)return {default:e};var t=i();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function i(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,i=function(){return e},e)}function j(e){return (j="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function _(e,t){var r=e.length;return e[t<0?t%r+r:t%r]}function x(e,t,r,o){var n,s,i;return o?(void 0===x.tmpPoint1&&(x.tmpPoint1=[],x.tmpPoint2=[]),s=x.tmpPoint1,i=x.tmpPoint2,s.x=t.x-e.x,s.y=t.y-e.y,i.x=r.x-t.x,i.y=r.y-t.y,n=s.x*i.x+s.y*i.y,s=Math.sqrt(s.x*s.x+s.y*s.y),i=Math.sqrt(i.x*i.x+i.y*i.y),Math.acos(n/(s*i))<o):0==(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}function d(e,t,r,o,n,s,i,a,l){var u=1-l,c=Math.pow(u,3),d=Math.pow(u,2),h=l*l,f=h*l,p=c*e+3*d*l*r+3*u*l*l*n+f*i,c=c*t+3*d*l*o+3*u*l*l*s+f*a,d=e+2*l*(r-e)+h*(n-2*r+e),f=t+2*l*(o-t)+h*(s-2*o+t),m=r+2*l*(n-r)+h*(i-2*n+r),h=o+2*l*(s-o)+h*(a-2*s+o),e=u*e+l*r,r=u*t+l*o,t=u*n+l*i,o=u*s+l*a,n=90-180*Math.atan2(d-m,f-h)/Math.PI;return (m<d||f<h)&&(n+=180),{x:p,y:c,m:{x:d,y:f},n:{x:m,y:h},start:{x:e,y:r},end:{x:t,y:o},alpha:n}}function h(e,t,r,o,n,s,i,a,l){return null==l?f(e,t,r,o,n,s,i,a):d(e,t,r,o,n,s,i,a,function(e,t,r,o,n,s,i,a,l){if(!(l<0||f(e,t,r,o,n,s,i,a)<l)){var u,c=.5,d=1-c;for(u=f(e,t,r,o,n,s,i,a,d);.01<Math.abs(u-l);)u=f(e,t,r,o,n,s,i,a,d+=(u<l?1:-1)*(c/=2));return d}}(e,t,r,o,n,s,i,a,l))}function w(e,t,r){for(var o,n,s,i,a,l=0,u=0,c=(e=function(e,t){function r(e,t,r){var o,n;if(!e)return ["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(M.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":n="C"===r||"S"===r?(o=2*t.x-t.bx,2*t.y-t.by):(o=t.x,t.y),e=["C",o,n].concat(e.slice(1));break;case"T":"Q"===r||"T"===r?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(E(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(E(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(T(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(T(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(T(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(T(t.x,t.y,t.X,t.Y));}return e}function o(e,t){if(7<e[t].length){e[t].shift();for(var r=e[t];r.length;)c[t]="A",a&&(d[t]="A"),e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),s=Math.max(i.length,a&&a.length||0);}}function n(e,t,r,o,n){e&&t&&"M"===e[n][0]&&"M"!==t[n][0]&&(t.splice(n,0,["M",o.x,o.y]),r.bx=0,r.by=0,r.x=e[n][1],r.y=e[n][2],s=Math.max(i.length,a&&a.length||0));}var s,i=b(e),a=t&&b(t),l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=[],d=[],h="",f="";s=Math.max(i.length,a&&a.length||0);for(var p=0;p<s;p++){"C"!==(h=i[p]?i[p][0]:h)&&(c[p]=h,p&&(f=c[p-1])),i[p]=r(i[p],l,f),"A"!==c[p]&&"C"===h&&(c[p]="C"),o(i,p),a&&("C"!==(h=a[p]?a[p][0]:h)&&(d[p]=h,p&&(f=d[p-1])),a[p]=r(a[p],u,f),"A"!==d[p]&&"C"===h&&(d[p]="C"),o(a,p)),n(i,a,l,u,p),n(a,i,u,l,p);var m=i[p],y=a&&a[p],g=m.length,v=a&&y.length;l.x=m[g-2],l.y=m[g-1],l.bx=parseFloat(m[g-4])||l.x,l.by=parseFloat(m[g-3])||l.y,u.bx=a&&(parseFloat(y[v-4])||u.x),u.by=a&&(parseFloat(y[v-3])||u.y),u.x=a&&y[v-2],u.y=a&&y[v-1];}return a?[i,a]:i}(e)).length;u<c;u++){if("M"===(s=e[u])[0])o=+s[1],n=+s[2];else {if(t<l+(i=h(o,n,s[1],s[2],s[3],s[4],s[5],s[6]))&&!r)return {x:(a=h(o,n,s[1],s[2],s[3],s[4],s[5],s[6],t-l)).x,y:a.y,alpha:a.alpha};l+=i,o=+s[5],n=+s[6];}s.shift();}return a=(a=r?l:d(o,n,s[0],s[1],s[2],s[3],s[4],s[5],1)).alpha?{x:a.x,y:a.y,alpha:a.alpha}:a}function b(e){var t=[],r=0,o=0,n=0,s=0,i=0;if(e){"M"===e[0][0]&&(n=r=+e[0][1],s=o=+e[0][2],i++,t[0]=["M",r,o]);for(var a,l,u=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),c=i,d=e.length;c<d;c++){if(t.push(a=[]),(l=e[c])[0]!==String.prototype.toUpperCase.call(l[0]))switch(a[0]=String.prototype.toUpperCase.call(l[0]),a[0]){case"A":a[1]=l[1],a[2]=l[2],a[3]=l[3],a[4]=l[4],a[5]=l[5],a[6]=+(l[6]+r),a[7]=+(l[7]+o);break;case"V":a[1]=+l[1]+o;break;case"H":a[1]=+l[1]+r;break;case"R":for(var h,f=2,p=(h=[r,o].concat(l.slice(1))).length;f<p;f++)h[f]=+h[f]+r,h[++f]=+h[f]+o;t.pop(),t=t.concat(S(h,u));break;case"M":n=+l[1]+r,s=+l[2]+o;break;default:for(var m=1,y=l.length;m<y;m++)a[m]=+l[m]+(m%2?r:o);}else if("R"===l[0])h=[r,o].concat(l.slice(1)),t.pop(),t=t.concat(S(h,u)),a=["R"].concat(l.slice(-2));else for(var g=0,v=l.length;g<v;g++)a[g]=l[g];switch(a[0]){case"Z":r=n,o=s;break;case"H":r=a[1];break;case"V":o=a[1];break;case"M":n=a[a.length-2],s=a[a.length-1];break;default:r=a[a.length-2],o=a[a.length-1];}}}return t}function M(e,t,r,o,n,s,i,a,l,u){function c(e,t,r){return {x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}}var d,h=Math.PI,f=120*h/180,p=h/180*(+n||0),m=[],y=(u?(x=u[0],d=u[1],j=u[2],_=u[3]):(e=(v=c(e,t,-p)).x,t=v.y,1<(y=(g=(e-(a=(v=c(a,l,-p)).x))/2)*g/(r*r)+(v=(t-(l=v.y))/2)*v/(o*o))&&(r*=y=Math.sqrt(y),o*=y),y=r*r,b=o*o,j=(s=(s===i?-1:1)*Math.sqrt(Math.abs((y*b-y*v*v-b*g*g)/(y*v*v+b*g*g))))*r*v/o+(e+a)/2,_=s*-o*g/r+(t+l)/2,x=Math.asin(((t-_)/o).toFixed(9)),d=Math.asin(((l-_)/o).toFixed(9)),(x=e<j?h-x:x)<0&&(x=2*h+x),(d=a<j?h-d:d)<0&&(d=2*h+d),i&&d<x&&(x-=2*h),!i&&x<d&&(d-=2*h)),d-x),g=(Math.abs(y)>f&&(b=d,v=a,s=l,d=x+f*(i&&x<d?1:-1),m=M(a=j+r*Math.cos(d),l=_+o*Math.sin(d),r,o,n,0,i,v,s,[d,b,j,_])),y=d-x,Math.cos(x)),h=Math.sin(x),f=Math.cos(d),n=Math.sin(d),i=Math.tan(y/4),v=4/3*r*i,s=4/3*o*i,b=[e,t],j=[e+v*h,t-s*g],_=[a+v*n,l-s*f],x=[a,l];if(j[0]=2*b[0]-j[0],j[1]=2*b[1]-j[1],u)return [j,_,x].concat(m);for(var w=[],S=0,T=(m=[j,_,x].concat(m).join().split(",")).length;S<T;S++)w[S]=S%2?c(m[S-1],m[S],p).y:c(m[S],m[S+1],p).x;return w}function S(e,t){for(var r=[],o=0,n=e.length;o<n-2*!t;o+=2){var s=[{x:+e[o-2],y:+e[o-1]},{x:+e[o],y:+e[o+1]},{x:+e[o+2],y:+e[o+3]},{x:+e[o+4],y:+e[o+5]}];t?o?n-4===o?s[3]={x:+e[0],y:+e[1]}:n-2===o&&(s[2]={x:+e[0],y:+e[1]},s[3]={x:+e[2],y:+e[3]}):s[0]={x:+e[n-2],y:+e[n-1]}:n-4===o?s[3]=s[2]:o||(s[0]={x:+e[o],y:+e[o+1]}),r.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y]);}return r}function T(e,t,r,o){return [e,t,r,o,r,o]}function E(e,t,r,o,n,s){return [1/3*e+2/3*r,1/3*t+2/3*o,1/3*n+2/3*r,1/3*s+2/3*o,n,s]}function f(e,t,r,o,n,s,i,a,l){for(var u=(l=1<(l=null==l?1:l)?1:l<0?0:l)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=0,h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0;f<12;f++){var p=u*c[f]+u,m=y(p,e,r,n,i),p=y(p,t,o,s,a);d+=h[f]*Math.sqrt(m*m+p*p);}return u*d}function y(e,t,r,o,n){return e*(e*(-3*t+9*r-9*o+3*n)+6*t-12*r+6*o)-3*t+3*r}n.default.Font=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.parent=e,this.cache={},this.font=void 0;}var e,r;return e=t,(r=[{key:"textBounds",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length?arguments[3]:void 0,n=4<arguments.length?arguments[4]:void 0,s=n&&n.renderer&&n.renderer._pInst||this.parent,i=s._renderer.drawingContext,o=(i.textAlign||v.LEFT,i.textBaseline||v.BASELINE,o||s._renderer._textSize);if(!g){for(var a=[],l=[],u=[],c=(u[0]=[],[]),d=this._scale(o),h=s._renderer.textLeading(),f=0,p=(this.font.forEachGlyph(e,t,r,o,n,function(e,t,r,o){var n=e.getMetrics();0===e.index||10===e.index?u[f+=1]=[]:(u[f].push(t+n.xMin*d),u[f].push(t+n.xMax*d),c.push(r+f*h+-n.yMin*d),c.push(r+f*h+-n.yMax*d));}),0<u[f].length&&(a[f]=Math.min.apply(null,u[f]),l[f]=Math.max.apply(null,u[f])),0),m=0;m<=f;m++){a[m]=Math.min.apply(null,u[m]),l[m]=Math.max.apply(null,u[m]);var y=l[m]-a[m];p<y&&(p=y);}var i=Math.min.apply(null,a),g={x:i,y:r=Math.min.apply(null,c),h:Math.max.apply(null,c)-r,w:p,advance:i-t},o=this._handleAlignment(s._renderer,e,g.x,g.y,g.w+g.advance);g.x=o.x,g.y=o.y;}return g}},{key:"textToPoints",value:function(e,t,r,o,n){var s=t,i=[],a=e.split(/\r?\n|\r|\n/g);o=o||this.parent._renderer._textSize;for(var l,u,c,d=0;d<a.length;d++){var h=0;t=s;for(var f=(f=a[d]).replace("\t","  "),p=this._getGlyphs(f),m=0;m<p.length;m++){if(u=f,!((c=p)[l=m].name&&"space"===c[l].name||u.length===c.length&&" "===u[l]))for(var y=function(e){for(var t,r=[],o=0;o<e.length;o++)"M"===e[o].type&&(t&&r.push(t),t=[]),t.push(function(e){var t=[e.type];"M"===e.type||"L"===e.type?t.push(e.x,e.y):"C"===e.type?t.push(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type&&t.push(e.x1,e.y1,e.x,e.y);return t}(e[o]));return r.push(t),r}(p[m].getPath(t,r,o).commands),g=0;g<y.length;g++)for(var v=function(e,t){for(var t=function(e,t){if("object"!==j(e))e=t;else for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e}(t,{sampleFactor:.1,simplifyThreshold:0}),r=w(e,0,1),o=r/(r*t.sampleFactor),n=[],s=0;s<r;s+=o)n.push(w(e,s));t.simplifyThreshold&&!function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=0,o=e.length-1;3<e.length&&0<=o;--o)x(_(e,o-1),_(e,o),_(e,o+1),t)&&(e.splice(o%e.length,1),r++);}(n,t.simplifyThreshold);return n}(y[g],n),b=0;b<v.length;b++)v[b].x+=h,i.push(v[b]);h+=p[m].advanceWidth*this._scale(o);}r+=this.parent._renderer._textLeading;}return i}},{key:"_getGlyphs",value:function(e){return this.font.stringToGlyphs(e)}},{key:"_getPath",value:function(e,t,r,o){var n=(o&&o.renderer&&o.renderer._pInst||this.parent)._renderer,t=this._handleAlignment(n,e,t,r);return this.font.getPath(e,t.x,t.y,n._textSize,o)}},{key:"_getPathData",value:function(e,t,r,o){var n=3;return "string"==typeof e&&2<arguments.length?e=this._getPath(e,t,r,o):"object"===j(t)&&(o=t),o&&"number"==typeof o.decimals&&(n=o.decimals),e.toPathData(n)}},{key:"_getSVG",value:function(e,t,r,o){var n=3;return "string"==typeof e&&2<arguments.length?e=this._getPath(e,t,r,o):"object"===j(t)&&(o=t),o&&("number"==typeof o.decimals&&(n=o.decimals),"number"==typeof o.strokeWidth&&(e.strokeWidth=o.strokeWidth),void 0!==o.fill&&(e.fill=o.fill),void 0!==o.stroke&&(e.stroke=o.stroke)),e.toSVG(n)}},{key:"_renderPath",value:function(e,t,r,o){var n=o&&o.renderer||this.parent._renderer,s=n.drawingContext,e=("object"===j(e)&&e.commands?e:this._getPath(e,t,r,o)).commands,i=(s.beginPath(),!0),t=!1,r=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value;"M"===u.type?s.moveTo(u.x,u.y):"L"===u.type?s.lineTo(u.x,u.y):"C"===u.type?s.bezierCurveTo(u.x1,u.y1,u.x2,u.y2,u.x,u.y):"Q"===u.type?s.quadraticCurveTo(u.x1,u.y1,u.x,u.y):"Z"===u.type&&s.closePath();}}catch(e){t=!0,r=e;}finally{try{i||null==l.return||l.return();}finally{if(t)throw r}}return n._doStroke&&n._strokeSet&&!n._clipping&&s.stroke(),n._doFill&&!n._clipping&&(n._fillSet||n._setFill(v._DEFAULT_TEXT_FILL),s.fill()),this}},{key:"_textWidth",value:function(e,t){return this.font.getAdvanceWidth(e,t)}},{key:"_textAscent",value:function(e){return this.font.ascender*this._scale(e)}},{key:"_textDescent",value:function(e){return -this.font.descender*this._scale(e)}},{key:"_scale",value:function(e){return 1/this.font.unitsPerEm*(e||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(e,t,r,o,n){var s=e._textSize;switch(void 0===n&&(n=this._textWidth(t,s)),e._textAlign){case v.CENTER:r-=n/2;break;case v.RIGHT:r-=n;}switch(e._textBaseline){case v.TOP:o+=this._textAscent(s);break;case v.CENTER:o+=this._textAscent(s)/2;break;case v.BOTTOM:o-=this._textDescent(s);}return {x:r,y:o}}}])&&s(e.prototype,r),t}();e=n.default;r.default=e;},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],314:[function(e,t,r){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("../core/main"))&&e.__esModule?e:{default:e};e.default.prototype.append=function(e,t){return e.push(t),e},e.default.prototype.arrayCopy=function(e,t,r,o,n){var s,i;e=void 0!==n?(i=Math.min(n,e.length),s=o,e.slice(t,i+t)):(i=void 0!==r?(i=r,Math.min(i,e.length)):e.length,r=t,e.slice(s=0,i)),Array.prototype.splice.apply(r,[s,i].concat(e));},e.default.prototype.concat=function(e,t){return e.concat(t)},e.default.prototype.reverse=function(e){return e.reverse()},e.default.prototype.shorten=function(e){return e.pop(),e},e.default.prototype.shuffle=function(e,t){for(var r,o,n=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e),s=(e=t||n?e:e.slice()).length;1<s;)r=this.random(0,1)*s|0,o=e[--s],e[s]=e[r],e[r]=o;return e},e.default.prototype.sort=function(e,t){var r=t?e.slice(0,Math.min(t,e.length)):e,t=t?e.slice(Math.min(t,e.length)):[];return (r="string"==typeof r[0]?r.sort():r.sort(function(e,t){return e-t})).concat(t)},e.default.prototype.splice=function(e,t,r){return Array.prototype.splice.apply(e,[r,0].concat(t)),e},e.default.prototype.subset=function(e,t,r){return void 0!==r?e.slice(t,t+r):e.slice(t,e.length)};e=e.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array-buffer.constructor":150,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.to-string":182}],315:[function(e,t,r){e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};o.default.prototype.float=function(e){return e instanceof Array?e.map(parseFloat):parseFloat(e)},o.default.prototype.int=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return e===1/0||"Infinity"===e?1/0:e===-1/0||"-Infinity"===e?-1/0:"string"==typeof e?parseInt(e,t):"number"==typeof e?0|e:"boolean"==typeof e?e?1:0:e instanceof Array?e.map(function(e){return o.default.prototype.int(e,t)}):void 0},o.default.prototype.str=function(e){return e instanceof Array?e.map(o.default.prototype.str):String(e)},o.default.prototype.boolean=function(e){return "number"==typeof e?0!==e:"string"==typeof e?"true"===e.toLowerCase():"boolean"==typeof e?e:e instanceof Array?e.map(o.default.prototype.boolean):void 0},o.default.prototype.byte=function(e){e=o.default.prototype.int(e,10);return "number"==typeof e?(e+128)%256-128:e instanceof Array?e.map(o.default.prototype.byte):void 0},o.default.prototype.char=function(e){return "number"!=typeof e||isNaN(e)?e instanceof Array?e.map(o.default.prototype.char):"string"==typeof e?o.default.prototype.char(parseInt(e,10)):void 0:String.fromCharCode(e)},o.default.prototype.unchar=function(e){return "string"==typeof e&&1===e.length?e.charCodeAt(0):e instanceof Array?e.map(o.default.prototype.unchar):void 0},o.default.prototype.hex=function(e,t){if(t=null==t?8:t,e instanceof Array)return e.map(function(e){return o.default.prototype.hex(e,t)});if(e===1/0||e===-1/0)return (e===1/0?"F":"0").repeat(t);if("number"==typeof e){e<0&&(e=4294967295+e+1);for(var r=Number(e).toString(16).toUpperCase();r.length<t;)r="0".concat(r);return r=r.length>=t?r.substring(r.length-t,r.length):r}},o.default.prototype.unhex=function(e){return e instanceof Array?e.map(o.default.prototype.unhex):parseInt("0x".concat(e),16)};e=o.default;r.default=e;},{"../core/main":275,"core-js/modules/es.array.map":164,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.repeat":195}],316:[function(e,t,r){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.pad-start"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.pad-start"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=(u=e("../core/main"))&&u.__esModule?u:{default:u};function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],o=!0,n=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(o=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){n=!0,s=e;}finally{try{o||null==a.return||a.return();}finally{if(n)throw s}}return r}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t,r){var o=i(e.toString().split("."),2),n=o[0],o=o[1];return void 0===r?(n=n.padStart(t,"0"),o?n+"."+o:n):(n=(e=i(e.toFixed(r).toString().split("."),2))[0],o=e[1],n=n.padStart(t,"0"),void 0===o?n:n+"."+o)}function n(e,t){var r=(e=e.toString()).indexOf("."),o=-1!==r?e.substring(r):"",e=(e=-1!==r?e.substring(0,r):e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(0===t)o="";else if(void 0!==t)if(t>o.length)for(var n=t-(o+=-1===r?".":"").length+1,s=0;s<n;s++)o+="0";else o=o.substring(0,t+1);return e+o}function a(e){return 0<parseFloat(e)?"+".concat(e.toString()):e.toString()}function l(e){return 0<=parseFloat(e)?" ".concat(e.toString()):e.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),s.default.prototype.join=function(e,t){return s.default._validateParameters("join",arguments),e.join(t)},s.default.prototype.match=function(e,t){return s.default._validateParameters("match",arguments),e.match(t)},s.default.prototype.matchAll=function(e,t){s.default._validateParameters("matchAll",arguments);for(var r=new RegExp(t,"g"),o=r.exec(e),n=[];null!==o;)n.push(o),o=r.exec(e);return n},s.default.prototype.nf=function(e,t,r){return s.default._validateParameters("nf",arguments),e instanceof Array?e.map(function(e){return o(e,t,r)}):"[object Arguments]"===Object.prototype.toString.call(e)?3===e.length?this.nf(e[0],e[1],e[2]):2===e.length?this.nf(e[0],e[1]):this.nf(e[0]):o(e,t,r)},s.default.prototype.nfc=function(e,t){return s.default._validateParameters("nfc",arguments),e instanceof Array?e.map(function(e){return n(e,t)}):n(e,t)},s.default.prototype.nfp=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];s.default._validateParameters("nfp",t);var o=s.default.prototype.nf.apply(this,t);return o instanceof Array?o.map(a):a(o)},s.default.prototype.nfs=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];s.default._validateParameters("nfs",t);var o=s.default.prototype.nf.apply(this,t);return o instanceof Array?o.map(l):l(o)},s.default.prototype.split=function(e,t){return s.default._validateParameters("split",arguments),e.split(t)},s.default.prototype.splitTokens=function(e,t){var r,o;return s.default._validateParameters("splitTokens",arguments),o=void 0!==t?(o=/\]/g.exec(t=t),(r=/\[/g.exec(t))&&o?(t=t.slice(0,o.index)+t.slice(o.index+1),r=/\[/g.exec(t),t=t.slice(0,r.index)+t.slice(r.index+1),new RegExp("[\\[".concat(t,"\\]]"),"g")):o?(t=t.slice(0,o.index)+t.slice(o.index+1),new RegExp("[".concat(t,"\\]]"),"g")):r?(t=t.slice(0,r.index)+t.slice(r.index+1),new RegExp("[".concat(t,"\\[]"),"g")):new RegExp("[".concat(t,"]"),"g")):/\s/g,e.split(o).filter(function(e){return e})},s.default.prototype.trim=function(e){return s.default._validateParameters("trim",arguments),e instanceof Array?e.map(this.trim):e.trim()};var u=s.default;r.default=u;},{"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.pad-start":194,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],317:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("../core/main"))&&e.__esModule?e:{default:e};e.default.prototype.day=function(){return (new Date).getDate()},e.default.prototype.hour=function(){return (new Date).getHours()},e.default.prototype.minute=function(){return (new Date).getMinutes()},e.default.prototype.millis=function(){return -1===this._millisStart?0:window.performance.now()-this._millisStart},e.default.prototype.month=function(){return (new Date).getMonth()+1},e.default.prototype.second=function(){return (new Date).getSeconds()},e.default.prototype.year=function(){return (new Date).getFullYear()};e=e.default;r.default=e;},{"../core/main":275}],318:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var S=(n=e("../core/main"))&&n.__esModule?n:{default:n},_=(e("./p5.Geometry"),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants")));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}S.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},S.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},S.default.prototype.buildGeometry=function(e){return this._renderer.buildGeometry(e)},S.default.prototype.freeGeometry=function(e){this._renderer._freeBuffers(e.gid);},S.default.prototype.plane=function(e,t,r,o){this._assert3d("plane"),S.default._validateParameters("plane",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===o&&(o=1);var n,s="plane|".concat(r=void 0===r?1:r,"|").concat(o);return this._renderer.geometryInHash(s)||((n=new S.default.Geometry(r,o,function(){for(var e,t,r=0;r<=this.detailY;r++)for(var o=r/this.detailY,n=0;n<=this.detailX;n++)e=n/this.detailX,t=new S.default.Vector(e-.5,o-.5,0),this.vertices.push(t),this.uvs.push(e,o);})).computeFaces().computeNormals(),r<=1&&o<=1?n._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(s,n)),this._renderer.drawBuffersScaled(s,e,t,1),this},S.default.prototype.box=function(e,t,r,o,n){this._assert3d("box"),S.default._validateParameters("box",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=t);var s,i=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,i=(void 0===n&&(n=i?1:4),"box|".concat(o=void 0===o?i?1:4:o,"|").concat(n));return this._renderer.geometryInHash(i)||((s=new S.default.Geometry(o,n,function(){var n=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(e,t){for(var t=4*t,r=0;r<4;r++){var o=e[r],o=new S.default.Vector((2*(1&o)-1)/2,((2&o)-1)/2,((4&o)/2-1)/2);n.vertices.push(o),n.uvs.push(1&r,(2&r)/2);}n.faces.push([t,1+t,2+t]),n.faces.push([2+t,1+t,3+t]);});})).computeNormals(),o<=4&&n<=4?s._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(i,s)),this._renderer.drawBuffersScaled(i,e,t,r),this},S.default.prototype.sphere=function(e,t,r){return this._assert3d("sphere"),S.default._validateParameters("sphere",arguments),this.ellipsoid(e=void 0===e?50:e,e,e,t=void 0===t?24:t,r=void 0===r?16:r),this};function l(e,t,r,o,n,s,i){e=e<=0?1:e,t=t<0?0:t,r=r<=0?e:r,o=o<3?3:o;for(var a,l,u=(s=void 0===s||s)?-2:0,c=(n=n<1?1:n)+((i=void 0===i?0!==t:i)?2:0),d=Math.atan2(e-t,r),h=Math.sin(d),f=Math.cos(d),p=u;p<=c;++p){var m=p/n,y=r*m,g=void 0,g=p<0?(m=y=0,e):n<p?(y=r,m=1,t):e+(t-e)*m;for(-2!==p&&p!==n+2||(g=0),y-=r/2,a=0;a<o;++a){var v=a/(o-1),b=2*Math.PI*v,j=Math.sin(b),b=Math.cos(b),_=(this.vertices.push(new S.default.Vector(j*g,y,b*g)),void 0),_=p<0?new S.default.Vector(0,-1,0):n<p&&t?new S.default.Vector(0,1,0):new S.default.Vector(j*f,h,b*f);this.vertexNormals.push(_),this.uvs.push(v,m);}}var x=0;if(s){for(l=0;l<o;++l)this.faces.push([x+l,x+o+(l+1)%o,x+o+l]);x+=2*o;}for(p=0;p<n;++p){for(a=0;a<o;++a){var w=(a+1)%o;this.faces.push([x+a,x+w,x+o+w]),this.faces.push([x+a,x+o+w,x+o+a]);}x+=o;}if(i)for(x+=o,a=0;a<o;++a)this.faces.push([x+a,x+(a+1)%o,x+o]);}S.default.prototype.cylinder=function(e,t,r,o,n,s){this._assert3d("cylinder"),S.default._validateParameters("cylinder",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===o&&(o=1),void 0===s&&(s=!0),void 0===n&&(n=!0);var i,a="cylinder|".concat(r=void 0===r?24:r,"|").concat(o,"|").concat(n,"|").concat(s);return this._renderer.geometryInHash(a)||(i=new S.default.Geometry(r,o),l.call(i,1,1,1,r,o,n,s),r<=24&&o<=16?i._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(a,i)),this._renderer.drawBuffersScaled(a,e,t,e),this},S.default.prototype.cone=function(e,t,r,o,n){this._assert3d("cone"),S.default._validateParameters("cone",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===o&&(o=1),void 0===n&&(n=!0);var s,i="cone|".concat(r=void 0===r?24:r,"|").concat(o,"|").concat(n);return this._renderer.geometryInHash(i)||(s=new S.default.Geometry(r,o),l.call(s,1,0,1,r,o,n,!1),r<=24&&o<=16?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(i,s)),this._renderer.drawBuffersScaled(i,e,t,e),this},S.default.prototype.ellipsoid=function(e,t,r,o,n){this._assert3d("ellipsoid"),S.default._validateParameters("ellipsoid",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=e),void 0===n&&(n=16);var s,i="ellipsoid|".concat(o=void 0===o?24:o,"|").concat(n);return this._renderer.geometryInHash(i)||((s=new S.default.Geometry(o,n,function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,r=Math.PI*t-Math.PI/2,o=Math.cos(r),n=Math.sin(r),s=0;s<=this.detailX;s++){var i=s/this.detailX,a=2*Math.PI*i,l=Math.cos(a),a=Math.sin(a),a=new S.default.Vector(o*a,n,o*l);this.vertices.push(a),this.vertexNormals.push(a),this.uvs.push(i,t);}})).computeFaces(),o<=24&&n<=24?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(i,s)),this._renderer.drawBuffersScaled(i,e,t,r),this},S.default.prototype.torus=function(e,t,r,o){if(this._assert3d("torus"),S.default._validateParameters("torus",arguments),void 0===e)e=50;else if(!e)return;if(void 0===t)t=10;else if(!t)return;void 0===r&&(r=24),void 0===o&&(o=16);var n,d=(t/e).toPrecision(4),t="torus|".concat(d,"|").concat(r,"|").concat(o);return this._renderer.geometryInHash(t)||((n=new S.default.Geometry(r,o,function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,r=2*Math.PI*t,o=Math.cos(r),n=Math.sin(r),s=1+d*o,i=0;i<=this.detailX;i++){var a=i/this.detailX,l=2*Math.PI*a,u=Math.cos(l),l=Math.sin(l),c=new S.default.Vector(s*u,s*l,d*n),u=new S.default.Vector(o*u,o*l,n);this.vertices.push(c),this.vertexNormals.push(u),this.uvs.push(a,t);}})).computeFaces(),r<=24&&o<=16?n._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(t,n)),this._renderer.drawBuffersScaled(t,e,e,e),this},S.default.RendererGL.prototype.point=function(e,t,r){var o=[];return o.push(new S.default.Vector(e,t,r=void 0===r?0:r)),this._drawPoints(o,this.immediateMode.buffers.point),this},S.default.RendererGL.prototype.triangle=function(e){var t=e[0],r=e[1],o=e[2],n=e[3],s=e[4],e=e[5],i=(this.geometryInHash("tri")||((i=new S.default.Geometry(1,1,function(){var e=[];e.push(new S.default.Vector(0,0,0)),e.push(new S.default.Vector(1,0,0)),e.push(new S.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=e,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1];}))._edgesToVertices(),i.computeNormals(),this.createBuffers("tri",i)),this.uMVMatrix.copy());try{var a=Math.sign(t*n-o*r+o*e-s*n+s*r-t*e),l=new S.default.Matrix([o-t,n-r,0,0,s-t,e-r,0,0,0,0,a,0,t,r,0,1]).mult(this.uMVMatrix);this.uMVMatrix=l,this.drawBuffers("tri");}finally{this.uMVMatrix=i;}return this},S.default.RendererGL.prototype.ellipse=function(e){this.arc(e[0],e[1],e[2],e[3],0,_.TWO_PI,_.OPEN,e[4]);},S.default.RendererGL.prototype.arc=function(e){var t,r=arguments[1],o=arguments[2],n=arguments[3],s=arguments[4],i=arguments[5],a=arguments[6],l=arguments[7]||25,u=(Math.abs(i-s)>=_.TWO_PI?"".concat(c="ellipse","|"):"".concat(c="arc","|").concat(s,"|").concat(i,"|").concat(a,"|")).concat(l,"|"),c=(this.geometryInHash(u)||((t=new S.default.Geometry(l,1,function(){if(s.toFixed(10)!==i.toFixed(10)){a!==_.PIE&&void 0!==a||(this.vertices.push(new S.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var e=0;e<=l;e++){var t=(i-s)*(e/l)+s,r=.5+Math.cos(t)/2,t=.5+Math.sin(t)/2;this.vertices.push(new S.default.Vector(r,t,0)),this.uvs.push([r,t]),e<l-1&&(this.faces.push([0,e+1,e+2]),this.edges.push([e+1,e+2]));}switch(a){case _.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case _.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case _.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]);}}})).computeNormals(),l<=50?t._edgesToVertices(t):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(c," with more than 50 detail")),this.createBuffers(u,t)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([e,r,0]),this.uMVMatrix.scale(o,n,1),this.drawBuffers(u);}finally{this.uMVMatrix=c;}return this},S.default.RendererGL.prototype.rect=function(e){var t=e[0],r=e[1],o=e[2],n=e[3];if(void 0===e[4]){var s=this._pInst._glAttributes.perPixelLighting,i=e[4]||(s?1:24),a=e[5]||(s?1:16),s="rect|".concat(i,"|").concat(a),l=(this.geometryInHash(s)||((l=new S.default.Geometry(i,a,function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,r=0;r<=this.detailX;r++){var o=r/this.detailX,n=new S.default.Vector(o,t,0);this.vertices.push(n),this.uvs.push(o,t);}0<i&&0<a&&(this.edges=[[0,i],[i,(i+1)*(a+1)-1],[(i+1)*(a+1)-1,(i+1)*a],[(i+1)*a,0]]);})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(s,l)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([t,r,0]),this.uMVMatrix.scale(o,n,1),this.drawBuffers(s);}finally{this.uMVMatrix=l;}}else {var s=e[4],l=void 0===e[5]?s:e[5],u=void 0===e[6]?l:e[6],e=void 0===e[7]?u:e[7],c=o,d=n,h=((c+=t)<t&&(h=t,t=c,c=h),(d+=r)<r&&(h=r,r=d,d=h),Math.min((c-t)/2,(d-r)/2)),f=(h<s&&(s=h),h<l&&(l=h),h<u&&(u=h),h<e&&(e=h),t),p=r,h=c,t=d,m=(this.beginShape(),0!==l?(this.vertex(h-l,p),this.quadraticVertex(h,p,h,p+l)):this.vertex(h,p),0!==u?(this.vertex(h,t-u),this.quadraticVertex(h,t,h-u,t)):this.vertex(h,t),0!==e?(this.vertex(f+e,t),this.quadraticVertex(f,t,f,t-e)):this.vertex(f,t),0!==s?(this.vertex(f,p+s),this.quadraticVertex(f,p,f+s,p)):this.vertex(f,p),!(this.immediateMode.geometry.uvs.length=0)),r=!1,c=void 0;try{for(var y,g=this.immediateMode.geometry.vertices[Symbol.iterator]();!(m=(y=g.next()).done);m=!0){var v=y.value,b=(v.x-f)/o,j=(v.y-p)/n;this.immediateMode.geometry.uvs.push(b,j);}}catch(e){r=!0,c=e;}finally{try{m||null==g.return||g.return();}finally{if(r)throw c}}this.endShape(_.CLOSE);}return this},S.default.RendererGL.prototype.quad=function(i,a,l,u,c,d,h,f,p,m,y,g,e,t){void 0===e&&(e=2),void 0===t&&(t=2);var r="quad|".concat(i,"|").concat(a,"|").concat(l,"|").concat(u,"|").concat(c,"|").concat(d,"|").concat(h,"|").concat(f,"|").concat(p,"|").concat(m,"|").concat(y,"|").concat(g,"|").concat(e,"|").concat(t);if(!this.geometryInHash(r)){var o=new S.default.Geometry(e,t,function(){for(var e=1/(this.detailX-1),t=1/(this.detailY-1),r=0;r<this.detailY;r++)for(var o=0;o<this.detailX;o++){var n=o*e,s=r*t;this.vertices.push(new S.default.Vector((1-n)*((1-s)*i+s*m)+n*((1-s)*u+s*h),(1-n)*((1-s)*a+s*y)+n*((1-s)*c+s*f),(1-n)*((1-s)*l+s*g)+n*((1-s)*d+s*p))),this.uvs.push([n,s]);}});o.faces=[];for(var n=0;n<t-1;n++)for(var s=0;s<e-1;s++){var v=s+n*e,b=s+1+(n+1)*e,j=s+(n+1)*e;o.faces.push([v,s+1+n*e,b]),o.faces.push([v,b,j]);}o.computeNormals();for(var _=[o.edges.length=0,2,3,1],x=0;x<_.length;x++)o.edges.push([_[x],_[(x+1)%_.length]]);o._edgesToVertices(),this.createBuffers(r,o);}return this.drawBuffers(r),this},S.default.RendererGL.prototype.bezier=function(e,t,r,o,n,s,i,a,l,u,c,d){8===arguments.length&&(c=a,u=i,a=s,i=n,n=o,o=r,r=s=l=d=0);var h=this._pInst._bezierDetail||20;this.beginShape();for(var f=0;f<=h;f++){var p=Math.pow(1-f/h,3),m=f/h*3*Math.pow(1-f/h,2),y=3*Math.pow(f/h,2)*(1-f/h),g=Math.pow(f/h,3);this.vertex(e*p+o*m+i*y+u*g,t*p+n*m+a*y+c*g,r*p+s*m+l*y+d*g);}return this.endShape(),this},S.default.RendererGL.prototype.curve=function(e,t,r,o,n,s,i,a,l,u,c,d){8===arguments.length&&(u=i,c=a,i=n,a=o,n=o=r,r=s=l=d=0);var h=this._pInst._curveDetail;this.beginShape();for(var f=0;f<=h;f++){var p=.5*Math.pow(f/h,3),m=.5*Math.pow(f/h,2),y=f/h*.5;this.vertex(p*(3*o-e-3*i+u)+m*(2*e-5*o+4*i-u)+y*(-e+i)+2*o*.5,p*(3*n-t-3*a+c)+m*(2*t-5*n+4*a-c)+y*(-t+a)+2*n*.5,p*(3*s-r-3*l+d)+m*(2*r-5*s+4*l-d)+y*(-r+l)+2*s*.5);}return this.endShape(),this},S.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(_.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(_.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},S.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var e,t,r,o,n,s,i=[],a=[],l=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var u=1/this._lutBezierDetail,c=0,d=1,h=0;c<1;){if(s=parseFloat(c.toFixed(6)),this._lookUpTableBezier[h]=this._bezierCoefficients(s),d.toFixed(6)===u.toFixed(6)){s=parseFloat(d.toFixed(6))+parseFloat(c.toFixed(6)),++h,this._lookUpTableBezier[h]=this._bezierCoefficients(s);break}c+=u,d-=u,++h;}}for(var f=this._lookUpTableBezier.length,p=[],m=0;m<4;m++)p.push([]);p[0]=this.immediateMode.geometry.vertexColors.slice(-4),p[3]=this.curFillColor.slice();var y=[];for(m=0;m<4;m++)y.push([]);if(y[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),y[3]=this.curStrokeColor.slice(),6===l){this.isBezier=!0;var i=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],a=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],g=Math.hypot(i[0]-i[1],a[0]-a[1]),v=Math.hypot(i[1]-i[2],a[1]-a[2]),b=Math.hypot(i[2]-i[3],a[2]-a[3]),v=g+v+b;for(g/=v,b/=v,n=0;n<4;n++)p[1].push(p[0][n]*(1-g)+p[3][n]*g),p[2].push(p[0][n]*b+p[3][n]*(1-b)),y[1].push(y[0][n]*(1-g)+y[3][n]*g),y[2].push(y[0][n]*b+y[3][n]*(1-b));for(o=0;o<f;o++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=0;m<4;m++){for(n=0;n<4;n++)this.curFillColor[n]+=this._lookUpTableBezier[o][m]*p[m][n],this.curStrokeColor[n]+=this._lookUpTableBezier[o][m]*y[m][n];e+=i[m]*this._lookUpTableBezier[o][m],t+=a[m]*this._lookUpTableBezier[o][m];}this.vertex(e,t);}this.curFillColor=p[3],this.curStrokeColor=y[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5];}else if(9===l){this.isBezier=!0,i=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],a=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var j=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],_=Math.hypot(i[0]-i[1],a[0]-a[1],j[0]-j[1]),v=Math.hypot(i[1]-i[2],a[1]-a[2],j[1]-j[2]),x=Math.hypot(i[2]-i[3],a[2]-a[3],j[2]-j[3]),l=_+v+x;for(_/=l,x/=l,n=0;n<4;n++)p[1].push(p[0][n]*(1-_)+p[3][n]*_),p[2].push(p[0][n]*x+p[3][n]*(1-x)),y[1].push(y[0][n]*(1-_)+y[3][n]*_),y[2].push(y[0][n]*x+y[3][n]*(1-x));for(o=0;o<f;o++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=r=0;m<4;m++){for(n=0;n<4;n++)this.curFillColor[n]+=this._lookUpTableBezier[o][m]*p[m][n],this.curStrokeColor[n]+=this._lookUpTableBezier[o][m]*y[m][n];e+=i[m]*this._lookUpTableBezier[o][m],t+=a[m]*this._lookUpTableBezier[o][m],r+=j[m]*this._lookUpTableBezier[o][m];}this.vertex(e,t,r);}this.curFillColor=p[3],this.curStrokeColor=y[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8];}},S.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var e,t,r,o,n,s,i=[],a=[],l=arguments.length;if(0===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var u=1/this._lutQuadraticDetail,c=0,d=1,h=0;c<1;){if(s=parseFloat(c.toFixed(6)),this._lookUpTableQuadratic[h]=this._quadraticCoefficients(s),d.toFixed(6)===u.toFixed(6)){s=parseFloat(d.toFixed(6))+parseFloat(c.toFixed(6)),++h,this._lookUpTableQuadratic[h]=this._quadraticCoefficients(s);break}c+=u,d-=u,++h;}}for(var f=this._lookUpTableQuadratic.length,p=[],m=0;m<3;m++)p.push([]);p[0]=this.immediateMode.geometry.vertexColors.slice(-4),p[2]=this.curFillColor.slice();var y=[];for(m=0;m<3;m++)y.push([]);if(y[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),y[2]=this.curStrokeColor.slice(),4===l){this.isQuadratic=!0;var i=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],a=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],g=Math.hypot(i[0]-i[1],a[0]-a[1]);for(g/=g+Math.hypot(i[1]-i[2],a[1]-a[2]),n=0;n<4;n++)p[1].push(p[0][n]*(1-g)+p[2][n]*g),y[1].push(y[0][n]*(1-g)+y[2][n]*g);for(o=0;o<f;o++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=0;m<3;m++){for(n=0;n<4;n++)this.curFillColor[n]+=this._lookUpTableQuadratic[o][m]*p[m][n],this.curStrokeColor[n]+=this._lookUpTableQuadratic[o][m]*y[m][n];e+=i[m]*this._lookUpTableQuadratic[o][m],t+=a[m]*this._lookUpTableQuadratic[o][m];}this.vertex(e,t);}this.curFillColor=p[2],this.curStrokeColor=y[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3];}else if(6===l){this.isQuadratic=!0,i=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],a=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var v=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],b=Math.hypot(i[0]-i[1],a[0]-a[1],v[0]-v[1]);for(b/=b+Math.hypot(i[1]-i[2],a[1]-a[2],v[1]-v[2]),n=0;n<4;n++)p[1].push(p[0][n]*(1-b)+p[2][n]*b),y[1].push(y[0][n]*(1-b)+y[2][n]*b);for(o=0;o<f;o++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=r=0;m<3;m++){for(n=0;n<4;n++)this.curFillColor[n]+=this._lookUpTableQuadratic[o][m]*p[m][n],this.curStrokeColor[n]+=this._lookUpTableQuadratic[o][m]*y[m][n];e+=i[m]*this._lookUpTableQuadratic[o][m],t+=a[m]*this._lookUpTableQuadratic[o][m],r+=v[m]*this._lookUpTableQuadratic[o][m];}this.vertex(e,t,r);}this.curFillColor=p[2],this.curStrokeColor=y[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5];}},S.default.RendererGL.prototype.curveVertex=function(){var e,t,r,o,n,s,i=[],a=[],l=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var u=1/this._lutBezierDetail,c=0,d=1,h=0;c<1;){if(s=parseFloat(c.toFixed(6)),this._lookUpTableBezier[h]=this._bezierCoefficients(s),d.toFixed(6)===u.toFixed(6)){s=parseFloat(d.toFixed(6))+parseFloat(c.toFixed(6)),++h,this._lookUpTableBezier[h]=this._bezierCoefficients(s);break}c+=u,d-=u,++h;}}var f=this._lookUpTableBezier.length;if(2===l){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,i=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),a=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),n=0;n<f;n++)t=i[0]*this._lookUpTableBezier[n][0]+i[1]*this._lookUpTableBezier[n][1]+i[2]*this._lookUpTableBezier[n][2]+i[3]*this._lookUpTableBezier[n][3],r=a[0]*this._lookUpTableBezier[n][0]+a[1]*this._lookUpTableBezier[n][1]+a[2]*this._lookUpTableBezier[n][2]+a[3]*this._lookUpTableBezier[n][3],this.vertex(t,r);for(n=0;n<l;n++)this.immediateMode._curveVertex.shift();}}else if(3===l&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,i=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),a=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),e=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),n=0;n<f;n++)t=i[0]*this._lookUpTableBezier[n][0]+i[1]*this._lookUpTableBezier[n][1]+i[2]*this._lookUpTableBezier[n][2]+i[3]*this._lookUpTableBezier[n][3],r=a[0]*this._lookUpTableBezier[n][0]+a[1]*this._lookUpTableBezier[n][1]+a[2]*this._lookUpTableBezier[n][2]+a[3]*this._lookUpTableBezier[n][3],o=e[0]*this._lookUpTableBezier[n][0]+e[1]*this._lookUpTableBezier[n][1]+e[2]*this._lookUpTableBezier[n][2]+e[3]*this._lookUpTableBezier[n][3],this.vertex(t,r,o);for(n=0;n<l;n++)this.immediateMode._curveVertex.shift();}},S.default.RendererGL.prototype.image=function(e,t,r,o,n,s,i,a,l){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(e),this._pInst.textureMode(_.NORMAL);var u=0,c=(t<=e.width&&(u=t/e.width),1),t=(t+o<=e.width&&(c=(t+o)/e.width),0),o=(r<=e.height&&(t=r/e.height),1);r+n<=e.height&&(o=(r+n)/e.height),this.beginShape(),this.vertex(s,i,0,u,t),this.vertex(s+a,i,0,c,t),this.vertex(s+a,i+l,0,c,o),this.vertex(s,i+l,0,u,o),this.endShape(_.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(_.REMOVE);};var n=S.default;r.default=n;},{"../core/constants":264,"../core/main":275,"./p5.Geometry":327,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.math.sign":172,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],319:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.assign"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(c=e("../core/main"))&&c.__esModule?c:{default:c},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=l();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function l(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,l=function(){return e},e)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}var c=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");(this.renderer=e)._pInst.push(),this.identityMatrix=new n.default.Matrix,e.uMVMatrix=new n.default.Matrix,this.geometry=new n.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(t.nextGeometryId),t.nextGeometryId++,this.hasTransform=!1;}var e,r;return e=t,(r=[{key:"transformVertices",value:function(e){var t=this;return this.hasTransform?e.map(function(e){return t.renderer.uMVMatrix.multiplyPoint(e)}):e}},{key:"transformNormals",value:function(e){var t=this;return this.hasTransform?e.map(function(e){return t.renderer.uNMatrix.multiplyVec3(e)}):e}},{key:"addGeometry",value:function(e){for(var t,r=this,o=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(e,t){return e===r.identityMatrix.mat4[t]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),n=((t=this.geometry.vertices).push.apply(t,s(this.transformVertices(e.vertices))),(t=this.geometry.vertexNormals).push.apply(t,s(this.transformNormals(e.vertexNormals))),(t=this.geometry.uvs).push.apply(t,s(e.uvs)),this.renderer._doFill&&(t=this.geometry.faces).push.apply(t,s(e.faces.map(function(e){return e.map(function(e){return e+o})}))),this.renderer._doStroke&&(t=this.geometry.edges).push.apply(t,s(e.edges.map(function(e){return e.map(function(e){return e+o})}))),s(e.vertexColors));n.length<4*e.vertices.length;)n.push.apply(n,s(this.renderer.curFillColor));(t=this.geometry.vertexColors).push.apply(t,s(n));}},{key:"addImmediate",value:function(){var e=this.renderer.immediateMode.geometry,t=this.renderer.immediateMode.shapeMode,r=[];if(this.renderer._doFill)if(t===a.TRIANGLE_STRIP||t===a.QUAD_STRIP)for(var o=2;o<e.vertices.length;o++)o%2==0?r.push([o,o-1,o-2]):r.push([o,o-2,o-1]);else if(t===a.TRIANGLE_FAN)for(var n=2;n<e.vertices.length;n++)r.push([0,n-1,n]);else for(var s=0;s<e.vertices.length;s+=3)r.push([s,s+1,s+2]);this.addGeometry(Object.assign({},e,{faces:r}));}},{key:"addRetained",value:function(e){this.addGeometry(e.model);}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&u(e.prototype,r),t}();c.nextGeometryId=0,r.default=c;},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.every":153,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],320:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var g=(s=e("../core/main"))&&s.__esModule?s:{default:s},n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return {default:e};var t=i();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function i(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,i=function(){return e},e)}function v(e){return (v="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}g.default.prototype.orbitControl=function(e,t,r,o){var n=this,s=(this._assert3d("orbitControl"),g.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);void 0===e&&(e=1),void 0===t&&(t=e),void 0===r&&(r=1),"object"!==v(o)&&(o={}),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return !1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return !1},this._setProperty("wheelDefaultDisabled",!0));var i=o.disableTouchActions;!0===this.touchActionsDisabled||void 0!==i&&!i||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var a,l,u,i=o.freeRotation,o=void 0!==i&&i,c=[],i=(this.touches.forEach(function(t){n._renderer.prevTouches.forEach(function(e){t.id===e.id&&(e={x:t.x,y:t.y,px:e.x,py:e.y},c.push(e));});}),this._renderer.prevTouches=this.touches,0),d=0,h=0,f=0,p=0,m=this.height<this.width?this.height:this.width,y=!1;return 0<c.length?(y=0<c[0].x&&c[0].x<this.width&&0<c[0].y&&c[0].y<this.height,1===c.length?(d=-e*((a=c[0]).x-a.px)/m,h=t*(a.y-a.py)/m):(a=c[0],l=c[1],i=-(Math.hypot(a.x-l.x,a.y-l.y)-Math.hypot(a.px-l.px,a.py-l.py))*r*4e-4,f=.5*(a.x+l.x)-.5*(a.px+l.px),p=.5*(a.y+l.y)-.5*(a.py+l.py)),0<this.touches.length?y&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(y=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,0!==this._mouseWheelDeltaY?(i=Math.sign(this._mouseWheelDeltaY)*r,i*=.01,this._mouseWheelDeltaY=0,y&&(this._renderer.executeZoom=!0)):this._renderer.zoomFlag=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(d=-e*this.movedX/m,h=t*this.movedY/m):this.mouseButton===this.RIGHT&&(f=this.movedX,p=this.movedY*s.yScale),y&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),0!==i&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=i),.001<Math.abs(this._renderer.zoomVelocity)?(o?s._orbitFree(0,0,this._renderer.zoomVelocity):s._orbit(0,0,this._renderer.zoomVelocity),0!==s.projMatrix.mat4[15]&&(s.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),s.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=s.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=s.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,0===d&&0===h||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*d,.6*h),1e-6<this._renderer.rotateVelocity.magSq()?(o?s._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):s._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),0===f&&0===p||!this._renderer.executeRotateAndMove||(a=2*f/this.width,l=2*-p/this.height,this._renderer.moveVelocity.add(.15*a,.15*l)),1e-6<this._renderer.moveVelocity.magSq()?(r=s._getLocalAxes(),e=s.eyeX-s.centerX,t=s.eyeY-s.centerY,m=s.eyeZ-s.centerZ,y=Math.sqrt(e*e+t*t+m*m),i=new g.default.Vector(s.centerX,s.centerY,s.centerZ),i=s.cameraMatrix.multiplyPoint(i),(i=this._renderer.uPMatrix.multiplyAndNormalizePoint(i)).x-=this._renderer.moveVelocity.x,i.y-=this._renderer.moveVelocity.y,h=0===(d=this._renderer.uPMatrix.mat4)[15]?(u=(d[8]+i.x)/d[0]*y,(d[9]+i.y)/d[5]*y):(u=(i.x-d[12])/d[0],(i.y-d[13])/d[5]),s.setPosition(s.eyeX+u*r.x[0]+h*r.y[0],s.eyeY+u*r.x[1]+h*r.y[1],s.eyeZ+u*r.x[2]+h*r.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},g.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];g.default._validateParameters("debugMode",t);for(var o=this._registeredMethods.post.length-1;0<=o;o--)this._registeredMethods.post[o].toString()!==this._grid().toString()&&this._registeredMethods.post[o].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(o,1);t[0]===n.GRID?this.registerMethod("post",this._grid.call(this,t[1],t[2],t[3],t[4],t[5])):t[0]===n.AXES?this.registerMethod("post",this._axesIcon.call(this,t[1],t[2],t[3],t[4])):(this.registerMethod("post",this._grid.call(this,t[0],t[1],t[2],t[3],t[4])),this.registerMethod("post",this._axesIcon.call(this,t[5],t[6],t[7],t[8])));},g.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var e=this._registeredMethods.post.length-1;0<=e;e--)this._registeredMethods.post[e].toString()!==this._grid().toString()&&this._registeredMethods.post[e].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(e,1);},g.default.prototype._grid=function(e,r,o,n,s){void 0===e&&(e=this.width/2),void 0===r&&(r=Math.round(e/30)<4?4:Math.round(e/30)),void 0===o&&(o=0),void 0===n&&(n=0),void 0===s&&(s=0);var i=e/r,a=e/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var e=0;e<=r;e++)this.beginShape(this.LINES),this.vertex(-a+o,n,e*i-a+s),this.vertex(a+o,n,e*i-a+s),this.endShape();for(var t=0;t<=r;t++)this.beginShape(this.LINES),this.vertex(t*i-a+o,n,-a+s),this.vertex(t*i-a+o,n,a+s),this.endShape();this.pop();}},g.default.prototype._axesIcon=function(e,t,r,o){return void 0===e&&(e=40<this.width/20?this.width/20:40),void 0===t&&(t=-this.width/4),void 0===r&&(r=t),void 0===o&&(o=t),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(t,r,o),this.vertex(t+e,r,o),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(t,r,o),this.vertex(t,r+e,o),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(t,r,o),this.vertex(t,r,o+e),this.endShape(),this.pop();}};var s=g.default;r.default=s;},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.splice":167,"core-js/modules/es.math.hypot":170,"core-js/modules/es.math.sign":172,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],321:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=(e=e("../core/main"))&&e.__esModule?e:{default:e};m.default.prototype.ambientLight=function(e,t,r,o){this._assert3d("ambientLight"),m.default._validateParameters("ambientLight",arguments);var n=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(n._array[0],n._array[1],n._array[2]),this._renderer._enableLighting=!0,this},m.default.prototype.specularColor=function(e,t,r){this._assert3d("specularColor"),m.default._validateParameters("specularColor",arguments);var o=this.color.apply(this,arguments);return this._renderer.specularColors=[o._array[0],o._array[1],o._array[2]],this},m.default.prototype.directionalLight=function(e,t,r,o,n,s){this._assert3d("directionalLight"),m.default._validateParameters("directionalLight",arguments),e=e instanceof m.default.Color?e:this.color(e,t,r);var i,a,t=arguments[arguments.length-1],r="number"==typeof t?(i=arguments[arguments.length-3],a=arguments[arguments.length-2],arguments[arguments.length-1]):(i=t.x,a=t.y,t.z),t=Math.sqrt(i*i+a*a+r*r);return this._renderer.directionalLightDirections.push(i/t,a/t,r/t),this._renderer.directionalLightDiffuseColors.push(e._array[0],e._array[1],e._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},m.default.prototype.pointLight=function(e,t,r,o,n,s){this._assert3d("pointLight"),m.default._validateParameters("pointLight",arguments),e=e instanceof m.default.Color?e:this.color(e,t,r);var i,a,t=arguments[arguments.length-1],r="number"==typeof t?(i=arguments[arguments.length-3],a=arguments[arguments.length-2],arguments[arguments.length-1]):(i=t.x,a=t.y,t.z);return this._renderer.pointLightPositions.push(i,a,r),this._renderer.pointLightDiffuseColors.push(e._array[0],e._array[1],e._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},m.default.prototype.imageLight=function(e){this._renderer.activeImageLight=e,this._renderer._enableLighting=!0;},m.default.prototype.lights=function(){this._assert3d("lights");var e=this.color("rgb(128,128,128)");return this.ambientLight(e),this.directionalLight(e,0,0,-1),this},m.default.prototype.lightFalloff=function(e,t,r){return this._assert3d("lightFalloff"),m.default._validateParameters("lightFalloff",arguments),e<0&&(e=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),t<0&&(t=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),r<0&&(r=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===e&&0===t&&0===r&&(e=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=e,this._renderer.linearAttenuation=t,this._renderer.quadraticAttenuation=r,this},m.default.prototype.spotLight=function(e,t,r,o,n,s,i,a,l,u,c){this._assert3d("spotLight"),m.default._validateParameters("spotLight",arguments);var d,h,f,p=arguments.length;switch(p){case 11:case 10:d=this.color(e,t,r),h=new m.default.Vector(o,n,s),f=new m.default.Vector(i,a,l);break;case 9:e instanceof m.default.Color?(d=e,h=new m.default.Vector(t,r,o),f=new m.default.Vector(n,s,i),u=a,c=l):o instanceof m.default.Vector?(d=this.color(e,t,r),h=o,f=new m.default.Vector(n,s,i),u=a,c=l):i instanceof m.default.Vector?(d=this.color(e,t,r),h=new m.default.Vector(o,n,s),f=i,u=a,c=l):(d=this.color(e,t,r),h=new m.default.Vector(o,n,s),f=new m.default.Vector(i,a,l));break;case 8:u=(f=e instanceof m.default.Color?(d=e,h=new m.default.Vector(t,r,o),new m.default.Vector(n,s,i)):o instanceof m.default.Vector?(d=this.color(e,t,r),h=o,new m.default.Vector(n,s,i)):(d=this.color(e,t,r),h=new m.default.Vector(o,n,s),i),a);break;case 7:e instanceof m.default.Color&&t instanceof m.default.Vector?(d=e,h=t,f=new m.default.Vector(r,o,n),u=s,c=i):e instanceof m.default.Color&&n instanceof m.default.Vector?(d=e,h=new m.default.Vector(t,r,o),f=n,u=s,c=i):o instanceof m.default.Vector&&n instanceof m.default.Vector?(d=this.color(e,t,r),h=o,f=n,u=s,c=i):f=e instanceof m.default.Color?(d=e,h=new m.default.Vector(t,r,o),new m.default.Vector(n,s,i)):o instanceof m.default.Vector?(d=this.color(e,t,r),h=o,new m.default.Vector(n,s,i)):(d=this.color(e,t,r),h=new m.default.Vector(o,n,s),i);break;case 6:o instanceof m.default.Vector&&n instanceof m.default.Vector?(d=this.color(e,t,r),h=o,f=n,u=s):e instanceof m.default.Color&&n instanceof m.default.Vector?(d=e,h=new m.default.Vector(t,r,o),f=n,u=s):e instanceof m.default.Color&&t instanceof m.default.Vector&&(d=e,h=t,f=new m.default.Vector(r,o,n),u=s);break;case 5:e instanceof m.default.Color&&t instanceof m.default.Vector&&r instanceof m.default.Vector?(d=e,h=t,f=r,u=o,c=n):o instanceof m.default.Vector&&n instanceof m.default.Vector?(d=this.color(e,t,r),h=o,f=n):e instanceof m.default.Color&&n instanceof m.default.Vector?(d=e,h=new m.default.Vector(t,r,o),f=n):e instanceof m.default.Color&&t instanceof m.default.Vector&&(d=e,h=t,f=new m.default.Vector(r,o,n));break;case 4:d=e,h=t,f=r,u=o;break;case 3:d=e,h=t,f=r;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(p<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(d._array[0],d._array[1],d._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(h.x,h.y,h.z),f.normalize(),this._renderer.spotLightDirections.push(f.x,f.y,f.z),void 0===u&&(u=Math.PI/3),void 0!==c&&c<1?(c=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===c&&(c=100),u=this._renderer._pInst._toRadians(u),this._renderer.spotLightAngle.push(Math.cos(u)),this._renderer.spotLightConc.push(c),this._renderer._enableLighting=!0,this},m.default.prototype.noLights=function(){this._assert3d("noLights");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.default._validateParameters("noLights",t),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};e=m.default;r.default=e;},{"../core/main":275}],322:[function(e,t,r){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var x=(o=e("../core/main"))&&o.__esModule?o:{default:o};e("./p5.Geometry"),x.default.prototype.loadModel=function(e){x.default._validateParameters("loadModel",arguments);var y,g,t,r=e.slice(-4),v=("boolean"==typeof arguments[1]?(y=arguments[1],g=arguments[2],t=arguments[3],void 0!==arguments[4]&&(r=arguments[4])):(y=!1,g=arguments[1],t=arguments[2],void 0!==arguments[3]&&(r=arguments[3])),new x.default.Geometry),b=(v.gid="".concat(e,"|").concat(y),this);return r.match(/\.stl$/i)?this.httpDo(e,"GET","arrayBuffer",function(e){!function(e,t){if(function(e){for(var t=new DataView(e),r=[115,111,108,105,100],o=0;o<5;o++)if(function(e,t,r){for(var o=0,n=e.length;o<n;o++)if(e[o]!==t.getUint8(r+o,!1))return;return 1}(r,t,o))return;return 1}(t))!function(e,t){for(var r,o,n,s,i,a,l,u=new DataView(t),c=u.getUint32(80,!0),d=!1,h=0;h<70;h++)1129270351===u.getUint32(h,!1)&&82===u.getUint8(h+4)&&61===u.getUint8(h+5)&&(d=!0,s=[],i=u.getUint8(h+6)/255,a=u.getUint8(h+7)/255,l=u.getUint8(h+8)/255);for(var f=0;f<c;f++){for(var p,m=84+50*f,y=u.getFloat32(m,!0),g=u.getFloat32(4+m,!0),v=u.getFloat32(8+m,!0),b=(d&&(p=u.getUint16(48+m,!0),n=0==(32768&p)?(r=(31&p)/31,o=(p>>5&31)/31,(p>>10&31)/31):(r=i,o=a,l)),new x.default.Vector(y,g,v)),j=1;j<=3;j++){var _=m+12*j,_=new x.default.Vector(u.getFloat32(_,!0),u.getFloat32(4+_,!0),u.getFloat32(8+_,!0));e.vertices.push(_),e.vertexNormals.push(b),d&&s.push(r,o,n);}e.faces.push([3*f,3*f+1,3*f+2]),e.uvs.push([0,0],[0,0],[0,0]);}}(e,t);else {t=new DataView(t);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");t=new TextDecoder("utf-8").decode(t).split("\n");!function(e,t){for(var r,o,n="",s=[],i=0;i<t.length;++i){for(var a=t[i].trim(),l=a.split(" "),u=0;u<l.length;++u)""===l[u]&&l.splice(u,1);if(0!==l.length)switch(n){case"":if("solid"!==l[0])return console.error(a),console.error('Invalid state "'.concat(l[0],'", should be "solid"'));n="solid";break;case"solid":if("facet"!==l[0]||"normal"!==l[1])return console.error(a),console.error('Invalid state "'.concat(l[0],'", should be "facet normal"'));r=new x.default.Vector(parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4])),e.vertexNormals.push(r,r,r),n="facet normal";break;case"facet normal":if("outer"!==l[0]||"loop"!==l[1])return console.error(a),console.error('Invalid state "'.concat(l[0],'", should be "outer loop"'));n="vertex";break;case"vertex":if("vertex"===l[0])o=new x.default.Vector(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])),e.vertices.push(o),e.uvs.push([0,0]),s.push(e.vertices.indexOf(o));else {if("endloop"!==l[0])return console.error(a),console.error('Invalid state "'.concat(l[0],'", should be "vertex" or "endloop"'));e.faces.push(s),s=[],n="endloop";}break;case"endloop":if("endfacet"!==l[0])return console.error(a),console.error('Invalid state "'.concat(l[0],'", should be "endfacet"'));n="endfacet";break;case"endfacet":if("endsolid"!==l[0]){if("facet"!==l[0]||"normal"!==l[1])return console.error(a),console.error('Invalid state "'.concat(l[0],'", should be "endsolid" or "facet normal"'));r=new x.default.Vector(parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4])),e.vertexNormals.push(r,r,r),n="facet normal";}break;default:console.error('Invalid state "'.concat(n,'"'));}}}(e,t);}}(v,e),y&&v.normalize(),b._decrementPreload(),"function"==typeof g&&g(v);},t):r.match(/\.obj$/i)?this.loadStrings(e,function(e){for(var t=v,r=e,o={v:[],vt:[],vn:[]},n={},s=0;s<r.length;++s){var i=r[s].trim().split(/\b\s+/);if(0<i.length)if("v"===i[0]||"vn"===i[0]){var a=new x.default.Vector(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]));o[i[0]].push(a);}else if("vt"===i[0]){a=[parseFloat(i[1]),1-parseFloat(i[2])];o[i[0]].push(a);}else if("f"===i[0])for(var l=3;l<i.length;++l){for(var u=[],c=[1,l-1,l],d=0;d<c.length;++d){var h=i[c[d]],f=0;if(void 0!==n[h])f=n[h];else {for(var p=h.split("/"),m=0;m<p.length;m++)p[m]=parseInt(p[m])-1;f=n[h]=t.vertices.length,t.vertices.push(o.v[p[0]].copy()),o.vt[p[1]]?t.uvs.push(o.vt[p[1]].slice()):t.uvs.push([0,0]),o.vn[p[2]]&&t.vertexNormals.push(o.vn[p[2]].copy());}u.push(f);}u[0]!==u[1]&&u[0]!==u[2]&&u[1]!==u[2]&&t.faces.push(u);}}0===t.vertexNormals.length&&t.computeNormals(),y&&v.normalize(),b._decrementPreload(),"function"==typeof g&&g(v);},t):(x.default._friendlyFileLoadError(3,e),t?t():x.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),v},x.default.prototype.model=function(e){this._assert3d("model"),x.default._validateParameters("model",arguments),0<e.vertices.length&&(this._renderer.geometryInHash(e.gid)||(0===e.edges.length&&e._makeTriangleEdges(),e._edgesToVertices(),this._renderer.createBuffers(e.gid,e)),this._renderer.drawBuffers(e.gid));};var o=x.default;r.default=o;},{"../core/main":275,"./p5.Geometry":327,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.match":193,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201}],323:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=(s=e("../core/main"))&&s.__esModule?s:{default:s},n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}e("./p5.Texture"),u.default.prototype.loadShader=function(e,t,r,o){u.default._validateParameters("loadShader",arguments),o=o||console.error;function n(){i._decrementPreload(),r&&r(s);}var s=new u.default.Shader,i=this,a=!1,l=!1;return this.loadStrings(e,function(e){s._vertSrc=e.join("\n"),l=!0,a&&n();},o),this.loadStrings(t,function(e){s._fragSrc=e.join("\n"),a=!0,l&&n();},o),s},u.default.prototype.createShader=function(e,t){return u.default._validateParameters("createShader",arguments),new u.default.Shader(this._renderer,e,t)},u.default.prototype.createFilterShader=function(e){u.default._validateParameters("createFilterShader",arguments);var t=e.includes("#version 300 es")?"#version 300 es\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    in vec3 aPosition;\n    in vec2 aTexCoord;\n    out vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ":"\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    attribute vec3 aPosition;\n    // texcoords only come from p5 to vertex shader\n    // so pass texcoords on to the fragment shader in a varying variable\n    attribute vec2 aTexCoord;\n    varying vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ",t=new u.default.Shader(this._renderer,t,e);return this._renderer.GL?t.ensureCompiledOnContext(this):t.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),t},u.default.prototype.shader=function(e){return this._assert3d("shader"),u.default._validateParameters("shader",arguments),e.ensureCompiledOnContext(this),e.isStrokeShader()?this._renderer.userStrokeShader=e:(this._renderer.userFillShader=e,this._renderer._useNormalMaterial=!1),this},u.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},u.default.prototype.texture=function(e){return this._assert3d("texture"),u.default._validateParameters("texture",arguments),e.gifProperties&&e._animateGif(this),this._renderer.drawMode=n.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=e,this._renderer._setProperty("_doFill",!0),this},u.default.prototype.textureMode=function(e){e!==n.IMAGE&&e!==n.NORMAL?console.warn("You tried to set ".concat(e," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=e;},u.default.prototype.textureWrap=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,r=(this._renderer.textureWrapX=e,this._renderer.textureWrapY=t,!0),o=!1,n=void 0;try{for(var s,i=this._renderer.textures.values()[Symbol.iterator]();!(r=(s=i.next()).done);r=!0)s.value.setWrapMode(e,t);}catch(e){o=!0,n=e;}finally{try{r||null==i.return||i.return();}finally{if(o)throw n}}},u.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return u.default._validateParameters("normalMaterial",t),this._renderer.drawMode=n.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},u.default.prototype.ambientMaterial=function(e,t,r){this._assert3d("ambientMaterial"),u.default._validateParameters("ambientMaterial",arguments);var o=u.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=o._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},u.default.prototype.emissiveMaterial=function(e,t,r,o){this._assert3d("emissiveMaterial"),u.default._validateParameters("emissiveMaterial",arguments);var n=u.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=n._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},u.default.prototype.specularMaterial=function(e,t,r,o){this._assert3d("specularMaterial"),u.default._validateParameters("specularMaterial",arguments);var n=u.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=n._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},u.default.prototype.shininess=function(e){return this._assert3d("shininess"),u.default._validateParameters("shininess",arguments),this._renderer._useShininess=e=e<1?1:e,this},u.default.RendererGL.prototype._applyColorBlend=function(e){var t=this.GL,r=this.drawMode===n.TEXTURE,r=this.userFillShader||this.userStrokeShader||this.userPointShader||r||this.curBlendMode!==n.BLEND||e[e.length-1]<1||this._isErasing;return r!==this._isBlending&&(r||this.curBlendMode!==n.BLEND&&this.curBlendMode!==n.ADD?t.enable(t.BLEND):t.disable(t.BLEND),t.depthMask(!0),this._isBlending=r),this._applyBlendMode(),e},u.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var e=this.GL;switch(this.curBlendMode){case n.BLEND:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case n.ADD:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE);break;case n.REMOVE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_ALPHA);break;case n.MULTIPLY:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case n.SCREEN:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_COLOR);break;case n.EXCLUSION:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE);break;case n.REPLACE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO);break;case n.SUBTRACT:e.blendEquationSeparate(e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case n.DARKEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case n.LIGHTEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.");}this._isErasing||(this._cachedBlendMode=this.curBlendMode);}};var s=u.default;r.default=s;},{"../core/constants":264,"../core/main":275,"./p5.Texture":334,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],324:[function(e,t,r){e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.string.sub"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var _=(e=e("../core/main"))&&e.__esModule?e:{default:e};function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}_.default.prototype.camera=function(){var e;this._assert3d("camera");for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return _.default._validateParameters("camera",r),(e=this._renderer._curCamera).camera.apply(e,r),this},_.default.prototype.perspective=function(){var e;this._assert3d("perspective");for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return _.default._validateParameters("perspective",r),(e=this._renderer._curCamera).perspective.apply(e,r),this},_.default.prototype.ortho=function(){var e;this._assert3d("ortho");for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return _.default._validateParameters("ortho",r),(e=this._renderer._curCamera).ortho.apply(e,r),this},_.default.prototype.frustum=function(){var e;this._assert3d("frustum");for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return _.default._validateParameters("frustum",r),(e=this._renderer._curCamera).frustum.apply(e,r),this},_.default.prototype.createCamera=function(){this._assert3d("createCamera");var e=new _.default.Camera(this._renderer);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this._renderer._curCamera=e},_.default.Camera=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._renderer=e,this.cameraType="default",this.cameraMatrix=new _.default.Matrix,this.projMatrix=new _.default.Matrix,this.yScale=1;}var e,r;return e=t,(r=[{key:"perspective",value:function(e,t,r,o){this.cameraType=0<arguments.length?"custom":"default",void 0===e?(e=this.defaultCameraFOV,this.cameraFOV=e):this.cameraFOV=this._renderer._pInst._toRadians(e),void 0===t&&(t=this.defaultAspectRatio),void 0===r&&(r=this.defaultCameraNear),void 0===o&&(o=this.defaultCameraFar),r<=1e-4&&(r=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),o<r&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=t,this.cameraNear=r,this.cameraFar=o,this.projMatrix=_.default.Matrix.identity();var e=1/Math.tan(this.cameraFOV/2),n=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(e/t,0,0,0,0,-e*this.yScale,0,0,0,0,(o+r)*n,-1,0,0,2*o*r*n,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]);}},{key:"ortho",value:function(e,t,r,o,n,s){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=+this._renderer.width/2),void 0===r&&(r=-this._renderer.height/2),void 0===o&&(o=+this._renderer.height/2),void 0===n&&(n=0),void 0===s&&(s=Math.max(this._renderer.width,this._renderer.height)),this.cameraNear=n;var i=t-e,a=o-r,l=(this.cameraFar=s)-n,u=2/i,c=2/a*this.yScale,d=-2/l,t=-(t+e)/i,e=-(o+r)/a,i=-(s+n)/l;this.projMatrix=_.default.Matrix.identity(),this.projMatrix.set(u,0,0,0,0,-c,0,0,0,0,d,0,t,e,i,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom";}},{key:"frustum",value:function(e,t,r,o,n,s){void 0===e&&(e=.05*-this._renderer.width),void 0===t&&(t=.05*+this._renderer.width),void 0===r&&(r=.05*+this._renderer.height),void 0===o&&(o=.05*-this._renderer.height),void 0===n&&(n=this.defaultCameraNear),void 0===s&&(s=this.defaultCameraFar),this.cameraNear=n;var i=t-e,a=o-r,l=(this.cameraFar=s)-n,u=2*n/i,c=2*n/a*this.yScale,d=-2*s*n/l,t=(t+e)/i,e=(o+r)/a,i=-(s+n)/l;this.projMatrix=_.default.Matrix.identity(),this.projMatrix.set(u,0,0,0,0,-c,0,0,t,e,i,-1,0,0,d,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom";}},{key:"_rotateView",value:function(e,t,r,o){var n=this.centerX,s=this.centerY,i=this.centerZ,a=(n-=this.eyeX,s-=this.eyeY,i-=this.eyeZ,_.default.Matrix.identity(this._renderer._pInst)),e=(a.rotate(this._renderer._pInst._toRadians(e),t,r,o),[n*a.mat4[0]+s*a.mat4[4]+i*a.mat4[8],n*a.mat4[1]+s*a.mat4[5]+i*a.mat4[9],n*a.mat4[2]+s*a.mat4[6]+i*a.mat4[10]]);e[0]+=this.eyeX,e[1]+=this.eyeY,e[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,e[0],e[1],e[2],this.upX,this.upY,this.upZ);}},{key:"pan",value:function(e){var t=this._getLocalAxes();this._rotateView(e,t.y[0],t.y[1],t.y[2]);}},{key:"tilt",value:function(e){var t=this._getLocalAxes();this._rotateView(e,t.x[0],t.x[1],t.x[2]);}},{key:"lookAt",value:function(e,t,r){this.camera(this.eyeX,this.eyeY,this.eyeZ,e,t,r,this.upX,this.upY,this.upZ);}},{key:"camera",value:function(e,t,r,o,n,s,i,a,l){void 0===e&&(e=this.defaultEyeX,t=this.defaultEyeY,r=this.defaultEyeZ,o=e,n=t,a=1,l=i=s=0),this.eyeX=e,this.eyeY=t,this.eyeZ=r,void 0!==o&&(this.centerX=o,this.centerY=n,this.centerZ=s),void 0!==i&&(this.upX=i,this.upY=a,this.upZ=l);o=this._getLocalAxes(),this.cameraMatrix.set(o.x[0],o.y[0],o.z[0],0,o.x[1],o.y[1],o.z[1],0,o.x[2],o.y[2],o.z[2],0,0,0,0,1),n=-e;return this.cameraMatrix.translate([n,-t,-r]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this}},{key:"move",value:function(e,t,r){var o=this._getLocalAxes(),e=[o.x[0]*e,o.x[1]*e,o.x[2]*e],t=[o.y[0]*t,o.y[1]*t,o.y[2]*t],o=[o.z[0]*r,o.z[1]*r,o.z[2]*r];this.camera(this.eyeX+e[0]+t[0]+o[0],this.eyeY+e[1]+t[1]+o[1],this.eyeZ+e[2]+t[2]+o[2],this.centerX+e[0]+t[0]+o[0],this.centerY+e[1]+t[1]+o[1],this.centerZ+e[2]+t[2]+o[2],this.upX,this.upY,this.upZ);}},{key:"setPosition",value:function(e,t,r){var o=e-this.eyeX,n=t-this.eyeY,s=r-this.eyeZ;this.camera(e,t,r,this.centerX+o,this.centerY+n,this.centerZ+s,this.upX,this.upY,this.upZ);}},{key:"set",value:function(e){for(var t=0,r=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];t<r.length;t++){var o=r[t];this[o]=e[o];}this.cameraMatrix=e.cameraMatrix.copy(),this.projMatrix=e.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice());}},{key:"slerp",value:function(e,t,r){var o,n,s,i,a,l,u,c,d,h,f,p,m,y,g,v,b,j;0===r?this.set(e):1===r?this.set(t):(0!==this.projMatrix.mat4[15]&&(this.projMatrix.mat4[0]=e.projMatrix.mat4[0]*Math.pow(t.projMatrix.mat4[0]/e.projMatrix.mat4[0],r),this.projMatrix.mat4[5]=e.projMatrix.mat4[5]*Math.pow(t.projMatrix.mat4[5]/e.projMatrix.mat4[5],r),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),i=new _.default.Vector(e.eyeX,e.eyeY,e.eyeZ),a=new _.default.Vector(t.eyeX,t.eyeY,t.eyeZ),v=new _.default.Vector(e.centerX,e.centerY,e.centerZ),j=new _.default.Vector(t.centerX,t.centerY,t.centerZ),s=_.default.Vector.dist(i,v),o=_.default.Vector.dist(a,j),o=s*Math.pow(o/s,r),s=_.default.Vector.sub(i,a),n=1,1e-6<(b=(y=i.copy().sub(a).sub(v).add(j)).magSq())&&(n=_.default.Vector.dot(s,y)/b,n=Math.max(0,Math.min(n,1))),s=_.default.Vector.lerp(_.default.Vector.lerp(i,v,n),_.default.Vector.lerp(a,j,n),r),y=e.cameraMatrix.createSubMatrix3x3(),b=t.cameraMatrix.createSubMatrix3x3(),i=y.row(2),v=b.row(2),a=y.row(1),j=b.row(1),e=new _.default.Vector,t=new _.default.Vector,l=new _.default.Vector,u=new _.default.Vector,1-(c=.5*((y=(b=b.mult3x3(y.copy().transpose3x3())).diagonal())[0]+y[1]+y[2]-1))<1e-7?(e.set(_.default.Vector.lerp(i,v,r)).normalize(),l.set(e).mult(n*o).add(s),u.set(e).mult((n-1)*o).add(s),t.set(_.default.Vector.lerp(a,j,r)).normalize()):(v=1/(1-c),j=Math.max(y[0],y[1],y[2]),p=b.mat3[1]+b.mat3[3],m=b.mat3[2]+b.mat3[6],g=b.mat3[5]+b.mat3[7],j=j===y[0]?(h=.5*p*(v/=d=Math.sqrt((y[0]-c)*v)),f=.5*m*v,.5*(b.mat3[7]-b.mat3[5])/d):j===y[1]?(f=.5*g*(v/=h=Math.sqrt((y[1]-c)*v)),d=.5*p*v,.5*(b.mat3[2]-b.mat3[6])/h):(d=.5*m*(v/=f=Math.sqrt((y[2]-c)*v)),h=.5*g*v,.5*(b.mat3[3]-b.mat3[1])/f),p=r*Math.atan2(j,c),m=Math.cos(p),y=Math.sin(p),(j=new _.default.Matrix("mat3",[m+(g=1-m)*d*d,g*(v=d*h)+y*f,g*(b=f*d)-y*h,g*v-y*f,m+g*h*h,g*(r=h*f)+y*d,g*b+y*h,g*r-y*d,m+g*f*f])).multiplyVec3(i,e),l.set(e).mult(n*o).add(s),u.set(e).mult((n-1)*o).add(s),j.multiplyVec3(a,t)),this.camera(l.x,l.y,l.z,u.x,u.y,u.z,t.x,t.y,t.z));}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ;}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default";}},{key:"_resize",value:function(){"default"===this.cameraType&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective());}},{key:"copy",value:function(){var e=new _.default.Camera(this._renderer);return e.cameraFOV=this.cameraFOV,e.aspectRatio=this.aspectRatio,e.eyeX=this.eyeX,e.eyeY=this.eyeY,e.eyeZ=this.eyeZ,e.centerX=this.centerX,e.centerY=this.centerY,e.centerZ=this.centerZ,e.upX=this.upX,e.upY=this.upY,e.upZ=this.upZ,e.cameraNear=this.cameraNear,e.cameraFar=this.cameraFar,e.cameraType=this.cameraType,e.cameraMatrix=this.cameraMatrix.copy(),e.projMatrix=this.projMatrix.copy(),e.yScale=this.yScale,e}},{key:"_getLocalAxes",value:function(){var e=this.eyeX-this.centerX,t=this.eyeY-this.centerY,r=this.eyeZ-this.centerZ,o=Math.sqrt(e*e+t*t+r*r),o=(0!==o&&(e/=o,t/=o,r/=o),this.upX),n=(a=this.upY)*r-(l=this.upZ)*t,s=-o*r+l*e,i=o*t-a*e,o=t*i-r*s,a=-e*i+r*n,l=e*s-t*n,u=Math.sqrt(n*n+s*s+i*i),u=(0!==u&&(n/=u,s/=u,i/=u),Math.sqrt(o*o+a*a+l*l));return 0!==u&&(o/=u,a/=u,l/=u),{x:[n,s,i],y:[o,a,l],z:[e,t,r]}}},{key:"_orbit",value:function(e,t,r){var o=this.eyeX-this.centerX,n=this.eyeY-this.centerY,s=this.eyeZ-this.centerZ,i=Math.hypot(o,n,s),o=new _.default.Vector(o,n,s).normalize(),n=new _.default.Vector(this.upX,this.upY,this.upZ).normalize(),s=new _.default.Vector.cross(n,o).normalize(),a=new _.default.Vector.cross(s,n),r=((i=(i*=Math.pow(10,r))<this.cameraNear?this.cameraNear:i)>this.cameraFar&&(i=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,_.default.Vector.dot(o,n))))+t),t=e;(r<=0||r>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),n.mult(Math.cos(r)),a.mult(Math.cos(t)*Math.sin(r)),s.mult(Math.sin(t)*Math.sin(r)),o.set(n).add(a).add(s),this.eyeX=i*o.x+this.centerX,this.eyeY=i*o.y+this.centerY,this.eyeZ=i*o.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ);}},{key:"_orbitFree",value:function(e,t,r){var o=this.eyeX-this.centerX,n=this.eyeY-this.centerY,s=this.eyeZ-this.centerZ,i=Math.hypot(o,n,s),o=new _.default.Vector(o,n,s).normalize(),n=new _.default.Vector(this.upX,this.upY,this.upZ),s=new _.default.Vector.cross(n,o).normalize(),a=new _.default.Vector.cross(o,s),l=Math.atan2(t,e),l=(a.mult(Math.sin(l)),s.mult(Math.cos(l)).add(a),Math.sqrt(e*e+t*t)),a=new _.default.Vector.cross(o,s),e=((i=(i*=Math.pow(10,r))<this.cameraNear?this.cameraNear:i)>this.cameraFar&&(i=this.cameraFar),Math.cos(l)),t=Math.sin(l),r=n.dot(o),l=n.dot(s),u=r*e+l*t,r=-r*t+l*e,l=n.dot(a);n.x=u*o.x+r*s.x+l*a.x,n.y=u*o.y+r*s.y+l*a.y,n.z=u*o.z+r*s.z+l*a.z,s.mult(-t),o.mult(e).add(s).mult(i),this.camera(o.x+this.centerX,o.y+this.centerY,o.z+this.centerZ,this.centerX,this.centerY,this.centerZ,n.x,n.y,n.z);}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&n(e.prototype,r),t}(),_.default.prototype.setCamera=function(e){this._renderer._curCamera=e,this._renderer.uPMatrix.set(e.projMatrix.mat4[0],e.projMatrix.mat4[1],e.projMatrix.mat4[2],e.projMatrix.mat4[3],e.projMatrix.mat4[4],e.projMatrix.mat4[5],e.projMatrix.mat4[6],e.projMatrix.mat4[7],e.projMatrix.mat4[8],e.projMatrix.mat4[9],e.projMatrix.mat4[10],e.projMatrix.mat4[11],e.projMatrix.mat4[12],e.projMatrix.mat4[13],e.projMatrix.mat4[14],e.projMatrix.mat4[15]);};e=_.default.Camera;r.default=e;},{"../core/main":275,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.string.sub":200}],325:[function(e,t,r){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.log2"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.log2"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("../core/main"))&&e.__esModule?e:{default:e};function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}e.default.DataArray=function(){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:128,t=this,r=o;if(!(t instanceof r))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(e),this.initialLength=e;}var e,t;return e=o,(t=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0;}},{key:"rescale",value:function(){var e;this.length<this.data.length/2&&(e=1<<Math.ceil(Math.log2(this.length)),(e=new Float32Array(e)).set(this.data.subarray(0,this.length),0),this.data=e);}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength);}},{key:"push",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.ensureLength(this.length+t.length),this.data.set(t,this.length),this.length+=t.length;}},{key:"slice",value:function(e,t){return this.data.slice(e,Math.min(t,this.length))}},{key:"subArray",value:function(e,t){return this.data.subarray(e,Math.min(t,this.length))}},{key:"ensureLength",value:function(e){for(;this.data.length<e;){var t=new Float32Array(2*this.data.length);t.set(this.data,0),this.data=t;}}}])&&n(e.prototype,t),o}();e=e.default.DataArray;r.default=e;},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.log2":171,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231}],326:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.reflect.get"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f=(_=e("../core/main"))&&_.__esModule?_:{default:_},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=l();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants")),n=e("./p5.Texture"),p=e("./p5.RendererGL");function l(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,l=function(){return e},e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],o=!0,n=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(o=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){n=!0,s=e;}finally{try{o||null==a.return||a.return();}finally{if(n)throw s}}return r}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function h(e,t,r){t&&d(e.prototype,t),r&&d(e,r);}function m(e,t,r){return (m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(e)return (e=Object.getOwnPropertyDescriptor(e,t)).get?e.get.call(r):e.value})(e,t,r||e)}function y(e,t){return (y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(r){return function(){var e,t=v(r),t=(e=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){}}}()?(e=v(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function v(e){return (v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e);var r=g(o);function o(e){var t;return c(this,o),(t=r.call(this,e.target._renderer)).fbo=e,t.yScale=-1,t}return h(o,[{key:"_computeCameraDefaultSettings",value:function(){m(v(o.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ);}}]),o}(f.default.Camera),j=(f.default.FramebufferCamera=b,function(){function r(e,t){c(this,r),this.framebuffer=e,this.property=t;}return h(r,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),r}()),_=(f.default.FramebufferTexture=j,function(){function o(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=(c(this,o),this.target=e,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=r.format||a.UNSIGNED_BYTE,this.channels=r.channels||(e._renderer._pInst._glAttributes.alpha?a.RGBA:a.RGB),this.useDepth=void 0===r.depth||r.depth,this.depthFormat=r.depthFormat||a.FLOAT,this.textureFiltering=r.textureFiltering||a.LINEAR,void 0===r.antialias?this.antialiasSamples=e._renderer._pInst._glAttributes.antialias?2:0:"number"==typeof r.antialias?this.antialiasSamples=r.antialias:this.antialiasSamples=r.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&e.webglVersion!==a.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),r.width&&r.height?(this.width=r.width,this.height=r.height,this.autoSized=!1):(void 0===r.width!=(void 0===r.height)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=e.width,this.height=e.height,this.autoSized=!0),this.density=r.density||e.pixelDensity(),e._renderer.GL);if(this.gl=e,this._checkIfFormatsAvailable(),r.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(void 0===r.stencil||r.stencil),this.framebuffer=e.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=e.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();r=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.target._renderer._curCamera=r,this.draw(function(){return t.target.clear()});}return h(o,[{key:"resize",value:function(e,t){this.autoSized=!1,this.width=e,this.height=t,this._handleResize();}},{key:"pixelDensity",value:function(e){if(!e)return this.density;this.autoSized=!1,this.density=e,this._handleResize();}},{key:"autoSized",value:function(e){if(void 0===e)return this.autoSized;this.autoSized=e,this._handleResize();}},{key:"_checkIfFormatsAvailable",value:function(){var e=this.gl,e=(this.useDepth&&this.target.webglVersion===a.WEBGL&&!e.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===a.WEBGL&&this.depthFormat===a.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=a.UNSIGNED_INT),[a.UNSIGNED_BYTE,a.FLOAT,a.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=a.UNSIGNED_BYTE),this.useDepth&&![a.UNSIGNED_INT,a.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=a.FLOAT),(0, n.checkWebGLCapabilities)(this.target._renderer));e.float||this.format!==a.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=a.UNSIGNED_BYTE),this.useDepth&&!e.float&&this.depthFormat===a.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=a.UNSIGNED_INT),e.halfFloat||this.format!==a.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=a.UNSIGNED_BYTE),this.channels===a.RGB&&[a.FLOAT,a.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=a.RGBA);}},{key:"_recreateTextures",value:function(){var e=this.gl,t=(this._updateSize(),e.getParameter(e.TEXTURE_BINDING_2D)),r=e.getParameter(e.FRAMEBUFFER_BINDING),o=e.createTexture();if(!o)throw new Error("Unable to create color texture");e.bindTexture(e.TEXTURE_2D,o);var n=this._glColorFormat();if(e.texImage2D(e.TEXTURE_2D,0,n.internalFormat,this.width*this.density,this.height*this.density,0,n.format,n.type,null),this.colorTexture=o,e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),this.useDepth){var o=e.createTexture();if(!o)throw new Error("Unable to create depth texture");var s=this._glDepthFormat();e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,s.internalFormat,this.width*this.density,this.height*this.density,0,s.format,s.type,null),e.framebufferTexture2D(e.FRAMEBUFFER,this.useStencil?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0),this.depthTexture=o;}this.antialias&&(this.colorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.colorRenderbuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,e.getParameter(e.MAX_SAMPLES))),n.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(s=this._glDepthFormat(),this.depthRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.depthRenderbuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,e.getParameter(e.MAX_SAMPLES))),s.internalFormat,this.width*this.density,this.height*this.density)),e.bindFramebuffer(e.FRAMEBUFFER,this.aaFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&e.framebufferRenderbuffer(e.FRAMEBUFFER,this.useStencil?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new j(this,"depthTexture"),o=e.NEAREST,this.depthP5Texture=new f.default.Texture(this.target._renderer,this.depth,{minFilter:o,magFilter:o}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new j(this,"colorTexture");n=this.textureFiltering===a.LINEAR?e.LINEAR:e.NEAREST;this.colorP5Texture=new f.default.Texture(this.target._renderer,this.color,{minFilter:n,magFilter:n}),this.target._renderer.textures.set(this.color,this.colorP5Texture),e.bindTexture(e.TEXTURE_2D,t),e.bindFramebuffer(e.FRAMEBUFFER,r);}},{key:"_glColorFormat",value:function(){var e,t,r=this.gl,o=this.format===a.FLOAT?r.FLOAT:this.format===a.HALF_FLOAT?this.target.webglVersion===a.WEBGL2?r.HALF_FLOAT:r.getExtension("OES_texture_half_float").HALF_FLOAT_OES:r.UNSIGNED_BYTE,n=this.channels===a.RGBA?r.RGBA:r.RGB;return {internalFormat:this.target.webglVersion===a.WEBGL2?(s(t={},r.FLOAT,s({},r.RGBA,r.RGBA32F)),s(t,r.HALF_FLOAT,s({},r.RGBA,r.RGBA16F)),s(t,r.UNSIGNED_BYTE,(s(e={},r.RGBA,r.RGBA8),s(e,r.RGB,r.RGB8),e)),t[o][n]):this.format===a.HALF_FLOAT?r.RGBA:n,format:n,type:o}}},{key:"_glDepthFormat",value:function(){var e=this.gl,t=this.useStencil?this.depthFormat===a.FLOAT?e.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===a.WEBGL2?e.UNSIGNED_INT_24_8:e.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===a.FLOAT?e.FLOAT:e.UNSIGNED_INT,r=this.useStencil?e.DEPTH_STENCIL:e.DEPTH_COMPONENT,e=this.useStencil?this.depthFormat===a.FLOAT?e.DEPTH32F_STENCIL8:this.target.webglVersion===a.WEBGL2?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL:this.target.webglVersion===a.WEBGL2?this.depthFormat===a.FLOAT?e.DEPTH_COMPONENT32F:e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT;return {internalFormat:e,format:r,type:t}}},{key:"_updateSize",value:function(){this.autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity());}},{key:"_canvasSizeChanged",value:function(){this.autoSized&&this._handleResize();}},{key:"_handleResize",value:function(){var e=this.color,t=this.depth,r=this.colorRenderbuffer,o=this.depthRenderbuffer,e=(this._deleteTexture(e),t&&this._deleteTexture(t),this.gl);r&&e.deleteRenderbuffer(r),o&&e.deleteRenderbuffer(o),this._recreateTextures(),this.defaultCamera._resize();}},{key:"createCamera",value:function(){var e=new b(this);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this.target._renderer._curCamera=e}},{key:"_deleteTexture",value:function(e){this.gl.deleteTexture(e.rawTexture()),this.target._renderer.textures.delete(e);}},{key:"remove",value:function(){var e=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),e.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&e.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&e.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&e.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this);}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix.mat4[0],this.target._renderer._curCamera.cameraMatrix.mat4[1],this.target._renderer._curCamera.cameraMatrix.mat4[2],this.target._renderer._curCamera.cameraMatrix.mat4[3],this.target._renderer._curCamera.cameraMatrix.mat4[4],this.target._renderer._curCamera.cameraMatrix.mat4[5],this.target._renderer._curCamera.cameraMatrix.mat4[6],this.target._renderer._curCamera.cameraMatrix.mat4[7],this.target._renderer._curCamera.cameraMatrix.mat4[8],this.target._renderer._curCamera.cameraMatrix.mat4[9],this.target._renderer._curCamera.cameraMatrix.mat4[10],this.target._renderer._curCamera.cameraMatrix.mat4[11],this.target._renderer._curCamera.cameraMatrix.mat4[12],this.target._renderer._curCamera.cameraMatrix.mat4[13],this.target._renderer._curCamera.cameraMatrix.mat4[14],this.target._renderer._curCamera.cameraMatrix.mat4[15]);}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density);}},{key:"_beforeEnd",value:function(){if(this.antialias){var e=this.gl,t=(e.bindFramebuffer(e.READ_FRAMEBUFFER,this.aaFramebuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this.framebuffer),[[e.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&t.push([e.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var r=0,o=t;r<o.length;r++){var n=u(o[r],2),s=n[0],n=n[1];e.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,s,n);}}}},{key:"end",value:function(){var e=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(e.bindFramebuffer(e.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping();}},{key:"draw",value:function(e){this.begin(),e(),this.end();}},{key:"loadPixels",value:function(){var e=this.gl,t=this.target._renderer.activeFramebuffer(),r=(e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0, p.readPixelsWebGL)(this.pixels,e,this.framebuffer,0,0,this.width*this.density,this.height*this.density,r.format,r.type),t?e.bindFramebuffer(e.FRAMEBUFFER,t._framebufferToBind()):e.bindFramebuffer(e.FRAMEBUFFER,null);}},{key:"get",value:function(e,t,r,o){f.default._validateParameters("p5.Framebuffer.get",arguments);var n=this._glColorFormat();if(void 0===e&&void 0===t)t=e=0,r=this.width,o=this.height;else if(void 0===r&&void 0===o)return (e<0||t<0||e>=this.width||t>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),e=this.target.constrain(e,0,this.width-1),t=this.target.constrain(t,0,this.height-1)),(0, p.readPixelWebGL)(this.gl,this.framebuffer,e*this.density,t*this.density,n.format,n.type);e=this.target.constrain(e,0,this.width-1),t=this.target.constrain(t,0,this.height-1),r=this.target.constrain(r,1,this.width-e),o=this.target.constrain(o,1,this.height-t);for(var s=(0, p.readPixelsWebGL)(void 0,this.gl,this.framebuffer,e*this.density,t*this.density,r*this.density,o*this.density,n.format,n.type),i=new Uint8ClampedArray(r*o*this.density*this.density*4),a=(i.fill(255),n.type===this.gl.RGB?3:4),l=0;l<o*this.density;l++)for(var u=0;u<r*this.density;u++)for(var c=0;c<4;c++){var d,h=4*(l*r*this.density+u)+c;c<a&&(d=4==a?h:(l*r*this.density+u)*a+c,i[h]=s[d]);}e=new f.default.Image(r*this.density,o*this.density);return e.imageData=e.canvas.getContext("2d").createImageData(e.width,e.height),e.imageData.data.set(i),e.pixels=e.imageData.data,e.updatePixels(),1!==this.density&&e.resize(r,o),e}},{key:"updatePixels",value:function(){var e=this.gl,t=(this.colorP5Texture.bindTexture(),this._glColorFormat()),r=t.format===e.RGBA?4:3,r=this.width*this.height*this.density*this.density*r,o=t.type===e.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof o)||this.pixels.length!==r)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");e.texImage2D(e.TEXTURE_2D,0,t.internalFormat,this.width*this.density,this.height*this.density,0,t.format,t.type,this.pixels),this.colorP5Texture.unbindTexture();o=this.target._renderer.activeFramebuffer();this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(e.clearDepth(1),e.clear(e.DEPTH_BUFFER_BIT)),this.end()):(e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.useDepth&&(e.clearDepth(1),e.clear(e.DEPTH_BUFFER_BIT)),o?e.bindFramebuffer(e.FRAMEBUFFER,o._framebufferToBind()):e.bindFramebuffer(e.FRAMEBUFFER,null));}}]),o}()),e=f.default.Framebuffer=_;r.default=e;},{"../core/constants":264,"../core/main":275,"./p5.RendererGL":332,"./p5.Texture":334,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],327:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.map"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.map"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=(s=e("../core/main"))&&s.__esModule?s:{default:s},y=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}m.default.Geometry=function(){function o(e,t,r){if(this instanceof o)return this.vertices=[],this.lineVertices=new m.default.DataArray,this.lineTangentsIn=new m.default.DataArray,this.lineTangentsOut=new m.default.DataArray,this.lineSides=new m.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new m.default.DataArray,this.detailX=void 0!==e?e:1,this.detailY=void 0!==t?t:1,this.dirtyFlags={},r instanceof Function&&r.call(this),this;throw new TypeError("Cannot call a class as a function")}var e,t;return e=o,(t=[{key:"reset",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={};}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"computeFaces",value:function(){this.faces.length=0;for(var e,t,r,o=this.detailX+1,n=0;n<this.detailY;n++)for(var s=0;s<this.detailX;s++)t=(n+1)*o+s+1,this.faces.push([n*o+s,e=n*o+s+1,r=(n+1)*o+s]),this.faces.push([r,e,t]);return this}},{key:"_getFaceNormal",value:function(e){var e=this.faces[e],t=this.vertices[e[0]],r=this.vertices[e[1]],e=this.vertices[e[2]],r=m.default.Vector.sub(r,t),e=m.default.Vector.sub(e,t),t=m.default.Vector.cross(r,e),o=m.default.Vector.mag(t),r=o/(m.default.Vector.mag(r)*m.default.Vector.mag(e));return 0===r||isNaN(r)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),t):(1<r&&(r=1),t.mult(Math.asin(r)/o))}},{key:"computeNormals",value:function(){var e,s=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y.FLAT,r=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).roundToPrecision,i=this.vertexNormals,o=this.vertices,n=this.faces;if(t===y.SMOOTH){for(var a={},l=[],u=Math.pow(10,void 0===r?3:r),c=function(e){return Math.round(e*u)/u},d=function(e){return "".concat(c(e.x),",").concat(c(e.y),",").concat(c(e.z))},h=0;h<o.length;h++){var f=o[h],p=d(f);void 0===a[p]&&(a[p]=l.length,l.push(f));}n.forEach(function(e){for(var t=0;t<3;++t){var r=e[t],r=o[r],r=d(r);e[t]=a[r];}}),this.edges.forEach(function(e){for(var t=0;t<2;++t){var r=e[t],r=o[r],r=d(r);e[t]=a[r];}}),this.vertices=o=l;}for(e=i.length=0;e<o.length;++e)i.push(new m.default.Vector);for(n.forEach(function(e,t){for(var r=s._getFaceNormal(t),o=0;o<3;++o){var n=e[o];i[n].add(r);}}),e=0;e<o.length;++e)i[e].normalize();return this}},{key:"averageNormals",value:function(){for(var e=0;e<=this.detailY;e++){var t=this.detailX+1,r=m.default.Vector.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]),r=m.default.Vector.div(r,2);this.vertexNormals[e*t]=r,this.vertexNormals[e*t+this.detailX]=r;}return this}},{key:"averagePoleNormals",value:function(){for(var e=new m.default.Vector(0,0,0),t=0;t<this.detailX;t++)e.add(this.vertexNormals[t]);for(var e=m.default.Vector.div(e,this.detailX),r=0;r<this.detailX;r++)this.vertexNormals[r]=e;e=new m.default.Vector(0,0,0);for(var o=this.vertices.length-1;o>this.vertices.length-1-this.detailX;o--)e.add(this.vertexNormals[o]);e=m.default.Vector.div(e,this.detailX);for(var n=this.vertices.length-1;n>this.vertices.length-1-this.detailX;n--)this.vertexNormals[n]=e;return this}},{key:"_makeTriangleEdges",value:function(){for(var e=this.edges.length=0;e<this.faces.length;e++)this.edges.push([this.faces[e][0],this.faces[e][1]]),this.edges.push([this.faces[e][1],this.faces[e][2]]),this.edges.push([this.faces[e][2],this.faces[e][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var e,t=new Map,r=new Set,o=0;o<this.edges.length;o++){var n,s=this.edges[o-1],i=this.edges[o],a=this.vertices[i[0]],l=this.vertices[i[1]],u=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*i[0],4*(i[0]+1)):[0,0,0,0],c=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*i[1],4*(i[1]+1)):[0,0,0,0],d=l.copy().sub(a).normalize(),h=0<d.magSq();h&&this._addSegment(a,l,u,c,d),0<o&&s[1]===i[0]?r.has(i[0])||(r.add(i[0]),t.delete(i[0]),e&&h&&d.dot(e)<1-1e-8&&this._addJoin(a,e,d,u)):(h&&!r.has(i[0])&&((n=t.get(i[0]))?(this._addJoin(a,n.dir,d,u),t.delete(i[0]),r.add(i[0])):t.set(i[0],{point:a,dir:d.copy().mult(-1),color:u})),e&&!r.has(s[1])&&((n=t.get(s[1]))?(this._addJoin(this.vertices[s[1]],e,n.dir.copy().mult(-1),u),t.delete(s[1]),r.add(s[1])):t.set(s[1],{point:this.vertices[s[1]],dir:e,color:u}),e=void 0)),o!==this.edges.length-1||r.has(i[1])||((a=t.get(i[1]))?(this._addJoin(l,d,a.dir.copy().mult(-1),c),t.delete(i[1]),r.add(i[1])):t.set(i[1],{point:l,dir:d,color:c})),h&&(e=d);}var f=!0,p=!1,m=void 0;try{for(var y,g=t.values()[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var v=y.value,b=v.point,j=v.dir,_=v.color;this._addCap(b,j,_);}}catch(e){p=!0,m=e;}finally{try{f||null==g.return||g.return();}finally{if(p)throw m}}return this}},{key:"_addSegment",value:function(e,t,r,o,n){var e=e.array(),t=t.array(),s=n.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var i=0,a=[this.lineTangentsIn,this.lineTangentsOut];i<a.length;i++)for(var l=a[i],u=0;u<6;u++)l.push.apply(l,c(s));return (n=this.lineVertices).push.apply(n,c(e).concat(c(t),c(e),c(t),c(t),c(e))),(n=this.lineVertexColors).push.apply(n,c(r).concat(c(o),c(r),c(o),c(o),c(r))),this}},{key:"_addCap",value:function(e,t,r){for(var o,n=e.array(),s=t.array(),i=[0,0,0],a=0;a<6;a++)(o=this.lineVertices).push.apply(o,c(n)),(o=this.lineTangentsIn).push.apply(o,c(s)),(o=this.lineTangentsOut).push.apply(o,i),(o=this.lineVertexColors).push.apply(o,c(r));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(e,t,r,o){for(var n,s=e.array(),i=t.array(),a=r.array(),l=0;l<12;l++)(n=this.lineVertices).push.apply(n,c(s)),(n=this.lineTangentsIn).push.apply(n,c(i)),(n=this.lineTangentsOut).push.apply(n,c(a)),(n=this.lineVertexColors).push.apply(n,c(o));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var e=this.vertices[0].copy(),t=this.vertices[0].copy(),r=0;r<this.vertices.length;r++)e.x=Math.max(e.x,this.vertices[r].x),t.x=Math.min(t.x,this.vertices[r].x),e.y=Math.max(e.y,this.vertices[r].y),t.y=Math.min(t.y,this.vertices[r].y),e.z=Math.max(e.z,this.vertices[r].z),t.z=Math.min(t.z,this.vertices[r].z);for(var o=m.default.Vector.lerp(e,t,.5),n=m.default.Vector.sub(e,t),s=200/Math.max(Math.max(n.x,n.y),n.z),i=0;i<this.vertices.length;i++)this.vertices[i].sub(o),this.vertices[i].mult(s);}return this}}])&&n(e.prototype,t),o}();var s=m.default.Geometry;r.default=s;},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.map":169,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],328:[function(e,t,r){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var C=(e=e("../core/main"))&&e.__esModule?e:{default:e};function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}var s=Array,O=function(e){return Array.isArray(e)},e=("undefined"!=typeof Float32Array&&(s=Float32Array,O=function(e){return Array.isArray(e)||e instanceof Float32Array}),C.default.Matrix=function(){function r(){var e=this,t=r;if(e instanceof t)return arguments.length&&((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e])instanceof C.default&&(this.p5=(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t]),"mat3"===(arguments.length<=0?void 0:arguments[0])?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new s([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var e,t,o;return e=r,o=[{key:"identity",value:function(e){return new C.default.Matrix(e)}}],(t=[{key:"set",value:function(e){return e instanceof C.default.Matrix?this.mat4=e.mat4:O(e)?this.mat4=e:16===arguments.length&&(this.mat4[0]=e,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this}},{key:"get",value:function(){return new C.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var e;return void 0!==this.mat3?((e=new C.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],e.mat3[1]=this.mat3[1],e.mat3[2]=this.mat3[2],e.mat3[3]=this.mat3[3],e.mat3[4]=this.mat3[4],e.mat3[5]=this.mat3[5],e.mat3[6]=this.mat3[6],e.mat3[7]=this.mat3[7],e.mat3[8]=this.mat3[8]):((e=new C.default.Matrix(this.p5)).mat4[0]=this.mat4[0],e.mat4[1]=this.mat4[1],e.mat4[2]=this.mat4[2],e.mat4[3]=this.mat4[3],e.mat4[4]=this.mat4[4],e.mat4[5]=this.mat4[5],e.mat4[6]=this.mat4[6],e.mat4[7]=this.mat4[7],e.mat4[8]=this.mat4[8],e.mat4[9]=this.mat4[9],e.mat4[10]=this.mat4[10],e.mat4[11]=this.mat4[11],e.mat4[12]=this.mat4[12],e.mat4[13]=this.mat4[13],e.mat4[14]=this.mat4[14],e.mat4[15]=this.mat4[15]),e}},{key:"transpose",value:function(e){var t,r,o,n,s,i;return e instanceof C.default.Matrix?(t=e.mat4[1],r=e.mat4[2],o=e.mat4[3],n=e.mat4[6],s=e.mat4[7],i=e.mat4[11],this.mat4[0]=e.mat4[0],this.mat4[1]=e.mat4[4],this.mat4[2]=e.mat4[8],this.mat4[3]=e.mat4[12],this.mat4[4]=t,this.mat4[5]=e.mat4[5],this.mat4[6]=e.mat4[9],this.mat4[7]=e.mat4[13],this.mat4[8]=r,this.mat4[9]=n,this.mat4[10]=e.mat4[10],this.mat4[11]=e.mat4[14],this.mat4[12]=o,this.mat4[13]=s,this.mat4[14]=i,this.mat4[15]=e.mat4[15]):O(e)&&(t=e[1],r=e[2],o=e[3],n=e[6],s=e[7],i=e[11],this.mat4[0]=e[0],this.mat4[1]=e[4],this.mat4[2]=e[8],this.mat4[3]=e[12],this.mat4[4]=t,this.mat4[5]=e[5],this.mat4[6]=e[9],this.mat4[7]=e[13],this.mat4[8]=r,this.mat4[9]=n,this.mat4[10]=e[10],this.mat4[11]=e[14],this.mat4[12]=o,this.mat4[13]=s,this.mat4[14]=i,this.mat4[15]=e[15]),this}},{key:"invert",value:function(e){e instanceof C.default.Matrix?(t=e.mat4[0],r=e.mat4[1],o=e.mat4[2],n=e.mat4[3],s=e.mat4[4],i=e.mat4[5],a=e.mat4[6],l=e.mat4[7],u=e.mat4[8],c=e.mat4[9],d=e.mat4[10],h=e.mat4[11],f=e.mat4[12],p=e.mat4[13],m=e.mat4[14],y=e.mat4[15]):O(e)&&(t=e[0],r=e[1],o=e[2],n=e[3],s=e[4],i=e[5],a=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],y=e[15]);var t,r,o,n,s,i,a,l,u,c,d,h,f,p,m,y,e=t*i-r*s,g=t*a-o*s,v=t*l-n*s,b=r*a-o*i,j=r*l-n*i,_=o*l-n*a,x=u*p-c*f,w=u*m-d*f,S=u*y-h*f,T=c*m-d*p,M=c*y-h*p,E=d*y-h*m,k=e*E-g*M+v*T+b*S-j*w+_*x;return k?(this.mat4[0]=(i*E-a*M+l*T)*(k=1/k),this.mat4[1]=(o*M-r*E-n*T)*k,this.mat4[2]=(p*_-m*j+y*b)*k,this.mat4[3]=(d*j-c*_-h*b)*k,this.mat4[4]=(a*S-s*E-l*w)*k,this.mat4[5]=(t*E-o*S+n*w)*k,this.mat4[6]=(m*v-f*_-y*g)*k,this.mat4[7]=(u*_-d*v+h*g)*k,this.mat4[8]=(s*M-i*S+l*x)*k,this.mat4[9]=(r*S-t*M-n*x)*k,this.mat4[10]=(f*j-p*v+y*e)*k,this.mat4[11]=(c*v-u*j-h*e)*k,this.mat4[12]=(i*w-s*T-a*x)*k,this.mat4[13]=(t*T-r*w+o*x)*k,this.mat4[14]=(p*g-f*b-m*e)*k,this.mat4[15]=(u*b-c*g+d*e)*k,this):null}},{key:"invert3x3",value:function(){var e=this.mat3[0],t=this.mat3[1],r=this.mat3[2],o=this.mat3[3],n=this.mat3[4],s=this.mat3[5],i=this.mat3[6],a=this.mat3[7],l=this.mat3[8],u=l*n-s*a,c=-l*o+s*i,d=a*o-n*i,h=e*u+t*c+r*d;return h?(this.mat3[0]=u*(h=1/h),this.mat3[1]=(-l*t+r*a)*h,this.mat3[2]=(s*t-r*n)*h,this.mat3[3]=c*h,this.mat3[4]=(l*e-r*i)*h,this.mat3[5]=(-s*e+r*o)*h,this.mat3[6]=d*h,this.mat3[7]=(-a*e+t*i)*h,this.mat3[8]=(n*e-t*o)*h,this):null}},{key:"transpose3x3",value:function(e){var t=(e=void 0===e?this.mat3:e)[1],r=e[2],o=e[5];return this.mat3[0]=e[0],this.mat3[1]=e[3],this.mat3[2]=e[6],this.mat3[3]=t,this.mat3[4]=e[4],this.mat3[5]=e[7],this.mat3[6]=r,this.mat3[7]=o,this.mat3[8]=e[8],this}},{key:"inverseTranspose",value:function(e){e=e.mat4,void 0===this.mat3?C.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=e[0],this.mat3[1]=e[1],this.mat3[2]=e[2],this.mat3[3]=e[4],this.mat3[4]=e[5],this.mat3[5]=e[6],this.mat3[6]=e[8],this.mat3[7]=e[9],this.mat3[8]=e[10]),e=this.invert3x3();if(e)e.transpose3x3(this.mat3);else for(var t=0;t<9;t++)this.mat3[t]=0;return this}},{key:"determinant",value:function(){var e=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],t=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],r=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],o=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],n=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],s=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],i=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],a=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],l=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],u=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],c=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return e*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-t*c+r*u+o*l-n*a+s*i}},{key:"mult",value:function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof C.default.Matrix)t=e.mat4;else if(O(e))t=e;else {if(16!==arguments.length)return;t=arguments;}var e=this.mat4[0],r=this.mat4[1],o=this.mat4[2],n=this.mat4[3];return this.mat4[0]=e*t[0]+r*t[4]+o*t[8]+n*t[12],this.mat4[1]=e*t[1]+r*t[5]+o*t[9]+n*t[13],this.mat4[2]=e*t[2]+r*t[6]+o*t[10]+n*t[14],this.mat4[3]=e*t[3]+r*t[7]+o*t[11]+n*t[15],e=this.mat4[4],r=this.mat4[5],o=this.mat4[6],n=this.mat4[7],this.mat4[4]=e*t[0]+r*t[4]+o*t[8]+n*t[12],this.mat4[5]=e*t[1]+r*t[5]+o*t[9]+n*t[13],this.mat4[6]=e*t[2]+r*t[6]+o*t[10]+n*t[14],this.mat4[7]=e*t[3]+r*t[7]+o*t[11]+n*t[15],e=this.mat4[8],r=this.mat4[9],o=this.mat4[10],n=this.mat4[11],this.mat4[8]=e*t[0]+r*t[4]+o*t[8]+n*t[12],this.mat4[9]=e*t[1]+r*t[5]+o*t[9]+n*t[13],this.mat4[10]=e*t[2]+r*t[6]+o*t[10]+n*t[14],this.mat4[11]=e*t[3]+r*t[7]+o*t[11]+n*t[15],e=this.mat4[12],r=this.mat4[13],o=this.mat4[14],n=this.mat4[15],this.mat4[12]=e*t[0]+r*t[4]+o*t[8]+n*t[12],this.mat4[13]=e*t[1]+r*t[5]+o*t[9]+n*t[13],this.mat4[14]=e*t[2]+r*t[6]+o*t[10]+n*t[14],this.mat4[15]=e*t[3]+r*t[7]+o*t[11]+n*t[15],this}},{key:"apply",value:function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof C.default.Matrix)t=e.mat4;else if(O(e))t=e;else {if(16!==arguments.length)return;t=arguments;}var e=this.mat4,r=e[0],o=e[4],n=e[8],s=e[12],r=(e[0]=t[0]*r+t[1]*o+t[2]*n+t[3]*s,e[4]=t[4]*r+t[5]*o+t[6]*n+t[7]*s,e[8]=t[8]*r+t[9]*o+t[10]*n+t[11]*s,e[12]=t[12]*r+t[13]*o+t[14]*n+t[15]*s,e[1]),o=e[5],n=e[9],s=e[13],r=(e[1]=t[0]*r+t[1]*o+t[2]*n+t[3]*s,e[5]=t[4]*r+t[5]*o+t[6]*n+t[7]*s,e[9]=t[8]*r+t[9]*o+t[10]*n+t[11]*s,e[13]=t[12]*r+t[13]*o+t[14]*n+t[15]*s,e[2]),o=e[6],n=e[10],s=e[14],r=(e[2]=t[0]*r+t[1]*o+t[2]*n+t[3]*s,e[6]=t[4]*r+t[5]*o+t[6]*n+t[7]*s,e[10]=t[8]*r+t[9]*o+t[10]*n+t[11]*s,e[14]=t[12]*r+t[13]*o+t[14]*n+t[15]*s,e[3]),o=e[7],n=e[11],s=e[15];return e[3]=t[0]*r+t[1]*o+t[2]*n+t[3]*s,e[7]=t[4]*r+t[5]*o+t[6]*n+t[7]*s,e[11]=t[8]*r+t[9]*o+t[10]*n+t[11]*s,e[15]=t[12]*r+t[13]*o+t[14]*n+t[15]*s,this}},{key:"scale",value:function(e,t,r){return e instanceof C.default.Vector?(t=e.y,r=e.z,e=e.x):e instanceof Array&&(t=e[1],r=e[2],e=e[0]),this.mat4[0]*=e,this.mat4[1]*=e,this.mat4[2]*=e,this.mat4[3]*=e,this.mat4[4]*=t,this.mat4[5]*=t,this.mat4[6]*=t,this.mat4[7]*=t,this.mat4[8]*=r,this.mat4[9]*=r,this.mat4[10]*=r,this.mat4[11]*=r,this}},{key:"rotate",value:function(e,t,r,o){t instanceof C.default.Vector?(r=t.y,o=t.z,t=t.x):t instanceof Array&&(r=t[1],o=t[2],t=t[0]);var n=Math.sqrt(t*t+r*r+o*o),n=(t*=1/n,r*=1/n,o*=1/n,this.mat4[0]),s=this.mat4[1],i=this.mat4[2],a=this.mat4[3],l=this.mat4[4],u=this.mat4[5],c=this.mat4[6],d=this.mat4[7],h=this.mat4[8],f=this.mat4[9],p=this.mat4[10],m=this.mat4[11],y=Math.sin(e),e=Math.cos(e),g=1-e,v=t*t*g+e,b=r*t*g+o*y,j=o*t*g-r*y,_=t*r*g-o*y,x=r*r*g+e,w=o*r*g+t*y,S=t*o*g+r*y,r=r*o*g-t*y,t=o*o*g+e;return this.mat4[0]=n*v+l*b+h*j,this.mat4[1]=s*v+u*b+f*j,this.mat4[2]=i*v+c*b+p*j,this.mat4[3]=a*v+d*b+m*j,this.mat4[4]=n*_+l*x+h*w,this.mat4[5]=s*_+u*x+f*w,this.mat4[6]=i*_+c*x+p*w,this.mat4[7]=a*_+d*x+m*w,this.mat4[8]=n*S+l*r+h*t,this.mat4[9]=s*S+u*r+f*t,this.mat4[10]=i*S+c*r+p*t,this.mat4[11]=a*S+d*r+m*t,this}},{key:"translate",value:function(e){var t=e[0],r=e[1],e=e[2]||0;this.mat4[12]+=this.mat4[0]*t+this.mat4[4]*r+this.mat4[8]*e,this.mat4[13]+=this.mat4[1]*t+this.mat4[5]*r+this.mat4[9]*e,this.mat4[14]+=this.mat4[2]*t+this.mat4[6]*r+this.mat4[10]*e,this.mat4[15]+=this.mat4[3]*t+this.mat4[7]*r+this.mat4[11]*e;}},{key:"rotateX",value:function(e){this.rotate(e,1,0,0);}},{key:"rotateY",value:function(e){this.rotate(e,0,1,0);}},{key:"rotateZ",value:function(e){this.rotate(e,0,0,1);}},{key:"perspective",value:function(e,t,r,o){var e=1/Math.tan(e/2),n=1/(r-o);return this.mat4[0]=e/t,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=e,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(o+r)*n,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*o*r*n,this.mat4[15]=0,this}},{key:"ortho",value:function(e,t,r,o,n,s){var i=1/(e-t),a=1/(r-o),l=1/(n-s);return this.mat4[0]=-2*i,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*a,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*l,this.mat4[11]=0,this.mat4[12]=(e+t)*i,this.mat4[13]=(o+r)*a,this.mat4[14]=(s+n)*l,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(e,t,r,o){var n=new Array(4),s=this.mat4;return n[0]=s[0]*e+s[4]*t+s[8]*r+s[12]*o,n[1]=s[1]*e+s[5]*t+s[9]*r+s[13]*o,n[2]=s[2]*e+s[6]*t+s[10]*r+s[14]*o,n[3]=s[3]*e+s[7]*t+s[11]*r+s[15]*o,n}},{key:"multiplyPoint",value:function(e){var t=e.x,r=e.y,e=e.z,t=this.multiplyVec4(t,r,e,1);return new C.default.Vector(t[0],t[1],t[2])}},{key:"multiplyAndNormalizePoint",value:function(e){var t=e.x,r=e.y,e=e.z,t=this.multiplyVec4(t,r,e,1);return t[0]/=t[3],t[1]/=t[3],t[2]/=t[3],new C.default.Vector(t[0],t[1],t[2])}},{key:"multiplyDirection",value:function(e){var t=e.x,r=e.y,e=e.z,t=this.multiplyVec4(t,r,e,0);return new C.default.Vector(t[0],t[1],t[2])}},{key:"mult3x3",value:function(e){var t;if(e===this||e===this.mat3)t=this.copy().mat3;else if(e instanceof C.default.Matrix)t=e.mat3;else if(O(e))t=e;else {if(9!==arguments.length)return;t=arguments;}var e=this.mat3[0],r=this.mat3[1],o=this.mat3[2];return this.mat3[0]=e*t[0]+r*t[3]+o*t[6],this.mat3[1]=e*t[1]+r*t[4]+o*t[7],this.mat3[2]=e*t[2]+r*t[5]+o*t[8],e=this.mat3[3],r=this.mat3[4],o=this.mat3[5],this.mat3[3]=e*t[0]+r*t[3]+o*t[6],this.mat3[4]=e*t[1]+r*t[4]+o*t[7],this.mat3[5]=e*t[2]+r*t[5]+o*t[8],e=this.mat3[6],r=this.mat3[7],o=this.mat3[8],this.mat3[6]=e*t[0]+r*t[3]+o*t[6],this.mat3[7]=e*t[1]+r*t[4]+o*t[7],this.mat3[8]=e*t[2]+r*t[5]+o*t[8],this}},{key:"column",value:function(e){return new C.default.Vector(this.mat3[3*e],this.mat3[3*e+1],this.mat3[3*e+2])}},{key:"row",value:function(e){return new C.default.Vector(this.mat3[e],this.mat3[e+3],this.mat3[e+6])}},{key:"diagonal",value:function(){return void 0!==this.mat3?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(e,t){return (t=void 0===t?e.copy():t).x=this.row(0).dot(e),t.y=this.row(1).dot(e),t.z=this.row(2).dot(e),t}},{key:"createSubMatrix3x3",value:function(){var e=new C.default.Matrix("mat3");return e.mat3[0]=this.mat4[0],e.mat3[1]=this.mat4[1],e.mat3[2]=this.mat4[2],e.mat3[3]=this.mat4[4],e.mat3[4]=this.mat4[5],e.mat3[5]=this.mat4[6],e.mat3[6]=this.mat4[8],e.mat3[7]=this.mat4[9],e.mat3[8]=this.mat4[10],e}}])&&n(e.prototype,t),o&&n(e,o),r}(),C.default.Matrix);r.default=e;},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231}],329:[function(e,t,r){e("core-js/modules/es.array.map"),e("core-js/modules/es.array.map"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("../core/main"))&&e.__esModule?e:{default:e};function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}e.default.RenderBuffer=function(){function i(e,t,r,o,n,s){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.size=e,this.src=t,this.dst=r,this.attr=o,this._renderer=n,this.map=s;}var e,t;return e=i,(t=[{key:"_prepareBuffer",value:function(e,t){var r,o,n,s=t.attributes,i=this._renderer.GL,a=e.model||e,s=s[this.attr];s&&(r=e[this.dst],0<(o=a[this.src]).length?((n=!r)&&(e[this.dst]=r=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,r),!n&&!1===a.dirtyFlags[this.src]||(n=(e=this.map)?e(o):o,this._renderer._bindBuffer(r,i.ARRAY_BUFFER,n),a.dirtyFlags[this.src]=!1),t.enableAttrib(s,this.size)):-1!==(e=s.location)&&this._renderer.registerEnabled.has(e)&&(i.disableVertexAttribArray(e),this._renderer.registerEnabled.delete(e)));}}])&&o(e.prototype,t),i}();e=e.default.RenderBuffer;r.default=e;},{"../core/main":275,"core-js/modules/es.array.map":164}],330:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.find-index"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.map"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.find-index"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.map"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=(n=e("../core/main"))&&n.__esModule?n:{default:n},h=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("./p5.RenderBuffer"),l.default.RendererGL.prototype.beginShape=function(e){return this.immediateMode.shapeMode=void 0!==e?e:h.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var u={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},n=(l.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==h.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length);},l.default.RendererGL.prototype.vertex=function(e,t){if(this.immediateMode.shapeMode===h.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var r in u){var o=u[r],r=this.immediateMode.geometry[r];r.push.apply(r,f(r.slice(r.length-3*o,r.length-2*o)).concat(f(r.slice(r.length-o,r.length))));}var n,s,i=n=s=0,a=(3===arguments.length?i=arguments[2]:4===arguments.length?(n=arguments[2],s=arguments[3]):5===arguments.length&&(i=arguments[2],n=arguments[3],s=arguments[4]),new l.default.Vector(e,t,i)),a=(this.immediateMode.geometry.vertices.push(a),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),a=(this.immediateMode.geometry.vertexColors.push(a[0],a[1],a[2],a[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(a[0],a[1],a[2],a[3]),this.textureMode!==h.IMAGE||this.isProcessingVertices||(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(n/=this._tex.width,s/=this._tex.height):void 0===this.userFillShader&&void 0===this.userStrokeShader&&void 0===this.userPointShader&&null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(n,s),this.immediateMode._bezierVertex[0]=e,this.immediateMode._bezierVertex[1]=t,this.immediateMode._bezierVertex[2]=i,this.immediateMode._quadraticVertex[0]=e,this.immediateMode._quadraticVertex[1]=t,this.immediateMode._quadraticVertex[2]=i,this},l.default.RendererGL.prototype.normal=function(e,t,r){return e instanceof l.default.Vector?this._currentNormal=e:this._currentNormal=new l.default.Vector(e,t,r),this},l.default.RendererGL.prototype.endShape=function(e,t,r,o,n,s){var i=6<arguments.length&&void 0!==arguments[6]?arguments[6]:1;return this.immediateMode.shapeMode===h.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(3===this.immediateMode.geometry.vertices.length&&this.immediateMode.shapeMode===h.TESS&&(this.immediateMode.shapeMode,h.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this.immediateMode.shapeMode!==h.LINE_STRIP&&this.immediateMode.shapeMode!==h.LINES||(this.immediateMode.shapeMode=h.TRIANGLE_FAN),this.immediateMode.shapeMode===h.QUADS?this.immediateMode.shapeMode=h.TRIANGLES:this.immediateMode.shapeMode===h.QUAD_STRIP&&(this.immediateMode.shapeMode=h.TRIANGLE_STRIP),this._doFill&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(i),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},l.default.RendererGL.prototype._processVertices=function(e){var t;0!==this.immediateMode.geometry.vertices.length&&(t=this._doStroke,e=e===h.CLOSE,t&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,e),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),t=this.immediateMode.shapeMode===h.TESS,e=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||t||e)&&this.immediateMode.shapeMode!==h.LINES&&this._tesselateShape());},l.default.RendererGL.prototype._calculateEdges=function(e,t,r){var o=[],n=0,s=this.immediateMode.contourIndices.slice(),i=0;switch(e){case h.TRIANGLE_STRIP:for(n=0;n<t.length-2;n++)o.push([n,n+1]),o.push([n,n+2]);o.push([n,n+1]);break;case h.TRIANGLE_FAN:for(n=1;n<t.length-1;n++)o.push([0,n]),o.push([n,n+1]);o.push([0,t.length-1]);break;case h.TRIANGLES:for(n=0;n<t.length-2;n+=3)o.push([n,n+1]),o.push([n+1,n+2]),o.push([n+2,n]);break;case h.LINES:for(n=0;n<t.length-1;n+=2)o.push([n,n+1]);break;case h.QUADS:for(n=0;n<t.length-5;n+=6)o.push([n,n+1]),o.push([n+1,n+2]),o.push([n+3,n+5]),o.push([n+4,n+5]);break;case h.QUAD_STRIP:for(n=0;n<t.length-2;n+=2)o.push([n,n+1]),o.push([n,n+2]),o.push([n+1,n+3]);o.push([n,n+1]);break;default:for(n=0;n<t.length;n++)n+1<t.length&&n+1!==s[0]?o.push([n,n+1]):((r||i)&&o.push([n,i]),0<s.length&&(i=s.shift()));}return e!==h.TESS&&r&&o.push([t.length-1,0]),o},l.default.RendererGL.prototype._tesselateShape=function(){for(var u=this,e=(this.immediateMode.shapeMode=h.TRIANGLES,[[]]),t=0;t<this.immediateMode.geometry.vertices.length;t++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===t&&(this.immediateMode.contourIndices.shift(),e.push([])),e[e.length-1].push(this.immediateMode.geometry.vertices[t].x,this.immediateMode.geometry.vertices[t].y,this.immediateMode.geometry.vertices[t].z,this.immediateMode.geometry.uvs[2*t],this.immediateMode.geometry.uvs[2*t+1],this.immediateMode.geometry.vertexColors[4*t],this.immediateMode.geometry.vertexColors[4*t+1],this.immediateMode.geometry.vertexColors[4*t+2],this.immediateMode.geometry.vertexColors[4*t+3],this.immediateMode.geometry.vertexNormals[t].x,this.immediateMode.geometry.vertexNormals[t].y,this.immediateMode.geometry.vertexNormals[t].z);for(var c,r=this._triangulate(e),d=this.immediateMode.geometry.vertices,o=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),n=0,s=r.length;n<s;n+=l.default.RendererGL.prototype.tessyVertexSize)o.push.apply(o,f(r.slice(n+5,n+9))),this.normal.apply(this,f(r.slice(n+9,n+12))),this.vertex.apply(this,f(r.slice(n,n+5)));this.geometryBuilder&&(c=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(e){return e.map(function(e){if(!c.has(e)){var t=d[e],r=u.immediateMode.geometry.vertices.findIndex(function(e){return t.x===e.x&&t.y===e.y&&t.z===e.z});if(-1===r){for(var o=1/0,n=0,s=0;s<u.immediateMode.geometry.vertices.length;s++){var i=u.immediateMode.geometry.vertices[s],a=t.x-i.x,l=t.y-i.y,i=t.z-i.z,a=a*a+l*l+i*i;a<o&&(o=a,n=s);}r=n;}c.set(e,r);}return c.get(e)})})),this.immediateMode.geometry.vertexColors=o;},l.default.RendererGL.prototype._drawImmediateFill=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,r=this.GL,o=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,e=this._getImmediateFillShader(),this._setFillUniforms(e),!0),n=!1,s=void 0;try{for(var i,a=this.immediateMode.buffers.fill[Symbol.iterator]();!(o=(i=a.next()).done);o=!0)i.value._prepareBuffer(this.immediateMode.geometry,e);}catch(e){n=!0,s=e;}finally{try{o||null==a.return||a.return();}finally{if(n)throw s}}if(e.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor),1===t)r.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{r.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,t);}catch(e){console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode");}e.unbindShader();},l.default.RendererGL.prototype._drawImmediateStroke=function(){var e=this.GL,t=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),r=(this._setStrokeUniforms(t),!0),o=!1,n=void 0;try{for(var s,i=this.immediateMode.buffers.stroke[Symbol.iterator]();!(r=(s=i.next()).done);r=!0)s.value._prepareBuffer(this.immediateMode.geometry,t);}catch(e){o=!0,n=e;}finally{try{r||null==i.return||i.return();}finally{if(o)throw n}}t.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor),e.drawArrays(e.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),t.unbindShader();},l.default.RendererGL);r.default=n;},{"../core/constants":264,"../core/main":275,"./p5.RenderBuffer":329,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.find-index":156,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.map":169,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],331:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=(s=e("../core/main"))&&s.__esModule?s:{default:s},n=(e("./p5.RendererGL"),e("./p5.RenderBuffer"),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=l();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants")));function l(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,l=function(){return e},e)}a.default.RendererGL.prototype.freeGeometry=function(e){e.gid?this._freeBuffers(e.gid):console.warn("The model you passed to freeGeometry does not have an id!");},a.default.RendererGL.prototype._initBufferDefaults=function(e){var t;return this._freeBuffers(e),1e3<Object.keys(this.retainedMode.geometry).length&&(t=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(t)),this.retainedMode.geometry[e]={}},a.default.RendererGL.prototype._freeBuffers=function(e){var a,l=this.retainedMode.geometry[e];function t(e){var t=!0,r=!1,o=void 0;try{for(var n,s=e[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value;l[i.dst]&&(a.deleteBuffer(l[i.dst]),l[i.dst]=null);}}catch(e){r=!0,o=e;}finally{try{t||null==s.return||s.return();}finally{if(r)throw o}}}l&&(delete this.retainedMode.geometry[e],a=this.GL,l.indexBuffer&&a.deleteBuffer(l.indexBuffer),t(this.retainedMode.buffers.stroke),t(this.retainedMode.buffers.fill));},a.default.RendererGL.prototype.createBuffers=function(e,t){var r,o,n,s=this.GL,e=this._initBufferDefaults(e),i=(e.model=t,e.indexBuffer);return t.faces.length?(i=i||(e.indexBuffer=s.createBuffer()),n=(o=(r=a.default.RendererGL.prototype._flatten(t.faces)).some(function(e){return 65535<e}))?Uint32Array:Uint16Array,this._bindBuffer(i,s.ELEMENT_ARRAY_BUFFER,r,n),e.indexBufferType=o?s.UNSIGNED_INT:s.UNSIGNED_SHORT,e.vertexCount=3*t.faces.length):(i&&(s.deleteBuffer(i),e.indexBuffer=null),e.vertexCount=t.vertices?t.vertices.length:0),e.lineVertexCount=t.lineVertices?t.lineVertices.length/3:0,e},a.default.RendererGL.prototype.drawBuffers=function(e){var t=this.GL,r=this.retainedMode.geometry[e];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[e].vertexCount){this._useVertexColor=0<r.model.vertexColors.length;var o=this._getRetainedFillShader(),n=(this._setFillUniforms(o),!0),s=!1,i=void 0;try{for(var a,l=this.retainedMode.buffers.fill[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)a.value._prepareBuffer(r,o);}catch(e){s=!0,i=e;}finally{try{n||null==l.return||l.return();}finally{if(s)throw i}}o.disableRemainingAttributes(),r.indexBuffer&&this._bindBuffer(r.indexBuffer,t.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(t.TRIANGLES,e),o.unbindShader();}if(!this.geometryBuilder&&this._doStroke&&0<r.lineVertexCount){this._useLineColor=0<r.model.vertexStrokeColors.length;var u=this._getRetainedStrokeShader(),c=(this._setStrokeUniforms(u),!0),s=!1,i=void 0;try{for(var d,h=this.retainedMode.buffers.stroke[Symbol.iterator]();!(c=(d=h.next()).done);c=!0)d.value._prepareBuffer(r,u);}catch(e){s=!0,i=e;}finally{try{c||null==h.return||h.return();}finally{if(s)throw i}}u.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor),this._drawArrays(t.TRIANGLES,e),u.unbindShader();}return this.geometryBuilder&&this.geometryBuilder.addRetained(r),this},a.default.RendererGL.prototype.drawBuffersScaled=function(e,t,r,o){var n=this.uMVMatrix.copy();try{this.uMVMatrix.scale(t,r,o),this.drawBuffers(e);}finally{this.uMVMatrix=n;}},a.default.RendererGL.prototype._drawArrays=function(e,t){return this.GL.drawArrays(e,0,this.retainedMode.geometry[t].lineVertexCount),this},a.default.RendererGL.prototype._drawElements=function(e,t){var t=this.retainedMode.geometry[t],r=this.GL;if(t.indexBuffer){if(this._pInst.webglVersion!==n.WEBGL2&&t.indexBufferType===r.UNSIGNED_INT&&!r.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");r.drawElements(r.TRIANGLES,t.vertexCount,t.indexBufferType,0);}else r.drawArrays(e||r.TRIANGLES,0,t.vertexCount);},a.default.RendererGL.prototype._drawPoints=function(e,t){var r=this.GL,o=this._getImmediatePointShader();this._setPointUniforms(o),this._bindBuffer(t,r.ARRAY_BUFFER,this._vToNArray(e),Float32Array,r.STATIC_DRAW),o.enableAttrib(o.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),r.drawArrays(r.Points,0,e.length),o.unbindShader();};var s=a.default.RendererGL;r.default=s;},{"../core/constants":264,"../core/main":275,"./p5.RenderBuffer":329,"./p5.RendererGL":332,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.some":166,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint16-array":232,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],332:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.reflect.get"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.readPixelsWebGL=k,r.readPixelWebGL=C,r.default=void 0;var g=n(e("../core/main")),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=d();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants")),a=n(e("./GeometryBuilder")),u=n(e("libtess")),c=(e("./p5.Shader"),e("./p5.Camera"),e("../core/p5.Renderer"),e("./p5.Matrix"),e("./p5.Framebuffer"),e("path"),e("./p5.Texture"));function d(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,d=function(){return e},e)}function n(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function p(e,t,r){return (p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(e)return (e=Object.getOwnPropertyDescriptor(e,t)).get?e.get.call(r):e.value})(e,t,r||e)}function m(e,t){return (m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){return function(){var e,t,r=b(o);return e=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){}}}()?(e=b(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments),r=this,!(t=e)||"object"!==i(t)&&"function"!=typeof t?v(r):t}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return (b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;}function s(e,t){T+="#define STROKE_CAP_".concat(e," ").concat(t,"\n"),w[l[e]]=t;}function _(e,t){T+="#define STROKE_JOIN_".concat(e," ").concat(t,"\n"),S[l[e]]=t;}var x,w={},S={},T="",e=(s("ROUND",0),s("PROJECT",1),s("SQUARE",2),_("ROUND",0),_("MITER",1),_("BEVEL",2),'#define PI 3.141592\n\nprecision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\n\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\n// setting from  _setImageLightUniforms()\n// boolean to initiate the calculateImageDiffuse and calculateImageSpecular\nuniform bool uUseImageLight;\n// texture for use in calculateImageDiffuse\nuniform sampler2D environmentMapDiffused;\n// texture for use in calculateImageSpecular\nuniform sampler2D environmentMapSpecular;\n// roughness for use in calculateImageSpecular\nuniform float levelOfDetail;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  if (uSpecular)\n    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);\n  lr.diffuse = _lambertDiffuse(lightDir, normal);\n  return lr;\n}\n\n// converts the range of "value" from [min1 to max1] to [min2 to max2]\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvec2 mapTextureToNormal( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );\n  return angles;\n}\n\n\nvec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){\n  // make 2 seperate builds \n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position\n  vec3 worldNormal = normalize(vNormal);\n  vec2 newTexCoor = mapTextureToNormal( worldNormal );\n  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return smoothstep(vec3(0.0), vec3(0.8), texture.xyz);\n}\n\nvec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){\n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);\n  vec3 worldNormal = normalize(vNormal);\n  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );\n  vec3 R = reflect(lightDirection, worldNormal);\n  vec2 newTexCoor = mapTextureToNormal( R );\n#ifdef WEBGL2\n  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);\n#else\n  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);\n#endif\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return pow(outColor.xyz, vec3(10.0));\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  if( uUseImageLight ){\n    totalDiffuse += calculateImageDiffuse(normal, modelPosition);\n    totalSpecular += calculateImageSpecular(normal, modelPosition);\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n'),M={immediateVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nOUT vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nOUT vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"IN vec4 vColor;\nvoid main(void) {\n  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",normalVert:"IN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec4 uMaterialColor;\nuniform bool uUseVertexColor;\n\nOUT vec3 vVertexNormal;\nOUT highp vec2 vVertTexCoord;\nOUT vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertTexCoord = aTexCoord;\n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",normalFrag:"IN vec3 vVertexNormal;\nvoid main(void) {\n  OUT_COLOR = vec4(vVertexNormal, 1.0);\n}\n",basicFrag:"IN vec4 vColor;\nvoid main(void) {\n  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",lightVert:e+"// include lighting.glgl\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT highp vec2 vVertTexCoord;\nOUT vec3 vDiffuseColor;\nOUT vec3 vSpecularColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",lightTextureFrag:"uniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nIN highp vec2 vVertTexCoord;\nIN vec3 vDiffuseColor;\nIN vec3 vSpecularColor;\nIN vec4 vColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    OUT_COLOR = vColor;\n  }\n  else {\n    vec4 baseColor = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);\n  }\n}\n",phongVert:"precision highp int;\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT vec3 vNormal;\nOUT vec2 vTexCoord;\nOUT vec3 vViewPosition;\nOUT vec3 vAmbientColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = uNormalMatrix * aNormal;\n  vTexCoord = aTexCoord;\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",phongFrag:e+"// include lighting.glsl\nprecision highp int;\n\nuniform bool uHasSetAmbient;\nuniform vec4 uSpecularMatColor;\nuniform vec4 uAmbientMatColor;\nuniform vec4 uEmissiveMatColor;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nIN vec3 vNormal;\nIN vec2 vTexCoord;\nIN vec3 vViewPosition;\nIN vec3 vAmbientColor;\nIN vec4 vColor;\n\nvoid main(void) {\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);\n\n  // Calculating final color as result of all lights (plus emissive term).\n\n  vec4 baseColor = isTexture\n    // Textures come in with premultiplied alpha. To apply tint and still have\n    // premultiplied alpha output, we need to multiply the RGB channels by the\n    // tint RGB, and all channels by the tint alpha.\n    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n    // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n    // channels by alpha to convert it to premultiplied alpha.\n    : vec4(vColor.rgb * vColor.a, vColor.a);\n  OUT_COLOR = vec4(diffuse * baseColor.rgb + \n                    vAmbientColor * (\n                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb\n                    ) + \n                    specular * uSpecularMatColor.rgb + \n                    uEmissiveMatColor.rgb, baseColor.a);\n}\n",fontVert:"IN vec3 aPosition;\nIN vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nOUT vec2 vTexCoord;\nOUT float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // Expand glyph bounding boxes by 1px on each side to give a bit of room\n  // for antialiasing\n  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;\n  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;\n  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;\n  vec2 pixelScale = vec2(\n    1. / length(newOrigin - newDX),\n    1. / length(newOrigin - newDY)\n  );\n  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);\n  vec2 textureOffset = offset * (1. / vec2(\n    uGlyphRect.z - uGlyphRect.x,\n    uGlyphRect.w - uGlyphRect.y\n  ));\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n\n  positionVec4.xy += offset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord + textureOffset;\n  w = gl_Position.w;\n}\n",fontFrag:"#ifndef WEBGL2\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nIN vec2 vTexCoord;\n\n// some helper functions\nint ROUND(float v) { return ifloor(v + 0.5); }\nivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = ROUND(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n  OUT_COLOR *= saturate(max(antialias, cover));\n}\n",lineVert:T+"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nprecision mediump int;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform bool uUseLineColor;\nuniform vec4 uMaterialColor;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\nuniform int uStrokeJoin;\n\nIN vec4 aPosition;\nIN vec3 aTangentIn;\nIN vec3 aTangentOut;\nIN float aSide;\nIN vec4 aVertexColor;\n\nOUT vec4 vColor;\nOUT vec2 vTangent;\nOUT vec2 vCenter;\nOUT vec2 vPosition;\nOUT float vMaxDist;\nOUT float vCap;\nOUT float vJoin;\n\nvec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {\n  // Rotate and translate so a starts at the origin and goes out to the right\n  bPoint -= aPoint;\n  vec2 rotatedBFrom = vec2(\n    bPoint.x*aDir.x + bPoint.y*aDir.y,\n    bPoint.y*aDir.x - bPoint.x*aDir.y\n  );\n  vec2 bTo = bPoint + bDir;\n  vec2 rotatedBTo = vec2(\n    bTo.x*aDir.x + bTo.y*aDir.y,\n    bTo.y*aDir.x - bTo.x*aDir.y\n  );\n  float intersectionDistance =\n    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /\n    (rotatedBTo.y - rotatedBFrom.y);\n  return aPoint + aDir * intersectionDistance;\n}\n\nvoid main() {\n  // Caps have one of either the in or out tangent set to 0\n  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))\n    ? 1. : 0.;\n\n  // Joins have two unique, defined tangents\n  vJoin = (\n    aTangentIn != vec3(0.) &&\n    aTangentOut != vec3(0.) &&\n    aTangentIn != aTangentOut\n  ) ? 1. : 0.;\n\n  vec4 posp = uModelViewMatrix * aPosition;\n  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));\n  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));\n\n  float facingCamera = pow(\n    // The word space tangent's z value is 0 if it's facing the camera\n    abs(normalize(posqIn-posp).z),\n\n    // Using pow() here to ramp `facingCamera` up from 0 to 1 really quickly\n    // so most lines get scaled and don't get clipped\n    0.25\n  );\n\n  // using a scale <1 moves the lines towards the camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  float scale = mix(1., 0.995, facingCamera);\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  posp.xyz = posp.xyz * scale;\n  posqIn.xyz = posqIn.xyz * scale;\n  posqOut.xyz = posqOut.xyz * scale;\n\n  vec4 p = uProjectionMatrix * posp;\n  vec4 qIn = uProjectionMatrix * posqIn;\n  vec4 qOut = uProjectionMatrix * posqOut;\n  vCenter = p.xy;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);\n  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);\n\n  vec2 curPerspScale;\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n\n    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.\n    // Multiplying again by its sign here negates the flip to get just the scale.\n    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  vec2 offset;\n  if (vJoin == 1.) {\n    vTangent = normalize(tangentIn + tangentOut);\n    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);\n    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);\n    float side = sign(aSide);\n    float sideEnum = abs(aSide);\n\n    // We generate vertices for joins on either side of the centerline, but\n    // the \"elbow\" side is the only one needing a join. By not setting the\n    // offset for the other side, all its vertices will end up in the same\n    // spot and not render, effectively discarding it.\n    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {\n      // Side enums:\n      //   1: the side going into the join\n      //   2: the middle of the join\n      //   3: the side going out of the join\n      if (sideEnum == 2.) {\n        // Calculate the position + tangent on either side of the join, and\n        // find where the lines intersect to find the elbow of the join\n        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;\n        vec2 intersection = lineIntersection(\n          c + (side * normalIn * uStrokeWeight / 2.),\n          tangentIn,\n          c + (side * normalOut * uStrokeWeight / 2.),\n          tangentOut\n        );\n        offset = (intersection - c);\n\n        // When lines are thick and the angle of the join approaches 180, the\n        // elbow might be really far from the center. We'll apply a limit to\n        // the magnitude to avoid lines going across the whole screen when this\n        // happens.\n        float mag = length(offset);\n        float maxMag = 3. * uStrokeWeight;\n        if (mag > maxMag) {\n          offset *= maxMag / mag;\n        }\n      } else if (sideEnum == 1.) {\n        offset = side * normalIn * uStrokeWeight / 2.;\n      } else if (sideEnum == 3.) {\n        offset = side * normalOut * uStrokeWeight / 2.;\n      }\n    }\n    if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);\n      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));\n    } else {\n      vMaxDist = uStrokeWeight / 2.;\n    }\n  } else {\n    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;\n    vTangent = tangent;\n    vec2 normal = vec2(-tangent.y, tangent.x);\n\n    float normalOffset = sign(aSide);\n    // Caps will have side values of -2 or 2 on the edge of the cap that\n    // extends out from the line\n    float tangentOffset = abs(aSide) - 1.;\n    offset = (normal * normalOffset + tangent * tangentOffset) *\n      uStrokeWeight * 0.5;\n    vMaxDist = uStrokeWeight / 2.;\n  }\n  vPosition = vCenter + offset;\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n  \n  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);\n}\n",lineFrag:T+"precision mediump int;\n\nuniform vec4 uMaterialColor;\nuniform int uStrokeCap;\nuniform int uStrokeJoin;\nuniform float uStrokeWeight;\n\nIN vec4 vColor;\nIN vec2 vTangent;\nIN vec2 vCenter;\nIN vec2 vPosition;\nIN float vMaxDist;\nIN float vCap;\nIN float vJoin;\n\nfloat distSquared(vec2 a, vec2 b) {\n  vec2 aToB = b - a;\n  return dot(aToB, aToB);\n}\n\nvoid main() {\n  if (vCap > 0.) {\n    if (\n      uStrokeCap == STROKE_CAP_ROUND &&\n      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25\n    ) {\n      discard;\n    } else if (\n      uStrokeCap == STROKE_CAP_SQUARE &&\n      dot(vPosition - vCenter, vTangent) > 0.\n    ) {\n      discard;\n    }\n    // Use full area for PROJECT\n  } else if (vJoin > 0.) {\n    if (\n      uStrokeJoin == STROKE_JOIN_ROUND &&\n      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25\n    ) {\n      discard;\n    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 normal = vec2(-vTangent.y, vTangent.x);\n      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {\n        discard;\n      }\n    }\n    // Use full area for MITER\n  }\n  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",pointVert:"IN vec3 aPosition;\nuniform float uPointSize;\nOUT float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvoid main() {\n\tvec4 positionVec4 =  vec4(aPosition, 1.0);\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\tgl_PointSize = uPointSize;\n\tvStrokeWeight = uPointSize;\n}\n",pointFrag:"precision mediump int;\nuniform vec4 uMaterialColor;\nIN float vStrokeWeight;\n\nvoid main(){\n  float mask = 0.0;\n\n  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n  // if strokeWeight is 1 or less lets just draw a square\n  // this prevents weird artifacting from carving circles when our points are really small\n  // if strokeWeight is larger than 1, we just use it as is\n\n  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n  // throw away the borders of the mask\n  // otherwise we get weird alpha blending issues\n\n  if(mask > 0.98){\n    discard;\n  }\n\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n}\n",imageLightVert:"precision highp float;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nvarying vec3 localPos;\nvarying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\nvarying vec2 vTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n  \n  // orient the normals and pass to the fragment shader\n  vWorldNormal = uNormalMatrix * aNormal;\n  \n  // send the view position to the fragment shader\n  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;\n  \n  localPos = vWorldPosition;\n  vTexCoord = aTexCoord;\n}\n\n\n/*\nin the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.\n*/\n",imageLightDiffusedFrag:"precision highp float;\nvarying vec3 localPos;\n\n// the HDR cubemap converted (can be from an equirectangular environment map.)\nuniform sampler2D environmentMap;\nvarying vec2 vTexCoord;\n\nconst float PI = 3.14159265359;\n\nvec2 nTOE( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( phi, theta );\n  return angles;\n}\n\nvoid main()\n{   \t \n\t// the sample direction equals the hemisphere's orientation\n  float phi = vTexCoord.x * 2.0 * PI;\n  float theta = vTexCoord.y * PI;\n  float x = sin(theta) * cos(phi);\n  float y = sin(theta) * sin(phi);\n  float z = cos(theta);\n  vec3 normal = vec3( x, y, z);\n\n\t// Discretely sampling the hemisphere given the integral's\n  // spherical coordinates translates to the following fragment code:\n\tvec3 irradiance = vec3(0.0);  \n\tvec3 up\t= vec3(0.0, 1.0, 0.0);\n\tvec3 right = normalize(cross(up, normal));\n\tup = normalize(cross(normal, right));\n\n\t//  We specify a fixed sampleDelta delta value to traverse\n  // the hemisphere; decreasing or increasing the sample delta\n  // will increase or decrease the accuracy respectively.\n\tconst float sampleDelta = 0.025;\n\tfloat nrSamples = 0.0;\n  \n\tfor(float phi = 0.0; phi < 2.0 * PI; phi += sampleDelta)\n\t{\n    for(float theta = 0.0; theta < ( 0.5 ) * PI; theta += sampleDelta)\n    {\n      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance\n      float x = sin(theta) * cos(phi);\n      float y = sin(theta) * sin(phi);\n      float z = cos(theta);\n      vec3 tangentSample = vec3( x, y, z);\n      \n      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;\n        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);\n      nrSamples++;\n    }\n\t}\n\t// divide by the total number of samples taken, giving us the average sampled irradiance.\n\tirradiance = PI * irradiance * (1.0 / float(nrSamples )) ;\n  \n \n\tgl_FragColor = vec4(irradiance, 1.0);\n}",imageLightSpecularFrag:"precision highp float;\r\nvarying vec3 localPos;\r\nvarying vec2 vTexCoord;\r\n\r\n// our texture\r\nuniform sampler2D environmentMap;\r\nuniform float roughness;\r\n\r\nconst float PI = 3.14159265359;\r\n\r\nfloat VanDerCorput(int bits);\r\nvec2 HammersleyNoBitOps(int i, int N);\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r\n\r\n\r\nvec2 nTOE( vec3 v ){\r\n  // x = r sin(phi) cos(theta)   \r\n  // y = r cos(phi)  \r\n  // z = r sin(phi) sin(theta)\r\n  float phi = acos( v.y );\r\n  // if phi is 0, then there are no x, z components\r\n  float theta = 0.0;\r\n  // else \r\n  theta = acos(v.x / sin(phi));\r\n  float sinTheta = v.z / sin(phi);\r\n  if (sinTheta < 0.0) {\r\n    // Turn it into -theta, but in the 0-2PI range\r\n    theta = 2.0 * PI - theta;\r\n  }\r\n  theta = theta / (2.0 * 3.14159);\r\n  phi = phi / 3.14159 ;\r\n  \r\n  vec2 angles = vec2( phi, theta );\r\n  return angles;\r\n}\r\n\r\n\r\nvoid main(){\r\n  const int SAMPLE_COUNT = 1024; // 4096\r\n  float totalWeight = 0.0;\r\n  vec3 prefilteredColor = vec3(0.0);\r\n  float phi = vTexCoord.x * 2.0 * PI;\r\n  float theta = vTexCoord.y * PI;\r\n  float x = sin(theta) * cos(phi);\r\n  float y = sin(theta) * sin(phi);\r\n  float z = cos(theta);\r\n  vec3 N = vec3(x,y,z);\r\n  vec3 V = N;\r\n  for (int i = 0; i < SAMPLE_COUNT; ++i)\r\n  {\r\n    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r\n    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r\n    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r\n\r\n    float NdotL = max(dot(N, L), 0.0);\r\n    if (NdotL > 0.0)\r\n    {\r\n      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r\n      totalWeight += NdotL;\r\n    }\r\n  }\r\n  prefilteredColor = prefilteredColor / totalWeight;\r\n\r\n  gl_FragColor = vec4(prefilteredColor, 1.0);\r\n}\r\n\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r\n  float a = roughness * roughness;\r\n\r\n  float phi = 2.0 * PI * Xi.x;\r\n  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r\n  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r\n  // from spherical coordinates to cartesian coordinates\r\n  vec3 H;\r\n  H.x = cos(phi) * sinTheta;\r\n  H.y = sin(phi) * sinTheta;\r\n  H.z = cosTheta;\r\n\r\n  // from tangent-space vector to world-space sample vector\r\n  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r\n  vec3 tangent = normalize(cross(up, N));\r\n  vec3 bitangent = cross(N, tangent);\r\n\r\n  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r\n  return normalize(sampleVec);\r\n}\r\n\r\n\r\nfloat VanDerCorput(int n, int base)\r\n{\r\n  float invBase = 1.0 / float(base);\r\n  float denom = 1.0;\r\n  float result = 0.0;\r\n\r\n  for (int i = 0; i < 32; ++i)\r\n  {\r\n\tif (n > 0)\r\n\t{\r\n  \tdenom = mod(float(n), 2.0);\r\n  \tresult += denom * invBase;\r\n  \tinvBase = invBase / 2.0;\r\n  \tn = int(float(n) / 2.0);\r\n\t}\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nvec2 HammersleyNoBitOps(int i, int N)\r\n{\r\n  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r\n}\r\n"};for(x in M)M[x]="#ifdef WEBGL2\n\n#define IN in\n#define OUT out\n\n#ifdef FRAGMENT_SHADER\nout vec4 outColor;\n#define OUT_COLOR outColor\n#endif\n#define TEXTURE texture\n\n#else\n\n#ifdef FRAGMENT_SHADER\n#define IN varying\n#else\n#define IN attribute\n#endif\n#define OUT varying\n#define TEXTURE texture2D\n\n#ifdef FRAGMENT_SHADER\n#define OUT_COLOR gl_FragColor\n#endif\n\n#endif\n"+M[x];j(e={},l.GRAY,"precision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 tex = texture2D(tex0, vTexCoord);\n  float gray = luma(tex.rgb);\n  gl_FragColor = vec4(gray, gray, gray, tex.a);\n}\n"),j(e,l.ERODE,"// Reduces the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the darkest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum < lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),j(e,l.DILATE,"// Increase the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the brightest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum > lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),j(e,l.BLUR,"precision highp float;\n\n// Two-pass blur filter, unweighted kernel.\n// See also a similar blur at Adam Ferriss' repo of shader examples:\n// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag\n\n\nuniform sampler2D tex0;\nvarying vec2 vTexCoord;\nuniform vec2 direction;\nuniform vec2 canvasSize;\nuniform float radius;\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\n// This isn't a real Gaussian weight, it's a quadratic weight. It's what the\n// CPU mode's blur uses though, so we also use it here to match.\nfloat quadWeight(float x, float e) {\n  return pow(e-abs(x), 2.);\n}\n\nvoid main(){\n  vec2 uv = vTexCoord;\n\n  // A reasonable maximum number of samples\n  const float maxSamples = 64.0;\n\n  float numSamples = floor(7. * radius);\n  if (fract(numSamples / 2.) == 0.) {\n    numSamples++;\n  }\n  vec4 avg = vec4(0.0);\n  float total = 0.0;\n\n  // Calculate the spacing to avoid skewing if numSamples > maxSamples\n  float spacing = 1.0;\n  if (numSamples > maxSamples) {\n    spacing = numSamples / maxSamples;\n    numSamples = maxSamples;\n  }\n\n  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));\n  for (float i = 0.0; i < maxSamples; i++) {\n    if (i >= numSamples) break;\n\n    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;\n    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;\n    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);\n\n    avg += weight * texture2D(tex0, sampleCoord);\n    total += weight;\n  }\n\n  avg /= total;\n  gl_FragColor = avg;\n}\n"),j(e,l.POSTERIZE,"// Limit color space for a stylized cartoon / poster effect\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nvec3 quantize(vec3 color, float n) {\n  // restrict values to N options/bins\n  // and floor each channel to nearest value\n  //\n  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0\n  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)\n\n  color = color * n;\n  color = floor(color);\n  color = color / (n - 1.0);\n  return color;\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n\n  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);\n\n  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);\n}\n"),j(e,l.OPAQUE,"// Set alpha channel to entirely opaque\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  gl_FragColor = vec4(color.rgb / color.a, 1.0);\n}\n"),j(e,l.INVERT,"// Set each pixel to inverse value\n// Note that original INVERT does not change the opacity, so this follows suit\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\nvec4 color = texture2D(tex0, vTexCoord);\nvec3 origColor = color.rgb / color.a;\nvec3 invertedColor = vec3(1.0) - origColor;\ngl_FragColor = vec4(invertedColor * color.a, color.a);\n}\n"),j(e,l.THRESHOLD,"// Convert pixels to either white or black, \n// depending on if their luma is above or below filterParameter\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float gray = luma(color.rgb / color.a);\n  // floor() used to match src/image/filters.js\n  float threshold = floor(filterParameter * 255.0) / 255.0;\n  float blackOrWhite = step(threshold, gray);\n  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);\n}\n");var E=e;function k(e,t,r,o,n,s,i,a,l,u){var c=t.getParameter(t.FRAMEBUFFER_BINDING),r=(t.bindFramebuffer(t.FRAMEBUFFER,r),a===t.RGBA?4:3),d=s*i*r,h=l===t.UNSIGNED_BYTE?Uint8Array:Float32Array;if(e instanceof h&&e.length===d||(e=new h(d)),t.readPixels(o,u?u-n-i:n,s,i,a,l,e),t.bindFramebuffer(t.FRAMEBUFFER,c),u)for(var f=Math.floor(i/2),p=new h(s*r),m=0;m<f;m++){var y=m*s*4,g=(i-m-1)*s*4;p.set(e.subarray(y,y+4*s)),e.copyWithin(y,g,g+4*s),e.set(p,g);}return e}function C(e,t,r,o,n,s,i){var a=e.getParameter(e.FRAMEBUFFER_BINDING),t=(e.bindFramebuffer(e.FRAMEBUFFER,t),n===e.RGBA?4:3),t=new(s===e.UNSIGNED_BYTE?Uint8Array:Float32Array)(t);return e.readPixels(r,i?i-o-1:o,1,1,n,s,t),e.bindFramebuffer(e.FRAMEBUFFER,a),Array.from(t)}g.default.prototype.setAttributes=function(e,t){if(void 0===this._glAttributes)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else {var r=!0;if(void 0!==t?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[e]!==t&&(this._glAttributes[e]=t,r=!1)):e instanceof Object&&this._glAttributes!==e&&(this._glAttributes=e,r=!1),this._renderer.isP3D&&!r){if(!this._setupDone)for(var o in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(o))return void g.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer);}}},g.default.RendererGL=function(e){var t=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e);var n=y(s);function s(e,t,r,o){if(this instanceof s)return (e=n.call(this,e,t,r))._setAttributeDefaults(t),e._initContext(),e.isP3D=!0,e.geometryBuilder=void 0,e.GL=e.drawingContext,e._pInst._setProperty("drawingContext",e.drawingContext),e._isErasing=!1,e._clipDepths=[],e._isClipApplied=!1,e._stencilTestOn=!1,e._enableLighting=!1,e.ambientLightColors=[],e.specularColors=[1,1,1],e.directionalLightDirections=[],e.directionalLightDiffuseColors=[],e.directionalLightSpecularColors=[],e.pointLightPositions=[],e.pointLightDiffuseColors=[],e.pointLightSpecularColors=[],e.spotLightPositions=[],e.spotLightDirections=[],e.spotLightDiffuseColors=[],e.spotLightSpecularColors=[],e.spotLightAngle=[],e.spotLightConc=[],e.activeImageLight=null,e.diffusedTextures=new Map,e.specularTextures=new Map,e.drawMode=l.FILL,e.curFillColor=e._cachedFillStyle=[1,1,1,1],e.curAmbientColor=e._cachedFillStyle=[1,1,1,1],e.curSpecularColor=e._cachedFillStyle=[0,0,0,0],e.curEmissiveColor=e._cachedFillStyle=[0,0,0,0],e.curStrokeColor=e._cachedStrokeStyle=[0,0,0,1],e.curBlendMode=l.BLEND,e._cachedBlendMode=void 0,e.webglVersion===l.WEBGL2?e.blendExt=e.GL:e.blendExt=e.GL.getExtension("EXT_blend_minmax"),e._isBlending=!1,e._hasSetAmbient=!1,e._useSpecularMaterial=!1,e._useEmissiveMaterial=!1,e._useNormalMaterial=!1,e._useShininess=1,e._useLineColor=!1,e._useVertexColor=!1,e.registerEnabled=new Set,e._tint=[255,255,255,255],e.constantAttenuation=1,e.linearAttenuation=0,e.quadraticAttenuation=0,e.uMVMatrix=new g.default.Matrix,e.uPMatrix=new g.default.Matrix,e.uNMatrix=new g.default.Matrix("mat3"),e._currentNormal=new g.default.Vector(0,0,1),e._curCamera=new g.default.Camera(v(e)),e._curCamera._computeCameraDefaultSettings(),e._curCamera._setDefaultCamera(),e.filterCamera=new g.default.Camera(v(e)),e.filterCamera._computeCameraDefaultSettings(),e.filterCamera._setDefaultCamera(),e.prevTouches=[],e.zoomVelocity=0,e.rotateVelocity=new g.default.Vector(0,0),e.moveVelocity=new g.default.Vector(0,0),e.executeZoom=!1,e.executeRotateAndMove=!1,e._defaultLightShader=void 0,e._defaultImmediateModeShader=void 0,e._defaultNormalShader=void 0,e._defaultColorShader=void 0,e._defaultPointShader=void 0,e.userFillShader=void 0,e.userStrokeShader=void 0,e.userPointShader=void 0,e.retainedMode={geometry:{},buffers:{stroke:[new g.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",v(e)),new g.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",v(e)),new g.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",v(e)),new g.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",v(e)),new g.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",v(e))],fill:[new g.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",v(e),e._vToNArray),new g.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",v(e),e._vToNArray),new g.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",v(e)),new g.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",v(e)),new g.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",v(e),e._flatten)],text:[new g.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",v(e),e._vToNArray),new g.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",v(e),e._flatten)]}},e.immediateMode={geometry:new g.default.Geometry,shapeMode:l.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new g.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",v(e),e._vToNArray),new g.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",v(e),e._vToNArray),new g.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",v(e)),new g.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",v(e)),new g.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",v(e),e._flatten)],stroke:[new g.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",v(e)),new g.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",v(e)),new g.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",v(e)),new g.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",v(e)),new g.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",v(e))],point:e.GL.createBuffer()}},e.pointSize=5,e.curStrokeWeight=1,e.curStrokeCap=l.ROUND,e.curStrokeJoin=l.ROUND,e.textures=new Map,e.framebuffers=new Set,e.activeFramebuffers=[],e.filterShader=void 0,e.filterLayer=void 0,e.filterLayerTemp=void 0,e.defaultFilterShaders={},e.textureMode=l.IMAGE,e.textureWrapX=l.CLAMP,e.textureWrapY=l.CLAMP,e._tex=null,e._curveTightness=6,e._lookUpTableBezier=[],e._lookUpTableQuadratic=[],e._lutBezierDetail=0,e._lutQuadraticDetail=0,e.isProcessingVertices=!1,e._tessy=e._initTessy(),e.fontInfos={},e._curShader=void 0,e;throw new TypeError("Cannot call a class as a function")}return t=s,(e=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new a.default(this);}},{key:"endGeometry",value:function(){var e;if(this.geometryBuilder)return e=this.geometryBuilder.finish(),this.geometryBuilder=void 0,e;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(e){return this.beginGeometry(),e(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(e){var t={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};null===e._glAttributes?e._glAttributes=t:e._glAttributes=Object.assign(t,e._glAttributes);}},{key:"_initContext",value:function(){if(1!==this._pInst._glAttributes.version&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?l.WEBGL2:l.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),null===this.drawingContext)throw new Error("Error creating webgl context");var e=this.drawingContext;e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT);}},{key:"_resetContext",value:function(e,t){var r,o=this.width,n=this.height,s=this.canvas.id,i=this._pInst instanceof g.default.Graphics,s=(i?((r=this._pInst).canvas.parentNode.removeChild(r.canvas),r.canvas=document.createElement("canvas"),(r._pInst._userNode||document.body).appendChild(r.canvas),g.default.Element.call(r,r.canvas,r._pInst),r.width=o,r.height=n):((r=this.canvas)&&r.parentNode.removeChild(r),(r=document.createElement("canvas")).id=s,(this._pInst._userNode||document.body).appendChild(r),this._pInst.canvas=r,this.canvas=r),new g.default.RendererGL(this._pInst.canvas,this._pInst,!i));this._pInst._setProperty("_renderer",s),s.resize(o,n),s._applyDefaults(),i||this._pInst._elements.push(s),"function"==typeof t&&setTimeout(function(){t.apply(window._renderer,e);},0);}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST);}},{key:"background",value:function(){var e=(e=this._pInst).color.apply(e,arguments),t=e.levels[0]/255,r=e.levels[1]/255,o=e.levels[2]/255,e=e.levels[3]/255;this.clear(t,r,o,e);}},{key:"fill",value:function(e,t,r,o){var n=g.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=n._array,this.drawMode=l.FILL,this._useNormalMaterial=!1,this._tex=null;}},{key:"stroke",value:function(e,t,r,o){var n=g.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=n._array;}},{key:"strokeCap",value:function(e){this.curStrokeCap=e;}},{key:"strokeJoin",value:function(e){this.curStrokeJoin=e;}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(e,t){e.width===t.width&&e.height===t.height||e.resize(t.width,t.height),e.pixelDensity()!==t.pixelDensity()&&e.pixelDensity(t.pixelDensity());}},{key:"filter",value:function(){var e,t,r=this,o=this.getFilterLayer(),n=void 0,s=void 0,i=("string"==typeof(arguments.length<=0?void 0:arguments[0])?(s=arguments.length<=0?void 0:arguments[0],j(e={},l.BLUR,3),j(e,l.POSTERIZE,4),j(e,l.THRESHOLD,.5),n=s in(e=e)&&void 0===(arguments.length<=1?void 0:arguments[1])?e[s]:arguments.length<=1?void 0:arguments[1],s in this.defaultFilterShaders||(this.defaultFilterShaders[s]=new g.default.Shader(o._renderer,"uniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nattribute vec3 aPosition;\n// texcoords only come from p5 to vertex shader\n// so pass texcoords on to the fragment shader in a varying variable\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main() {\n  // transferring texcoords for the frag shader\n  vTexCoord = aTexCoord;\n\n  // copy position with a fourth coordinate for projection (1.0 is normal)\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n}\n",E[s])),this.filterShader=this.defaultFilterShaders[s]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),a=(this.matchSize(o,i),i!==this&&(this.filterCamera=this.getFilterLayer().createCamera()),o.draw(function(){return r._pInst.clear()}),[1/(i.width*i.pixelDensity()),1/(i.height*i.pixelDensity())]);s===l.BLUR?(t=this.getFilterLayerTemp(),this.matchSize(t,i),this._pInst.push(),this._pInst.noStroke(),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",a),this.filterShader.setUniform("canvasSize",[i.width,i.height]),this.filterShader.setUniform("radius",Math.max(1,n)),t.draw(function(){r.filterShader.setUniform("direction",[1,0]),r.filterShader.setUniform("tex0",i),r._pInst.clear(),r._pInst.shader(r.filterShader),r._pInst.rect(-i.width/2,-i.height/2,i.width,i.height);}),o.draw(function(){r.filterShader.setUniform("direction",[0,1]),r.filterShader.setUniform("tex0",t),r._pInst.clear(),r._pInst.shader(r.filterShader),r._pInst.rect(-i.width/2,-i.height/2,i.width,i.height);}),this._pInst.pop()):o.draw(function(){r._pInst.noStroke(),r._pInst.shader(r.filterShader),r.filterShader.setUniform("tex0",i),r.filterShader.setUniform("texelSize",a),r.filterShader.setUniform("canvasSize",[i.width,i.height]),r.filterShader.setUniform("filterParameter",n),r._pInst.rect(-i.width/2,-i.height/2,i.width,i.height);}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(l.CORNER),this._pInst.blendMode(l.BLEND),this.filterCamera._resize(),this._pInst.setCamera(this.filterCamera),this._pInst.resetMatrix(),this._pInst.image(o,-this.width/2,-this.height/2,this.width,this.height),this._pInst.pop(),this._pInst.pop();}},{key:"pixelDensity",value:function(e){return e?this._pInst.pixelDensity(e):this._pInst.pixelDensity()}},{key:"blendMode",value:function(e){e===l.DARKEST||e===l.LIGHTEST||e===l.ADD||e===l.BLEND||e===l.SUBTRACT||e===l.SCREEN||e===l.EXCLUSION||e===l.REPLACE||e===l.MULTIPLY||e===l.REMOVE?this.curBlendMode=e:e!==l.BURN&&e!==l.OVERLAY&&e!==l.HARD_LIGHT&&e!==l.SOFT_LIGHT&&e!==l.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.");}},{key:"erase",value:function(e,t){this._isErasing||(this._cachedBlendMode=this.curBlendMode,this._isErasing=!0,this.blendMode(l.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,e/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,t/255]);}},{key:"noErase",value:function(){var e;this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),e=this.curBlendMode,this.blendMode(this._cachedBlendMode),this._cachedBlendMode=e,this._isErasing=!1,this._applyBlendMode());}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=(p(b(s.prototype),"beginClip",this).call(this,e),this.drawTarget()._isClipApplied=!0,this.GL);e.clearStencil(0),e.clear(e.STENCIL_BUFFER_BIT),e.enable(e.STENCIL_TEST),this._stencilTestOn=!0,e.stencilFunc(e.ALWAYS,1,255),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.disable(e.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0);}},{key:"endClip",value:function(){this._pInst.pop();var e=this.GL;e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.stencilFunc(this._clipInvert?e.EQUAL:e.NOTEQUAL,0,255),e.enable(e.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),p(b(s.prototype),"endClip",this).call(this);}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1;}},{key:"strokeWeight",value:function(e){this.curStrokeWeight!==e&&(this.pointSize=e,this.curStrokeWeight=e);}},{key:"_getPixel",value:function(e,t){var r=this.GL;return C(r,null,e,t,r.RGBA,r.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var e,t,r=this._pixelsState;!0!==this._pInst._glAttributes.preserveDrawingBuffer?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(e=this._pInst._pixelDensity,t=this.GL,r._setProperty("pixels",k(r.pixels,t,null,0,0,this.width*e,this.height*e,t.RGBA,t.UNSIGNED_BYTE,this.height*e)));}},{key:"updatePixels",value:function(){var e=this._getTempFramebuffer();e.pixels=this._pixelsState.pixels,e.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(l.CENTER),this._pInst.image(e,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT);}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:l.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:l.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(e){return void 0!==this.retainedMode.geometry[e]}},{key:"viewport",value:function(e,t){this._viewport=[0,0,e,t],this.GL.viewport(0,0,e,t);}},{key:"resize",value:function(t,r){g.default.Renderer.prototype.resize.call(this,t,r),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var t=this._pixelsState,e=(void 0!==t.pixels&&t._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),r=!1,t=void 0;try{for(var o,n=this.framebuffers[Symbol.iterator]();!(e=(o=n.next()).done);e=!0)o.value._canvasSizeChanged();}catch(e){r=!0,t=e;}finally{try{e||null==n.return||n.return();}finally{if(r)throw t}}}},{key:"clear",value:function(){var e=(arguments.length<=0?void 0:arguments[0])||0,t=(arguments.length<=1?void 0:arguments[1])||0,r=(arguments.length<=2?void 0:arguments[2])||0,o=(arguments.length<=3?void 0:arguments[3])||0,n=this.activeFramebuffer();n&&n.format===l.UNSIGNED_BYTE&&!n.antialias&&0===o&&(o=1e-10),this.GL.clearColor(e*o,t*o,r*o,o),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT);}},{key:"applyMatrix",value:function(e,t,r,o,n,s){16===arguments.length?g.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([e,t,0,0,r,o,0,0,0,0,1,0,n,s,0,1]);}},{key:"translate",value:function(e,t,r){return e instanceof g.default.Vector&&(r=e.z,t=e.y,e=e.x),this.uMVMatrix.translate([e,t,r]),this}},{key:"scale",value:function(e,t,r){return this.uMVMatrix.scale(e,t,r),this}},{key:"rotate",value:function(e,t){return void 0===t?this.rotateZ(e):(g.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(e){return this.rotate(e,1,0,0),this}},{key:"rotateY",value:function(e){return this.rotate(e,0,1,0),this}},{key:"rotateZ",value:function(e){return this.rotate(e,0,0,1),this}},{key:"push",value:function(){var e=g.default.Renderer.prototype.push.apply(this),t=e.properties;return t.uMVMatrix=this.uMVMatrix.copy(),t.uPMatrix=this.uPMatrix.copy(),t._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),t.ambientLightColors=this.ambientLightColors.slice(),t.specularColors=this.specularColors.slice(),t.directionalLightDirections=this.directionalLightDirections.slice(),t.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),t.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),t.pointLightPositions=this.pointLightPositions.slice(),t.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),t.pointLightSpecularColors=this.pointLightSpecularColors.slice(),t.spotLightPositions=this.spotLightPositions.slice(),t.spotLightDirections=this.spotLightDirections.slice(),t.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),t.spotLightSpecularColors=this.spotLightSpecularColors.slice(),t.spotLightAngle=this.spotLightAngle.slice(),t.spotLightConc=this.spotLightConc.slice(),t.userFillShader=this.userFillShader,t.userStrokeShader=this.userStrokeShader,t.userPointShader=this.userPointShader,t.pointSize=this.pointSize,t.curStrokeWeight=this.curStrokeWeight,t.curStrokeColor=this.curStrokeColor,t.curFillColor=this.curFillColor,t.curAmbientColor=this.curAmbientColor,t.curSpecularColor=this.curSpecularColor,t.curEmissiveColor=this.curEmissiveColor,t._hasSetAmbient=this._hasSetAmbient,t._useSpecularMaterial=this._useSpecularMaterial,t._useEmissiveMaterial=this._useEmissiveMaterial,t._useShininess=this._useShininess,t.constantAttenuation=this.constantAttenuation,t.linearAttenuation=this.linearAttenuation,t.quadraticAttenuation=this.quadraticAttenuation,t._enableLighting=this._enableLighting,t._useNormalMaterial=this._useNormalMaterial,t._tex=this._tex,t.drawMode=this.drawMode,t._currentNormal=this._currentNormal,t.curBlendMode=this.curBlendMode,t.activeImageLight=this.activeImageLight,e}},{key:"pop",value:function(){var e;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=p(b(s.prototype),"pop",this)).call.apply(e,[this].concat(r)),this._applyStencilTestIfClipping();}},{key:"_applyStencilTestIfClipping",value:function(){var e=this.drawTarget();e._isClipApplied!==this._stencilTestOn&&(e._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1));}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this}},{key:"_getImmediateStrokeShader",value:function(){var e=this.userStrokeShader;return e&&e.isStrokeShader()?e:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getImmediateFillShader",value:function(){var e=this.userFillShader;if(this._useNormalMaterial&&(!e||!e.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getImmediateModeShader();return e}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var e=this.userFillShader;if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getColorShader();return e}},{key:"_getImmediatePointShader",value:function(){var e=this.userPointShader;return e&&e.isPointShader()?e:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new g.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+M.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+M.phongFrag):this._defaultLightShader=new g.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+M.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+M.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new g.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+M.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+M.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new g.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+M.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+M.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new g.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+M.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+M.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new g.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+M.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+M.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new g.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+M.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+M.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===l.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new g.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+M.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+M.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(e,t){var r="";return this.webglVersion===l.WEBGL2&&(r+="#version 300 es\n#define WEBGL2\n"),"vert"===e?r+="#define VERTEX_SHADER\n":"frag"===e&&(r+="#define FRAGMENT_SHADER\n"),t&&(r+="precision ".concat(t," float;\n")),r}},{key:"_getEmptyTexture",value:function(){var e;return this._emptyTexture||((e=new g.default.Image(1,1)).set(0,0,255),this._emptyTexture=new g.default.Texture(this,e)),this._emptyTexture}},{key:"getTexture",value:function(e){e instanceof g.default.Framebuffer&&(e=e.color);var t=this.textures.get(e);return t||(t=new g.default.Texture(this,e),this.textures.set(e,t),t)}},{key:"getDiffusedTexture",value:function(e){var t,r;return null!=this.diffusedTextures.get(e)?this.diffusedTextures.get(e):(t=Math.floor(e.height/e.width*200),r=(t=this._pInst.createGraphics(200,t,l.WEBGL)).createShader(M.imageLightVert,M.imageLightDiffusedFrag),t.shader(r),r.setUniform("environmentMap",e),t.noStroke(),t.rectMode(t.CENTER),t.rect(0,0,t.width,t.height),this.diffusedTextures.set(e,t),t)}},{key:"getSpecularTexture",value:function(e){if(null!=this.specularTextures.get(e))return this.specularTextures.get(e);var t,r=[],o=this._pInst.createGraphics(512,512,l.WEBGL),n=Math.log(512)/Math.log(2);o.pixelDensity(1);for(var s=512;1<=s;s/=2){o.resizeCanvas(s,s);var i=1-Math.log(s)/Math.log(2)/n,a=o.createShader(M.imageLightVert,M.imageLightSpecularFrag);o.shader(a),o.clear(),a.setUniform("environmentMap",e),a.setUniform("roughness",i),o.noStroke(),o.plane(s,s),r.push(o.get().drawingContext.getImageData(0,0,s,s));}return o.remove(),t=new c.MipmapTexture(this,r,{}),this.specularTextures.set(e,t),t}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(e){return new g.default.Framebuffer(this,e)}},{key:"_setStrokeUniforms",value:function(e){e.bindShader(),e.setUniform("uUseLineColor",this._useLineColor),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uStrokeWeight",this.curStrokeWeight),e.setUniform("uStrokeCap",w[this.curStrokeCap]),e.setUniform("uStrokeJoin",S[this.curStrokeJoin]);}},{key:"_setFillUniforms",value:function(e){e.bindShader(),e.setUniform("uUseVertexColor",this._useVertexColor),e.setUniform("uMaterialColor",this.curFillColor),e.setUniform("isTexture",!!this._tex),this._tex&&e.setUniform("uSampler",this._tex),e.setUniform("uTint",this._tint),e.setUniform("uHasSetAmbient",this._hasSetAmbient),e.setUniform("uAmbientMatColor",this.curAmbientColor),e.setUniform("uSpecularMatColor",this.curSpecularColor),e.setUniform("uEmissiveMatColor",this.curEmissiveColor),e.setUniform("uSpecular",this._useSpecularMaterial),e.setUniform("uEmissive",this._useEmissiveMaterial),e.setUniform("uShininess",this._useShininess),this._setImageLightUniforms(e),e.setUniform("uUseLighting",this._enableLighting);var t=this.pointLightDiffuseColors.length/3,t=(e.setUniform("uPointLightCount",t),e.setUniform("uPointLightLocation",this.pointLightPositions),e.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),e.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),t=(e.setUniform("uDirectionalLightCount",t),e.setUniform("uLightingDirection",this.directionalLightDirections),e.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),e.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),t=(e.setUniform("uAmbientLightCount",t),e.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);e.setUniform("uSpotLightCount",t),e.setUniform("uSpotLightAngle",this.spotLightAngle),e.setUniform("uSpotLightConc",this.spotLightConc),e.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),e.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),e.setUniform("uSpotLightLocation",this.spotLightPositions),e.setUniform("uSpotLightDirection",this.spotLightDirections),e.setUniform("uConstantAttenuation",this.constantAttenuation),e.setUniform("uLinearAttenuation",this.linearAttenuation),e.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),e.bindTextures();}},{key:"_setImageLightUniforms",value:function(e){var t,r;e.setUniform("uUseImageLight",null!=this.activeImageLight),this.activeImageLight&&(t=this.getDiffusedTexture(this.activeImageLight),e.setUniform("environmentMapDiffused",t),t=this.getSpecularTexture(this.activeImageLight),r=20/this._useShininess,e.setUniform("levelOfDetail",8*r),e.setUniform("environmentMapSpecular",t));}},{key:"_setPointUniforms",value:function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity);}},{key:"_bindBuffer",value:function(e,t,r,o,n){t=t||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(t,e),void 0!==r&&((e=r)instanceof g.default.DataArray?e=r.dataArray():e instanceof(o||Float32Array)||(e=new(o||Float32Array)(e)),this.GL.bufferData(t,e,n||this.GL.STATIC_DRAW));}},{key:"_arraysEqual",value:function(e,r){return e.length===r.length&&e.every(function(e,t){return e===r[t]})}},{key:"_isTypedArray",value:function(t){return [Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(e){return t instanceof e})}},{key:"_flatten",value:function(e){if(0===e.length)return [];var t;if(2e4<e.length){for(var r=[],o=e.slice(),n=o.pop();Array.isArray(n)?o.push.apply(o,h(n)):r.push(n),o.length&&void 0!==(n=o.pop()););return r.reverse(),r}return (t=[]).concat.apply(t,h(e))}},{key:"_vToNArray",value:function(e){var t=[],r=!0,o=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var a=s.value;t.push(a.x,a.y,a.z);}}catch(e){o=!0,n=e;}finally{try{r||null==i.return||i.return();}finally{if(o)throw n}}return t}},{key:"_bezierCoefficients",value:function(e){var t=e*e,r=1-e,o=r*r;return [o*r,3*o*e,3*r*t,t*e]}},{key:"_quadraticCoefficients",value:function(e){var t=1-e;return [t*t,2*t*e,e*e]}},{key:"_bezierToCatmull",value:function(e){return [e[1],e[1]+(e[2]-e[0])/this._curveTightness,e[2]-(e[3]-e[1])/this._curveTightness,e[2]]}},{key:"_initTessy",value:function(){var e=new u.default.GluTesselator;return e.gluTessCallback(u.default.gluEnum.GLU_TESS_VERTEX_DATA,function(e,t){for(var r=0;r<e.length;r++)t.push(e[r]);}),e.gluTessCallback(u.default.gluEnum.GLU_TESS_BEGIN,function(e){e!==u.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(e));}),e.gluTessCallback(u.default.gluEnum.GLU_TESS_ERROR,function(e){console.log("error callback"),console.log("error number: ".concat(e));}),e.gluTessCallback(u.default.gluEnum.GLU_TESS_COMBINE,function(e,t,r){for(var o=new Array(g.default.RendererGL.prototype.tessyVertexSize).fill(0),n=0;n<r.length;n++)for(var s=0;s<o.length;s++)0!==r[n]&&t[n]&&(o[s]+=t[n][s]*r[n]);return o}),e.gluTessCallback(u.default.gluEnum.GLU_TESS_EDGE_FLAG,function(e){}),e.gluTessProperty(u.default.gluEnum.GLU_TESS_WINDING_RULE,u.default.windingRule.GLU_TESS_WINDING_NONZERO),e}},{key:"_triangulate",value:function(e){var t=e[0]?e[0][2]:void 0,r=!0,o=!0,n=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(o=(i=a.next()).done);o=!0)for(var l=i.value,u=0;u<l.length;u+=g.default.RendererGL.prototype.tessyVertexSize)if(l[u+2]!==t){r=!1;break}}catch(e){n=!0,s=e;}finally{try{o||null==a.return||a.return();}finally{if(n)throw s}}r?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var n=[],c=(this._tessy.gluTessBeginPolygon(n),!0),s=!1,d=void 0;try{for(var h,f=e[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value;this._tessy.gluTessBeginContour();for(var m=0;m<p.length;m+=g.default.RendererGL.prototype.tessyVertexSize){var y=p.slice(m,m+g.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(y,y);}this._tessy.gluTessEndContour();}}catch(e){s=!0,d=e;}finally{try{c||null==f.return||f.return();}finally{if(s)throw d}}return this._tessy.gluTessEndPolygon(),n}}])&&f(t.prototype,e),s}(g.default.Renderer),g.default.prototype._assert3d=function(e){if(!this._renderer.isP3D)throw new Error("".concat(e,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},g.default.RendererGL.prototype.tessyVertexSize=12;e=g.default.RendererGL;r.default=e;},{"../core/constants":264,"../core/main":275,"../core/p5.Renderer":278,"./GeometryBuilder":319,"./p5.Camera":324,"./p5.Framebuffer":326,"./p5.Matrix":328,"./p5.Shader":333,"./p5.Texture":334,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.every":153,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":158,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.map":169,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.float64-array":212,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.int16-array":216,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint16-array":232,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,libtess:247,path:250}],333:[function(e,t,r){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=(e=e("../core/main"))&&e.__esModule?e:{default:e};function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}s.default.Shader=function(){function o(e,t,r){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this._renderer=e,this._vertSrc=t,this._fragSrc=r,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[];}var e,t;return e=o,(t=[{key:"init",value:function(){if(0===this._glProgram){var e=this._renderer.GL;if(this._vertShader=e.createShader(e.VERTEX_SHADER),e.shaderSource(this._vertShader,this._vertSrc),e.compileShader(this._vertShader),!e.getShaderParameter(this._vertShader,e.COMPILE_STATUS))return s.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(e.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(this._fragShader,this._fragSrc),e.compileShader(this._fragShader),!e.getShaderParameter(this._fragShader,e.COMPILE_STATUS))return s.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(e.getShaderInfoLog(this._fragShader))),null;this._glProgram=e.createProgram(),e.attachShader(this._glProgram,this._vertShader),e.attachShader(this._glProgram,this._fragShader),e.linkProgram(this._glProgram),e.getProgramParameter(this._glProgram,e.LINK_STATUS)||s.default._friendlyError("Snap! Error linking shader program: ".concat(e.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms();}return this}},{key:"copyToContext",value:function(e){var t=new s.default.Shader(e._renderer,this._vertSrc,this._fragSrc);return t.ensureCompiledOnContext(e),t}},{key:"ensureCompiledOnContext",value:function(e){if(0!==this._glProgram&&this._renderer!==e._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");0===this._glProgram&&(this._renderer=e._renderer,this.init());}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_ATTRIBUTES),r=0;r<t;++r){var o=e.getActiveAttrib(this._glProgram,r),n=o.name,s=e.getAttribLocation(this._glProgram,n),i={};i.name=n,i.location=s,i.index=r,i.type=o.type,i.size=o.size,this.attributes[n]=i;}this._loadedAttributes=!0;}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_UNIFORMS),r=0,o=0;o<t;++o){var n=e.getActiveUniform(this._glProgram,o),s={},i=(s.location=e.getUniformLocation(this._glProgram,n.name),s.size=n.size,n.name);1<n.size&&(i=i.substring(0,i.indexOf("[0]"))),s.name=i,s.type=n.type,s._cachedData=void 0,s.type===e.SAMPLER_2D&&(s.samplerIndex=r,r++,this.samplers.push(s)),s.isArray=1<n.size||s.type===e.FLOAT_MAT3||s.type===e.FLOAT_MAT4||s.type===e.FLOAT_VEC2||s.type===e.FLOAT_VEC3||s.type===e.FLOAT_VEC4||s.type===e.INT_VEC2||s.type===e.INT_VEC4||s.type===e.INT_VEC3,this.uniforms[i]=s;}this._loadedUniforms=!0;}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport));}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var e=this._renderer.GL,t=!0,r=!1,o=void 0;try{for(var n,s=this.samplers[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value,a=i.texture;void 0===a&&(a=this._renderer._getEmptyTexture()),e.activeTexture(e.TEXTURE0+i.samplerIndex),a.bindTexture(),a.update(),e.uniform1i(i.location,i.samplerIndex);}}catch(e){r=!0,o=e;}finally{try{t||null==s.return||s.return();}finally{if(r)throw o}}}},{key:"updateTextures",value:function(){var e=!0,t=!1,r=void 0;try{for(var o,n=this.samplers[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var s=o.value.texture;s&&s.update();}}catch(e){t=!0,r=e;}finally{try{e||null==n.return||n.return();}finally{if(t)throw r}}}},{key:"unbindTextures",value:function(){var e=!0,t=!1,r=void 0;try{for(var o,n=this.samplers[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var s=o.value;this.setUniform(s.name,this._renderer._getEmptyTexture());}}catch(e){t=!0,r=e;}finally{try{e||null==n.return||n.return();}finally{if(t)throw r}}}},{key:"_setMatrixUniforms",value:function(){var e=this._renderer._curCamera.cameraMatrix,t=this._renderer.uPMatrix,r=this._renderer.uMVMatrix,o=r.copy();o.mult(t),this.isStrokeShader()&&("default"===this._renderer._curCamera.cameraType?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",e.mat4),this.setUniform("uProjectionMatrix",t.mat4),this.setUniform("uModelViewMatrix",r.mat4),this.setUniform("uModelViewProjectionMatrix",o.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3));}},{key:"useProgram",value:function(){var e=this._renderer.GL;return this._renderer._curShader!==this&&(e.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(e,t){var r=this.uniforms[e];if(r){var o=this._renderer.GL;if(r.isArray){if(r._cachedData&&this._renderer._arraysEqual(r._cachedData,t))return;r._cachedData=t.slice(0);}else {if(r._cachedData&&r._cachedData===t)return;Array.isArray(t)?r._cachedData=t.slice(0):r._cachedData=t;}var n=r.location;switch(this.useProgram(),r.type){case o.BOOL:!0===t?o.uniform1i(n,1):o.uniform1i(n,0);break;case o.INT:1<r.size?t.length&&o.uniform1iv(n,t):o.uniform1i(n,t);break;case o.FLOAT:1<r.size?t.length&&o.uniform1fv(n,t):o.uniform1f(n,t);break;case o.FLOAT_MAT3:o.uniformMatrix3fv(n,!1,t);break;case o.FLOAT_MAT4:o.uniformMatrix4fv(n,!1,t);break;case o.FLOAT_VEC2:1<r.size?t.length&&o.uniform2fv(n,t):o.uniform2f(n,t[0],t[1]);break;case o.FLOAT_VEC3:1<r.size?t.length&&o.uniform3fv(n,t):o.uniform3f(n,t[0],t[1],t[2]);break;case o.FLOAT_VEC4:1<r.size?t.length&&o.uniform4fv(n,t):o.uniform4f(n,t[0],t[1],t[2],t[3]);break;case o.INT_VEC2:1<r.size?t.length&&o.uniform2iv(n,t):o.uniform2i(n,t[0],t[1]);break;case o.INT_VEC3:1<r.size?t.length&&o.uniform3iv(n,t):o.uniform3i(n,t[0],t[1],t[2]);break;case o.INT_VEC4:1<r.size?t.length&&o.uniform4iv(n,t):o.uniform4i(n,t[0],t[1],t[2],t[3]);break;case o.SAMPLER_2D:o.activeTexture(o.TEXTURE0+r.samplerIndex),r.texture=t instanceof s.default.Texture?t:this._renderer.getTexture(t),o.uniform1i(n,r.samplerIndex),r.texture.src.gifProperties&&r.texture.src._animateGif(this._renderer._pInst);}return this}}},{key:"isLightShader",value:function(){return void 0!==this.attributes.aNormal||void 0!==this.uniforms.uUseLighting||void 0!==this.uniforms.uAmbientLightCount||void 0!==this.uniforms.uDirectionalLightCount||void 0!==this.uniforms.uPointLightCount||void 0!==this.uniforms.uAmbientColor||void 0!==this.uniforms.uDirectionalDiffuseColors||void 0!==this.uniforms.uDirectionalSpecularColors||void 0!==this.uniforms.uPointLightLocation||void 0!==this.uniforms.uPointLightDiffuseColors||void 0!==this.uniforms.uPointLightSpecularColors||void 0!==this.uniforms.uLightingDirection||void 0!==this.uniforms.uSpecular}},{key:"isNormalShader",value:function(){return void 0!==this.attributes.aNormal}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return void 0!==this.uniforms.uStrokeWeight}},{key:"enableAttrib",value:function(e,t,r,o,n,s){var i;return e&&-1!==(e=e.location)&&(i=this._renderer.GL,this._renderer.registerEnabled.has(e)||(i.enableVertexAttribArray(e),this._renderer.registerEnabled.add(e)),this._renderer.GL.vertexAttribPointer(e,t,r||i.FLOAT,o||!1,n||0,s||0)),this}},{key:"disableRemainingAttributes",value:function(){var r=this,e=!0,t=!1,o=void 0;try{for(var n,s=this._renderer.registerEnabled.values()[Symbol.iterator]();!(e=(n=s.next()).done);e=!0)!function(){var t=n.value;Object.keys(r.attributes).some(function(e){return r.attributes[e].location===t})||(r._renderer.GL.disableVertexAttribArray(t),r._renderer.registerEnabled.delete(t));}();}catch(e){t=!0,o=e;}finally{try{e||null==s.return||s.return();}finally{if(t)throw o}}}}])&&n(e.prototype,t),o}();e=s.default.Shader;r.default=e;},{"../core/main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.function.name":168,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],334:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.checkWebGLCapabilities=m,r.default=r.MipmapTexture=void 0;var s=(p=e("../core/main"))&&p.__esModule?p:{default:p},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=l();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function l(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,l=function(){return e},e)}function u(e,t){return (u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(r){return function(){var e,t=n(r),t=(e=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){}}}()?(e=n(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function n(e){return (n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function f(e,t,r){t&&h(e.prototype,t),r&&h(e,r);}s.default.Texture=function(){function n(e,t,r){d(this,n),this._renderer=e;var o=this._renderer.GL,r=(r=r||{},this.src=t,this.glTex=void 0,this.glTarget=o.TEXTURE_2D,this.glFormat=r.format||o.RGBA,this.mipmaps=!1,this.glMinFilter=r.minFilter||o.LINEAR,this.glMagFilter=r.magFilter||o.LINEAR,this.glWrapS=r.wrapS||o.CLAMP_TO_EDGE,this.glWrapT=r.wrapT||o.CLAMP_TO_EDGE,this.glDataType=r.dataType||o.UNSIGNED_BYTE,m(e)),e=(this.glFormat!==o.HALF_FLOAT||r.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=o.FLOAT),this.glFormat!==o.HALF_FLOAT||this.glMinFilter!==o.LINEAR&&this.glMagFilter!==o.LINEAR||r.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===o.LINEAR&&(this.glMinFilter=o.NEAREST),this.glMagFilter===o.LINEAR&&(this.glMagFilter=o.NEAREST)),this.glFormat!==o.FLOAT||r.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=o.UNSIGNED_BYTE),this.glFormat!==o.FLOAT||this.glMinFilter!==o.LINEAR&&this.glMagFilter!==o.LINEAR||r.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===o.LINEAR&&(this.glMinFilter=o.NEAREST),this.glMagFilter===o.LINEAR&&(this.glMagFilter=o.NEAREST)),this.isSrcMediaElement=void 0!==s.default.MediaElement&&t instanceof s.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==s.default.Element&&t instanceof s.default.Element&&!(t instanceof s.default.Graphics)&&!(t instanceof s.default.Renderer),this.isSrcP5Image=t instanceof s.default.Image,this.isSrcP5Graphics=t instanceof s.default.Graphics,this.isSrcP5Renderer=t instanceof s.default.Renderer,this.isImageData="undefined"!=typeof ImageData&&t instanceof ImageData,this.isFramebufferTexture=t instanceof s.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=e.width,this.height=e.height,this.init(e),this}return f(n,[{key:"_getTextureDataFromSource",value:function(){var e;return this.isFramebufferTexture?e=this.src.rawTexture():this.isSrcP5Image?e=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?e=this.src.elt:this.isImageData&&(e=this.src),e}},{key:"init",value:function(e){var t,r=this._renderer.GL;this.isFramebufferTexture||(this.glTex=r.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,this.glMagFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata?(t=new Uint8Array([1,1,1,1]),r.texImage2D(this.glTarget,0,r.RGBA,1,1,0,this.glFormat,this.glDataType,t)):r.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,e));}},{key:"update",value:function(){var e,t,r,o=this.src;return 0!==o.width&&0!==o.height&&(!this.isFramebufferTexture&&(e=this._getTextureDataFromSource(),t=!1,r=this._renderer.GL,e.width!==this.width||e.height!==this.height?(t=!0,this.width=e.width||o.width,this.height=e.height||o.height,this.isSrcP5Image?o.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&o.setModified(!0)):this.isSrcP5Image?o.isModified()&&o.setModified(!(t=!0)):this.isSrcMediaElement?o.isModified()?o.setModified(!(t=!0)):o.loadedmetadata&&this._videoPrevUpdateTime!==o.time()&&(this._videoPrevUpdateTime=o.time(),t=!0):this.isImageData?o._dirty&&(t=!(o._dirty=!1)):t=!0,t&&(this.bindTexture(),r.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,e)),t))}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null);}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(e,t){var r=this._renderer.GL;this.glMinFilter=this.glFilter(e),this.glMagFilter=this.glFilter(t),this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.glMinFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture();}},{key:"glFilter",value:function(e){var t=this._renderer.GL;return e===a.NEAREST?t.NEAREST:t.LINEAR}},{key:"setWrapMode",value:function(e,t){function r(e){return 0==(e&e-1)}var o=this._renderer.GL,n=this._getTextureDataFromSource(),n=n.naturalWidth&&n.naturalHeight?(s=n.naturalWidth,n.naturalHeight):(s=this.width,this.height),s=r(s),n=r(n);e===a.REPEAT?this._renderer.webglVersion===a.WEBGL2||s&&n?this.glWrapS=o.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=o.CLAMP_TO_EDGE):e===a.MIRROR?this._renderer.webglVersion===a.WEBGL2||s&&n?this.glWrapS=o.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=o.CLAMP_TO_EDGE):this.glWrapS=o.CLAMP_TO_EDGE,t===a.REPEAT?this._renderer.webglVersion===a.WEBGL2||s&&n?this.glWrapT=o.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=o.CLAMP_TO_EDGE):t===a.MIRROR?this._renderer.webglVersion===a.WEBGL2||s&&n?this.glWrapT=o.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=o.CLAMP_TO_EDGE):this.glWrapT=o.CLAMP_TO_EDGE,this.bindTexture(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,this.glWrapS),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture();}}]),n}();var p=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e);var o=c(n);function n(e,t,r){d(this,n);t=(e=o.call(this,e,t,r))._renderer.GL;return e.glMinFilter===t.LINEAR&&(e.glMinFilter=t.LINEAR_MIPMAP_LINEAR),e}return f(n,[{key:"glFilter",value:function(e){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(e){var t=this._renderer.GL;this.glTex=t.createTexture(),this.bindTexture();for(var r=0;r<e.length;r++)t.texImage2D(this.glTarget,r,this.glFormat,this.glFormat,this.glDataType,e[r]);this.glMinFilter=t.LINEAR_MIPMAP_LINEAR,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.glMagFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture();}},{key:"update",value:function(){}}]),n}(s.default.Texture);function m(e){var t=e.GL,e=e.webglVersion,r=e===a.WEBGL2?t.getExtension("EXT_color_buffer_float")&&t.getExtension("EXT_float_blend"):t.getExtension("OES_texture_float"),o=r&&t.getExtension("OES_texture_float_linear"),e=e===a.WEBGL2?t.getExtension("EXT_color_buffer_float"):t.getExtension("OES_texture_half_float");return {float:r,floatLinear:o,halfFloat:e,halfFloatLinear:e&&t.getExtension("OES_texture_half_float_linear")}}r.MipmapTexture=p;e=s.default.Texture;r.default=e;},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],335:[function(e,t,r){function o(e){return (o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return (i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var n,B=(n=e("../core/main"))&&n.__esModule?n:{default:n},M=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return {default:e};var t=a();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;Object.prototype.hasOwnProperty.call(e,r)&&((s=n?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]);}o.default=e,t&&t.set(e,o);return o}(e("../core/constants"));function a(){var e;return "function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}function V(e,t,r){t&&s(e.prototype,t),r&&s(e,r);}e("./p5.Shader"),e("./p5.RendererGL.Retained"),B.default.RendererGL.prototype._applyTextProperties=function(){},B.default.RendererGL.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):0};var l=function(){function r(e,t){G(this,r),this.width=e,this.height=t,this.infos=[];}return V(r,[{key:"findImage",value:function(e){var t,r,o=this.width*this.height;if(o<e)throw new Error("font is too complex to render in 3D");for(var n=this.infos.length-1;0<=n;--n){var s=this.infos[n];if(s.index+e<o){r=(t=s).imageData;break}}if(!t){try{r=new ImageData(this.width,this.height);}catch(e){var i=document.getElementsByTagName("canvas")[0],a=!i,l=(i||((i=document.createElement("canvas")).style.display="none",document.body.appendChild(i)),i.getContext("2d"));l&&(r=l.createImageData(this.width,this.height)),a&&document.body.removeChild(i);}this.infos.push(t={index:0,imageData:r});}l=t.index;return t.index+=e,r._dirty=!0,{imageData:r,index:l}}}]),r}();function z(e,t,r,o,n){var s=e.imageData.data,e=4*e.index++;s[e++]=t,s[e++]=r,s[e++]=o,s[+e]=n;}var H=Math.sqrt(3),E=function(){function t(e){G(this,t),this.font=e,this.strokeImageInfos=new l(64,64),this.colDimImageInfos=new l(64,64),this.rowDimImageInfos=new l(64,64),this.colCellImageInfos=new l(64,64),this.rowCellImageInfos=new l(64,64),this.glyphInfos={};}return V(t,[{key:"getGlyphInfo",value:function(e){var t=this.glyphInfos[e.index];if(!t){var r=e.getBoundingBox(),o=r.x1,n=r.y1,s=r.x2-o,i=r.y2-n,a=e.path.commands;if(0==s||0==i||!a.length)return this.glyphInfos[e.index]={};for(var u=[],c=[],d=[],l=8;0<=l;--l)d.push([]);for(l=8;0<=l;--l)c.push([]);var h,f,p,m,D=function(){function n(e,t,r,o){G(this,n),this.p0=e,this.c0=t,this.c1=r,this.p1=o;}return V(n,[{key:"toQuadratic",value:function(){return {x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return B.default.Vector.sub(B.default.Vector.sub(this.p1,this.p0),B.default.Vector.mult(B.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(e){var t=B.default.Vector.lerp(this.p0,this.c0,e),r=B.default.Vector.lerp(this.c0,this.c1,e),o=B.default.Vector.lerp(t,r,e),r=(this.c1=B.default.Vector.lerp(this.c1,this.p1,e),this.c0=B.default.Vector.lerp(r,this.c1,e),B.default.Vector.lerp(o,this.c0,e)),e=new n(this.p0,t,o,r);return this.p0=r,e}},{key:"splitInflections",value:function(){var e=B.default.Vector.sub(this.c0,this.p0),t=B.default.Vector.sub(B.default.Vector.sub(this.c1,this.c0),e),r=B.default.Vector.sub(B.default.Vector.sub(B.default.Vector.sub(this.p1,this.c1),e),B.default.Vector.mult(t,2)),o=[],n=t.x*r.y-t.y*r.x;return 0!==n&&0<=(e=(r=e.x*r.y-e.y*r.x)*r-4*n*(e.x*t.y-e.y*t.x))&&(n<0&&(n=-n,r=-r,0),e=(-r+(t=Math.sqrt(e)))/(2*n),0<(r=(-r-t)/(2*n))&&r<1&&(o.push(this.split(r)),e=1-(1-e)/(1-r)),0<e&&e<1&&o.push(this.split(e))),o.push(this),o}}]),n}(),y=!0,g=!1,v=void 0;try{for(var b,j=a[Symbol.iterator]();!(y=(b=j.next()).done);y=!0){var _=b.value,x=(_.x-o)/s,w=(_.y-n)/i;if(!U(h,f,x,w)){switch(_.type){case"M":p=x,m=w;break;case"L":I(h,f,x,w);break;case"Q":var S=(_.x1-o)/s,T=(_.y1-n)/i;L([h,x,S],[f,w,T],{x:h,y:f,cx:S,cy:T});break;case"Z":U(h,f,p,m)?u.push({x:h,y:f}):(I(h,f,p,m),u.push({x:p,y:m}));break;case"C":for(var M=function(e,t,r,o,n,s,i,a){var e=new D(new B.default.Vector(e,t),new B.default.Vector(r,o),new B.default.Vector(n,s),new B.default.Vector(i,a)).splitInflections(),l=[],u=30/H,c=!0,t=!1,r=void 0;try{for(var d,h=e[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){for(var f=d.value,p=[],m=void 0;!(.125<=(m=u/f.quadError()));){var y=Math.pow(m,1/3),g=f.split(y),v=f.split(1-y/(1-y));l.push(g),p.push(f),f=v;}m<1&&l.push(f.split(.5)),l.push(f),Array.prototype.push.apply(l,p.reverse());}}catch(e){t=!0,r=e;}finally{try{c||null==h.return||h.return();}finally{if(t)throw r}}return l}(h,f,(_.x1-o)/s,(_.y1-n)/i,(_.x2-o)/s,(_.y2-n)/i,x,w),E=0;E<M.length;E++){var k=M[E].toQuadratic();L([k.x,k.x1,k.cx],[k.y,k.y1,k.cy],k);}break;default:throw new Error("unknown command type: ".concat(_.type))}h=x,f=w;}}}catch(e){g=!0,v=e;}finally{try{y||null==j.return||j.return();}finally{if(g)throw v}}for(var C=u.length,O=this.strokeImageInfos.findImage(C),F=O.index,P=0;P<C;++P){var A=u[P];z(O,R(A.x),R(A.y),R(A.cx),R(A.cy));}(t=this.glyphInfos[e.index]={glyph:e,uGlyphRect:[r.x1,-r.y1,r.x2,-r.y2],strokeImageInfo:O,strokes:u,colInfo:N(d,this.colDimImageInfos,this.colCellImageInfos),rowInfo:N(c,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[t.colInfo.dimOffset,t.rowInfo.dimOffset];}return t;function L(e,t,r){var o=u.length;function n(e,t,r){for(var o=e.length;0<o--;){var n=e[o];n<t&&(t=n),r<n&&(r=n);}return {min:t,max:r}}u.push(r);for(var r=n(e,1,0),e=Math.max(Math.floor(9*r.min-.5),0),s=Math.min(Math.ceil(9*r.max+.5),9),i=e;i<s;++i)d[i].push(o);for(var r=n(t,1,0),e=Math.max(Math.floor(9*r.min-.5),0),a=Math.min(Math.ceil(9*r.max+.5),9),l=e;l<a;++l)c[l].push(o);}function R(e){return (e=(r=255)*e)<(t=0)?t:r<e?r:e;var t,r;}function I(e,t,r,o){L([e,r],[t,o],{x:e,y:t,cx:(e+r)/2,cy:(t+o)/2});}function U(e,t,r,o){return Math.abs(r-e)<1e-5&&Math.abs(o-t)<1e-5}function N(e,t,r){for(var o=e.length,n=t.findImage(o),t=n.index,s=0,i=0;i<o;++i)s+=e[i].length;for(var a=r.findImage(s),l=0;l<o;++l){var u=e[l],c=u.length,d=a.index;z(n,d>>7,127&d,c>>7,127&c);for(var h=0;h<c;++h){var f=u[h]+F;z(a,f>>7,127&f,0,0);}}return {cellImageInfo:a,dimOffset:t,dimImageInfo:n}}}}]),t}();B.default.RendererGL.prototype._renderText=function(e,t,r,o,n){if(this._textFont&&"string"!=typeof this._textFont){if(!(n<=o)&&this._doFill){if(this._isOpenType()){e.push();var n=this._doStroke,s=this.drawMode,i=(this._doStroke=!1,this.drawMode=M.TEXTURE,this._textFont.font),a=(a=this._textFont._fontInfo)||(this._textFont._fontInfo=new E(i)),r=this._textFont._handleAlignment(this,t,r,o),o=this._textSize/i.unitsPerEm,l=(this.translate(r.x,r.y,0),this.scale(o,o,1),this.GL),r=!this._defaultFontShader,u=this._getFontShader(),c=(u.init(),u.bindShader(),r&&(u.setUniform("uGridImageSize",[64,64]),u.setUniform("uCellsImageSize",[64,64]),u.setUniform("uStrokeImageSize",[64,64]),u.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),d=(c||((o=this._textGeom=new B.default.Geometry(1,1,function(){for(var e=0;e<=1;e++)for(var t=0;t<=1;t++)this.vertices.push(new B.default.Vector(t,e,0)),this.uvs.push(t,e);})).computeFaces().computeNormals(),c=this.createBuffers("glyph",o)),!0),r=!1,o=void 0;try{for(var h,f=this.retainedMode.buffers.text[Symbol.iterator]();!(d=(h=f.next()).done);d=!0)h.value._prepareBuffer(c,u);}catch(e){r=!0,o=e;}finally{try{d||null==f.return||f.return();}finally{if(r)throw o}}this._bindBuffer(c.indexBuffer,l.ELEMENT_ARRAY_BUFFER),u.setUniform("uMaterialColor",this.curFillColor),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var p=0,m=null,y=i.stringToGlyphs(t),g=!0,v=!1,b=void 0;try{for(var j,_=y[Symbol.iterator]();!(g=(j=_.next()).done);g=!0){var x,w,S=j.value,T=(m&&(p+=i.getKerningValue(m,S)),a.getGlyphInfo(S));T.uGlyphRect&&(x=T.rowInfo,w=T.colInfo,u.setUniform("uSamplerStrokes",T.strokeImageInfo.imageData),u.setUniform("uSamplerRowStrokes",x.cellImageInfo.imageData),u.setUniform("uSamplerRows",x.dimImageInfo.imageData),u.setUniform("uSamplerColStrokes",w.cellImageInfo.imageData),u.setUniform("uSamplerCols",w.dimImageInfo.imageData),u.setUniform("uGridOffset",T.uGridOffset),u.setUniform("uGlyphRect",T.uGlyphRect),u.setUniform("uGlyphOffset",p),u.bindTextures(),l.drawElements(l.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),p+=S.advanceWidth,m=S;}}catch(e){v=!0,b=e;}finally{try{g||null==_.return||_.return();}finally{if(v)throw b}}}finally{u.unbindShader(),this._doStroke=n,this.drawMode=s,l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.pop();}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return e}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.");};},{"../core/constants":264,"../core/main":275,"./p5.RendererGL.Retained":331,"./p5.Shader":333,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}]},{},[259])(259)}); 
        
        } (p5_min$2));
        
        
        
        var p5_minExports = p5_min$2.exports;
        
        var p5_min = /*@__PURE__*/getDefaultExportFromCjs(p5_minExports);
        
        
        
        var p5_min$1 = /*#__PURE__*/_mergeNamespaces({
        
        	__proto__: null,
        
        	default: p5_min
        
        }, [p5_minExports]);
        
        
        
        export { ActionElement, App, Boinger, CheckBox, Count, Declare, Dynamic, Equation, Incrementer, Marbling, Radio, Range, Select, Seriously, Sketch, Snowflakes, StaticContainer, SvelteCounter };
        
        
        
        	const app = new Snowflakes({
        
        		target: document.body,
        
        		hydrate: true
        
        	});
        
        </script>
        
        <style>.dynamic.svelte-38ydfs{text-decoration:underline dotted;cursor:ew-resize;user-select:none}</style>

      transcription: >-
        




---

